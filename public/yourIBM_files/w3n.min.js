!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.1.0",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:f.call(this)},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=r.isArray(d)))?(e?(e=!1,f=c&&r.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"ï¿½":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"label"in b&&b.disabled===a||"form"in b&&b.disabled===a||"form"in b&&b.disabled===!1&&(b.isDisabled===a||b.isDisabled!==!a&&("label"in b||!ea(b))!==a)}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d])if(1===b.nodeType||g)return a(b,c,e)}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d])if((1===b.nodeType||g)&&a(b,c,i))return!0}else while(b=b[d])if(1===b.nodeType||g)if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=ya(b[c]),f[u]?d.push(f):e.push(f);f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(_,aa),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=V.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(_,aa),$.test(j[0].type)&&qa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&sa(j),!a)return G.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||$.test(a)&&qa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,C=/^.[^:#\[\.,]*$/;function D(a,b,c){if(r.isFunction(b))return r.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return r.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(C.test(b))return r.filter(b,a,c);b=r.filter(b,a)}return r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType})}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(D(this,a||[],!1))},not:function(a){return this.pushStack(D(this,a||[],!0))},is:function(a){return!!D(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var E,F=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,G=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||E,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:F.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),B.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};G.prototype=r.fn,E=r(d);var H=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function J(a,b){while((a=a[b])&&1!==a.nodeType);return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return J(a,"nextSibling")},prev:function(a){return J(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return a.contentDocument||r.merge([],a.childNodes)}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(I[a]||r.uniqueSort(e),H.test(a)&&e.reverse()),this.pushStack(e)}});var K=/\S+/g;function L(a){var b={};return r.each(a.match(K)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?L(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j};function M(a){return a}function N(a){throw a}function O(a,b,c){var d;try{a&&r.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&r.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},catch:function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,M,e),g(f,c,N,e)):(f++,j.call(a,g(f,c,M,e),g(f,c,N,e),g(f,c,M,c.notifyWith))):(d!==M&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==N&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:M,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:M)),c[2][3].add(g(0,a,r.isFunction(d)?d:N))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(O(a,g.done(h(c)).resolve,g.reject),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)O(e[c],h(c),g.reject);return g.promise()}});var P=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&P.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var Q=r.Deferred();r.fn.ready=function(a){return Q.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,holdReady:function(a){a?r.readyWait++:r.ready(!0)},ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||Q.resolveWith(d,[r]))}}),r.ready.then=Q.then;function R(){d.removeEventListener("DOMContentLoaded",R),a.removeEventListener("load",R),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",R),a.addEventListener("load",R));var S=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)S(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,
r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},T=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function U(){this.expando=r.expando+U.uid++}U.uid=1,U.prototype={cache:function(a){var b=a[this.expando];return b||(b={},T(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){r.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(K)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var V=new U,W=new U,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function Z(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Y,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:X.test(c)?JSON.parse(c):c)}catch(e){}W.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return W.hasData(a)||V.hasData(a)},data:function(a,b,c){return W.access(a,b,c)},removeData:function(a,b){W.remove(a,b)},_data:function(a,b,c){return V.access(a,b,c)},_removeData:function(a,b){V.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=W.get(f),1===f.nodeType&&!V.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),Z(f,d,e[d])));V.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){W.set(this,a)}):S(this,function(b){var c;if(f&&void 0===b){if(c=W.get(f,a),void 0!==c)return c;if(c=Z(f,a),void 0!==c)return c}else this.each(function(){W.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){W.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=V.get(a,b),c&&(!d||r.isArray(c)?d=V.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return V.get(a,c)||V.access(a,c,{empty:r.Callbacks("once memory").add(function(){V.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=V.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var $=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_=new RegExp("^(?:([+-])=|)("+$+")([a-z%]*)$","i"),aa=["Top","Right","Bottom","Left"],ba=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},ca=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};function da(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&_.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,r.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var ea={};function fa(a){var b,c=a.ownerDocument,d=a.nodeName,e=ea[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),ea[d]=e,e)}function ga(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=V.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&ba(d)&&(e[f]=fa(d))):"none"!==c&&(e[f]="none",V.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ga(this,!0)},hide:function(){return ga(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){ba(this)?r(this).show():r(this).hide()})}});var ha=/^(?:checkbox|radio)$/i,ia=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ja=/^$|\/(?:java|ecma)script/i,ka={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ka.optgroup=ka.option,ka.tbody=ka.tfoot=ka.colgroup=ka.caption=ka.thead,ka.th=ka.td;function la(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&r.nodeName(a,b)?r.merge([a],c):c}function ma(a,b){for(var c=0,d=a.length;c<d;c++)V.set(a[c],"globalEval",!b||V.get(b[c],"globalEval"))}var na=/<|&#?\w+;/;function oa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(na.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ia.exec(f)||["",""])[1].toLowerCase(),i=ka[h]||ka._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",n=0;while(f=m[n++])if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=la(l.appendChild(f),"script"),j&&ma(g),c){k=0;while(f=g[k++])ja.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var pa=d.documentElement,qa=/^key/,ra=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,sa=/^([^.]*)(?:\.(.+)|)/;function ta(){return!0}function ua(){return!1}function va(){try{return d.activeElement}catch(a){}}function wa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)wa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=ua;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(pa,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(K)||[""],j=b.length;while(j--)h=sa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.hasData(a)&&V.get(a);if(q&&(i=q.events)){b=(b||"").match(K)||[""],j=b.length;while(j--)if(h=sa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&V.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(V.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped())b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;c<h;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?r(e,this).index(i)>-1:r.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==va()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===va()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r.nodeName(this,"input"))return this.click(),!1},_default:function(a){return r.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ta:ua,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:ua,isPropagationStopped:ua,isImmediatePropagationStopped:ua,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ta,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ta,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ta,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&qa.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&ra.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return wa(this,a,b,c,d)},one:function(a,b,c,d){return wa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=ua),this.each(function(){r.event.remove(this,a,c,b)})}});var xa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ya=/<script|<style|<link/i,za=/checked\s*(?:[^=]|=\s*.checked.)/i,Aa=/^true\/(.*)/,Ba=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ca(a,b){return r.nodeName(a,"table")&&r.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function Da(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Ea(a){var b=Aa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Fa(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(V.hasData(a)&&(f=V.access(a),g=V.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c])}W.hasData(a)&&(h=W.access(a),i=r.extend({},h),W.set(b,i))}}function Ga(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ha.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ha(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&za.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ha(f,b,c,d)});if(m&&(e=oa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(la(e,"script"),Da),i=h.length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,la(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Ea),l=0;l<i;l++)j=h[l],ja.test(j.type||"")&&!V.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Ba,""),k))}return a}function Ia(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(la(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&ma(la(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(xa,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=la(h),f=la(a),d=0,e=f.length;d<e;d++)Ga(f[d],g[d]);if(b)if(c)for(f=f||la(a),g=g||la(h),d=0,e=f.length;d<e;d++)Fa(f[d],g[d]);else Fa(a,h);return g=la(h,"script"),g.length>0&&ma(g,!i&&la(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(T(c)){if(b=c[V.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[V.expando]=void 0}c[W.expando]&&(c[W.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ia(this,a,!0)},remove:function(a){return Ia(this,a)},text:function(a){return S(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.appendChild(a)}})},prepend:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(la(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return S(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!ya.test(a)&&!ka[(ia.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(la(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ha(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(la(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var Ja=/^margin/,Ka=new RegExp("^("+$+")(?!px)[a-z%]+$","i"),La=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",pa.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,pa.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Ma(a,b,c){var d,e,f,g,h=a.style;return c=c||La(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&Ka.test(g)&&Ja.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Na(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Oa=/^(none|table(?!-c[ea]).+)/,Pa={position:"absolute",visibility:"hidden",display:"block"},Qa={letterSpacing:"0",fontWeight:"400"},Ra=["Webkit","Moz","ms"],Sa=d.createElement("div").style;function Ta(a){if(a in Sa)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ra.length;while(c--)if(a=Ra[c]+b,a in Sa)return a}function Ua(a,b,c){var d=_.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Va(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+aa[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+aa[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+aa[f]+"Width",!0,e))):(g+=r.css(a,"padding"+aa[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+aa[f]+"Width",!0,e)));return g}function Wa(a,b,c){var d,e=!0,f=La(a),g="border-box"===r.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=Ma(a,b,f),(d<0||null==d)&&(d=a.style[b]),Ka.test(d))return d;e=g&&(o.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+Va(a,b,c||(g?"border":"content"),e,f)+"px"}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ma(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=a.style;return b=r.cssProps[h]||(r.cssProps[h]=Ta(h)||h),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=_.exec(c))&&e[1]&&(c=da(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b);return b=r.cssProps[h]||(r.cssProps[h]=Ta(h)||h),g=r.cssHooks[b]||r.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Ma(a,b,d)),"normal"===e&&b in Qa&&(e=Qa[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Oa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?Wa(a,b,d):ca(a,Pa,function(){return Wa(a,b,d)})},set:function(a,c,d){var e,f=d&&La(a),g=d&&Va(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=_.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Ua(a,c,g)}}}),r.cssHooks.marginLeft=Na(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Ma(a,"marginLeft"))||a.getBoundingClientRect().left-ca(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+aa[d]+b]=f[d]||f[d-2]||f[0];return e}},Ja.test(a)||(r.cssHooks[a+b].set=Ua)}),r.fn.extend({css:function(a,b){return S(this,function(a,b,c){var d,e,f={},g=0;if(r.isArray(b)){for(d=La(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function Xa(a,b,c,d,e){return new Xa.prototype.init(a,b,c,d,e)}r.Tween=Xa,Xa.prototype={constructor:Xa,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=Xa.propHooks[this.prop];return a&&a.get?a.get(this):Xa.propHooks._default.get(this)},run:function(a){var b,c=Xa.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Xa.propHooks._default.set(this),this}},Xa.prototype.init.prototype=Xa.prototype,Xa.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},Xa.propHooks.scrollTop=Xa.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=Xa.prototype.init,r.fx.step={};var Ya,Za,$a=/^(?:toggle|show|hide)$/,_a=/queueHooks$/;function ab(){Za&&(a.requestAnimationFrame(ab),r.fx.tick())}function bb(){return a.setTimeout(function(){Ya=void 0}),Ya=r.now()}function cb(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=aa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function db(a,b,c){for(var d,e=(gb.tweeners[b]||[]).concat(gb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function eb(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&ba(a),q=V.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],$a.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=V.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ga([a],!0),j=a.style.display||j,k=r.css(a,"display"),ga([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=V.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ga([a],!0),m.done(function(){p||ga([a]),V.remove(a,"fxshow");for(d in n)r.style(a,d,n[d])})),i=db(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function fb(a,b){var c,d,e,f,g;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],r.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function gb(a,b,c){var d,e,f=0,g=gb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Ya||bb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:Ya||bb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(fb(k,j.opts.specialEasing);f<g;f++)if(d=gb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,db,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}r.Animation=r.extend(gb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return da(c.elem,a,_.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(K);for(var c,d=0,e=a.length;d<e;d++)c=a[d],gb.tweeners[c]=gb.tweeners[c]||[],gb.tweeners[c].unshift(b)},prefilters:[eb],prefilter:function(a,b){b?gb.prefilters.unshift(a):gb.prefilters.push(a)}}),r.speed=function(a,b,c){var e=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off||d.hidden?e.duration=0:e.duration="number"==typeof e.duration?e.duration:e.duration in r.fx.speeds?r.fx.speeds[e.duration]:r.fx.speeds._default,null!=e.queue&&e.queue!==!0||(e.queue="fx"),e.old=e.complete,e.complete=function(){r.isFunction(e.old)&&e.old.call(this),e.queue&&r.dequeue(this,e.queue)},e},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ba).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=gb(this,r.extend({},a),f);(e||V.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=V.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&_a.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=V.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(cb(b,!0),a,d,e)}}),r.each({slideDown:cb("show"),slideUp:cb("hide"),slideToggle:cb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(Ya=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),Ya=void 0},r.fx.timer=function(a){r.timers.push(a),a()?r.fx.start():r.timers.pop()},r.fx.interval=13,r.fx.start=function(){Za||(Za=a.requestAnimationFrame?a.requestAnimationFrame(ab):a.setInterval(r.fx.tick,r.fx.interval))},r.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame(Za):a.clearInterval(Za),Za=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var hb,ib=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return S(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?hb:void 0)),void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&r.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(K);
if(e&&1===a.nodeType)while(c=e[d++])a.removeAttribute(c)}}),hb={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ib[b]||r.find.attr;ib[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=ib[g],ib[g]=e,e=null!=c(a,b,d)?g:null,ib[g]=f),e}});var jb=/^(?:input|select|textarea|button)$/i,kb=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return S(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):jb.test(a.nodeName)||kb.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});var lb=/[\t\r\n\f]/g;function mb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,mb(this)))});if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=mb(c),d=1===c.nodeType&&(" "+e+" ").replace(lb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=r.trim(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,mb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=mb(c),d=1===c.nodeType&&(" "+e+" ").replace(lb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=r.trim(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,mb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(K)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=mb(this),b&&V.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":V.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+mb(c)+" ").replace(lb," ").indexOf(b)>-1)return!0;return!1}});var nb=/\r/g,ob=/[\x20\t\r\n\f]+/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":r.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(nb,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:r.trim(r.text(a)).replace(ob," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&!c.disabled&&(!c.parentNode.disabled||!r.nodeName(c.parentNode,"optgroup"))){if(b=r(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(r.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var pb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!pb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,pb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped())b.type=g>1?j:n.bindType||p,m=(V.get(h,"events")||{})[b.type]&&V.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&T(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!T(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=V.access(d,b);e||d.addEventListener(a,c,!0),V.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=V.access(d,b)-1;e?V.access(d,b,e):(d.removeEventListener(a,c,!0),V.remove(d,b))}}});var qb=a.location,rb=r.now(),sb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var tb=/\[\]$/,ub=/\r?\n/g,vb=/^(?:submit|button|image|reset|file)$/i,wb=/^(?:input|select|textarea|keygen)/i;function xb(a,b,c,d){var e;if(r.isArray(b))r.each(b,function(b,e){c||tb.test(a)?d(a,e):xb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)xb(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(r.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)xb(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&wb.test(this.nodeName)&&!vb.test(a)&&(this.checked||!ha.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:r.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(ub,"\r\n")}}):{name:b.name,value:c.replace(ub,"\r\n")}}).get()}});var yb=/%20/g,zb=/#.*$/,Ab=/([?&])_=[^&]*/,Bb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Cb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb={},Gb={},Hb="*/".concat("*"),Ib=d.createElement("a");Ib.href=qb.href;function Jb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(K)||[];if(r.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Kb(a,b,c,d){var e={},f=a===Gb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Lb(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function Mb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Nb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qb.href,type:"GET",isLocal:Cb.test(qb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Hb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Lb(Lb(a,r.ajaxSettings),b):Lb(r.ajaxSettings,a)},ajaxPrefilter:Jb(Fb),ajaxTransport:Jb(Gb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Bb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||qb.href)+"").replace(Eb,qb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(K)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ib.protocol+"//"+Ib.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Kb(Fb,o,c,y),k)return y;l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Db.test(o.type),f=o.url.replace(zb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(yb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(sb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Ab,""),n=(sb.test(f)?"&":"?")+"_="+rb++ +n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Hb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Kb(Gb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Mb(o,y,d)),v=Nb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Ob={0:200,1223:204},Pb=r.ajaxSettings.xhr();o.cors=!!Pb&&"withCredentials"in Pb,o.ajax=Pb=!!Pb,r.ajaxTransport(function(b){var c,d;if(o.cors||Pb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Ob[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Qb=[],Rb=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Qb.pop()||r.expando+"_"+rb++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Rb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Rb,"$1"+e):b.jsonp!==!1&&(b.url+=(sb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Qb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=B.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=oa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=r.trim(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length};function Sb(a){return r.isWindow(a)?a:9===a.nodeType&&a.defaultView}r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=Sb(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),r.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position"))a=a.offsetParent;return a||pa})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return S(this,function(a,d,e){var f=Sb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Na(o.pixelPosition,function(a,c){if(c)return c=Ma(a,b),Ka.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return S(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Tb=a.jQuery,Ub=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Ub),b&&a.jQuery===r&&(a.jQuery=Tb),r},b||(a.jQuery=a.$=r),r});(function(){function n(n,t){if(n!==t){var r=null===n,e=n===w,u=n===n,o=null===t,i=t===w,f=t===t;if(n>t&&!o||!u||r&&!i&&f||e&&f)return 1;if(n<t&&!r||!f||o&&!e&&u||i&&u)return-1}return 0}function t(n,t,r){for(var e=n.length,u=r?e:-1;r?u--:++u<e;)if(t(n[u],u,n))return u;return-1}function r(n,t,r){if(t!==t)return p(n,r);r-=1;for(var e=n.length;++r<e;)if(n[r]===t)return r;return-1}function e(n){return typeof n=="function"||false}function u(n){return null==n?"":n+""}function o(n,t){for(var r=-1,e=n.length;++r<e&&-1<t.indexOf(n.charAt(r)););return r}function i(n,t){for(var r=n.length;r--&&-1<t.indexOf(n.charAt(r)););return r}function f(t,r){return n(t.a,r.a)||t.b-r.b}function a(n){return Nn[n]}function c(n){return Tn[n]}function l(n,t,r){return t?n=Bn[n]:r&&(n=Dn[n]),"\\"+n}function s(n){return"\\"+Dn[n]}function p(n,t,r){var e=n.length;for(t+=r?0:-1;r?t--:++t<e;){var u=n[t];if(u!==u)return t}return-1}function h(n){return!!n&&typeof n=="object"}function _(n){return 160>=n&&9<=n&&13>=n||32==n||160==n||5760==n||6158==n||8192<=n&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function v(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;)n[r]===t&&(n[r]=z,o[++u]=r);return o}function g(n){for(var t=-1,r=n.length;++t<r&&_(n.charCodeAt(t)););return t}function y(n){for(var t=n.length;t--&&_(n.charCodeAt(t)););return t}function d(n){return Ln[n]}function m(_){function Nn(n){if(h(n)&&!(Oo(n)||n instanceof zn)){if(n instanceof Ln)return n;if(nu.call(n,"__chain__")&&nu.call(n,"__wrapped__"))return Mr(n)}return new Ln(n)}function Tn(){}function Ln(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t}function zn(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=false,this.__iteratees__=[],this.__takeCount__=Ru,this.__views__=[]}function Bn(){this.__data__={}}function Dn(n){var t=n?n.length:0;for(this.data={hash:gu(null),set:new lu};t--;)this.push(n[t])}function Mn(n,t){var r=n.data;return(typeof t=="string"||ge(t)?r.set.has(t):r.hash[t])?0:-1}function qn(n,t){var r=-1,e=n.length;for(t||(t=Be(e));++r<e;)t[r]=n[r];return t}function Pn(n,t){for(var r=-1,e=n.length;++r<e&&false!==t(n[r],r,n););return n}function Kn(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return false;return true}function Vn(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;){var i=n[r];t(i,r,n)&&(o[++u]=i)}return o}function Gn(n,t){for(var r=-1,e=n.length,u=Be(e);++r<e;)u[r]=t(n[r],r,n);return u}function Jn(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function Xn(n,t,r,e){var u=-1,o=n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r}function Hn(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return true;return false}function Qn(n,t,r,e){return n!==w&&nu.call(e,r)?n:t}function nt(n,t,r){for(var e=-1,u=zo(t),o=u.length;++e<o;){var i=u[e],f=n[i],a=r(f,t[i],i,n,t);(a===a?a===f:f!==f)&&(f!==w||i in n)||(n[i]=a)}return n}function tt(n,t){return null==t?n:et(t,zo(t),n)}function rt(n,t){for(var r=-1,e=null==n,u=!e&&Er(n),o=u?n.length:0,i=t.length,f=Be(i);++r<i;){var a=t[r];f[r]=u?Cr(a,o)?n[a]:w:e?w:n[a]}return f}function et(n,t,r){r||(r={});for(var e=-1,u=t.length;++e<u;){var o=t[e];r[o]=n[o]}return r}function ut(n,t,r){var e=typeof n;return"function"==e?t===w?n:Bt(n,t,r):null==n?Fe:"object"==e?bt(n):t===w?ze(n):xt(n,t)}function ot(n,t,r,e,u,o,i){var f;if(r&&(f=u?r(n,e,u):r(n)),f!==w)return f;if(!ge(n))return n;if(e=Oo(n)){if(f=kr(n),!t)return qn(n,f)}else{var a=ru.call(n),c=a==K;if(a!=Z&&a!=B&&(!c||u))return Fn[a]?Rr(n,a,t):u?n:{};if(f=Ir(c?{}:n),!t)return tt(f,n)}for(o||(o=[]),i||(i=[]),u=o.length;u--;)if(o[u]==n)return i[u];return o.push(n),i.push(f),(e?Pn:_t)(n,function(e,u){f[u]=ot(e,t,r,u,n,o,i)}),f}function it(n,t,r){if(typeof n!="function")throw new Ge(L);return su(function(){n.apply(w,r)},t)}function ft(n,t){var e=n?n.length:0,u=[];if(!e)return u;var o=-1,i=xr(),f=i===r,a=f&&t.length>=F&&gu&&lu?new Dn(t):null,c=t.length;a&&(i=Mn,f=false,t=a);n:for(;++o<e;)if(a=n[o],f&&a===a){for(var l=c;l--;)if(t[l]===a)continue n;u.push(a)}else 0>i(t,a,0)&&u.push(a);return u}function at(n,t){var r=true;return Su(n,function(n,e,u){return r=!!t(n,e,u)}),r}function ct(n,t,r,e){var u=e,o=u;return Su(n,function(n,i,f){i=+t(n,i,f),(r(i,u)||i===e&&i===o)&&(u=i,o=n)}),o}function lt(n,t){var r=[];return Su(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function st(n,t,r,e){var u;return r(n,function(n,r,o){return t(n,r,o)?(u=e?r:n,false):void 0}),u}function pt(n,t,r,e){e||(e=[]);for(var u=-1,o=n.length;++u<o;){var i=n[u];h(i)&&Er(i)&&(r||Oo(i)||pe(i))?t?pt(i,t,r,e):Jn(e,i):r||(e[e.length]=i)}return e}function ht(n,t){Nu(n,t,Re)}function _t(n,t){return Nu(n,t,zo)}function vt(n,t){return Tu(n,t,zo)}function gt(n,t){for(var r=-1,e=t.length,u=-1,o=[];++r<e;){var i=t[r];ve(n[i])&&(o[++u]=i)}return o}function yt(n,t,r){if(null!=n){r!==w&&r in Br(n)&&(t=[r]),r=0;for(var e=t.length;null!=n&&r<e;)n=n[t[r++]];return r&&r==e?n:w}}function dt(n,t,r,e,u,o){if(n===t)n=true;else if(null==n||null==t||!ge(n)&&!h(t))n=n!==n&&t!==t;else n:{var i=dt,f=Oo(n),a=Oo(t),c=D,l=D;f||(c=ru.call(n),c==B?c=Z:c!=Z&&(f=xe(n))),a||(l=ru.call(t),l==B?l=Z:l!=Z&&xe(t));var s=c==Z,a=l==Z,l=c==l;if(!l||f||s){if(!e&&(c=s&&nu.call(n,"__wrapped__"),a=a&&nu.call(t,"__wrapped__"),c||a)){n=i(c?n.value():n,a?t.value():t,r,e,u,o);break n}if(l){for(u||(u=[]),o||(o=[]),c=u.length;c--;)if(u[c]==n){n=o[c]==t;break n}u.push(n),o.push(t),n=(f?yr:mr)(n,t,i,r,e,u,o),u.pop(),o.pop()}else n=false}else n=dr(n,t,c)}return n}function mt(n,t,r){var e=t.length,u=e,o=!r;if(null==n)return!u;for(n=Br(n);e--;){var i=t[e];if(o&&i[2]?i[1]!==n[i[0]]:!(i[0]in n))return false}for(;++e<u;){var i=t[e],f=i[0],a=n[f],c=i[1];if(o&&i[2]){if(a===w&&!(f in n))return false}else if(i=r?r(a,c,f):w,i===w?!dt(c,a,r,true):!i)return false}return true}function wt(n,t){var r=-1,e=Er(n)?Be(n.length):[];return Su(n,function(n,u,o){e[++r]=t(n,u,o)}),e}function bt(n){var t=Ar(n);if(1==t.length&&t[0][2]){var r=t[0][0],e=t[0][1];return function(n){return null==n?false:n[r]===e&&(e!==w||r in Br(n))}}return function(n){return mt(n,t)}}function xt(n,t){var r=Oo(n),e=Wr(n)&&t===t&&!ge(t),u=n+"";return n=Dr(n),function(o){if(null==o)return false;var i=u;if(o=Br(o),!(!r&&e||i in o)){if(o=1==n.length?o:yt(o,Et(n,0,-1)),null==o)return false;i=Zr(n),o=Br(o)}return o[i]===t?t!==w||i in o:dt(t,o[i],w,true)}}function At(n,t,r,e,u){if(!ge(n))return n;var o=Er(t)&&(Oo(t)||xe(t)),i=o?w:zo(t);return Pn(i||t,function(f,a){if(i&&(a=f,f=t[a]),h(f)){e||(e=[]),u||(u=[]);n:{for(var c=a,l=e,s=u,p=l.length,_=t[c];p--;)if(l[p]==_){n[c]=s[p];break n}var p=n[c],v=r?r(p,_,c,n,t):w,g=v===w;g&&(v=_,Er(_)&&(Oo(_)||xe(_))?v=Oo(p)?p:Er(p)?qn(p):[]:me(_)||pe(_)?v=pe(p)?ke(p):me(p)?p:{}:g=false),l.push(_),s.push(v),g?n[c]=At(v,_,r,l,s):(v===v?v!==p:p===p)&&(n[c]=v)}}else c=n[a],l=r?r(c,f,a,n,t):w,(s=l===w)&&(l=f),l===w&&(!o||a in n)||!s&&(l===l?l===c:c!==c)||(n[a]=l)}),n}function jt(n){return function(t){return null==t?w:t[n]}}function kt(n){var t=n+"";return n=Dr(n),function(r){return yt(r,n,t)}}function It(n,t){for(var r=n?t.length:0;r--;){var e=t[r];if(e!=u&&Cr(e)){var u=e;pu.call(n,e,1)}}}function Rt(n,t){return n+yu(ku()*(t-n+1))}function Ot(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=false,n):t(r,n,u,o)}),r}function Et(n,t,r){var e=-1,u=n.length;for(t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r=r===w||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=Be(u);++e<u;)r[e]=n[e+t];return r}function Ct(n,t){var r;return Su(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Ut(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function Wt(t,r,e){var u=wr(),o=-1;return r=Gn(r,function(n){return u(n)}),t=wt(t,function(n){return{a:Gn(r,function(t){return t(n)}),b:++o,c:n}}),Ut(t,function(t,r){var u;n:{for(var o=-1,i=t.a,f=r.a,a=i.length,c=e.length;++o<a;)if(u=n(i[o],f[o])){if(o>=c)break n;o=e[o],u*="asc"===o||true===o?1:-1;break n}u=t.b-r.b}return u})}function $t(n,t){var r=0;return Su(n,function(n,e,u){r+=+t(n,e,u)||0}),r}function St(n,t){var e=-1,u=xr(),o=n.length,i=u===r,f=i&&o>=F,a=f&&gu&&lu?new Dn(void 0):null,c=[];a?(u=Mn,i=false):(f=false,a=t?[]:c);n:for(;++e<o;){var l=n[e],s=t?t(l,e,n):l;if(i&&l===l){for(var p=a.length;p--;)if(a[p]===s)continue n;t&&a.push(s),c.push(l)}else 0>u(a,s,0)&&((t||f)&&a.push(s),c.push(l))}return c}function Ft(n,t){for(var r=-1,e=t.length,u=Be(e);++r<e;)u[r]=n[t[r]];return u}function Nt(n,t,r,e){for(var u=n.length,o=e?u:-1;(e?o--:++o<u)&&t(n[o],o,n););return r?Et(n,e?0:o,e?o+1:u):Et(n,e?o+1:0,e?u:o)}function Tt(n,t){var r=n;r instanceof zn&&(r=r.value());for(var e=-1,u=t.length;++e<u;)var o=t[e],r=o.func.apply(o.thisArg,Jn([r],o.args));return r}function Lt(n,t,r){var e=0,u=n?n.length:e;if(typeof t=="number"&&t===t&&u<=Eu){for(;e<u;){var o=e+u>>>1,i=n[o];(r?i<=t:i<t)&&null!==i?e=o+1:u=o}return u}return zt(n,t,Fe,r)}function zt(n,t,r,e){t=r(t);for(var u=0,o=n?n.length:0,i=t!==t,f=null===t,a=t===w;u<o;){var c=yu((u+o)/2),l=r(n[c]),s=l!==w,p=l===l;(i?p||e:f?p&&s&&(e||null!=l):a?p&&(e||s):null==l?0:e?l<=t:l<t)?u=c+1:o=c}return xu(o,Ou)}function Bt(n,t,r){if(typeof n!="function")return Fe;if(t===w)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)};case 5:return function(r,e,u,o,i){return n.call(t,r,e,u,o,i)}}return function(){return n.apply(t,arguments)}}function Dt(n){var t=new ou(n.byteLength);return new hu(t).set(new hu(n)),t}function Mt(n,t,r){for(var e=r.length,u=-1,o=bu(n.length-e,0),i=-1,f=t.length,a=Be(f+o);++i<f;)a[i]=t[i];for(;++u<e;)a[r[u]]=n[u];for(;o--;)a[i++]=n[u++];return a}function qt(n,t,r){for(var e=-1,u=r.length,o=-1,i=bu(n.length-u,0),f=-1,a=t.length,c=Be(i+a);++o<i;)c[o]=n[o];for(i=o;++f<a;)c[i+f]=t[f];for(;++e<u;)c[i+r[e]]=n[o++];
return c}function Pt(n,t){return function(r,e,u){var o=t?t():{};if(e=wr(e,u,3),Oo(r)){u=-1;for(var i=r.length;++u<i;){var f=r[u];n(o,f,e(f,u,r),r)}}else Su(r,function(t,r,u){n(o,t,e(t,r,u),u)});return o}}function Kt(n){return le(function(t,r){var e=-1,u=null==t?0:r.length,o=2<u?r[u-2]:w,i=2<u?r[2]:w,f=1<u?r[u-1]:w;for(typeof o=="function"?(o=Bt(o,f,5),u-=2):(o=typeof f=="function"?f:w,u-=o?1:0),i&&Ur(r[0],r[1],i)&&(o=3>u?w:o,u=1);++e<u;)(i=r[e])&&n(t,i,o);return t})}function Vt(n,t){return function(r,e){var u=r?Bu(r):0;if(!Sr(u))return n(r,e);for(var o=t?u:-1,i=Br(r);(t?o--:++o<u)&&false!==e(i[o],o,i););return r}}function Zt(n){return function(t,r,e){var u=Br(t);e=e(t);for(var o=e.length,i=n?o:-1;n?i--:++i<o;){var f=e[i];if(false===r(u[f],f,u))break}return t}}function Yt(n,t){function r(){return(this&&this!==Zn&&this instanceof r?e:n).apply(t,arguments)}var e=Jt(n);return r}function Gt(n){return function(t){var r=-1;t=$e(Ce(t));for(var e=t.length,u="";++r<e;)u=n(u,t[r],r);return u}}function Jt(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=$u(n.prototype),t=n.apply(r,t);return ge(t)?t:r}}function Xt(n){function t(r,e,u){return u&&Ur(r,e,u)&&(e=w),r=gr(r,n,w,w,w,w,w,e),r.placeholder=t.placeholder,r}return t}function Ht(n,t){return le(function(r){var e=r[0];return null==e?e:(r.push(t),n.apply(w,r))})}function Qt(n,t){return function(r,e,u){if(u&&Ur(r,e,u)&&(e=w),e=wr(e,u,3),1==e.length){u=r=Oo(r)?r:zr(r);for(var o=e,i=-1,f=u.length,a=t,c=a;++i<f;){var l=u[i],s=+o(l);n(s,a)&&(a=s,c=l)}if(u=c,!r.length||u!==t)return u}return ct(r,e,n,t)}}function nr(n,r){return function(e,u,o){return u=wr(u,o,3),Oo(e)?(u=t(e,u,r),-1<u?e[u]:w):st(e,u,n)}}function tr(n){return function(r,e,u){return r&&r.length?(e=wr(e,u,3),t(r,e,n)):-1}}function rr(n){return function(t,r,e){return r=wr(r,e,3),st(t,r,n,true)}}function er(n){return function(){for(var t,r=arguments.length,e=n?r:-1,u=0,o=Be(r);n?e--:++e<r;){var i=o[u++]=arguments[e];if(typeof i!="function")throw new Ge(L);!t&&Ln.prototype.thru&&"wrapper"==br(i)&&(t=new Ln([],true))}for(e=t?-1:r;++e<r;){var i=o[e],u=br(i),f="wrapper"==u?zu(i):w;t=f&&$r(f[0])&&f[1]==(E|k|R|C)&&!f[4].length&&1==f[9]?t[br(f[0])].apply(t,f[3]):1==i.length&&$r(i)?t[u]():t.thru(i)}return function(){var n=arguments,e=n[0];if(t&&1==n.length&&Oo(e)&&e.length>=F)return t.plant(e).value();for(var u=0,n=r?o[u].apply(this,n):e;++u<r;)n=o[u].call(this,n);return n}}}function ur(n,t){return function(r,e,u){return typeof e=="function"&&u===w&&Oo(r)?n(r,e):t(r,Bt(e,u,3))}}function or(n){return function(t,r,e){return(typeof r!="function"||e!==w)&&(r=Bt(r,e,3)),n(t,r,Re)}}function ir(n){return function(t,r,e){return(typeof r!="function"||e!==w)&&(r=Bt(r,e,3)),n(t,r)}}function fr(n){return function(t,r,e){var u={};return r=wr(r,e,3),_t(t,function(t,e,o){o=r(t,e,o),e=n?o:e,t=n?t:o,u[e]=t}),u}}function ar(n){return function(t,r,e){return t=u(t),(n?t:"")+pr(t,r,e)+(n?"":t)}}function cr(n){var t=le(function(r,e){var u=v(e,t.placeholder);return gr(r,n,w,e,u)});return t}function lr(n,t){return function(r,e,u,o){var i=3>arguments.length;return typeof e=="function"&&o===w&&Oo(r)?n(r,e,u,i):Ot(r,wr(e,o,4),u,i,t)}}function sr(n,t,r,e,u,o,i,f,a,c){function l(){for(var m=arguments.length,b=m,j=Be(m);b--;)j[b]=arguments[b];if(e&&(j=Mt(j,e,u)),o&&(j=qt(j,o,i)),_||y){var b=l.placeholder,k=v(j,b),m=m-k.length;if(m<c){var I=f?qn(f):w,m=bu(c-m,0),E=_?k:w,k=_?w:k,C=_?j:w,j=_?w:j;return t|=_?R:O,t&=~(_?O:R),g||(t&=~(x|A)),j=[n,t,r,C,E,j,k,I,a,m],I=sr.apply(w,j),$r(n)&&Du(I,j),I.placeholder=b,I}}if(b=p?r:this,I=h?b[n]:n,f)for(m=j.length,E=xu(f.length,m),k=qn(j);E--;)C=f[E],j[E]=Cr(C,m)?k[C]:w;return s&&a<j.length&&(j.length=a),this&&this!==Zn&&this instanceof l&&(I=d||Jt(n)),I.apply(b,j)}var s=t&E,p=t&x,h=t&A,_=t&k,g=t&j,y=t&I,d=h?w:Jt(n);return l}function pr(n,t,r){return n=n.length,t=+t,n<t&&mu(t)?(t-=n,r=null==r?" ":r+"",Ue(r,vu(t/r.length)).slice(0,t)):""}function hr(n,t,r,e){function u(){for(var t=-1,f=arguments.length,a=-1,c=e.length,l=Be(c+f);++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++t];return(this&&this!==Zn&&this instanceof u?i:n).apply(o?r:this,l)}var o=t&x,i=Jt(n);return u}function _r(n){var t=Pe[n];return function(n,r){return(r=r===w?0:+r||0)?(r=au(10,r),t(n*r)/r):t(n)}}function vr(n){return function(t,r,e,u){var o=wr(e);return null==e&&o===ut?Lt(t,r,n):zt(t,r,o(e,u,1),n)}}function gr(n,t,r,e,u,o,i,f){var a=t&A;if(!a&&typeof n!="function")throw new Ge(L);var c=e?e.length:0;if(c||(t&=~(R|O),e=u=w),c-=u?u.length:0,t&O){var l=e,s=u;e=u=w}var p=a?w:zu(n);return r=[n,t,r,e,u,l,s,o,i,f],p&&(e=r[1],t=p[1],f=e|t,u=t==E&&e==k||t==E&&e==C&&r[7].length<=p[8]||t==(E|C)&&e==k,(f<E||u)&&(t&x&&(r[2]=p[2],f|=e&x?0:j),(e=p[3])&&(u=r[3],r[3]=u?Mt(u,e,p[4]):qn(e),r[4]=u?v(r[3],z):qn(p[4])),(e=p[5])&&(u=r[5],r[5]=u?qt(u,e,p[6]):qn(e),r[6]=u?v(r[5],z):qn(p[6])),(e=p[7])&&(r[7]=qn(e)),t&E&&(r[8]=null==r[8]?p[8]:xu(r[8],p[8])),null==r[9]&&(r[9]=p[9]),r[0]=p[0],r[1]=f),t=r[1],f=r[9]),r[9]=null==f?a?0:n.length:bu(f-c,0)||0,(p?Lu:Du)(t==x?Yt(r[0],r[2]):t!=R&&t!=(x|R)||r[4].length?sr.apply(w,r):hr.apply(w,r),r)}function yr(n,t,r,e,u,o,i){var f=-1,a=n.length,c=t.length;if(a!=c&&(!u||c<=a))return false;for(;++f<a;){var l=n[f],c=t[f],s=e?e(u?c:l,u?l:c,f):w;if(s!==w){if(s)continue;return false}if(u){if(!Hn(t,function(n){return l===n||r(l,n,e,u,o,i)}))return false}else if(l!==c&&!r(l,c,e,u,o,i))return false}return true}function dr(n,t,r){switch(r){case M:case q:return+n==+t;case P:return n.name==t.name&&n.message==t.message;case V:return n!=+n?t!=+t:n==+t;case Y:case G:return n==t+""}return false}function mr(n,t,r,e,u,o,i){var f=zo(n),a=f.length,c=zo(t).length;if(a!=c&&!u)return false;for(c=a;c--;){var l=f[c];if(!(u?l in t:nu.call(t,l)))return false}for(var s=u;++c<a;){var l=f[c],p=n[l],h=t[l],_=e?e(u?h:p,u?p:h,l):w;if(_===w?!r(p,h,e,u,o,i):!_)return false;s||(s="constructor"==l)}return s||(r=n.constructor,e=t.constructor,!(r!=e&&"constructor"in n&&"constructor"in t)||typeof r=="function"&&r instanceof r&&typeof e=="function"&&e instanceof e)?true:false}function wr(n,t,r){var e=Nn.callback||Se,e=e===Se?ut:e;return r?e(n,t,r):e}function br(n){for(var t=n.name+"",r=Wu[t],e=r?r.length:0;e--;){var u=r[e],o=u.func;if(null==o||o==n)return u.name}return t}function xr(n,t,e){var u=Nn.indexOf||Vr,u=u===Vr?r:u;return n?u(n,t,e):u}function Ar(n){n=Oe(n);for(var t=n.length;t--;){var r=n[t][1];n[t][2]=r===r&&!ge(r)}return n}function jr(n,t){var r=null==n?w:n[t];return ye(r)?r:w}function kr(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&nu.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Ir(n){return n=n.constructor,typeof n=="function"&&n instanceof n||(n=Ve),new n}function Rr(n,t,r){var e=n.constructor;switch(t){case J:return Dt(n);case M:case q:return new e(+n);case X:case H:case Q:case nn:case tn:case rn:case en:case un:case on:return t=n.buffer,new e(r?Dt(t):t,n.byteOffset,n.length);case V:case G:return new e(n);case Y:var u=new e(n.source,kn.exec(n));u.lastIndex=n.lastIndex}return u}function Or(n,t,r){return null==n||Wr(t,n)||(t=Dr(t),n=1==t.length?n:yt(n,Et(t,0,-1)),t=Zr(t)),t=null==n?n:n[t],null==t?w:t.apply(n,r)}function Er(n){return null!=n&&Sr(Bu(n))}function Cr(n,t){return n=typeof n=="number"||On.test(n)?+n:-1,t=null==t?Cu:t,-1<n&&0==n%1&&n<t}function Ur(n,t,r){if(!ge(r))return false;var e=typeof t;return("number"==e?Er(r)&&Cr(t,r.length):"string"==e&&t in r)?(t=r[t],n===n?n===t:t!==t):false}function Wr(n,t){var r=typeof n;return"string"==r&&dn.test(n)||"number"==r?true:Oo(n)?false:!yn.test(n)||null!=t&&n in Br(t)}function $r(n){var t=br(n),r=Nn[t];return typeof r=="function"&&t in zn.prototype?n===r?true:(t=zu(r),!!t&&n===t[0]):false}function Sr(n){return typeof n=="number"&&-1<n&&0==n%1&&n<=Cu}function Fr(n,t){return n===w?t:Eo(n,t,Fr)}function Nr(n,t){n=Br(n);for(var r=-1,e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u}function Tr(n,t){var r={};return ht(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function Lr(n){for(var t=Re(n),r=t.length,e=r&&n.length,u=!!e&&Sr(e)&&(Oo(n)||pe(n)),o=-1,i=[];++o<r;){var f=t[o];(u&&Cr(f,e)||nu.call(n,f))&&i.push(f)}return i}function zr(n){return null==n?[]:Er(n)?ge(n)?n:Ve(n):Ee(n)}function Br(n){return ge(n)?n:Ve(n)}function Dr(n){if(Oo(n))return n;var t=[];return u(n).replace(mn,function(n,r,e,u){t.push(e?u.replace(An,"$1"):r||n)}),t}function Mr(n){return n instanceof zn?n.clone():new Ln(n.__wrapped__,n.__chain__,qn(n.__actions__))}function qr(n,t,r){return n&&n.length?((r?Ur(n,t,r):null==t)&&(t=1),Et(n,0>t?0:t)):[]}function Pr(n,t,r){var e=n?n.length:0;return e?((r?Ur(n,t,r):null==t)&&(t=1),t=e-(+t||0),Et(n,0,0>t?0:t)):[]}function Kr(n){return n?n[0]:w}function Vr(n,t,e){var u=n?n.length:0;if(!u)return-1;if(typeof e=="number")e=0>e?bu(u+e,0):e;else if(e)return e=Lt(n,t),e<u&&(t===t?t===n[e]:n[e]!==n[e])?e:-1;return r(n,t,e||0)}function Zr(n){var t=n?n.length:0;return t?n[t-1]:w}function Yr(n){return qr(n,1)}function Gr(n,t,e,u){if(!n||!n.length)return[];null!=t&&typeof t!="boolean"&&(u=e,e=Ur(n,t,u)?w:t,t=false);var o=wr();if((null!=e||o!==ut)&&(e=o(e,u,3)),t&&xr()===r){t=e;var i;e=-1,u=n.length;for(var o=-1,f=[];++e<u;){var a=n[e],c=t?t(a,e,n):a;e&&i===c||(i=c,f[++o]=a)}n=f}else n=St(n,e);return n}function Jr(n){if(!n||!n.length)return[];var t=-1,r=0;n=Vn(n,function(n){return Er(n)?(r=bu(n.length,r),true):void 0});for(var e=Be(r);++t<r;)e[t]=Gn(n,jt(t));return e}function Xr(n,t,r){return n&&n.length?(n=Jr(n),null==t?n:(t=Bt(t,r,4),Gn(n,function(n){return Xn(n,t,w,true)}))):[]}function Hr(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||Oo(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function Qr(n){return n=Nn(n),n.__chain__=true,n}function ne(n,t,r){return t.call(r,n)}function te(n,t,r){var e=Oo(n)?Kn:at;return r&&Ur(n,t,r)&&(t=w),(typeof t!="function"||r!==w)&&(t=wr(t,r,3)),e(n,t)}function re(n,t,r){var e=Oo(n)?Vn:lt;return t=wr(t,r,3),e(n,t)}function ee(n,t,r,e){var u=n?Bu(n):0;return Sr(u)||(n=Ee(n),u=n.length),r=typeof r!="number"||e&&Ur(t,r,e)?0:0>r?bu(u+r,0):r||0,typeof n=="string"||!Oo(n)&&be(n)?r<=u&&-1<n.indexOf(t,r):!!u&&-1<xr(n,t,r)}function ue(n,t,r){var e=Oo(n)?Gn:wt;return t=wr(t,r,3),e(n,t)}function oe(n,t,r){if(r?Ur(n,t,r):null==t){n=zr(n);var e=n.length;return 0<e?n[Rt(0,e-1)]:w}r=-1,n=je(n);var e=n.length,u=e-1;for(t=xu(0>t?0:+t||0,e);++r<t;){var e=Rt(r,u),o=n[e];n[e]=n[r],n[r]=o}return n.length=t,n}function ie(n,t,r){var e=Oo(n)?Hn:Ct;return r&&Ur(n,t,r)&&(t=w),(typeof t!="function"||r!==w)&&(t=wr(t,r,3)),e(n,t)}function fe(n,t){var r;if(typeof t!="function"){if(typeof n!="function")throw new Ge(L);var e=n;n=t,t=e}return function(){return 0<--n&&(r=t.apply(this,arguments)),1>=n&&(t=w),r}}function ae(n,t,r){function e(t,r){r&&iu(r),a=p=h=w,t&&(_=ho(),c=n.apply(s,f),p||a||(f=s=w))}function u(){var n=t-(ho()-l);0>=n||n>t?e(h,a):p=su(u,n)}function o(){e(g,p)}function i(){if(f=arguments,l=ho(),s=this,h=g&&(p||!y),false===v)var r=y&&!p;else{a||y||(_=l);var e=v-(l-_),i=0>=e||e>v;i?(a&&(a=iu(a)),_=l,c=n.apply(s,f)):a||(a=su(o,e))}return i&&p?p=iu(p):p||t===v||(p=su(u,t)),r&&(i=true,c=n.apply(s,f)),!i||p||a||(f=s=w),c}var f,a,c,l,s,p,h,_=0,v=false,g=true;if(typeof n!="function")throw new Ge(L);if(t=0>t?0:+t||0,true===r)var y=true,g=false;else ge(r)&&(y=!!r.leading,v="maxWait"in r&&bu(+r.maxWait||0,t),g="trailing"in r?!!r.trailing:g);return i.cancel=function(){p&&iu(p),a&&iu(a),_=0,a=p=h=w},i}function ce(n,t){function r(){var e=arguments,u=t?t.apply(this,e):e[0],o=r.cache;return o.has(u)?o.get(u):(e=n.apply(this,e),r.cache=o.set(u,e),e)}if(typeof n!="function"||t&&typeof t!="function")throw new Ge(L);return r.cache=new ce.Cache,r}function le(n,t){if(typeof n!="function")throw new Ge(L);return t=bu(t===w?n.length-1:+t||0,0),function(){for(var r=arguments,e=-1,u=bu(r.length-t,0),o=Be(u);++e<u;)o[e]=r[t+e];switch(t){case 0:return n.call(this,o);case 1:return n.call(this,r[0],o);case 2:return n.call(this,r[0],r[1],o)}for(u=Be(t+1),e=-1;++e<t;)u[e]=r[e];return u[t]=o,n.apply(this,u)}}function se(n,t){return n>t}function pe(n){return h(n)&&Er(n)&&nu.call(n,"callee")&&!cu.call(n,"callee")}function he(n,t,r,e){return e=(r=typeof r=="function"?Bt(r,e,3):w)?r(n,t):w,e===w?dt(n,t,r):!!e}function _e(n){return h(n)&&typeof n.message=="string"&&ru.call(n)==P}function ve(n){return ge(n)&&ru.call(n)==K}function ge(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function ye(n){return null==n?false:ve(n)?uu.test(Qe.call(n)):h(n)&&Rn.test(n)}function de(n){return typeof n=="number"||h(n)&&ru.call(n)==V}function me(n){var t;if(!h(n)||ru.call(n)!=Z||pe(n)||!(nu.call(n,"constructor")||(t=n.constructor,typeof t!="function"||t instanceof t)))return false;var r;return ht(n,function(n,t){r=t}),r===w||nu.call(n,r)}function we(n){return ge(n)&&ru.call(n)==Y}function be(n){return typeof n=="string"||h(n)&&ru.call(n)==G}function xe(n){return h(n)&&Sr(n.length)&&!!Sn[ru.call(n)]}function Ae(n,t){return n<t}function je(n){var t=n?Bu(n):0;return Sr(t)?t?qn(n):[]:Ee(n)}function ke(n){return et(n,Re(n))}function Ie(n){return gt(n,Re(n))}function Re(n){if(null==n)return[];ge(n)||(n=Ve(n));for(var t=n.length,t=t&&Sr(t)&&(Oo(n)||pe(n))&&t||0,r=n.constructor,e=-1,r=typeof r=="function"&&r.prototype===n,u=Be(t),o=0<t;++e<t;)u[e]=e+"";for(var i in n)o&&Cr(i,t)||"constructor"==i&&(r||!nu.call(n,i))||u.push(i);return u}function Oe(n){n=Br(n);for(var t=-1,r=zo(n),e=r.length,u=Be(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u}function Ee(n){return Ft(n,zo(n))}function Ce(n){return(n=u(n))&&n.replace(En,a).replace(xn,"")}function Ue(n,t){var r="";if(n=u(n),t=+t,1>t||!n||!mu(t))return r;do t%2&&(r+=n),t=yu(t/2),n+=n;while(t);return r}function We(n,t,r){var e=n;return(n=u(n))?(r?Ur(e,t,r):null==t)?n.slice(g(n),y(n)+1):(t+="",n.slice(o(n,t),i(n,t)+1)):n}function $e(n,t,r){return r&&Ur(n,t,r)&&(t=w),n=u(n),n.match(t||Wn)||[]}function Se(n,t,r){return r&&Ur(n,t,r)&&(t=w),h(n)?Ne(n):ut(n,t)}function Fe(n){return n}function Ne(n){return bt(ot(n,true))}function Te(n,t,r){if(null==r){var e=ge(t),u=e?zo(t):w;((u=u&&u.length?gt(t,u):w)?u.length:e)||(u=false,r=t,t=n,n=this)}u||(u=gt(t,zo(t)));var o=true,e=-1,i=ve(n),f=u.length;false===r?o=false:ge(r)&&"chain"in r&&(o=r.chain);for(;++e<f;){r=u[e];var a=t[r];n[r]=a,i&&(n.prototype[r]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__);return(e.__actions__=qn(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}return t.apply(n,Jn([this.value()],arguments))}}(a))}return n}function Le(){}function ze(n){return Wr(n)?jt(n):kt(n)}_=_?Yn.defaults(Zn.Object(),_,Yn.pick(Zn,$n)):Zn;var Be=_.Array,De=_.Date,Me=_.Error,qe=_.Function,Pe=_.Math,Ke=_.Number,Ve=_.Object,Ze=_.RegExp,Ye=_.String,Ge=_.TypeError,Je=Be.prototype,Xe=Ve.prototype,He=Ye.prototype,Qe=qe.prototype.toString,nu=Xe.hasOwnProperty,tu=0,ru=Xe.toString,eu=Zn._,uu=Ze("^"+Qe.call(nu).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ou=_.ArrayBuffer,iu=_.clearTimeout,fu=_.parseFloat,au=Pe.pow,cu=Xe.propertyIsEnumerable,lu=jr(_,"Set"),su=_.setTimeout,pu=Je.splice,hu=_.Uint8Array,_u=jr(_,"WeakMap"),vu=Pe.ceil,gu=jr(Ve,"create"),yu=Pe.floor,du=jr(Be,"isArray"),mu=_.isFinite,wu=jr(Ve,"keys"),bu=Pe.max,xu=Pe.min,Au=jr(De,"now"),ju=_.parseInt,ku=Pe.random,Iu=Ke.NEGATIVE_INFINITY,Ru=Ke.POSITIVE_INFINITY,Ou=4294967294,Eu=2147483647,Cu=9007199254740991,Uu=_u&&new _u,Wu={};Nn.support={},Nn.templateSettings={escape:_n,evaluate:vn,interpolate:gn,variable:"",imports:{_:Nn}};var $u=function(){function n(){}return function(t){if(ge(t)){n.prototype=t;var r=new n;n.prototype=w}return r||{}}}(),Su=Vt(_t),Fu=Vt(vt,true),Nu=Zt(),Tu=Zt(true),Lu=Uu?function(n,t){return Uu.set(n,t),n}:Fe,zu=Uu?function(n){return Uu.get(n)}:Le,Bu=jt("length"),Du=function(){var n=0,t=0;return function(r,e){var u=ho(),o=S-(u-t);if(t=u,0<o){if(++n>=$)return r}else n=0;return Lu(r,e)}}(),Mu=le(function(n,t){return h(n)&&Er(n)?ft(n,pt(t,false,true)):[]}),qu=tr(),Pu=tr(true),Ku=le(function(n){for(var t=n.length,e=t,u=Be(l),o=xr(),i=o===r,f=[];e--;){var a=n[e]=Er(a=n[e])?a:[];u[e]=i&&120<=a.length&&gu&&lu?new Dn(e&&a):null}var i=n[0],c=-1,l=i?i.length:0,s=u[0];n:for(;++c<l;)if(a=i[c],0>(s?Mn(s,a):o(f,a,0))){for(e=t;--e;){var p=u[e];if(0>(p?Mn(p,a):o(n[e],a,0)))continue n}s&&s.push(a),f.push(a)}return f}),Vu=le(function(t,r){r=pt(r);var e=rt(t,r);return It(t,r.sort(n)),e}),Zu=vr(),Yu=vr(true),Gu=le(function(n){return St(pt(n,false,true))}),Ju=le(function(n,t){return Er(n)?ft(n,t):[]}),Xu=le(Jr),Hu=le(function(n){var t=n.length,r=2<t?n[t-2]:w,e=1<t?n[t-1]:w;return 2<t&&typeof r=="function"?t-=2:(r=1<t&&typeof e=="function"?(--t,e):w,e=w),n.length=t,Xr(n,r,e)}),Qu=le(function(n){return n=pt(n),this.thru(function(t){t=Oo(t)?t:[Br(t)];for(var r=n,e=-1,u=t.length,o=-1,i=r.length,f=Be(u+i);++e<u;)f[e]=t[e];for(;++o<i;)f[e++]=r[o];return f})}),no=le(function(n,t){return rt(n,pt(t))}),to=Pt(function(n,t,r){nu.call(n,r)?++n[r]:n[r]=1}),ro=nr(Su),eo=nr(Fu,true),uo=ur(Pn,Su),oo=ur(function(n,t){for(var r=n.length;r--&&false!==t(n[r],r,n););return n},Fu),io=Pt(function(n,t,r){nu.call(n,r)?n[r].push(t):n[r]=[t]}),fo=Pt(function(n,t,r){n[r]=t}),ao=le(function(n,t,r){var e=-1,u=typeof t=="function",o=Wr(t),i=Er(n)?Be(n.length):[];return Su(n,function(n){var f=u?t:o&&null!=n?n[t]:w;i[++e]=f?f.apply(n,r):Or(n,t,r)}),i}),co=Pt(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),lo=lr(Xn,Su),so=lr(function(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r},Fu),po=le(function(n,t){if(null==n)return[];var r=t[2];return r&&Ur(t[0],t[1],r)&&(t.length=1),Wt(n,pt(t),[])}),ho=Au||function(){return(new De).getTime()},_o=le(function(n,t,r){var e=x;if(r.length)var u=v(r,_o.placeholder),e=e|R;return gr(n,e,t,r,u)}),vo=le(function(n,t){t=t.length?pt(t):Ie(n);for(var r=-1,e=t.length;++r<e;){var u=t[r];n[u]=gr(n[u],x,n)}return n}),go=le(function(n,t,r){var e=x|A;if(r.length)var u=v(r,go.placeholder),e=e|R;return gr(t,e,n,r,u)}),yo=Xt(k),mo=Xt(I),wo=le(function(n,t){return it(n,1,t)}),bo=le(function(n,t,r){return it(n,t,r)}),xo=er(),Ao=er(true),jo=le(function(n,t){if(t=pt(t),typeof n!="function"||!Kn(t,e))throw new Ge(L);var r=t.length;return le(function(e){for(var u=xu(e.length,r);u--;)e[u]=t[u](e[u]);return n.apply(this,e)})}),ko=cr(R),Io=cr(O),Ro=le(function(n,t){return gr(n,C,w,w,w,pt(t))}),Oo=du||function(n){return h(n)&&Sr(n.length)&&ru.call(n)==D},Eo=Kt(At),Co=Kt(function(n,t,r){return r?nt(n,t,r):tt(n,t)}),Uo=Ht(Co,function(n,t){return n===w?t:n}),Wo=Ht(Eo,Fr),$o=rr(_t),So=rr(vt),Fo=or(Nu),No=or(Tu),To=ir(_t),Lo=ir(vt),zo=wu?function(n){var t=null==n?w:n.constructor;return typeof t=="function"&&t.prototype===n||typeof n!="function"&&Er(n)?Lr(n):ge(n)?wu(n):[]}:Lr,Bo=fr(true),Do=fr(),Mo=le(function(n,t){if(null==n)return{};if("function"!=typeof t[0])return t=Gn(pt(t),Ye),Nr(n,ft(Re(n),t));var r=Bt(t[0],t[1],3);return Tr(n,function(n,t,e){return!r(n,t,e)})}),qo=le(function(n,t){return null==n?{}:"function"==typeof t[0]?Tr(n,Bt(t[0],t[1],3)):Nr(n,pt(t))}),Po=Gt(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),Ko=Gt(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Vo=ar(),Zo=ar(true),Yo=Gt(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Go=Gt(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Jo=le(function(n,t){try{return n.apply(w,t)}catch(r){return _e(r)?r:new Me(r)}}),Xo=le(function(n,t){return function(r){return Or(r,n,t)}}),Ho=le(function(n,t){return function(r){return Or(n,r,t)}}),Qo=_r("ceil"),ni=_r("floor"),ti=Qt(se,Iu),ri=Qt(Ae,Ru),ei=_r("round");return Nn.prototype=Tn.prototype,Ln.prototype=$u(Tn.prototype),Ln.prototype.constructor=Ln,zn.prototype=$u(Tn.prototype),zn.prototype.constructor=zn,Bn.prototype["delete"]=function(n){return this.has(n)&&delete this.__data__[n]},Bn.prototype.get=function(n){return"__proto__"==n?w:this.__data__[n]},Bn.prototype.has=function(n){return"__proto__"!=n&&nu.call(this.__data__,n)},Bn.prototype.set=function(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this},Dn.prototype.push=function(n){var t=this.data;typeof n=="string"||ge(n)?t.set.add(n):t.hash[n]=true},ce.Cache=Bn,Nn.after=function(n,t){if(typeof t!="function"){if(typeof n!="function")throw new Ge(L);var r=n;n=t,t=r}return n=mu(n=+n)?n:0,function(){return 1>--n?t.apply(this,arguments):void 0}},Nn.ary=function(n,t,r){return r&&Ur(n,t,r)&&(t=w),t=n&&null==t?n.length:bu(+t||0,0),gr(n,E,w,w,w,w,t)},Nn.assign=Co,Nn.at=no,Nn.before=fe,Nn.bind=_o,Nn.bindAll=vo,Nn.bindKey=go,Nn.callback=Se,Nn.chain=Qr,Nn.chunk=function(n,t,r){t=(r?Ur(n,t,r):null==t)?1:bu(yu(t)||1,1),r=0;for(var e=n?n.length:0,u=-1,o=Be(vu(e/t));r<e;)o[++u]=Et(n,r,r+=t);return o},Nn.compact=function(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var o=n[t];o&&(u[++e]=o)}return u},Nn.constant=function(n){return function(){return n}},Nn.countBy=to,Nn.create=function(n,t,r){var e=$u(n);return r&&Ur(n,t,r)&&(t=w),t?tt(e,t):e},Nn.curry=yo,Nn.curryRight=mo,Nn.debounce=ae,Nn.defaults=Uo,Nn.defaultsDeep=Wo,Nn.defer=wo,Nn.delay=bo,Nn.difference=Mu,Nn.drop=qr,Nn.dropRight=Pr,Nn.dropRightWhile=function(n,t,r){return n&&n.length?Nt(n,wr(t,r,3),true,true):[]},Nn.dropWhile=function(n,t,r){return n&&n.length?Nt(n,wr(t,r,3),true):[]},Nn.fill=function(n,t,r,e){var u=n?n.length:0;if(!u)return[];for(r&&typeof r!="number"&&Ur(n,t,r)&&(r=0,e=u),u=n.length,r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e=e===w||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;r<u;)n[r++]=t;return n},Nn.filter=re,Nn.flatten=function(n,t,r){var e=n?n.length:0;return r&&Ur(n,t,r)&&(t=false),e?pt(n,t):[]},Nn.flattenDeep=function(n){return n&&n.length?pt(n,true):[]},Nn.flow=xo,Nn.flowRight=Ao,Nn.forEach=uo,Nn.forEachRight=oo,Nn.forIn=Fo,Nn.forInRight=No,Nn.forOwn=To,Nn.forOwnRight=Lo,Nn.functions=Ie,Nn.groupBy=io,Nn.indexBy=fo,Nn.initial=function(n){return Pr(n,1)},Nn.intersection=Ku,Nn.invert=function(n,t,r){r&&Ur(n,t,r)&&(t=w),r=-1;for(var e=zo(n),u=e.length,o={};++r<u;){var i=e[r],f=n[i];t?nu.call(o,f)?o[f].push(i):o[f]=[i]:o[f]=i}return o},Nn.invoke=ao,Nn.keys=zo,Nn.keysIn=Re,Nn.map=ue,Nn.mapKeys=Bo,Nn.mapValues=Do,Nn.matches=Ne,Nn.matchesProperty=function(n,t){return xt(n,ot(t,true))},Nn.memoize=ce,Nn.merge=Eo,Nn.method=Xo,Nn.methodOf=Ho,Nn.mixin=Te,Nn.modArgs=jo,Nn.negate=function(n){if(typeof n!="function")throw new Ge(L);return function(){return!n.apply(this,arguments)}},Nn.omit=Mo,Nn.once=function(n){return fe(2,n)},Nn.pairs=Oe,Nn.partial=ko,Nn.partialRight=Io,Nn.partition=co,Nn.pick=qo,Nn.pluck=function(n,t){return ue(n,ze(t))},Nn.property=ze,Nn.propertyOf=function(n){return function(t){return yt(n,Dr(t),t+"")}},Nn.pull=function(){var n=arguments,t=n[0];if(!t||!t.length)return t;for(var r=0,e=xr(),u=n.length;++r<u;)for(var o=0,i=n[r];-1<(o=e(t,i,o));)pu.call(t,o,1);return t},Nn.pullAt=Vu,Nn.range=function(n,t,r){r&&Ur(n,t,r)&&(t=r=w),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;var e=-1;t=bu(vu((t-n)/(r||1)),0);for(var u=Be(t);++e<t;)u[e]=n,n+=r;return u},Nn.rearg=Ro,Nn.reject=function(n,t,r){var e=Oo(n)?Vn:lt;return t=wr(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})},Nn.remove=function(n,t,r){var e=[];if(!n||!n.length)return e;var u=-1,o=[],i=n.length;for(t=wr(t,r,3);++u<i;)r=n[u],t(r,u,n)&&(e.push(r),o.push(u));return It(n,o),e},Nn.rest=Yr,Nn.restParam=le,Nn.set=function(n,t,r){if(null==n)return n;var e=t+"";t=null!=n[e]||Wr(t,n)?[e]:Dr(t);for(var e=-1,u=t.length,o=u-1,i=n;null!=i&&++e<u;){var f=t[e];ge(i)&&(e==o?i[f]=r:null==i[f]&&(i[f]=Cr(t[e+1])?[]:{})),i=i[f]}return n},Nn.shuffle=function(n){return oe(n,Ru)},Nn.slice=function(n,t,r){var e=n?n.length:0;return e?(r&&typeof r!="number"&&Ur(n,t,r)&&(t=0,r=e),Et(n,t,r)):[]},Nn.sortBy=function(n,t,r){if(null==n)return[];r&&Ur(n,t,r)&&(t=w);var e=-1;return t=wr(t,r,3),n=wt(n,function(n,r,u){return{a:t(n,r,u),b:++e,c:n}}),Ut(n,f)},Nn.sortByAll=po,Nn.sortByOrder=function(n,t,r,e){return null==n?[]:(e&&Ur(t,r,e)&&(r=w),Oo(t)||(t=null==t?[]:[t]),Oo(r)||(r=null==r?[]:[r]),Wt(n,t,r))},Nn.spread=function(n){if(typeof n!="function")throw new Ge(L);return function(t){return n.apply(this,t)}},Nn.take=function(n,t,r){return n&&n.length?((r?Ur(n,t,r):null==t)&&(t=1),Et(n,0,0>t?0:t)):[]},Nn.takeRight=function(n,t,r){var e=n?n.length:0;return e?((r?Ur(n,t,r):null==t)&&(t=1),t=e-(+t||0),Et(n,0>t?0:t)):[]},Nn.takeRightWhile=function(n,t,r){return n&&n.length?Nt(n,wr(t,r,3),false,true):[]},Nn.takeWhile=function(n,t,r){return n&&n.length?Nt(n,wr(t,r,3)):[]},Nn.tap=function(n,t,r){return t.call(r,n),n},Nn.throttle=function(n,t,r){var e=true,u=true;if(typeof n!="function")throw new Ge(L);return false===r?e=false:ge(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),ae(n,t,{leading:e,maxWait:+t,trailing:u})},Nn.thru=ne,Nn.times=function(n,t,r){if(n=yu(n),1>n||!mu(n))return[];var e=-1,u=Be(xu(n,4294967295));for(t=Bt(t,r,1);++e<n;)4294967295>e?u[e]=t(e):t(e);return u},Nn.toArray=je,Nn.toPlainObject=ke,Nn.transform=function(n,t,r,e){var u=Oo(n)||xe(n);return t=wr(t,e,4),null==r&&(u||ge(n)?(e=n.constructor,r=u?Oo(n)?new e:[]:$u(ve(e)?e.prototype:w)):r={}),(u?Pn:_t)(n,function(n,e,u){return t(r,n,e,u)}),r},Nn.union=Gu,Nn.uniq=Gr,Nn.unzip=Jr,Nn.unzipWith=Xr,Nn.values=Ee,Nn.valuesIn=function(n){return Ft(n,Re(n))},Nn.where=function(n,t){return re(n,bt(t))},Nn.without=Ju,Nn.wrap=function(n,t){return t=null==t?Fe:t,gr(t,R,w,[n],[])},Nn.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Er(r))var e=e?Jn(ft(e,r),ft(r,e)):r}return e?St(e):[]},Nn.zip=Xu,Nn.zipObject=Hr,Nn.zipWith=Hu,Nn.backflow=Ao,Nn.collect=ue,Nn.compose=Ao,Nn.each=uo,Nn.eachRight=oo,Nn.extend=Co,Nn.iteratee=Se,Nn.methods=Ie,Nn.object=Hr,Nn.select=re,Nn.tail=Yr,Nn.unique=Gr,Te(Nn,Nn),Nn.add=function(n,t){return(+n||0)+(+t||0)},Nn.attempt=Jo,Nn.camelCase=Po,Nn.capitalize=function(n){return(n=u(n))&&n.charAt(0).toUpperCase()+n.slice(1)},Nn.ceil=Qo,Nn.clone=function(n,t,r,e){return t&&typeof t!="boolean"&&Ur(n,t,r)?t=false:typeof t=="function"&&(e=r,r=t,t=false),typeof r=="function"?ot(n,t,Bt(r,e,3)):ot(n,t)},Nn.cloneDeep=function(n,t,r){return typeof t=="function"?ot(n,true,Bt(t,r,3)):ot(n,true)},Nn.deburr=Ce,Nn.endsWith=function(n,t,r){n=u(n),t+="";var e=n.length;return r=r===w?e:xu(0>r?0:+r||0,e),r-=t.length,0<=r&&n.indexOf(t,r)==r},Nn.escape=function(n){return(n=u(n))&&hn.test(n)?n.replace(sn,c):n},Nn.escapeRegExp=function(n){return(n=u(n))&&bn.test(n)?n.replace(wn,l):n||"(?:)"},Nn.every=te,Nn.find=ro,Nn.findIndex=qu,Nn.findKey=$o,Nn.findLast=eo,Nn.findLastIndex=Pu,Nn.findLastKey=So,Nn.findWhere=function(n,t){return ro(n,bt(t))},Nn.first=Kr,Nn.floor=ni,Nn.get=function(n,t,r){return n=null==n?w:yt(n,Dr(t),t+""),n===w?r:n},Nn.gt=se,Nn.gte=function(n,t){return n>=t},Nn.has=function(n,t){if(null==n)return false;var r=nu.call(n,t);if(!r&&!Wr(t)){if(t=Dr(t),n=1==t.length?n:yt(n,Et(t,0,-1)),null==n)return false;t=Zr(t),r=nu.call(n,t)}return r||Sr(n.length)&&Cr(t,n.length)&&(Oo(n)||pe(n))},Nn.identity=Fe,Nn.includes=ee,Nn.indexOf=Vr,Nn.inRange=function(n,t,r){return t=+t||0,r===w?(r=t,t=0):r=+r||0,n>=xu(t,r)&&n<bu(t,r)},Nn.isArguments=pe,Nn.isArray=Oo,Nn.isBoolean=function(n){return true===n||false===n||h(n)&&ru.call(n)==M},Nn.isDate=function(n){return h(n)&&ru.call(n)==q},Nn.isElement=function(n){return!!n&&1===n.nodeType&&h(n)&&!me(n)},Nn.isEmpty=function(n){return null==n?true:Er(n)&&(Oo(n)||be(n)||pe(n)||h(n)&&ve(n.splice))?!n.length:!zo(n).length},Nn.isEqual=he,Nn.isError=_e,Nn.isFinite=function(n){return typeof n=="number"&&mu(n)},Nn.isFunction=ve,Nn.isMatch=function(n,t,r,e){return r=typeof r=="function"?Bt(r,e,3):w,mt(n,Ar(t),r)},Nn.isNaN=function(n){return de(n)&&n!=+n},Nn.isNative=ye,Nn.isNull=function(n){return null===n},Nn.isNumber=de,Nn.isObject=ge,Nn.isPlainObject=me,Nn.isRegExp=we,Nn.isString=be,Nn.isTypedArray=xe,Nn.isUndefined=function(n){return n===w},Nn.kebabCase=Ko,Nn.last=Zr,Nn.lastIndexOf=function(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if(typeof r=="number")u=(0>r?bu(e+r,0):xu(r||0,e-1))+1;else if(r)return u=Lt(n,t,true)-1,n=n[u],(t===t?t===n:n!==n)?u:-1;if(t!==t)return p(n,u,true);for(;u--;)if(n[u]===t)return u;return-1},Nn.lt=Ae,Nn.lte=function(n,t){return n<=t},Nn.max=ti,Nn.min=ri,Nn.noConflict=function(){return Zn._=eu,this},Nn.noop=Le,Nn.now=ho,Nn.pad=function(n,t,r){n=u(n),t=+t;var e=n.length;return e<t&&mu(t)?(e=(t-e)/2,t=yu(e),e=vu(e),r=pr("",e,r),r.slice(0,t)+n+r):n},Nn.padLeft=Vo,Nn.padRight=Zo,Nn.parseInt=function(n,t,r){return(r?Ur(n,t,r):null==t)?t=0:t&&(t=+t),n=We(n),ju(n,t||(In.test(n)?16:10))},Nn.random=function(n,t,r){r&&Ur(n,t,r)&&(t=r=w);var e=null==n,u=null==t;return null==r&&(u&&typeof n=="boolean"?(r=n,n=1):typeof t=="boolean"&&(r=t,u=true)),e&&u&&(t=1,u=false),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1?(r=ku(),xu(n+r*(t-n+fu("1e-"+((r+"").length-1))),t)):Rt(n,t)},Nn.reduce=lo,Nn.reduceRight=so,Nn.repeat=Ue,Nn.result=function(n,t,r){var e=null==n?w:n[t];return e===w&&(null==n||Wr(t,n)||(t=Dr(t),n=1==t.length?n:yt(n,Et(t,0,-1)),e=null==n?w:n[Zr(t)]),e=e===w?r:e),ve(e)?e.call(n):e},Nn.round=ei,Nn.runInContext=m,Nn.size=function(n){var t=n?Bu(n):0;return Sr(t)?t:zo(n).length},Nn.snakeCase=Yo,Nn.some=ie,Nn.sortedIndex=Zu,Nn.sortedLastIndex=Yu,Nn.startCase=Go,Nn.startsWith=function(n,t,r){return n=u(n),r=null==r?0:xu(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r},Nn.sum=function(n,t,r){if(r&&Ur(n,t,r)&&(t=w),t=wr(t,r,3),1==t.length){n=Oo(n)?n:zr(n),r=n.length;for(var e=0;r--;)e+=+t(n[r])||0;n=e}else n=$t(n,t);return n},Nn.template=function(n,t,r){var e=Nn.templateSettings;r&&Ur(n,t,r)&&(t=r=w),n=u(n),t=nt(tt({},r||t),e,Qn),r=nt(tt({},t.imports),e.imports,Qn);var o,i,f=zo(r),a=Ft(r,f),c=0;r=t.interpolate||Cn;var l="__p+='";r=Ze((t.escape||Cn).source+"|"+r.source+"|"+(r===gn?jn:Cn).source+"|"+(t.evaluate||Cn).source+"|$","g");var p="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(n.replace(r,function(t,r,e,u,f,a){return e||(e=u),l+=n.slice(c,a).replace(Un,s),r&&(o=true,l+="'+__e("+r+")+'"),f&&(i=true,l+="';"+f+";\n__p+='"),e&&(l+="'+((__t=("+e+"))==null?'':__t)+'"),c=a+t.length,t}),l+="';",(t=t.variable)||(l="with(obj){"+l+"}"),l=(i?l.replace(fn,""):l).replace(an,"$1").replace(cn,"$1;"),l="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",t=Jo(function(){return qe(f,p+"return "+l).apply(w,a)}),t.source=l,_e(t))throw t;return t},Nn.trim=We,Nn.trimLeft=function(n,t,r){var e=n;return(n=u(n))?n.slice((r?Ur(e,t,r):null==t)?g(n):o(n,t+"")):n},Nn.trimRight=function(n,t,r){var e=n;return(n=u(n))?(r?Ur(e,t,r):null==t)?n.slice(0,y(n)+1):n.slice(0,i(n,t+"")+1):n},Nn.trunc=function(n,t,r){r&&Ur(n,t,r)&&(t=w);var e=U;if(r=W,null!=t)if(ge(t)){var o="separator"in t?t.separator:o,e="length"in t?+t.length||0:e;r="omission"in t?u(t.omission):r}else e=+t||0;if(n=u(n),e>=n.length)return n;if(e-=r.length,1>e)return r;if(t=n.slice(0,e),null==o)return t+r;if(we(o)){if(n.slice(e).search(o)){var i,f=n.slice(0,e);for(o.global||(o=Ze(o.source,(kn.exec(o)||"")+"g")),o.lastIndex=0;n=o.exec(f);)i=n.index;t=t.slice(0,null==i?e:i)}}else n.indexOf(o,e)!=e&&(o=t.lastIndexOf(o),-1<o&&(t=t.slice(0,o)));return t+r},Nn.unescape=function(n){return(n=u(n))&&pn.test(n)?n.replace(ln,d):n},Nn.uniqueId=function(n){var t=++tu;return u(n)+t},Nn.words=$e,Nn.all=te,Nn.any=ie,Nn.contains=ee,Nn.eq=he,Nn.detect=ro,Nn.foldl=lo,Nn.foldr=so,Nn.head=Kr,Nn.include=ee,Nn.inject=lo,Te(Nn,function(){var n={};return _t(Nn,function(t,r){Nn.prototype[r]||(n[r]=t)}),n}(),false),Nn.sample=oe,Nn.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return oe(t,n)}):oe(this.value())},Nn.VERSION=b,Pn("bind bindKey curry curryRight partial partialRight".split(" "),function(n){
Nn[n].placeholder=Nn}),Pn(["drop","take"],function(n,t){zn.prototype[n]=function(r){var e=this.__filtered__;if(e&&!t)return new zn(this);r=null==r?1:bu(yu(r)||0,0);var u=this.clone();return e?u.__takeCount__=xu(u.__takeCount__,r):u.__views__.push({size:r,type:n+(0>u.__dir__?"Right":"")}),u},zn.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),Pn(["filter","map","takeWhile"],function(n,t){var r=t+1,e=r!=T;zn.prototype[n]=function(n,t){var u=this.clone();return u.__iteratees__.push({iteratee:wr(n,t,1),type:r}),u.__filtered__=u.__filtered__||e,u}}),Pn(["first","last"],function(n,t){var r="take"+(t?"Right":"");zn.prototype[n]=function(){return this[r](1).value()[0]}}),Pn(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");zn.prototype[n]=function(){return this.__filtered__?new zn(this):this[r](1)}}),Pn(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?bt:ze;zn.prototype[n]=function(n){return this[r](e(n))}}),zn.prototype.compact=function(){return this.filter(Fe)},zn.prototype.reject=function(n,t){return n=wr(n,t,1),this.filter(function(t){return!n(t)})},zn.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=this;return r.__filtered__&&(0<n||0>t)?new zn(r):(0>n?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==w&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r)},zn.prototype.takeRightWhile=function(n,t){return this.reverse().takeWhile(n,t).reverse()},zn.prototype.toArray=function(){return this.take(Ru)},_t(zn.prototype,function(n,t){var r=/^(?:filter|map|reject)|While$/.test(t),e=/^(?:first|last)$/.test(t),u=Nn[e?"take"+("last"==t?"Right":""):t];u&&(Nn.prototype[t]=function(){function t(n){return e&&i?u(n,1)[0]:u.apply(w,Jn([n],o))}var o=e?[1]:arguments,i=this.__chain__,f=this.__wrapped__,a=!!this.__actions__.length,c=f instanceof zn,l=o[0],s=c||Oo(f);return s&&r&&typeof l=="function"&&1!=l.length&&(c=s=false),l={func:ne,args:[t],thisArg:w},a=c&&!a,e&&!i?a?(f=f.clone(),f.__actions__.push(l),n.call(f)):u.call(w,this.value())[0]:!e&&s?(f=a?f:new zn(this),f=n.apply(f,o),f.__actions__.push(l),new Ln(f,i)):this.thru(t)})}),Pn("join pop push replace shift sort splice split unshift".split(" "),function(n){var t=(/^(?:replace|split)$/.test(n)?He:Je)[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|replace|shift)$/.test(n);Nn.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),_t(zn.prototype,function(n,t){var r=Nn[t];if(r){var e=r.name+"";(Wu[e]||(Wu[e]=[])).push({name:t,func:r})}}),Wu[sr(w,A).name]=[{name:"wrapper",func:w}],zn.prototype.clone=function(){var n=new zn(this.__wrapped__);return n.__actions__=qn(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=qn(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=qn(this.__views__),n},zn.prototype.reverse=function(){if(this.__filtered__){var n=new zn(this);n.__dir__=-1,n.__filtered__=true}else n=this.clone(),n.__dir__*=-1;return n},zn.prototype.value=function(){var n,t=this.__wrapped__.value(),r=this.__dir__,e=Oo(t),u=0>r,o=e?t.length:0;n=o;for(var i=this.__views__,f=0,a=-1,c=i.length;++a<c;){var l=i[a],s=l.size;switch(l.type){case"drop":f+=s;break;case"dropRight":n-=s;break;case"take":n=xu(n,f+s);break;case"takeRight":f=bu(f,n-s)}}if(n={start:f,end:n},i=n.start,f=n.end,n=f-i,u=u?f:i-1,i=this.__iteratees__,f=i.length,a=0,c=xu(n,this.__takeCount__),!e||o<F||o==n&&c==n)return Tt(t,this.__actions__);e=[];n:for(;n--&&a<c;){for(u+=r,o=-1,l=t[u];++o<f;){var p=i[o],s=p.type,p=p.iteratee(l);if(s==T)l=p;else if(!p){if(s==N)continue n;break n}}e[a++]=l}return e},Nn.prototype.chain=function(){return Qr(this)},Nn.prototype.commit=function(){return new Ln(this.value(),this.__chain__)},Nn.prototype.concat=Qu,Nn.prototype.plant=function(n){for(var t,r=this;r instanceof Tn;){var e=Mr(r);t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},Nn.prototype.reverse=function(){function n(n){return n.reverse()}var t=this.__wrapped__;return t instanceof zn?(this.__actions__.length&&(t=new zn(this)),t=t.reverse(),t.__actions__.push({func:ne,args:[n],thisArg:w}),new Ln(t,this.__chain__)):this.thru(n)},Nn.prototype.toString=function(){return this.value()+""},Nn.prototype.run=Nn.prototype.toJSON=Nn.prototype.valueOf=Nn.prototype.value=function(){return Tt(this.__wrapped__,this.__actions__)},Nn.prototype.collect=Nn.prototype.map,Nn.prototype.head=Nn.prototype.first,Nn.prototype.select=Nn.prototype.filter,Nn.prototype.tail=Nn.prototype.rest,Nn}var w,b="3.10.1",x=1,A=2,j=4,k=8,I=16,R=32,O=64,E=128,C=256,U=30,W="...",$=150,S=16,F=200,N=1,T=2,L="Expected a function",z="__lodash_placeholder__",B="[object Arguments]",D="[object Array]",M="[object Boolean]",q="[object Date]",P="[object Error]",K="[object Function]",V="[object Number]",Z="[object Object]",Y="[object RegExp]",G="[object String]",J="[object ArrayBuffer]",X="[object Float32Array]",H="[object Float64Array]",Q="[object Int8Array]",nn="[object Int16Array]",tn="[object Int32Array]",rn="[object Uint8Array]",en="[object Uint8ClampedArray]",un="[object Uint16Array]",on="[object Uint32Array]",fn=/\b__p\+='';/g,an=/\b(__p\+=)''\+/g,cn=/(__e\(.*?\)|\b__t\))\+'';/g,ln=/&(?:amp|lt|gt|quot|#39|#96);/g,sn=/[&<>"'`]/g,pn=RegExp(ln.source),hn=RegExp(sn.source),_n=/<%-([\s\S]+?)%>/g,vn=/<%([\s\S]+?)%>/g,gn=/<%=([\s\S]+?)%>/g,yn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,dn=/^\w*$/,mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,wn=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,bn=RegExp(wn.source),xn=/[\u0300-\u036f\ufe20-\ufe23]/g,An=/\\(\\)?/g,jn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,kn=/\w*$/,In=/^0[xX]/,Rn=/^\[object .+?Constructor\]$/,On=/^\d+$/,En=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Cn=/($^)/,Un=/['\n\r\u2028\u2029\\]/g,Wn=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),$n="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout isFinite parseFloat parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap".split(" "),Sn={};Sn[X]=Sn[H]=Sn[Q]=Sn[nn]=Sn[tn]=Sn[rn]=Sn[en]=Sn[un]=Sn[on]=true,Sn[B]=Sn[D]=Sn[J]=Sn[M]=Sn[q]=Sn[P]=Sn[K]=Sn["[object Map]"]=Sn[V]=Sn[Z]=Sn[Y]=Sn["[object Set]"]=Sn[G]=Sn["[object WeakMap]"]=false;var Fn={};Fn[B]=Fn[D]=Fn[J]=Fn[M]=Fn[q]=Fn[X]=Fn[H]=Fn[Q]=Fn[nn]=Fn[tn]=Fn[V]=Fn[Z]=Fn[Y]=Fn[G]=Fn[rn]=Fn[en]=Fn[un]=Fn[on]=true,Fn[P]=Fn[K]=Fn["[object Map]"]=Fn["[object Set]"]=Fn["[object WeakMap]"]=false;var Nn={"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss"},Tn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ln={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},zn={function:true,object:true},Bn={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Dn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Mn=zn[typeof exports]&&exports&&!exports.nodeType&&exports,qn=zn[typeof module]&&module&&!module.nodeType&&module,Pn=zn[typeof self]&&self&&self.Object&&self,Kn=zn[typeof window]&&window&&window.Object&&window,Vn=qn&&qn.exports===Mn&&Mn,Zn=Mn&&qn&&typeof global=="object"&&global&&global.Object&&global||Kn!==(this&&this.window)&&Kn||Pn||this,Yn=m();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Zn._=Yn,define(function(){return Yn})):Mn&&qn?Vn?(qn.exports=Yn)._=Yn:Mn._=Yn:Zn._=Yn}).call(this);!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.i18next=e()}}(function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;e=l,t=i,n=a,r=!0,s=l=void 0}},p=e("./utils"),g=o(p),d=e("./logger"),h=r(d),v=e("./EventEmitter"),y=r(v),b=function(e){function t(e,n,r){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];i(this,t),f(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.backend=e,this.store=n,this.services=r,this.options=o,this.logger=h["default"].create("backendConnector"),this.state={},this.queue=[],this.backend&&this.backend.init(r,o.backend,o)}return a(t,e),c(t,[{key:"queueLoad",value:function(e,t,n){var r=this,o=[],i=[],a=[],s=[];return e.forEach(function(e){var n=!0;t.forEach(function(t){var a=e+"|"+t;r.store.hasResourceBundle(e,t)?r.state[a]=2:1===r.state[a]?i.indexOf(a)<0&&i.push(a):(r.state[a]=1,n=!1,i.indexOf(a)<0&&i.push(a),o.indexOf(a)<0&&o.push(a),s.indexOf(t)<0&&s.push(t))}),n||a.push(e)}),(o.length||i.length)&&this.queue.push({pending:i,loaded:{},errors:[],callback:n}),{toLoad:o,pending:i,toLoadLanguages:a,toLoadNamespaces:s}}},{key:"loaded",value:function(e,t,n){var r=this,o=e.split("|"),i=u(o,2),a=i[0],l=i[1];t&&this.emit("failedLoading",a,l,t),n&&this.store.addResourceBundle(a,l,n),this.state[e]=t?-1:2,this.queue.forEach(function(n){g.pushPath(n.loaded,[a],l),s(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(n.errors.length?n.callback(n.errors):n.callback(),r.emit("loaded",n.loaded),n.done=!0)}),this.queue=this.queue.filter(function(e){return!e.done})}},{key:"read",value:function(e,t,n,r,o,i){var a=this;return r||(r=0),o||(o=250),e.length?void this.backend[n](e,t,function(s,u){return s&&u&&5>r?void setTimeout(function(){a.read.call(a,e,t,n,++r,2*o,i)},o):void i(s,u)}):i(null,{})}},{key:"load",value:function(e,t,n){var r=this;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();var o=l({},this.backend.options,this.options.backend);"string"==typeof e&&(e=this.services.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var i=this.queueLoad(e,t,n);return i.toLoad.length?void(o.allowMultiLoading&&this.backend.readMulti?this.read(i.toLoadLanguages,i.toLoadNamespaces,"readMulti",null,null,function(e,t){e&&r.logger.warn("loading namespaces "+i.toLoadNamespaces.join(", ")+" for languages "+i.toLoadLanguages.join(", ")+" via multiloading failed",e),!e&&t&&r.logger.log("loaded namespaces "+i.toLoadNamespaces.join(", ")+" for languages "+i.toLoadLanguages.join(", ")+" via multiloading",t),i.toLoad.forEach(function(n){var o=n.split("|"),i=u(o,2),a=i[0],s=i[1],l=g.getPath(t,[a,s]);if(l)r.loaded(n,e,l);else{var c="loading namespace "+s+" for language "+a+" via multiloading failed";r.loaded(n,c),r.logger.error(c)}})}):!function(){var e=function(e){var t=this,n=e.split("|"),r=u(n,2),o=r[0],i=r[1];this.read(o,i,"read",null,null,function(n,r){n&&t.logger.warn("loading namespace "+i+" for language "+o+" failed",n),!n&&r&&t.logger.log("loaded namespace "+i+" for language "+o,r),t.loaded(e,n,r)})};i.toLoad.forEach(function(t){e.call(r,t)})}()):void(i.pending.length||n())}},{key:"saveMissing",value:function(e,t,n,r){this.backend&&this.backend.create&&this.backend.create(e,t,n,r),this.store.addResource(e[0],t,n,r)}}]),t}(y["default"]);n["default"]=b,t.exports=n["default"]},{"./EventEmitter":3,"./logger":12,"./utils":14}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;e=l,t=i,n=a,r=!0,s=l=void 0}},c=e("./utils"),f=(o(c),e("./logger")),p=r(f),g=e("./EventEmitter"),d=r(g),h=function(e){function t(e,n,r){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.cache=e,this.store=n,this.services=r,this.options=o,this.logger=p["default"].create("cacheConnector"),this.cache&&this.cache.init(r,o.cache,o)}return a(t,e),u(t,[{key:"load",value:function(e,t,n){var r=this;if(!this.cache)return n&&n();var o=s({},this.cache.options,this.options.cache);"string"==typeof e&&(e=this.services.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]),o.enabled?this.cache.load(e,function(t,o){if(t&&r.logger.error("loading languages "+e.join(", ")+" from cache failed",t),o)for(var i in o)for(var a in o[i])if("i18nStamp"!==a){var s=o[i][a];s&&r.store.addResourceBundle(i,a,s)}n&&n()}):n&&n()}},{key:"save",value:function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)}}]),t}(d["default"]);n["default"]=h,t.exports=n["default"]},{"./EventEmitter":3,"./logger":12,"./utils":14}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this.observers={}}return o(e,[{key:"on",value:function(e,t){var n=this;e.split(" ").forEach(function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})}},{key:"off",value:function(e,t){var n=this;this.observers[e]&&this.observers[e].forEach(function(){if(t){var r=n.observers[e].indexOf(t);r>-1&&n.observers[e].splice(r,1)}else delete n.observers[e]})}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];this.observers[e]&&this.observers[e].forEach(function(e){e.apply(void 0,n)}),this.observers["*"]&&this.observers["*"].forEach(function(t){var r;t.apply(t,(r=[e]).concat.apply(r,n))})}}]),e}();t.exports=i},{}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./utils"),u=o(s),l=e("./logger"),c=r(l),f=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this.logger=c["default"].create("interpolator"),this.init(t,!0)}return a(e,[{key:"init",value:function(e,t){void 0===e&&(e={}),t&&(this.options=e),e.interpolation||(e.interpolation={escapeValue:!0});var n=e.interpolation;this.escapeValue=n.escapeValue,this.prefix=n.prefix?u.regexEscape(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?u.regexEscape(n.suffix):n.suffixEscaped||"}}",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?u.regexEscape(n.nestingPrefix):n.nestingPrefixEscaped||u.regexEscape("$t("),this.nestingSuffix=n.nestingSuffix?u.regexEscape(n.nestingSuffix):n.nestingSuffixEscaped||u.regexEscape(")");var r=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(r,"g");var o=this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(o,"g");var i=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(i,"g")}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"interpolate",value:function(e,t){function n(e){return e.replace(/\$/g,"$$$$")}for(var r=void 0,o=void 0;r=this.regexpUnescape.exec(e);){var i=u.getPath(t,r[1].trim());e=e.replace(r[0],i)}for(;r=this.regexp.exec(e);)o=u.getPath(t,r[1].trim()),"string"!=typeof o&&(o=u.makeString(o)),o||(this.logger.warn("missed to pass in variable "+r[1]+" for interpolating "+e),o=""),o=n(this.escapeValue?u.escape(o):o),e=e.replace(r[0],o),this.regexp.lastIndex=0;return e}},{key:"nest",value:function(e,t){function n(e){return e.replace(/\$/g,"$$$$")}function r(e){if(e.indexOf(",")<0)return e;var t=e.split(",");e=t.shift();var n=t.join(",");n=this.interpolate(n,s);try{s=JSON.parse(n)}catch(r){this.logger.error("failed parsing options string in nesting for key "+e,r)}return e}var o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=void 0,a=void 0,s=JSON.parse(JSON.stringify(o));for(s.applyPostProcessor=!1;i=this.nestingRegexp.exec(e);)a=t(r.call(this,i[1].trim()),s),"string"!=typeof a&&(a=u.makeString(a)),a||(this.logger.warn("missed to pass in variable "+i[1]+" for interpolating "+e),a=""),a=n(this.escapeValue?u.escape(a):a),e=e.replace(i[0],a),this.regexp.lastIndex=0;return e}}]),e}();n["default"]=f,t.exports=n["default"]},{"./logger":12,"./utils":14}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./logger"),u=r(s),l=function(){function e(t){o(this,e),this.options=t,this.whitelist=this.options.whitelist||!1,this.logger=u["default"].create("languageUtils")}return a(e,[{key:"getLanguagePartFromCode",value:function(e){if(e.indexOf("-")<0)return e;var t=["nb-NO","nn-NO","nb-no","nn-no"],n=e.split("-");return this.formatLanguageCode(t.indexOf(e)>-1?n[1].toLowerCase():n[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=e.split("-"),n=i(t,2),r=n[0],o=n[1];return this.options.lowerCaseLng?r.toLowerCase()+"-"+o.toLowerCase():r.toLowerCase()+"-"+o.toUpperCase()}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return"languageOnly"===this.options.load&&(e=this.getLanguagePartFromCode(e)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(e)>-1?!0:!1}},{key:"toResolveHierarchy",value:function(e,t){var n=this;t=t||this.options.fallbackLng||[],"string"==typeof t&&(t=[t]);var r=[],o=function(e){n.isWhitelisted(e)?r.push(e):n.logger.warn("rejecting non-whitelisted language code: "+e)};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),t.forEach(function(e){r.indexOf(e)<0&&o(n.formatLanguageCode(e))}),r}}]),e}();n["default"]=l,t.exports=n["default"]},{"./logger":12}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./logger"),s=r(a),u=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","es_ar","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt","pt_br","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}],l={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&10>=e%100?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:7>e?2:11>e?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&20>e?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(10>e%100||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0===e||e%100>1&&11>e%100?1:e%100>10&&20>e%100?2:3)},20:function(e){return Number(1==e?0:0===e||e%100>0&&20>e%100?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)}},c=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,e),this.rules=function(){var e={};return u.forEach(function(t){t.lngs.forEach(function(n){return e[n]={numbers:t.nr,plurals:l[t.fc]}})}),e}(),this.languageUtils=t,this.options=n,this.logger=s["default"].create("pluralResolver")}return i(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length<=1?!1:!0}},{key:"getSuffix",value:function(e,t){var n=this.getRule(e);if(n){if(1===n.numbers.length)return"";var r=n.noAbs?n.plurals(t):n.plurals(Math.abs(t)),o=n.numbers[r];if(2===n.numbers.length&&1===n.numbers[0]&&(2===o?o="plural":1===o&&(o="")),"v1"===this.options.compatibilityJSON){if(1===o)return"";if("number"==typeof o)return"_plural_"+o.toString()}return this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}return this.logger.warn("no plural rule found for: "+e),""}}]),e}();n["default"]=c,t.exports=n["default"]},{"./logger":12}],7:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;e=l,t=i,n=a,r=!0,s=l=void 0}},c=e("./EventEmitter"),f=o(c),p=e("./utils"),g=r(p),d=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?{ns:["translation"],defaultNS:"translation"}:arguments[1];i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.data=e,this.options=n}return a(t,e),u(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],o=r.keySeparator||this.options.keySeparator||".",i=[e,t];return n&&"string"!=typeof n&&(i=i.concat(n)),n&&"string"==typeof n&&(i=i.concat(n.split(o))),e.indexOf(".")>-1&&(i=e.split(".")),g.getPath(this.data,i)}},{key:"addResource",value:function(e,t,n,r){var o=arguments.length<=4||void 0===arguments[4]?{silent:!1}:arguments[4],i=[e,t];n&&(i=i.concat(n.split(this.options.keySeparator||"."))),e.indexOf(".")>-1&&(i=e.split("."),r=t,t=i[1]),this.addNamespaces(t),g.setPath(this.data,i,r),o.silent||this.emit("added",e,t)}},{key:"addResources",value:function(e,t,n){for(var r in n)"string"==typeof n[r]&&this.addResource(e,t,r,n[r],{silent:!0});this.emit("added",e,t)}},{key:"addResourceBundle",value:function(e,t,n,r,o){var i=[e,t];e.indexOf(".")>-1&&(i=e.split("."),r=n,n=t,t=i[1]),this.addNamespaces(t);var a=g.getPath(this.data,i)||{};r?g.deepExtend(a,n,o):a=s({},a,n),g.setPath(this.data,i,a),this.emit("added",e,t)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?s({},this.getResource(e,t)):this.getResource(e,t)}},{key:"toJSON",value:function(){return this.data}}]),t}(f["default"]);n["default"]=d,t.exports=n["default"]},{"./EventEmitter":3,"./utils":14}],8:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,
r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;e=l,t=i,n=a,r=!0,s=l=void 0}},c=e("./logger"),f=o(c),p=e("./EventEmitter"),g=o(p),d=e("./postProcessor"),h=o(d),v=e("./compatibility/v1"),y=r(v),b=e("./utils"),m=r(b),O=function(e){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),m.copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],e,this),this.options=n,this.logger=f["default"].create("translator")}return a(t,e),u(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{interpolation:{}}:arguments[1];return"v1"===this.options.compatibilityAPI&&(t=y.convertTOptions(t)),void 0!==this.resolve(e,t)}},{key:"extractFromKey",value:function(e,t){var n=t.nsSeparator||this.options.nsSeparator||":",r=t.ns||this.options.defaultNS;if(e.indexOf(n)>-1){var o=e.split(n);r=o[0],e=o[1]}return"string"==typeof r&&(r=[r]),{key:e,namespaces:r}}},{key:"translate",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("object"!=typeof t?t=this.options.overloadTranslationOptionHandler(arguments):"v1"===this.options.compatibilityAPI&&(t=y.convertTOptions(t)),void 0===e||null===e||""===e)return"";"number"==typeof e&&(e=String(e)),"string"==typeof e&&(e=[e]);var n=t.lng||this.language;if(n&&"cimode"===n.toLowerCase())return e[e.length-1];var r=t.keySeparator||this.options.keySeparator||".",o=this.extractFromKey(e[e.length-1],t),i=o.key,a=o.namespaces,u=a[a.length-1],l=this.resolve(e,t),c=Object.prototype.toString.apply(l),f=["[object Number]","[object Function]","[object RegExp]"],p=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays;if(l&&"string"!=typeof l&&f.indexOf(c)<0&&(!p||"[object Array]"!==c)){if(!t.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(i,l,t):"key '"+i+" ("+this.language+")' returned an object instead of string.";var g="[object Array]"===c?[]:{};for(var d in l)g[d]=this.translate(""+i+r+d,s({joinArrays:!1},t));l=g}else if(p&&"[object Array]"===c)l=l.join(p),l&&(l=this.extendTranslation(l,i,t));else{var h=!1,v=!1;if(!this.isValidLookup(l)&&t.defaultValue&&(h=!0,l=t.defaultValue),this.isValidLookup(l)||(v=!0,l=i),(v||h)&&(this.logger.log("missingKey",n,u,i,l),this.options.saveMissing)){var b=[];if("fallback"===this.options.saveMissingTo&&this.options.fallbackLng&&this.options.fallbackLng[0])for(var m=0;m<this.options.fallbackLng.length;m++)b.push(this.options.fallbackLng[m]);else"all"===this.options.saveMissingTo?b=this.languageUtils.toResolveHierarchy(t.lng||this.language):b.push(t.lng||this.language);this.options.missingKeyHandler?this.options.missingKeyHandler(b,u,i,l):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(b,u,i,l),this.emit("missingKey",b,u,i,l)}l=this.extendTranslation(l,i,t),v&&l===i&&this.options.appendNamespaceToMissingKey&&(l=u+":"+i),v&&this.options.parseMissingKeyHandler&&(l=this.options.parseMissingKeyHandler(l))}return l}},{key:"extendTranslation",value:function(e,t,n){var r=this;n.interpolation&&this.interpolator.init(n);var o=n.replace&&"string"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(o=s({},this.options.interpolation.defaultVariables,o)),e=this.interpolator.interpolate(e,o),e=this.interpolator.nest(e,function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return r.translate.apply(r,t)},n),n.interpolation&&this.interpolator.reset();var i=n.postProcess||this.options.postProcess,a="string"==typeof i?[i]:i;return void 0!==e&&a&&a.length&&n.applyPostProcessor!==!1&&(e=h["default"].handle(a,e,t,n,this)),e}},{key:"resolve",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=void 0;return"string"==typeof e&&(e=[e]),e.forEach(function(e){if(!t.isValidLookup(r)){var o=t.extractFromKey(e,n),i=o.key,a=o.namespaces;t.options.fallbackNS&&(a=a.concat(t.options.fallbackNS));var s=void 0!==n.count&&"string"!=typeof n.count,u=void 0!==n.context&&"string"==typeof n.context&&""!==n.context,l=n.lngs?n.lngs:t.languageUtils.toResolveHierarchy(n.lng||t.language);a.forEach(function(e){t.isValidLookup(r)||l.forEach(function(o){if(!t.isValidLookup(r)){var a=i,l=[a];u&&l.push(a+=""+t.options.contextSeparator+n.context),s&&l.push(a+=t.pluralResolver.getSuffix(o,n.count));for(var c=void 0;c=l.pop();)t.isValidLookup(r)||(r=t.getResource(o,e,c,n))}})})}}),r}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return this.resourceStore.getResource(e,t,n,r)}}]),t}(g["default"]);n["default"]=O,t.exports=n["default"]},{"./EventEmitter":3,"./compatibility/v1":9,"./logger":12,"./postProcessor":13,"./utils":14}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.interpolation={unescapeSuffix:"HTML"},e.interpolation.prefix=e.interpolationPrefix||"__",e.interpolation.suffix=e.interpolationSuffix||"__",e.interpolation.escapeValue=e.escapeInterpolation||!1,e.interpolation.nestingPrefix=e.reusePrefix||"$t(",e.interpolation.nestingSuffix=e.reuseSuffix||")",e}function i(e){return e.resStore&&(e.resources=e.resStore),e.ns&&e.ns.defaultNs?(e.defaultNS=e.ns.defaultNs,e.ns=e.ns.namespaces):e.defaultNS=e.ns||"translation",e.fallbackToDefaultNS&&e.defaultNS&&(e.fallbackNS=e.defaultNS),e.saveMissing=e.sendMissing,e.saveMissingTo=e.sendMissingTo||"current",e.returnNull=e.fallbackOnNull?!1:!0,e.returnEmptyString=e.fallbackOnEmpty?!1:!0,e.returnObjects=e.returnObjectTrees,e.joinArrays="\n",e.returnedObjectHandler=e.objectTreeKeyHandler,e.parseMissingKeyHandler=e.parseMissingKey,e.appendNamespaceToMissingKey=!0,e.nsSeparator=e.nsseparator,e.keySeparator=e.keyseparator,"sprintf"===e.shortcutFunction&&(e.overloadTranslationOptionHandler=function(e){for(var t=[],n=1;n<e.length;n++)t.push(e[n]);return{postProcess:"sprintf",sprintf:t}}),e.whitelist=e.lngWhitelist,e.preload=e.preload,"current"===e.load&&(e.load="currentOnly"),"unspecific"===e.load&&(e.load="languageOnly"),e.backend=e.backend||{},e.backend.loadPath=e.resGetPath||"locales/__lng__/__ns__.json",e.backend.addPath=e.resPostPath||"locales/add/__lng__/__ns__",e.backend.allowMultiLoading=e.dynamicLoad,e.cache=e.cache||{},e.cache.prefix="res_",e.cache.expirationTime=6048e5,e.cache.enabled=e.useLocalStorage?!0:!1,e=o(e),e.defaultVariables&&(e.interpolation.defaultVariables=e.defaultVariables),e}function a(e){return e=o(e),e.joinArrays="\n",e}function s(e){return(e.interpolationPrefix||e.interpolationSuffix||e.escapeInterpolation)&&(e=o(e)),e.nsSeparator=e.nsseparator,e.keySeparator=e.keyseparator,e.returnObjects=e.returnObjectTrees,e}function u(e){e.lng=function(){return c["default"].deprecate("i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup."),e.services.languageUtils.toResolveHierarchy(e.language)[0]},e.preload=function(t,n){c["default"].deprecate("i18next.preload() can be replaced with i18next.loadLanguages()"),e.loadLanguages(t,n)},e.setLng=function(t,n,r){return c["default"].deprecate("i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace."),"function"==typeof n&&(r=n,n={}),n||(n={}),n.fixLng===!0&&r?r(null,e.getFixedT(t)):void e.changeLanguage(t,r)},e.addPostProcessor=function(t,n){c["default"].deprecate("i18next.addPostProcessor() can be replaced by i18next.use({ type: 'postProcessor', name: 'name', process: fc })"),e.use({type:"postProcessor",name:t,process:n})}}Object.defineProperty(n,"__esModule",{value:!0}),n.convertAPIOptions=i,n.convertJSONOptions=a,n.convertTOptions=s,n.appendBackwardsAPI=u;var l=e("../logger"),c=r(l)},{"../logger":12}],10:[function(e,t,n){"use strict";function r(){return{debug:!1,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,load:"all",preload:!1,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,saveMissingTo:"fallback",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,overloadTranslationOptionHandler:function(e){return{defaultValue:e[1]}},interpolation:{escapeValue:!0,prefix:"{{",suffix:"}}",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",defaultVariables:void 0}}}function o(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&e.whitelist.indexOf("cimode")<0&&e.whitelist.push("cimode"),e}Object.defineProperty(n,"__esModule",{value:!0}),n.get=r,n.transformOptions=o},{}],11:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;e=l,t=i,n=a,r=!0,s=l=void 0}},c=e("./logger"),f=o(c),p=e("./EventEmitter"),g=o(p),d=e("./ResourceStore"),h=o(d),v=e("./Translator"),y=o(v),b=e("./LanguageUtils"),m=o(b),O=e("./PluralResolver"),k=o(O),x=e("./Interpolator"),w=o(x),P=e("./BackendConnector"),j=o(P),_=e("./CacheConnector"),S=o(_),E=e("./defaults"),L=e("./postProcessor"),N=o(L),C=e("./compatibility/v1"),R=r(C),M=function(e){function t(e,n){void 0===e&&(e={}),i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.options=(0,E.transformOptions)(e),this.services={},this.logger=f["default"],this.modules={},n&&!this.isInitialized&&this.init(e,n)}return a(t,e),u(t,[{key:"init",value:function(e,t){function n(e){return e?"function"==typeof e?new e:e:void 0}var r=this;if("function"==typeof e&&(t=e,e={}),e||(e={}),"v1"===e.compatibilityAPI?this.options=s({},(0,E.get)(),(0,E.transformOptions)(R.convertAPIOptions(e)),{}):"v1"===e.compatibilityJSON?this.options=s({},(0,E.get)(),(0,E.transformOptions)(R.convertJSONOptions(e)),{}):this.options=s({},(0,E.get)(),this.options,(0,E.transformOptions)(e)),t||(t=function(){}),!this.options.isClone){this.modules.logger?f["default"].init(n(this.modules.logger),this.options):f["default"].init(null,this.options);var o=new m["default"](this.options);this.store=new h["default"](this.options.resources,this.options);var i=this.services;i.logger=f["default"],i.resourceStore=this.store,i.resourceStore.on("added removed",function(e,t){i.cacheConnector.save()}),i.languageUtils=o,i.pluralResolver=new k["default"](o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON}),i.interpolator=new w["default"](this.options),i.backendConnector=new j["default"](n(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;t>o;o++)n[o-1]=arguments[o];r.emit.apply(r,[e].concat(n))}),i.backendConnector.on("loaded",function(e){i.cacheConnector.save()}),i.cacheConnector=new S["default"](n(this.modules.cache),i.resourceStore,i,this.options),i.cacheConnector.on("*",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;t>o;o++)n[o-1]=arguments[o];r.emit.apply(r,[e].concat(n))}),this.modules.languageDetector&&(i.languageDetector=n(this.modules.languageDetector),i.languageDetector.init(i,this.options.detection,this.options)),this.translator=new y["default"](this.services,this.options),this.translator.on("*",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;t>o;o++)n[o-1]=arguments[o];r.emit.apply(r,[e].concat(n))})}var a=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"];a.forEach(function(e){r[e]=function(){return this.store[e].apply(this.store,arguments)}}),"v1"===this.options.compatibilityAPI&&R.appendBackwardsAPI(this),this.changeLanguage(this.options.lng,function(e,n){r.emit("initialized",r.options),r.logger.log("initialized",r.options),t(e,n)})}},{key:"loadResources",value:function(e){var t=this;if(e||(e=function(){}),this.options.resources)e(null);else{var n=function(){if(t.language&&"cimode"===t.language.toLowerCase())return{v:e()};var n=[],r=function(e){var r=t.services.languageUtils.toResolveHierarchy(e);r.forEach(function(e){n.indexOf(e)<0&&n.push(e)})};r(t.language),t.options.preload&&t.options.preload.forEach(function(e){r(e)}),t.services.cacheConnector.load(n,t.options.ns,function(){t.services.backendConnector.load(n,t.options.ns,e)})}();if("object"==typeof n)return n.v}}},{key:"use",value:function(e){return"backend"===e.type&&(this.modules.backend=e),"cache"===e.type&&(this.modules.cache=e),("logger"===e.type||e.log&&e.warn&&e.warn)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"postProcessor"===e.type&&N["default"].addPostProcessor(e),this}},{key:"changeLanguage",value:function(e,t){var n=this,r=function(r){e&&(n.emit("languageChanged",e),n.logger.log("languageChanged",e)),t&&t(r,function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return n.t.apply(n,t)})};!e&&this.services.languageDetector&&(e=this.services.languageDetector.detect()),e&&(this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.translator.changeLanguage(e),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage(e)),this.loadResources(function(e){r(e)})}},{key:"getFixedT",value:function(e,t){var n=this,r=function o(e,t){return t=t||{},t.lng=t.lng||o.lng,t.ns=t.ns||o.ns,n.t(e,t)};return r.lng=e,r.ns=t,r}},{key:"t",value:function(){return this.translator&&this.translator.translate.apply(this.translator,arguments)}},{key:"exists",value:function(){return this.translator&&this.translator.exists.apply(this.translator,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"loadNamespaces",value:function(e,t){var n=this;return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach(function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)}),void this.loadResources(t)):t&&t()}},{key:"loadLanguages",value:function(e,t){"string"==typeof e&&(e=[e]),this.options.preload=this.options.preload?this.options.preload.concat(e):e,this.loadResources(t)}},{key:"dir",value:function(e){e||(e=this.language);var t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return t.indexOf(this.services.languageUtils.getLanguagePartFromCode(e))?"ltr":"rtl"}},{key:"createInstance",value:function(e,n){return void 0===e&&(e={}),new t(e,n)}},{key:"cloneInstance",value:function(e,n){var r=this;void 0===e&&(e={});var o=new t(s({},e,this.options,{isClone:!0}),n),i=["store","translator","services","language"];return i.forEach(function(e){o[e]=r[e]}),o}}]),t}(g["default"]);n["default"]=new M,t.exports=n["default"]},{"./BackendConnector":1,"./CacheConnector":2,"./EventEmitter":3,"./Interpolator":4,"./LanguageUtils":5,"./PluralResolver":6,"./ResourceStore":7,"./Translator":8,"./compatibility/v1":9,"./defaults":10,"./logger":12,"./postProcessor":13}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a={type:"logger",log:function(e){this._output("log",e)},warn:function(e){this._output("warn",e)},error:function(e){this._output("error",e)},_output:function(e,t){console&&console[e]&&console[e].apply(console,Array.prototype.slice.call(t))}},s=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r(this,e),this.subs=[],this.init(t,n)}return i(e,[{key:"init",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.prefix=t.prefix||"i18next:",this.logger=e||a,this.options=t,this.debug=t.debug===!1?!1:!0}},{key:"setDebug",value:function(e){this.debug=e,this.subs.forEach(function(t){t.setDebug(e)})}},{key:"log",value:function(){this.forward(arguments,"log","",!0)}},{key:"warn",value:function(){this.forward(arguments,"warn","",!0)}},{key:"error",value:function(){this.forward(arguments,"error","")}},{key:"deprecate",value:function(){this.forward(arguments,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){(!r||this.debug)&&("string"==typeof e[0]&&(e[0]=n+this.prefix+" "+e[0]),this.logger[t](e))}},{key:"create",value:function(t){var n=new e(this.logger,o({prefix:this.prefix+":"+t+":"},this.options));return this.subs.push(n),n}}]),e}();n["default"]=new s,t.exports=n["default"]},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,o){var i=this;return e.forEach(function(e){i.processors[e]&&(t=i.processors[e].process(t,n,r,o))}),t}},t.exports=n["default"]},{}],14:[function(e,t,n){"use strict";function r(e){return null==e?"":""+e}function o(e,t,n){e.forEach(function(e){t[e]&&(n[e]=t[e])})}function i(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(!e)return{};var i=r(o.shift());!e[i]&&n&&(e[i]=new n),e=e[i]}return e?{obj:e,k:r(o.shift())}:{}}function a(e,t,n){var r=i(e,t,Object),o=r.obj,a=r.k;o[a]=n}function s(e,t,n,r){var o=i(e,t,Object),a=o.obj,s=o.k;a[s]=a[s]||[],r&&(a[s]=a[s].concat(n)),r||a[s].push(n)}function u(e,t){var n=i(e,t),r=n.obj,o=n.k;return r?r[o]:void 0}function l(e,t,n){for(var r in t)r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):l(e[r],t[r],n):e[r]=t[r];return e}function c(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function f(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return p[e]}):e}Object.defineProperty(n,"__esModule",{value:!0}),n.makeString=r,n.copy=o,n.setPath=a,n.pushPath=s,n.getPath=u,n.deepExtend=l,n.regexEscape=c,n.escape=f;var p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"}},{}]},{},[11])(11)});!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.jqueryI18next=e()}(this,function(){"use strict";function t(t,a){function i(n,a,i){function r(t,n){return f.parseDefaultValueFromContent?e({},t,{defaultValue:n}):t}if(0!==a.length){var o="text";if(0===a.indexOf("[")){var l=a.split("]");a=l[1],o=l[0].substr(1,l[0].length-1)}if(a.indexOf(";")===a.length-1&&(a=a.substr(0,a.length-2)),"html"===o)n.html(t.t(a,r(i,n.html())));else if("text"===o)n.text(t.t(a,r(i,n.text())));else if("prepend"===o)n.prepend(t.t(a,r(i,n.html())));else if("append"===o)n.append(t.t(a,r(i,n.html())));else if(0===o.indexOf("data-")){var s=o.substr("data-".length),d=t.t(a,r(i,n.data(s)));n.data(s,d),n.attr(o,d)}else n.attr(o,t.t(a,r(i,n.attr(o))))}}function r(t,n){var r=t.attr(f.selectorAttr);if(r||"undefined"==typeof r||r===!1||(r=t.text()||t.val()),r){var o=t,l=t.data(f.targetAttr);if(l&&(o=t.find(l)||t),n||f.useOptionsAttr!==!0||(n=t.data(f.optionsAttr)),n=n||{},r.indexOf(";")>=0){var s=r.split(";");a.each(s,function(t,e){""!==e&&i(o,e,n)})}else i(o,r,n);if(f.useOptionsAttr===!0){var d={};d=e({clone:d},n),delete d.lng,t.data(f.optionsAttr,d)}}}function o(t){return this.each(function(){r(a(this),t);var e=a(this).find("["+f.selectorAttr+"]");e.each(function(){r(a(this),t)})})}var f=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];f=e({},n,f),a[f.tName]=t.t.bind(t),a[f.i18nName]=t,a.fn[f.handleName]=o}var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},n={tName:"t",i18nName:"i18n",handleName:"localize",selectorAttr:"data-i18n",targetAttr:"i18n-target",optionsAttr:"i18n-options",useOptionsAttr:!1,parseDefaultValueFromContent:!0},a={init:t};return a});(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)})([function(module,exports,__webpack_require__){__webpack_require__(1);__webpack_require__(112);__webpack_require__(206)},function(module,exports,__webpack_require__){var BaseObject=__webpack_require__(2);var awf=new BaseObject;window.awf=awf;_.templateSettings={evaluate:/\{\[([\s\S]+?)\]\}/g,interpolate:/{{([\s\S]+?)}}/g,escape:/{{{([\s\S]+?)}}}/g};__webpack_require__(4);awf.util=__webpack_require__(5);if(awf.util.info.browser.ie||awf.util.info.browser.edge){window.console.time=function(){};window.console.timeEnd=function(){};window.console.timeStamp=function(){}}awf.__={BaseObject:__webpack_require__(2)};__webpack_require__(50);var version_data=_.merge({},__webpack_require__(51),__webpack_require__(52)),version=_.template("{{major}}.{{minor}}.{{patch}} {{name}} - {{date}}.{{iteration}}")(version_data);Object.defineProperty(awf,"VERSION",{get:function(){return version}});__webpack_require__(53);__webpack_require__(54);__webpack_require__(55);awf.init=__webpack_require__(100);awf.construct=new awf.__.ConstructService({local_storage_key:"awf.construct"});awf.i18n_ready=$.Deferred();Object.defineProperty(awf,"can_use_i18next",{get:function(){return awf.i18n_ready.state()=="resolved"}});Number.isInteger=Number.isInteger||function(value){return typeof value==="number"&&isFinite(value)&&Math.floor(value)===value}},function(module,exports,__webpack_require__){module.exports=BaseObject;var extendJQueryEvents=__webpack_require__(3);function BaseObject(){}extendJQueryEvents(BaseObject.prototype)},function(module,exports){module.exports=extendJQueryEvents;function extendJQueryEvents(target){_.forEach(["on","off","trigger","one","triggerHandler"],function(ev){target[ev]=function(){$.fn[ev].apply($(this),arguments);return this}})}},function(module,exports){try{var key="__--foo--__",is_set=key in Object.keys(localStorage),val=localStorage.getItem(key);localStorage.setItem(key,"__--bar--__");if(is_set)localStorage.setItem(key,val);else localStorage.removeItem(key)}catch(er){console.warn("localStorage.setItem() will not work (you are likely in a private session). The method has been reassigned to a console warning to avoid crashing the browser.");localStorage.setItem=function(key){console.warn("localStorage.setItem was called. The attempt to assign `"+key+"` was ignored.")}}},function(module,exports,__webpack_require__){var obj={arraySequence:__webpack_require__(6),at:__webpack_require__(7),bindFlipper:__webpack_require__(8),transitionHandler:__webpack_require__(9),createCallback:__webpack_require__(10),createExtendableFunction:__webpack_require__(11),event:__webpack_require__(13),email:__webpack_require__(14),isPromise:__webpack_require__(12),isLocalStorageSafe:__webpack_require__(15),list:__webpack_require__(16),logPromise:__webpack_require__(17),mapLeaves:__webpack_require__(18),hashParams:__webpack_require__(19),urlParams:__webpack_require__(20),getDeepLinkValues:__webpack_require__(21),use:__webpack_require__(22),randomID:__webpack_require__(23),reducedOrder:__webpack_require__(24),keyCodes:__webpack_require__(25),showFocus:__webpack_require__(26),jsonToTable:__webpack_require__(27),consoleToggle:__webpack_require__(28),runPromiseSequence:__webpack_require__(29),string:__webpack_require__(30),speak:__webpack_require__(31),info:__webpack_require__(32),parsePartials:__webpack_require__(33),postMessage:__webpack_require__(34),urlDelayedDeferred:__webpack_require__(35),urlMessage:__webpack_require__(36),urlMessageIntro:__webpack_require__(37),registerNextPageLoadEvent:__webpack_require__(38)};_.extend(obj,__webpack_require__(39));_.extend(obj,__webpack_require__(40));_.extend(obj,__webpack_require__(41));_.extend(obj,__webpack_require__(42));$.extend($.expr[":"],__webpack_require__(43));$.fn.extend({simulate:__webpack_require__(44)});obj.mixin=__webpack_require__(45);__webpack_require__(49);module.exports=obj},function(module,exports){module.exports=arraySequence;function arraySequence(len,start){start=start||0;var warning="Cannot generate array sequence of length `"+len+"` starting at `"+start+"`.",arr=[];if(!Number.isInteger(len)||!Number.isInteger(start)){console.warn(warning+" Both length and start arguments need to be integers.");return arr}try{arr=Array.apply(null,{length:len}).map(function(value,index){return index+start});return arr}catch(er){console.warn(warning);console.error(er);return arr}console.warn(warning+" Something went wrong...");return arr}},function(module,exports){module.exports=function at(date){var dfr=$.Deferred(),now=new Date,delta=date-now;if(delta>=0){setTimeout(function(){dfr.resolve(delta)},delta)}else{dfr.reject()}return dfr}},function(module,exports){module.exports=bindFlipper;function bindFlipper(opener,closer){var opener_is_titled_instance=opener instanceof awf.ui.TitledCard,opener_is_icon_instance=opener instanceof awf.ui.IconCard,opener_is_large_instance=opener instanceof awf.ui.LargeCard,closer_is_large_instance=closer instanceof awf.ui.LargeCard;if(!opener||!closer)throw new Error("Bind Flip: Flip animation cannot be applied without an opener AND closer");if(opener_is_large_instance||!opener_is_icon_instance&&!opener_is_titled_instance)throw new Error("Bind Flip: The opener must be an instance of awf.ui.TitledCard or awf.ui.IconCard");if(!closer_is_large_instance)throw new Error("Bind Flip: The closer must be an instance of awf.ui.LargeCard");var duration=200,delay=200;opener.on("request-open",function(ev,view_params){if(_.get(awf,"app.experience.modal_available_flag")){if(!awf.app.experience.modal_available_flag.value){console.warn("Attempted to flip a card, but the flag `modal_available_flag` is currently `false`.");return false}}if(awf.drag_handler.active){return false}if($("body").hasClass("flipping")){return false}$("body").addClass("flipping");opener.triggerHandler("flip-start");opener.$el.addClass("-flip");if(closer.$el===null){closer.render()}closer.$el.css("visibility","hidden").addClass("-flip");setTimeout(function(){opener.$el.css("visibility","hidden");opener.triggerHandler("flip-half-complete",[view_params])},duration+delay/2)});opener.on("flip-half-complete",function(){if(!awf.modal){awf.modal=new awf.ui.Modal({parent:$("body"),i18n:{label:"awf.page.modal.label"}})}awf.modal.render().setContent(closer.$el).setActiveState(true).setWidth(awf.app.experience.modal_width);awf.modal.$el.hide().fadeIn("fast");awf.modal.on("request-close."+closer.aria_id,function(){closer.triggerHandler("request-close")});closer.$el.css("visibility","").removeClass("-flip");setTimeout(function(){closer.children.close.$el.focus();opener.triggerHandler("flip-complete")},duration+delay)});opener.on("flip-complete",function(){$("body").removeClass("flipping")});closer.on("request-close",function(){if($("body").hasClass("flipping"))return false;$("body").addClass("flipping");closer.triggerHandler("flip-start");closer.$el.addClass("-flip");opener.$el.css("visibility","hidden").addClass("-flip");setTimeout(function(){closer.triggerHandler("flip-half-complete")},duration+delay/2)});closer.on("flip-half-complete",function(){awf.modal.$el.fadeOut("fast",function(){awf.modal.setActiveState(false);awf.modal.off("request-close."+closer.aria_id);closer.destroy();awf.modal.setContent(null).destroy()});setTimeout(function(){opener.$el.css("visibility","").removeClass("-flip")},delay);setTimeout(function(){opener._$card.focus();closer.triggerHandler("flip-complete")},duration+delay)});closer.on("flip-complete",function(){$("body").removeClass("flipping");awf.modal.triggerHandler("close-complete")})}},function(module,exports){module.exports=transitionHandler;function transitionHandler(opener,closer){var opener_is_titled_instance=opener instanceof awf.ui.TitledCard,opener_is_icon_instance=opener instanceof awf.ui.IconCard,opener_is_large_instance=opener instanceof awf.ui.LargeCard,closer_is_large_instance=closer instanceof awf.ui.LargeCard;if(!opener||!closer)throw new Error("Bind Transition: Transition animation cannot be applied without an opener AND closer");if(opener_is_large_instance||!opener_is_icon_instance&&!opener_is_titled_instance)throw new Error("Bind Transition: The opener must be an instance of awf.ui.TitledCard or awf.ui.IconCard");if(!closer_is_large_instance)throw new Error("Bind Transition: The closer must be an instance of awf.ui.LargeCard");var duration=200,delay=10;opener.on("request-open",function(){if(_.get(awf,"app.experience.modal_available_flag")){if(!awf.app.experience.modal_available_flag.value){console.warn("Attempted to transition a card, but the flag `modal_available_flag` is currently `false`.");return false}}if(awf.drag_handler.active)return false;if($("body").hasClass("awf-transitioning"))return false;$("body").addClass("awf-transitioning");opener.$el.animate({opacity:0},duration/2);opener.triggerHandler("transition-start");if(closer.$el===null)closer.render();opener.triggerHandler("transition-half-complete");
});opener.on("transition-half-complete",function(){if(!awf.modal)awf.modal=new awf.ui.Modal({parent:$("body"),i18n:{label:"awf.page.modal.label"}});awf.modal.render().setContent(closer.$el).setWidth(awf.app.experience.modal_width).setActiveState(true).$el.addClass("awf-transition awf-transition--scale-fade -inner-hidden");awf.modal.on("request-close."+closer.aria_id,function(){closer.triggerHandler("request-close")});setTimeout(function(){awf.modal.$el.removeClass("-inner-hidden")},delay);setTimeout(function(){closer.children.close.$el.focus();opener.triggerHandler("transition-complete")},duration+delay)});opener.on("transition-complete",function(){$("body").removeClass("awf-transitioning")});closer.on("request-close",function(){if($("body").hasClass("awf-transitioning"))return false;$("body").addClass("awf-transitioning");closer.triggerHandler("transition-start");awf.modal.$el.removeClass("awf-transition").addClass("-inner-hidden");setTimeout(function(){closer.triggerHandler("transition-half-complete")},duration);opener.$el.animate({opacity:1},duration/2)});closer.on("transition-half-complete",function(){awf.modal.setActiveState(false);awf.modal.off("request-close."+closer.aria_id);closer.destroy();awf.modal.setContent(null).destroy();opener._$card.focus();closer.triggerHandler("transition-complete")});closer.on("transition-complete",function(){$("body").removeClass("awf-transitioning");awf.modal.triggerHandler("close-complete")})}},function(module,exports){module.exports=createCallback;var callback_index=0,callbacks={};function createCallback(fn){return new Callback(fn).string}function Callback(fn){var self=this;self.string="awfcallback"+ ++callback_index;window[self.string]=function(){fn.apply(window,arguments);window[self.string]=null};window.last_awf_callback=self.string}},function(module,exports,__webpack_require__){var isPromise=__webpack_require__(12);module.exports=function(){var preps={},callbacks={},resolutions=[],rejections=[],self=this;var extendableFunction=function(){var args=arguments;_.forEach(preps,function(fn,id){console.group("running init prep `"+id+"`");fn.apply(fn,args||[{}]);console.groupEnd()});var dfr=$.Deferred(),active_callbacks=_.filter(callbacks,function(cb){return!cb.muted}),responses=_.mapValues(active_callbacks,function(fn){var ret;ret=fn.apply(fn,args||[{}]);return ret}),response_done_count=0,response_done_total=0;dfr.done(function(){var args=arguments;_.forEach(resolutions,function(resolution){resolution.apply(self,args)});resolutions=[]}).fail(function(er){var args=arguments;_.forEach(rejections,function(rejection){rejection.apply(self,args)});rejections=[]});_.forEach(responses,function(response,key){if(isPromise(response))response_done_total++});if(response_done_total===0){dfr.resolve(responses)}else{_.forEach(responses,function(response,key){if(isPromise(response)){response.done(function(){responses[key]=arguments;if(++response_done_count==response_done_total)dfr.resolve(responses)}).fail(function(er){dfr.reject(er)})}})}return dfr.promise()};extendableFunction.prep=function(obj){_.extend(preps,obj);return this};extendableFunction.extend=function(obj){_.extend(callbacks,obj);return this};extendableFunction.done=function(callback){resolutions.push(callback);return this};extendableFunction.fail=function(callback){rejections.push(callback);return this};extendableFunction.omit=function(keys){callbacks=_.omit(callbacks,keys)};extendableFunction.mute=function(keys){if(typeof keys=="string")keys=[keys];_.forEach(keys,function(key){callbacks[key].muted=true})};extendableFunction.muteOthers=function(keys){if(typeof keys=="string")keys=[keys];_.forEach(callbacks,function(cb,key){cb.muted=!_.contains(keys,key)})};extendableFunction.unmute=function(keys){if(typeof keys=="string")keys=[keys];_.forEach(keys,function(key){callbacks[key].muted=false})};extendableFunction.unmuteAll=function(){_.forEach(callbacks,function(val,key){callbacks[key].muted=false})};Object.defineProperty(extendableFunction,"preps",{enumerable:true,get:function(){return _.keys(preps)}});Object.defineProperty(extendableFunction,"callbacks",{enumerable:true,get:function(){return _.keys(callbacks)}});Object.defineProperty(extendableFunction,"muted_callbacks",{enumerable:true,get:function(){var ret=[];_.forEach(callbacks,function(cb,name){if(cb.muted)ret.push(name)});return ret}});Object.defineProperty(extendableFunction,"active_callbacks",{enumerable:true,get:function(){var ret=[];_.forEach(callbacks,function(cb,name){if(!cb.muted)ret.push(name)});return ret}});return extendableFunction}},function(module,exports){module.exports=function isPromise(value){if(!(value&&typeof value.done==="function")){return false}var promiseDoneSrc=String($.Deferred().done),valueDoneSrc=String(value.done);return promiseDoneSrc===valueDoneSrc}},function(module,exports){module.exports={check:function(key){var value=localStorage.getItem("events:"+awf.app.id+":"+key);if(value){var now=new Date;value=new Date(value);return now.getTime()-value.getTime()}else{return null}},claim:function(key){var now=new Date;localStorage.setItem("events:"+awf.app.id+":"+key,now);return now},unClaim:function(key){var value=localStorage.getItem("events:"+awf.app.id+":"+key);if(value){localStorage.removeItem("events:"+awf.app.id+":"+key);return value}else{return null}}}},function(module,exports){module.exports=email;function email(data){switch(arguments.length){case 0:return email({});case 1:if(typeof data=="string"){return email({to:data})}else if(data===null){return email({})}break;case 2:return email(_.extend({},arguments[1],{to:arguments[0]}))}data=data||{};if(data.body){data.body=data.body.replace(/\n/gm,"%0D%0A")}var to=data.to||"";delete data.to;if(_.keys(data).length===0){data=null}var mailto=awf.util.urlParams(to,data);var $iframe=$('<iframe src="mailto:'+mailto+'" />');$("body").append($iframe);setTimeout(function(){$iframe.remove()},100)}},function(module,exports){module.exports=isLocalStorageSafe;function isLocalStorageSafe(){var longevity_key="__longevity_test__",longevity_val=localStorage.getItem(longevity_key);if(longevity_val===null){localStorage.setItem(longevity_key,(new Date).getTime())}else{var then=new Date(parseInt(longevity_val)),now=new Date,delta=now-then;if(delta>1e3*60*60*48)return true}var session_key="__session_test__",first_time_this_session=sessionStorage.getItem(session_key)===null,local_val=localStorage.getItem(session_key);if(first_time_this_session)sessionStorage.setItem(session_key,"ping");switch(local_val){case null:if(first_time_this_session)localStorage.setItem(session_key,"1");return false;case"1":if(first_time_this_session)localStorage.setItem(session_key,"2");return false}return true}},function(module,exports){module.exports=function list(arr,connector,wrapper){if(!_.isArray(arr)){throw new Error("Cannot make list from a non-array")}connector=connector||"and";wrapper=wrapper||"";switch(arr.length){case 0:return"";case 1:return _.template("{{wrapper}}{{item}}{{wrapper}}")({item:arr[0],wrapper:wrapper});case 2:return _.template("{{wrapper}}{{first}}{{wrapper}} {{connector}} {{wrapper}}{{last}}{{wrapper}}")({first:arr[0],connector:connector,wrapper:wrapper,last:arr[1]});default:return _.map(arr,function(item,i){if(i==arr.length-1){return _.template("{{connector}} {{wrapper}}{{item}}{{wrapper}}")({item:item,connector:connector,wrapper:wrapper})}else{return _.template("{{wrapper}}{{item}}{{wrapper}}")({item:item,wrapper:wrapper})}}).join(", ")}}},function(module,exports){module.exports=logPromise;function logPromise(dfr,_label){return(_label?"`"+_label+"` ":"")+dfr.done(function(){switch(arguments.length){case 0:console.log((_label?"`"+_label+"` ":"")+"resolved");break;case 1:console.log((_label?"`"+_label+"` ":"")+"resolved: ",arguments[0]);break;case 2:console.group((_label?"`"+_label+"` ":"")+"resolved");console.log(arguments[0]);console.log(arguments[1]);console.groupEnd();break;case 3:console.group((_label?"`"+_label+"` ":"")+"resolved");console.log(arguments[0]);console.log(arguments[1]);console.log(arguments[2]);console.groupEnd();break;case 4:console.group((_label?"`"+_label+"` ":"")+"resolved");console.log(arguments[0]);console.log(arguments[1]);console.log(arguments[2]);console.log(arguments[3]);console.groupEnd();break;default:console.log((_label?"`"+_label+"` ":"")+"resolved: ",arguments)}}).fail(function(){console.warn((_label?"`"+_label+"` ":"")+"rejected");_.forEach(arguments,function(arg){console.error(arg)})}).state()}},function(module,exports){module.exports=mapLeaves;function mapLeaves(obj,callback,prefix){var result={};prefix=prefix||"";_.forEach(obj,function(val,key){var address=prefix+(prefix.length>0?".":"")+key;if(_.isObject(val)&&!_.isArray(val)&&!_.isFunction(val)){result[key]=mapLeaves(val,callback,address)}else{result[key]=callback(val,address)}});return result}},function(module,exports){module.exports=hashParams;function hashParams(data){if(arguments.length>0){if(!data){return"#/"}if(!_.isArray(data)){data=[data]}return"#/"+data.join("/")+"/"}else{var hash=window.location.hash;if(hash){if(hash.charAt(1)!="/"){return[]}var ret=hash.substring(2).split("/");if(_.last(ret)===""){ret.pop()}return ret}else{return[]}}}},function(module,exports){module.exports=urlParams;function urlParams(prefix,params,hash){switch(arguments.length){case 0:return"";case 1:if(prefix){return"?"+_.map(prefix,function(val,key){return key+"="+val}).join("&")}else{return""}break;case 2:return(prefix||"")+urlParams(params);default:if(hash){return urlParams(prefix,params)+"#"+_.map(hash,function(val,key){return key+"="+val}).join("&")}else{return urlParams(prefix,params)}break}}},function(module,exports){module.exports=function(url){var obj={base:url,experience:null,cog:null,args:null},hook="#/",hook_index=url.indexOf(hook);if(hook_index===-1){return obj}obj.base=url.substring(0,hook_index);url=url.substring(hook_index+1);var args_hook="/args:",args_hook_index=url.indexOf(args_hook);if(args_hook_index===-1){obj.args=null}else{obj.args=url.substring(args_hook_index+args_hook.length);url=url.substring(0,args_hook_index)}var segs=url.split("/");if(segs[0].length===0){segs.shift()}if(segs.length>0){obj.experience=segs[0]||null}if(segs.length>1){obj.cog=segs[1]||null}return obj}},function(module,exports){module.exports=use;function use(Super){return{toCreate:function(Child){Child.prototype=Object.create(Super.prototype);Child.prototype.constructor=Child;Child.prototype.parent=Super}}}},function(module,exports){module.exports=randomID;var x=0;function randomID(len,chars){len=len||5;chars=chars||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";x++;var id=Array.apply(0,Array(len)).map(function(){return function(charset){return charset.charAt(Math.floor(Math.random()*charset.length))}(chars)}).join("");id=id+"-"+x;return id}},function(module,exports){module.exports=reducedOrder;function reducedOrder(arr){var indexes=[],order=[],i=0;_.forEach(arr,function(val){indexes.push(val);order.push(null)});while(i<order.length){var min_val=_.min(indexes),min_ind=_.indexOf(indexes,min_val);indexes[min_ind]="-";order[min_ind]=i++}return order}},function(module,exports){var keyCodes={tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40};module.exports=keyCodes},function(module,exports){module.exports=showFocus;function showFocus(crosshairs){if(crosshairs===null){$("#ch-hor").remove();$("#ch-ver").remove();$(".awf-show-focus").removeClass("awf-show-focus").css({outline:"","box-shadow":""});$("body").off("focusin.show_focus");$(window).off("scroll.show_focus resize.show_focus");return null}if(crosshairs){$("body").append('<div id="ch-hor"></div>').append('<div id="ch-ver"></div>')}$("body").off("focusin.show_focus").on("focusin.show_focus",function(ev){var $target=$(ev.target),offset=$target.offset(),scroll_top=$(window).scrollTop(),scroll_left=$(window).scrollLeft(),offset_message=offset.top+":"+offset.left;console.log("%cFocused Element Details:","color:red;text-decoration:underline");console.log("%c"+ev.target.tagName+" - "+"%c"+ev.target.className,"color:#916968;font-weight:bold;padding-left:10px","color:#B45331");console.log("%cOffset - "+"%c"+offset_message,"color:#916968;font-weight:bold;padding-left:10px","color:#B45331");console.log("%cFocused Object :","padding-left:10px",ev.target);$(".awf-show-focus").removeClass("awf-show-focus").css({outline:"","box-shadow":""});$target.addClass("awf-show-focus").css({outline:"2px dashed red","box-shadow":"0 0px 15px 5px #ff0000"});if(crosshairs){$("#ch-hor").css({width:"300%",height:"1px",background:"red",position:"fixed",left:"-100%",top:offset.top-scroll_top+"px","z-index":"1000"});$("#ch-ver").css({width:"1px",height:"300%",background:"red",position:"fixed",left:offset.left-scroll_left+"px",top:"-100%","z-index":"1000"});$(window).off("scroll.show_focus resize.show_focus").on("scroll.show_focus resize.show_focus",function(){$("#ch-hor").css("top",$target.offset().top-$(window).scrollTop()+"px");$("#ch-ver").css("left",$target.offset().left-$(window).scrollLeft()+"px")})}})}},function(module,exports){module.exports=jsonToTable;function jsonToTable(json,_column_order){var $table=$("<table></table>"),headers=[];_.forEach(json,function(obj,index){headers=_.unique(headers.concat(_.keys(obj)))});var order=_column_order||[];order=_.union(order,headers);headers=_.unique(order.concat(headers));var $head_tr=$("<tr></tr>");_.forEach(headers,function(label){$head_tr.append("<th>"+label+"</th>")});var $thead=$("<thead></thead>");$thead.append($head_tr);$table.append($thead);var $tbody=$("<tbody></tbody>");_.forEach(json,function(obj,index){var $tr=$("<tr></tr>");_.forEach(headers,function(key){var val=obj[key],$td=$("<td></td>");switch(typeof val){case"undefined":$td.addClass("type-undefined");break;case"string":$td.addClass("type-string");break;case"number":$td.addClass("type-number");break;case"boolean":$td.addClass("type-boolean");break;case"object":if(obj===null){$td.addClass("type-null")}else if(_.isArray(obj)){$td.addClass("type-array")}else if(_.isFunction(obj)){$td.addClass("type-function")}else{$td.addClass("type-object")}break}$td.append(val);$tr.append($td)});$tbody.append($tr)});$table.append($tbody);return $table}},function(module,exports){var keys=["log","info","warn","error","group","groupCollapsed","groupEnd"],origs=_.zipObject(_.map(keys,function(key){return[key,console[key]]}));module.exports={enable:function(){_.forEach(keys,function(key){console[key]=origs[key]})},disable:function(){_.forEach(keys,function(key){console[key]=function(){}})}}},function(module,exports){module.exports=runPromiseSequence;function runPromiseSequence(callacks,first_args){var self=this,callback_index=-1,dfr=$.CancelableDeferred();function runNextCallback(args){callback_index++;if(callback_index==callacks.length){dfr.resolve(args);return false}var callback=callacks[callback_index];try{callback.call(self,args).done(function(response){if(dfr.state()=="pending"){runNextCallback(response)}}).fail(dfr.reject)}catch(er){dfr.reject(er)}}runNextCallback(first_args);return dfr}},function(module,exports,__webpack_require__){module.exports=function(s){return new AwfString(s)};var use=__webpack_require__(22);use(String).toCreate(AwfString);function AwfString(value){this.value=value||"";String.apply(this,arguments)}Object.defineProperty(AwfString.prototype,"length",{get:function(){return this.value.length}});_.extend(AwfString.prototype,{toString:function(){return this.value},valueOf:function(){return this.value},toJSON:function(){return this.value},between:function(start,end){return new AwfString(AwfString.between(this.value,start,end))},trim:function(){return new AwfString(_.trim(this.value))},trimEnd:function(){return new AwfString(_.trimEnd(this.value))},trimStart:function(){return new AwfString(_.trimStart(this.value))},toSnakeCase:function(){return new AwfString(_.snakeCase(this.value))},toKebabCase:function(){return new AwfString(_.kebabCase(this.value))},toCamelCase:function(){return new AwfString(_.camelCase(this.value))},toUpperCamelCase:function(){return new AwfString(_.capitalize(_.camelCase(this.value)))},toStartCase:function(){return new AwfString(_.startCase(this.value))},toUpperCase:function(){return new AwfString(this.value.toUpperCase())},toLowerCase:function(){return new AwfString(this.value.toLowerCase())},substring:function(start,length){start=start||0;length=length||0;if(start<0){start=this.value.length+start}var end=length>0?start+length:this.value.length+length;return new AwfString(this.value.substring(start,end))},repeat:function(amount){return new AwfString(_.repeat(this.value,amount))},endsWith:function(val,position){return _.endsWith(this.value,val,position)},startsWith:function(val,position){return _.startsWith(this.value,val,position)},escape:function(){return new AwfString(_.escape(this.value))},pad:function(amount,chars){return new AwfString(_.pad(this.value,amount,chars))},padLeft:function(amount,chars){return new AwfString(_.padLeft(this.value,amount,chars))},padRight:function(amount,chars){return new AwfString(_.padRight(this.value,amount,chars))},pigLatin:function(){return new AwfString(AwfString.pigLatin(this.value))},parseInt:function(){return _.parseInt(this.value)},templateWith:function(data){return new AwfString(_.template(this.value)(data))},truncate:function(limit){return new AwfString(_.trunc(this.value,limit))},words:function(){return _.words(this.value)}});_.extend(AwfString,{between:function(value,start,end){value=value.substring(value.indexOf(start)+start.length);value=value.substring(0,value.lastIndexOf(end));return value},pigLatin:function(msg){var mortars=msg.match(/\W/g),bricks=_.map(msg.split(/\W/),function(value){if(value==="")return value;var caps=_.map(value,function(c){return c.toUpperCase()==c}),vowel_index=value.search(/a|e|i|o|u/i);var f=value.substring(0,vowel_index),r=value.substring(vowel_index);value=r+f;value=_.map(value,function(c,i){return c[caps[i]?"toUpperCase":"toLowerCase"]()}).join("");value+=(vowel_index===0?"w":"")+"ay";return value});var ret=_.map(mortars,function(mortar,i){return bricks[i]+mortar}).join("");if(mortars){if(bricks.length>mortars.length)ret+=bricks[bricks.length-1]}else{ret=bricks[0]}return ret}})},function(module,exports){module.exports=speak;function speak(text,params,callback){params=params||{};var id=params.id||"alex";if(typeof id=="string")id=speak.voice_ids[id.toLowerCase()];if(typeof id=="undefined")id=13;if("speechSynthesis"in window){var msg=new SpeechSynthesisUtterance;var voices=window.speechSynthesis.getVoices();msg.voice=voices[id];msg.voiceURI="native";msg.volume=params.volume||1;msg.rate=params.rate||1;msg.pitch=params.pitch||1;msg.text=text;msg.lang="en-US";if(callback)msg.onend=callback;speechSynthesis.speak(msg);return msg}return null}if("speechSynthesis"in window){speak.voices=window.speechSynthesis.getVoices();speak.voice_ids=_.object(_.map(speak.voices,function(voice,i){return[voice.name.toLowerCase(),i]}));window.speechSynthesis.onvoiceschanged=function(){speak.voices=window.speechSynthesis.getVoices();speak.voice_ids=_.object(_.map(speak.voices,function(voice,i){return[voice.name.toLowerCase(),i]}))}}},function(module,exports){function between(haystack,needle1,needle2){var ret=haystack.substring(haystack.indexOf(needle1)+needle1.length);return ret.substring(0,ret.indexOf(needle2))}var info={};info.browser={chrome:false,safari:false,firefox:false,ie:false,edge:false};info.browser_version=null;var ua=navigator.userAgent,av=navigator.appVersion;function getBrowserAndVersion(){if(ua.indexOf("Edge")>-1){info.browser.edge=true;info.browser_version=parseInt(between(ua,"Edge/","."),10);return}if(ua.indexOf("Safari")>-1){if(ua.indexOf("Chrome")>-1){info.browser.chrome=true;info.browser_version=parseInt(between(ua,"Chrome/","."),10)}else{info.browser.safari=true;info.browser_version=parseInt(between(ua,"Version/","."),10)}return}if(ua.indexOf("Firefox")>-1){info.browser.firefox=true;info.browser_version=parseInt(between(ua,"Firefox/","."),10);return}var ind=av.indexOf("MSIE ");if(ind>-1){info.browser.ie=true;info.browser_version=parseInt(between(av," MSIE ","."),10);return}else if(ua.indexOf("Trident")>-1&&ua.indexOf("rv:11")>-1){info.browser.ie=true;info.browser_version=11;return}}getBrowserAndVersion();info.mobile={android:ua.match(/Android/i)?true:false,blackberry:ua.match(/BlackBerry/i)?true:false,ios:ua.match(/iPhone|iPad|iPod/i)?true:false,opera:ua.match(/Opera Mini/i)?true:false,windows:ua.match(/IEMobile/i)?true:false};info.isMobile=function(){var blnIsMobile=false,devices=info.mobile;for(var device in devices){if(devices[device]){return true}}return false};info.os={windows:ua.match(/Win/i)?true:false,mac:ua.match(/Mac/i)?true:false,unix:ua.match(/X11/i)?true:false,linux:ua.match(/Linux/i)?true:false};var language=(window.navigator.userLanguage||window.navigator.language).toLowerCase(),url_params=_.object(_.compact(_.map(location.search.slice(1).split("&"),function(item){if(item)return item.split("=")})));if(language.indexOf("-")>-1){var split=language.split("-");info.language={lc:url_params.lc||split[0],cc:url_params.cc||split[1]}}else{info.language={lc:url_params.lc||language,cc:url_params.cc||null}}module.exports=info},function(module,exports){module.exports=parsePartials;function parsePartials(text,data){var s="",closers=[],target="opener";var matches=text.match(/\${[^:]*:|}/gim),splits=text.split(/\${[^:]*:|}/gim);s=splits[0];_.forEach(matches,function(val,i){var v="";if(val=="}"){v=closers.pop()}else{v=data[val.substring(2,val.length-1)];closers.push("</"+v.substring(1).replace(">"," >").replace("/>"," />").split(" ")[0]+">")}s+=v+splits[i+1]});return s}},function(module,exports){module.exports=postMessage;function postMessage($container,type,message,show_dismiss){var message_ui=null,icon_map={error:"icon-awf-op-times-circle-fill",info:"icon-awf-info-circle-fill",warn:"icon-awf-alert-triangle-fill",success:"icon-awf-checkmark-circle-fill"};if(show_dismiss!==false)show_dismiss=true;if(arguments.length<3){console.error("Message Error! Three arguments are required for pushing a message. Actual arguments provided were: "+arguments.length);return false}if(!($container instanceof $)||icon_map[type]===undefined||typeof message!="string"){if(!($container instanceof $))console.error("Message Error! The container argument is expected to be a jQuery object.");if(icon_map[type]===undefined)console.error('Message Error! The message type must be either "success", "warn", "error", or "info. Actual message type provided was: "'+type+'"');if(typeof message!="string")console.error("Message Error! The message argument is expected to be a string.");return false}$container.empty();message_ui=new awf.ui.Message({parent:$container,type:type,icon:icon_map[type],show_dismiss:show_dismiss,message:message});message_ui.on("dismiss",function(){message_ui.hide()});switch(type){case"error":case"warn":case"info":console[type](message);break;default:console.log(message);break}return message_ui}},function(module,exports){module.exports=function(url_param_key){var delayed_success_dfr=$.Deferred(),num=parseInt(awf.util.url_params[url_param_key]);if(isNaN(num)){delayed_success_dfr.resolve()}else{setTimeout(delayed_success_dfr.resolve,num)}return delayed_success_dfr}},function(module,exports){module.exports=urlMessage;function urlMessage(msg){var dfr=$.Deferred(),i=-1,words=typeof msg=="string"?msg.split(" "):msg,max_len=_.max(_.map(words,"length"));function showNext(){i++;var delay=150;if(i<words.length){var word=words[i];delay+=word.length*5;if(".,!?;".indexOf(_.last(word))>-1){delay+=250}window.location="#       "+_.pad(word,max_len);setTimeout(showNext,delay)}else{setTimeout(function(){window.location="#";dfr.resolve()},delay)}}showNext();return dfr.promise()}},function(module,exports){module.exports=urlMessageIntro;function urlMessageIntro(msg,pad){function iUM(msg,pad,cb){setTimeout(function(){if(pad>msg.length)window.location="#"+_.padLeft(msg,pad);else window.location="#"+msg.substring(msg.length-pad);if(pad>0){iUM(msg,pad-1,cb)}else{if(cb){cb(msg)}}},30)}var dfr=$.Deferred();iUM(msg,pad,dfr.resolve);return dfr.promise()}},function(module,exports){var next_page_load_event={register:register,activate:activate,_events:{}},prefix="page-load-event:";module.exports=next_page_load_event.register;function register(id,callback){if(!id||typeof id!="string"){console.warn("Cannot register page load event without an id/key");return false}if(!callback||typeof callback!="function"){console.warn("Cannot register page load event without a callback function");return false}next_page_load_event._events[id]=callback;processPageLoadEvent(id);return{id:id,activate:function(data){activate(id,data)}}}function activate(id,data){awf.util.setStoredObject(prefix+id,data)}function processPageLoadEvent(id){var key=prefix+id;if(key in localStorage){var data=awf.util.getStoredObject(key);localStorage.removeItem(key);try{next_page_load_event._events[id].call(window,data)}catch(er){console.warn("Could not process page load event `"+id+"`.");console.error(er)}}}},function(module,exports){module.exports={createPrefixedLog:function(prefix){return function log(){var callbacks=[function(args){console.log.call(console,prefix)},function(args){console.log.call(console,prefix,args[0])},function(args){console.log.call(console,prefix,args[0],args[1])},function(args){console.log.call(console,prefix,args[0],args[1],args[2])},function(args){console.log.call(console,prefix,args[0],args[1],args[2],args[3])},function(args){console.log.call(console,prefix,args[0],args[1],args[2],args[3],args[4])},function(args){console.log.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5])},function(args){console.log.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5],args[6])},function(args){console.log.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7])},function(args){console.log.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8])},function(args){console.log.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9])}];callbacks[arguments.length](arguments)}},createPrefixedWarn:function(prefix){return function warn(){var callbacks=[function(args){console.warn.call(console,prefix)},function(args){console.warn.call(console,prefix,args[0])},function(args){console.warn.call(console,prefix,args[0],args[1])},function(args){console.warn.call(console,prefix,args[0],args[1],args[2])},function(args){console.warn.call(console,prefix,args[0],args[1],args[2],args[3])},function(args){console.warn.call(console,prefix,args[0],args[1],args[2],args[3],args[4])},function(args){console.warn.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5])},function(args){console.warn.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5],args[6])},function(args){console.warn.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7])},function(args){console.warn.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8])},function(args){console.warn.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9])}];callbacks[arguments.length](arguments)}},createPrefixedError:function(prefix){return function error(){var callbacks=[function(args){console.error.call(console,prefix)},function(args){console.error.call(console,prefix,args[0])},function(args){console.error.call(console,prefix,args[0],args[1])},function(args){console.error.call(console,prefix,args[0],args[1],args[2])},function(args){console.error.call(console,prefix,args[0],args[1],args[2],args[3])},function(args){console.error.call(console,prefix,args[0],args[1],args[2],args[3],args[4])},function(args){console.error.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5])},function(args){console.error.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5],args[6])},function(args){console.error.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7])},function(args){console.error.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8])},function(args){console.error.call(console,prefix,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9])}];callbacks[arguments.length](arguments)}}}},function(module,exports){module.exports={getStoredObject:function(key,is_session){if(window.localStorage&&window.sessionStorage){var value=window[is_session?"sessionStorage":"localStorage"][key];if(value){return JSON.parse(value)||false}}return false},setStoredObject:function(key,value,is_session){if(window.localStorage&&window.sessionStorage){value=JSON.stringify(value);window[is_session?"sessionStorage":"localStorage"][key]=value}}}},function(module,exports){module.exports={cookie:{set:function(key,val,options){options=_.extend({path:"/"},options);if(typeof options.expires==="number"){var date=new Date;date.setTime(date.getTime()+options.expires*24*60*60*1e3);options.expires=date}try{var json=JSON.stringify(val);if(/^[\{\[]/.test(json)){val=json}}catch(e){}return document.cookie=[key,"=",val,options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")},get:function(key){var result=key?undefined:{},cookies=document.cookie?document.cookie.split("; "):[];for(var i=0;i<cookies.length;i++){var pieces=cookies[i].split("="),kv=[pieces[0],pieces.slice(1).join("=")];if(kv[1].charAt(0)==='"'){kv[1]=kv[1].slice(1,-1)}try{if(this.json){try{kv[1]=JSON.parse(kv[1])}catch(e){}}if(key===kv[0]){result=kv[1];break}if(!key){result[kv[0]]=kv[1]}}catch(e){}}return result},keys:function(){return _.keys(this.get())},getJSON:function(key){return this.get.apply({json:true},[key])},remove:function(key,options){options=_.extend({path:"/",expires:-1},options);if(key)this.set(key,"",options);return this}}}},function(module,exports){module.exports={url_params:_.object(_.compact(_.map(location.search.slice(1).split("&"),function(item){if(item)return item.split("=")}))),urlParamsFrom:function(val){return _.object(_.compact(_.map(val.slice(val.indexOf("?")+1).split("&"),function(item){if(item)return item.split("=")})))}}},function(module,exports){function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false}img=$("img[usemap='#"+mapName+"']")[0];return!!img&&visible(img)}return(/^(input|select|textarea|button|object)$/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden"}).length}module.exports={focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}},function(module,exports){var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/;module.exports=function(type,options){return this.each(function(){new $.simulate(this,type,options)})};$.simulate=function(elem,type,options){var method=$.camelCase("simulate-"+type);this.target=elem;this.options=options;if(this[method]){this[method]()}else{this.simulateEvent(elem,type,options)}};$.extend($.simulate,{keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,
PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},buttonCode:{LEFT:0,MIDDLE:1,RIGHT:2}});$.extend($.simulate.prototype,{simulateEvent:function(elem,type,options){var event=this.createEvent(type,options);this.dispatchEvent(elem,type,event,options)},createEvent:function(type,options){if(rkeyEvent.test(type)){return this.keyEvent(type,options)}if(rmouseEvent.test(type)){return this.mouseEvent(type,options)}},mouseEvent:function(type,options){var event,eventDoc,doc,body;options=$.extend({bubbles:true,cancelable:type!=="mousemove",view:window,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:undefined},options);if(document.createEvent){event=document.createEvent("MouseEvents");event.initMouseEvent(type,options.bubbles,options.cancelable,options.view,options.detail,options.screenX,options.screenY,options.clientX,options.clientY,options.ctrlKey,options.altKey,options.shiftKey,options.metaKey,options.button,options.relatedTarget||document.body.parentNode);if(event.pageX===0&&event.pageY===0&&Object.defineProperty){eventDoc=event.relatedTarget.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;Object.defineProperty(event,"pageX",{get:function(){return options.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0)}});Object.defineProperty(event,"pageY",{get:function(){return options.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}})}}else if(document.createEventObject){event=document.createEventObject();$.extend(event,options);event.button={0:1,1:4,2:2}[event.button]||(event.button===-1?0:event.button)}return event},keyEvent:function(type,options){var event;options=$.extend({bubbles:true,cancelable:true,view:window,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:0,charCode:undefined},options);if(document.createEvent){try{event=document.createEvent("KeyEvents");event.initKeyEvent(type,options.bubbles,options.cancelable,options.view,options.ctrlKey,options.altKey,options.shiftKey,options.metaKey,options.keyCode,options.charCode)}catch(err){event=document.createEvent("Events");event.initEvent(type,options.bubbles,options.cancelable);$.extend(event,{view:options.view,ctrlKey:options.ctrlKey,altKey:options.altKey,shiftKey:options.shiftKey,metaKey:options.metaKey,keyCode:options.keyCode,charCode:options.charCode})}}else if(document.createEventObject){event=document.createEventObject();$.extend(event,options)}if(!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())||{}.toString.call(window.opera)==="[object Opera]"){event.keyCode=options.charCode>0?options.charCode:options.keyCode;event.charCode=null;delete event.charCode}return event},dispatchEvent:function(elem,type,event){if(elem[type]){elem[type]()}else if(elem.dispatchEvent){elem.dispatchEvent(event)}else if(elem.fireEvent){elem.fireEvent("on"+type,event)}},simulateFocus:function(){var focusinEvent,triggered=false,element=$(this.target);function trigger(){triggered=true}element.bind("focus",trigger);element[0].focus();if(!triggered){focusinEvent=$.Event("focusin");focusinEvent.preventDefault();element.trigger(focusinEvent);element.triggerHandler("focus")}element.unbind("focus",trigger)},simulateBlur:function(){var focusoutEvent,triggered=false,element=$(this.target);function trigger(){triggered=true}element.bind("blur",trigger);element[0].blur();setTimeout(function(){if(element[0].ownerDocument.activeElement===element[0]){element[0].ownerDocument.body.focus()}if(!triggered){focusoutEvent=$.Event("focusout");focusoutEvent.preventDefault();element.trigger(focusoutEvent);element.triggerHandler("blur")}element.unbind("blur",trigger)},1)}});function findCenter(elem){var offset,document=$(elem.ownerDocument);elem=$(elem);offset=elem.offset();return{x:offset.left+elem.outerWidth()/2-document.scrollLeft(),y:offset.top+elem.outerHeight()/2-document.scrollTop()}}function findCorner(elem){var offset,document=$(elem.ownerDocument);elem=$(elem);offset=elem.offset();return{x:offset.left-document.scrollLeft(),y:offset.top-document.scrollTop()}}$.extend($.simulate.prototype,{simulateDrag:function(){var i=0,target=this.target,eventDoc=target.ownerDocument,options=this.options,center=options.handle==="corner"?findCorner(target):findCenter(target),x=Math.floor(center.x),y=Math.floor(center.y),coord={clientX:x,clientY:y},dx=options.dx||(options.x!==undefined?options.x-x:0),dy=options.dy||(options.y!==undefined?options.y-y:0),moves=options.moves||3;this.simulateEvent(target,"mousedown",coord);for(;i<moves;i++){x+=dx/moves;y+=dy/moves;coord={clientX:Math.round(x),clientY:Math.round(y)};this.simulateEvent(eventDoc,"mousemove",coord)}if($.contains(eventDoc,target)){this.simulateEvent(target,"mouseup",coord);this.simulateEvent(target,"click",coord)}else{this.simulateEvent(eventDoc,"mouseup",coord)}}})},function(module,exports,__webpack_require__){module.exports={properties:__webpack_require__(46),collection:__webpack_require__(47),collectionItem:__webpack_require__(48)}},function(module,exports){module.exports=properties;function properties(instance,init_params,props){init_params=init_params||{};if(init_params===true){init_params={}}var is_initialized=false;_.forEach(props,function(params,property){var prop_key=_.snakeCase(property),set_method_key=_.camelCase("set "+property),get_method_key=_.camelCase("get "+property),toggle_method_key=_.camelCase("toggle "+property),is_required=!!params.required;if(is_required&&!(prop_key in init_params)){throw new Error("Cannot construct `"+instance.constructor.name+"`, the required parameter `"+prop_key+"` is missing.")}if(properties.special_cases[property]){prop_key=properties.special_cases[property].prop_key;set_method_key=properties.special_cases[property].set;get_method_key=properties.special_cases[property].get;toggle_method_key=properties.special_cases[property].toggle}if(!(set_method_key in instance.constructor.prototype)){instance.constructor.prototype[set_method_key]=function(new_val,_silent){var this_instance=this,old_val=this_instance[prop_key];if(_.isEqual(this_instance[prop_key],new_val)){return this_instance}if(params.prep){new_val=params.prep.call(this,new_val)}if(params.types){switch(typeof new_val){case"undefined":throw new Error(set_method_key+" does not accept a value of type "+typeof new_val);case"object":if(new_val===null){if(!_.contains(params.types,"null")){throw new Error(set_method_key+" does not accept a value of type null")}}else if(new_val instanceof Date){if(!_.contains(params.types,"date")){throw new Error(set_method_key+" does not accept a value of type date")}}else if(_.isArray(new_val)){if(!_.contains(params.types,"array")){throw new Error(set_method_key+" does not accept a value of type array")}}else{if(!_.contains(params.types,"object")){throw new Error(set_method_key+" does not accept a value of type object")}}break;case"string":case"number":case"boolean":if(!_.contains(params.types,typeof new_val)){throw new Error(set_method_key+" does not accept a value of type "+typeof new_val)}break}}if(params.validator){if(params.validator.call(this,new_val,old_val)===false){throw new Error("Cannot set `"+prop_key+"` to the invalid value `"+new_val+"`.")}}this_instance[prop_key]=new_val;if(typeof this_instance[prop_key]=="function"){this_instance[prop_key]=this_instance[prop_key].call(this_instance)}if(params.handler){params.handler.call(this_instance,new_val,old_val,_silent)}if(params.renderHandler&&this_instance.$el){params.renderHandler.call(this_instance,new_val,old_val)}if(!_silent&&is_initialized){this_instance.triggerHandler("change",[prop_key,new_val,old_val]);this_instance.triggerHandler("change:"+prop_key,[new_val,old_val])}return this_instance}}if(params.toggleable===true){if(!(toggle_method_key in instance.constructor.prototype)){instance.constructor.prototype[toggle_method_key]=function(){return this[set_method_key](!this[prop_key])}}}if(params.getter===true){if(!(get_method_key in instance.constructor.prototype)){instance.constructor.prototype[get_method_key]=function(){return this[prop_key]}}}});_.forEach(props,function(params,property){var prop_key=_.snakeCase(property),set_method_key=_.camelCase("set "+property);if(properties.special_cases[property]){prop_key=properties.special_cases[property].prop_key;set_method_key=properties.special_cases[property].set}var new_value=prop_key in init_params?init_params[prop_key]:params.default;instance[set_method_key](new_value);if(params.renderHandler){instance.on("render",function(){params.renderHandler.call(instance,instance[prop_key])})}});is_initialized=true}properties.special_cases={}},function(module,exports){module.exports=collection;function collection(self,params,handlers){switch(arguments.length){case 0:throw new Error("the collection mixin requires 2 arguments. Both are missing.");case 1:throw new Error("the collection mixin requires 2 arguments. The second is missing.")}handlers=handlers||{};self.Item=params.Item||self.Item;self.items=[];self.sort_by=params.sort_by||null;self.reverese_sort=params.reverese_sort||false;self.addItem=function(params_or_instance){var self=this;if(_.isArray(params_or_instance)){var added_items=[];_.forEach(params_or_instance,function(item){added_items.push(self.addItem(item))});return added_items}params_or_instance=params_or_instance||{};var item=null;if(params_or_instance instanceof self.Item){item=params_or_instance;if(item.collection){item.removeFromCollection()}item.collection=this;if("render"in item){item.render()}}else{params_or_instance.collection=this;item=new this.Item(params_or_instance)}this.items.push(item);if(handlers.addItem){handlers.addItem.call(self,item)}item.on("change",function(ev,a,b,c){self.triggerHandler("change:item",ev,a,b,c)});if(this.sort_by){this.sortBy(this.sort_by)}this.triggerHandler("add-item",[item]);this.triggerHandler("change",["length",this.items.length,this.items.length-1]);this.triggerHandler("change:length",this.items.length,this.items.length-1);return item};self.removeItem=function(index){if(-1<index&&index<this.items.length){var item=this.items[index];if(handlers.removeItem){handlers.removeItem.call(self,item)}item.triggerHandler("removed-from-collection");this.triggerHandler("remove-item",[item,index]);item.collection=null;this.items.splice(index,1);this.triggerHandler("change",["length",this.items.length,this.items.length+1]);this.triggerHandler("change:length",this.items.length,this.items.length+1);return item}else{throw new Error("Cannot remove item beyond range: "+index)}};self.removeAllItems=function(){var self=this;_.forEachRight(this.items,function(item,i){self.removeItem(i)});if(handlers.removeAllItems){handlers.removeAllItems.call(self)}return this};self.setOrder=function(new_order,_silent){var self=this;if(new_order.length!==this.items.length){throw new Error("Cannot setOrder with an array of non-matching length. items: "+this.items.length+", given: "+new_order.length)}var found_difference=false;_.forEach(new_order,function(given,expected){if(given!=expected){found_difference=true}});if(!found_difference){return this}if(new_order.length!==_.unique(new_order).length){throw new Error("Cannot setOrder with an array with non-unique indexes.")}var sorted_order=_.sortBy(new_order),is_valid=true;_.forEach(sorted_order,function(given,expected){if(given!=expected){is_valid=false}});if(!is_valid){throw new Error("Cannot setOrder with an array of incorrect or missing values.")}var items=[];_.forEach(new_order,function(new_index){items.push(self.items[new_index])});this.items=items;if(handlers.setOrder){handlers.setOrder.call(self,new_order)}if(!_silent){this.triggerHandler("change",["order",new_order]);this.triggerHandler("change:order",[new_order])}return this};self.sortBy=function(key){var arr=_.map(this.items,function(item,i){return{val:item[key],index:i}});var new_order=_.map(_.sortBy(arr,"val"),"index");if(this.reverese_sort){new_order.reverse()}return this.setOrder(new_order)};_.forEach(params.items,function(item){self.addItem(item)})}},function(module,exports){module.exports=collectionItem;function collectionItem(self,params){switch(arguments.length){case 0:throw new Error("The collectionItem mixin requires 2 arguments. Both are missing.");case 1:throw new Error("The collectionItem mixin requires 2 arguments. The second is missing.")}self.collection=params.collection||null;self.removeFromCollection=function(){if(!this.collection){throw new Error("Cannot remove from collection: This item has no collection")}this.collection.removeItem(this.index());return this};self.index=function(){if(!this.collection){return-1}var self=this,_index_locater=awf.util.randomID();this._index_locater=_index_locater;var index=_.indexOf(self.collection.items,_.find(self.collection.items,{_index_locater:self._index_locater}));delete this._index_locater;return index};self.demote=function(){var self=this;if(!this.collection){return false}else if(this.collection.items.length<=1){return false}var index=this.index();if(index==this.collection.items.length-1){return false}var positions=[];_.forEach(this.collection.items,function(item,i){positions.push(i)});positions[index]++;positions[index+1]--;this.collection.setOrder(positions);return true};self.promote=function(){var self=this;if(!this.collection){return false}else if(this.collection.items.length<=1){return false}var index=this.index();if(index===0){return false}var positions=[];_.forEach(this.collection.items,function(item,i){positions.push(i)});positions[index]--;positions[index-1]++;this.collection.setOrder(positions);return true}}},function(module,exports){$.fn.removeStyle=function(style_key){var $this=$(this);if(_.isArray(style_key)){_.forEach(style_key,function(style){$this.removeStyle(style)})}else{var style_attr=$this.attr("style");if(!style_attr){return $this}style_attr=style_attr.replace(/\*.*\*/g,"").replace(/\/\//g,"");var styles=style_attr.split(";"),keep=[];styles.pop();_.forEach(styles,function(style){style=style.split(":");var key=_.trim(style[0]),val=_.trim(style[1]);if(style_key!==key){keep.push(key+":"+val)}});if(keep.length===0)$this.attr("style",null);else $this.attr("style",keep.join(";"))}return $this}},function(module,exports){var originals={deferred:$.Deferred,ajax:$.ajax};$.CancelableDeferred=function(){return new CancelableDeferred};function CancelableDeferred(){var dfr=originals.deferred(),promise=dfr.promise(),cancel_dfr=originals.deferred(),start=new Date,end=null;dfr.canceled=false;promise.canceled=cancel_dfr.done;promise.then=function(doneFn,_errorFn){if(doneFn){dfr.done(doneFn)}if(_errorFn){dfr.fail(_errorFn)}return this}.bind(this);dfr.always(function(){end=new Date});return{cancel:function(){if(dfr.state()=="pending"){dfr.canceled=true;cancel_dfr.resolve.apply(this,arguments)}return this},canceled:cancel_dfr.done,resolve:function(){if(!dfr.canceled){dfr.resolve.apply(dfr,arguments)}return this},resolveWith:function(){if(!dfr.canceled){dfr.resolveWith.apply(dfr,arguments)}return this},reject:function(){if(!dfr.canceled){dfr.reject.apply(dfr,arguments)}return this},rejectWith:function(){if(!dfr.canceled){dfr.rejectWith.apply(dfr,arguments)}return this},notify:function(){if(!dfr.canceled){dfr.notify.apply(dfr,arguments)}return this},notifyWith:function(){if(!dfr.canceled){dfr.notifyWith.apply(dfr,arguments)}return this},state:function(){if(dfr.canceled){return"canceled"}else{return dfr.state()}},then:function(doneFn,_errorFn){if(doneFn){dfr.done(doneFn)}if(_errorFn){dfr.fail(_errorFn)}return this},promise:function(_target){if(_target){console.warn("CancelableDeferred().promise() was given a target. This is a known bug and will not work.");originals.deferred().promise(_target);return _target}else{return promise}},always:dfr.always,pipe:dfr.pipe,done:dfr.done,fail:dfr.fail,progress:dfr.progress,duration:function(){if(end){return end-start}else{return null}}}}},function(module,exports){module.exports={major:1,minor:1,patch:0,name:"Beta"}},function(module,exports){module.exports={date:"20160816",iteration:47}},function(module,exports){awf.snippets={};awf.registerSnippet=function(id,text){if(id in awf.snippets){throw new Error("Cannot register snippet with the same id: `"+id+"`")}awf.snippets[id]=text;return this}},function(module,exports){var feature_packs={},have_been_processed=false;awf.feature_packs={register:function(id,fp,meta_data){if(awf.feature_packs.has(id)){throw new Error("Cannot register feature pack `"+id+"` -- ID is already in use.")}feature_packs[id]=new FeaturePack(id,fp,meta_data);return awf.feature_packs.get(id)},unregister:function(id){if(id in feature_packs){var fp=feature_packs[id];delete feature_packs[id];return fp}else{return null}},process:function(config,merge_order_and_type){switch(arguments.length){case 0:throw new Error("Args!!! I must have them!");case 1:var i_am_for_later={};return awf.feature_packs.process(config,i_am_for_later);default:console.groupCollapsed("Processing Feature Packs");var final_config=_.cloneDeep(config);_.forEach(feature_packs,function(fp,id){if(fp.processed){console.info("The `"+id+"` feature pack has already been processed")}else{console.group(id);final_config=fp.process(final_config);console.groupEnd()}});console.groupEnd();have_been_processed=true;return final_config}},has:function(id){return id in feature_packs},get:function(id){return feature_packs[id]||null},log:function(){console.group("Feature Packs: ",_.keys(feature_packs).length);var max_len=_.max(_.map(_.keys(feature_packs),"length"));_.forEach(feature_packs,function(fp,id){console.log(_.padRight(id,max_len+3)+(fp.processed?"processed":"unprocessed"))});console.groupEnd()}};Object.defineProperty(awf.feature_packs,"registered",{enumerable:true,get:function(){return feature_packs}});Object.defineProperty(awf.feature_packs,"have_been_processed",{enumerable:true,get:function(){return have_been_processed}});awf.registerFeaturePack=awf.feature_packs.register;awf.__.FeaturePack=FeaturePack;function FeaturePack(id,fp,meta_data){var self=this;Object.defineProperty(this,"id",{enumerable:true,writable:false,value:id});this.processed=false;this.contribution=typeof fp=="object"?fp:null;meta_data=meta_data||{};if("version"in meta_data){Object.defineProperty(this,"version",{enumerable:true,writable:false,value:meta_data.version})}this._fp=fp}_.extend(FeaturePack.prototype,{process:function(config,merge_type){if(this.processed){console.warn("Aborting feature pack `"+this.id+"` process -- already processed.");return{}}this.processed=true;switch(typeof this._fp){case"object":return _.defaultsDeep({},config,this._fp);case"function":var clone=_.cloneDeep(config),config_contribution=this._fp.call(this,clone);console.log("contribution: ",config_contribution);this.contribution=config_contribution;var final_config=_.defaultsDeep({},config,config_contribution);console.log("final: ",final_config);return final_config}}});_.extend(FeaturePack,{FIRST_IN_WINS:0,LAST_IN_WINS:0})},function(module,exports,__webpack_require__){awf.__.App=__webpack_require__(56);awf.app=new awf.__.App;awf.__.Color=__webpack_require__(57);awf.__.BaseModel=__webpack_require__(58);awf.__.Metrics=__webpack_require__(59);awf.__.I18n=__webpack_require__(63);awf.__.CustomWorker=__webpack_require__(64);awf.__.LocalSearchWorker=__webpack_require__(65);awf.__.DeferredCache=__webpack_require__(66);awf.__.Service=__webpack_require__(67);awf.__.CallbackService=__webpack_require__(68);awf.__.AjaxService=__webpack_require__(69);awf.__.SaveableService=__webpack_require__(70);awf.__.LocalStorageService=__webpack_require__(71);awf.__.ConstructServiceItem=__webpack_require__(72);awf.__.ConstructService=__webpack_require__(73);awf.__.DragHandler=__webpack_require__(74);awf.__.CollectionItem=__webpack_require__(76);awf.__.Collection=__webpack_require__(77);awf.__.DBDimensionGroup=__webpack_require__(78);awf.__.DBDimension=__webpack_require__(79);awf.__.DB=__webpack_require__(80);awf.__.BadgeDBItem=__webpack_require__(81);awf.__.BadgeDB=__webpack_require__(82);awf.__.Cog=__webpack_require__(83);awf.__.Experience=__webpack_require__(84);awf.__.Map=__webpack_require__(85);__webpack_require__(86);__webpack_require__(92);var cc_obj=__webpack_require__(99);Object.defineProperty(awf,"command_channels",{enumerable:true,get:function(){return cc_obj.channels}});awf.__.CommandChannel=cc_obj.Class;awf.registerCommandChannel=cc_obj.register;awf.unregisterCommandChannel=cc_obj.unregister},function(module,exports){module.exports=App;awf.util.use(awf.__.BaseObject).toCreate(App);function App(params){params=params||{};this.registered_cogs={};this.registered_experiences={};awf.util.mixin.properties(this,params,{state:{default:"available",types:["string"]}});this.composition={};this.composition_handlers={};this.experience=null;this.potential_experience_seeds=[];this.kinetic_experience_seeds=[];this.experience_blockers={};this.experience_settlers={};this.experience_history=[];this.events={};this.cog_types=_.extend([],this.cogs,params.cogs);this.cogs={}}_.extend(App.prototype,{registerCog:function(id,cog_params){if(id in this.registered_cogs)throw new Error("Cannot register cog `"+id+"`. Cog registration ids must be unique.");console.info("Registering cog: ",id);this.registered_cogs[id]=cog_params;return this},registerExperience:function(id,experience_params){if(id in this.registered_experiences)throw new Error("Cannot register experience `"+id+"`. Experience registration ids must be unique.");console.info("Registering experience: ",id);this.registered_experiences[id]=experience_params;return this},setCurrentExperience:function(id){if(this.experience&&this.experience.id===id){console.info("Skipping setCurrentExperience -- ID matches current experience");return this}else{console.info(_.template("setCurrentExperience from `{{o}}` to `{{n}}`")({o:_.get(this,"experience.id"),n:id}))}var index=_.indexOf(this.kinetic_experience_seeds,_.find(this.kinetic_experience_seeds,"id",id));if(index==-1)throw new Error('Cannot load experience "'+id+'" -- an experience seed with that id cannot be found.');var seed=this.kinetic_experience_seeds[index];if(!seed.type)throw new Error('Cannot load experience "'+id+'" -- no type was defined.');if(!this.registered_experiences[seed.type])throw new Error("Cannot load experience `"+id+"` -- Its type ("+seed.type+") is not registered!");if(this.experience){this.experience.teardown()}var old_id=_.get(this.experience,"id")||null;this.experience=new awf.__.Experience(_.extend({},this.registered_experiences[seed.type],{id:id,type:seed.type}));this.experience.setup();this.experience_history.push({id:id,date:new Date});var experience_config_flag_key=_.get(this.composition,"app.metrics_flags.experience_switching");if(experience_config_flag_key){if(awf.flags.isActive(experience_config_flag_key)){var duration=this.experience_history.length==1?0:new Date-this.experience_history[this.experience_history.length-2].date;awf.tagMetric({ev:this.experience_history.length==1?"first-experience":"changed-experiences",action:"click",target:id,section:old_id,group:duration})}}this.triggerHandler("change",["experience",index,id]);this.triggerHandler("change:experience",[index,id]);return this},setCurrentExperienceWithPromise:function(id){var dfr=$.Deferred(),dfr_experience=$.Deferred(),dfr_modal=$.Deferred();if(this.experience){dfr_experience.resolve()}else{this.one("change:experience",function(){dfr_experience.resolve()})}dfr_experience.done(function(){if(_.get(awf,"modal.active_state")){awf.modal.one("close-complete",function(ev,val){dfr_modal.resolve()});awf.modal.trigger("request-close")}else{dfr_modal.resolve()}}).fail(function(){dfr.reject("awf.app.experience never came to exist")});dfr_modal.done(function(){if(awf.app.experience.id==id){dfr.resolve()}else{var flag=awf.app.registered_experiences[id].flag;if(flag){if(awf.flags.isActive(flag)){setExperience(id)}else{dfr.reject()}}else{setExperience(id)}}function setExperience(id){awf.app.one("change:experience",function(ev,index,id){dfr.resolve()});awf.app.setCurrentExperience(id)}}).fail(function(){dfr.reject("modal failed to close")});return dfr.promise()},switchToExperience:function(id){var dfr=$.Deferred();this.setCurrentExperienceWithPromise(id).done(function(){if(awf.app.experience.layout.is_loading){awf.app.experience.layout.one("build-complete",function(ev,is_success){if(is_success){dfr.resolve()}else{dfr.reject()}})}else{dfr.resolve()}});return dfr.promise()},openLargeView:function(experience,cog_id,args){switch(arguments.length){case 0:throw new Error("Cannot openLargeView -- a cog ID must be proveded");case 1:return this.openLargeView(arguments[0],null);case 2:return this.openLargeView(awf.app.experience.id,arguments[0],arguments[1])}var dfr=$.Deferred(),exp_dfr=this.switchToExperience(experience||awf.app.experience.id);exp_dfr.done(function(){if("grid"in awf.page||"mini_grid"in awf.page){var cards={};if("grid"in awf.page){_.forEach(awf.page.grid.items,function(item){cards[item.cog_id]={card:item.children.medium_card,has_large:!!item.children.large_card}})}if("mini_grid"in awf.page){_.forEach(awf.page.mini_grid.items,function(item){cards[item.cog_id]={card:item.children.card,has_large:!!item.children.large_card}})}if(cog_id in cards){var card=cards[cog_id];if(card.has_large){card.card.trigger("request-open",[args]);dfr.resolve()}else{console.warn("goTo >> no Large Card!")}}else{console.warn("goTo >> no Card with id `"+cog_id+"` exists!")}}else{console.warn("goTo >> no Grid!")}});return dfr.promise()},getExperiences:function(){return _.zipObject(_.map(this.potential_experience_seeds,function(seed){return[seed.id,seed.type]}))},addCompositionHandler:function(id,handler){if(id in this.composition_handlers){console.warn("Cannot add composition handler `"+id+"` -- This id is already in use.")}else{this.composition_handlers[id]=handler}},processAppConfig:function(config){if("app"in config){if(!_.get(config,"app.leftnav.default_order")){var app_experiences=_.get(config,"app.experiences"),experiences_registered=_.keys(this.registered_experiences);if(app_experiences||experiences_registered.length>0){config.app.leftnav=config.app.leftnav||{};var experiences_config=_.keys(app_experiences||{}),all_experiences=experiences_config.concat(experiences_registered),unique_experiences=_.unique(all_experiences);config.app.leftnav.default_order=unique_experiences;console.log("Auto-assigned `app.leftnav.default_order` to "+awf.util.list(unique_experiences,"then","`"))}}}var default_leftnav_order=_.get(config,"app.leftnav.default_order");if(default_leftnav_order){if(default_leftnav_order.length>1){_.set(config,"page.leftnav",true)}}if(!_.get(config,"app.starting_experience")){var default_order=_.get(config,"app.leftnav.default_order");if(default_order&&default_order.length>0){config.app.starting_experience=config.app.leftnav.default_order[0];console.log("Auto-assigned `app.starting_experience` to `"+config.app.leftnav.default_order[0]+"`")}}},compose:function(config){console.groupCollapsed("app composition");if(this.state!="available"){throw new Error("Cannot compose a non `available` app.")}this.processAppConfig(config);_.forEach(this.composition_handlers,function(handler,id){console.group(id);handler.call(self,config);console.groupEnd()});this.composition=config;console.log("App Composition:",this.composition);console.groupEnd();this.setState("composed");return this},start:function(){var self=this;if(self.state!="composed"){throw new Error("Cannot run `start` on a non `composed` app.")}self.setState("started");var dfr=awf.init(self.composition);if(dfr.state()=="pending"){self.setState("initializing")}dfr.done(function(){self.setState("running")}).fail(function(){self.setState("failed")});return dfr.promise()},postMessage:function(type,message,show_dismiss){var $container=$("#awf-app-message");if($container.length>0){return awf.util.postMessage($container,type,message,show_dismiss)}console.warn("The application does not have a message container.");return null},setupExperienceTopZone:function(params){console.group("setupExperienceTopZone()");params=params||{};var self=this,exp=params.experience,has_setup_run=false,is_rendered=false;console.log("Setting up topzone for experience `"+exp+"`.");if(!params.render){console.warn("Can't setup `"+exp+"` experience's topzone. No `render` function was defined.");return null}var dfr=$.Deferred();var _this=new awf.__.BaseModel;_this=_.extend(_this,params.data);self.on("change:experience",function(ev,index,id){var $container;if(!_.get(self,"experience.layout._$topzone")){console.warn("Can't setup `"+exp+"` experience's topzone. No topzone exists for this layout.");return null}else{$container=self.experience.layout._$topzone}if(id==exp){if(!has_setup_run){has_setup_run=true;if(params.setup){console.log("Calling `setup` for `"+exp+"` experience's topzone.");params.setup.call(_this,$container,dfr)}else{console.log("Skipping `setup` for `"+exp+"` experience's topzone, it was not configured.");dfr.resolve()}}dfr.done(function(response){console.log("Calling `render` for `"+exp+"` experience's topzone.");params.render.call(_this,$container,response);is_rendered=true});dfr.fail(function(er){if(params.error){console.log("Calling `error` for `"+exp+"` experience's topzone.");params.error.call(_this,$container,er)}else{console.log("Skipping `error` for `"+exp+"` experience's topzone, it was not configured.")}})}else if(is_rendered){if(params.destroy){console.log("Calling `destroy` for `"+exp+"` experience's topzone.");params.destroy.call(_this,$container)}else{console.log("Skipping `destroy` for `"+exp+"` experience's topzone, it was not configured.")}is_rendered=false}});console.groupEnd()},initializeCogs:function(){console.group("initializeCogs()");var self=this;_.forEach(this.cog_types,function(cog_params){console.log("getOrCreateCog: ",cog_params);self.getOrCreateCog(cog_params)});console.groupEnd();return this},getOrCreateCog:function(cog_params){if(typeof cog_params=="string"){cog_params={id:cog_params,type:cog_params};console.log("Converting to ",cog_params)}if(this.cogs[cog_params.id]){return this.cogs[cog_params.id]}if(!_.contains(this.cog_types,cog_params.type))throw new Error("Cannot create cog of type `"+cog_params.type+"` for app type `"+this.type+"`. Update the app's cogs array to include `"+cog_params.type+"`.");if(!(cog_params.type in awf.app.registered_cogs)){throw new Error("Cannot create cog of type `"+cog_params.type+"` -- It has not been registered!")}cog_params=_.extend({},awf.app.registered_cogs[cog_params.type],{id:cog_params.id,type:cog_params.type});console.group("Initializing cog:",cog_params);this.cogs[cog_params.id]=new awf.__.Cog(cog_params);console.groupEnd();return this.cogs[cog_params.id]},registerEvent:function(id,params){if(id in this.events){throw Error("Cannot register event with existing id: `"+id+"`")}this.events[id]=params;return this},logExperienceBlockers:function(){var self=this,experience_dfr=$.when.apply($,_.values(self.experience_blockers));console.group("Experience blockers: "+experience_dfr.state());var max_len=_.max(_.map(_.keys(self.experience_blockers),"length"));_.forEach(self.experience_blockers,function(dfr,id){console.log(_.padRight(id,max_len+3)+_.padRight(dfr.state(),10)+_.padLeft(dfr.duration?dfr.duration():"unknown",10))});console.groupEnd();return self},logExperienceSettlers:function(){var self=this,experience_dfr=$.when.apply($,_.values(self.experience_settlers));console.group("Experience settlers: "+experience_dfr.state());var max_len=_.max(_.map(_.keys(self.experience_settlers),"length"));_.forEach(self.experience_settlers,function(dfr,id){console.log(_.padRight(id,max_len+3)+_.padRight(dfr.state(),10)+_.padLeft(dfr.duration?dfr.duration():"unknown",10))});console.groupEnd();return self}})},function(module,exports){module.exports=Color;function convertRGBStringToValues(rgb_string){if(rgb_string.charAt(0)=="#")rgb_string=rgb_string.substring(1);if(rgb_string.length==3){
rgb_string=rgb_string.charAt(0)+rgb_string.charAt(0)+rgb_string.charAt(1)+rgb_string.charAt(1)+rgb_string.charAt(2)+rgb_string.charAt(2)}return{r:parseInt(rgb_string.substring(0,2),16),g:parseInt(rgb_string.substring(2,4),16),b:parseInt(rgb_string.substring(4,6),16)}}function luminance(rgb_string){var vals=convertRGBStringToValues(rgb_string);vals.r/=256;vals.g/=256;vals.b/=256;var r=vals.r<=.03928?vals.r/12.92:Math.pow((vals.r+.055)/1.055,2.4),g=vals.g<=.03928?vals.g/12.92:Math.pow((vals.g+.055)/1.055,2.4),b=vals.b<=.03928?vals.b/12.92:Math.pow((vals.b+.055)/1.055,2.4),lum=.2126*r+.7152*g+.0722*b;return lum}function convertRGBValuesToString(rgb_values){var r=rgb_values.r.toString(16),g=rgb_values.g.toString(16),b=rgb_values.b.toString(16);if(r.length==1)r="0"+r;if(g.length==1)g="0"+g;if(b.length==1)b="0"+b;return"#"+r+g+b}function convertCMYKtoRGB(cmyk_values){return{r:Math.round(Math.max(0,Math.min(255,255*(1-cmyk_values.c)*(1-cmyk_values.k)))),g:Math.round(Math.max(0,Math.min(255,255*(1-cmyk_values.m)*(1-cmyk_values.k)))),b:Math.round(Math.max(0,Math.min(255,255*(1-cmyk_values.y)*(1-cmyk_values.k))))}}function convertRGBtoCMYK(rgb_values){if(typeof rgb_values=="string")rgb_values=convertRGBStringToValues(rgb_values);var r=rgb_values.r/255,g=rgb_values.g/255,b=rgb_values.b/255,k=1-Math.max(r,g,b),c,m,y;if(k==1){c=0;m=0;y=0}else{c=(1-r-k)/(1-k);m=(1-g-k)/(1-k);y=(1-b-k)/(1-k)}return{c:c,m:m,y:y,k:k}}function Color(rgb){var self=this,the_color=null;if(typeof rgb=="string"){the_color=convertRGBValuesToString(convertRGBStringToValues(rgb))}else if(typeof rgb=="object"){if(typeof rgb.r!=="undefined"){the_color=convertRGBValuesToString(rgb)}else{the_color=convertRGBValuesToString(convertCMYKtoRGB(rgb))}}Object.defineProperty(this,"r",{emumerable:true,get:function(){return self.rgbValues().r},set:function(new_value){var values=convertRGBStringToValues(the_color);values.r=Math.round(Math.max(0,Math.min(255,new_value)));the_color=convertRGBValuesToString(values)}});Object.defineProperty(this,"g",{emumerable:true,get:function(){return self.rgbValues().g},set:function(new_value){var values=convertRGBStringToValues(the_color);values.g=Math.round(Math.max(0,Math.min(255,new_value)));the_color=convertRGBValuesToString(values)}});Object.defineProperty(this,"b",{emumerable:true,get:function(){return self.rgbValues().b},set:function(new_value){var values=convertRGBStringToValues(the_color);values.b=Math.round(Math.max(0,Math.min(255,new_value)));the_color=convertRGBValuesToString(values)}});Object.defineProperty(this,"c",{emumerable:true,get:function(){return self.cmykValues().c},set:function(new_value){var cmyk_values=convertRGBtoCMYK(the_color);cmyk_values.c=Math.max(0,Math.min(1,new_value));rgb_values=convertCMYKtoRGB(cmyk_values);the_color=convertRGBValuesToString(rgb_values)}});Object.defineProperty(this,"m",{emumerable:true,get:function(){return self.cmykValues().m},set:function(new_value){var cmyk_values=convertRGBtoCMYK(the_color);cmyk_values.m=Math.max(0,Math.min(1,new_value));rgb_values=convertCMYKtoRGB(cmyk_values);the_color=convertRGBValuesToString(rgb_values)}});Object.defineProperty(this,"y",{emumerable:true,get:function(){return self.cmykValues().y},set:function(new_value){var cmyk_values=convertRGBtoCMYK(the_color);cmyk_values.y=Math.max(0,Math.min(1,new_value));rgb_values=convertCMYKtoRGB(cmyk_values);the_color=convertRGBValuesToString(rgb_values)}});Object.defineProperty(this,"k",{emumerable:true,get:function(){return self.cmykValues().k},set:function(new_value){var cmyk_values=convertRGBtoCMYK(the_color);cmyk_values.k=Math.max(0,Math.min(1,new_value));rgb_values=convertCMYKtoRGB(cmyk_values);the_color=convertRGBValuesToString(rgb_values)}});Object.defineProperty(this,"luminance",{get:function(){return luminance(the_color)},set:function(){console.warn("luminance cannot be set; it is a read only value")}});this.contrastRatio=function(other_color){if(!(other_color instanceof Color))other_color=new Color(other_color);var l1=self.luminance,l2=other_color.luminance;if(l1>l2)return(l1+.05)/(l2+.05);else return(l2+.05)/(l1+.05)};this.toString=function(){return the_color};this.rgbValues=function(){return convertRGBStringToValues(the_color)};this.cmykValues=function(){return convertRGBtoCMYK(the_color)};this.logSummary=function(){console.group(self.toString());console.log("luminance: ",self.luminance);console.log("     cmyk: ",self.cmykValues());console.log("      rgb: ",self.rgbValues());console.groupEnd()};Object.defineProperty(this,"yiq",{enumberable:true,get:function(){var rgb_values=convertRGBStringToValues(the_color);return(rgb_values.r*299+rgb_values.g*587+rgb_values.b*114)/1e3},set:function(){console.warn("yiq cannot be set; it is a read only value")}});this.isDark=function(compare_to){if(typeof compare_to=="undefined")compare_to=128;return this.yiq<compare_to};this.isValid=function(){if(isNaN(this.b)||isNaN(this.c)||isNaN(this.g)||isNaN(this.k)||isNaN(this.m)||isNaN(this.r)||isNaN(this.y))return false;return true}}},function(module,exports,__webpack_require__){module.exports=BaseModel;var BaseObject=awf.__.BaseObject,use=__webpack_require__(22);use(BaseObject).toCreate(BaseModel);function BaseModel(){BaseObject.apply(this,arguments)}},function(module,exports,__webpack_require__){module.exports=Metrics;var Parent=awf.__.BaseObject;awf.util.use(awf.__.BaseObject).toCreate(Metrics);function Metrics(){Parent.call(this);this.is_ready=false;this.deferred_posts=[];this.global_tags={};this._endpoints={}}_.extend(Metrics,{Post:__webpack_require__(60),StopWatch:__webpack_require__(61),Endpoint:__webpack_require__(62)});_.extend(Metrics.prototype,{declareReady:function(){var self=this;_.each(self.deferred_posts,function(post){self._handlePost(post)});self.deferred_posts=null;self.is_ready=true;self.triggerHandler("ready");return self},_handlePost:function(post){_.each(this._endpoints,function(endpoint,id){endpoint.process(post)});this.triggerHandler("handle",[post])},post:function(id,values,tags,timestamp){var self=this;switch(arguments.length){case 0:throw new Error("Cannot post() metrics with no arguments");case 1:return self.post(id,null);case 2:return self.post(id,values,{});case 3:return self.post(id,values,tags,new Date)}if(typeof id!="string"){throw new Error("Cannot post() -- id (arg 0) must be a string")}if(id.length===0){throw new Error("Cannot post() -- id is empty")}_.defaultsDeep(tags,this.global_tags);var post=new Metrics.Post({id:id,values:values,tags:tags,timestamp:timestamp?new Date(timestamp):new Date});self.triggerHandler("post",[post]);if(this.is_ready){this._handlePost(post)}else{self.triggerHandler("defer-post",[post]);this.deferred_posts.push(post)}return post},startWatch:function(id,tags){var self=this,stop_watch=new Metrics.StopWatch;tags=tags||{};stop_watch.on("stop",function(ev,duration,more_tags){var values={duration:duration},post_tags=_.defaults(more_tags,tags);self.post(id,values,post_tags)}).start();return stop_watch},createEndpoint:function(id,params){_.extend(params,{id:id});var endpoint=new Metrics.Endpoint(params);this._endpoints[id]=endpoint;return endpoint},getEndpoint:function(id){return this._endpoints[id]||null}})},function(module,exports){module.exports=Post;var Parent=awf.__.BaseObject;awf.util.use(awf.__.BaseObject).toCreate(Post);function Post(params){if(arguments.length===0){throw new Error("Post requires one argument (object) to be instantiated.")}params=params||{};Parent.call(this);var self=this;var id=params.id;if(typeof id!="string"){throw new Error("Cannot create Post -- `id` must be a string")}Object.defineProperty(this,"id",{enumerable:true,get:function(){return id}});var values=params.values;if(!values){values=1}switch(typeof values){case"string":values={value:values};break;case"number":values={count:values};break}Object.defineProperty(this,"values",{enumerable:true,get:function(){return values}});var tags=params.tags||{};if(!_.isObject(tags)||_.isArray(tags)){throw new Error("Cannot create Post -- `tags` must be an object")}Object.defineProperty(this,"tags",{enumerable:true,get:function(){return tags}});var timestamp=new Date;if(params.timestamp){timestamp=_.isDate(params.timestamp)?params.timestamp:new Date(params.timestamp)}Object.defineProperty(this,"timestamp",{enumerable:true,get:function(){return timestamp}})}_.extend(Post,{influxDBString:function(post){var str=post.id;_.each(post.tags,function(val,key){str+=","+key+"="+val});if(_.keys(post.values).length>0){str+=" ";str+=_.map(post.values,function(val,key){return key+"="+val}).join(",")}if(post.timestamp){str+=" "+post.timestamp.getTime()*1e3*1e3}return str}});_.extend(Post.prototype,{toJSON:function(){return{id:this.id,values:this.values,tags:this.tags,timestamp:this.timestamp}},toInfluxDBString:function(){return Post.influxDBString(this)}})},function(module,exports){module.exports=StopWatch;var Parent=awf.__.BaseObject;awf.util.use(Parent).toCreate(StopWatch);function StopWatch(){Parent.call(this);this._start=null;Object.defineProperty(this,"is_active",{enumerable:true,get:function(){return this._start!==null}})}_.extend(StopWatch,{});_.extend(StopWatch.prototype,{start:function(){this._start=new Date;this.triggerHandler("start",[this._start]);return this},stop:function(tags){if(this.is_active){tags=tags||{};this.triggerHandler("stop",[new Date-this._start,tags]);this.reset()}return this},reset:function(){this._start=null;this.triggerHandler("reset");return this}})},function(module,exports){module.exports=Endpoint;var Parent=awf.__.BaseObject;awf.util.use(Parent).toCreate(Endpoint);function Endpoint(params){Parent.call(this);this.id=params.id||null;this.selectors=params.selectors||[];if(!_.isArray(this.selectors)){this.selectors=[this.selectors]}this.adapter=params.adapter||null;this.handler=params.handler||null}_.extend(Endpoint.prototype,{process:function(post){this.triggerHandler("process",[post]);var len=this.selectors.length;if(len>0){var match_found=false,i=-1;while(++i<len&&!match_found){if(post.id.search(this.selectors[i])>-1){match_found=true}}if(!match_found){this.triggerHandler("ignore",[post]);return false}}var returned_post=null,clone=post.toJSON();if(this.adapter){returned_post=this.adapter(clone)}var final_post=returned_post||clone;this.handler(final_post);this.triggerHandler("handle",[final_post]);return true}})},function(module,exports){module.exports=I18n;if(!("localize"in $.fn)){$.fn.localize=function(){return this}}var Parent=awf.__.BaseObject;awf.util.use(Parent).toCreate(I18n);function I18n(params){Parent.apply(this,arguments);params=params||{};jqueryI18next.init(i18next,$,{useOptionsAttr:true});var self=this;self._translation_cache={};self._language_requests={};self._i18n_resources={};self._init_object={};Object.defineProperty(this,"languages",{enumerable:true,get:function(){return _.keys(self._translation_cache)}});var is_done_constructing=false;if("fallbackLng"in params){params.fallback_lng=params.fallbackLng;delete params.fallbackLng}if("fallbackNS"in params){params.fallback_ns=params.fallbackNS;delete params.fallbackNS}awf.util.mixin.properties(self,params,{lng:{default:null,types:["null","string"]},ns:{default:null,types:["null","string"]},fallback_lng:{default:null,types:["null","string"],handler:function(val){this._init_object.fallbackLng=val;if(is_done_constructing){this._initI18n()}}},fallback_ns:{default:null,types:["null","string"],handler:function(val){this._init_object.fallbackNS=val;if(is_done_constructing){this._initI18n()}}},debug:{default:false,types:["boolean"],handler:function(val){this._init_object.debug=val;if(is_done_constructing){this._initI18n()}}},filepath:{default:"./{{lng}}-{{ns}}.json",types:["string"],validator:function(val){if(val.indexOf("{{lng}}")==-1){console.warn("filepath must have `{{lng}}` somewhere in the value. e.g.: `./{{lng}}-{{ns}}.json`");return false}else if(val.indexOf("{{ns}}")==-1){console.warn("filepath must have `{{ns}}` somewhere in the value. e.g.: `./{{lng}}-{{ns}}.json`");return false}else{return true}}}});var blockers=[];if(params.lng&&params.ns){blockers.push(self.loadLanguage(params.lng,params.ns))}if(params.fallback_lng&&params.fallback_ns){blockers.push(self.loadLanguage(params.fallback_lng,params.fallback_ns))}$.when.apply($,blockers).done(function(){self.applyLanguage()}).fail(function(er){console.error("Loading blocking translations went horribly wrong!");console.error(er)});is_done_constructing=true}_.extend(I18n.prototype,{_initI18n:function(){i18next.init(this._init_object);if("language"in i18next){awf.i18n_ready.resolve()}},loadLanguage:function(lng,ns){var self=this,dfr=$.Deferred(),lc;if(arguments.length==1){lc=I18n.languageCode(lng);return this.loadAndSetLanguage(lc.lng,lc.ns)}lc=I18n.languageCode(lng,ns);if(lc in self._translation_cache){console.log("Not loading `"+lc+"` (cached)");dfr.resolve(self._translation_cache[lc])}else{if(lc in self._language_requests){console.log("Deferring load `"+lc+"` to previous request.");return self._language_requests[lc]}else{var url=_.template(self.filepath)({lng:lng,ns:ns});console.log(_.template("Loading `{{url}}`")({url:url}));$.ajax({url:url,dataType:"json",cache:false}).done(function(response){delay=0;if(awf.util.url_params.translation_delay){delay=parseInt(awf.util.url_params.translation_delay)}setTimeout(function(){self._translation_cache[lc]=response;_.set(self._init_object,_.template("resources.{{lng}}.{{ns}}")({lng:lng,ns:ns}),response);self._initI18n();console.log("Added `"+lc+"` to resources.");dfr.resolve(response)},delay)}).fail(dfr.reject);self._language_requests[lc]=dfr.promise()}}return dfr.promise()},applyLanguage:function(lng,ns){var self=this,lc;switch(arguments.length){case 0:return this.applyLanguage(this.lng,this.ns);case 1:lc=I18n.languageCode(lng);return this.applyLanguage(lc.lng,lc.ns)}lc=I18n.languageCode(lng,ns);if(!(lc in self._translation_cache)){console.warn(_.template("Cannot set language to `{{lc}}`, it has not been loaded.")({lc:lc}));return false}console.log(_.template("Applying lc: `{{lc}}`")({lc:lc}));self._init_object.lng=lng;self._init_object.defaultNS=ns;self._initI18n();console.groupCollapsed("localizing the page");$("html").attr("lang",lng);$("body").localize();self.triggerHandler("apply:language",[lc]);console.groupEnd();return true},loadAndSetLanguage:function(lng,ns){var self=this,dfr=$.Deferred();if(arguments.length==1){var lc=I18n.languageCode(lng);return this.loadAndSetLanguage(lc.lng,lc.ns)}self.loadLanguage(lng,ns).done(function(){if(self.lng==lng&&self.ns==ns){console.log(_.template("Post loadAndSet (applying) lc: `{{lc}}`")({lc:I18n.languageCode(lng,ns)}));self.applyLanguage(lng,ns)}else{console.log(_.template("Post loadAndSet (setting) lc: `{{lc}}`")({lc:I18n.languageCode(lng,ns)}));self.setLng(lng);self.setNs(ns);self.applyLanguage()}dfr.resolve()}).fail(dfr.reject);return dfr.promise()}});_.extend(I18n,{languageCode:function(lng,ns){switch(arguments.length){case 0:return null;case 1:var split=lng.split("-");return{lng:split[0],ns:split[1]};default:return _.template("{{lng}}-{{ns}}")({lng:lng,ns:ns})}}})},function(module,exports){module.exports=CustomWorker;awf.util.use(awf.__.BaseModel).toCreate(CustomWorker);function CustomWorker(fn){if(fn===undefined){throw new Error("Cannot create CustomWorker without a script.")}var self=this;this.script=fn.toString();this.script=this.script.substring(this.script.indexOf("{")+1);this.script=this.script.substring(0,this.script.lastIndexOf("}"));var blob=new Blob([this.script]),blobURL=window.URL.createObjectURL(blob);this.worker=new Worker(blobURL);this.dfrs={};awf.__.BaseModel.call(self);this.worker.onmessage=function(e){switch(e.data.ev){case"resolve":self.dfrs[e.data.id].resolve(e.data.response);delete self.dfrs[e.data.id];break;case"reject":self.dfrs[e.data.id].reject(e.data.er);delete self.dfrs[e.data.id];break}}}_.extend(CustomWorker.prototype,{post:function(obj){return this.worker.postMessage(obj)},createPromise:function(){var id=awf.util.randomID();this.dfrs[id]=$.Deferred();return{id:id,dfr:this.dfrs[id]}}})},function(module,exports){module.exports=LocalSearchWorker;function LocalSearchWorker(params){params=params||{};this.custom_worker=new awf.__.CustomWorker(function(){var me=this;me.data=null;me.filters=null;this.onmessage=function(e){var edata=e.data;switch(edata.ev){case"set-data":me.data=edata.data;me.filters=edata.filters;self.postMessage({ev:"resolve",id:edata.id,response:"data received"});break;case"query":if(me.data===null){self.postMessage({ev:"reject",id:edata.id,er:"no data"});return false}var responses={0:[],1:[],2:[],3:[],4:[]};term=edata.term.toLowerCase();for(var i=0;i<me.data.length;i++){var item=me.data[i],lower_title=item.data.title.toLowerCase(),title_index=lower_title.indexOf(term),lower_description=item.data.description.toLowerCase(),description_index=lower_description.indexOf(term),filter_by={title:true,description:true,tags:true};if(typeof me.filters=="object"&&me.filters!==null){if(me.filters.length){filter_by.title=me.filters.indexOf("title")>=0;filter_by.description=me.filters.indexOf("description")>=0;filter_by.tags=me.filters.indexOf("tags")>=0}else{console.warn("Filter cannot be applied to the search query. It is not configured as an Array.")}}if(title_index===0&&filter_by.title){item.rank=0;responses[0].push(item)}else if(title_index>0&&filter_by.title){item.rank=1;responses[1].push(item)}else if(description_index===0&&filter_by.description){item.rank=2;responses[2].push(item)}else if(description_index>0&&filter_by.description){item.rank=3;responses[3].push(item)}else{if(item.data.tags&&filter_by.tags){var tag_found=false;for(var j=0;j<item.data.tags.length;j++){if(term==item.data.tags[j])tag_found=true}if(tag_found){item.rank=4;responses[4].push(item)}}}}var response=responses[0].concat(responses[1],responses[2],responses[3],responses[4]);self.postMessage({ev:"resolve",id:edata.id,response:response});break}}});if(params.data){this.setData(params.data)}}_.extend(LocalSearchWorker.prototype,{setData:function(data,filters){var p=this.custom_worker.createPromise();this.custom_worker.post({ev:"set-data",id:p.id,data:data,filters:filters});return p.dfr.promise()},query:function(term){var p=this.custom_worker.createPromise();this.custom_worker.post({ev:"query",id:p.id,term:term});return p.dfr.promise()}})},function(module,exports){module.exports=DeferredCache;awf.util.use(awf.__.BaseModel).toCreate(DeferredCache);function DeferredCache(params){params=params||{};var self=this;awf.__.BaseModel.apply(this,arguments);this.dfr=null;awf.util.mixin.properties(this,params,{key:{default:"",types:["string"],handler:function(new_val,old_val){if(old_val){awf.util.setStoredObject(new_val,awf.util.getStoredObject(old_val));localStorage.removeItem(old_val)}}}});var data=awf.util.getStoredObject(self.key)||{};awf.util.mixin.properties(this,_.defaults(params,data),{date:{default:null,types:["null","date"],prep:function(val){if(typeof val=="string"){return new Date(val)}return val},handler:function(val){var data=awf.util.getStoredObject(self.key)||{};data.date=val;awf.util.setStoredObject(self.key,data)}},response:{default:null,types:["null","object"],handler:function(val){var data=awf.util.getStoredObject(self.key)||{};data.response=val;awf.util.setStoredObject(self.key,data);var dfr=$.Deferred();if(val){switch(val.state){case"resolved":dfr.resolve(val.data);break;case"rejected":dfr.reject(val.er);break}}this.dfr=dfr}},duration:{default:null,types:["null","number"],handler:function(val){var data=awf.util.getStoredObject(self.key)||{};data.duration=val;awf.util.setStoredObject(self.key,data)}}})}_.extend(DeferredCache.prototype,{setResolution:function(response){return this.setResponse({state:"resolved",data:response})},setRejection:function(er){return this.setResponse({state:"rejected",er:er})}})},function(module,exports){module.exports=Service;awf.util.use(awf.__.BaseModel).toCreate(Service);function Service(params){params=params||{};var self=this;this._last_fetch_params=null;if(!("cache"in params)){params.cache=true}this.cache=params.cache;this.local_storage_key=params.local_storage_key||this.local_storage_key||null;this._fetch_dfrs={};this._fetch_dates={};this._fetch_durations={};if(this.local_storage_key){this.dfr_cache=new awf.__.DeferredCache({key:self.local_storage_key});if(this.dfr_cache.response){var dfr=$.Deferred(),ls_dfr=this.dfr_cache.response;if(ls_dfr.state=="resolved"){dfr.resolve(ls_dfr.data)}else if(ls_dfr.state=="rejected"){dfr.reject(ls_dfr.er)}self._fetch_dfrs[self.local_storage_key]=dfr}}this._lazy_dfr=$.Deferred();this._lazy_dfr_needs_reset=false;Object.defineProperty(this,"last_fetch_dfr",{enumerable:true,get:function(){return self._fetch_dfrs[self._last_fetch_params||"{}"]},set:function(val){if(self.dfr_cache){val.done(function(response){self.dfr_cache.setResolution(response)}).fail(function(er){self.dfr_cache.setRejection(er)})}self._fetch_dfrs[self._last_fetch_params||"{}"]=val}});Object.defineProperty(this,"last_fetch_date",{enumerable:true,get:function(){if(self.dfr_cache){return self.dfr_cache.date}else{return self._fetch_dates[self._last_fetch_params||"{}"]}},set:function(val){if(self.dfr_cache){self.dfr_cache.setDate(val)}else{self._fetch_dates[self._last_fetch_params||"{}"]=val}}});Object.defineProperty(this,"last_fetch_duration",{enumerable:true,get:function(){if(self.dfr_cache){return self.dfr_cache.duration}else{return self._fetch_durations[self._last_fetch_params||"{}"]}},set:function(val){if(self.dfr_cache){self.dfr_cache.setDuration(val)}else{self._fetch_durations[self._last_fetch_params||"{}"]=val}}});this.onFetch=params.onFetch||this.onFetch||null}_.extend(Service.prototype,{fetch:function(age_limit,params){params=params||{};var self=this;this._last_fetch_params=JSON.stringify(params);this.triggerHandler("fetch:start");if(self.last_fetch_dfr&&age_limit!==undefined&&self.last_fetch_date!==undefined&&(age_limit===-1||new Date-self.last_fetch_date<age_limit)){this.triggerHandler("fetch:start:cached");self.triggerHandler("fetch:complete:cached",[self.last_fetch_dfr,self.last_fetch_duration]);return self.last_fetch_dfr.promise()}self.last_fetch_dfr=$.Deferred();self.last_fetch_date=new Date;self.last_fetch_duration=null;if(self._lazy_dfr_needs_reset){self._lazy_dfr=$.Deferred()}self._lazy_dfr_needs_reset=true;self.last_fetch_dfr.done(function(response){self.last_fetch_duration=new Date-self.last_fetch_date;self.triggerHandler("fetch:done",[response,self.last_fetch_duration])}).fail(function(er){self.last_fetch_duration=new Date-self.last_fetch_date;self.triggerHandler("fetch:fail",[er,self.last_fetch_duration])}).always(function(){self.triggerHandler("fetch:complete",[self.last_fetch_dfr,self.last_fetch_duration]);self.triggerHandler("fetch:complete:new",[self.last_fetch_dfr,self.last_fetch_duration])});this.triggerHandler("fetch:start:new",self.last_fetch_date);if(this.onFetch){this.onFetch.call(this,self.last_fetch_dfr,params)}self.last_fetch_dfr.done(self._lazy_dfr.resolve).fail(self._lazy_dfr.reject);return self.last_fetch_dfr.promise()},lazyFetch:function(){return this._lazy_dfr.promise()}})},function(module,exports){module.exports=CallbackService;var Parent=awf.__.Service;awf.util.use(Parent).toCreate(CallbackService);function CallbackService(params){params=params||{};this.url=params.url||this.url||null;this.data=params.data||this.data||null;this.ajax_params=_.defaults(params,{jsonp:"callback",dataType:"jsonp"});Parent.apply(this,arguments)}_.extend(CallbackService.prototype,{onFetch:function(dfr){$.ajax(this.ajax_params).done(dfr.resolve).fail(dfr.reject)}})},function(module,exports){module.exports=AjaxService;var Parent=awf.__.Service;awf.util.use(Parent).toCreate(AjaxService);function AjaxService(params){params=params||{};this.ajax_params=params;Parent.call(this)}_.extend(AjaxService.prototype,{onFetch:function(dfr){$.ajax(this.ajax_params).done(dfr.resolve).fail(dfr.reject)}})},function(module,exports){module.exports=SaveableService;var Parent=awf.__.Service;awf.util.use(Parent).toCreate(SaveableService);function SaveableService(params){params=params||{};Parent.apply(this,arguments);this.onSave=params.onSave||this.onSave||null;this.last_save_dfr=null;this.last_save_date=null;this.last_save_duration=null;if(!this.onSave){throw new Error("Cannot create SaveableService without an onSave function")}}_.extend(SaveableService.prototype,{save:function(data){var self=this;this.last_save_dfr=$.Deferred();this.last_save_date=new Date;this.last_save_duration=null;this.triggerHandler("save:start");this.last_save_dfr.done(function(response){self.last_save_duration=new Date-self.last_save_date;self.triggerHandler("save:done",[response,self.last_save_duration])}).fail(function(er){self.last_save_duration=new Date-self.last_save_date;self.triggerHandler("save:fail",[er,self.last_save_duration])});if(this.onSave){this.onSave.call(this,this.last_save_dfr,data)}return this.last_save_dfr.promise()}})},function(module,exports){module.exports=LocalStorageService;var Parent=awf.__.SaveableService;awf.util.use(Parent).toCreate(LocalStorageService);function LocalStorageService(params){params=params||{};this.key=params.key||this.key||null;Parent.apply(this,arguments);awf.util.mixin.properties(this,params,{value:{default:null,types:["null","string","number","object","array"]}})}_.extend(LocalStorageService.prototype,{onFetch:function(dfr){if(this.key){var val=localStorage.getItem(this.key);setTimeout(function(){dfr.resolve(val)},this.fetch_timeout||0)}else{dfr.reject("no key")}},onSave:function(dfr){var self=this;if(this.key){var is_valid=true,val=null;try{if(_.isObject(self.value)){val=JSON.stringify(self.value)}else{val=self.value}}catch(er){dfr.reject("cannot stringify value");is_valid=false}if(is_valid){var key=this.key;setTimeout(function(){localStorage.setItem(key,val);dfr.resolve({success:true})},this.save_timeout||0)}}else{dfr.reject("no key")}}})},function(module,exports){module.exports=ConstructServiceItem;awf.util.use(awf.__.BaseModel).toCreate(ConstructServiceItem);function ConstructServiceItem(params){var self=this;params=params||{};this.owner=params.owner||this.owner||null;awf.__.BaseModel.apply(this,arguments);if(!("key"in params)){throw new Error("Cannot create ConstructServiceItem without a key")}var key=params.key;Object.defineProperty(this,"key",{enumerable:true,set:function(){console.warn("`key` is a readonly property")},get:function(){return key}});if(!("appid"in params)){throw new Error("Cannot create ConstructServiceItem without an appid")}var appid=params.appid;Object.defineProperty(this,"appid",{enumerable:true,set:function(){console.warn("`appid` is a readonly property")},get:function(){return self.owner?self.owner.appid:appid}});if(!("endpoint"in params)){throw new Error("Cannot create ConstructServiceItem without an endpoint")}var endpoint=params.endpoint;if(endpoint){if(endpoint.charAt(endpoint.length-1)!="/"){endpoint+="/"}}Object.defineProperty(this,"endpoint",{enumerable:true,set:function(){console.warn("`endpoint` is a readonly property")},get:function(){return self.owner?self.owner.endpoint:endpoint}});this.service=new awf.__.SaveableService({local_storage_key:params.local_storage_key,onFetch:function(dfr){function fetch(delayed){console.time("cs fetch: "+self.key);dfr.always(function(){console.timeEnd("cs fetch: "+self.key)});if(self.owner&&delayed){dfr.resolve(self.value)}else{var ajax_object={contentType:"application/json",method:"GET"},ajax_url=self.endpoint+self.appid+"/"+self.key+"/",done_callback=function(response){var self=this,val=ConstructServiceItem.parseRawValue(response.properties[0].value);self.setValue(val);dfr.resolve(val)}.bind(self),fail_callback=function(er){var self=this;if(er.status==404){self.setValue(null);dfr.resolve(null)}else{dfr.reject(er)}}.bind(self);if(awf.user.services.oauth){awf.user.services.oauth.fetch(ajax_url,ajax_object).done(done_callback).fail(fail_callback)}else{_.extend(ajax_object,{url:ajax_url,xhrFields:{withCredentials:true}});$.ajax(ajax_object).done(done_callback).fail(fail_callback)}}}if(self.owner){self.owner.ready.done(function(){fetch(true)})}else{fetch(false)}},onSave:function(dfr){var data;try{var escaped_val=self.value;if(typeof escaped_val=="object"){escaped_val=JSON.stringify(escaped_val)}escaped_val=_.escape(escaped_val);data=JSON.stringify({key:self.key,value:escaped_val})}catch(er){dfr.reject(er);return false}var ajax_object={contentType:"application/json",method:"PUT",data:data},ajax_url=self.endpoint+self.appid+"/",done_callback=function(response){var val=response.properties[0].value;dfr.resolve(val,key)}.bind(self),fail_callback=function(er){dfr.reject(er)}.bind(self);function save(){if(awf.user.services.oauth){awf.user.services.oauth.fetch(ajax_url,ajax_object).done(done_callback).fail(fail_callback)}else{_.extend(ajax_object,{url:ajax_url,xhrFields:{withCredentials:true}});$.ajax(ajax_object).done(done_callback).fail(fail_callback)}}if(self.owner){self.owner.ready.done(save)}else{save()}}});awf.util.mixin.properties(this,params,{value:{default:null,types:["null","string","number","object","array"]}})}_.extend(ConstructServiceItem.prototype,{fetch:function(age_limit){return this.service.fetch(age_limit)},lazyFetch:function(){return this.service.lazyFetch()},save:function(){return this.service.save()}});_.extend(ConstructServiceItem,{parseRawValue:function(val){val=_.unescape(val);if(val==="null"){val=null}else if(val==="false"){val=false}else if(val==="true"){val=true}else if(val.charAt(0)=="["||val.charAt(0)=="{"){try{var json=JSON.parse(val);val=json}catch(er){}}else if((val.match(/\d|\./g)||[]).length==val.length){if(val.indexOf(".")>-1){try{var fnum=parseFloat(val);val=fnum}catch(er){}}else{try{var inum=parseInt(val);val=inum}catch(er){}}}return val}})},function(module,exports){module.exports=ConstructService;awf.util.use(awf.__.BaseModel).toCreate(ConstructService);function ConstructService(params){var self=this;params=params||{};awf.__.BaseModel.apply(self,arguments);self.items={};self.local_storage_key=params.local_storage_key||self.local_storage_key||null;self.ready=$.Deferred();self._whenCallsAreAvailable=$.Deferred();self._whenCallsAreAvailable.done(function(){console.log("--- construct service calls are now avilable ---")});function maybeResolveWhenCallsAreAvailable(){if(self.appid&&self.endpoint){self._whenCallsAreAvailable.resolve()}}function whenCallsAreAvailable(callback){self._whenCallsAreAvailable.done(callback)}awf.util.mixin.properties(self,params,{appid:{default:null,types:["null","string"],handler:maybeResolveWhenCallsAreAvailable},timeout:{default:null,types:["null","number"]},endpoint:{default:null,types:["null","string"],prep:function(val){if(typeof val=="string"){if(val.charAt(val.length-1)!="/"){val+="/"}}return val},handler:maybeResolveWhenCallsAreAvailable},active_state:{default:false,types:["boolean"]}});self.service=new awf.__.Service({local_storage_key:self.local_storage_key,onFetch:function(dfr){whenCallsAreAvailable(function(){dfr.done(function(){self.setActiveState(true);self.ready.resolve();self.triggerHandler("fetch-success")}).fail(function(){self.ready.reject();self.triggerHandler("fetch-fail")}).always(function(){self.triggerHandler("fetch-complete")});awf.user.authentication.done(function(is_authenticated){if(is_authenticated){switch(awf.util.url_params.construct_service){case"fail":setTimeout(function(){dfr.reject("fake failure")},500);break;case"timeout":setTimeout(function(){dfr.reject("fake timeout")},self.timeout||5e3);break;case"hang":console.info(" -- construct lookup is set to hang --");break;default:var delayed_success_dfr=awf.util.urlDelayedDeferred("construct_service"),ajax_object={contentType:"application/json",method:"GET",timeout:self.timeout},ajax_url=self.endpoint+self.appid+"/",done_callback=function(response){var self=this;delayed_success_dfr.done(function(){_.forEach(response.properties,function(data){var item=self.getOrCreate(data.key);if(self.service.local_storage_key){item.service.local_storage_key=self.service.local_storage_key+":"+data.key;
}item.service.last_fetch_date=self.service.last_fetch_date;item.service.last_fetch_duration=self.service.last_fetch_duration;var val=awf.__.ConstructServiceItem.parseRawValue(data.value);var item_dfr=$.Deferred();item_dfr.resolve(val);item.service.last_fetch_dfr=item_dfr.promise();item.setValue(val)});dfr.resolve(self.items)})}.bind(self),fail_callback=function(er){var self=this;if(er.status==404){_.forEach(self.items,function(item,key){item.setValue(null)});dfr.resolve(null)}else{dfr.reject(er)}}.bind(self);if(awf.user.services.oauth){console.log("-- Construct Service -- OIDC :",ajax_url,ajax_object);awf.user.services.oauth.fetch(ajax_url,ajax_object).done(done_callback).fail(fail_callback)}else{_.extend(ajax_object,{url:ajax_url,xhrFields:{withCredentials:true}});console.log("-- Construct Service -- SSO :",ajax_url,ajax_object);$.ajax(ajax_object).done(done_callback).fail(fail_callback)}}}else{dfr.reject("user is not authenticated")}}).fail(function(){dfr.reject("user authentication failed")})})}})}_.extend(ConstructService.prototype,{fetchAll:function(age_limit){return this.service.fetch(age_limit)},lazyFetchAll:function(){return this.service.lazyFetch()},getOrCreate:function(key){var self=this;if(!(key in self.items)){self.items[key]=new awf.__.ConstructServiceItem({owner:self,endpoint:self.endpoint,appid:self.appid,key:key,local_storage_key:self.local_storage_key?self.local_storage_key+":"+key:null})}return self.items[key]},toJSON:function(){return _.mapValues(this.items,function(item){return item.value})}})},function(module,exports,__webpack_require__){module.exports=DragHandler;var Parent=awf.__.BaseObject;awf.util.use(Parent).toCreate(DragHandler);function DragHandler($parent){if(!$parent){throw new Error("Cannot create a Drag Handler instance without a parent.")}var self=this;self.ready=false;self.active=false;self.start={x:0,y:0};self.delta={x:0,y:0};self.$target=null;self.mouse_touch_down=false;self.active_participant=null;this.participants={};$parent.on("mousedown touchstart",function(ev){var $target=$(ev.target);if($target.closest(".js-drag-handle").length>0){var x=awf.mouse.x||ev.originalEvent.touches[0].pageX,y=awf.mouse.y||ev.originalEvent.touches[0].pageY;self.ready=true;self.mouse_touch_down=true;self.active=false;self.start={x:x,y:y};self.delta={x:0,y:0};self.$target=$target;var start_time=ev.timeStamp,is_first_move=true;if($target.closest(".js-drag-intent-ignore").length>0){start_time=-1}$(window).on("mousemove.drag-handler touchmove.drag-handler",function(ev){var delay=ev.timeStamp-start_time,delay_intent=300;if(is_first_move){is_first_move=false;if(ev.type=="touchmove"&&delay<=delay_intent){self.killDrag();return}}var new_scroll_top,current_scroll_top=$(window).scrollTop(),top_zone=100,bottom_zone=$(window).height()-100,x=awf.mouse.x,y=awf.mouse.y,offset_y=awf.mouse.offset.y;ev.preventDefault();if(self.ready&&self.mouse_touch_down){self.delta={x:x-self.start.x,y:y-self.start.y};if(!self.active&&Math.max(Math.abs(self.delta.x),Math.abs(self.delta.y))>0){self.active=true;self.triggerHandler("drag:start",[self.$target,self.start,self.delta])}}if(offset_y<top_zone){new_scroll_top=current_scroll_top-(top_zone-offset_y)*.5;$("html, body").animate({scrollTop:new_scroll_top},0)}if(offset_y>bottom_zone){new_scroll_top=current_scroll_top+(offset_y-bottom_zone)*.5;$("html, body").animate({scrollTop:new_scroll_top},0)}if(self.active){self.triggerHandler("drag:move",[self.$target,self.start,self.delta])}})}}).on("mouseup touchend contextmenu",function(ev){self.mouse_touch_down=false;if(self.ready){if(self.active){ev.preventDefault()}setTimeout(function(){self.killDrag()},100)}}).on("mouseleave.drag-handler",function(){if(!self.active)return false;self.exit_timeout=setTimeout(function(){self.killDrag()},500);$(this).off("mouseenter.drag-handler").on("mouseenter.drag-handler",function(){clearTimeout(self.exit_timeout)})})}_.extend(DragHandler.prototype,{killDrag:function(){var self=this;if(self.active){self.triggerHandler("drag:end",[self.$target]);self.active=false;self.setActiveParticipant(null)}self.ready=false;self.$target=null;$(window).off("mousemove.drag-handler touchmove.drag-handler");setTimeout(function(){_.forEach(self.participants,function(participant,id){participant.applyPositions()})},100);return self},registerParticipant:function(id,instance){var self=this;this.participants[id]=instance;console.group("Drag participant: ",id);if(instance instanceof awf.ui.ArrangeableGrid){DragHandler.type_handlers.grid.call(this,id,instance)}console.groupEnd();return this},setActiveParticipant:function(new_val){if(new_val===null&&this.active_participant===null||_.get(new_val,"id")===_.get(this.active_participant,"id"))return this;var old_val=this.active_participant;this.active_participant=new_val;this.triggerHandler("change:active_participant",[new_val,old_val]);return this}});DragHandler.type_handlers={grid:__webpack_require__(75)}},function(module,exports){module.exports=function(id,grid){var drag_handler=this;grid.dnd_id=id;grid.on("change:order",function(ev,new_order){drag_handler.triggerHandler("change:order",[grid,new_order])});drag_handler.on("drag:start",function(ev,$target,start,delta){if(!$target.closest(".grid").is(grid.$el)){return false}$target.addClass("-grabbed");var grid_item=$target.closest(".grid__item").data("component");drag_handler.setActiveParticipant(grid_item.collection);if(!grid_item.$el){return false}grid_item.orig_pos={x:parseFloat(grid_item.$el.css("left")),y:parseFloat(grid_item.$el.css("top"))};grid_item.$el.addClass("-dragging").css({transform:"translate("+delta.x+"px, "+delta.y+"px)"});grid.setGrabbedItem(grid_item);grid.setGhost(grid_item);awf.page.setSelectableState(false);var grid_offset=grid.$el.offset(),tile_offset={x:grid.$el.width()/grid.columns*grid_item.col,y:grid.tile.height*grid_item.row+grid.tile.margin*(grid_item.row-1)},tile_focal={x:start.x-tile_offset.x-grid_offset.left,y:start.y-tile_offset.y-grid_offset.top},grid_drop_point={x:tile_focal.x+tile_offset.x+delta.x,y:tile_focal.y+tile_offset.y+delta.y},page_drop_point={x:grid_offset.left+grid_drop_point.x,y:grid_offset.top+grid_drop_point.y};grid._is_dragging_within_domain=true;drag_handler.triggerHandler("within-domain-drag:start",[id,grid,grid_item,page_drop_point]);grid_item.delta=delta}).on("drag:move",function(ev,$target,start,delta){if(!$target.closest(".grid").is(grid.$el)){return false}var grid_item=$target.closest(".grid__item").data("component");if(!grid_item.$el){return false}var grid_offset=grid.$el.offset(),tile_offset={x:grid.$el.width()/grid.columns*grid_item.col,y:grid.tile.height*grid_item.row+grid.tile.margin*(grid_item.row-1)},tile_focal={x:start.x-tile_offset.x-grid_offset.left,y:start.y-tile_offset.y-grid_offset.top},grid_drop_point={x:tile_focal.x+tile_offset.x+delta.x,y:tile_focal.y+tile_offset.y+delta.y},loc=grid.getLocation(grid_drop_point),page_drop_point={x:grid_offset.left+grid_drop_point.x,y:grid_offset.top+grid_drop_point.y};grid.setGhost(loc);if(grid.ghost.is_in_domain){if(!grid._is_dragging_within_domain){grid._is_dragging_within_domain=true;drag_handler.triggerHandler("beyond-domain-drag:end",[id,grid,grid_item]);drag_handler.triggerHandler("within-domain-drag:start",[id,grid,grid_item,page_drop_point])}else{drag_handler.triggerHandler("within-domain-drag:move",[id,grid,grid_item,page_drop_point])}}else{if(grid._is_dragging_within_domain){grid._is_dragging_within_domain=false;drag_handler.triggerHandler("within-domain-drag:end",[id,grid,grid_item]);drag_handler.triggerHandler("beyond-domain-drag:start",[id,grid,grid_item,page_drop_point])}else{drag_handler.triggerHandler("beyond-domain-drag:move",[id,grid,grid_item,page_drop_point])}}grid.applyPositions();grid_item.delta=delta;grid_item.$el.css({transform:"translate("+delta.x+"px, "+delta.y+"px)"})}).on("drag:end",function(ev,$target){if(!$target.closest(".grid").is(grid.$el)){return false}$target.removeClass("-grabbed");var grid_item=$target.closest(".grid__item").data("component");if(!grid_item.$el){return false}var new_order=grid.getNewOrder();grid.setGhost(null);grid.setGrabbedItem(null);awf.page.setSelectableState(true);grid.setOrder(new_order);if(grid_item&&grid_item.$el){var final_pos={x:parseFloat(grid_item.$el.css("left")),y:parseFloat(grid_item.$el.css("top"))},delta_pos={x:final_pos.x-grid_item.orig_pos.x,y:final_pos.y-grid_item.orig_pos.y};grid_item.delta.x-=delta_pos.x;grid_item.delta.y-=delta_pos.y;delete grid_item.orig_pos;grid_item.$el.css({transform:"translate("+grid_item.delta.x+"px, "+grid_item.delta.y+"px)"});setTimeout(function(){if(grid_item&&grid_item.$el){grid_item.$el.removeClass("-dragging").css({transform:"translate(0, 0)"})}},0)}})}},function(module,exports,__webpack_require__){module.exports=CollectionItem;var use=__webpack_require__(22);use(awf.__.BaseModel).toCreate(CollectionItem);function CollectionItem(params){params=params||{};awf.util.mixin.collectionItem(this,params);awf.__.BaseModel.apply(this,arguments)}},function(module,exports,__webpack_require__){module.exports=Collection;var use=__webpack_require__(22),BaseModel=awf.__.BaseModel;use(BaseModel).toCreate(Collection);function Collection(params){params=params||{};BaseModel.apply(this,arguments);awf.util.mixin.collection(this,params)}_.extend(Collection.prototype,{Item:awf.__.CollectionItem})},function(module,exports){module.exports=DBDimensionGroup;var Parent=awf.__.BaseModel;awf.util.use(Parent).toCreate(DBDimensionGroup);function DBDimensionGroup(owner,key){if(!owner)throw new Error("Cannot construct DBDimensionGroup without an owner");if(!key)throw new Error("Cannot construct DBDimensionGroup without a key");this.items=[];this.id=awf.util.randomID();this.owner=owner;this.key=key;Parent.call(this)}_.extend(DBDimensionGroup.prototype,{addItem:function(item){var self=this;item.on("change.dimension-group-"+self.id,function(ev,prop,n,o){self.triggerHandler("change:item",[this,prop,n,o]);self.triggerHandler("change",["item",this,prop,n,o])});this.items.push(item);this.triggerHandler("add:item",[item]);this.triggerHandler("add",["item",item]);this.triggerHandler("change:length",[this.items.length,this.items.length-1]);this.triggerHandler("change",["length",this.items.length,this.items.length-1]);return item},removeItem:function(items){var self=this,removed_items=_.remove(this.items,items);this.triggerHandler("remove:item",[removed_items]);this.triggerHandler("change:length",[this.items.length,this.items.length+removed_items.length]);this.triggerHandler("change",["length",this.items.length,this.items.length+removed_items.length]);_.forEach(removed_items,function(item){item.off("change.dimension-group-"+self.id)});if(this.items.length===0){this.owner.removeGroup(this.key)}return removed_items}})},function(module,exports){module.exports=DBDimension;var Parent=awf.__.BaseModel;awf.util.use(Parent).toCreate(DBDimension);function DBDimension(key){if(!key)throw new Error("Cannot construct DBDimension without a key");this.id=awf.util.randomID();this.key=key;this.groups={};Parent.call(this)}_.extend(DBDimension.prototype,{getOrCreateGroup:function(key){var self=this,group=null;if(!(key in this.groups)){group=new awf.__.DBDimensionGroup(this,key);this.groups[key]=group;this.triggerHandler("add:group",[group]);group.on("change:item",function(ev,changed_item,prop,n,o){if(prop==self.key){this.removeItem(changed_item);self.addItem(changed_item)}})}return group},removeGroup:function(key){var group=this.groups[key];this.triggerHandler("remove:group",[group]);delete this.groups[key]},addItem:function(item){var self=this,item_key=item[this.key];if(item_key){var group=this.getOrCreateGroup(item_key);this.groups[item[this.key]].addItem(item);this.triggerHandler("add:item",[this.item,this.key])}return item},removeItem:function(item){if(!(item[this.key]in this.groups)){return null}var removed_item=this.groups[item[this.key]].removeItem(item);this.triggerHandler("remove:item",[removed_item,this.key]);return removed_item},keys:function(){return _.keys(this.groups)}})},function(module,exports){module.exports=DB;var Parent=awf.__.BaseModel;awf.util.use(Parent).toCreate(DB);function DB(params){params=params||{};var self=this;this.keys=params.keys||this.keys||[];this.dimensions={};_.forEach(this.keys,function(key){self.dimensions[key]=new awf.__.DBDimension(key)});Parent.apply(this,arguments);awf.util.mixin.collection(this,params,{addItem:function(item){_.forEach(self.dimensions,function(dimension,key){dimension.addItem(item)})},removeItem:function(item){_.forEach(self.dimensions,function(dimension,key){dimension.removeItem(item)})}})}_.extend(DB.prototype,{Item:awf.__.CollectionItem})},function(module,exports){module.exports=BadgeDBItem;var Parent=awf.__.CollectionItem;awf.util.use(Parent).toCreate(BadgeDBItem);function BadgeDBItem(params){params=params||{};var self=this;Parent.apply(this,arguments);awf.util.mixin.properties(this,params,{content:{default:"",types:["string"]},experience:{default:null,types:["null","string"]},cog:{default:null,types:["null","string"]},view:{default:null,types:["null","string"]}})}_.extend(BadgeDBItem.prototype,{})},function(module,exports){module.exports=BadgeDB;var Parent=awf.__.DB;awf.util.use(Parent).toCreate(BadgeDB);function BadgeDB(params){params=params||{};var self=this;this.keys=["experience","cog"];Parent.apply(this,arguments)}_.extend(BadgeDB.prototype,{Item:awf.__.BadgeDBItem})},function(module,exports){module.exports=Cog;awf.util.use(awf.__.BaseModel).toCreate(Cog);function Cog(params){params=params||{};awf.__.BaseModel.apply(this,arguments);var data=new awf.__.BaseModel;this.data=_.extend(data,params.data,this.data);this.views=_.extend({},params.views,this.views);_.forEach(this.views,function(view,type){view.type=type});this.context=_.extend({},params.context,this.context);this.id=params.id||this.id||null;this.type=params.type||this.type||null;this.flag=params.flag||this.flag||null;this._is_setup=false;this._setup=params.setup;this._teardown=params.teardown;this._view_instances=[]}_.extend(Cog.prototype,{setup:function(){var self=this;if(this._setup)this._setup.call(this.data,{postBadge:function(params){params=params||{};if(typeof params=="string"){params={content:params}}params.cog=self.id;params.experience=awf.app.experience.id;return awf.badge_db.addItem(params)}});return this},teardown:function(){this._setup=false;this.destroyAllViews();if(this._teardown)this._teardown.call(this.data);_.forEach(this.views,function(view,id){view._initialized=false});return this},isAvailable:function(){if(this.flag){return awf.flags.isActive(this.flag)}else{return true}},availableViews:function(){var available_views=[];_.forEach(this.views,function(view,type){if("flag"in view){if(awf.flags.isActive(view.flag)){available_views.push(type)}}else{available_views.push(type)}});return available_views},isViewAvailable:function(type){if(type in this.views)return _.contains(this.availableViews(),type);else return null},renderView:function(type,$container,api,init_api){var view=this.views[type];if(view===undefined)throw new Error("Cannot render view of unknown type: "+type);if(!view.render)throw new Error("Cannot render `"+type+"` view -- it has has no render function defined.");this._maybeSetupCog();this._maybeInitializeView(type,init_api);var view_methods={};if(type in Cog.render_methods){view_methods=Cog.render_methods[type].call(this,api||{})}var view_instance=new CogView(this,type,$container,view_methods);this._view_instances.push(view_instance);view_instance.render();this.triggerHandler("render:"+type);return view_instance},destroyAllViews:function(){var self=this;_.forEachRight(self._view_instances,function(instance){console.log("destroying `"+instance.type+"` instance: ",instance);instance.destroy();self.triggerHandler("destroy:"+instance.type)});self._view_instances=[];return self},_maybeSetupCog:function(){if(!this._is_setup){this.setup();this._is_setup=true}return this},_maybeInitializeView:function(type,api){api=api||{};var self=this,view=self.views[type];if(!view._initialized){if(view.init){_.extend(api,{postBadge:function(msg){var params={cog:self.id,experience:awf.app.experience.id,view:view.type,content:msg};return awf.badge_db.addItem(params)}});view.init.call(this.data,api)}view._initialized=true}return this}});_.extend(Cog,{render_methods:{mini:function(params){return{setTitle:function(){params.card.setTitle.apply(params.card,arguments);return this},setIcon:function(){params.card.setIcon.apply(params.card,arguments);return this}}},medium:function(params){var cog=this;return{closeTray:function(){switch(params.context){case"page-tray":cog.component.hide();break;default:console.warn("closeTray does not work in context `"+params.context+"`.")}return this},handleLargeViewAvailable:function(fn){switch(params.context){case"grid":awf.app.experience.modal_available_flag.runAndWatch(function(is_flippable){fn(is_flippable&&cog.isViewAvailable("large"))});break;default:fn(false)}},setTitle:function(val){switch(params.context){case"grid":params.card.setTitle(val);break;default:console.warn("setTitle does not work in context `"+params.context+"`.")}return this},setRowSpan:function(val){switch(params.context){case"grid":params.grid_item.setRowSpan(val);params.grid_item.collection.autoSetColumns();break;default:console.warn("setRowSpan does not work in context `"+params.context+"`.")}return this},setColSpan:function(val){switch(params.context){case"grid":params.grid_item.setColSpan(val);params.grid_item.collection.autoSetColumns();break;default:console.warn("setColSpan does not work in context `"+params.context+"`.")}return this},postMessage:function(type,message,show_dismiss){switch(params.context){case"grid":return params.card.postMessage(type,message,show_dismiss);default:console.warn("postMessage does not work in context `"+params.context+"`.");return null}},flipCard:function(){switch(params.context){case"grid":params.card.trigger("request-open");break;default:console.warn("flipCard does not work in context `"+params.context+"`.")}return this}}},large:function(params){return{setTitle:function(val){params.card.setTitle(val);return this},setWidth:function(val){awf.modal.setWidth(val);return this},setHeight:function(val){awf.modal.setHeight(val+53);return this},postMessage:function(type,message,show_dismiss){return params.card.postMessage(type,message,show_dismiss)},flipCard:function(){params.card.trigger("request-close");return this},getArgs:function(){return params.args}}}}});function CogView(owner,type,$container,api){this.owner=owner;this.$container=$container;this.api=api||{};this.view=owner.views[type];this.type=type}_.extend(CogView.prototype,{render:function(){if(this.view.render)this.view.render.call(this.owner.data,this.$container,this.api);return this},destroy:function(){var self=this;this._delete_me=true;var removed_views=_.remove(this.owner._view_instances,"_delete_me");if(removed_views.length===0){return null}var removed_view=removed_views[0];delete removed_view._delete_me;if(this.view.destroy){this.view.destroy.call(this.owner.data,this.$container)}this.$container.empty();this.$container.off();return removed_view}})},function(module,exports){module.exports=Experience;awf.util.use(awf.__.BaseModel).toCreate(Experience);function Experience(params){params=params||{};console.group(_.template("Constructing Experience `{{label}}` [{{id}}]")(_.defaults({},params,{label:"?",id:"?"})));console.log("params: ",params);var self=this;self.id=params.id||self.id||null;self.cog_types=_.extend([],self.cogs,params.cogs);self.context=_.extend({},self.context,params.context);self.cogs={};if("layout"in params&&!(params.layout instanceof awf.ui.Layout)){params.layout.render=false;params.layout.experience=self;params.layout.parent=function(){return $("#layout",awf.page.$el)};self.layout=new awf.ui.Layout(params.layout)}else{self.layout=params.layout||self.layout||new awf.ui.Layout({render:false,experience:self,parent:function(){return $("#layout",awf.page.$el)}})}self.key="experience : "+self.id;var use_construct_service=!!awf.construct;if(use_construct_service){self.preference_service=awf.construct.getOrCreate(self.key)}else{if(awf.user){awf.user.authentication.done(function(){self.key=awf.user.info.cnum+" : "+self.key})}self.preference_service=new awf.__.LocalStorageService({key:self.key});if(awf.user){awf.user.authentication.done(function(){self.preference_service.key=self.key})}}awf.util.mixin.properties(self,params,{label:{default:"",types:["string"]},id:{default:"",types:["string"]},type:{default:"",types:["string"]},icon:{default:null,types:["null","string"]},active_icon:{default:null,types:["null","string"]},preferences:{default:null,types:["null","object"]},modal_width:{default:params.modal_width||null,types:["null","number"]},transition:{default:params.transition||null,types:["null","string"]}});self.modal_available_flag=new awf.__.FeatureToggler.Flag($(window).width()>self.modal_width+20);$(window).off("resize.modal_available_flag").on("resize.modal_available_flag",function(){if(self.modal_available_flag){self.modal_available_flag.setValue($(window).width()>self.modal_width+20)}});awf.__.BaseModel.apply(self,arguments);console.groupEnd()}_.extend(Experience.prototype,{setup:function(){var self=this;console.group("Rendering layout:",self.layout.type);self.layout._default_parent().empty();awf.drag_handler=new awf.__.DragHandler(awf.page.$el);awf.page.layout=self.layout;awf.page.layout.render();console.groupEnd();return self},teardown:function(){console.group("Destroying experience: ",this.id);console.log("Turning off drag_handler");awf.drag_handler.off();console.group("Tearing down cogs");_.forEach(this.cogs,function(cog,id){console.group(id);cog.teardown();console.groupEnd()});this.cogs={};console.groupEnd();console.groupEnd();console.group("Destroying old layout");this.layout.destroy();delete awf.page.layout;console.groupEnd();return this},getOrCreateCog:function(cog_params){if(typeof cog_params=="string"){cog_params={id:cog_params,type:cog_params};console.log("Converting to ",cog_params)}if(this.cogs[cog_params.id]){return this.cogs[cog_params.id]}if(!_.contains(this.cog_types,cog_params.type))throw new Error("Cannot create cog of type `"+cog_params.type+"` for experience type `"+this.type+"`. Update the experience's cogs array to include `"+cog_params.type+"`.");if(!(cog_params.type in awf.app.registered_cogs)){throw new Error("Cannot create cog of type `"+cog_params.type+"` -- It has not been registered!")}cog_params=_.extend({},awf.app.registered_cogs[cog_params.type],{id:cog_params.id,type:cog_params.type});this.cogs[cog_params.id]=new awf.__.Cog(cog_params);return this.cogs[cog_params.id]},fetchPreferences:function(){var self=this,dfr=$.Deferred();console.time("fetch preferences");awf.user.authentication.done(function(is_authenticated){if(is_authenticated){var local_prefs=awf.util.getStoredObject(self.key);if(local_prefs){console.log("--- We have local preferences!");console.log(local_prefs);self.setPreferences(local_prefs);dfr.resolve(self.preferences)}else{console.log("--- We do *not* have local preferences");dfr.reject()}self.preference_service.fetch().always(function(){console.timeEnd("fetch preferences")}).done(function(response){if(typeof response=="string"){response=JSON.parse(response)}console.group("Construct service has finally responded! (It took "+self.preference_service.service.last_fetch_duration/1e3+" seconds)");console.log("    remote prefs: ",response);console.log("     local prefs: ",self.preferences);var is_same=_.isEqual(response,self.preferences);if(is_same){console.log("They are the same")}else{awf.util.setStoredObject(self.key,response);awf.app.experience.postMessage("info",awf.__.Experience.messages.preference_missmatch)}console.groupEnd()})}else{dfr.reject()}}).fail(function(){dfr.reject()});dfr.done(function(){self.on("change:preferences",function(ev,new_prefs){console.log("new_prefs: ",new_prefs);awf.util.setStoredObject(self.key,new_prefs)})});return dfr.promise()},extendPreferences:function(obj){return this.setPreferences(_.extend({},this.preferences,obj))},savePreferences:function(){return this.preference_service.setValue(this.preferences).save()},postMessage:function(type,message,show_dismiss){var $container=this.layout.$el.find("#awf-experience-message");if($container.length>0){return awf.util.postMessage($container,type,message,show_dismiss)}console.warn("The experience `"+this.id+"` does not have a message container.");return null}});_.extend(Experience,{messages:{preference_missmatch:"Your remote preference data finally loaded, and it looks like your local setup is different. When you refresh, they will match your remote settings."}})},function(module,exports){module.exports=Map;function Map(cols){var self=this,map={};self.height=0;self.width=0;cols=cols||1;function outsideOurColumns(x,y,w,h){w=w||1;h=h||1;if(x+w>cols)return true;else return false}self.outsideOurColumns=outsideOurColumns;self.claimOrUnclaim=claimOrUnclaim;function claimOrUnclaim(x,y,claim_boolean,w,h){w=w||1;h=h||1;if(w<1)throw new Error("Widths cannot be less than 1");if(h<1)throw new Error("Heights cannot be less than 1");if(x+w>cols)throw new Error("Cannot claim or unclaim area outside column domain x:"+x+", w:"+w+", cols:"+cols);for(var wi=0;wi<w;wi++){map[x+wi]=map[x+wi]||{};for(var hi=0;hi<h;hi++)map[x+wi][y+hi]=claim_boolean}self.width=Math.max(self.width,x+w);self.height=Math.max(self.height,y+h)}self.claim=claim;function claim(x,y,w,h){if(_.isObject(x)){y=x.row;w=x.col_span;h=x.row_span;x=x.col}self.claimOrUnclaim(x,y,true,w,h)}self.unclaim=unclaim;function unclaim(x,y,w,h){self.claimOrUnclaim(x,y,false,w,h)}self.getCols=function(){return cols};self.setCols=setCols;function setCols(new_cols){cols=new_cols}self.claimed=claimed;function claimed(x,y,w,h){w=w||1;h=h||1;if(x+w>cols)return true;for(var wi=0;wi<w;wi++){map[x+wi]=map[x+wi]||{};for(var hi=0;hi<h;hi++){if(map[x+wi][y+hi])return true}}return false}self.findSlot=findSlot;function findSlot(w,h){if(w>cols)throw new Error("Cannot find slot for item wider than allowed cols");var x=-1,y=0,found=false;while(!found){if(x<cols-w)x++;else{y++;x=0}found=!claimed(x,y,w,h)}return{x:x,y:y}}self.findAndClaimSlot=findAndClaimSlot;function findAndClaimSlot(w,h){var slot=findSlot(w,h);claim(slot.x,slot.y,w,h);return slot}self.reset=reset;function reset(){map={};self.height=0;self.width=0}self.toString=function(){var rows=[];for(var hi=0;hi<self.height;hi++){rows.push("");for(var wi=0;wi<self.width;wi++)rows[hi]+=claimed(wi,hi)?"X":"-"}return rows.join("\n")}}},function(module,exports,__webpack_require__){awf.__.FeatureToggler=__webpack_require__(87);__webpack_require__(89)},function(module,exports,__webpack_require__){module.exports=FeatureToggler;function FeatureToggler(){this._feature_data=null;this._stylesheet=null;this.service=new awf.__.AjaxService({cache:false,dataType:"json"})}_.extend(FeatureToggler.prototype,{init:function(filename){var self=this;if(filename===undefined)throw new Error("Cannot initialize FeatureToggler with no filename.");this.service.ajax_params.url=filename;var dfr=$.Deferred();this.service.fetch().done(function(response){self._feature_data=response;try{self.apply();dfr.resolve()}catch(er){dfr.reject(er);throw er}}).fail(dfr.reject);return dfr.promise()},getPaths:function(val){var self=this,paths=[];_.forEach(val.split(/\||\&|\(|\)|\!| /),function(item){if(item.length>0){paths.push(item)}});return _.unique(paths)},getEndpoint:function(key){if(key===undefined)throw new Error("Cannot check if feature is active -- No key was given.");var endpoint=_.get(this._feature_data,key);if(_.isObject(endpoint)&&"_"in endpoint){endpoint=endpoint._}return endpoint},getEndpoints:function(val){var self=this,paths=this.getPaths(val);return _.map(paths,function(path){return self.getEndpoint(path)})},runAndWatch:function(key,callback){var self=this,flag=self.watch(key);callback.call(self,flag.value);flag.on("change:value",function(ev,new_val,old_val){callback.call(self,new_val,old_val)});return this},_checkKey:function(key,_silent){var endpoint=this.getEndpoint(key);switch(typeof endpoint){case"undefined":return false;case"boolean":return endpoint;case"object":var keys=_.keys(endpoint),len=keys.length;if(len===0)return false;var i=-1,ret=true;while(++i<len&&ret){var k=keys[i],v=endpoint[k];if(k in FeatureToggler.handlers){if("check"in FeatureToggler.handlers[k]){var val=false;try{val=FeatureToggler.handlers[k].check(v)}catch(er){console.warn("FeatureToggler handler failed: `"+k+"`");throw er}if(!val){return false}}else{throw new Error("FeatureToggler handler `"+k+"` has no `check` method defined.")}}else{if(!_silent)console.warn("The feature toggle check on '"+key+"' needs to be handled by '"+k+"', but that type has not been adapted.");return false}}return true;default:return false}},isActive:function(val,_silent){var self=this,orig_val=val,awfEval=eval;_.forEach(val.split(/\||\&|\(|\)|\!| /),function(item){if(item.length>0){val=val.replace(item,self._checkKey(item,_silent)?"true":"false")}});var arr=_.unique(val.split(/\||\&|\(|\)|\!|true|false| /));if(arr.length!=1||arr.length==1&&arr[0]!==""){throw new Error("Cannot parse flag; invalid string: `"+orig_val+"`")}return awfEval(val)>0},watch:function(key,_silent){var self=this,bool=this.isActive(key),flag=new FeatureToggler.Flag(bool),ping=_.throttle(function(){flag.setValue(self.isActive(key))},10,{leading:false}),endpoints=this.getEndpoints(key);_.forEach(endpoints,function(endpoint){if(typeof endpoint=="object"){_.forEach(endpoint,function(v,k){if(k in FeatureToggler.handlers){if("setupChangeHandler"in FeatureToggler.handlers[k]){try{FeatureToggler.handlers[k].setupChangeHandler(ping,v)}catch(er){console.warn("FeatureToggler handler `"+k+"` setupChangeHandler failed");throw er}}}else{if(!_silent){console.warn("The feature toggle watch on '"+key+"' needs to be handled by '"+k+"', but that type has not been adapted.")}}})}});return flag},hasSettled:function(val){return this.settled(val).state()=="resolved"},canBeSettled:function(val){return this.settled(val).state()!="rejected"},settledObject:function(val){var self=this,paths=this.getPaths(val),dfrs={};_.forEach(paths,function(path){var endpoint=self.getEndpoint(path);dfrs[path]={};var type=typeof endpoint;if(type=="object"){_.forEach(endpoint,function(v,k){if(k in FeatureToggler.handlers){dfrs[path][k]=$.Deferred();if("finalize"in FeatureToggler.handlers[k]){try{FeatureToggler.handlers[k].finalize(dfrs[path][k],v)}catch(er){console.warn("FeatureToggler handler `"+k+"` finalize failed");throw er}}else{dfrs[path][k].reject("no finalize method defined")}}else{console.warn("The feature toggle finalize on '"+path+"' needs to be handled by '"+k+"', but that type has not been adapted.")}})}else{dfrs[path][type]=$.Deferred();dfrs[path][type].resolve()}});return dfrs},settled:function(val){var res=this.settledObject(val),dfrs=[];_.forEach(res,function(handlers,path){_.forEach(handlers,function(dfr,name){dfrs.push(dfr)})});return $.when.apply($,dfrs)},logSettledObject:function(val){var res=this.settledObject(val),dfrs=[];console.group(this.settled(val).state());_.forEach(res,function(handlers,path){console.group(path);_.forEach(handlers,function(dfr,name){console.log(_.padRight(name,20),dfr.state())});console.groupEnd()});console.groupEnd();return this},apply:function(){if(!this._stylesheet){this._stylesheet=new awf.ui.Stylesheet}var css=this.css();this._stylesheet.css(css);return css},css:function(){var content=null,self=this;if(this._feature_data===null){content=""}else{var items=_.map(self._featureKeys(),function(key){return'[data-feature="'+(self._checkKey(key,true)?"!":"")+key+'"]'});content=items.join(",")+" { display:none!important; }"}return content},hasKey:function(key){return _.get(this._feature_data,key)!==undefined},_featureKeys:function(cwd){var self=this,obj=this._feature_data;if(cwd){obj=_.get(obj,cwd)}else{cwd=[]}var keys=_.keys(obj);_.forEach(keys,function(key){
var sub_obj=obj[key];if(_.isObject(sub_obj)&&!_.isArray(sub_obj)){keys=keys.concat(self._featureKeys(cwd.concat(key)))}});return _.map(keys,function(key){if(cwd.length===0)return key;else return cwd.concat([key]).join(".")})}});_.extend(FeatureToggler,{Flag:__webpack_require__(88),handlers:{}})},function(module,exports){module.exports=Flag;awf.util.use(awf.__.BaseModel).toCreate(Flag);function Flag(value){awf.__.BaseModel.call(this);var params=arguments.length>0?{value:value}:{};awf.util.mixin.properties(this,params,{value:{default:false,types:["boolean"]}})}_.extend(Flag.prototype,{runAndWatch:function(fn){fn.call(this,this.value);this.on("change:value",function(ev,val){fn.call(this,val)})}})},function(module,exports,__webpack_require__){__webpack_require__(90);__webpack_require__(91)},function(module,exports){_.extend(awf.__.FeatureToggler.handlers,{day:{check:function(obj){var now=new Date,day=now.getDay();switch(typeof obj){case"number":return day===obj;case"object":return _.contains(obj,day)}},setupChangeHandler:function(ping){var now=new Date,target=new Date;target.setHours(0);target.setMinutes(0);target.setSeconds(0);target.setMilliseconds(0);target.setDate(target.getDate()+1);var delta=target-now;setTimeout(function(){ping();setInterval(ping,1e3*60*60*24)},delta+10)}},five_second_rule:{check:function(bool){var now=new Date;return Math.floor(now.getSeconds()/5)%2===0===bool},setupChangeHandler:function(ping){var now=new Date,target=new Date;var seconds=(Math.floor(target.getSeconds()/5)+1)*5;target.setSeconds(seconds);target.setMilliseconds(0);var delta=target-now;setTimeout(function(){ping();setInterval(ping,1e3*5)},delta)}},console_var:{check:function(name){return!!window[name]},finalize:function(dfr,name){var iv;iv=setInterval(function(){if(name in window){dfr.resolve();clearInterval(iv)}},1e3)},setupChangeHandler:function(ping){ping();setInterval(ping,1e3*1)}},three_second_rule:{check:function(bool){var now=new Date;return Math.floor(now.getSeconds()/3)%2===0===bool},setupChangeHandler:function(ping){var now=new Date,target=new Date;var seconds=(Math.floor(target.getSeconds()/3)+1)*3;target.setSeconds(seconds);target.setMilliseconds(0);var delta=target-now;setTimeout(function(){ping();setInterval(ping,1e3*3)},delta)}},month:{check:function(obj){var now=new Date,month=now.getMonth();switch(typeof obj){case"number":return month===obj;case"object":return _.contains(obj,month)}},setupChangeHandler:function(ping){function setUpNextTimeout(){var now=new Date,target=new Date;target.setHours(0);target.setMinutes(0);target.setSeconds(0);target.setMilliseconds(0);target.setDate(1);target.setMonth(target.getMonth()+1);var delta=target-now;setTimeout(function(){ping();setUpNextTimeout()},delta)}setUpNextTimeout()}},morning:{check:function(bool){var now=new Date,ret=now.getHours()<12;return bool===ret},setupChangeHandler:function(ping){var now=new Date,target=new Date;if(now.getHours()<12){target.setHours(12)}else{target.setHours(0);target.setDate(target.getDate()+1)}target.setMinutes(0);target.setSeconds(0);target.setMilliseconds(0);var delta=target-now;setTimeout(function(){ping();setInterval(ping,1e3*60*60*12)},delta+10)}},afternoon:{check:function(bool){var now=new Date,ret=now.getHours()>11;return bool===ret},setupChangeHandler:function(ping){var now=new Date,target=new Date;if(now.getHours()<12){target.setHours(12)}else{target.setHours(0);target.setDate(target.getDate()+1)}target.setMinutes(0);target.setSeconds(0);target.setMilliseconds(0);var delta=target-now;setTimeout(function(){ping();setInterval(ping,1e3*60*60*12)},delta+10)}},date:{check:function(obj){var now=new Date,after=new Date(obj.after),before=new Date(obj.before);if("after"in obj&&!("before"in obj)){if(now>after){return true}}else if("before"in obj&&!("after"in obj)){if(now<before){return true}}else if("after"in obj&&"before"in obj){if(after<before){if(after<now&&now<before){return true}else{return false}}else{if(now<before||after<now){return true}else{return false}}}return false},setupChangeHandler:function(ping,obj){var now=new Date,after=new Date(obj.after),before=new Date(obj.before);if(now<before){setTimeout(ping,before-now)}if(now<after){setTimeout(ping,after-now)}}}})},function(module,exports){_.extend(awf.__.FeatureToggler.handlers,{local_storage_exists:{check:function(string){return!!localStorage.getItem(string)},finalize:function(dfr){dfr.resolve()}},local_storage_val:{check:function(obj){return localStorage.getItem(obj.key)==obj.val},finalize:function(dfr){dfr.resolve()}}})},function(module,exports,__webpack_require__){awf.__.Search=__webpack_require__(93);awf.__.SearchChannel=__webpack_require__(94);awf.__.LocalSearchChannel=__webpack_require__(95);awf.__.ResultsCollectionItem=__webpack_require__(96);awf.__.ResultsCollection=__webpack_require__(97);_.extend(awf,__webpack_require__(98))},function(module,exports){module.exports=Search;var Parent=awf.__.BaseModel;awf.util.use(Parent).toCreate(Search);function Search(params){params=params||{};this.channels={};this.results=new awf.__.ResultsCollection;awf.util.mixin.properties(this,params,{term:{default:null,types:["null","string"]}});Parent.apply(this,arguments)}_.extend(Search.prototype,{removeChannel:function(id){var channel=this.channels[id];delete this.channels[id];return channel},query:function(term){var self=this,dfr=$.Deferred();this.setTerm(term);if(term===null||term===""){this.results.removeAllItems();dfr.resolve("empty")}else if(term.indexOf("/")===0){this.triggerHandler("change:context","command");this.results.removeAllItems();console.info("Oooo.. issueing fancy commands from search are we?? Nice.");term=term.replace(/\/\s*/,"/");var space_index=term.indexOf(" "),intended_command=space_index==-1?term.substring(1).toLowerCase():term.substring(1,space_index).toLowerCase();var all_triggers=[];_.forEach(awf.command_channels,function(channel,id){all_triggers.push([channel.trigger,id]);if(channel.aliases){_.forEach(channel.aliases,function(alias){all_triggers.push([alias,id])})}});all_triggers=_.zipObject(all_triggers);if(space_index>-1){if(intended_command in all_triggers){var channel=awf.command_channels[all_triggers[intended_command]],text=term.substring(space_index+1),results=channel.getResults(text);_.forEach(results,function(result){awf.search.results.addItem({bucket:"command",channel:channel.id,data:_.defaults(result.data,{layout:"command"}),type:"default"})});this.triggerHandler("change:command",[channel.trigger])}else{awf.search.results.addItem({bucket:"command",channel:"system",data:{title:"`"+intended_command+"` is not a known command",description:"Type `/` to get a list of commands",on_click:function(){var val="/";awf.page.children.masthead.children.search.setValue(val).setTerm(val);var $input=awf.page.children.masthead.children.search._$input;$input.focus();$input[0].selectionStart=val.length;$input[0].selectionEnd=val.length},layout:"command"},type:"default"})}}else{var renderDescription=_.template("/{{command}} {{example}}");console.log("intended_command: ",intended_command);var alphabetized_keys=_.sortBy(_.keys(awf.command_channels));_.forEach(alphabetized_keys,function(id){var channel=awf.command_channels[id];if(intended_command.length===0||channel.trigger.indexOf(intended_command)===0){awf.search.results.addItem({bucket:"command",channel:"system",data:{title:"/"+channel.trigger,example:channel.example,description:channel.description,on_click:function(){var val="/"+channel.trigger+" ";awf.page.children.masthead.children.search.setValue(val).setTerm(val);var $input=awf.page.children.masthead.children.search._$input;$input.focus();$input[0].selectionStart=val.length;$input[0].selectionEnd=val.length},layout:"command"},type:"default"})}});if(intended_command.length>0&&awf.search.results.items.length===0){awf.search.results.addItem({bucket:"command",channel:"system",data:{title:"No commands start with `"+intended_command+"`",description:"Type `/` to get a list of commands",on_click:function(){var val="/";awf.page.children.masthead.children.search.setValue(val).setTerm(val);var $input=awf.page.children.masthead.children.search._$input;$input.focus();$input[0].selectionStart=val.length;$input[0].selectionEnd=val.length},layout:"command"},type:"default"})}}dfr.resolve("command")}else{this.triggerHandler("change:context","search");var goal=_.keys(this.channels).length,complete=0;if(goal===0){dfr.resolve("no channels")}_.forEach(this.channels,function(channel){channel.query(term).done(function(response){if(response.term===self.term){self.results.addItem(response.results)}else{console.warn("Query result term missmatch. current: `"+self.term+"` found: `"+response.term+"`")}}).fail(function(response){if(response){if("msg"in response)console.warn(response.msg);if("error"in response)console.error(response.error)}}).always(function(){complete++;if(complete==goal)dfr.resolve("results")})})}return dfr.promise()}})},function(module,exports){module.exports=SearchChannel;var Parent=awf.__.BaseModel;awf.util.use(Parent).toCreate(SearchChannel);function SearchChannel(params){params=params||{};this.onQuery=params.onQuery||this.onQuery||null;this.flag=params.flag||this.flag||null;this.bucket=params.bucket||this.bucket||null;this.result_type=params.result_type||this.result_type||"default";this.layout=params.layout||this.layout||null;Parent.apply(this,arguments)}_.extend(SearchChannel.prototype,{query:function(term){var self=this,query_dfr=$.Deferred();if(!this.flag||this.flag&&awf.flags.isActive(this.flag)){if(this.onQuery){try{var onquery_dfr=$.Deferred(),response=this.onQuery.call(this,term);if(!response||response===true){onquery_dfr.resolve([])}else if(_.isArray(response)){onquery_dfr.resolve(response)}else{response.done(onquery_dfr.resolve).fail(onquery_dfr.reject)}onquery_dfr.done(function(results){_.forEach(results,function(result){result.bucket=result.bucket||self.bucket;result.type=result.type||self.result_type;result.channel=self.id});query_dfr.resolve({term:term,results:results})}).fail(query_dfr.reject)}catch(er){query_dfr.reject({msg:"Channel `"+self.id+"` failed during onQuery call",error:er})}}else{query_dfr.reject({error:new Error("No onQuery function defined")})}}else{query_dfr.reject({msg:"Feature flagging has disabled this channel"})}return query_dfr.promise()}});_.extend(awf.__.Search.prototype,{addChannel:function(id,channel){if(id in this.channels){throw new Error("Cannot register search channel. ID is taken: `"+id+"`")}if(!(channel instanceof awf.__.SearchChannel)){channel=new awf.__.SearchChannel(channel)}channel.id=id;this.channels[id]=channel;return this}})},function(module,exports){module.exports=LocalSearchChannel;var Parent=awf.__.SearchChannel;awf.util.use(Parent).toCreate(LocalSearchChannel);function LocalSearchChannel(params){params=params||{};var self=this;self.map=params.map||self.map||"default";self.src=params.src||self.src||null;self.callback=params.callback||self.callback||null;self.error=null;self.worker_type=params.worker_type||self.worker_type||null;self.limit=params.limit||self.limit||null;self.filters=params.filters||self.filters||null;self.layout=params.layout||self.layout||null;self.service=new awf.__[self.callback?"CallbackService":"AjaxService"]({url:self.src,callback:self.callback,dataType:self.callback?"script":"json"});var type=self.worker_type||"default";if(!LocalSearchChannel.workers[type]){throw new Error("LocalSearchChannel does not have worker type `"+type+"`.")}self.worker=new LocalSearchChannel.workers[type]({data:self._maybeMapData(params.data)||self.data||null});Parent.call(self,params);self.load()}_.extend(LocalSearchChannel.prototype,{setData:function(data){var self=this,old_data=_.cloneDeep(self.data);data=data||null;self.data=data;self.worker.setData(self._maybeMapData(data),self.filters).done(function(dataset_response){self.triggerHandler("change:data",[data,old_data])}).fail(function(er){console.warn("setData failed");console.error(er)});return self},_maybeMapData:function(data){var map=this.map;if(data){if(map){if(typeof map=="string"){if(map in LocalSearchChannel.mapping_methods){map=LocalSearchChannel.mapping_methods[map]}else{console.warn("mapping method `"+map+"` is not defined");return null}}try{var mapped_data=_.map(data,map);return mapped_data}catch(er){console.warn("mapping function failed");return null}}else{return data}}else{return null}},load:function(){var self=this,dfr=$.Deferred();if(!this.service.ajax_params.url){dfr.reject("no url");return dfr.promise()}this.service.fetch().done(function(response){var map=self.map;if(map){if(typeof map=="string"){if(map in LocalSearchChannel.mapping_methods){map=LocalSearchChannel.mapping_methods[map]}else{dfr.reject({msg:"mapping method `"+map+"` is not defined"})}}try{response=_.map(response,map)}catch(er){dfr.reject({msg:"mapping function failed",error:er})}}dfr.resolve(response)}).fail(function(error){self.error=error;dfr.reject({msg:"service failed to load",error:error})});return dfr.done(function(response){self.worker.setData(response,self.filters).done(function(dataset_response){}).fail(function(er){console.warn("setData failed");console.error(er)})}).promise()},onQuery:function(term){var self=this,dfr=$.Deferred();if(this.data===null){dfr.reject({msg:"no data"})}else if(this.error){dfr.reject({msg:"load error",er:self.error})}else{try{self.worker.query(term).done(function(results){if(self.limit){results=results.slice(0,self.limit)}dfr.resolve(results)}).fail(function(er){dfr.reject({msg:"worker query failed",er:er})})}catch(er){dfr.reject({msg:"onQuery failed",error:er})}}return dfr.promise()}});_.extend(LocalSearchChannel,{workers:{default:awf.__.LocalSearchWorker},mapping_methods:{default:function(result){return{data:result}}}});_.extend(awf.__.Search.prototype,{addLocalChannel:function(id,channel){if(id in this.channels){throw new Error("Cannot register local search channel. ID is taken: `"+id+"`")}if(!(channel instanceof awf.__.SearchChannel)){channel=new awf.__.LocalSearchChannel(channel)}channel.id=id;this.channels[id]=channel;return this}})},function(module,exports){module.exports=ResultsCollectionItem;var Parent=awf.__.CollectionItem;awf.util.use(Parent).toCreate(ResultsCollectionItem);function ResultsCollectionItem(params){params=params||{};awf.util.mixin.properties(this,params,{id:{default:function(){return awf.util.randomID()},types:["string"]},type:{default:null,types:["null","string"]},channel:{default:null,types:["null","string"]},bucket:{default:null,types:["null","string"]},data:{default:null,types:["null","object"]}});Parent.apply(this,arguments)}},function(module,exports){module.exports=ResultsCollection;var Parent=awf.__.DB;awf.util.use(Parent).toCreate(ResultsCollection);function ResultsCollection(params){params=params||{};var self=this;this.keys=["bucket","channel","type"];Parent.apply(this,arguments)}_.extend(ResultsCollection.prototype,{Item:awf.__.ResultsCollectionItem})},function(module,exports){module.exports={registerSearchChannel:registerSearchChannel,registerLocalSearchChannel:registerLocalSearchChannel};awf.search_registry={standard:{},local:{}};function registerSearchChannel(id,params){awf.search_registry.standard[id]=params;console.info("Registering (standard) search channel: `"+id+"`");return this}function registerLocalSearchChannel(id,params){console.info("Registering (local) search channel: `"+id+"`");awf.search_registry.local[id]=params;return this}},function(module,exports){var command_channels={};function registerCommandChannel(id,params){if(id in command_channels){throw new Error("Cannot register command channel. ID is taken: `"+id+"`")}var channel=new CommandChannel(id,params);command_channels[id]=channel;return channel}function unregisterCommandChannel(id){if(id in command_channels){var channel=command_channels[id];delete command_channels[id];return channel}else{return null}}var Parent=awf.__.BaseObject;awf.util.use(Parent).toCreate(CommandChannel);function CommandChannel(id,params){params=params||{};var self=this;Parent.call(self);Object.defineProperty(this,"id",{enumerable:true,get:function(){return id}});self._result_handler=params.results;self._command_handler=params.handler;awf.util.mixin.properties(self,params,{trigger:{default:null,types:["null","string"]},aliases:{default:[],types:["array","string"],prep:function(val){if(!val){return[]}else if(typeof val=="string"){return[val]}else{return val}}},example:{default:null,types:["null","string"]},description:{default:null,types:["null","string"]}})}_.extend(CommandChannel.prototype,{run:function(text){try{this._command_handler.call(this,text)}catch(er){console.error(er);return false}return true},getResults:function(text){return this._result_handler.call(this,text)}});module.exports={Class:CommandChannel,register:registerCommandChannel,unregister:unregisterCommandChannel,channels:command_channels}},function(module,exports,__webpack_require__){module.exports=init;var extendJQueryEvents=__webpack_require__(3);init.sequence=[{id:"feature_toggles",fn:__webpack_require__(101)},{id:"metrics",fn:__webpack_require__(102)},{id:"search",fn:__webpack_require__(103)},{id:"user",fn:__webpack_require__(104)},{id:"page",fn:__webpack_require__(105)},{id:"app",fn:__webpack_require__(106)}];_.forEach(init.sequence,function(item){item.external_handlers={}});init.processDefaults=function(config){console.group("Processing Defaults");if(_.get(config,"page.masthead")){if("user"in config){_.set(config,"page.masthead.user",true);console.log("Auto-assigned `page.masthead.user` to `true`")}}if(_.get(config,"page.masthead.search")){if(!("buckets"in config.page.masthead.search)){config.page.masthead.search.buckets=[]}config.page.masthead.search.buckets.push({bucket:"command",label:"Commmands",limit:42})}console.groupEnd()};function init(config){var dfr=$.Deferred(),cursor=-1;if(awf.app.state!="started"&&"app"in config){console.warn("`app` was found in your config. These will only be honored through the app compose/start flow.")}if(awf.app.state=="available"){awf.app.setState("unavailable")}awf.app.experience_blockers={};if(!config){throw new Error("Cannot initialize awf with this composition object: ",config)}if(!("id"in config)){throw new Error("Cannot initialize awf without a configured `id`.")}awf.app.id=config.id;var current_step;function callNextSequenceItem(){if(++cursor<init.sequence.length){current_step=init.sequence[cursor];init.progress.triggerHandler("change:complete",cursor);console.groupCollapsed("init sequence: `"+current_step.id+"`");console.time(current_step.id+" - init step");var init_step_hold=$.Deferred();init_step_hold.always(function(){console.timeEnd(current_step.id+" - init step")}).done(function(response){console.log(response);console.groupEnd();callNextSequenceItem()}).fail(function(er){console.error(er);console.groupEnd();init.progress.triggerHandler("fail",er);dfr.reject("init step failed: `"+current_step.id+"`")});current_step.fn.call(awf.app,config[current_step.id]||null,init_step_hold,current_step.external_handlers);if(init_step_hold.state()=="pending"){console.log("blocking...")}}else{dfr.resolve();init.progress.triggerHandler("change:complete",cursor)}}console.groupCollapsed("init sequence");console.time("init sequence");init.processDefaults(config);dfr.always(function(){console.timeEnd(current_step.id+" - init step");console.groupEnd();console.timeEnd("init sequence")});init.progress.triggerHandler("change:sequence",[init.sequence]);callNextSequenceItem();return dfr.promise()}init.progress={};extendJQueryEvents(init.progress);awf.registerExternalInitHandler=__webpack_require__(111);init.extend=function(obj){_.forEach(obj,function(val,key){console.warn("awf.init.extend still in use: ",key)})}},function(module,exports){module.exports=initFeatureToggles;function initFeatureToggles(feature_toggles_config,dfr_hold,external_handlers){awf.flags=new awf.__.FeatureToggler;if(feature_toggles_config){try{console.log("initializing awf.flags using url `"+feature_toggles_config.url+"`");awf.flags.init(feature_toggles_config.url).done(function(response){dfr_hold.resolve("feature_toggles data has loaded")}).fail(dfr_hold.reject)}catch(er){console.warn("awf.flags.init() failed");dfr_hold.reject(er)}if(!feature_toggles_config.blocking){dfr_hold.resolve("non-blocking")}}else{dfr_hold.resolve("not configured")}}},function(module,exports){module.exports=initMetrics;awf.tagMetric=function(){console.warn("Metrics has not yet been initialized.")};awf.createMetricTagger=function(){console.warn("Metrics has not yet been initialized.");return function(){console.warn("Metrics has not yet been initialized.")}};awf.metrics=new awf.__.Metrics;function initMetrics(metrics_config,dfr_hold,external_handlers){awf.metrics.declareReady();if(metrics_config){var external_holds=[];console.group("external handlers");_.forEach(metrics_config,function(handler_config,key){if(key in external_handlers){if("flag"in handler_config&&!awf.flags.isActive(handler_config.flag)){console.log("Skipping metrics external handler `"+key+"` due to feature flag `"+handler_config.flag+"`.")}else{var dfr=$.Deferred();dfr.done(function(response){console.log("metrics external handler `"+key+"` has been resolved:");console.log(response)}).fail(function(er){console.warn("metrics external handler `"+key+"` has been rejected:");console.error(er)});console.group(key);external_handlers[key].call(null,dfr,handler_config);if(dfr.state()=="pending"){console.log("blocking")}console.groupEnd();external_holds.push(dfr)}}else{console.log("No external metrics handler was registered for `"+key+"`.")}});console.groupEnd();$.when.apply($,external_holds).done(dfr_hold.resolve).fail(dfr_hold.reject)}else{dfr_hold.resolve("not configured")}}},function(module,exports){module.exports=initSearch;function initSearch(config,dfr_hold,external_handlers){awf.search=new awf.__.Search;console.group("Standard Search Channels");_.forEach(awf.search_registry.standard,function(params,id){console.log(id);awf.search.addChannel(id,params)});console.groupEnd();console.group("Local Search Channels");_.forEach(awf.search_registry.local,function(params,id){console.log(id);awf.search.addLocalChannel(id,params)});console.groupEnd();if(config){dfr_hold.reject("initSearch() has not yet been refactored")}else{dfr_hold.resolve("not configured")}}},function(module,exports){module.exports=initUser;function initUser(user_config,dfr_hold,external_handlers){if(user_config){if(awf.flags){awf.user.authentication.done(function(){awf.flags.apply()})}var external_holds=[];console.group("external handlers");_.forEach(user_config,function(handler_config,key){if(key in external_handlers){if("flag"in handler_config&&!awf.flags.isActive(handler_config.flag)){console.log("Skipping user external handler `"+key+"` due to feature flag `"+handler_config.flag+"`.")}else{var dfr=$.Deferred();dfr.done(function(response){console.log("user external handler `"+key+"` has been resolved:");console.log(response)}).fail(function(er){console.warn("user external handler `"+key+"` has been rejected:");console.error(er)});console.group(key);external_handlers[key].call(null,dfr,handler_config);if(dfr.state()=="pending"){console.log("blocking")}console.groupEnd();external_holds.push(dfr)}}else{console.warn("No external user handler was registered for `"+key+"`.")}});console.groupEnd();$.when.apply($,external_holds).done(dfr_hold.resolve).fail(dfr_hold.reject)}else{awf.user.authentication.reject("no user configured");dfr_hold.resolve("not configured")}}},function(module,exports){module.exports=initPage;function initPage(config,dfr_hold,external_handlers){if(config){if(config===true){config={}}if("jqueryI18next"in window){awf.i18n=new awf.__.I18n(_.defaults(config.i18n,{lng:awf.util.info.language.lc||"en",ns:awf.util.info.language.cc||"us"}))}awf.badge_db=new awf.__.BadgeDB;_.defaults(config,{parent:$("body")});if("i18n"in config){delete config.i18n}awf.page=new awf.ui.Page(config);console.time("custom font-size");var font_size_pref=awf.construct.getOrCreate("font_size");font_size_pref.fetch(-1).done(function(val){if(val!==null){awf.page.setFontSize(val)}awf.page.on("change:font_size",function(ev,fs){font_size_pref.setValue(fs).save()})}).always(function(){console.timeEnd("custom font-size")});console.time("custom font");var font_pref=awf.construct.getOrCreate("font");font_pref.fetch(-1).done(function(val){if(val!==null){awf.page.setFont(val)}awf.page.on("change:font",function(ev,f){font_pref.setValue(f).save()})}).always(function(){console.timeEnd("custom font")});dfr_hold.resolve("done")}else{dfr_hold.resolve("not configured")}}},function(module,exports,__webpack_require__){module.exports=initApp;function initApp(app_config,dfr_app_hold,external_handlers){var self=this;if(app_config){if("experiences"in app_config){console.time("registering experiences");_.forEach(app_config.experiences,function(params,id){self.registerExperience(id,params)});console.time("registering experiences")}awf.app.cog_types=app_config.cogs;console.time("initializing app cogs");awf.app.initializeCogs();console.timeEnd("initializing app cogs");if(_.get(awf,"page.children.masthead.children.trays")){console.time("masthead trays");if(_.get(awf,"page.themes.items")){console.group("Creating Settings Cog");var settings_cog=new awf.__.Cog({id:"settings",views:{masthead_tray:{label:"Settings",i18n_label:"awf.page.masthead.trays.settings.label",icon:"icon-awf-gear",init:function(){this.namespace="masthead-tray"},render:function($container){var self=this;if(_.get(awf,"page.themes.items")){self.theme_switcher=new awf.ui.ThemeSwitcher({themes:awf.page.themes.items,parent:$container});self.theme_switcher.renderCurrent(awf.page.themes.current_theme);self.theme_switcher.on("select-theme."+this.namespace,function(e,key){awf.page.themes.setTheme(key)}).on("apply-theme."+this.namespace,function(e,key){awf.page.themes.applyTheme(key)}).on("reset-theme."+this.namespace,function(){awf.page.themes.applyTheme()});awf.page.themes.on("change."+this.namespace,function(e,key){self.theme_switcher.renderCurrent(key)})}},destroy:function(){console.log("Destroying theme switcher");if(this.theme_switcher){this.theme_switcher.destroy();delete this.theme_switcher}if(awf.page.themes){awf.page.themes.off("change."+this.namespace)}}}}});console.groupEnd();console.group("Adding Settings cog to masthead trays.");awf.page.children.masthead.children.trays.addItem(settings_cog);console.groupEnd()}else{console.log("no settings configured")}if("masthead_trays"in app_config){console.group("Adding app-level cogs: Masthead Trays");_.forEach(app_config.masthead_trays,function(cog_id){console.log("cog_id: ",cog_id);if(_.contains(awf.app.cog_types,cog_id)){var cog;console.group("Setting up ",cog_id);try{cog=awf.app.getOrCreateCog(cog_id)}catch(er){console.warn("Cannot get cog: ",cog_id);console.error(er)}console.groupEnd();if(!cog.isAvailable()){console.info("The `"+cog.type+"` cog is disabled from the `"+cog.flag+"` feature flag.")}else if(cog.isViewAvailable("masthead_tray")===null){console.info("The `"+cog.type+"` cog's masthead_tray view does not exist.")}else if(cog.isViewAvailable("masthead_tray")===false){console.info("The `"+cog.type+"` cog's masthead_tray view is disabled from the `"+cog.views.masthead_tray.flag+"` feature flag.")}else{try{awf.page.children.masthead.children.trays.addItem(cog)}catch(er){console.warn("Could not add cog `"+cog.id+"` to the Masthead trays.");console.error(er)}}}else{console.warn(_.template("Masthead tray `{{cog_id}}` was not listed in the available app-level cogs, therefore it will not be added.")({cog_id:cog_id}))}});console.groupEnd()}else{console.log("no masthead_trays configured")}console.time("masthead trays")}else{console.info("Skipping Masthead Trays: awf.page.children.masthead.children.trays does not exist.")}if(_.get(awf,"page")){console.time("page trays");if("page_trays"in app_config){console.group("Adding app-level cogs: Page Trays");_.forEach(app_config.page_trays,function(cog_id){console.log("cog_id: ",cog_id);if(_.contains(awf.app.cog_types,cog_id)){var cog;console.group("Setting up ",cog_id);try{cog=awf.app.getOrCreateCog(cog_id)}catch(er){console.warn("Cannot get cog: ",cog_id);console.error(er)}console.groupEnd();if(!cog.isAvailable()){console.info("The `"+cog.type+"` cog is disabled from the `"+cog.flag+"` feature flag.")}else if(cog.isViewAvailable("medium")===null){console.info("The `"+cog.type+"` cog's medium view does not exist.")}else if(cog.isViewAvailable("medium")===false){console.info("The `"+cog.type+"` cog's medium view is disabled from the `"+cog.views.medium.flag+"` feature flag.")}else{try{awf.page.addTray(cog)}catch(er){console.warn("Could not add cog `"+cog.id+"` to the Page trays.");console.error(er)}}}else{console.warn(_.template("Page tray `{{cog_id}}` was not listed in the available app-level cogs, therefore it will not be added.")({cog_id:cog_id}))}});console.groupEnd()}else{console.log("no page_trays configured")}console.timeEnd("page trays")}else{console.info("Skipping Page Trays: awf.page does not exist.")}console.time("construct");if(awf.app.id){awf.construct.setAppid(awf.app.id);if(typeof app_config.customization=="object"){if(typeof app_config.customization.service=="object"){if(app_config.customization.service.timeout){awf.construct.setTimeout(app_config.customization.service.timeout)}if(typeof app_config.customization.service.endpoint=="string"){awf.construct.setEndpoint(app_config.customization.service.endpoint);if(_.get(awf,"user.services.oauth")){if(app_config.customization.service.w3id_pilot_endpoint){awf.construct.setEndpoint(app_config.customization.service.w3id_pilot_endpoint)}}console.log("Fetching all construct service items...");awf.construct.fetchAll(-1).always(function(){console.timeEnd("construct")}).done(function(){_.forEach(awf.construct.toJSON(),function(val,key){if(key.indexOf("experience : ")===0){awf.util.setStoredObject(key,val)}})})}else{console.timeEnd("construct");console.info("Cannot initialize awf.construct. `config.app.customization.service.endpoint` was not defined.")}}else{console.timeEnd("construct");console.info("Cannot initialize awf.construct. `config.app.customization.service` was not defined.")}}else{console.timeEnd("construct");console.info("Cannot initialize awf.construct. `config.app.customization` was not defined.")}}else{console.timeEnd("construct");console.warn("Cannot instantiate awf.construct: awf.app.id is not defined")}console.time("custom name");$.when(awf.construct.ready,awf.user.authentication).done(function(){console.log("Construct and User!! :");var custom_name_params=awf.page.children.masthead.custom_name_params,masthead=awf.page.children.masthead;if(masthead.customizable_name_spinner){masthead.customizable_name_spinner.destroy()}if(masthead.customizable_name){console.log("Adding custom_name");masthead.children.custom_name=new awf.ui.CustomName({parent:masthead._$brand_name,name:masthead.name});masthead.children.custom_name.pref=awf.construct.getOrCreate("custom_name");_.extend(masthead.children.custom_name,{cancelEdit:function(){this._$input.val("").blur();masthead.$el.removeClass("edit-name-active");this._$button.focus();this.triggerHandler("edit:cancel")},startEdit:function(){var self=this;if(self.allow_edit){var value=self.cleanValue(self._$name.text());self._$input.val(value);masthead.$el.addClass("edit-name-active");setTimeout(function(){self._$input.select()},250);self.triggerHandler("edit:start");self.setRemainingCharCount()}},setRemainingCharCount:function(){var count=this.max_length;if(count)this._$count.html(count-this._$input.val().length)},cleanValue:function(value){var max_char=this.max_length;value=value.trim();return max_char&&value.length>max_char?value.substring(0,max_char):value},saveChanges:function(){var self=this,value=self.cleanValue(self._$input.val()),msg_saving="saving...",msg_saved="saved!",msg_save_failed="save failed. :(";if(awf.can_use_i18next){msg_saving=i18next.t("awf.page.masthead.custom_name.saving");
msg_saved=i18next.t("awf.page.masthead.custom_name.saved");msg_save_failed=i18next.t("awf.page.masthead.custom_name.save_faled")}if(value){var deferred=masthead.children.custom_name.pref.setValue(value).save();self._$name.html("<strong>"+msg_saving+"</strong>");self.setAllowEdit(false);deferred.done(function(){self._$name.html("<strong>"+msg_saved+"</strong>");_.delay(function(){self._$name.hide().html(_.escape(value)).fadeIn(500)},500)}).fail(function(){self._$name.html("<strong>"+msg_save_failed+"</strong>");_.delay(function(){self._$name.hide();self.updateMastheadName();self._$name.fadeIn(500)},1e3)}).always(function(){_.delay(function(){self.setAllowEdit(true);self._$button.focus();self.triggerHandler("save:finished")},1100)})}self.cancelEdit()},updateMastheadName:function(){if(awf.user.is_authenticated){var custom_name_value=_.escape(masthead.children.custom_name.pref.value);if(!(custom_name_value===""||custom_name_value===null)){this.setName(custom_name_value);this.triggerHandler("update:name",custom_name_value)}else{this.setName(null);this.triggerHandler("update:name",null)}this.setAllowEdit(true)}else{this.setAllowEdit(false)}}});masthead.children.custom_name.on("click:cancel keyup:esc",masthead.children.custom_name.cancelEdit).on("click:edit",masthead.children.custom_name.startEdit).on("click:save keyup:enter",masthead.children.custom_name.saveChanges).on("input:keyup",masthead.children.custom_name.setRemainingCharCount);masthead.children.custom_name.pref.on("change:value",function(){masthead.children.custom_name.updateMastheadName()});$(window).on("resize.custom_name",function(){if(masthead.$el.hasClass("edit-name-active")){masthead.children.custom_name.cancelEdit()}});masthead.children.custom_name.updateMastheadName()}else{console.log("not configured: `custom_name`")}}).fail(function(er){console.log("NOPE!! Construct and User!! :");console.error(er);if(_.get(awf,"page.children.masthead.customizable_name_spinner")){awf.page.children.masthead.customizable_name_spinner.destroy()}if(_.get(awf,"page.children.masthead")){awf.page.children.masthead.setCustomizableName(false).setName(awf.page.name)}if(awf.user.is_authenticated){var message="Cannot retrieve the application's custom name";if(awf.can_use_i18next){message=i18next.t("awf.page.masthead.custom_name.error_message")}awf.app.postMessage("error",message,false).andDismissIn(5)}console.log("cannot configure `custom_name`, construct service failed to load.")}).always(function(){console.timeEnd("custom name")});console.time("planting experience seeds");console.group("Planting experience seeds");var default_order=_.get(app_config,"leftnav.default_order");if(default_order){_.forEach(default_order,function(item,i){if(typeof item=="string"){item={type:item,id:item}}if(item.type in awf.app.registered_experiences){self.potential_experience_seeds.push(item);console.log(_.last(self.potential_experience_seeds))}else{console.warn("Cannot add experience `"+item.id+"` to potential experience list: It has not been registered.")}})}console.timeEnd("planting experience seeds");console.groupEnd();(function(){self.starting_experience=app_config.original_starting_experience=app_config.starting_experience;var url_obj=awf.util.getDeepLinkValues(window.location.href);if(!url_obj.experience){return false}if(url_obj.experience){var experiences=awf.app.getExperiences();console.log("experiences: ",experiences);if(url_obj.experience in experiences){console.log("A deep-link was declared: `"+url_obj.experience+"`.");var experience_type=experiences[url_obj.experience],flag=awf.app.registered_experiences[experience_type].flag,deep_linked_dfr=$.Deferred();awf.app.experience_blockers.deeplink=deep_linked_dfr;awf.page._$content.html(_.template(__webpack_require__(107))({id:url_obj.experience}));if(flag){var can_be_settled=awf.flags.canBeSettled(flag);if(can_be_settled){awf.flags.settled(flag).always(deep_linked_dfr.resolve)}else{deep_linked_dfr.resolve("experience flag will never resolve")}}else{deep_linked_dfr.resolve("no flag")}console.log("The starting experience will likely be set to: `"+url_obj.experience+"` from type `"+experience_type+"`...");deep_linked_dfr.done(function(){app_config.starting_experience=url_obj.experience}).always(function(){console.log("Final starting_experience: `"+app_config.starting_experience+"`")})}else{console.warn("A deep-link was declared, but `"+url_obj.experience+"` is not a known experience id.");app_config.starting_experience=url_obj.experience}if(false){var shallow=window.location.href.substring(0,window.location.href.indexOf("#"))+awf.util.hashParams(null);window.location=shallow}}})();if(awf.app.state=="started"||awf.app.state=="initializing"){awf.app.experience_settlers={};_.forEach(self.potential_experience_seeds,function(seed){var flag=self.registered_experiences[seed.type].flag;if(flag){var dfr=$.Deferred();awf.flags.settled(self.registered_experiences[seed.type].flag).always(dfr.resolve);awf.app.experience_settlers[seed.id]=dfr}});awf.app.logExperienceBlockers();awf.app.logExperienceSettlers();var experience_dfr=$.when.apply($,_.values(self.experience_blockers)),is_tracking=experience_dfr.state()=="pending";if(is_tracking){console.time("experience blocking")}experience_dfr.always(function(){if(is_tracking){console.timeEnd("experience blocking")}}).done(function(){_.forEach(self.potential_experience_seeds,function(seed){self.kinetic_experience_seeds.push(seed);_.last(self.kinetic_experience_seeds).potential=seed;seed.kinetic=_.last(self.kinetic_experience_seeds)});if(awf.page.children.leftnav){console.group("Connecting leftnav to experiences");console.time("rendering leftnav");$.when.apply($,_.values(awf.app.experience_settlers)).done(function(){if(_.get(awf,"page.leftnav_spinner.$el")){awf.page.leftnav_spinner.destroy()}});console.groupCollapsed("Seeds");_.forEach(self.potential_experience_seeds,function(seed){var experience_params=self.registered_experiences[seed.type];console.log(_.template("Adding experience to leftnav: `{{label}}`")({label:experience_params.label}));var leftnav_item=awf.page.children.leftnav.addItem({label:experience_params.label,icon:experience_params.icon,i18n:{label:experience_params.i18n_label},active_icon:experience_params.active_icon});leftnav_item.experience_id=seed.id;leftnav_item.on("change:active_state",function(ev,val){if(val===true){console.log("leftnav item clicked. Exp id:",this.experience_id);try{self.setCurrentExperience(this.experience_id)}catch(er){console.warn("Could not set current experience to `"+this.experience_id+"`");dfr_app_hold.reject(er);throw er}}});if("flag"in experience_params){awf.flags.runAndWatch(experience_params.flag,function(is_active){console.log("Experience `"+seed.id+"`'s is_active: "+is_active);if(is_active){leftnav_item.$el.show();console.log(_.template('Showing leftnav item `{{id}}`: "{{label}}"')({label:experience_params.label,id:seed.id}))}else{leftnav_item.$el.hide();console.log(_.template('Hiding leftnav item `{{id}}`: "{{label}}"')({label:experience_params.label,id:seed.id}));if(seed.id===_.get(awf,"app.experience.id")){if(app_config.starting_experience){var index=_.indexOf(_.map(awf.page.children.leftnav.items,"experience_id"),app_config.starting_experience);awf.page.children.leftnav.setActiveIndex(index)}}}})}});console.groupEnd();self.on("change:experience",function(ev,index){console.group("Switching to experience ["+index+"]");var seed=self.kinetic_experience_seeds[index];console.log(seed);awf.page.children.leftnav.setActiveIndex(index);console.groupEnd()});console.timeEnd("rendering leftnav");console.groupEnd();console.time("launching default experience");console.log("starting_experience: ",app_config.starting_experience);if(app_config.starting_experience){var experiences=self.getExperiences(),experience_type=experiences[app_config.starting_experience],experience=self.registered_experiences[experience_type],$content=awf.page._$content,showing_custom_message=false;if(experience){var flag=experience.flag,can_show_experience=true;if(flag){if(!awf.flags.isActive(flag)){can_show_experience=false;showing_custom_message=true;if(awf.user.is_authenticated){$content.html(__webpack_require__(108))}else{$content.html(__webpack_require__(109))}}}if(can_show_experience){self.setCurrentExperience(app_config.starting_experience)}}else{showing_custom_message=true;var render=_.template(__webpack_require__(110));$content.html(render({id:app_config.starting_experience}))}if(showing_custom_message&&$.fn.localize){$content.localize()}}console.timeEnd("launching default experience")}else{console.group("Switching to experience `"+app_config.starting_experience+"`");try{self.setCurrentExperience(app_config.starting_experience)}catch(er){console.warn("Could not set current experience to `"+app_config.starting_experience+"`");dfr_app_hold.reject(er);throw er}console.groupEnd()}}).fail(function(){})}console.group("Events");console.time("events");_.forEach(awf.app.events,function(params,key){if(awf.util.event.check(key)){console.log("Not running event `"+key+"`, it has already been claimed.")}else{if(!("flag"in params)||params.flag&&awf.flags.isActive(params.flag)){var now=new Date,start=new Date(params.start);if(now>=start){var end=new Date(params.end);if(now<end){console.group("Running event `"+key+"`.");awf.util.event.claim(key);try{params.callback.call(params)}catch(er){console.warn("Event `"+key+"` failed.");console.error(er)}console.groupEnd()}else{console.log("Not running event `"+key+"`, it's end time has passed.")}}else{console.log("Not running event `"+key+"`, it's start time has not yet happened.")}}else{console.log("Not running event `"+key+"`, feature flag has prevented it.")}}});console.timeEnd("events");console.groupEnd();console.time("custom background");var bg_img_pref=awf.construct.getOrCreate("background"),bg_img_dfr=bg_img_pref.fetch(-1).done(function(val){if(val!==null){awf.page.setBackground(val)}awf.page.on("change:background",function(ev,bg){bg_img_pref.setValue(bg).save()})});var bg_pos_pref=awf.construct.getOrCreate("background-position"),bg_pos_dfr=bg_pos_pref.fetch(-1).done(function(val){if(val!==null){awf.page.setBackgroundPosition(val)}awf.page.on("change:background_position",function(ev,bg_pos){bg_pos_pref.setValue(bg_pos).save()})});$.when(bg_img_dfr,bg_pos_dfr).always(function(){console.timeEnd("custom background")});dfr_app_hold.resolve("app init complete")}else{dfr_app_hold.resolve("not configured")}}},function(module,exports){module.exports='<div class="experience-load-message-wrapper">\n\t<div class="experience-load-message -background-base -box-shadow-base">\n\t\t<p>\n\t\t\t<span data-i18n="awf.app.experience.loading">Loading deep linked experience:</span>\n\t\t\t<span>`{{id}}`</span>\n\t\t</p>\n\t</div>\n</div>\n'},function(module,exports){module.exports='<div class="experience-load-message-wrapper">\n\t<div class="experience-load-message -background-base -box-shadow-base">\n\t\t<p data-i18n="awf.app.experience.blocked">The experience you are trying to load has been blocked.</p>\n\t</div>\n</div>\n'},function(module,exports){module.exports='<div class="experience-load-message-wrapper">\n\t<div class="experience-load-message -background-base -box-shadow-base">\n\t\t<p data-i18n="awf.app.experience.blocked">The experience you are trying to load has been blocked.</p>\n\t\t<p>\n\t\t\t<span data-i18n="awf.app.experience.need_sign_in_prefix">It\'s possible that you need to</span>\n\t\t\t<a href="javascript:awf.user.login();" data-i18n="awf.common.sign_in">sign in</a>.</p>\n\t</div>\n</div>\n'},function(module,exports){module.exports='<div class="experience-load-message-wrapper">\n\t<div class="experience-load-message -background-base -box-shadow-base">\n\t\t<p>\n\t\t\t<span data-i18n="awf.app.experience.dne.p1">What??</span>\n\t\t\t<span>`{{id}}`</span>\n\t\t\t<span data-i18n="awf.app.experience.dne.p2">doesn\'t exist!!</span>\n\t\t</p>\n\t</div>\n</div>\n'},function(module,exports){module.exports=registerExternalInitHandler;function registerExternalInitHandler(step,id,handler){var steps=_.map(awf.init.sequence,"id"),step_index=_.indexOf(_.map(awf.init.sequence,"id"),step);if(step_index==-1){throw new Error(_.template("Cannot register external init handler: `{{step}}`. That sequence step does not exist.")({step:step}))}if(id in awf.init.sequence[step_index].external_handlers){throw new Error(_.template("Cannot register external init `{{step}}` handler for `{{id}}`. That id is already taken for that step.")({step:step,id:id}))}awf.init.sequence[step_index].external_handlers[id]=handler}},function(module,exports,__webpack_require__){awf.ui={};awf.ui.Base=__webpack_require__(113);awf.ui.Spinner=__webpack_require__(115);awf.ui.Page=__webpack_require__(116);awf.ui.Badge=__webpack_require__(119);awf.ui.FixedHeaderFooter=__webpack_require__(121);awf.ui.Card=__webpack_require__(123);awf.ui.CollectionItem=__webpack_require__(125);awf.ui.Collection=__webpack_require__(126);awf.ui.Dropdown=__webpack_require__(127);awf.ui.GridItem=__webpack_require__(129);awf.ui.Grid=__webpack_require__(131);awf.ui.ArrangeableGrid=__webpack_require__(133);awf.ui.IconCard=__webpack_require__(134);awf.ui.ImageCircle=__webpack_require__(136);awf.ui.Layout=__webpack_require__(138);__webpack_require__(139);awf.ui.Masthead=__webpack_require__(152);awf.ui.MastheadUser=__webpack_require__(154);awf.ui.CustomName=__webpack_require__(156);awf.ui.FooterItem=__webpack_require__(158);awf.ui.Footer=__webpack_require__(160);awf.ui.Button=__webpack_require__(162);awf.ui.MastheadTrayCollection=__webpack_require__(164);awf.ui.Message=__webpack_require__(167);awf.ui.Modal=__webpack_require__(169);awf.ui.Search=__webpack_require__(171);awf.ui.BucketItem=__webpack_require__(173);awf.ui.Bucket=__webpack_require__(177);awf.ui.Results=__webpack_require__(179);awf.ui.Settings=__webpack_require__(181);awf.ui.Sitelinks=__webpack_require__(183);awf.ui.Megamenu=__webpack_require__(185);awf.ui.Stylesheet=__webpack_require__(187);awf.ui.TitledCard=__webpack_require__(188);awf.ui.LargeCard=__webpack_require__(190);awf.ui.Notifications=__webpack_require__(191);awf.ui.Themes=__webpack_require__(193);awf.ui.ThemeSwitcher=__webpack_require__(195);awf.ui.Tray=__webpack_require__(199);awf.ui.VerticalNavItem=__webpack_require__(201);awf.ui.VerticalNav=__webpack_require__(203);__webpack_require__(205)},function(module,exports,__webpack_require__){module.exports=BaseUI;var use=__webpack_require__(22),loader_template=__webpack_require__(114),BaseObject=awf.__.BaseObject;use(BaseObject).toCreate(BaseUI);function BaseUI(params){BaseObject.apply(this,arguments);params=params||{};this.$el=null;this.loader_template=params.loader_template||this.loader_template||loader_template;this.template=params.template||this.template||null;this._default_parent=params.parent||this._default_parent||null;this.children=params.children||this.children||{};this.loading=params.loading||this.loading||false;this.feature_key=params.feature_key||this.feature_key||null;this.attributes=params.attributes||this.attributes||null;this._instance_id=awf.util.randomID();this.renderHandler=params.renderHandler||null;_.extend(awf.util.mixin.properties.special_cases,{i18n:{prop_key:"i18n",get:"getI18n",set:"setI18n"}});awf.util.mixin.properties(this,params,{id:{default:null,types:["null","string"],renderHandler:function(val){this.$el.attr("id",val)}},i18n:{default:null,types:["null","string","array","object"],renderHandler:function(val){var self=this;awf.i18n_ready.done(function(){if(!self.$el){console.warn("Not applying i18n attribute when no $el is defined on `"+self.constructor.name+"`");return false}if("i18n"in awf){awf.i18n.off("apply:language."+self._instance_id)}if(_.isArray(val)){val=val.length>0?val.join(";"):null}if(val===null){self.$el.removeAttr("data-i18n")}else{switch(typeof val){case"object":_.forEach(val,function(v,k){if(v!==undefined){var fn_name=_.camelCase("set "+k);if(fn_name in self){if("i18n"in awf){try{var val=i18next.t(v);console.log("-- i18n -- calling `"+fn_name+"` on `"+self.constructor.name+"` via `"+v+"` to: `"+val+"`");self[fn_name](val)}catch(er){console.warn(_.template("Could not apply translation: `{{path}}`")({path:v}));console.warn(er)}awf.i18n.on("apply:language."+self._instance_id,function(){try{var val=i18next.t(v);console.log("-- i18n -- triggered `"+fn_name+"` via `"+v+"` to: `"+val+"`");self[fn_name](val)}catch(er){console.warn(_.template("Could not apply translation: `{{path}}`")({path:v}));console.warn(er)}})}else{console.warn("Cannot bind `"+fn_name+"` to `"+self.constructor.name+"`: i18n is not an object within awf")}}else{console.warn("`"+fn_name+"` was not found, and could not be called.")}}});break;default:self.$el.attr("data-i18n",val)}}self.localize()}).fail(function(){console.warn("Cannot handle property `i18n` in `"+self.constructor.name+"`: awf.i18n_ready was rejected")})}}});if(params.render!==false){this.render();if(params.cn){this.$el.addClass(params.cn)}}}_.extend(BaseUI.prototype,{render:function(){var self=this;this._rendered_as_loading=!!this.loading;var needs_to_be_replaced=false,$active_parent=null,child_index=null;if(this.$el&&this.$el.closest("body").length===1){needs_to_be_replaced=true;$active_parent=this.$el.parent();child_index=this.$el.index()}if(this.$el){this.destroy()}var template=this.loading?this.loader_template:this.template;switch(typeof template){case undefined:case"object":template="<div></div>";break;case"string":if(template.length>0&&_.trim(template).charAt(0)!="<")throw new Error('Cannot render UI Object. `template` must start with "<"');break;default:throw new Error("Cannot render UI Object. `template` must be a string, null, or undefined. Found: "+typeof template)}this.$el=$(template);this.$el.data("component",this);if(this.feature_key){this.setFeatureKey(this.feature_key)}if(this.attributes){this.setAttributes(this.attributes)}if(needs_to_be_replaced){if(child_index===0){$active_parent.prepend(this.$el)}else{$active_parent.children().eq(child_index-1).after(this.$el)}}else if(this._default_parent){var parent=this._default_parent;if(typeof parent=="function"){parent=parent.call(self)}if(parent){if(parent.length==1){this.$el.appendTo(parent)}else{throw new Error("Cannot automatically append to parent when the parent count is not 1. "+parent.length+" were found.")}}}if(this.renderHandler&&typeof this.renderHandler=="function"){this.renderHandler.call(this)}if(!this.loading){_.forEach(this.children,function(child){child.render()})}this.triggerHandler(this.loading?"render-loader":"render");this.localize();return this},localize:function(){if($.fn.localize){this.$el.localize()}return this},renderOnce:function(){if(this.$el===null||this._rendered_as_loading)this.render.apply(this,arguments);else console.log("renderOnce opted out for: ",this.constructor.name);return this},destroy:function(){var self=this;_.forEach(this.children,function(child){if(child){child.destroy()}});if(this.$el)this.$el.remove();_.forEach(_.keys(this),function(key){if(key.indexOf("_actual_")===0)delete self[key]});this.$el=null;this.triggerHandler("destroy");return this},outerHTML:function(){var $wrapper=$("<div></div>");$wrapper.append(this.$el);return $wrapper.html()},setLoading:function(new_val){this.loading=new_val;return this.render()},setFeatureKey:function(key){this.feature_key=key;this.$el.attr("data-feature",this.feature_key);return this},assignDefaultParent:function($elem){this._default_parent=$elem;return this},setAttributes:function(attributes){var self=this;_.forEach(attributes,function(value,key){self.$el.attr(key,value)});return self}});_.extend(BaseUI,{generateDomProperties:function(Target,shortcut_map){_.forEach(shortcut_map,function(val,key){Object.defineProperty(Target.prototype,"_$"+key,{get:function(){if(!this.$el)return null;if(this.$el.is(val)){return this.$el}else{return $(val,this.$el).eq(0)}}})})}})},function(module,exports){module.exports='<div class="awf-loader">\n\t<span class="awf-loader__icon icon-awf-circle-sixth-o icon-awf-spin-fast">\n\t\t<span class="awf-access">Loading...</span>\n\t</span>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=Spinner;var use=__webpack_require__(22),Parent=awf.ui.Base;use(Parent).toCreate(Spinner);Spinner.template=__webpack_require__(114);function Spinner(params){params=params||{};var self=this;this.template=params.template||this.template||Spinner.template;Parent.apply(this,arguments)}},function(module,exports,__webpack_require__){module.exports=Page;var use=__webpack_require__(22),Parent=awf.ui.Base;use(Parent).toCreate(Page);function Page(params){var self=this;params=params||{};console.group("Constructing Page");console.time("page - render");this.template=params.template||this.template||Page.template;params.parent=params.parent||$("body");self.trays={};Parent.call(this,params);awf.util.mixin.properties(this,params,{name:{default:null,types:["string","null"],renderHandler:function(val){this._$title.html(val)}},masthead_active_state:{default:false,types:["boolean"],renderHandler:function(val){this.$el[val?"addClass":"removeClass"]("-has-masthead")}},background:{default:null,types:["null","string"],renderHandler:function(val){var value=null;if(val){color=new awf.__.Color(val);if(color.isValid()){value=color.toString();this.$el.css({"background-image":"none","background-color":value})}else{value='url("'+val+'")';this.$el.css({"background-image":value,"background-color":"transparent"})}}else{this.$el.css({"background-image":"","background-color":""})}}},font_size:{default:null,types:["string","null"],renderHandler:function(val){switch(val){case"large":$("html").css("font-size","77%");break;case"small":$("html").css("font-size","48%");break;default:$("html").removeStyle("font-size")}}},font:{default:null,types:["string","null"],renderHandler:function(val){var self=this;if(!self.children.stylesheet){self.children.stylesheet=new awf.ui.Stylesheet}self.children.stylesheet.destroy();function executeFont(info){var content=_.template(info.template)({src:info.src,ff:info.ff});self.children.stylesheet.css(content).render()}if(val){var is_file=/.ttf|.eot|.woff|.woff2|.svg$/.test(val.split("?")[0]),info={},url_search_items;if(is_file){url_search_items=awf.util.urlParamsFrom(val);if(url_search_items.family){info.template='@font-face { font-family : "{{ff}}"; src : url("{{src}}"); } body { font-family: "{{ff}}" !important; }';info.src=val;info.ff=url_search_items.family.replace("+"," ")}}else if(/^http|\/\//.test(val)){url_search_items=awf.util.urlParamsFrom(val);if(url_search_items.family){info.template='@import url("{{src}}"); body { font-family: "{{ff}}" !important; }';info.src=val;info.ff=url_search_items.family.split(":")[0].replace("+"," ")}}else{info.template='@import url("{{src}}"); body { font-family: "{{ff}}" !important; }';info.src="https://fonts.googleapis.com/css?family="+val.replace(" ","+");info.ff=val}executeFont(info)}}},background_position:{default:"50% 50%",types:["null","string"],renderHandler:function(val){if(val===null)val="50% 50%";this.$el.css({"background-position":val})}},selectable_state:{default:true,types:["boolean"],renderHandler:function(val){this.$el[val?"removeClass":"addClass"]("-non-selectable")}}});if("favicon"in params){var favicon=params.favicon,$favicon=$("head link[rel=icon]");if(favicon){if(typeof favicon=="string"){favicon={active:favicon}}if($favicon.length===0){$favicon=$('<link rel="icon" />');$favicon.appendTo($("head"))}$favicon.attr("href",favicon.active)}if("inactive"in favicon){$(window).on("focus.favicon",function(){$favicon.attr("href",favicon.active)}).on("blur.favicon",function(){$favicon.attr("href",favicon.inactive)})}}if("themes"in params&&params.themes!==false){console.group("Themes");if(params.themes===true)params.themes={};console.time("themes - render");self.themes=new awf.ui.Themes({themes:params.themes});console.timeEnd("themes - render");console.groupEnd()}else{console.log("not configured: `themes`")}if("masthead"in params){params.masthead.name=params.masthead.name||self.name||null;console.time("masthead - render");self.children.masthead=new awf.ui.Masthead(params.masthead);$(".js-placeholder-masthead",self.$el).replaceWith(self.children.masthead.$el);self.setMastheadActiveState(true);if("themes"in self.children){if(self.themes.current_theme!="default")self.children.masthead.children.stylesheet.destroy();self.themes.on("apply",function(ev,id){if(id=="default")self.children.masthead.children.stylesheet.render();else self.children.masthead.children.stylesheet.destroy()})}console.timeEnd("masthead - render");console.timeStamp("masthead has rendered")}else{console.log("not configured: `masthead`")}if(params.notifications){if(params.notifications===true){params.notifications={}}console.group("Notifications");console.time("notifications - render");try{self.children.notifications=new awf.ui.Notifications(_.defaults(params.notifications,{parent:self._$notifications,appid:_.get(awf,"app.id")||null}));if("data"in params.notifications){console.log("Loading from `"+params.notifications.data+"`");$.ajax({url:params.notifications.data,dataType:"json",cache:false}).done(function(response){self.children.notifications.json=response;self.children.notifications.render()}).fail(function(response){console.warn("Failed to load notifications banner data:",response.status,response.statusText)})}}catch(er){console.error("Notifications failed to be created.",er)}console.groupEnd();console.timeEnd("notifications - render")}else{console.log("not configured: `notifications`")}if("leftnav"in params){console.time("leftnav - render");var leftnav_items=_.get(params,"page.leftnav.data")||null;console.group("Constructing LeftNav");self.children.leftnav=new awf.ui.VerticalNav({items:leftnav_items,id:"leftnav",cn:"overflow-close"});console.groupEnd();this._$leftnav_placeholder.replaceWith(self.children.leftnav.$el);this.leftnav_spinner=new awf.ui.Spinner({parent:self.children.leftnav.$el});if(self.children.masthead){console.group("Adding masthead + leftnav logic");console.log("...extending leftnav instance");_.extend(self.children.leftnav,{orig_scroll_pos:0,toggle:new awf.ui.Button({classname:"js-nav-toggle nav-toggle -awf-link -text-decoration-none -awf-focus",text:"Open/Close Experience menu",i18n:{text:"awf.page.masthead.leftnav_toggle"},icon:"icon-awf-menu-bars"}),showMobile:function(){var self=this;self.$el.removeClass("overflow-close");self.toggle.$el.attr("aria-expanded","true").addClass("-color-link-hover");self.orig_scroll_pos=$(window).scrollTop();$("html, body").animate({scrollTop:0},0);setTimeout(function(){self.$el.find(".-is-active").focus()},200);$("body").on("keydown.leftnav.esc",function(ev){switch(ev.keyCode){case awf.util.keyCodes.esc:if(self.is_active){self.setIsActive(false);ev.preventDefault()}break}});self.on("change:active_index.leftnav",function(){if(self.is_active){setTimeout(function(){self.orig_scroll_pos=0;self.setIsActive(false)},300)}});self.toggle.$el.on("keydown.leftnav.tab",function(ev){switch(ev.keyCode){case awf.util.keyCodes.tab:if(self.is_active){self.$el.find(".-is-active").focus();ev.preventDefault()}break}});self.$el.on("keydown.leftnav.tab",function(ev){switch(ev.keyCode){case awf.util.keyCodes.tab:if(self.is_active){self.toggle.$el.focus();ev.preventDefault()}break}})},hideMobile:function(){var self=this;$("body").off("keydown.leftnav.esc");self.off("change:active_index.leftnav");self.toggle.$el.off("keydown.leftnav.tab");self.$el.off("keydown.leftnav.tab");self.toggle.$el.attr("aria-expanded","false").removeClass("-color-link-hover");if(self.orig_scroll_pos)$("html, body").animate({scrollTop:self.orig_scroll_pos},0);self.toggle.$el.focus();setTimeout(function(){self.$el.addClass("overflow-close")},300)}});console.log("...adding aria controls to leftnav toggler");self.children.leftnav.toggle.$el.attr({"aria-controls":"leftnav","aria-expanded":"false",role:"button"});console.log("...adding the toggler");$(".js-leftnav-toggle-placeholder",self.children.masthead.$el).replaceWith(self.children.leftnav.toggle.$el);console.log("...coupling leftnav toggle to leftnav");self.children.leftnav.toggle.on("click:button",function(){self.children.leftnav.setIsActive(self.children.leftnav.is_active?false:true)});console.log("...coupling leftnav change to show/hide mobile");self.children.leftnav.on("change:is_active",function(ev,val){if(val)this.showMobile();else this.hideMobile()});console.groupEnd()}else{console.log("No masthead. Not adding special leftnav+masthead logic")}console.timeEnd("leftnav - render")}if("footer"in params&&params.footer!==false){console.time("footer - render");params.footer.name=params.footer.name||self.name||null;console.group("Footer");self.children.footer=new awf.ui.Footer(params.footer);console.groupEnd();$(".js-placeholder-footer",self.$el).replaceWith(self.children.footer.$el);console.timeEnd("footer - render")}else{console.log("not configured: `footer`")}if("content"in params){console.time("content - render");console.group("Content");_.forEach(params.content,function(val,key){switch(key){case"html":console.log("Adding HTML");self._$content.append(val);break;case"grid":console.log("Adding Grid");self.grid=new awf.ui.Grid(_.defaults(val,{parent:self._$content}));self.grid.autoSetColumns();$(window).on("resize.grid",function(){self.grid.autoSetColumns()});self.grid.on("destroy",function(){$(window).off("resize.grid")});break}});console.groupEnd();console.timeEnd("content - render")}else{console.log("not configured: `content`")}console.groupEnd();console.timeEnd("page - render")}Parent.generateDomProperties(Page,{content:".js-layout-wrapper",title:".js-awf-page-heading",notifications:".js-notifications-banner-container",darkener:".js-darkener",leftnav_placeholder:".js-leftnav-placeholder",trays:".js-page-trays"});_.extend(Page.prototype,{spotlight:function($targets,_dont_kill_darkener){var self=this;function resetTargets(){if(this._spotlight_targets){_.forEach(this._spotlight_targets,function($item){if($item){$item.removeClass("-is-spotlighted").removeClass("-spotlight-relative-helper")}})}this._spotlight_targets=null}if($targets===null){var $darkener=this._$darkener;if(!_dont_kill_darkener){clearTimeout(this._spotlight_timer);$darkener.removeClass("-is-dark");this._spotlight_timer=setTimeout(function(){$darkener.removeClass("-is-available");resetTargets.call(self)},500)}else{resetTargets.call(self)}}else{this.spotlight(null,true);clearTimeout(this._spotlight_timer);this._$darkener.addClass("-is-available").addClass("-is-dark");this._spotlight_targets=null;if(_.isArray($targets)){this._spotlight_targets=$targets}else{this._spotlight_targets=[$targets]}_.forEach(this._spotlight_targets,function(item){var $target=$(item);$target.addClass("-is-spotlighted");if($target.css("position")=="static")$target.addClass("-spotlight-relative-helper")})}},_kitchen_sink:__webpack_require__(117),addKitchenSink:function(){$(".js-layout-wrapper",this.$el).append(this._kitchen_sink);return this},addTray:function(cog){var self=this;console.group("Adding cog to Page");console.log("cog: ",cog);if(!cog.isViewAvailable("medium")){throw new Error("Cannot add cog to Page - cog has no `medium` view defined.")}self.trays[cog.id]=cog;cog.component=new awf.ui.Tray({label:cog.views.medium.label,i18n:{label:_.get(cog,"views.medium.i18n_label")},width:cog.views.medium.width,min_height:cog.views.medium.min_height,class_name:cog.views.medium.class_name,toggle_align:cog.views.medium.toggle_align,position:cog.views.medium.position,show_text:cog.views.medium.show_text,hide_text:cog.views.medium.hide_text,parent:self._$trays,tooltip:true});self._updateTrayPosition();cog.component.on("tray:show",function(){cog.view_instance=cog.renderView("medium",cog.component._$content,{context:"page-tray"})}).on("tray:hide",function(){if(cog.view_instance){cog.view_instance.destroy();cog.view_instance=null}});console.groupEnd();return this},removeTray:function(id){var cog=this.trays[id].cog;if(this.trays[id]){
if(this.trays[id].view_instance){this.trays[id].view_instance.destroy();this.trays[id].view_instance=null}if(this.trays[id].component){this.trays[id].component.destroy();this.trays[id].component=null}delete this.trays[id];this._updateTrayPosition()}return this},_updateTrayPosition:function(distance){distance=distance||60;var y=distance*Object.keys(this.trays).length;_.forEach(this.trays,function(tray){tray.component.setBottom(y);y=y-distance});return this}});_.extend(Page,{template:__webpack_require__(118)})},function(module,exports){module.exports='<div class="kitchen-sink">\n  <h1>Heading 1</h1>\n  <h2>Heading 2</h2>\n  <h3>Heading 3</h3>\n  <h4>Heading 4</h4>\n  <h5>Heading 5</h5>\n  <h6>Heading 6</h6>\n\n  <h2>Text-level semantics</h2>\n  <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et m. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et m. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et m.</p>\n  <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et m. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et m. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et m.</p>\n  <hr>\n  <p>\n    The <a href="#">a element</a> example<br>\n    The <abbr>abbr element</abbr> and <abbr title="Title text">abbr element with title</abbr> examples<br>\n    The <strong>b element</strong> example<br>\n    The <cite>cite element</cite> example<br>\n    The <code>code element</code> example<br>\n    The <del>del element</del> example<br>\n    The <dfn>dfn element</dfn> and <dfn title="Title text">dfn element with title</dfn> examples<br>\n    The <em>em element</em> example<br>\n    The <em>i element</em> example<br>\n    The img element <img alt="" src="http://placehold.it/30"> example<br>\n    The linked img element <a href="http://placehold.it"><img alt="" src="http://placehold.it/30"></a> example<br>\n    The <ins>ins element</ins> example<br>\n    The <kbd>kbd element</kbd> example<br>\n    The <mark>mark element</mark> example<br>\n    The <q>q element <q>inside</q> a q element</q> example<br>\n    The <s>s element</s> example<br>\n    The <samp>samp element</samp> example<br>\n    The <small>small element</small> example<br>\n    The <span>span element</span> example<br>\n    The <strong>strong element</strong> example<br>\n    The <sub>sub element</sub> example<br>\n    The <sup>sup element</sup> example<br>\n    The <span style="text-decoration: underline;">u element</span> example<br>\n    The <var>var element</var> example\n  </p>\n\n  <h2>Grouping content</h2>\n  <h3>pre</h3>\n  <pre>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et me.</pre>\n  <pre><code>&lt;html&gt;\n&lt;head&gt;&lt;/head&gt;\n  &lt;body&gt;\n    &lt;div class="main"&gt; &lt;div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre>\n\n  <h3>blockquote</h3>\n  <blockquote>\n    <p>Some sort of famous witty quote marked up with a &lt;blockquote&gt; and a child &lt;p&gt; element.</p>\n  </blockquote>\n  <blockquote>Even better philosophical quote marked up with just a &lt;blockquote&gt; element.</blockquote>\n\n  <h3>ordered list</h3>\n  <ol>\n      <li>list item 1</li>\n      <li>list item 1\n      <ol>\n          <li>list item 2</li>\n          <li>list item 2\n          <ol>\n              <li>list item 3</li>\n              <li>list item 3</li>\n          </ol>\n          </li>\n          <li>list item 2</li>\n          <li>list item 2</li>\n      </ol>\n      </li>\n      <li>list item 1</li>\n      <li>list item 1</li>\n  </ol>\n\n  <h3>unordered list</h3>\n  <ul>\n      <li>list item 1</li>\n      <li>list item 1\n      <ul>\n          <li>list item 2</li>\n          <li>list item 2\n          <ul>\n              <li>list item 3</li>\n              <li>list item 3</li>\n          </ul>\n          </li>\n          <li>list item 2</li>\n          <li>list item 2</li>\n      </ul>\n      </li>\n      <li>list item 1</li>\n      <li>list item 1</li>\n  </ul>\n\n  <h3>description list</h3>\n  <dl>\n      <dt>Description name</dt>\n      <dd>Description value</dd>\n      <dt>Description name</dt>\n      <dd>Description value</dd>\n      <dd>Description value</dd>\n      <dt>Description name</dt>\n      <dt>Description name</dt>\n      <dd>Description value</dd>\n  </dl>\n\n  <h2>Tabular data</h2>\n  <h3>auto width</h3>\n  <table>\n      <caption>Jimi Hendrix - albums</caption>\n      <thead>\n          <tr>\n              <th>Album</th>\n              <th>Year</th>\n              <th>Price</th>\n          </tr>\n      </thead>\n      <tfoot>\n      <tr>\n          <th>Album</th>\n          <th>Year</th>\n          <th>Price</th>\n      </tr>\n      </tfoot>\n      <tbody>\n          <tr>\n              <td>Are You Experienced</td>\n              <td>1967</td>\n              <td>$10.00</td>\n          </tr>\n          <tr>\n              <td>Axis: Bold as Love</td>\n              <td>1967</td>\n              <td>$12.00</td>\n          </tr>\n          <tr>\n              <td>Electric Ladyland</td>\n              <td>1968</td>\n              <td>$10.00</td>\n          </tr>\n          <tr>\n              <td>Band of Gypsys</td>\n              <td>1970</td>\n              <td>$12.00</td>\n          </tr>\n      </tbody>\n  </table>\n\n  <h3>100% width</h3>\n  <table style="width: 100%;">\n      <caption>Jimi Hendrix - albums</caption>\n      <thead>\n          <tr>\n              <th>Album</th>\n              <th>Year</th>\n              <th>Price</th>\n          </tr>\n      </thead>\n      <tfoot>\n      <tr>\n          <th>Album</th>\n          <th>Year</th>\n          <th>Price</th>\n      </tr>\n      </tfoot>\n      <tbody>\n          <tr>\n              <td>Are You Experienced</td>\n              <td>1967</td>\n              <td>$10.00</td>\n          </tr>\n          <tr>\n              <td>Axis: Bold as Love</td>\n              <td>1967</td>\n              <td>$12.00</td>\n          </tr>\n          <tr>\n              <td>Electric Ladyland</td>\n              <td>1968</td>\n              <td>$10.00</td>\n          </tr>\n          <tr>\n              <td>Band of Gypsys</td>\n              <td>1970</td>\n              <td>$12.00</td>\n          </tr>\n      </tbody>\n  </table>\n\n  <h2>Form Elements</h2>\n  <fieldset>\n    <legend>Inputs as descendents of labels (form legend). This doubles up as a long legend that can test word wrapping.</legend>\n    <p><label>Text input <input type="text" value="default value that goes on and on without stopping or punctuation"></label></p>\n    <p><label>Email input <input type="email"></label></p>\n    <p><label>Search input <input type="search"></label></p>\n    <p><label>Tel input <input type="tel"></label></p>\n    <p><label>URL input <input type="url" placeholder="http://"></label></p>\n    <p><label>Password input <input type="password" value="password"></label></p>\n    <p><label>File input <input type="file"></label></p>\n    <p><label>Radio input <input type="radio" name="rad"></label></p>\n    <p><label>Checkbox input <input type="checkbox"></label></p>\n    <p><label><input type="radio" name="rad"> Radio input</label></p>\n    <p><label><input type="checkbox"> Checkbox input</label></p>\n    <p>\n      <label>Select field\n        <select>\n          <option>Option 01</option>\n          <option>Option 02</option>\n        </select>\n      </label>\n    </p>\n    <p><label>Textarea <textarea cols="30" rows="5">Textarea text</textarea></label></p>\n  </fieldset>\n  <fieldset>\n    <legend>Inputs as siblings of labels</legend>\n    <p><label for="ic">Color input</label> <input type="color" id="ic" value="#000000"></p>\n    <p><label for="in">Number input</label> <input type="number" id="in" min="0" max="10" value="5"></p>\n    <p><label for="ir">Range input</label> <input type="range" id="ir" value="10"></p>\n    <p><label for="idd">Date input</label> <input type="date" id="idd" value="1970-01-01"></p>\n    <p><label for="idm">Month input</label> <input type="month" id="idm" value="1970-01"></p>\n    <p><label for="idw">Week input</label> <input type="week" id="idw" value="1970-W01"></p>\n    <p><label for="idt">Datetime input</label> <input type="datetime" id="idt" value="1970-01-01T00:00:00Z"></p>\n    <p><label for="idtl">Datetime-local input</label> <input type="datetime-local" id="idtl" value="1970-01-01T00:00"></p>\n    <p><label for="irb">Radio input</label> <input type="radio" id="irb" name="rad"></p>\n    <p><label for="icb">Checkbox input</label> <input type="checkbox" id="icb"></p>\n    <p><input type="radio" id="irb2" name="rad"> <label for="irb2">Radio input</label></p>\n    <p><input type="checkbox" id="icb2"> <label for="icb2">Checkbox input</label></p>\n    <p>\n      <label for="s">Select field</label>\n      <select id="s">\n        <option>Option 01</option>\n        <option>Option 02</option>\n      </select>\n    </p>\n    <p><label for="t">Textarea</label> <textarea id="t" cols="30" rows="5">Textarea text</textarea></p>\n  </fieldset>\n  <fieldset>\n    <legend>Clickable inputs and buttons</legend>\n    <p><input type="reset" value="Reset (input)"></p>\n    <p><input type="button" value="Button (input)"></p>\n    <p><input type="submit" value="Submit (input)"></p>\n    <p><input type="submit" value="Disabled (input)" disabled="disabled"></p>\n    <p><button type="reset">Reset (button)</button></p>\n    <p><button type="button">Button (button)</button></p>\n    <p><button type="submit">Submit (button)</button></p>\n    <p><button type="submit" disabled="disabled">Disabled (button)</button></p>\n  </fieldset>\n  <fieldset id="boxsize">\n    <legend>box-sizing tests</legend>\n    <div><input type="text" value="text"></div>\n    <div><input type="email" value="email"></div>\n    <div><input type="search" value="search"></div>\n    <div><input type="url" value="http://example.com"></div>\n    <div><input type="password" value="password"></div>\n    <div><input type="color" value="#000000"></div>\n    <div><input type="number" value="5"></div>\n    <div><input type="range" value="10"></div>\n    <div><input type="date" value="1970-01-01"></div>\n    <div><input type="month" value="1970-01"></div>\n    <div><input type="week" value="1970-W01"></div>\n    <div><input type="datetime" value="1970-01-01T00:00:00Z"></div>\n    <div><input type="datetime-local" value="1970-01-01T00:00"></div>\n    <div><input type="radio"></div>\n    <div><input type="checkbox"></div>\n    <div>\n      <select>\n        <option>Option 01</option>\n        <option>Option 02</option>\n      </select>\n    </div>\n    <div><textarea cols="30" rows="5">Textarea text</textarea></div>\n    <div><input type="reset" value="Reset (input)"></div>\n    <div><input type="button" value="Button (input)"></div>\n    <div><input type="submit" value="Submit (input)"></div>\n    <div><button type="reset">Reset (button)</button></div>\n    <div><button type="button">Button (button)</button></div>\n    <div><button type="submit">Submit (button)</button></div>\n  </fieldset>\n</div>\n'},function(module,exports){module.exports='<div class="awf-page js-page" role="region" aria-labelledby="page-title">\n\t<div class="js-placeholder-masthead"></div>\n\t<div id="notifications-banner" class="js-notifications-banner-container notifications-banner-container" data-feature="page.notifications-banner" aria-label="Notifications Banner" data-i18n="[aria-label]awf.page.notifications.label"></div>\n\t<div id="awf-app-message" class="js-app-message awf-app-message" role="alert" data-feature="page.app-message" aria-label="Application Message" data-i18n="[aria-label]awf.app.messages_aria"></div>\n\t<div id="content" class="awf-experience" role="main" data-feature="page.experience" aria-label="All content" data-i18n="[aria-label]awf.page.content.label">\n\t\t<div class="darkener js-darkener"></div>\n\t\t<h1 id="page-title" class="js-awf-page-heading awf-access" aria-label="Page Title" data-feature="page.title" data-i18n="[aria-label]awf.page.content.page_label"></h1>\n\t\t<div class="awf-experience__inner">\n\t\t\t<div class="js-leftnav-placeholder"></div>\n\t\t\t<div id="layout" class="js-layout-wrapper"></div>\n\t\t</div>\n\t</div>\n\t<div class="js-page-trays awf-page-trays"></div>\n\t<div class="js-placeholder-footer"></div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=Badge;var template=__webpack_require__(120);awf.util.use(awf.ui.Base).toCreate(Badge);function Badge(params){params=params||{};awf.util.mixin.properties(this,params,{number:{default:null,types:["null","number"],renderHandler:function(val){if(val===null||val<1)val="";this.setActiveState(!!val);this.$el.html(val)}},tooltip:{default:null,types:["null","string"],renderHandler:function(val){if(val==="")val=null;this.$el.attr("title",val)}},active_state:{default:false,types:["boolean"],renderHandler:function(val){this.$el[val?"addClass":"removeClass"]("-is-active")}}});this.template=params.template||this.template||template;awf.ui.Base.apply(this,arguments)}},function(module,exports){module.exports='<div class="awf-badge"></div>\n'},function(module,exports,__webpack_require__){module.exports=FixedHeaderFooter;var Parent=awf.ui.Base;awf.util.use(Parent).toCreate(FixedHeaderFooter);function FixedHeaderFooter(params){params=params||{};var self=this;this.template=params.template||this.template||FixedHeaderFooter.template;Parent.apply(this,arguments)}awf.ui.Base.generateDomProperties(FixedHeaderFooter,{header:".js-header",middle:".js-middle",footer:".js-footer"});_.extend(FixedHeaderFooter.prototype,{});_.extend(FixedHeaderFooter,{template:__webpack_require__(122)})},function(module,exports){module.exports='<div class="fixed-header-footer">\n\t<div class="fixed-header-footer__header">\n\t\t<div class="fixed-header-footer__header__content js-header group"></div>\n\t</div>\n\t<div class="fixed-header-footer__middle">\n\t\t<div class="fixed-header-footer__middle__content js-middle"></div>\n\t</div>\n\t<div class="fixed-header-footer__footer">\n\t\t<div class="fixed-header-footer__footer__content js-footer group"></div>\n\t</div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=Card;var use=__webpack_require__(22),BaseUI=awf.ui.Base;use(BaseUI).toCreate(Card);function Card(params){params=params||{};params.template=params.template||this.template||Card.template;var self=this;this.drag_data={};this.aria_id=awf.util.randomID();BaseUI.call(this,params);this.children={badge:new awf.ui.Badge({number:params.badge,parent:self._$badge})}}BaseUI.generateDomProperties(Card,{card:".js-card",drag_handle:".js-drag-handle",badge:".js-badge-placer"});Card.template=__webpack_require__(124);_.extend(Card.prototype,{})},function(module,exports){module.exports='<div class="awf-card-wrap">\n\t<div class="js-card awf-card -background-base -awf-focus" tabindex="0"></div>\n\t<div class="awf-badge-placer js-badge-placer"></div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=UICollectionItem;var use=__webpack_require__(22),BaseUI=awf.ui.Base;use(BaseUI).toCreate(UICollectionItem);function UICollectionItem(params){params=params||{};awf.util.mixin.collectionItem(this,params);this._default_parent=params.parent||this._default_parent||function(){if(this.collection){return this.collection.$el}else{return null}};BaseUI.apply(this,arguments)}_.extend(UICollectionItem.prototype,{})},function(module,exports,__webpack_require__){module.exports=UICollection;var use=__webpack_require__(22),BaseUI=awf.ui.Base;use(BaseUI).toCreate(UICollection);function UICollection(params){params=params||{};awf.util.mixin.collection(this,params,{addItem:function(item){if(this.$el&&!item.$el){item.render()}},removeItem:function(item){item.destroy()},setOrder:function(order){if(order.length===0)return false;var self=this,$parent=self.items[0].$el.parent();_.forEach(this.items,function(item){$parent.append(item.$el)})}});BaseUI.apply(this,arguments)}_.extend(UICollection.prototype,{Item:awf.ui.CollectionItem,render:function(){BaseUI.prototype.render.call(this);_.forEach(this.items,function(item){item.render()});return this},destroy:function(){_.forEachRight(this.items,function(item){item.destroy()});BaseUI.prototype.destroy.apply(this,arguments);return this}})},function(module,exports,__webpack_require__){module.exports=Dropdown;var use=__webpack_require__(22),BaseUI=awf.ui.Base,template=__webpack_require__(128);use(BaseUI).toCreate(Dropdown);function Dropdown(params){params=params||{};params.template=template;this.button=params.button;this.label=params.label;this.content=params.content;this.content_width=params.content_width;this._button_id=awf.util.randomID();this._content_id=awf.util.randomID();this._label_id=awf.util.randomID();this.offset=_.extend({x:0,y:0},params.offset||{});awf.util.mixin.properties(this,params,{direction:{default:"left",types:["string"],validator:function(val){var valid=["left","right"],is_valid=_.contains(valid,val);if(!is_valid){console.warn("`direction` can only be set to "+awf.util.list(valid,"or","`"))}return is_valid},renderHandler:function(val){switch(val){case"left":this._$content_wrapper.removeClass("awf-dropdown__wrapper--right");break;case"right":this._$content_wrapper.addClass("awf-dropdown__wrapper--right");break;default:throw new Error("Cannot setDirection() of dropdown to '"+val+"'. Please use 'left' or 'right'.")}}}});BaseUI.call(this,params)}BaseUI.generateDomProperties(Dropdown,{label:".js-dropdown-label",button:".js-dropdown-button",content_wrapper:".js-dropdown-wrapper",content:".js-dropdown-content",tip_wrapper:".tip-wrapper",tip:".tip-wrapper .tip",loop_last:".js-loop-to-last",loop_first:".js-loop-to-first"});_.extend(Dropdown.prototype,{render:function(){BaseUI.prototype.render.apply(this,arguments);var self=this;if(this.direction){this.setDirection(this.direction)}if(this.button)this.setButton(this.button);if(this.content)this.setContent(this.content);if(this.content_width)this.setContentWidth(this.content_width);this._applyOffset();this.setLabel(this.label);this._$button.attr("id",this._button_id);this._$content_wrapper.attr("id",this._content_id).attr("aria-labelledby",this._label_id);this._$button.on("click",function(){if(self.isVisible())self.hide();else self.show()});return this},setLabel:function(val){this.label=val;this._$label.attr("id",this._label_id).html(val);return this},setButton:function(val){if(val===undefined)throw new Error("setButton requires a parameter");this.button=val;if(this._$button){this._$button.empty().append('<span class="awf-access"><span class="js-dropdown-action" data-i18n="awf.common.show">Show</span> '+this.label+"</span>").append(val).localize()}return this},setButtonWidth:function(number){if(this._actual_button_width===number)return this;this.button_width=number;this.$el.css({width:number+"px"});this._actual_button_width=number;this.triggerHandler("change.button_width");return this},setButtonHeight:function(number){if(this._actual_button_height===number)return this;this.button_height=number;this.$el.css({height:number+"px"});this._actual_button_height=number;this.triggerHandler("change.button_height");return this},setContent:function(val){this.content=val;if(this._$content){this._$content.empty().append(val)}return this},setContentWidth:function(number){if(this._actual_content_width==number)return this;this.content_width=number;if(this._$content_wrapper){this._$content_wrapper.css({width:number+"px"});this._actual_content_width=number}this.triggerHandler("change.content_width");return this},show:function(){console.log("Showing a dropdown!");var self=this;this.$el.addClass("awf-dropdown--active");this._$button.attr("aria-expanded","true").focus().find(".js-dropdown-action").eq(0).attr("data-i18n","awf.common.hide").html("Hide").localize();$("body").on("click.dropdown_"+this._content_id,function(e){if(!self.$el.is(e.target)&&self.$el.has(e.target).length===0){self.hide(true)}}).on("keyup.dropdown_"+this._content_id,function(e){if(e.keyCode==awf.util.keyCodes.esc){self.hide()}});self._$loop_last.show().on("focus",function(){self._$button.add(self._$content.find(":tabbable")).last().focus()});self._$loop_first.show().on("focus",function(){self._$button.add(self._$content.find(":tabbable")).first().focus()});this.triggerHandler("show");return this},hide:function(do_not_focus){this.$el.removeClass("awf-dropdown--active");this._$button.attr("aria-expanded","false").find(".js-dropdown-action").eq(0).attr("data-i18n","awf.common.show").html("Show").localize();if(!do_not_focus){this._$button.focus()}$("body").off("click.dropdown_"+this._content_id+" keyup.dropdown_"+this._content_id);this._$loop_last.hide().off("focus");this._$loop_first.hide().off("focus");this.triggerHandler("hide");return this},destroy:function(){var self=this;BaseUI.prototype.destroy.apply(this,arguments);$("body").off("click.dropdown_"+this._content_id+" keyup.dropdown_"+this._content_id);return self},isVisible:function(){return this._$content_wrapper.is(":visible")},setOffset:function(coords){if(!params||!("x"in params||"y"in params))throw new Error("Dropdown setOffset requires a `coords` parameter that supplies x and/or y as numbers.");var changed=false;if("x"in params){if(params.x!==this.offset.x)changed=true;else this.setOffsetX(coords.x,true)}if("y"in params){if(params.y!==this.offset.y)changed=true;else this.setOffsetY(coords.y,true)}if(changed)this.triggerHandler("change.offset");return this},setOffsetX:function(x,_silent_change){if(typeof x!=="number")throw new Error("Dropdown setOffsetX() only accepts a number. Was given "+typeof x);this._actual_offset=this._actual_offset||{};if(this._actual_offset.x===x)return this;this.offset.x=x;this._applyOffset();if(!_silent_change)this.triggerHandler("change.offset");return this},setOffsetY:function(y,_silent_change){if(typeof y!=="number")throw new Error("Dropdown setOffsetY() only accepts a number. Was given "+typeof y);this._actual_offset=this._actual_offset||{};if(this._actual_offset.y===y)return this;this.offset.y=y;this._applyOffset();if(!_silent_change)this.triggerHandler("change.offset");return this},getOffset:function(){return this.offset},_applyOffset:function(){var self=this;this._$content.css({transform:"translate("+self.offset.x+"px,"+self.offset.y+"px)"});this._$tip_wrapper.css({transform:"translate(0,"+self.offset.y+"px)"});this._actual_offset=this.offset}})},function(module,exports){module.exports='<div class="awf-dropdown">\n\t<button class="awf-access js-loop-to-last awf-dropdown__loop-last" aria-hidden="true">Loop to last</button>\n\t<label class="js-dropdown-label awf-access"></label>\n\t<button class="js-dropdown-button awf-dropdown__button" aria-expanded="false" role="button"></button>\n\t<div class="js-dropdown-wrapper awf-dropdown__wrapper" role="region">\n\t\t<div class="js-dropdown-content awf-dropdown__wrapper__content -background-base"></div>\n\t</div>\n\t<div class="tip-wrapper"><div class="tip -background-base"></div></div>\n\t<button class="awf-access js-loop-to-first awf-dropdown__loop-first" aria-hidden="true">Loop to first</button>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=GridItem;var use=__webpack_require__(22),BaseUI=awf.ui.Base;use(BaseUI).toCreate(GridItem);function GridItem(params){params=params||{};var self=this;this.collection=params.collection||this.collection||null;this._default_parent=function(){if(this.collection){return $(".grid__inner-wrapper",self.collection.$el)}return null};awf.util.mixin.collectionItem(this,params);this.template=__webpack_require__(130);BaseUI.apply(this,arguments);awf.util.mixin.properties(this,params,{row:{default:0,handler:function(){this._applyOwnPosition()}},col:{default:0,handler:function(){this._applyOwnPosition()}},row_span:{default:1,handler:function(){this._applyPosition()}},col_span:{default:1,handler:function(){this._applyPosition()}}})}_.extend(GridItem.prototype,{render:function(){BaseUI.prototype.render.call(this);this._applyPosition()},_applyPosition:function(){if(this.collection)this.collection.applyPositions();this._applyOwnPosition();return this},_applyOwnPosition:function(_silent){if(!this.$el)return this;var classes=(this.$el.attr("class")||"").split(" ");_.remove(classes,function(cls){return cls.search(/grid__item--[x|y|r|c]-/)===0});classes.push("grid__item--x-"+this.col);classes.push("grid__item--y-"+this.row);classes.push("grid__item--r-"+this.row_span);if(this.collection)classes.push("grid__item--c-"+Math.min(this.collection.columns,this.col_span));else classes.push("grid__item--c-"+this.col_span);this.$el.attr("class",classes.join(" "));if(this.collection&&!_silent)this.collection._updateCss();return this},getCenter:function(){var self=this;return{x:self.$el.width()/self.col_span/2,y:self.$el.height()/self.row_span/2}}})},function(module,exports){module.exports='<div class="grid__item"></div>\n'},function(module,exports,__webpack_require__){module.exports=Grid;var use=__webpack_require__(22),Parent=awf.ui.Base;use(Parent).toCreate(Grid);var grid_instance_id=0;function Grid(params){params=params||{};var self=this;_.defaults(params,{id:"grid-"+awf.util.randomID()});this.template=__webpack_require__(132);this.is_arrangeable=false;this.is_fluid=params.fluid||false;this.is_animated=params.animated||false;this.is_debug=params.debug||false;this.view=params.view||this.view||null;params.tile=params.tile||{};this.tile={width:params.tile.width||0,height:params.tile.height||0,margin:params.tile.margin||0,max_width:params.tile.max_width||null};this.children={stylesheet:new awf.ui.Stylesheet};this._map=new awf.__.Map(1);this.max_columns=params.max_columns||0;this.setColumns(params.columns||1);Parent.apply(this,[params]);awf.util.mixin.collection(this,params,{addItem:function(item){var self=this,loc=this._map.findAndClaimSlot(Math.min(this.columns,item.col_span),item.row_span);item.setCol(loc.x,true);item.setRow(loc.y,true);item._applyOwnPosition()},removeItem:function(item){item.destroy();this.applyPositions()},removeAllItems:function(item){this.applyPositions()},setOrder:function(order){if(order.length===0)return false;var self=this,$parent=self.items[0].$el.parent();_.forEach(this.items,function(item){$parent.append(item.$el)});this.applyPositions()}});this.applyPositions()}Parent.generateDomProperties(Grid,{wrapper:".js-wrapper"});_.extend(Grid.prototype,{Item:awf.ui.GridItem,render:function(){this._updateCss();Parent.prototype.render.call(this);this.applyPositions();this.setDebug(this.is_debug);this.setAnimated(this.is_animated);_.forEach(this.items,function(item){item.render()});return this},destroy:function(){_.forEach(this.items,function(item){item.destroy()});Parent.prototype.destroy.apply(this,arguments)},_updateCss:function(){var i,self=this,css={},css_string="";var max_cols=Math.min(self.columns,_.max(this.items,function(item){return item.col_span}).col_span),max_rows=_.max(this.items,function(item){return item.row_span}).row_span,max_y=1+(_.max(this.items,function(item){return item.row}).row||0);if(self.is_fluid){css["#"+self.id]={"min-width":self.tile.width+"px"};if(self.tile.max_width){var max_width=self.columns*self.tile.max_width+(self.columns-1)*self.tile.margin;css["#"+self.id]["max-width"]=max_width+"px"}}else{css["#"+self.id]={width:self.columns*(self.tile.width+self.tile.margin)-self.tile.margin+"px"}}css["#"+self.id+" > .grid__inner-wrapper"]={margin:"0 -"+self.tile.margin/2+"px"};css["#"+self.id+" > .grid__inner-wrapper > .grid__item"]={border:"solid "+self.tile.margin/2+"px transparent"};for(i=0;i<max_rows+2;i++){css["#"+self.id+" > .grid__inner-wrapper > .grid__item--r-"+(i+1)]={height:(i+1)*(self.tile.height+self.tile.margin)+"px"}}for(i=0;i<max_y+2;i++){css["#"+self.id+" > .grid__inner-wrapper > .grid__item--y-"+i]={top:i*(self.tile.height+self.tile.margin)+"px"}}css.comment="column "+self.columns+" specifics";for(i=0;i<max_cols+2;i++){css["#"+self.id+" > .grid__inner-wrapper > .grid__item--c-"+(i+1)]={width:100/self.columns*(i+1)+"%"}}for(i=0;i<self.columns;i++){css["#"+self.id+" > .grid__inner-wrapper > .grid__item--x-"+i]={left:100/self.columns*i+"%"}}_.forEach(css,function(pair,query){if(query=="comment"){css_string+="\n/* "+pair+" */\n"}else{var props=[];_.forEach(pair,function(val,prop){props.push(prop+": "+val)});css_string+=query+" { "+props.join("; ")+"; }\n"}});this.children.stylesheet.css(css_string)},autoSetColumns:function(){if(this.tile.width===0){console.warn("Cannot calculate how many columns can fit when tile width is 0.");return this}var style=this.$el.attr("style");this.$el.css({width:"auto","min-width":"auto","max-width":"auto"});var measured=Math.floor((this.$el.parent().width()+this.tile.margin)/(this.tile.width+this.tile.margin)),columns_taken=0;_.forEach(this.items,function(item){columns_taken+=item.col_span});this.$el.attr("style",style);return this.setColumns(Math.min(columns_taken,measured))},setColumns:function(num){if(arguments.length===0)throw new Error("setColumns requires a number as the first (and only) parameter.");num=Math.max(1,num);if(this.max_columns!==0)num=Math.min(this.max_columns,num);if(num===this.columns)return this;this.columns=num;this.applyPositions();return this},setMaxColumns:function(num){if(arguments.length===0)throw new Error("setColumns requires a number as the first (and only) parameter.");if(num===null){num=0}this.max_columns=num;if(this.max_columns<this.columns){this.setColumns(this.max_columns)}return this},setTileWidth:function(num,_silent){this.tile.width=num;if(!_silent)this.applyPositions();return this},setTileMaxWidth:function(num,_silent){this.tile.max_width=num;if(!_silent)this.applyPositions();return this},setTileHeight:function(num,_silent){this.tile.height=num;if(!_silent)this.applyPositions();return this},setTileMargin:function(num,_silent){this.tile.margin=num;if(!_silent)this.applyPositions();return this},setTile:function(w,h,m){this.setTileWidth(w,true);this.setTileHeight(h,true);this.setTileMargin(m,true);this.applyPositions();return this},setFluid:function(bool){this.is_fluid=bool;this._updateCss();return this},setAnimated:function(bool){this.is_animated=bool;this.$el[bool?"addClass":"removeClass"]("grid--animated");return this},setDebug:function(bool){this.is_debug=bool;this.$el[bool?"addClass":"removeClass"]("grid--debug");return this},_applyColumnClassname:function(){if(!this.$el)return this;var self=this,classes=(this.$el.attr("class")||"").split(" ");_.remove(classes,function(cls){return cls.search(/-is-\d+-col/)===0});classes.push("-is-"+self.columns+"-col");this.$el.attr("class",classes.join(" "));return this},applyPositions:function(){var self=this;var map=this._map;map.setCols(this.columns);map.reset();var max=0;_.forEach(this.items,function(item,i){var col_span=Math.min(self.columns,item.col_span),row_span=item.row_span,loc=map.findAndClaimSlot(col_span,row_span);max=Math.max(max,loc.y+row_span);item.setRow(loc.y);item.setCol(loc.x);item._applyOwnPosition()});self._updateCss();this.setHeight(max);this._applyColumnClassname();return this},setHeight:function(rows){if(!this.$el)return this;var self=this;if(arguments.length===0){var max=0;_.forEach(this.items,function(item,i){max=Math.max(max,item.row+item.row_span)});self.setHeight(max)}else{this.$el.css({height:rows*(self.tile.height+self.tile.margin)-self.tile.margin/2})}},addCog:function(cog){if(!(cog instanceof awf.__.Cog)){cog=awf.app.experience.cogs[cog]}if(!cog.isAvailable())throw new Error("Cannot add cog `"+cog.type+"` to grid. The entire cog is disabled from the feature flag: `"+cog.flag+"`");
if(!this.view)throw new Error("Cannot add cog `"+cog.type+"` to grid. A view type not been defined for this grid.");if(cog.isViewAvailable(this.view)===null)throw new Error("Cannot add cog `"+cog.type+"` to grid. View type `"+this.view+"` has not been defined for cog `"+cog.type+"`.");if(cog.isViewAvailable(this.view)===false)throw new Error("Cannot add cog `"+cog.type+"` to grid. The `"+this.view+"` view is disabled from the feature flag: `"+cog.views[this.view].flag+"`");var handler=Grid.cog_view_handlers[this.view];if(!handler)throw new Error("Cannot add cog `"+cog.type+"` to grid. No handler has been defined for view `"+this.view+"`.");return handler.call(this,cog)},removeCog:function(cog){var id=null;if(cog instanceof awf.__.Cog)id=cog.id;else id=cog;var index=-1;_.forEach(this.items,function(item,i){if(item.cog_id==id)index=i});if(index===-1){return null}else{return this.removeItem(index)}}});Grid.cog_view_handlers={medium:function(cog){cog._maybeSetupCog();cog._maybeInitializeView("medium");var self=this,can_have_large_card=cog.isViewAvailable("large"),grid_item=self.addItem({row_span:cog.views.medium.rowspan||1,col_span:cog.views.medium.colspan||1}),medium_card=new awf.ui.TitledCard({parent:function(){return grid_item.$el},title:cog.views.medium.label||null,aria_label:"Click to Show Large Card",i18n:{title:_.get(cog,"views.medium.i18n_label"),aria_label:"awf.page.grid.flip_trigger"}}),large_card=null;if(self.is_arrangeable){medium_card.cta_drag=new awf.ui.Button({parent:medium_card._$cta,classname:"js-cta-drag js-drag-handle awf-card__titlebar__cta__drag js-drag-intent-ignore",text:"drag",icon:"icon-awf-arrows",i18n:{text:"awf.common.drag"},tooltip:true,attributes:{tabindex:"-1","aria-hidden":"true"}})}medium_card.cta_flip=new awf.ui.Button({parent:medium_card._$cta,classname:"js-cta-flip awf-card__titlebar__cta__flip",text:"flip",icon:"icon-awf-external-link",i18n:{text:"awf.common.flip"},tooltip:true,attributes:{tabindex:"-1","aria-hidden":"true"}});medium_card.cta_flip.$el.on("click",function(){medium_card.trigger("request-open");console.log("requesting open")});if(can_have_large_card){large_card=new awf.ui.LargeCard({title:cog.views.large.label||null,i18n:{title:_.get(cog,"views.large.i18n_label")}})}grid_item.children.medium_card=medium_card;grid_item.children.large_card=large_card;grid_item.cog_id=cog.id;function applyBadgeNumber(){var cog_badges=_.get(awf,"badge_db.dimensions.cog.groups."+cog.id+".items")||[],medium_badges=[];_.forEach(cog_badges,function(badge){if(badge.experience===null||badge.experience==awf.app.experience.id){if(badge.view===null||badge.view=="medium"){medium_badges.push(badge.content)}}});medium_card.children.badge.setNumber(medium_badges.length).setTooltip(medium_badges.join("\n"))}applyBadgeNumber();awf.badge_db.on("change change:item."+cog.id+".medium-badge",applyBadgeNumber);medium_card.on("destroy",function(){awf.badge_db.on("change:item."+cog.id+".medium-badge")});if(can_have_large_card){medium_card._$card.attr({role:"region","aria-label":cog.views.medium.label+" Card"});medium_card._$title.attr({role:"heading"});medium_card.on("flip-half-complete",function(ev,view_params){try{large_card._$card.attr({role:"region","aria-label":cog.views.large.label+" Card"});if(awf.modal){awf.modal.setLabel(cog.views.large.label+" Dialog Window")}large_card.view_instance=cog.renderView("large",large_card._$content,{card:large_card,args:view_params})}catch(er){large_card.setContent("Failed to render `"+cog.id+"` large view.");throw er}});large_card.on("flip-complete",function(){if(large_card.view_instance)large_card.view_instance.destroy()});awf.util[awf.app.experience.transition||"bindFlipper"](medium_card,large_card)}try{var medium_view_instance=cog.renderView("medium",medium_card._$content,{context:"grid",card:medium_card,grid_item:grid_item});medium_card.on("destroy",function(){medium_view_instance.destroy()})}catch(er){medium_card.setContent("Failed to render `"+cog.id+"` medium view.");throw er}return grid_item},mini:function(cog){cog._maybeSetupCog();cog._maybeInitializeView("mini");var view=cog.views.mini,can_have_large_card=cog.isViewAvailable("large"),grid_item=this.addItem(),card=new awf.ui.IconCard({title:view.label||null,i18n:{title:_.get(cog,"views.mini.i18n_label")},icon:view.icon||null,parent:function(){return grid_item.$el}});grid_item.children.card=card;grid_item.cog_id=cog.id;function applyBadgeNumber(){var cog_badges=_.get(awf,"badge_db.dimensions.cog.groups."+cog.id+".items")||[],mini_badges=[];_.forEach(cog_badges,function(badge){if(badge.experience===null||badge.experience==awf.app.experience.id){if(badge.view===null||badge.view=="mini"){mini_badges.push(badge.content)}}});card.children.badge.setNumber(mini_badges.length).setTooltip(mini_badges.join("\n"))}applyBadgeNumber();awf.badge_db.on("change change:item."+cog.id+".mini-badge",applyBadgeNumber);card.on("destroy",function(){awf.badge_db.on("change:item."+cog.id+".mini-badge")});var large_card=null;if(can_have_large_card){large_card=new awf.ui.LargeCard({title:cog.views.large.label||null,i18n:{title:_.get(cog,"views.large.i18n_label")}})}grid_item.children.large_card=large_card;if(can_have_large_card){card.on("flip-half-complete",function(ev,view_params){try{large_card._$card.attr({role:"region","aria-label":cog.views.large.label+" Card"});if(awf.modal){awf.modal.setLabel(cog.views.large.label+" Dialog Window")}large_card.view_instance=cog.renderView("large",large_card._$content,{card:large_card,args:view_params})}catch(er){large_card.setContent("Failed to render `"+cog.id+"` large view.");throw er}});large_card.on("flip-complete",function(){if(large_card.view_instance)large_card.view_instance.destroy()});awf.util[awf.app.experience.transition||"bindFlipper"](card,large_card)}if(view.render){try{card.view_instance=cog.renderView("mini",card._$card,{card:card});card.on("destroy",function(){card.view_instance.destroy()})}catch(er){card._$title.append(" [ failed ]");card._$card.attr("title","Failed to render `"+cog.type+"` mini view.");throw er}}return grid_item}}},function(module,exports){module.exports='<div class="grid">\n\t<div class="grid__inner-wrapper js-wrapper"></div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=ArrangeableGrid;var use=__webpack_require__(22),Parent=awf.ui.Grid;use(Parent).toCreate(ArrangeableGrid);function ArrangeableGrid(params){Parent.apply(this,arguments);this.is_arrangeable=true;this._grabbed=null;this.ghost=null;this._is_dragging_within_domain=null}_.extend(ArrangeableGrid.prototype,{getLocation:function(loc){return{col:Math.floor(loc.x/(this._$wrapper.width()/this.columns)),row:Math.floor(loc.y/(this.tile.height+this.tile.margin))}},setGhost:function(loc){var self=this;if(!loc){if(this.ghost){this.ghost.destroy()}this.ghost=null}else{if("x"in loc&&"y"in loc){var pos=this.getLocation(loc);loc.col=pos.col;loc.row=pos.row;delete loc.x;delete loc.y}var newly_rendered=false;if(!this.ghost){newly_rendered=true;this.ghost=new this.Item({col:loc.col,row:loc.row,col_span:loc.col_span,row_span:loc.row_span,collection:self});this.ghost.$el.addClass("-ghost")}else{_.extend(this.ghost,loc)}this.ghost.is_in_domain=self.isLocInDomain(this.ghost);if(this.ghost.is_in_domain&&!newly_rendered){this.ghost._applyOwnPosition()}this.ghost.$el[this.ghost.is_in_domain?"removeClass":"addClass"]("-hidden")}return this},isLocInDomain:function(loc){return loc.col>-1&&loc.row>-1&&loc.col+loc.col_span<this.columns+1},isPointInDomain:function(point){var loc=this.getLocation(point);return loc.col>-1&&loc.row>-1&&loc.col<this.columns},setGrabbedItem:function(item){var self=this;if(item===null){if(self._grabbed){self._grabbed.skip_when_mapping=false}self._grabbed=null}else{self._grabbed=item;self._grabbed.skip_when_mapping=true}return this},applyPositions:function(){var self=this;if(!this.ghost){return Parent.prototype.applyPositions.apply(this,arguments)}var map1=new awf.__.Map,map2=new awf.__.Map;map1.setCols(this.columns);map2.setCols(this.columns);if(this.ghost.is_in_domain){map1.claim(this.ghost)}_.forEach(this.items,function(item,i){if(!item.skip_when_mapping){var col_span=Math.min(self.columns,item.col_span),row_span=item.row_span,loc=map1.findAndClaimSlot(col_span,row_span);map2.claim(loc.x,loc.y,col_span,row_span)}});map1.reset();if(this.ghost.is_in_domain){var col_span=this.ghost.col_span,row_span=this.ghost.row_span,ghost_loc=map2.findAndClaimSlot(col_span,row_span),col=ghost_loc.x,row=ghost_loc.y;map1.claim(col,row,col_span,row_span);this.ghost.setCol(col);this.ghost.setRow(row)}_.forEach(this.items,function(item,i){if(item.skip_when_mapping){item.visible_index=-1;self.ghost.visible_index=i}else{var w=Math.min(self.columns,item.col_span),h=item.row_span,loc=map1.findAndClaimSlot(w,h);item.visible_index=i;item.setCol(loc.x);item.setRow(loc.y)}});return this},getNewOrder:function(){var self=this,col_count=this.columns,positions=[];_.forEach(this.items,function(item){var position_holder=item.skip_when_mapping?self.ghost:item;if(position_holder){var order_val=position_holder.col+position_holder.row*col_count;positions.push({index:item.index(),order:order_val})}});var new_order=_.sortBy(positions,"order");return _.map(new_order,"index")},_getIndexes:function(){var self=this,col_count=this.columns,positions=[];_.forEach(this.items,function(item,i){if(!item.skip_when_mapping){var order_val=item.col+item.row*col_count;positions.push({index:i,order:order_val})}});if(this.ghost){var order_val=this.ghost.col+this.ghost.row*col_count;positions.push({index:-1,order:order_val})}var new_order=_.sortBy(positions,"order"),indexes=_.map(new_order,"index");return indexes},getVisibleIndexes:function(){var self=this,indexes=this._getIndexes();var visible_indexes=[],seen_a_ghost=false;_.forEach(indexes,function(index){if(index===-1){seen_a_ghost=true}else{visible_indexes.push(index+(seen_a_ghost?1:0))}});return visible_indexes},getGhostIndex:function(){var self=this,indexes=this._getIndexes();var ghost_index=-1;_.forEach(indexes,function(index,i){if(index===-1){ghost_index=i}});return ghost_index}})},function(module,exports,__webpack_require__){module.exports=IconCard;var use=__webpack_require__(22),Card=awf.ui.Card,BaseUI=awf.ui.Base,template=__webpack_require__(135);use(Card).toCreate(IconCard);function IconCard(params){params=params||{};var self=this,$card=$(awf.ui.Card.template),$div=$("<div></div>");$card.addClass("-icon-card").addClass("js-drag-handle");$card.find(".js-card").attr({role:"button","aria-expanded":"false"}).append($(template));$div.append($card);this.template=$div.html();awf.util.mixin.properties(this,params,{title:{default:null,types:["null","string"],renderHandler:function(val){if(val===null)val="";this._$title.html(val)}},icon:{default:null,types:["null","string"],renderHandler:function(val){if(val===null){this._$icon.empty()}else{this._$icon.html('<em class="'+val+'"></em>')}}}});Card.apply(this,arguments)}BaseUI.generateDomProperties(IconCard,{icon:".js-card-icon-icon",title:".js-card-icon-text"});_.extend(IconCard.prototype,{render:function(){var self=this;Card.prototype.render.apply(self,arguments);self._$card.on("click",function(){self.triggerHandler("request-open")});self._$card.on("keyup",function(e){var $target=$(e.target);if($target[0]!=self._$card[0])return;if(e.keyCode===awf.util.keyCodes.enter){self.triggerHandler("request-open")}});return self}})},function(module,exports){module.exports='<div class="awf-card__icon">\n\t<div class="js-card-icon-icon awf-card__icon__icon -color-link"></div>\n\t<span class="js-card-icon-text awf-card__icon__text -color-link"></span>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=ImageCircle;var use=__webpack_require__(22),BaseUI=awf.ui.Base,template=_.template(__webpack_require__(137));use(BaseUI).toCreate(ImageCircle);function ImageCircle(params){params=params||{};this.size=params.size||0;this.url=params.url||null;this.element_type=params.element_type||"div";params.template=template({element_type:this.element_type});BaseUI.call(this,params)}_.extend(ImageCircle.prototype,{render:function(){BaseUI.prototype.render.apply(this,arguments);if(this.size!==null&&this.size!==undefined){this.setSize(this.size)}else{}if(this.url!==null&&this.url!==undefined)this.setUrl(this.url)},setUrl:function(url){this.url=url;if(!this.$el)return this;if(this._actual_url===url)return this;this.$el.css({"background-image":"url("+url+")"});this._actual_url=url;this.trigger("change.url",url);return this},setSize:function(number){if(this._actual_size===number)return this;if(typeof number!=="number"){throw new Error("ImageCircle setSize only accepts type `number`")}this.size=number;this.$el.css({width:number,height:number});this._actual_size=number;this.trigger("change.size",number);return this}})},function(module,exports){module.exports='<{{element_type}} class="image-circle -background-alt"></{{element_type}}>\n'},function(module,exports){module.exports=Layout;var Parent=awf.ui.Base;awf.util.use(Parent).toCreate(Layout);function Layout(params){params=params||{};console.group(_.template("Constructing Layout `{{type}}`")(_.defaults({},params,{type:"?"})));console.log("params: ",params);awf.util.mixin.properties(this,params,{type:{default:"content",types:["string"]},is_loading:{default:true,types:["boolean"],toggleable:true}});this._last_rendered_preset=null;this.children=_.extend({},this.children,params.children);this.experience=params.experience||this.experience||null;this.grid_header=params.grid_header||null;this.force_mini=params.force_mini||this.force_mini||false;if(!this.children.stylesheet){this.children.stylesheet=new awf.ui.Stylesheet({render:false})}this.default_order=params.default_order||this.default_order||{};this.cog=params.cog||this.cog||null;Parent.apply(this,arguments);console.groupEnd()}Parent.generateDomProperties(Layout,{topzone:"#awf-experience-topzone"});_.extend(Layout.prototype,{render:function(){var self=this,preset=Layout.presets[this.type];if(!preset){throw new Error("Layout preset not defined: "+this.type)}this._last_rendered_preset=preset;this.template=preset.template||null;this.children.stylesheet.content=preset.css||null;Parent.prototype.render.apply(this,arguments);this.children.stylesheet.$el.attr("data-purpose","layout : "+this.type);this.build();return this},build:function(){console.log("Kicking off layout build sequence for `"+this.type+"`...");var self=this,dfr=$.Deferred(),preset=Layout.presets[this.type];self.setIsLoading(true);console.time("layout build");var potential_step_names=["setup","preferenceParser","addCogs","setupComplete"],kinetic_step_names=[],kinetic_callbacks=[];_.forEach(potential_step_names,function(name){if(name in preset){kinetic_callbacks.push(preset[name]);kinetic_step_names.push(name)}});this.sequence_start=new Date;console.log("Listening for next experience change, in case cancel needs to be called");awf.app.one("change:experience.layout",function(){console.warn("Experience has changed. Aborting layout build sequence.");sequence.cancel()});var sequence=awf.util.runPromiseSequence.call(this,kinetic_callbacks).always(function(){console.timeEnd("layout build");self.sequence_end=new Date;self.sequence_duration=self.sequence_end-self.sequence_start;awf.app.off("change:experience.layout");console.log("No longer listening for next experience change")}).done(function(){console.log("Build sequence for `"+self.type+"` complete!");console.log("Layout build took "+self.sequence_duration/1e3+" seconds.");(function(){var url_obj=awf.util.getDeepLinkValues(window.location.href);function cleanHash(){window.location.hash="#/"+url_obj.experience+"/"}if(url_obj.cog){var warnings={no_large:"Unable to flip card. The card doesn't have a view to flip to.",no_cog:"Unable to flip card. The card doesn't exist in this experience.",no_grid:"Unable to flip card inside this experience. No Grid exists.",wrong_experience:"Unable to flip card inside this experience."};if(awf.can_use_i18next){warnings.no_large=i18next.t("awf.app.deep_linking.flip_card.no_large");warnings.no_cog=i18next.t("awf.app.deep_linking.flip_card.no_cog");warnings.no_grid=i18next.t("awf.app.deep_linking.flip_card.no_grid");warnings.wrong_experience=i18next.t("awf.app.deep_linking.flip_card.wrong_experience")}if(url_obj.experience==awf.app.experience.id){if("grid"in awf.page||"mini_grid"in awf.page){var cards={};if("grid"in awf.page){_.forEach(awf.page.grid.items,function(item){cards[item.cog_id]={card:item.children.medium_card,has_large:!!item.children.large_card}})}if("mini_grid"in awf.page){_.forEach(awf.page.mini_grid.items,function(item){cards[item.cog_id]={card:item.children.card,has_large:!!item.children.large_card}})}console.log("-- Deep Linking -- available cards:",cards);if(url_obj.cog in cards){var card=cards[url_obj.cog];if(card.has_large){console.log("-- Deep Linking -- about to trigger card flip for `"+url_obj.cog+"`:",card.card);card.card.trigger("request-open",[url_obj.args])}else{console.warn("-- Deep Linking -- Unable to flip card `"+url_obj.cog+"`. The cog doesn't have a large view.");awf.app.postMessage("warn",warnings.no_large)}}else{console.warn("-- Deep Linking -- Unable to flip card `"+url_obj.cog+"`. The cog doesn't exist for this experience.");awf.app.postMessage("warn",warnings.no_cog)}}else{console.warn("-- Deep Linking -- Unable to flip card `"+url_obj.cog+"`. Expecting a Grid in experience `"+url_obj.experience+"`.");awf.app.postMessage("warn",warnings.no_grid)}}else{console.warn("-- Deep Linking -- Unable to flip card `"+url_obj.cog+"`. Expecting to be in experience `"+url_obj.experience+"`, while actual experience is `"+awf.app.experience.id+"`");awf.app.postMessage("warn",warnings.wrong_experience)}cleanHash()}})();dfr.resolve()}).fail(function(er){if(preset.fail)preset.fail.call(self,er);console.warn("Layout build sequence for `"+self.type+"` failed.");console.error(er);dfr.reject(er)});dfr.always(function(){self.setIsLoading(false)}).done(function(){self.triggerHandler("build-complete",true);self.triggerHandler("build-done")}).fail(function(){self.triggerHandler("build-complete",false);self.triggerHandler("build-fail")});return dfr.promise()},destroy:function(){var preset=this._last_rendered_preset;if(preset&&preset.teardown){preset.teardown.call(this)}Parent.prototype.destroy.apply(this,arguments)}});Layout.presets={}},function(module,exports,__webpack_require__){__webpack_require__(140);__webpack_require__(141);__webpack_require__(144);__webpack_require__(145);__webpack_require__(148);__webpack_require__(149)},function(module,exports){_.extend(awf.ui.Layout.presets,{content:{}})},function(module,exports,__webpack_require__){_.extend(awf.ui.Layout.presets,{grid:{css:__webpack_require__(142),template:__webpack_require__(143),setup:function(){var self=this,grid_default_dfr=$.Deferred(),$parent=$("#grid",this.$el);this.spinners=this.spinners||{};this.spinners.grid=new awf.ui.Spinner({parent:$parent});awf.user.authentication.always(function(){if(!awf.page){grid_default_dfr.reject("awf.page is not defined");return false}awf.page.grid=new awf.ui[awf.user.is_authenticated?"ArrangeableGrid":"Grid"]({parent:$parent,columns:3,tile:{width:300,max_width:400,height:360,margin:20},view:"medium"});awf.drag_handler.registerParticipant("grid",awf.page.grid);var default_cogs=[];_.forEach(self.default_order.grid,function(cog_params,i){var default_cog;console.group("Setting up ",cog_params);try{var cog=awf.app.experience.getOrCreateCog(cog_params);cog.default_grid="grid";default_cogs.push(cog)}catch(er){console.warn("Cannot get cog: ",cog_params);console.error(er)}console.groupEnd()});console.log("grid default cogs: ",_.map(default_cogs,"id"));grid_default_dfr.resolve(default_cogs)});console.groupEnd();return grid_default_dfr.promise()},preferenceParser:function(default_cogs){console.time("preference parser");var preference_order_dfr=$.Deferred(),final_order_dfr=$.Deferred();final_order_dfr.always(function(){console.timeEnd("preference parser")});preference_order_dfr.always(function(){console.timeEnd("preference parser")}).done(function(cogs){console.info("Custom order for grid has been resolved: "+_.map(cogs,"id"));final_order_dfr.resolve(cogs)}).fail(function(er){console.info("Custom order for grid has been rejected: "+er);final_order_dfr.resolve(default_cogs)});if(awf.user.is_authenticated){awf.app.experience.fetchPreferences(1e3).done(function(preferences){if(preferences&&preferences.grid){var saved_order=preferences.grid;console.log("Saved order found for grid: ",saved_order);var new_order=[];_.forEach(saved_order,function(id){var cog=awf.app.experience.cogs[id];if(cog){new_order.push(cog)}});var saved_ids=_.unique(preferences.grid),given_ids=_.map(awf.app.experience.cogs,"id"),added_ids=_.difference(given_ids,saved_ids);_.forEach(added_ids,function(id){var cog=awf.app.experience.cogs[id];if(cog.default_grid=="grid"){console.log("Saved order did not have `"+cog.id+"`. Adding it to the grid.");new_order.push(cog)}});preference_order_dfr.resolve(new_order)}else{preference_order_dfr.reject("no preferences")}}).fail(preference_order_dfr.reject);var saveOrders=function(){var orders=_.mapValues(awf.drag_handler.participants,function(participant){return _.map(participant.items,"cog_id")}),enough_time_on_saving=$.Deferred(),msg_saving="Saving your card layout &hellip;",msg_saved="Card layout saved!",msg_failed="Great Scott! The grid saving is too heavy!";if(awf.can_use_i18next){msg_saving=i18next.t("awf.app.card.order_saving");msg_saved=i18next.t("awf.app.card.order_saved");msg_failed=i18next.t("awf.app.card.order_save_failed")}setTimeout(function(){enough_time_on_saving.resolve()},1500);awf.app.experience.postMessage("info",msg_saving);return awf.app.experience.setPreferences(orders).savePreferences().done(function(){enough_time_on_saving.done(function(){awf.app.experience.postMessage("success",msg_saved,false).andDismissIn(3)});console.info("The dual-grid order has been saved!")}).fail(function(er){enough_time_on_saving.done(function(){awf.app.experience.postMessage("error",msg_failed,false).andDismissIn(2)});console.warn("The dual-grid order could not be saved. :(");throw er})};var debouncedSaveOrders=_.debounce(saveOrders,500);awf.page.grid.on("change:order",debouncedSaveOrders)}else{preference_order_dfr.reject("not authenticated")}return final_order_dfr.promise()},addCogs:function(cogs){console.log("Adding cogs to main grid: ",_.map(cogs,"id"));var dfr=$.Deferred();this.spinners.grid.destroy();if(this.grid_header){var $exp_head=$("#awf-experience-header",this.$el);if($exp_head.length==1){var exp_header=new awf.ui.Card({parent:$exp_head});exp_header._$card.html(awf.snippets[this.grid_header.snippet])}else{console.log("No cogs were found. A `grid_header` was defined, but the layout template did not provide a content dropzone.")}}else{console.log("No cogs were found. If you want have content show when no cogs are present, add `grid_header` to your layout config.")}_.forEach(cogs,function(cog){if(!cog.isAvailable()){console.info("The `"+cog.type+"` cog is disabled from the `"+cog.flag+"` feature flag.")}else if(cog.isViewAvailable("medium")===null){console.info("The `"+cog.type+"` cog's medium view does not exist.")}else if(cog.isViewAvailable("medium")===false){console.info("The `"+cog.type+"` cog's medium view is disabled from the `"+cog.views.medium.flag+"` feature flag.")}else{try{awf.page.grid.addCog(cog)}catch(er){console.warn("Could not add cog `"+cog.id+"` to the grid.");console.error(er)}}});dfr.resolve();return dfr.promise()},setupComplete:function(){var dfr=$.Deferred();awf.page.grid.applyPositions().autoSetColumns().on("change:length",function(){awf.page.grid.autoSetColumns()});$(window).off("resize.grid").on("resize.grid",function(){awf.page.grid.autoSetColumns()});awf.app.experience.modal_available_flag.runAndWatch(function(is_flippable){awf.page.grid.$el.find(".js-card-cta .js-cta-flip")[is_flippable?"show":"hide"]()});console.log("window will attempt to adjust awf.page.grid on page resize");dfr.resolve();return dfr.promise()},teardown:function(){var dfr_grid=$.Deferred();if(awf.page.grid){awf.page.grid.destroy();delete awf.page.grid;console.log("Destroyed awf.page.grid")}$(window).off("resize.grid");console.log("window no longer attempts to adjust awf.page.grid on page resize");dfr_grid.resolve();return dfr_grid.promise()}}})},function(module,exports){module.exports="#awf-experience-header:empty,\n#awf-experience-message:empty {\n\tdisplay: none;\n}\n\n#awf-experience-header {\n\tpadding-top: 10px;\n\tmargin: 0 0 10px;\n}\n\n#grid {\n\tpadding: 20px 10px;\n\tposition: relative;\n\t-webkit-box-flex: 1;\n\t-webkit-flex: 1 1 auto;\n\t-moz-box-flex: 1;\n\t-moz-flex: 1 1 auto;\n\t-ms-flex: 1 1 auto;\n\tflex: 1 1 auto;\n}\n\n#grid > .awf-loader {\n\tposition: absolute;\n}\n\n\n@media (min-width: 420px) {\n\t#grid {\n\t\tpadding: 20px;\n\t}\n}\n\n@media (min-width: 420px) and (max-width: 1019px) {\n\t#leftnav {\n\t\t-webkit-box-flex: 0;\n\t\t-webkit-flex: 0 0 80px;\n\t\t-moz-box-flex: 0;\n\t\t-moz-flex: 0 0 80px;\n\t\t-ms-flex: 0 0 80px;\n\t\tflex: 0 0 80px;\n\t}\n\t.vertical-nav__item__label {\n\t\tdisplay: none;\n\t}\n\t.vertical-nav__item__icon {\n\t\tmargin-left: 18px;\n\t}\n}\n"},function(module,exports){module.exports='<div>\n\t<div id="awf-experience-message"></div>\n\t<div id="awf-experience-topzone"></div>\n\t<div id="awf-experience-header"></div>\n\t<div id="grid"></div>\n</div>\n'},function(module,exports,__webpack_require__){_.extend(awf.ui.Layout.presets,{"fluid-grid":{template:__webpack_require__(143),css:__webpack_require__(142),setup:awf.ui.Layout.presets.grid.setup,preferenceParser:awf.ui.Layout.presets.grid.preferenceParser,addCogs:awf.ui.Layout.presets.grid.addCogs,setupComplete:function(){return awf.ui.Layout.presets.grid.setupComplete.apply(this,arguments).done(function(){awf.page.grid.setFluid(true);setTimeout(function(){awf.page.grid.setAnimated(true)},0)})},teardown:function(){return awf.ui.Layout.presets.grid.teardown.call(this)}}})},function(module,exports,__webpack_require__){_.extend(awf.ui.Layout.presets,{"dual-grid":{template:__webpack_require__(146),css:__webpack_require__(147),setup:function(){console.time("setup");var self=this,grid_default_dfr=$.Deferred(),mini_grid_default_dfr=$.Deferred(),dual_grid_default_dfr=$.Deferred(),$parent=$("#mini-grid",this.$el);$.when(grid_default_dfr,mini_grid_default_dfr).done(function(grid_default_cogs,mini_grid_default_cogs){dual_grid_default_dfr.resolve({grid:grid_default_cogs,mini_grid:mini_grid_default_cogs})}).fail(dual_grid_default_dfr.reject);this.spinners=this.spinners||{};this.spinners.mini_grid=new awf.ui.Spinner({parent:$parent});awf.ui.Layout.presets.grid.setup.call(this).done(grid_default_dfr.resolve).fail(function(er){mini_grid_default_dfr.reject({msg:"`grid` setup failed",er:er})});awf.user.authentication.always(function(){if(!awf.page){dual_grid_default_dfr.reject("awf.page is not defined");return dual_grid_default_dfr}awf.page.mini_grid=new awf.ui[awf.user.is_authenticated?"ArrangeableGrid":"Grid"]({parent:$parent,columns:1,max_columns:2,tile:{width:120,max_width:150,height:80,margin:20},view:"mini"});awf.drag_handler.registerParticipant("mini_grid",awf.page.mini_grid);var default_cogs=[];_.forEach(self.default_order.mini_grid,function(cog_params,i){var cog;console.group("Setting up ",cog_params);try{cog=awf.app.experience.getOrCreateCog(cog_params);cog.default_grid="mini_grid";default_cogs.push(cog)}catch(er){console.warn("Cannot get cog: ",cog_params);console.error(er)}console.groupEnd()});console.log("mini grid default cogs: ",_.map(default_cogs,"id"));mini_grid_default_dfr.resolve(default_cogs);if(awf.user.is_authenticated){var grid_start_index;awf.drag_handler.on("drag:start",function(ev,$target){var item=$target.closest(".grid__item").data("component"),cog=awf.app.experience.cogs[item.cog_id],available_views=cog.availableViews(),spotlight_targets=[];grid_start_index=$target.closest(".grid__item").index();_.forEach(this.participants,function(participant){if(_.contains(available_views,participant.view)){participant.is_participating=true;spotlight_targets.push(participant.$el)}else{participant.is_participating=false}});awf.page.spotlight(spotlight_targets)}).on("drag:move",function(ev,$target){}).on("drag:end",function(ev,$target){awf.page.spotlight(null);_.forEach(this.participants,function(participant){participant.is_participating=false;participant.applyPositions()});var item=$target.closest(".grid__item").data("component"),grid=item.collection;if(this.active_participant&&this.active_participant.ghost){if(this.active_participant.id!=grid.id){var cog=awf.app.experience.cogs[item.cog_id];grid.removeCog(cog);var index=this.active_participant.getGhostIndex(),new_item=this.active_participant.addCog(cog),order=[],event_info={grid_start:grid.dnd_id,grid_start_view:grid.view,grid_start_length:grid.items.length,grid_start_position:grid_start_index+1,grid_end:this.active_participant.dnd_id,grid_end_view:this.active_participant.view,grid_end_length:this.active_participant.items.length,grid_end_position:index+1,cog_id:cog.id,cog_type:cog.type,experience_id:awf.app.experience.id,experience_type:awf.app.experience.type};_.forEach(this.active_participant.items,function(item,i){order.push(i)});var before=order.slice(0,index),after=order.slice(index),new_order=before.concat([after.pop()],after);this.active_participant.setGhost(null).setOrder(new_order);awf.app.triggerHandler("metrics:cross-drag-drop",[event_info])}}}).on("beyond-domain-drag:start beyond-domain-drag:move",function(ev,id,grid,item,page_drop_point){var drag_handler=this;_.forEach(this.participants,function(participant,participant_id){if(participant.is_participating){if(participant_id!==id){var instance_offset=participant.$el.offset(),point={x:page_drop_point.x-instance_offset.left,y:page_drop_point.y-instance_offset.top},new_loc=participant.getLocation(point);var cog=awf.app.experience.cogs[item.cog_id];new_loc.col_span=cog.views[participant.view].colspan||1;new_loc.row_span=cog.views[participant.view].rowspan||1;var is_in_domain=participant.isLocInDomain(new_loc);drag_handler.setActiveParticipant(participant);if(is_in_domain){participant.setGhost(new_loc).applyPositions()}}}})}).on("beyond-domain-drag:end",function(ev,id,grid,item){this.setActiveParticipant(grid);_.forEach(this.participants,function(participant,participant_id){if(participant_id!==id){if(participant.ghost){participant.setGhost(null)}}})})}});return dual_grid_default_dfr.promise().always(function(){console.timeEnd("setup")})},preferenceParser:function(default_groups){console.time("preference parser");var preference_order_dfr=$.Deferred(),final_order_dfr=$.Deferred();if(!_.isObject(default_groups)){final_order_dfr.reject("default_groups is not an array");return final_order_dfr.promise()}preference_order_dfr.done(function(cogs){console.info("Custom order for dual-grid has been resolved: "+_.map(cogs,"id"));final_order_dfr.resolve(cogs)}).fail(function(er){console.info("Custom order for dual-grid has been rejected: "+er);final_order_dfr.resolve(default_groups)});if(awf.user.is_authenticated){awf.app.experience.fetchPreferences(1e3).done(function(preferences){if(preferences){var grid_cogs=[];if(preferences.grid){var grid_preference_ids=preferences.grid;console.log("Saved order found for grid: ",grid_preference_ids);_.forEach(grid_preference_ids,function(id){var cog=awf.app.experience.cogs[id];if(cog){grid_cogs.push(cog)}})}else{grid_cogs=default_groups.grid}var grid_ids=_.map(grid_cogs,"id");var mini_grid_cogs=[];if(preferences.mini_grid){var mini_grid_preference_ids=preferences.mini_grid;console.log("Saved order found for mini-grid: ",mini_grid_preference_ids);_.forEach(mini_grid_preference_ids,function(id){var cog=awf.app.experience.cogs[id];if(cog){mini_grid_cogs.push(cog)}})}else{mini_grid_cogs=default_groups.mini_grid}var mini_grid_ids=_.map(mini_grid_cogs,"id");var all_preference_ids=_.unique(grid_ids.concat(mini_grid_ids)),all_configured_ids=_.map(awf.app.experience.cogs,"id"),added_ids=_.difference(all_configured_ids,all_preference_ids);
_.forEach(added_ids,function(id){var cog=awf.app.experience.cogs[id];switch(cog.default_grid){case"grid":console.log("Saved order was missing `"+cog.id+"`, so it was added to grid.");grid_cogs.push(cog);break;case"mini_grid":console.log("mini_grid_cogs: ",mini_grid_cogs);console.log("Saved order was missing `"+cog.id+"`, so it was added to mini-grid.");mini_grid_cogs.push(cog);break}});preference_order_dfr.resolve({grid:grid_cogs,mini_grid:mini_grid_cogs})}else{preference_order_dfr.reject("no preferences")}}).fail(preference_order_dfr.reject);var saveOrders=function(){var orders=_.mapValues(awf.drag_handler.participants,function(participant){return _.map(participant.items,"cog_id")}),enough_time_on_saving=$.Deferred(),msg_saving="Saving your card layout &hellip;",msg_saved="Card layout saved!",msg_failed="Great Scott! The grid saving is too heavy!";if(awf.can_use_i18next){msg_saving=i18next.t("awf.app.card.order_saving");msg_saved=i18next.t("awf.app.card.order_saved");msg_failed=i18next.t("awf.app.card.order_save_failed")}setTimeout(function(){enough_time_on_saving.resolve()},1500);awf.app.experience.postMessage("info",msg_saving);return awf.app.experience.setPreferences(orders).savePreferences().done(function(){enough_time_on_saving.done(function(){awf.app.experience.postMessage("success",msg_saved,false).andDismissIn(3)});console.info("The dual-grid order has been saved!")}).fail(function(er){enough_time_on_saving.done(function(){awf.app.experience.postMessage("error",msg_failed,false).andDismissIn(2)});console.warn("The dual-grid order could not be saved. :(");throw er})};var debouncedSaveOrders=_.debounce(saveOrders,500);awf.page.grid.on("change:order",debouncedSaveOrders);awf.page.mini_grid.on("change:order",debouncedSaveOrders)}else{preference_order_dfr.reject("unauthenticated")}return final_order_dfr.promise().always(function(){console.timeEnd("preference parser")})},addCogs:function(cog_groups){console.time("adding cogs");console.log("addCogs() cog_groups: ",cog_groups);var grid_dfr=awf.ui.Layout.presets.grid.addCogs.call(this,cog_groups.grid);console.log("Adding cogs to mini grid: ",_.map(cog_groups.mini_grid,"id"));var mini_grid_dfr=$.Deferred();this.spinners.mini_grid.destroy();_.forEach(cog_groups.mini_grid,function(cog){if(!cog.isAvailable()){console.info("The `"+cog.type+"` cog is disabled from the `"+cog.flag+"` feature flag.")}else if(cog.isViewAvailable("mini")===null){console.info("The `"+cog.type+"` cog's mini view does not exist.")}else if(cog.isViewAvailable("mini")===false){console.info("The `"+cog.type+"` cog's mini view is disabled from the `"+cog.views.mini.flag+"` feature flag.")}else{try{awf.page.mini_grid.addCog(cog)}catch(er){console.warn("Could not add cog `"+cog.id+"` to the mini-grid.");console.error(er)}}});mini_grid_dfr.resolve();return $.when(grid_dfr,mini_grid_dfr).promise().always(function(){console.timeEnd("adding cogs")})},setupComplete:function(){console.time("setup complete");var self=this,grid_dfr=awf.ui.Layout.presets.grid.setupComplete.call(this),mini_grid_dfr=$.Deferred();awf.page.mini_grid.applyPositions().autoSetColumns().on("change:length",function(){awf.page.mini_grid.autoSetColumns()});$(window).off("resize.mini-grid").on("resize.mini-grid",function(){awf.page.mini_grid.autoSetColumns()});if(!self.force_mini){awf.app.experience.modal_available_flag.runAndWatch(function(is_flippable){awf.page.mini_grid.$el.parent()[is_flippable?"show":"hide"]()})}console.log("window will attempt to adjust awf.page.mini_grid on page resize");mini_grid_dfr.resolve();return $.when(grid_dfr,mini_grid_dfr).promise().always(function(){console.timeEnd("setup complete")})},teardown:function(){var dfr_mini_grid=$.Deferred(),dfr_grid=awf.ui.Layout.presets.grid.teardown.call(this);if(awf.page.mini_grid){awf.page.mini_grid.destroy();delete awf.page.mini_grid;console.log("Destroyed awf.page.mini_grid")}$(window).off("resize.mini-grid");console.log("window no longer attempts to adjust awf.page.mini_grid on page resize");dfr_mini_grid.resolve();return $.when(dfr_grid,dfr_mini_grid)}}})},function(module,exports){module.exports='<div>\n\t<div id="awf-experience-message"></div>\n\t<div id="awf-experience-topzone"></div>\n\t<div class="columns">\n\t\t<div id="grid">\n\t\t\t<div id="awf-experience-header"></div>\n\t\t</div>\n\t\t<div id="mini-grid"></div>\n\t</div>\n</div>\n'},function(module,exports){module.exports="#layout .columns {\n\tpadding: 20px 10px;\n\tdisplay: -webkit-box;\n\tdisplay: -moz-box;\n\tdisplay: -ms-flexbox;\n\tdisplay: -webkit-flex;\n\tdisplay: flex;\n\t-webkit-box-direction: normal;\n\t-webkit-box-orient: vertical;\n\t-webkit-flex-direction: column;\n\t-moz-flex-direction: column;\n\t-ms-flex-direction: column;\n\tflex-direction: column;\n\t-webkit-box-flex: 1;\n\t-webkit-flex: 1 1 auto;\n\t-moz-box-flex: 1;\n\t-moz-flex: 1 1 auto;\n\t-ms-flex: 1 1 auto;\n\tflex: 1 1 auto;\n}\n\n#awf-experience-header {\n\tpadding-top: 10px;\n\tmargin: 0 0 10px;\n}\n\n#awf-experience-header:empty,\n#awf-experience-message:empty {\n\tdisplay: none;\n}\n\n#grid,\n#mini-grid {\n\tposition: relative;\n}\n\n#grid > .awf-loader,\n#mini-grid > .awf-loader {\n\tposition: absolute;\n}\n\n#grid {\n\t-webkit-box-flex: 1;\n\t-webkit-flex: 1 1 auto;\n\t-moz-box-flex: 1;\n\t-moz-flex: 1 1 auto;\n\t-ms-flex: 1 1 auto;\n\tflex: 1 1 auto;\n}\n\n#mini-grid {\n\tpadding-top: 10px;\n\t-webkit-box-flex: 1;\n\t-webkit-flex: 1 1 auto;\n\t-moz-box-flex: 1;\n\t-moz-flex: 1 1 auto;\n\t-ms-flex: 1 1 auto;\n\tflex: 1 1 auto;\n}\n\n\n\n\n\n@media (min-width: 420px) {\n\t#layout .columns {\n\t\tpadding: 20px;\n\t}\n}\n\n\n\n\n\n@media (min-width: 420px) and (max-width: 1019px) {\n\t#leftnav {\n\t\t-webkit-box-flex: 0;\n\t\t-webkit-flex: 0 0 80px;\n\t\t-moz-box-flex: 0;\n\t\t-moz-flex: 0 0 80px;\n\t\t-ms-flex: 0 0 80px;\n\t\tflex: 0 0 80px;\n\t}\n\t.vertical-nav__item__label {\n\t\tdisplay: none;\n\t}\n\t.vertical-nav__item__icon {\n\t\tmargin-left: 18px;\n\t}\n}\n\n\n\n\n\n@media (min-width: 580px) {\n\t#mini-grid {\n\t\tpadding-top: 0;\n\t\t-webkit-box-flex: 0;\n\t\t-webkit-flex: 0 0 120px;\n\t\t-moz-box-flex: 0;\n\t\t-moz-flex: 0 0 120px;\n\t\t-ms-flex: 0 0 120px;\n\t\tflex: 0 0 120px;\n\t\tmargin-left: 20px;\n\t}\n\n\t#layout .columns {\n\t\t-webkit-box-direction: normal;\n\t\t-webkit-box-orient: horizontal;\n\t\t-webkit-flex-direction: row;\n\t\t-moz-flex-direction: row;\n\t\t-ms-flex-direction: row;\n\t\tflex-direction: row;\n\t}\n}\n"},function(module,exports,__webpack_require__){_.extend(awf.ui.Layout.presets,{"fluid-dual-grid":{template:__webpack_require__(146),css:__webpack_require__(147),setup:awf.ui.Layout.presets["dual-grid"].setup,preferenceParser:awf.ui.Layout.presets["dual-grid"].preferenceParser,addCogs:awf.ui.Layout.presets["dual-grid"].addCogs,setupComplete:function(){return awf.ui.Layout.presets["dual-grid"].setupComplete.apply(this,arguments).done(function(){awf.page.grid.setFluid(true);awf.page.mini_grid.setFluid(true);setTimeout(function(){awf.page.grid.setAnimated(true);awf.page.mini_grid.setAnimated(true)},0)})},teardown:function(){awf.ui.Layout.presets["dual-grid"].teardown.call(this)}}})},function(module,exports,__webpack_require__){_.extend(awf.ui.Layout.presets,{page:{css:__webpack_require__(150),template:__webpack_require__(151),setup:function(){var dfr=$.Deferred();var cog=null;try{cog=awf.app.experience.getOrCreateCog(this.cog)}catch(er){console.warn("Cannot get cog: ",this.cog);console.error(er)}dfr.resolve(cog);return dfr.promise()},addCogs:function(cog){var dfr=$.Deferred(),$container=this.$el.find("#awf-page-container");console.log("cog: ",cog);if(!cog.isAvailable()){console.warn("The `"+cog.type+"` cog is disabled from the `"+cog.flag+"` feature flag.")}else if(cog.isViewAvailable("page")===null){console.warn("The `"+cog.type+"` cog's page view does not exist.")}else if(cog.isViewAvailable("page")===false){console.warn("The `"+cog.type+"` cog's page view is disabled from the `"+cog.views.page.flag+"` feature flag.")}else{try{cog.renderView("page",$container);this.cog=cog}catch(er){console.warn("Could not add cog `"+cog.id+"` to the page.");console.error(er);$container.append("Cannot load cog.")}}dfr.resolve(cog);return dfr.promise()}}})},function(module,exports){module.exports="#awf-experience-header {\n\tpadding: 30px 20px 20px;\n\tmargin: 0 0 10px;\n}\n\n#awf-experience-header:empty,\n#awf-experience-message:empty {\n\tdisplay: none;\n}\n\n#awf-page-container {\n\tposition: relative;\n\t-webkit-box-flex: 1;\n\t-webkit-flex: 1 1 auto;\n\t-moz-box-flex: 1;\n\t-moz-flex: 1 1 auto;\n\t-ms-flex: 1 1 auto;\n\tflex: 1 1 auto;\n}\n\n\n@media (min-width: 420px) {\n\n}\n\n\n@media (min-width: 420px) and (max-width: 1019px) {\n\t#leftnav {\n\t\t-webkit-box-flex: 0;\n\t\t-webkit-flex: 0 0 80px;\n\t\t-moz-box-flex: 0;\n\t\t-moz-flex: 0 0 80px;\n\t\t-ms-flex: 0 0 80px;\n\t\tflex: 0 0 80px;\n\t}\n\t.vertical-nav__item__label {\n\t\tdisplay: none;\n\t}\n\t.vertical-nav__item__icon {\n\t\tmargin-left: 18px;\n\t}\n}\n"},function(module,exports){module.exports='<div class="awf-layout-page-wrap -background-base">\n\t<div id="awf-experience-message"></div>\n\t<div id="awf-experience-topzone"></div>\n\t<div id="awf-experience-header"></div>\n\t<div id="awf-page-container"></div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=Masthead;var use=__webpack_require__(22),Parent=awf.ui.Base,template=__webpack_require__(153);use(Parent).toCreate(Masthead);function Masthead(params){console.group("Constructing Masthead");console.log("params: ",params);var self=this;if(params===true||params===undefined)params={};self.template=params.template||self.template||template;Parent.call(self,params);self.children.stylesheet=new awf.ui.Stylesheet;self.orig_scroll_pos=0;awf.util.mixin.properties(self,params,{customizable_name:{default:false,types:["boolean"]},name:{default:null,types:["string","null"],renderHandler:function(val){if(!this.customizable_name)this._$brand_name.html(val);this._$brand_logo.find(".js-brand-logo-image").attr("alt",val+" Logo")}},background:{default:null,types:["string","null"],renderHandler:function(val){this._updateCSS()}},foreground:{default:null,types:["string","null"],renderHandler:function(val){this._updateCSS()}},logo:{default:null,types:["string","object","null"],renderHandler:function(val){switch(typeof val){case"object":if(val instanceof $){this._$brand_logo.empty().append(val);this.showLogo()}else{this.hideLogo()}break;case"string":var html;if(val.charAt(0)=="<"){html=val}else{html=_.template('<img src="{{src}}" alt="{{alt}}" class="{{cls}}" />')({src:val,alt:this.name+" Logo",cls:"js-brand-logo-image masthead__logo__image"})}this._$brand_logo.empty().append(html);this.showLogo();break;default:this.hideLogo()}}},fixed:{default:true,types:"boolean",renderHandler:function(val){if(val){this.$el.addClass("masthead--fixed");$("html, body").animate({scrollTop:this.orig_scroll_pos},0)}else{this.orig_scroll_pos=$(window).scrollTop();this.$el.removeClass("masthead--fixed");$("html, body").animate({scrollTop:0},0)}}}});if(this.customizable_name){this.setName(null);this.customizable_name_spinner=new awf.ui.Spinner({parent:this._$brand_name,template:__webpack_require__(114)})}self.children.trays=new awf.ui.MastheadTrayCollection(params.trays);self._$trays_container.append(self.children.trays.$el);self.children.trays.on("show",function(){self.setFixed(false)});self.children.trays.on("hide",function(){self.setFixed(true)});if(params.user){console.log("Adding MastheadUser");self.children.user=new awf.ui.MastheadUser({parent:this._$user_container,loading:true});self.children.user.on("click:sign-in",awf.user.login);awf.user.authentication.done(function(is_authenticated){self.children.user.setLoading(false);if(is_authenticated){self.children.user.setPerson(awf.user).setAsAuthenticated()}}).fail(function(){self.children.user.setLoading(false)})}else{console.log("not configured: `user`")}if(params.search){console.log("Adding search");this.children.search=new awf.ui.Search({parent:this._$search,label:params.search.label||null,endpoint:params.search.endpoint||null,focus_text:params.search.focus_text,i18n_focus_text:params.search.i18n_focus_text});this.children.search_button=new awf.ui.Button({parent:this._$search,classname:"js-search-mobile-toggle awf-search__mobile-toggle -awf-link -text-decoration-none",text:"Open Search",i18n:{text:"awf.page.masthead.search.mobile_button"},icon:"icon-awf-search"});this.children.search_results=new awf.ui.Results({parent:this._$search});var css_string="",default_limit=params.search.default_bucket_limit;if(default_limit){css_string+="\n.awf-bucket-item:nth-child(n+"+(default_limit+1)+") {\n\tdisplay: none;\n}\n"}_.forEach(params.search.buckets,function(bucket){if(bucket.limit&&bucket.limit!=default_limit){if(bucket.limit>default_limit){css_string+="\n.search-bucket--"+_.kebabCase(bucket.bucket)+" .awf-bucket-item:nth-child(n) {\n\tdisplay: block;\n}\n"}css_string+="\n.search-bucket--"+_.kebabCase(bucket.bucket)+" .awf-bucket-item:nth-child(n+"+(bucket.limit+1)+") {\n\tdisplay: none;\n}\n"}});this.children.search.children.stylesheet.css(css_string);awf.search.results.dimensions.bucket.on("add:group",function(ev,bucket){var bucket_params=_.find(params.search.buckets,{bucket:bucket.key});if(bucket_params){var label=bucket_params.label;bucket.bucket_ui=self.children.search_results.addItem({label:label,i18n:{label:bucket_params.i18n_label},classname:"search-bucket--"+_.kebabCase(bucket.key)});bucket.bucket_ui.id=bucket.key;bucket.on("add:item",function(ev,item){var escaped_term=_.escapeRegExp(self.children.search.term),regex=new RegExp("("+escaped_term+")","gi");item.data.title=item.data.title||"";item.data.title=item.data.title.replace(/<\/?strong>/g,"");item.data.title=item.data.title.replace(regex,"<strong>$1</strong>");item.bucket_item_ui=bucket.bucket_ui.addItem(_.extend(item.data,{id:item.id,layout:item.data.layout||awf.search.channels[item.channel].layout}));item.bucket_item_ui.on("result:click",function(ev){var flag=params.search.metrics_flag;if(!flag||flag&&awf.flags.isActive(flag)){awf.tagMetric({ev:"click: search result item",name:self.children.search.term,target:item.data.title.replace(/<\/?strong>/g,""),action:item.bucket_item_ui.$el.index(),section:item.bucket,group:item.bucket_item_ui.collection.$el.index(),module:item.channel})}})});bucket.on("remove:item",function(ev,items){_.forEach(items,function(item){item.bucket_item_ui.removeFromCollection()})});var indexes=[],visible_ids=_.map(self.children.search_results.items,"id"),configed_ids=_.map(params.search.buckets,"bucket");_.forEach(configed_ids,function(id){var ind=_.indexOf(visible_ids,id);if(ind>-1)indexes.push(ind)});var order=awf.util.reducedOrder(indexes);self.children.search_results.setOrder(order);if("view_more"in bucket_params){var vm_label=bucket_params.view_more.label,vm_href=bucket_params.view_more.href,vm_i18n_label=bucket_params.view_more.i18n_label;if(vm_label&&vm_href){vm_href=_.template(vm_href)({term:self.children.search.term||""});var $vm_a=$(_.template('<a class="awf-bucket__view-more -awf-link-inverted" href="{{href}}" target="_blank">{{label}}</a>')({label:vm_label,href:vm_href})).attr("data-i18n",vm_i18n_label).localize();bucket.bucket_ui.$el.addClass("-has-view-more").append($vm_a)}else{console.warn("Cannot add view more link for search bucket `"+bucket_params.label+"`. The `label` and/or `href` property is missing from config.")}}}else{console.warn("Not presenting bucket. Bucket was not configured: ",bucket.key)}});awf.search.results.dimensions.bucket.on("remove:group",function(ev,bucket){if(bucket.bucket_ui){bucket.bucket_ui.removeFromCollection()}});var debouncedSearchQuery=_.debounce(function(){var term=self.children.search.term;awf.search.results.removeAllItems();if(term){awf.search.query(term);self.children.search_results.setActiveState(true)}else{self.children.search_results.setActiveState(false)}},500);self.children.search.on("change:term",debouncedSearchQuery);self.children.search._$input.on("focus",function(){if($(this).val()!==""){self.children.search_results.setActiveState(true)}});awf.search.on("change:command",function(ev,command_name){_.find(self.children.search_results.items,"id","command").setLabel(command_name)}).on("change:context",function(ev,context){switch(context){case"command":self.children.search_results.setFooter("Press <strong class='-color-link'>tab</strong> or use <strong class='-color-link'>arrows</strong> to navigate | Press <strong class='-color-link'>enter</strong> to select or <strong class='-color-link'>esc</strong> dismiss");break;default:self.children.search_results.setFooter(self.children.search_results.default_footer)}});var $refocus_head=$('<button class="awf-access" aria-hidden="true" tabindex="-1">Refocus to last</button>'),$refocus_tail=$('<button class="awf-access" aria-hidden="true" tabindex="-1">Refocus to first</button>');self._$search.prepend($refocus_head).append($refocus_tail);$refocus_head.on("focus.internal",function(ev){var $target=self._$search.find(":tabbable").eq(-1).focus()});$refocus_tail.on("focus.internal",function(ev){var $target=self._$search.find(":tabbable").eq(1).focus()});self.children.search.on("keydown:down",function(e,params){if(self.children.search_results.active_state){params.ev.preventDefault();self._$search.find(".js-bucket-item").first().focus()}}).on("keydown:up",function(e,params){if(self.children.search_results.active_state){params.ev.preventDefault();self._$search.find(".js-bucket-item").last().focus()}});self.children.search_results.on("results:down",function(ev,params){params.ev.preventDefault();var $current=$(params.ev.target).closest(".js-bucket-item")[0],$focusable=self._$search.find(".js-bucket-item"),len=$focusable.length,i=-1;while(++i<len&&$current!==$focusable[i]);if(i===len-1){self.children.search._$input.focus()}else{$focusable.eq(i+1).focus()}}).on("results:up",function(ev,params){params.ev.preventDefault();var $current=$(params.ev.target).closest(".js-bucket-item")[0],$focusable=self._$search.find(".js-bucket-item"),len=$focusable.length,i=-1;while(++i<len&&$current!==$focusable[i]);if(i===0){self.children.search._$input.focus()}else{$focusable.eq(i-1).focus()}});var $glass=$('<div class="awf-search-glass" aria-hidden="true" role="presentation"></div>');self._$search.append($glass);$glass.on("click.internal",function(ev){self.children.search.triggerHandler("click:search_glass");self.children.search_results.setActiveState(false);self.children.search.setActiveState(false)});self.children.search_results.on("change:active_state",function(ev,val){if(val){self.setFixed(false);$refocus_head.add($refocus_tail).attr("tabindex","0");$glass.show()}else{self.setFixed(true);$refocus_head.add($refocus_tail).attr("tabindex","-1");$glass.hide()}});self.children.search_results.$el.on("keyup.internal",function(ev){if(ev.keyCode==awf.util.keyCodes.esc){self.children.search._$clear.trigger("click")}});self.children.search.on("click:clear",function(ev){self.children.search_results.setActiveState(false)});self.children.search_button.on("click:button",function(){$("body").addClass("-search-mobile-is-active");self.children.search._$input.focus()});self.children.search.on("click:submit",function(ev,term){var flag=params.search.metrics_flag;if(!flag||flag&&awf.flags.isActive(flag)){awf.tagMetric({ev:"submit",name:self.children.search.term,target:"button",action:"search",section:"masthead",module:"search form"})}if(term.charAt(0)=="/"){var space_index=term.indexOf(" "),intended_command=space_index==-1?term.substring(1).toLowerCase():term.substring(1,space_index).toLowerCase(),text=space_index==-1?"":term.substring(space_index+1),all_triggers=[];_.forEach(awf.command_channels,function(channel,id){all_triggers.push([channel.trigger,id]);if(channel.aliases){_.forEach(channel.aliases,function(alias){all_triggers.push([alias,id])})}});all_triggers=_.zipObject(all_triggers);if(intended_command in all_triggers){awf.command_channels[all_triggers[intended_command]].run(text)}else{console.warn("That command is not known.")}}else{var endpoint=self.children.search.endpoint;if(endpoint){var url=_.template(endpoint)({term:encodeURIComponent(term),referrer:encodeURIComponent(window.location.hostname)});console.log("Launching search with term: `"+term+"`: ",url);if(awf.util.info.mobile.ios){window.location.replace(url)}else{window.open(url)}}}})}else{console.log("not configured: `search`")}console.groupEnd()}Parent.generateDomProperties(Masthead,{nav_toggle:".js-nav-toggle",brand:".js-brand",brand_logo:".js-brand-logo",brand_name:".js-brand-name",user_container:".js-user-container",trays_container:".js-trays-container",search:".js-search-container"});_.extend(Masthead.prototype,{hideLogo:function(){this._$brand_logo.hide();return this},showLogo:function(){this._$brand_logo.css("display","");return this},_updateCSS:function(){var self=this,css={},css_string="";if(self.background||self.foreground){css["html.default header.-background-base"]={background:self.background};css["html.default .masthead__name"]={color:self.foreground};_.forEach(css,function(pair,query){var props=[];_.forEach(pair,function(val,prop){if(val)props.push(prop+": "+val)});css_string+=query+" { "+props.join("; ")+"; }\n"});self.children.stylesheet.css(css_string)}return self}})},function(module,exports){module.exports='<header role="banner" class="masthead masthead--fixed group -background-base -box-shadow-base" data-feature="page.masthead">\n\t<div class="js-leftnav-toggle-placeholder"></div>\n\n\t<div class="js-brand-logo masthead__logo"></div>\n\t<div class="js-brand-name masthead__name"></div>\n\n\t<div class="js-search-container masthead__search" data-feature="masthead.search"></div>\n\t<div class="js-trays-container masthead__trays" data-feature="masthead.trays"></div>\n\t<div class="js-user-container masthead__user -border-color-base" data-feature="masthead.user"></div>\n</header>\n'},function(module,exports,__webpack_require__){module.exports=MastheadUser;var use=__webpack_require__(22),BaseUI=awf.ui.Base,template=__webpack_require__(155);use(BaseUI).toCreate(MastheadUser);function MastheadUser(params){var self=this;params=params||{};params.template=params.template||template;this.person=null;this.dropdown=new awf.ui.Dropdown({render:false,direction:"right",content_width:260,label:"User Tooltip",i18n:{label:"awf.page.masthead.user.authenticated.tooltip"},offset:{x:-5,y:-6}});this.avatar=new awf.ui.ImageCircle({render:false,size:26});this.dropdown.avatar=new awf.ui.ImageCircle({render:false,size:68,element_type:"a"});BaseUI.call(this,params)}MastheadUser.dropdown_template="the dropdown template has not been adapted";BaseUI.generateDomProperties(MastheadUser,{signin:".js-signin",auth_dd:".js-authenticated-dropdown",auth_dd_avatar:".js-authenticated-dropdown .js-avatar",auth_dd_name:".js-authenticated-dropdown .js-name",auth_dd_email:".js-authenticated-dropdown .js-email",auth_dd_msg:".js-authenticated-dropdown .js-msg"});_.extend(MastheadUser.prototype,{render:function(){BaseUI.prototype.render.apply(this,arguments);this.dropdown.setContent(awf.ui.MastheadUser.dropdown_template);this.dropdown.render().$el.appendTo(this._$auth_dd);this.dropdown._$button.addClass("-awf-link");if(this.person){this._renderPerson()}var self=this;this._$signin.on("click",function(){self.trigger("click:sign-in")});return this},setPerson:function(person){this.person=person;this._renderPerson();return this},_renderPerson:function(){console.warn("MastheadUser _renderPerson has not been adapted.");return this},setAsAnonymous:function(){this.$el.removeClass("-is-authenticated");return this},setAsAuthenticated:function(){this.$el.addClass("-is-authenticated");return this}})},function(module,exports){module.exports='<div class="masthead-user">\n\t<button class="js-signin masthead-user__signin -awf-link-inverted">\n\t\t<span class="-not-mobile" data-i18n="awf.page.masthead.user.anonymous.greeting">Welcome,</span> \n\t\t<strong data-i18n="awf.common.sign_in_proper">Sign In</strong>\n\t</button>\n\t<div class="js-authenticated-dropdown masthead-user__dropdown"></div>\n</div>'},function(module,exports,__webpack_require__){module.exports=CustomName;var use=__webpack_require__(22),Parent=awf.ui.Base,template=__webpack_require__(157);use(Parent).toCreate(CustomName);function CustomName(params){params=params||{};this.template=params.template||this.template||template;Parent.call(this,params);awf.util.mixin.properties(this,params,{max_length:{default:50,types:["null","number"],renderHandler:function(len){if(len&&Number.isInteger(len)){this._$input.attr("maxLength",len);this._$count.html(len);this._$max_text.css("display","")}else{this._$max_text.hide();this._$input.removeAttr("maxLength");this._$count.html("")}}},allow_edit:{default:false,types:["boolean"],renderHandler:function(val){if(val){this.$el.addClass("-is-editable");this._$button.removeAttr("tabindex")}else{this.$el.removeClass("-is-editable");this._$button.attr("tabindex","-1")}}},name:{default:null,types:["null","string"],renderHandler:function(val){if(val)this._$name.html(val)}}})}Parent.generateDomProperties(CustomName,{button:".js-custom-name-btn",name:".js-custom-name",input:".js-custom-name-input",submit:".js-custom-name-submit",cancel:".js-custom-name-cancel",max_text:".js-custom-name-max-text",count:".js-custom-name-text-count"});_.extend(CustomName.prototype,{render:function(){var self=this,key_code_map={};key_code_map[awf.util.keyCodes.esc]="esc";key_code_map[awf.util.keyCodes.enter]="enter";Parent.prototype.render.apply(self,arguments);self._$button.on("click",function(ev){ev.stopPropagation();self.triggerHandler("click:edit")});self._$cancel.on("click",function(){self.triggerHandler("click:cancel")});self._$submit.on("click",function(){self.triggerHandler("click:save")});self._$input.on("keyup",function(ev){var kc=ev.keyCode;self.triggerHandler("input:keyup");if(key_code_map[kc])self.triggerHandler("keyup:"+key_code_map[kc])});return self}})},function(module,exports){module.exports='<div class="awf-custom-name">\n\t<button type="button" class="js-custom-name-btn awf-custom-name__btn" tabindex="-1" data-i18n="[aria-label]awf.page.masthead.custom_name.edit_label" aria-label="Edit Custom Name">\n\t\t<span class="js-custom-name awf-custom-name__btn__name"></span>\n\t\t<em class="awf-custom-name__btn__icon icon-awf-pencil-fill -color-alt" alt="edit"></em>\n\t</button>\n\t<form action="javascript:;" class="awf-custom-name__form">\n\t\t<label for="awf-custom-name" class="awf-access" data-i18n="awf.page.masthead.custom_name.input_label">Custom Name</label>\n\t\t<input type="text" id="awf-custom-name" class="js-custom-name-input awf-custom-name__form__input -border-color-link -awf-focus" value="" autocomplete="off" />\n\t\t<button type="submit" class="js-custom-name-submit awf-custom-name__form__submit -awf-focus awf-btn" data-i18n="awf.common.save">Save</button>\n\t\t<button type="button" class="js-custom-name-cancel awf-custom-name__form__cancel -awf-link" data-i18n="awf.common.cancel">Cancel</button>\n\t\t<div class="js-custom-name-max-text awf-custom-name__form__max-text -color-alt">(<span data-i18n="awf.page.masthead.custom_name.max_text">Remaining Characters</span>: <span class="js-custom-name-text-count awf-custom-name__form__max-text__count"></span>)</div>\n\t</form>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=FooterItem;var use=__webpack_require__(22),template=__webpack_require__(159),Parent=awf.ui.CollectionItem,BaseUI=awf.ui.Base;use(Parent).toCreate(FooterItem);function FooterItem(params){params=params||{};this.template=params.template||this.template||template;this._default_parent=function(){if(this.collection){return this.collection._$links}return null};awf.util.mixin.properties(this,params,{label:{default:null,types:["null","string"],renderHandler:function(val){this._$item.html(val)}},href:{default:null,types:["null","string"],renderHandler:function(val){this._$item.attr("href",val)}},target:{default:"_blank",types:["null","string"],renderHandler:function(val){this._$item.attr("target",val||"_blank")}}});Parent.apply(this,arguments)}BaseUI.generateDomProperties(FooterItem,{item:".js-footer-item"});_.extend(FooterItem.prototype,{})},function(module,exports){module.exports='<li class="footer__list-item">\n\t<a class="js-footer-item footer__list-item__a"></a>\n</li>\n'},function(module,exports,__webpack_require__){module.exports=Footer;var use=__webpack_require__(22),Parent=awf.ui.Collection,template=__webpack_require__(161),BaseUI=awf.ui.Base;use(Parent).toCreate(Footer);function Footer(params){params=params||{};params.template=params.template||this.template||template;Parent.call(this,params);awf.util.mixin.properties(this,params,{name:{default:null,types:["string","null"],renderHandler:function(val){this._$logo_container.find(".js-footer-logo-image").attr("alt",val+" Footer Logo")}},links:{default:null,types:["string","array","null"],renderHandler:function(links){var self=this;if(typeof links=="string"){$.ajax({url:links,timeout:5e3,dataType:"json"}).done(function(response){self._renderLinks(response)}).fail(function(response){console.error("Footer Links: The AJAX request for URL '"+links+"' did not resolve. RESPONSE:",response)})}else{self._renderLinks(links)}}},logo:{default:null,types:["string","object","null"],renderHandler:function(val){switch(typeof val){case"object":if(val instanceof $){this._$logo_container.empty().append(val);this.showImage()}else{this.hideImage()}break;case"string":var html;if(val.charAt(0)=="<"){html=val}else{html=_.template('<img src="{{src}}" alt="{{alt}}" class="{{cls}}" />')({src:val,alt:this.name+" Footer Logo",cls:"js-footer-logo-image footer__logo__image"})}this._$logo_container.empty().append(html);this.showImage();break;default:this.hideImage()}}}})}BaseUI.generateDomProperties(Footer,{links:".js-footer-links",logo_container:".js-footer-logo"});_.extend(Footer.prototype,{Item:awf.ui.FooterItem,hideImage:function(){this._$logo_container.addClass("-is-hidden");return this},showImage:function(){this._$logo_container.removeClass("-is-hidden");return this},_renderLinks:function(links){if(links){var self=this;self.links=links;self.removeAllItems();_.forEach(links,function(link){var link_params={label:link.label,i18n:link.i18n,anchor_i18n:links.i18n,href:link.href,target:link.target};console.log("link_params: ",link_params);self.addItem(link_params)})}return this}})},function(module,exports){module.exports='<footer role="contentinfo" class="footer footer--fixed group -background-base" data-feature="page.footer">\n\n\t<nav role="navigation" aria-label="Footer Links" class="footer__nav" data-feature="footer.linklist" data-i18n="[aria-label]awf.page.footer.links">\n\t\t<ul class="js-footer-links footer__list-wrap"></ul>\n\t</nav>\n\n\t<div class="js-footer-logo footer__logo -is-hidden"></div>\n\n</footer>\n'},function(module,exports,__webpack_require__){module.exports=Button;var use=__webpack_require__(22),BaseUI=awf.ui.Base,template=__webpack_require__(163);use(BaseUI).toCreate(Button);function Button(params){params=params||{};this.template=params.template||this.template||template;awf.util.mixin.properties(this,params,{icon:{default:null,types:["string","null"],renderHandler:function(val,old_val){if(!val){console.warn("Cannot set button icon, no classname was given.")}if(old_val){this._$icon.removeClass(old_val)}this._$icon.addClass(val)}},text:{default:null,types:["string","null"],renderHandler:function(val){this._$text.html(val);if(this.tooltip){this.$el.attr("title",val)}}},tooltip:{default:false,types:["boolean"],renderHandler:function(val){if(val){this.$el.attr("title",this.text)}else{this.$el.removeAttr("title")}}},classname:{default:null,types:["string","null"],renderHandler:function(val){if(val){this.$el.attr("class","btn-control "+val)}else{this.$el.attr("class","btn-control")}}},feature:{default:null,types:["string","null"],
renderHandler:function(val){if(val){this.$el.attr("data-feature",val)}else{this.$el.removeAttr("data-feature")}}}});BaseUI.call(this,params)}BaseUI.generateDomProperties(Button,{text:".js-btn-text",icon:".js-btn-icon"});_.extend(Button.prototype,{render:function(){BaseUI.prototype.render.apply(this,arguments);var self=this;self.$el.on("click",function(){self.triggerHandler("click:button")});return self},hideIcon:function(){this._$icon.hide();return this},showIcon:function(){this._$icon.show();return this}})},function(module,exports){module.exports='<button class="btn-control">\n\t<span class="js-btn-text btn-control__text awf-access"></span>\n\t<em class="js-btn-icon btn-control__icon"></em>\n</button>\n'},function(module,exports,__webpack_require__){module.exports=MastheadTrayCollection;var template=__webpack_require__(165),Parent=awf.ui.Base;awf.util.use(Parent).toCreate(MastheadTrayCollection);function MastheadTrayCollection(params){console.group("Constructing Trays");console.log("params :",params);var self=this;params=params||{};this.template=params.template||this.template||template;this.trays={};this.hide_effect="slideUp";this.show_effect="slideDown";awf.util.mixin.properties(this,params,{overlay_active:{default:false,types:["boolean"],renderHandler:function(val){$("body")[val?"addClass":"removeClass"]("-overlay-active");this.hide_effect=val?"fadeOut":"slideUp";this.show_effect=val?"fadeIn":"slideDown"}},current:{default:null,types:["null","string"],renderHandler:function(val,old_val){var self=this,glass_namespace="masthead_trays";if(val){if(old_val){self._removeOldTray(self.trays[old_val],old_val)}else{self.triggerHandler("show")}if(self.trays[val].cog.views.masthead_tray.overlay){self.setOverlayActive(true)}self._$dropdown.addClass(val+"-active")[self.show_effect]("fast");self.trays[val].button.$el.addClass("-is-active");self.trays[val].container.$el.removeClass("-hidden");self.trays[val].view_instance=self.trays[val].cog.renderView("masthead_tray",self.trays[val].container.$el,{hide:function(){self.setCurrent(null);return this}});self._$dropdown_close.focus();$("body").off("click."+glass_namespace).on("click."+glass_namespace,function(e){if(!self.$el.is(e.target)&&self.$el.has(e.target).length===0){self.setCurrent(null)}}).off("keyup."+glass_namespace).on("keyup."+glass_namespace,function(e){if(e.keyCode==awf.util.keyCodes.esc){self.setCurrent(null)}})}else{$("body").off("click."+glass_namespace).off("keyup."+glass_namespace);if(old_val){self.triggerHandler("hide");self._$dropdown[self.hide_effect]("fast",function(){self._removeOldTray(self.trays[old_val],old_val)})}}}}});Parent.call(this,params);_.extend(this.children,{buttons:new awf.ui.Collection({parent:self._$buttons,Item:__webpack_require__(166)}),containers:new awf.ui.Collection({parent:self._$dropdown_content})});this.children.buttons.$el.addClass("masthead-trays__button-collection");console.groupEnd()}awf.ui.Base.generateDomProperties(MastheadTrayCollection,{buttons:".js-masthead-trays-buttons",dropdown:".js-masthead-trays-dropdown",dropdown_close:".js-masthead-trays-dropdown-close",dropdown_content:".js-masthead-trays-dropdown-content",tab_loop_to_last:".js-masthead-trays-loop-to-last",tab_loop_to_first:".js-masthead-trays-loop-to-first"});_.extend(MastheadTrayCollection.prototype,{render:function(){var self=this;Parent.prototype.render.call(this);self._$dropdown_close.on("click",function(){self.setCurrent(null)});self._$tab_loop_to_first.on("focus",function(){self._$dropdown_close.focus()});self._$tab_loop_to_last.on("focus",function(){var $elem=self._$dropdown_content.find(":tabbable").last();if($elem.length>0){$elem.focus()}else{self._$dropdown_close.focus()}})},addItem:function(cog){var self=this;console.group("Adding cog to MastheadTrayCollection");console.log("cog: ",cog);if(!(cog.views&&cog.views.masthead_tray)){throw new Error("Cannot add cog to MastheadTrayCollection - cog has no `masthead_tray` view defined.")}console.group("Creating the button");var button=self.children.buttons.addItem({text:cog.views.masthead_tray.label,i18n:{text:cog.views.masthead_tray.i18n_label},icon:cog.views.masthead_tray.icon,tooltip:true,classname:"-awf-link -text-decoration-none"});button.$el.attr("data-cog",cog.id);console.log(button);console.groupEnd();console.group("Creating the container");var container=self.children.containers.addItem();container.$el.attr("data-cog",cog.id);console.log(container);console.groupEnd();var tray={cog:cog,button:button,container:container};tray.container.$el.addClass("-hidden");tray.button.on("click:button",function(ev){if(self.current===cog.id){self.setCurrent(null)}else{self.setCurrent(cog.id)}});this.trays[cog.id]=tray;console.groupEnd()},removeItem:function(key){var index=_.indexOf(_.keys(this.trays),key);this.children.buttons.removeItem(index);this.children.containers.removeItem(index);return this},_removeOldTray:function(old_tray,old_val){old_tray.view_instance.destroy();old_tray.view_instance=null;old_tray.container.$el.addClass("-hidden");old_tray.button.$el.removeClass("-is-active").focus();this._$dropdown.removeClass(old_val+"-active");this.setOverlayActive(false)}})},function(module,exports){module.exports='<div class="masthead-trays">\n\t<div class="js-masthead-trays-buttons masthead-trays__buttons"></div>\n\t<div id="masthead-trays-dropdown" class="js-masthead-trays-dropdown masthead-trays__dropdown -background-base" role="region" aria-label="Masthead Trays" data-i18n="[aria-label]awf.page.masthead.trays.label">\n\t\t<button class="awf-access js-masthead-trays-loop-to-last" aria-hidden="true">Loop to last</button>\n\n\t\t<button class="js-masthead-trays-dropdown-close masthead-trays__dropdown__close icon-awf-op-times -awf-focus">\n\t\t\t<span class="awf-access" data-i18n="awf.common.close">Close</span>\n\t\t</button>\n\t\t<div class="js-masthead-trays-dropdown-content masthead-trays__dropdown__content"></div>\n\n\t\t<button class="awf-access js-masthead-trays-loop-to-first" aria-hidden="true">Loop to first</button>\n\t</div>\n</div>\n'},function(module,exports){module.exports=MastheadTrayButtonItem;var Parent=awf.ui.Button;awf.util.use(Parent).toCreate(MastheadTrayButtonItem);function MastheadTrayButtonItem(params){var self=this;params=params||{};this._default_parent=function(){if(this.collection){return this.collection.$el}return null};awf.util.mixin.collectionItem(this,params);Parent.apply(this,arguments)}_.extend(MastheadTrayButtonItem.prototype,{})},function(module,exports,__webpack_require__){module.exports=Message;var use=__webpack_require__(22),BaseUI=awf.ui.Base,template=__webpack_require__(168);use(BaseUI).toCreate(Message);function Message(params){params=params||{};params.template=params.template||this.template||template;this.timeout=null;BaseUI.call(this,params);awf.util.mixin.properties(this,params,{type:{default:null,types:["null","string"],renderHandler:function(val){this.$el.removeAttr("class").attr("class","awf-message");if(val){this.$el.addClass("awf-message--"+val)}}},icon:{default:null,types:["null","string"],renderHandler:function(val){this._$icon.removeAttr("class").attr("class","js-message-icon awf-message__icon");if(val){this._$icon.addClass(val)}}},message:{default:null,types:["null","string"],renderHandler:function(val){this._$message.empty();if(val)this._$message.html(val)}},show_dismiss:{default:true,types:["boolean"],renderHandler:function(val){if(val)this._$dismiss.show();else this._$dismiss.hide()}}})}BaseUI.generateDomProperties(Message,{icon:".js-message-icon",message:".js-message-message",dismiss:".js-message-dismiss"});_.extend(Message.prototype,{render:function(){var self=this;BaseUI.prototype.render.apply(self,arguments);self._$dismiss.on("click keypress",function(e){if(e.type=="click"||e.keyCode==awf.util.keyCodes.enter)self.triggerHandler("dismiss")});self._show();return self},_show:function(){var dfr=$.Deferred();this.$el.slideDown("fast",function(){dfr.resolve("message shown")});return dfr},hide:function(){var self=this,dfr=$.Deferred();clearTimeout(this.timeout);self.$el.slideUp("fast",function(){self.destroy();dfr.resolve("message hidden")});return dfr},andDismissIn:function(seconds){var self=this;if(arguments.length===0||typeof seconds!="number"||this.$el===null)return null;this.timeout=setTimeout(function(){self.hide()},Math.round(seconds*1e3));return self}})},function(module,exports){module.exports='<div class="awf-message" role="alert">\n\t<div class="awf-message-flex">\n\t\t<span class="js-message-icon awf-message__icon"></span>\n\t\t<span class="js-message-message awf-message__message"></span>\n\t\t<button class="js-message-dismiss awf-message__dismiss icon-awf-op-times-bold -awf-focus -color-alt" title="Dismiss" data-i18n="[title]awf.common.dismiss"><span class="awf-access" data-i18n="awf.common.dismiss">Dismiss</span></button>\n\t</div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=Modal;var use=__webpack_require__(22),BaseUI=awf.ui.Base,template=__webpack_require__(170);use(BaseUI).toCreate(Modal);function Modal(params){console.group("Constructing Modal");params=params||{};params.template=params.template||this.template||template;this.namespace=params.namespace||this.namespace||awf.util.randomID();awf.util.mixin.properties(this,params,{content:{default:null,types:["null","string","object"],renderHandler:function(val){this._$modal_container.html(val)}},label:{default:"Dialog Window",types:["null","string"],renderHandler:function(val){val=val||"Dialog Window";this._$label.html(val)}},active_state:{default:false,types:["boolean"],renderHandler:function(val){var self=this;if(val){$("body").addClass("-modal-active").off("keyup.modal."+self.namespace).on("keyup.modal."+self.namespace,function(e){if(e.keyCode==awf.util.keyCodes.esc)self.triggerHandler("request-close")});self.$el.attr("aria-hidden","false").removeAttr("style").siblings().attr("aria-hidden","true");setTimeout(function(){self._$modal_container.find(":tabbable").first().focus()},10)}else{$("body").removeClass("-modal-active").off("keyup.modal."+self.namespace);self.$el.attr("aria-hidden","true").siblings().attr("aria-hidden","false");self.setContent(null).setWidth(null).setHeight(null)}}},width:{default:null,types:["null","number","string"],renderHandler:function(val){if(val){val=isNaN(val)?val:val+"px";this._$modal_container.css("width",val)}else{this._$modal_container.removeStyle("width")}}},height:{default:null,types:["null","number"],renderHandler:function(val){if(val){val=isNaN(val)?val:val+"px";this._$modal_container.css("height",val)}else{this._$modal_container.removeStyle("height")}}}});BaseUI.call(this,params);console.groupEnd()}BaseUI.generateDomProperties(Modal,{modal_container:".js-modal-inner",loop_last:".js-modal-loop-to-last",loop_first:".js-modal-loop-to-first",label:".js-dialog-label"});_.extend(Modal.prototype,{render:function(){var self=this;BaseUI.prototype.render.apply(self,arguments);self.$el.on("click",function(e){if(self.$el.is(e.target))self.triggerHandler("request-close")});self._$loop_last.on("focus",function(){self._$modal_container.find(":tabbable").last().focus()});self._$loop_first.on("focus",function(){self._$modal_container.find(":tabbable").first().focus()});return self}})},function(module,exports){module.exports='<div class="awf-modal" role="dialog" aria-hidden="true" aria-labelledby="dialog-label">\n\t<label id="dialog-label" class="js-dialog-label awf-access"></label>\n\t<button class="awf-access js-modal-loop-to-last" aria-hidden="true">Loop to last</button>\n\t<div class="js-modal-inner awf-modal__inner"></div>\n\t<button class="awf-access js-modal-loop-to-first" aria-hidden="true">Loop to first</button>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=Search;var use=__webpack_require__(22),BaseUI=awf.ui.Base,template=__webpack_require__(172);use(BaseUI).toCreate(Search);function Search(params){console.group("Constructing Search");console.log("params: ",params);params=params||{};var self=this;params.template=params.template||self.template||template;BaseUI.call(self,params);self.children.stylesheet=new awf.ui.Stylesheet;awf.util.mixin.properties(self,params,{label:{default:"Search",types:["string","null"],renderHandler:function(val){if(!val)val="Search";this._$access_label.html(val);this._$input.attr("placeholder",val);this._$submit.attr({alt:val,title:val}).find(".awf-access").html(val)}},term:{default:"",types:["string"],handler:function(val){val=val||"";this[val.length>0?"showClear":"hideClear"]()}},active_state:{default:false,types:["boolean"],handler:function(val){$("body")[val?"addClass":"removeClass"]("-search-is-active");if(val===false){$("body").removeClass("-search-mobile-is-active")}if(val){if(this.getValue().length===0){this.showFocusContainer()}}else{this.hideFocusContainer()}}},endpoint:{default:null,types:["string","null"]}});if(params.focus_text){self.setFocusContent(params.focus_text)}if(params.i18n_focus_text){self._$focus.attr("data-i18n",params.i18n_focus_text).localize()}console.groupEnd()}BaseUI.generateDomProperties(Search,{access_label:".js-access-label",input:".js-search-input",submit:".js-search-submit",clear:".js-search-clear",focus:".js-search-focus-container"});_.extend(Search.prototype,{render:function(){BaseUI.prototype.render.call(this);this._bindEvents();return this},_bindEvents:function(){var self=this,key_code_map={27:"esc",37:"left",38:"up",39:"right",40:"down",9:"tab"};self.$el.off("focusin focusout submit keydown keyup").on("submit",function(ev){ev.preventDefault();self.triggerHandler("submit",[self.getValue()])}).on("keydown",function(ev){var kc=ev.keyCode;if(key_code_map[kc])self.triggerHandler("keydown:"+key_code_map[kc],{ev:ev})}).on("keyup",function(ev){var kc=ev.keyCode;if(key_code_map[kc])self.triggerHandler("keyup:"+key_code_map[kc],{ev:ev});if(key_code_map[kc]=="esc"){if(self.term===""||self.term===null){self._$input.blur()}else{self._$clear.trigger("click")}}else{self.setTerm(self.getValue())}if(self.getValue().length>0){self.hideFocusContainer()}else if(self.active_state){self.showFocusContainer()}}).on("focusin",function(){self.setActiveState(true)}).on("focusout",function(){if(self.getValue().length===0){self.setActiveState(false)}});self._$clear.off("click").on("click",function(ev){self.triggerHandler("click:clear");self.setValue(null);self._$input.focus()});self._$submit.off("click").on("click",function(ev){self.triggerHandler("click:submit",[self.term])});return self},getValue:function(){return this._$input.val()},setValue:function(val){val=val||"";this._$input.val(val);this.setTerm(val);return this},hideClear:function(){this._$clear.removeClass("-is-active").attr("tabindex","-1");return this},showClear:function(){this._$clear.addClass("-is-active").attr("tabindex","0");return this},isFocused:function(){return this._$input.is(":focus")},setFocusContent:function(content){this._$focus.html(content)},showFocusContainer:function(){this._$focus.addClass("-is-active")},hideFocusContainer:function(){this._$focus.removeClass("-is-active")}})},function(module,exports){module.exports='<form class="awf-search" action="javascript:;" role="search" aria-label="Rapid Search Form" data-i18n="[aria-label]awf.page.masthead.search.form_label">\n\t<div class="awf-search__wrap">\n\t\t<label for="awf-search-input" class="js-access-label awf-access" data-i18n="awf.page.masthead.search.label"></label>\n\t\t<input type="search" id="awf-search-input" class="js-search-input awf-search__input -awf-focus -border-color-link" autocomplete="off" data-i18n="[placeholder]awf.page.masthead.search.label" />\n\t\t<button type="reset" class="js-search-clear awf-search__clear icon-awf-op-times-bold -color-alt" tabindex="-1"><span class="awf-access" data-i18n="awf.common.clear">Clear</span></button>\n\t\t<button type="submit" class="js-search-submit awf-search__submit icon-awf-search -awf-link -text-decoration-none" data-i18n="[title]awf.page.masthead.search.label;[alt]awf.page.masthead.search.label"><span class="awf-access" data-i18n="awf.page.masthead.search.label"></span></button>\n\t\t<div class="js-search-focus-container awf-search__focus-container -border-color-base -background-base"></div>\n\t</div>\n</form>\n'},function(module,exports,__webpack_require__){module.exports=BucketItem;var use=__webpack_require__(22),Parent=awf.ui.CollectionItem,BaseUI=awf.ui.Base;use(Parent).toCreate(BucketItem);function BucketItem(params){params=params||{};var template=params.template||this.template||__webpack_require__(174);this.aria_id=params.aria_id=awf.util.randomID();this.layout=params.layout||this.layout||"default";if(!BucketItem.layouts[this.layout]){throw new Error("Search result item does not have layout type `"+this.layout+"`.")}var innerHTML=_.template(BucketItem.layouts[this.layout])({data:params});this.template=_.template(template)({html:innerHTML,aria_id:this.aria_id});this._default_parent=function(){if(this.collection){return this.collection._$items}return null};this.on_click=params.on_click||null;awf.util.mixin.properties(this,params,{url:{default:null,types:["string","null"],renderHandler:function(val){if(val){this.$el.attr({onclick:"window.open('"+val+"'); return false;",onkeypress:"if (event.keyCode == awf.util.keyCodes.enter) { window.open('"+val+"'); } else { return true; }"})}else{this.$el.removeAttr("onclick").removeAttr("onkeypress")}}}});Parent.apply(this,arguments)}BaseUI.generateDomProperties(BucketItem,{tooltip:".js-tooltip"});_.extend(BucketItem.prototype,{render:function(){Parent.prototype.render.call(this);this._bindEvents();return this},_bindEvents:function(){var self=this,hover_timeout=null;self.$el.off("mouseenter.internal focus.internal mouseleave.internal focusout.internal keypress.internal click.internal").on("mouseenter.internal focus.internal",function(ev){hover_timeout=setTimeout(function(){self.triggerHandler("hover-start")},500)}).on("mouseleave.internal focusout.internal",function(ev){setTimeout(function(){var $active=$(document.activeElement);if(!(ev.type=="focusout"&&(self.$el.is($active)||self.$el.has($active).length))){clearTimeout(hover_timeout);self.triggerHandler("hover-end")}},10)}).on("click.internal",function(ev){if(self.on_click){self.on_click.call(this,ev)}self.triggerHandler("result:click")}).on("keypress.internal",function(ev){if(ev.keyCode==awf.util.keyCodes.enter){if(self.on_click){self.on_click.call(this,ev)}self.triggerHandler("result:click")}});self._$tooltip.off("click.internal").on("click.internal",function(ev){ev.stopImmediatePropagation()});self.$el.find("a, button, input").off("click.internal keypress.internal").on("click.internal",function(ev){ev.stopImmediatePropagation()}).on("keypress.internal",function(ev){if(ev.keyCode==awf.util.keyCodes.enter)ev.stopImmediatePropagation()});return self}});_.extend(BucketItem,{layouts:{default:__webpack_require__(175),command:__webpack_require__(176)}})},function(module,exports){module.exports='<li tabindex="0" class="js-bucket-item awf-bucket-item" role="listitem" aria-labelledby="{{aria_id}}">\n\t{{html}}\n</li>\n'},function(module,exports){module.exports='<div class="-layout-default">\n\t<div class="awf-bucket-item__image">{{data.image}}</div>\n\t<div class="awf-bucket-item__text">\n\t\t<div id="{{data.aria_id}}" class="awf-bucket-item__title">{{data.title}}</div>\n\t\t<div class="awf-bucket-item__description -color-alt">{{data.description}}</div>\n\t</div>\n\t<div class="js-tooltip awf-bucket-item__tooltip -background-base">{{data.tooltip}}</div>\n</div>\n'},function(module,exports){module.exports='<div class="-layout-commands group">\n\t<div class="awf-bucket-item__title -color-alt">\n\t\t<span id="{{data.aria_id}}">{{data.title}}</span>\n\t\t{[ if (data.example) { ]}<div>(e.g., "{{data.title}} {{data.example}}")</div>{[ } ]}\n\t</div>\n\t{[ if (data.description) { ]}<div class="awf-bucket-item__description -color-alt">{{data.description}}</div>{[ } ]}\n</div>\n'},function(module,exports,__webpack_require__){module.exports=Bucket;var use=__webpack_require__(22),Parent=awf.ui.Collection,template=__webpack_require__(178),BaseUI=awf.ui.Base;use(Parent).toCreate(Bucket);function Bucket(params){params=params||{};this.template=params.template||this.template||template;this._default_parent=function(){if(this.collection){return this.collection._$buckets}return null};awf.util.mixin.collectionItem(this,params);awf.util.mixin.properties(this,params,{label:{default:null,types:["string","null"],renderHandler:function(val){this._$label.html(val)}},classname:{default:null,types:["null","string"],renderHandler:function(val,old_val){if(old_val){this._$items.removeClass(old_val)}if(val){this._$items.addClass(val)}}}});Parent.apply(this,arguments)}BaseUI.generateDomProperties(Bucket,{label:".js-bucket-label",items:".js-bucket-items"});_.extend(Bucket.prototype,{Item:awf.ui.BucketItem,renderResults:function(results){if(results){var self=this;self.removeAllItems();_.forEach(results,function(result){self.addItem(result)})}return this}})},function(module,exports){module.exports='<div class="awf-bucket">\n\t<h2 class="js-bucket-label awf-bucket__label -border-color-base"></h2>\n\t<ul class="js-bucket-items awf-bucket__items" role="list"></ul>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=Results;var use=__webpack_require__(22),Parent=awf.ui.Collection,template=__webpack_require__(180),BaseUI=awf.ui.Base;use(Parent).toCreate(Results);function Results(params){var self=this;params=params||{};self.template=params.template||self.template||template;self.aria_id=awf.util.randomID();self.default_footer="Press Enter to see all search results.";Parent.call(self,params);awf.util.mixin.properties(self,params,{footer:{default:self.default_footer,types:["string","null"],renderHandler:function(val){this._$footer.html(val)}},active_state:{default:false,types:["boolean"],renderHandler:function(val){this.$el[val?"addClass":"removeClass"]("-is-active")}}})}BaseUI.generateDomProperties(Results,{buckets:".js-results-wrap",footer:".js-results-footer"});_.extend(Results.prototype,{Item:awf.ui.Bucket,render:function(){Parent.prototype.render.call(this);this.setId(this.aria_id);this._bindEvents();return this},_bindEvents:function(){var self=this;self.$el.off("keyup.internal").on("keyup.internal",function(ev){if(ev.keyCode==awf.util.keyCodes.esc){self.triggerHandler("results:esc")}}).on("keydown.internal",function(ev){if(ev.keyCode==awf.util.keyCodes.up){self.triggerHandler("results:up",{ev:ev})}if(ev.keyCode==awf.util.keyCodes.down){self.triggerHandler("results:down",{ev:ev})}});return self},renderBuckets:function(buckets){if(buckets){var self=this;self.removeAllItems();_.forEach(buckets,function(bucket){self.addItem(bucket)})}return this}})},function(module,exports){module.exports='<div class="awf-results -border-color-base -background-base" role="region" aria-label="Search Results" data-i18n="[aria-label]awf.page.masthead.search.results_label">\n\t<div class="js-results-wrap awf-results__wrap"></div>\n\t<div class="js-results-footer awf-results__footer -awf-focus -border-color-base" data-i18n="awf.page.masthead.search.results_footer"></div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=Settings;var use=__webpack_require__(22),BaseUI=awf.ui.Base,template=__webpack_require__(182);use(BaseUI).toCreate(Settings);function Settings(params){console.group("Constructing Settings");console.log("params :",params);if(params===true||params===undefined)params={};params.template=params.template||this.template||template;this.label=params.label||"";BaseUI.call(this,params);if(params.theme_switcher){awf.page.children.masthead.children.trays.one("showing.settings",function(){var theme_switcher_params=params.theme_switcher;this.theme_switcher=new awf.ui.ThemeSwitcher({themes:awf.page.themes.items})})}console.groupEnd()}_.extend(Settings.prototype,{render:function(){var self=this;BaseUI.prototype.render.apply(self,arguments);if(self.label)self.setAriaLabel(self.label);return self},setAriaLabel:function(value){this.$el.attr("aria-label",value);return this}})},function(module,exports){module.exports='<div role="region" class="settings" aria-label="">\n</div>\n'},function(module,exports,__webpack_require__){module.exports=Sitelinks;var use=__webpack_require__(22),BaseUI=awf.ui.Base,template=__webpack_require__(184);use(BaseUI).toCreate(Sitelinks);function Sitelinks(params){var self=this;if(params===true||params===undefined)params={};params.template=params.template||this.template||template;this.label=params.label||"";this.json=params.json||null;BaseUI.call(this,params)}BaseUI.generateDomProperties(Sitelinks,{tabs:".js-sitelinks-tabs",panels:".js-sitelinks-panels"});_.extend(Sitelinks.prototype,{_tab:'<li class="sitelinks__tablist__tab -awf-link-inverted"></li>',_panel:'<div class="sitelinks__panel"></div>',_h2:'<h2 class="sitelinks__panel__heading"></h2>',_link:'<a class="sitelinks__panel__a" href="javascript:;"></a>',_avoid:'<span class="avoid-col-break"></span>',render:function(){var self=this;BaseUI.prototype.render.apply(self,arguments);if(this.loading)return self;if(self.label)self.setAriaLabel(self.label);if(self.json)self.renderSiteLinks();return self},renderSiteLinks:function(){if(this.$el===null)return this;var self=this,first_tab=true;_.forEach(self.json,function(item){createTab(item)});function createTab(item){var $tab=$(self._tab),$panel=$(self._panel),tab_id=awf.util.randomID();panel_id=awf.util.randomID();$tab.attr({id:tab_id,"aria-selected":"false","aria-controls":panel_id,tabindex:"-1",role:"tab"}).html(item.tab);$panel.attr({id:panel_id,"aria-labelledby":tab_id,"aria-hidden":"true",role:"tabpanel"});if(first_tab){first_tab=false;$tab.addClass("-is-active").attr({"aria-selected":"true",tabindex:"0"});$panel.addClass("-is-active").attr("aria-hidden","false")}self._$tabs.append($tab);createPanel(item.panel,$panel);self._$panels.append($panel);attachEvents($tab,$panel)}function createPanel(panel,$panel){_.forEach(panel,function(item){var $avoid=$(self._avoid);$avoid.appendTo($panel);if(item.heading!==""){$(self._h2).html(item.heading).appendTo($avoid)}createLinks(item.links,$panel,$avoid);$panel.find("a").first().addClass("-first");$panel.find("a").last().addClass("-last")})}function createLinks(links,$panel,$avoid){var break_at=links.length>4?2:links.length;_.forEach(links,function(link){$(self._link).attr({href:link.url,target:link.target||"_blank"}).html(link.text).appendTo(break_at>0?$avoid:$panel);--break_at})}function attachEvents($tab,$section){$tab.on("click",function(e){$tab.addClass("-is-active").attr({"aria-selected":"true",tabindex:"0"}).siblings().removeClass("-is-active").attr({"aria-selected":"false",tabindex:"-1"});$tab.focus();$section.addClass("-is-active").attr("aria-hidden","false").siblings().removeClass("-is-active").attr("aria-hidden","true");setTimeout(function(){$section.find(".avoid-col-break").css("display","block").css("display","")},10)}).on("keydown",function(e){var tabIndex=$tab.index(),tabsLength=$tab.siblings().length;if(e.altKey||e.ctrlKey){return true}switch(e.keyCode){case awf.util.keyCodes.left:case awf.util.keyCodes.up:{if(tabIndex===0){$tab.siblings().last().trigger("click")}else{$tab.prev().trigger("click")}e.stopPropagation();return false}case awf.util.keyCodes.right:case awf.util.keyCodes.down:{if(tabIndex==tabsLength){$tab.siblings().first().trigger("click")}else{$tab.next().trigger("click")}e.stopPropagation();return false}case awf.util.keyCodes.home:{$tab.siblings().add($tab).first().trigger("click");e.stopPropagation();return false}case awf.util.keyCodes.end:{$tab.siblings().add($tab).last().trigger("click");e.stopPropagation();return false}}})}return self},setSiteLinks:function(data){this.json=data;if(this.loading)this.loading=false;this.render();return this},setAriaLabel:function(value){this.$el.attr("aria-label",value);return this}})},function(module,exports){module.exports='<div role="navigation" class="sitelinks" aria-label="" tabindex="-1">\n\t<div class="sitelinks__tab-wrapper">\n\t\t<ul class="js-sitelinks-tabs sitelinks__tablist" role="tablist" tabindex="-1"></ul>\n\t</div>\n\t<div class="js-sitelinks-panels sitelinks__panels"></div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=Megamenu;var use=__webpack_require__(22),Parent=awf.ui.Base,template=__webpack_require__(186);use(Parent).toCreate(Megamenu);function Megamenu(params){var self=this;params=params||{};params.template=params.template||self.template||template;self.id=params.id||this.id||awf.util.randomID();awf.util.mixin.properties(self,params,{label:{default:"megamenu",types:["string"],renderHandler:function(val){var close_text="Close";if(awf.can_use_i18next){close_text=i18next.t("awf.common.close")}this.$el.attr("aria-label",val);this._$close.attr("title",close_text+" "+val);this._$close_text.empty().html(close_text+" "+val)}},json:{default:null,types:["null","object","array"],renderHandler:function(data){this.renderMegamenu()}},icon:{default:null,types:["null","string"],renderHandler:function(val,old_val){if(val){this._$icons.removeClass(old_val).addClass(val).show()}else{this._$icons.removeClass(old_val).hide()}}},active_tab:{default:null,types:["null","string"],renderHandler:function(val,old_val){var self=this;if(val){var $tab=self._$tabs.find("#"+val),$section=self._$panels.find("[aria-labelledby="+val+"]");self.$el.addClass("-is-active");self._$close.off("click.megamenu."+self.id).on("click.megamenu."+self.id,function(){self.setActiveTab(null);$tab.focus()}).show();$tab.addClass("-is-active").attr({"aria-selected":"true","aria-expanded":"true",tabindex:"0"}).siblings().removeClass("-is-active").attr({"aria-selected":"false","aria-expanded":"false",tabindex:"-1"});$tab.focus();$section.addClass("-is-active").attr("aria-hidden","false").siblings().removeClass("-is-active").attr("aria-hidden","true");if(!old_val){self._$panels.slideDown("fast")}setTimeout(function(){$section.find(".avoid-col-break").css("display","block").css("display","")},10);self._$loop_last.add(self._$loop_first).attr("tabindex","0");$("body").off("keydown.megamenu."+self.id).off("click.megamenu."+self.id).on("click.megamenu."+self.id,function(e){if(!self.$el.is(e.target)&&self.$el.has(e.target).length===0){self.setActiveTab(null)}}).on("keydown.megamenu."+self.id,function(e){if(e.keyCode==awf.util.keyCodes.esc){self.setActiveTab(null);$tab.focus()}})}else if(old_val){$("body").off("keydown.megamenu."+self.id).off("click.megamenu."+self.id);self._$loop_last.add(self._$loop_first).attr("tabindex","-1");self._$panels.slideUp("fast",function(){self._$close.off("click.megamenu."+self.id).hide();self.$el.removeClass("-is-active");self._$tabs.children().removeClass("-is-active").attr({"aria-selected":"false","aria-expanded":"false",tabindex:"0"})}).children().removeClass("-is-active").attr("aria-hidden","true")}}}});Parent.call(self,params)}Parent.generateDomProperties(Megamenu,{tabs:".js-megamenu-tabs",icons:".js-megamenu-icon",panels:".js-megamenu-panels",close:".js-megamenu-close",close_text:".js-megamenu-close-text",loop_last:".js-modal-loop-to-last",loop_first:".js-modal-loop-to-first"});_.extend(Megamenu.prototype,{_tab:'<li class="awf-megamenu__tablist__tab -awf-link"><em class="js-megamenu-icon awf-megamenu__tablist__tab__icon icon-awf-chevron-down-heavy"></em></li>',_panel:'<div class="awf-megamenu__panel"></div>',_h2:'<h2 class="awf-megamenu__panel__heading"></h2>',_link:'<a class="awf-megamenu__panel__a" href="javascript:;"></a>',_avoid:'<span class="avoid-col-break"></span>',render:function(){var self=this;Parent.prototype.render.apply(self,arguments);self._$loop_last.on("focus",function(){var $tabbable=self.$el.find(":tabbable"),length=$tabbable.length;$tabbable[length-2].focus()});self._$loop_first.on("focus",function(){self.$el.find(":tabbable")[1].focus()});return self},renderMegamenu:function(){var self=this;if(self.$el===null){return self}self._$tabs.empty();self._$panels.empty();
_.forEach(self.json,function(item){self._createTab(item)});return self},_createTab:function(item){var self=this,$tab=$(self._tab),$panel=$(self._panel),tab_id=awf.util.randomID();panel_id=awf.util.randomID();$tab.attr({id:tab_id,"aria-selected":"false","aria-controls":panel_id,tabindex:"0",role:"tab"}).prepend(item.tab);$panel.attr({id:panel_id,"aria-labelledby":tab_id,"aria-hidden":"true",role:"tabpanel"});self._$tabs.append($tab);self._createPanel(item.panel,$panel);self._$panels.append($panel);self._attachEvents($tab,$panel)},_createPanel:function(panel,$panel){var self=this;_.forEach(panel,function(item){var $avoid=$(self._avoid);$avoid.appendTo($panel);if(item.heading!==""){$(self._h2).html(item.heading).appendTo($avoid)}self._createLinks(item.links,$panel,$avoid);$panel.find("a").first().addClass("-first");$panel.find("a").last().addClass("-last")})},_createLinks:function(links,$panel,$avoid){var self=this,break_at=links.length>4?2:links.length;_.forEach(links,function(link){$(self._link).attr({href:link.url,target:link.target||"_blank"}).html(link.text).appendTo(break_at>0?$avoid:$panel);--break_at})},_attachEvents:function($tab){var self=this,id=$tab.attr("id");$tab.on("click",function(e){self.setActiveTab(self.active_tab==id?null:id)}).on("keydown",function(e){var tabIndex=$tab.index(),tabsLength=$tab.siblings().length;if(e.altKey||e.ctrlKey){return true}switch(e.keyCode){case awf.util.keyCodes.enter:case awf.util.keyCodes.space:e.preventDefault();$tab.trigger("click");break;case awf.util.keyCodes.left:case awf.util.keyCodes.up:if(self.active_tab){if(tabIndex===0){$tab.siblings().last().trigger("click")}else{$tab.prev().trigger("click")}e.preventDefault();e.stopPropagation()}break;case awf.util.keyCodes.right:case awf.util.keyCodes.down:if(self.active_tab){if(tabIndex==tabsLength){$tab.siblings().first().trigger("click")}else{$tab.next().trigger("click")}e.preventDefault();e.stopPropagation()}break;case awf.util.keyCodes.home:if(self.active_tab){if(tabIndex!==0){$tab.siblings().add($tab).first().trigger("click")}e.preventDefault();e.stopPropagation()}break;case awf.util.keyCodes.end:if(self.active_tab){if(tabIndex!=tabsLength){$tab.siblings().add($tab).last().trigger("click")}e.preventDefault();e.stopPropagation()}break;default:break}})}})},function(module,exports){module.exports='<div role="navigation" class="awf-megamenu -background-base" aria-label="" tabindex="-1">\n\t<button class="awf-access js-modal-loop-to-last" aria-hidden="true" tabindex="-1">Loop to last</button>\n\t<div class="awf-megamenu__tab-wrapper">\n\t\t<button class="js-megamenu-close awf-megamenu__close icon-awf-op-times -awf-focus">\n\t\t\t<span class="js-megamenu-close-text awf-access"></span>\n\t\t</button>\n\t\t<ul class="js-megamenu-tabs awf-megamenu__tablist" role="tablist" tabindex="-1"></ul>\n\t</div>\n\t<div class="js-megamenu-panels awf-megamenu__panels -background-base"></div>\n\t<button class="awf-access js-modal-loop-to-first" aria-hidden="true" tabindex="-1">Loop to first</button>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=Stylesheet;var use=__webpack_require__(22),BaseUI=awf.ui.Base;use(BaseUI).toCreate(Stylesheet);function Stylesheet(params){params=params||{};this.template='<style type="text/css"></style>';this.content=params.content||this.content||"";BaseUI.apply(this,arguments)}_.extend(Stylesheet.prototype,{render:function(){BaseUI.prototype.render.call(this);if(this.content){this.$el.html(this.content);if(this.$el.parent().length===0)$("head").append(this.$el)}return this},css:function(new_css){if(arguments.length===0)return this.content;this.content=new_css;if(new_css){if(this.$el)return this.render()}else{this.destroy()}return this}})},function(module,exports,__webpack_require__){module.exports=TitledCard;var use=__webpack_require__(22),Card=awf.ui.Card,BaseUI=awf.ui.Base,template=__webpack_require__(189);use(Card).toCreate(TitledCard);function TitledCard(params){var $card=$(awf.ui.Card.template),$div=$("<div></div>");$card.addClass("-titled-card");$card.find(".js-card").append($(template));$div.append($card);this.template=$div.html();params=params||{};awf.util.mixin.properties(this,params,{title:{default:null,types:["null","string"],renderHandler:function(val){console.log("-- i18n -- TitledCard handled title with `"+val+"`.");this._$title.html(val)}},content:{default:null,types:["null","string","object"],renderHandler:function(val){this._$content.html(val)}},aria_label:{default:null,types:["null","string"],renderHandler:function(val){this._$title.attr("aria-label",val)}}});Card.apply(this,arguments)}BaseUI.generateDomProperties(TitledCard,{titlebar:".js-card-titlebar",title:".js-card-title",content:".js-card-content",message:".js-card-message",cta:".js-card-cta"});_.extend(TitledCard.prototype,{render:function(){var self=this;Card.prototype.render.apply(self,arguments);self._$title.attr("id",self.aria_id);self._$content.attr("aria-labelledby",self.aria_id);self._$title.on("click",function(){self.triggerHandler("request-open")});self._$card.on("keyup",function(e){var $target=$(e.target);if($target[0]!=self._$card[0])return;if(e.keyCode===awf.util.keyCodes.enter){self.triggerHandler("request-open")}});return self},postMessage:function(type,message,show_dismiss){return awf.util.postMessage(this._$message,type,message,show_dismiss)}})},function(module,exports){module.exports='<div class="js-card-titlebar awf-card__titlebar">\n\t<h2 class="js-card-title awf-card__titlebar__title -color-alt js-drag-handle"></h2>\n\t<div class="js-card-cta awf-card__titlebar__cta -color-alt"></div>\n\t<span class="awf-card__titlebar__hr -border-color-base"></span>\n</div>\n<div class="js-card-message awf-card__message"></div>\n<div class="js-card-content awf-card__content" role="region"></div>\n'},function(module,exports,__webpack_require__){module.exports=LargeCard;var use=__webpack_require__(22),TitledCard=awf.ui.TitledCard,BaseUI=awf.ui.Base;use(TitledCard).toCreate(LargeCard);function LargeCard(){var self=this;TitledCard.apply(self,arguments);self.children.close=new awf.ui.Button({parent:function(){return self._$cta},classname:"js-large-card-close awf-card__titlebar__cta__close -awf-focus -awf-link-inverted",icon:"icon-awf-op-times",text:"Close",i18n:{text:"awf.common.close"},renderHandler:function(){this.$el.on("click",function(){self.triggerHandler("request-close")})}})}_.extend(LargeCard.prototype,{render:function(){var self=this;TitledCard.prototype.render.apply(this,arguments);self.$el.addClass("-large-card");self._$card.removeClass("-awf-focus").removeAttr("tabindex");self._$title.removeClass("js-drag-handle");self._$title.off("click");self.$el.off("keyup");return self}})},function(module,exports,__webpack_require__){module.exports=Notifications;var use=__webpack_require__(22),BaseUI=awf.ui.Base,template=__webpack_require__(192);use(BaseUI).toCreate(Notifications);function Notifications(params){params=params||{};params.template=params.template||this.template||template;params.appid=params.appid||"";this.json=params.json||[];this.ls_key=params.appid+":banner-dismissed-date";BaseUI.call(this,params)}BaseUI.generateDomProperties(Notifications,{dismiss:".js-notifications-dismiss",icon:".js-notifications-icon",title:".js-notifications-title",description:".js-notifications-description"});_.extend(Notifications.prototype,{render:function(){var self=this;BaseUI.prototype.render.apply(self,arguments);self.items=[];self.active=null;self._$dismiss.on("click",function(){self.dismiss()});_.forEach(self.json,function(item){self.addItem(item)});self.updateNotifications();return self},show:function(){var self=this;self.$el.attr("aria-hidden","false").slideDown("fast");self._$dismiss.attr("aria-expanded","true");return self},hide:function(){var self=this;self.$el.attr("aria-hidden","true").slideUp("fast");self._$dismiss.attr("aria-expanded","false");return self},setTitle:function(new_value){this._$title.html(new_value);return this},setDescription:function(new_value){this._$description.html(new_value);return this},dismiss:function(){var self=this;if(!self.active){self.hide();return false}localStorage.setItem(self.ls_key,new Date);self.hide();self.active=null;return self},hideDismiss:function(){this.$el.addClass("-hide-dismiss");return this},showDismiss:function(){this.$el.removeClass("-hide-dismiss");return this},setIcon:function(classname){this._$icon.removeClass(function(index,css){return(css.match(/(^|\s)icon-awf-\S+/g)||[]).join(" ")});classname=classname||"bullhorn-circle";classname=classname.replace(/^(icon-awf-)/,"");this._$icon.addClass("icon-awf-"+classname);return this},hideIcon:function(){this.$el.addClass("-hide-icon");return this},showIcon:function(){this.$el.removeClass("-hide-icon");return this},setTheme:function(classname){this.$el.removeClass(function(index,css){return(css.match(/(^|\s)theme-\S+/g)||[]).join(" ")});if(classname)classname=classname.replace(/^(theme-)/,"");this.$el.addClass("theme-"+classname);return this},addItem:function(item){if(typeof item=="object"){var self=this,obj={id:item.id||awf.util.randomID(),title:item.title||null,description:item.description||null,theme:item.theme||null,icon:item.icon||null,hide_icon:item.hide_icon||null,hide_dismiss:item.hide_dismiss||null};_.extend(obj,{start:new Date(item.start),end:new Date(item.end),isActive:function(){var dtmNow=new Date,dtmStart=this.start,dtmEnd=this.end;return dtmStart<=dtmNow&&dtmNow<dtmEnd},isDismissed:function(){var strDismissed=localStorage.getItem(self.ls_key);if(strDismissed===null)return false;var dtmDismissed=new Date(strDismissed),dtmStart=this.start;return dtmDismissed>dtmStart},eta:function(){var dtmNow=new Date,dtmStart=this.start;return dtmStart-dtmNow}});var eta=obj.eta();if(eta>0){obj.timeout=setTimeout(function(){self.updateNotifications()},eta)}self.items.push(obj)}else{throw new Error("Cannot add a notification of type '"+typeof item+"'. Review documentation for further instruction.")}return this},setById:function(id){var item=_.find(this.items,function(o){return o.id==id});if(item)this.set(item);return this},removeItem:function(id){var item=_.find(this.items,function(o){return o.id==id});clearTimeout(item.timeout);_.remove(this.items,item);return this},updateNotifications:function(){this.items=_.sortBy(this.items,"start");var active_items=_.filter(this.items,function(o){var is_active=o.isActive(),is_dismissed=o.isDismissed();return is_active&&!is_dismissed});if(active_items.length>0){var active=active_items[0];if(!_.isEqual(active,this.active)){this.active=active;var active_to_set=_.pick(active,["title","description","icon","hide_icon","hide_dismiss","theme"]);this.set(active_to_set)}}else{this.hide()}return this},set:function(params){if(params){this.setTitle(params.title||null);this.setDescription(params.description||null);this.setTheme(params.theme||null);this.setIcon(params.icon||null);this[params.hide_icon?"hideIcon":"showIcon"]();this[params.hide_dismiss?"hideDismiss":"showDismiss"]();this.show()}else{this.hide()}return this}})},function(module,exports){module.exports='<div class="js-notifications notifications" aria-hidden="true" style="display:none;">\n\t<span class="js-notifications-icon notifications__icon icon-awf-bullhorn-circle"></span>\n\t<div class="notifications__wrap">\n\t\t<div class="notifications__wrap__text">\n\t\t\t<span class="js-notifications-title notifications__wrap__text__title" role="heading"></span>\n\t\t\t<span class="js-notifications-description notifications__wrap__text__description"></span>\n\t\t</div>\n\t</div>\n\t<div class="notifications__dismiss">\n\t\t<button class="js-notifications-dismiss notifications__dismiss__button icon-awf-op-times" title="Dismiss" aria-controls="notifications-banner" aria-expanded="false" role="button" data-i18n="[title]awf.common.dismiss"><span class="awf-access" data-i18n="awf.common.dismiss">Dismiss</span></button>\n\t</div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=Themes;var use=__webpack_require__(22),Stylesheet=__webpack_require__(187),BaseObject=awf.__.BaseObject;use(BaseObject).toCreate(Themes);function Themes(params){console.log("params: ",params);BaseObject.apply(this,arguments);var self=this;params=params||{};self.has_custom_default=false;self.classnames=["default"];self.items={default:{classname:"default",theme:{id:"default",classname:"default",label:"default",i18n_label:"awf.page.themes.default",background_content:"#e4e4e4",background_base:"#ffffff",background_leftnav:"#f5f5f4",color_link:"#0024b1",font:"helvetica, sans-serif",color_base:"#00183f"}}};self.stylesheet=new Stylesheet;if(params.themes){if(params.themes.default){self.has_custom_default=true}_.forEach(params.themes,function(theme,key){self.addTheme(key,theme)})}self.cs_pref=awf.construct.getOrCreate("app-theme");var ls_value=localStorage.getItem("app-theme"),saved_value=self.cs_pref.value||ls_value;self.current_theme="default";if(saved_value in self.items){self.current_theme=saved_value}console.log("theme pref value: ",self.cs_pref.value);if(self.cs_pref.value){self.setTheme(self.current_theme)}else{self.applyTheme(self.current_theme);console.time("theme construct");self.cs_pref.fetch(-1).always(function(){console.timeEnd("theme construct")}).done(function(val){if(val in self.items){self.setTheme(val)}})}}_.extend(Themes.prototype,{addTheme:function(key,theme){var self=this;if(theme){var given_keys=_.keys(theme),expected_keys=["classname","label","background_base","background_content","background_leftnav","color_link","font","color_base"],missing_keys=_.difference(expected_keys,given_keys);if(missing_keys.length===0){self.items[key]={classname:theme.classname,styles:_.template(Themes.template)(theme),theme:theme};self.classnames.push(theme.classname);self.triggerHandler("add",key)}else{throw new Error("Themes.addTheme() Error: The theme you're attempting to add is missing the following parameters: "+missing_keys)}}return self},removeTheme:function(id){if(id in this.items){var pos=this.classnames.indexOf(this.items[id].classname),theme=this.items[id];this.classnames.splice(pos,1);delete this.items[id];this.triggerHandler("remove",id);return theme}else{return null}},setTheme:function(id){var self=this;if(self.items[id]){localStorage.setItem("app-theme",id);if(self.cs_pref.value!=id){self.cs_pref.setValue(id).save()}self.current_theme=id;this.applyTheme();self.triggerHandler("change",id)}else{throw new Error('Error Setting Theme: "'+id+'" is not a valid theme id.')}return self},applyTheme:function(id){var self=this;id=id||self.current_theme;if(self.items[id]){$("html").removeClass(this.classnames.join(" ")).addClass(self.items[id].classname);if(id=="default"&&!self.has_custom_default){self.stylesheet.destroy()}else{self.stylesheet.css(self.items[id].styles).render()}self.triggerHandler("apply",id)}else{throw new Error('Error Previewing Theme: "'+id+'" is not a valid theme id.')}return self}});_.extend(Themes,{template:__webpack_require__(194)})},function(module,exports){module.exports='{[\n\tvar font = font || "helvetica, arial, sans-serif";\n\tvar background_base = background_base || "#ffffff";\n\tvar background_content = background_content || "#f4f4f4";\n\tvar color_base = color_base || "#00183f";\n\tvar border_color_base = border_color_base || "#e0e0e0";\n\tvar color_alt = color_alt || "#73737d";\n\tvar background_alt = background_alt || "#e0e0e0";\n\tvar border_color_alt = border_color_alt || "#73737d";\n\tvar color_notifications = color_notifications || "#ffffff";\n\tvar background_notifications = background_notifications || "#0061ff";\n\tvar background_notifications_dismiss_hover = background_notifications_dismiss_hover || "#0024b1";\n\tvar border_color_notifications = border_color_notifications || "#0061ff";\n\tvar color_link = color_link || "#0024b1";\n\tvar color_link_hover = color_link_hover || "#0061ff";\n\tvar color_selection = color_selection || "#dec6ff";\n\tvar background_selection = background_selection || "#5d00db";\n\tvar color_input = color_input || "#00183f";\n\tvar background_input = background_input || "#ffffff";\n\tvar border_input = border_input || "1px solid #e0e0e0";\n\tvar box_shadow_base = box_shadow_base || "0px 0px 5px 0px rgba(0,0,0,0.5)";\n\tvar box_shadow_focus = box_shadow_focus || "0px 0px 6px 0px #0061ff";\n\tvar background_leftnav = background_leftnav || "#f5f5f4";\n\tvar background_leftnav_hover = background_leftnav_hover || "#eeeeee";\n\tvar background_leftnav_active = background_leftnav_active || "#ffffff";\n\tvar color_leftnav_active = color_leftnav_active || "#00183f";\n\tvar color_search_icon = color_search_icon || "";\n\tvar background_search_results_hover = background_search_results_hover || "#f4f4f4";\n\tvar foreground_message_success = foreground_message_success || "#6CBB1F";\n\tvar background_message_success = background_message_success || "#E9F7DB";\n\tvar foreground_message_info = foreground_message_info || "#074F95";\n\tvar background_message_info = background_message_info || "#EAF4FA";\n\tvar foreground_message_error = foreground_message_error || "#BD2121";\n\tvar background_message_error = background_message_error || "#FDE9E8";\n\tvar foreground_message_warn = foreground_message_warn || "#F8C41C";\n\tvar background_message_warn = background_message_warn || "#FEF2CD";\n\tvar foreground_badge = foreground_badge || "#ffffff";\n\tvar background_badge = background_badge || "#BC222D";\n\tvar foreground_button = foreground_button || "#ffffff";\n\tvar background_button = background_button || "#0024b1";\n\tvar foreground_button_hover = foreground_button_hover || "#ffffff";\n\tvar background_button_hover = background_button_hover || "#0061ff";\n\tvar foreground_tray_button = foreground_tray_button || "#ffffff";\n\tvar background_tray_button = background_tray_button || "#0024b1";\n\tvar border_color_tray_content = border_color_tray_content || "#0024b1";\n]}\n\n\n\n\n\n/*------------------------------------*\\\n\t#LAYOUT\n\\*------------------------------------*/\n\n\thtml {\n\t\tbackground: {{background_base}};\n\t}\n\n\tbody {\n\t\tfont-family: {{font}};\n\t\tcolor: {{color_base}};\n\t}\n\n\t::-moz-selection {\n\t\tbackground: {{background_selection}};\n\t\tcolor: {{color_selection}};\n\t}\n\t::selection {\n\t\tbackground: {{background_selection}};\n\t\tcolor: {{color_selection}};\n\t}\n\n\thr {\n\t\tborder-color: {{border_color_base}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n\t#SEMANTIC\n\\*------------------------------------*/\n\n\ta,\n\t.-awf-link {\n\t\tcolor: {{color_link}};\n\t}\n\n\ta:hover, a:focus, a:active, a.-is-active,\n\t.-awf-link:hover, .-awf-link:focus, .-awf-link:active, .-awf-link.-is-active {\n\t\tcolor: {{color_link_hover}};\n\t}\n\n\n\t.-awf-link-inverted {\n\t\tcolor: {{color_base}};\n\t}\n\n\t.-awf-link-inverted:hover, .-awf-link-inverted:focus, .-awf-link-inverted:active, .-awf-link-inverted.-is-active {\n\t\tcolor: {{color_link_hover}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n\t#FORMS\n\\*------------------------------------*/\n\n\tinput,\n\ttextarea,\n\tselect {\n\t\tcolor: {{color_input}};\n\t\tbackground: {{background_input}}\n\t}\n\n\t::-webkit-input-placeholder {\n\t\tcolor: {{color_input}};\n\t}\n\n\t:-moz-placeholder {\n\t\tcolor: {{color_input}};\n\t}\n\n\t::-moz-placeholder {\n\t\tcolor: {{color_input}};\n\t}\n\n\t:-ms-input-placeholder {\n\t\tcolor: {{color_input}};\n\t}\n\n\tinput:-moz-placeholder {\n\t\tcolor: {{color_input}};\n\t}\n\n\t/* Buttons\n\t-----------------------------------------------*/\n\t\t.awf-btn {\n\t\t\tcolor: {{foreground_button}};\n\t\t\tbackground-color: {{background_button}};\n\t\t}\n\t\t.awf-btn:hover,\n\t\t.awf-btn:active,\n\t\t.awf-btn:focus {\n\t\t\tcolor: {{foreground_button_hover}};\n\t\t\tbackground-color: {{background_button_hover}};\n\t\t}\n\n\n\n\n\n/*------------------------------------*\\\n\t#HELPERS\n\\*------------------------------------*/\n\n\t.-awf-focus-on,\n\t.-awf-focus:focus {\n\t\t-webkit-box-shadow: {{box_shadow_focus}};\n\t\t   -moz-box-shadow: {{box_shadow_focus}};\n\t\t        box-shadow: {{box_shadow_focus}};\n\t}\n\n\t.-color-base {\n\t\tcolor: {{color_base}};\n\t}\n\n\t.-border-color-base {\n\t\tborder-color: {{border_color_base}};\n\t}\n\n\t.-border-color-link {\n\t\tborder-color: {{color_link}};\n\t}\n\n\t.-border-color-link:focus {\n\t\tborder-color: {{color_link_hover}};\n\t}\n\n\t.-color-alt {\n\t\tcolor: {{color_alt}};\n\t}\n\n\t.-color-link {\n\t\tcolor: {{color_link}};\n\t}\n\n\t.-color-link-hover {\n\t\tcolor: {{color_link_hover}};\n\t}\n\n\t.-background-base {\n\t\tbackground-color: {{background_base}};\n\t}\n\n\t.-background-alt {\n\t\tbackground-color: {{background_alt}};\n\t}\n\n\t.-background-link {\n\t\tbackground-color: {{color_link}};\n\t}\n\n\t.-box-shadow-base {\n\t\t-webkit-box-shadow: {{box_shadow_base}};\n\t\t   -moz-box-shadow: {{box_shadow_base}};\n\t\t        box-shadow: {{box_shadow_base}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n    #AWF-DROPDOWN\n\\*------------------------------------*/\n\n\t.awf-dropdown .tip-wrapper {\n\t\t\toutline: 0 0 5px {{color_link}};\n\t}\n\t.awf-dropdown .tip-wrapper .tip {\n\t\t-webkit-box-shadow: 0 0 5px {{border_color_alt}};\n\t\t   -moz-box-shadow: 0 0 5px {{border_color_alt}};\n\t\t        box-shadow: 0 0 5px {{border_color_alt}};\n\t}\n\n\n\t.awf-dropdown__wrapper__content {\n\t\t-webkit-box-shadow: 0px 0px 5px {{border_color_alt}};\n\t\t   -moz-box-shadow: 0px 0px 5px {{border_color_alt}};\n\t\t        box-shadow: 0px 0px 5px {{border_color_alt}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n    #MASTHEAD_MASTHEAD-TRAYS\n\\*------------------------------------*/\n\n\t.masthead-trays__dropdown__close:focus,\n\t.masthead-trays__dropdown__close:hover,\n\t.masthead-trays__dropdown__close:active {\n\t\tcolor: {{color_link_hover}};\n\t}\n\n\t.masthead-trays__button-collection .btn-control.-is-active {\n\t\tcolor: {{color_link_hover}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n    #MASTHEAD_USER\n\\*------------------------------------*/\n\n\t.masthead-icon .awf-dropdown__button:focus {\n\t\toutline: 1px dotted {{color_link_hover}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n    #NOTIFICATIONS\n\\*------------------------------------*/\n\n\t.notifications {\n\t\tbackground: {{background_notifications}};\n\t\tcolor: {{color_notifications}};\n\t\tborder-color: {{border_color_notifications}};\n\t}\n\n\t.notifications a {\n\t\tcolor: {{color_notifications}};\n\t}\n\n\t.notifications__dismiss__button:hover,\n\t.notifications__dismiss__button:focus {\n\t\tbackground-color: {{background_notifications_dismiss_hover}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n\t#PAGE\n\\*------------------------------------*/\n\n\t.awf-page {\n\t\tbackground-color: {{background_content}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n    #SITELINKS\n\\*------------------------------------*/\n\n\t.sitelinks__tab-wrapper {\n\t\t-webkit-box-shadow: 0px -2px 0px 0px {{border_color_alt}} inset;\n\t\t   -moz-box-shadow: 0px -2px 0px 0px {{border_color_alt}} inset;\n\t\t        box-shadow: 0px -2px 0px 0px {{border_color_alt}} inset;\n\t}\n\n\t.sitelinks__tablist__tab.-is-active {\n\t\tborder-bottom: 2px solid {{color_link_hover}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n\t#TITLED-CARD\n\\*------------------------------------*/\n\n\t.awf-card__titlebar__title:focus,\n\t.awf-card__titlebar__title:hover,\n\t.awf-card__titlebar__cta__drag:hover,\n\t.awf-card__titlebar__cta__flip:hover {\n\t\tcolor: {{color_base}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n\t#LARGE-CARD\n\\*------------------------------------*/\n\n\t.awf-card.-large-card .awf-card__titlebar__title:focus,\n\t.awf-card.-large-card .awf-card__titlebar__title:hover {\n\t\tcolor: {{color_alt}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n    #VERTICAL-NAV\n\\*------------------------------------*/\n\n\t#leftnav,\n\t.vertical-nav {\n\t\tbackground: {{background_leftnav}};\n\t}\n\n\t.vertical-nav__item:hover {\n\t\tbackground: {{background_leftnav_hover}};\n\t}\n\n\t.vertical-nav__item.-is-active {\n\t\tborder-left-color: {{color_link}};\n\t\tbackground: {{background_leftnav_active}};\n\t}\n\n\t.vertical-nav__item.-is-active .vertical-nav__item__icon,\n\t.vertical-nav__item.-is-active .vertical-nav__item__label {\n\t\tcolor: {{color_leftnav_active}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n\t#SEARCH\n\\*------------------------------------*/\n\n\t.awf-search__submit,\n\t.awf-search__clear {\n\t\tcolor: {{color_search_icon}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n\t#BUCKET\n\\*------------------------------------*/\n\n\t.awf-bucket-item:hover,\n\t.awf-bucket-item:focus,\n\t.awf-bucket-item:active {\n\t\tbackground: {{background_search_results_hover}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n\t#MESSAGE\n\\*------------------------------------*/\n\n\t.awf-message--success {\n\t\tborder-left-color: {{foreground_message_success}};\n\t\tbackground-color: {{background_message_success}};\n\t}\n\n\t.awf-message--success .awf-message__icon {\n\t\tcolor: {{foreground_message_success}};\n\t}\n\n\n\t.awf-message--info {\n\t\tborder-left-color: {{foreground_message_info}};\n\t\tbackground-color: {{background_message_info}};\n\t}\n\n\t.awf-message--info .awf-message__icon {\n\t\tcolor: {{foreground_message_info}};\n\t}\n\n\n\t.awf-message--error {\n\t\tborder-left-color: {{foreground_message_error}};\n\t\tbackground-color: {{background_message_error}};\n\t}\n\n\t.awf-message--error .awf-message__icon {\n\t\tcolor: {{foreground_message_error}};\n\t}\n\n\n\t.awf-message--warn {\n\t\tborder-left-color: {{foreground_message_warn}};\n\t\tbackground-color: {{background_message_warn}};\n\t}\n\n\t.awf-message--warn .awf-message__icon {\n\t\tcolor: {{foreground_message_warn}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n\t#BADGE\n\\*------------------------------------*/\n\n\t.awf-badge {\n\t\tbackground: {{background_badge}};\n\t\tcolor: {{foreground_badge}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n    #CUSTOM-NAME\n\\*------------------------------------*/\n\n\t.awf-custom-name.-is-editable .awf-custom-name__btn:hover,\n\t.awf-custom-name.-is-editable .awf-custom-name__btn:focus {\n\t\tborder-color: {{color_link}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n    #TRAY\n\\*------------------------------------*/\n\n\t.awf-tray .awf-tray__toggle {\n\t\tbackground-color: {{background_tray_button}};\n\t\tcolor: {{foreground_tray_button}};\n\t}\n\n\t.awf-tray .awf-tray__content {\n\t\tborder-color: {{border_color_tray_content}};\n\t}\n\n\n\n\n\n/*------------------------------------*\\\n    #MEGAMENU\n\\*------------------------------------*/\n\n\t.awf-megamenu.-is-active .awf-megamenu__tab-wrapper {\n\t\t-webkit-box-shadow: 0px -2px 0px 0px {{border_color_alt}} inset;\n\t\t   -moz-box-shadow: 0px -2px 0px 0px {{border_color_alt}} inset;\n\t\t        box-shadow: 0px -2px 0px 0px {{border_color_alt}} inset;\n\t}\n\n\t.awf-megamenu__tablist__tab.-is-active {\n\t\tborder-bottom: 2px solid {{color_link_hover}};\n\t}\n\n\t.awf-megamenu__close:focus,\n\t.awf-megamenu__close:hover,\n\t.awf-megamenu__close:active {\n\t\tcolor: {{color_link_hover}};\n\t}\n'},function(module,exports,__webpack_require__){module.exports=ThemeSwitcher;var use=__webpack_require__(22),BaseUI=awf.ui.Base,template=__webpack_require__(196);use(BaseUI).toCreate(ThemeSwitcher);function ThemeSwitcher(params){console.group("Constructing ThemeSwitcher");var self=this;if(params===true||params===undefined)params={};params.template=params.template||this.template||template;self.themes={};console.log("params.themes: ",params.themes);if(params.themes){_.forEach(params.themes,function(theme,key){self.addOption(key,theme.theme)})}BaseUI.call(self,params);console.groupEnd()}BaseUI.generateDomProperties(ThemeSwitcher,{current:".js-current-theme",current_svg:".js-current-svg",current_text:".js-current-text",list:".js-list"});_.extend(ThemeSwitcher.prototype,{_svg_template:_.template(__webpack_require__(197)),_option_template:_.template(__webpack_require__(198)),render:function(){BaseUI.prototype.render.apply(this,arguments);this.renderOptions();return this},addOption:function(key,theme){console.log("Adding option: ",key);if(theme){var given_keys=_.keys(theme),expected_keys=["label","background_base","background_content","background_leftnav","color_link","font","color_base"],missing_keys=_.difference(expected_keys,given_keys);if(missing_keys.length===0){this.themes[key]={label:theme.label,i18n_label:theme.i18n_label,svg:this._svg_template({background_content:theme.background_content,background_base:theme.background_base,background_masthead:theme.background_masthead||theme.background_base,background_leftnav:theme.background_leftnav,color_link:theme.color_link,font:theme.font,color_base:theme.color_base})}}else{throw new Error("ThemeSwitcher.addOption() Error: The theme you're attempting to add is missing the following parameters: "+missing_keys)}}return this},removeOption:function(id){if(id in this.themes){var theme=this.themes[id];delete this.themes[id];this.triggerHandler("remove",id);return theme}else{return null}},renderCurrent:function(key){var self=this;self._$current_svg.html(self.themes[key].svg);self._$current_text.attr("data-i18n",self.themes[key].i18n_label||null).html(self.themes[key].label).localize();self._$list.find("[data-theme="+key+"]").addClass("-is-selected").attr({"aria-pressed":"true"}).siblings().removeClass("-is-selected").attr({"aria-pressed":"false"});return self},renderOptions:function(){var self=this,hvr_timeout=null,was_hover_triggered=false;self._$list.empty();_.forEach(self.themes,function(theme,key){var theme_label=theme.label;if(awf.can_use_i18next&&theme.i18n_label){theme_label=i18next.t(theme.i18n_label)}var $button=$(self._option_template({theme:key,svg:theme.svg,label:theme_label,i18n_label:theme.i18n_label}));$button.on("click",function(){self.triggerHandler("select-theme",key);$button.focus()}).on("mouseover",function(){hvr_timeout=setTimeout(function(){was_hover_triggered=true;$button.addClass("-is-hover");self.triggerHandler("apply-theme",key)},500)}).on("mouseout",function(){clearTimeout(hvr_timeout);if(was_hover_triggered){was_hover_triggered=false;$button.removeClass("-is-hover");self.triggerHandler("reset-theme")}});self._$list.append($button)});return self}})},function(module,exports){module.exports='<div class="themes">\n\t<section class="js-current-theme themes__current -border-color-base">\n\t\t<div class="js-current-svg themes__current__svg -border-color-base"></div>\n\t\t<label class="themes__current__label"><span data-i18n="awf.page.masthead.trays.settings.themes.current">current theme</span>: <span class="js-current-text"></span></label>\n\t</section>\n\t<section class="themes__options group -border-color-base">\n\t\t<h2 class="themes__options__title" data-i18n="awf.page.masthead.trays.settings.themes.label">Themes</h2>\n\t\t<div class=\'js-list themes__list\'></div>\n\t</section>\n</div>\n'},function(module,exports){module.exports='<svg class="svg-theme-sample -display-block" height="75" width="150" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">\n\t<rect fill="{{background_content}}" height="75" width="150" y="0" x="0" />\n\t<rect fill="{{background_leftnav}}" height="75" width="25" y="0" x="0" />\n\t<rect fill="{{background_masthead}}" height="15" width="150" y="0" x="0" />\n\t<rect fill="{{color_link}}" height="20" width="25" y="15" x="0" />\n\t<rect ry="2" rx="2" fill="{{background_base}}" height="40" width="35" y="25" x="35" />\n\t<text font-size="14" font-family="{{font}}" x="42" y="42" fill="{{color_base}}" data-i18n="awf.page.masthead.trays.settings.themes.text">text</text>\n</svg>\n'},function(module,exports){
module.exports='<button class="themes__list__btn -awf-focus" data-theme="{{theme}}" aria-pressed="false" role="button">\n\t<div class="js-option-svg themes__list__btn__svg -border-color-base">{{svg}}</div>\n\t<label class="themes__list__btn__label"{[ if (i18n_label) { ]} data-i18n="{{i18n_label}}"{[ } ]}>{{label}}</label>\n</button>\n'},function(module,exports,__webpack_require__){module.exports=Tray;var use=__webpack_require__(22),BaseUI=awf.ui.Base,template=__webpack_require__(200);use(BaseUI).toCreate(Tray);function Tray(params){params=params||{};this.template=params.template||this.template||template;this.aria_id=awf.util.randomID();this.hide_timeout=null;this._tooltip=params.tooltip;awf.util.mixin.properties(this,params,{label:{default:null,types:["null","string"],renderHandler:function(val){console.log("rendering tray label :",val);var text_show="Show",text_hide="Hide",text_content="Content";if(awf.can_use_i18next){text_show=i18next.t("awf.common.show");text_hide=i18next.t("awf.common.hide");text_content=i18next.t("awf.common.content")}if(val){this._$toggle_show.attr({"aria-label":text_show+" "+val,title:this._tooltip?text_show+" "+val:null});this._$toggle_hide.attr({"aria-label":text_hide+" "+val,title:this._tooltip?text_hide+" "+val:null});this._$content.attr("aria-label",val+" "+text_content)}else{this._$toggle_show.attr({"aria-label":text_show,title:this._tooltip?text_show:null});this._$toggle_hide.attr({"aria-label":text_hide,title:this._tooltip?text_hide:null});this._$content.attr("aria-label",text_content)}}},class_name:{default:null,types:["null","string"],renderHandler:function(val){if(val){this.$el.addClass(val)}else{this.$el.attr("class","awf-tray")}}},active_state:{default:false,types:["boolean"],renderHandler:function(val){if(val){this.$el.addClass("-is-active")}else{this.$el.removeClass("-is-active")}}},content:{default:null,types:["null","string","object"],renderHandler:function(val){if(val===null){this._$content.empty()}else{this._$content.html(val)}}},show_text:{default:null,types:["null","string","object"],renderHandler:function(val){if(val===null){this._$toggle_show.empty()}else{this._$toggle_show.html(val)}}},hide_text:{default:null,types:["null","string","object"],renderHandler:function(val){if(val===null){this._$toggle_hide.empty()}else{this._$toggle_hide.html(val)}}},width:{default:null,types:["null","number"]},min_height:{default:null,types:["null","number"],renderHandler:function(val){if(val){this._$content.css("min-height",val+"px")}else{this._$content.css("min-height","")}}},position:{default:"fixed",types:["null","string"],renderHandler:function(val){this.$el.css("position",val=="absolute"?val:"fixed")}},bottom:{default:null,types:["null","number"],renderHandler:function(val){this.$el.css("bottom",val+"px")}},toggle_align:{default:"bottom",types:["null","string"],renderHandler:function(val){if(val=="top"){this._$toggle.css({top:0,bottom:"auto"})}else{this._$toggle.css({top:"auto",bottom:0})}}}});BaseUI.call(this,params)}BaseUI.generateDomProperties(Tray,{toggle:".js-tray-toggle",toggle_show:".js-tray-show",toggle_hide:".js-tray-hide",content:".js-tray-content",loop_last:".js-loop-to-last",loop_first:".js-loop-to-first"});_.extend(Tray.prototype,{render:function(){var self=this;BaseUI.prototype.render.apply(this,arguments);self._$content.attr("id",this.aria_id);self._$toggle_show.add(self._$toggle_hide).attr("aria-controls",this.aria_id);self._$toggle_show.on("click",function(){self.show()});self._$toggle_hide.on("click",function(){self.hide()});return self},show:function(){var self=this;clearTimeout(self.hide_timeout);self.$el.removeClass("-hiding");self._$content.css({width:self.width}).attr("aria-expanded","true");self.setActiveState(true)._$toggle_hide.focus();self.triggerHandler("tray:show");$("body").on("click.tray_"+this.aria_id,function(e){if(!self.$el.is(e.target)&&self.$el.has(e.target).length===0){self.hide(true)}}).on("keyup.tray_"+this.aria_id,function(e){if(e.keyCode==awf.util.keyCodes.esc){self.hide()}});self._$loop_last.show().on("focus",function(){self._$toggle.add(self._$content).find(":tabbable").last().focus()});self._$loop_first.show().on("focus",function(){self._$toggle.add(self._$content).find(":tabbable").first().focus()});return self},hide:function(do_not_focus){var self=this;self.$el.addClass("-hiding");self._$content.css("width","").attr("aria-expanded","false");self.hide_timeout=setTimeout(function(){self.setActiveState(false);self.$el.removeClass("-hiding");if(!do_not_focus){self._$toggle_show.focus()}self.triggerHandler("tray:hide")},300);$("body").off("keyup.tray_"+this.aria_id+" click.tray_"+this.aria_id);self._$loop_last.hide().off("focus");self._$loop_first.hide().off("focus");return self},destroy:function(){var self=this;BaseUI.prototype.destroy.apply(this,arguments);$("body").off("keyup.tray_"+this.aria_id+" click.tray_"+this.aria_id);return self}})},function(module,exports){module.exports='<div class="awf-tray">\n\t<button class="awf-access js-loop-to-last awf-tray__loop-last" aria-hidden="true">Loop to last</button>\n\t<div class="js-tray-toggle awf-tray__toggle -background-link">\n\t\t<button class="js-tray-show awf-tray__toggle__show -awf-focus"></button>\n\t\t<button class="js-tray-hide awf-tray__toggle__hide -awf-focus"></button>\n\t</div>\n\t<div class="js-tray-content awf-tray__content -background-base" role="region" aria-expanded="false"></div>\n\t<button class="awf-access js-loop-to-first awf-tray__loop-last" aria-hidden="true">Loop to first</button>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=VerticalNavItem;var use=__webpack_require__(22),BaseUI=awf.ui.Base,CollectionItem=awf.ui.CollectionItem;use(CollectionItem).toCreate(VerticalNavItem);function VerticalNavItem(params){params=params||{};var self=this;this.template=__webpack_require__(202);this._default_parent=function(){if(self.collection){if(self.collection._$dropzone){return self.collection._$dropzone}else{return self.collection.$el}}else{return null}};awf.util.mixin.properties(this,params,{label:{default:"",types:["string"],renderHandler:function(val){this._$label.html(val);this.$el.attr("title",val)}},active_state:{default:false,types:["boolean"],renderHandler:function(is_active){this.$el[is_active?"addClass":"removeClass"]("-is-active");this.$el.attr({tabindex:is_active?"0":"-1","aria-pressed":is_active?"true":"false"})}},icon:{default:null,types:["null","string"]},active_icon:{default:null,types:["null","string"]}});CollectionItem.apply(this,arguments);this.applyIcon();this.on("change:active_state change:icon change:active_icon",function(){this.applyIcon()})}BaseUI.generateDomProperties(VerticalNavItem,{label:".js-label",icon:".js-icon",button:".js-button"});_.extend(VerticalNavItem.prototype,{render:function(){CollectionItem.prototype.render.apply(this,arguments);var self=this;self.$el.on("click",function(){if(self.collection){var index=self.index();self.collection.setActiveIndex(index);self.collection.triggerHandler("click:item",[self.label,index])}else{self.setActiveState(true)}self.$el.focus()});self.applyIcon().attachEvents();return self},applyIcon:function(){var self=this;if(self.active_state===false||self.active_state===true&&!self.active_icon){if(self.icon===null){self._$icon.empty()}else{self._$icon.html('<em class="'+self.icon+'"></em>')}}else{self._$icon.html('<em class="'+self.active_icon+'"></em>')}return self},attachEvents:function(){var $item=this.$el;$item.on("keydown",function(e){var tabIndex=$item.index(),tabsLength=$item.siblings().length;if(e.altKey||e.ctrlKey){return true}switch(e.keyCode){case awf.util.keyCodes.left:case awf.util.keyCodes.up:{if(tabIndex===0){$item.siblings().last().focus()}else{$item.prev().focus()}e.stopPropagation();return false}case awf.util.keyCodes.right:case awf.util.keyCodes.down:{if(tabIndex==tabsLength){$item.siblings().first().focus()}else{$item.next().focus()}e.stopPropagation();return false}case awf.util.keyCodes.home:{$item.siblings().add($item).first().focus();e.stopPropagation();return false}case awf.util.keyCodes.end:{$item.siblings().add($item).last().focus();e.stopPropagation();return false}}});return this}})},function(module,exports){module.exports='<button class="vertical-nav__item -awf-focus" role="button">\n\t<span class="vertical-nav__item__icon js-icon"></span>\n\t<span class="vertical-nav__item__label js-label"></span>\n</button>\n'},function(module,exports,__webpack_require__){module.exports=VerticalNav;var use=__webpack_require__(22),Collection=awf.ui.Collection;use(Collection).toCreate(VerticalNav);function VerticalNav(params){params=params||{};this.template=params.template||__webpack_require__(204);awf.util.mixin.properties(this,params,{active_index:{default:-1,types:["number"],handler:function(val){_.forEach(this.items,function(item,i){item.setActiveState(i===val)})}},is_active:{default:false,types:["boolean"],handler:function(val){if(val)setTimeout(function(){$("html").addClass("-leftnav-active")},10);else $("html").removeClass("-leftnav-active")}}});Collection.apply(this,arguments)}awf.ui.Base.generateDomProperties(VerticalNav,{dropzone:".js-dropzone"});_.extend(VerticalNav.prototype,{Item:awf.ui.VerticalNavItem})},function(module,exports){module.exports='<div class="vertical-nav" role="toolbar" aria-label="Experience Options" aria-controls="layout" data-i18n="[aria-label]awf.page.leftnav.label">\n\t<div class="js-dropzone"></div>\n</div>\n'},function(module,exports){awf.mouse={x:0,y:0,offset:{x:0,y:0}};$(window).on("touchstart.awf_mouse touchmove.awf_mouse",function(ev){var touch_coord=ev.originalEvent.touches[0];setMouseCoordinates(touch_coord.pageX,touch_coord.pageY)}).on("mousemove.awf_mouse",function(ev){setMouseCoordinates(ev.pageX,ev.pageY)}).on("touchend.awf_mouse",function(ev){setTimeout(function(){setMouseCoordinates(0,0)},10)});function setMouseCoordinates(x,y){awf.mouse.x=x;awf.mouse.y=y;awf.mouse.offset.x=x-$(window).scrollLeft();awf.mouse.offset.y=y-$(window).scrollTop()}},function(module,exports,__webpack_require__){_.extend(awf.__,__webpack_require__(207));awf.user=new awf.__.User;__webpack_require__(213)},function(module,exports,__webpack_require__){module.exports={User:__webpack_require__(208),IdentityManager:__webpack_require__(209),OpenIDAuthService:__webpack_require__(211),BlueGroups:__webpack_require__(212)}},function(module,exports,__webpack_require__){module.exports=User;var BaseModel=awf.__.BaseModel,use=__webpack_require__(22);use(BaseModel).toCreate(User);function User(){BaseModel.apply(this,arguments);var is_authenticated=null,authentication_dfr=$.Deferred();this.info={};this.data={};this.services={};awf.util.mixin.properties(this,arguments,{resolution:{default:null,types:["null","string"]}});this.authentication=$.Deferred();this.authentication.done(function(result){is_authenticated=result});Object.defineProperty(this,"is_authenticated",{enumerable:true,configurable:true,get:function(){return!!is_authenticated}})}_.extend(User.prototype,{login:function(){console.warn("User method `login` has not yet been adapted.")},getAuthenticationStatus:function(){console.warn("User method `getAuthenticationStatus` has not yet been adapted.")}})},function(module,exports,__webpack_require__){module.exports=IdentityManager;__webpack_require__(210);function IdentityManager(params){var self=this;if(params===undefined)throw new Error("IdentityManager cannot be initialized without params");if(!("hostname"in params))throw new Error("IdentityManager params require hostname to be defined");if(!("cookie"in params))throw new Error("IdentityManager params require cookie to be defined");if(!("path"in params))throw new Error("IdentityManager params require path to be defined");var SESSION_STORAGE_KEY="IDENTITY-MANAGER-SUPPORTED-SERVICE-";var services=[],IDENTITY_HOSTNAME=this.IDENTITY_HOSTNAME=params.hostname,IDENTITY_COOKIE=params.cookie,IDENTITY_PATH=this.IDENTITY_PATH=params.path,IDENTITY_SEARCH="?appId=",IDENTITY_PORT=params.port||80,IDENTITY_TIMEOUT=params.timeout||30*1e3;(function(){var i=0;_.forEach(params.services,function(appId,name){services.push({uid:i++,name:name,appId:appId,expires:null,loading:false,pending:[],data:null,deferred:{}})})})();var LOG=null;this.SupportedServices={};_.forEach(services,function(service,i){self.SupportedServices[service.name]=i});this.ajax=function(serviceIndex,ajaxObject){if(!serviceIsSupported.call(this,serviceIndex)){return false}if(!awf.user||awf.user&&!awf.user.is_authenticated){LOG("!!! User is *NOT* authenticated !!!")}var service=services[serviceIndex];service.pending.push(ajaxObject);service.deferred=$.Deferred();LOG(service.name+" >> Checking if old token is still valid");if(!service.expires||hasIdentityExpired(service.expires)){if(!service.loading){LOG(service.name+" >> Fetching new token");propogateIdentity.call(this,service);return service.deferred.promise()}}else{LOG(service.name+" >> Re-using token");executeAdopterRequests(service);return service.deferred.promise()}};function init(){LOG=function(){};if(window.sessionStorage){for(var key in this.SupportedServices){if(sessionStorage[SESSION_STORAGE_KEY+this.SupportedServices[key]]){var value=JSON.parse(sessionStorage[SESSION_STORAGE_KEY+this.SupportedServices[key]]);services[this.SupportedServices[key]].expires=value.date;services[this.SupportedServices[key]].data=value.data}}}}init.call(this);function propogateIdentity(service){service.loading=true;var ajax_object={timeout:IDENTITY_TIMEOUT,success:function(response){service.loading=false;if(response.cookieName&&response.cookieValue){LOG(service.name+" >> SSO Service SUCCESS");service.data=response;setExpirationTimestamp(service);executeAdopterRequests(service)}else{LOG(service.name+" >> SSO Service ERROR >> 200 Code, weird");executeAdopterErrors(service,{source:"SSO Service",status:-1,responseText:"Unexpected response"})}},error:function(er){try{LOG(getSupportedServiceKey.call(this,service.uid)+" >> SSO Service ERROR >> "+JSON.stringify(er))}catch(err){var json_string="{{failed to stringify error}}";try{json_string=JSON.stringify(er)}catch(err2){}LOG("The propogateIdentity error log failed. >> SSO Service ERROR >> "+json_string)}service.loading=false;executeAdopterErrors(service,{source:"SSO Service",status:er.status,message:er.responseText})}};if(awf.user.services.oauth){return awf.user.services.oauth.fetch(getIdentityUrl(service.appId),ajax_object)}else{_.extend(ajax_object,{url:getIdentityUrl(service.appId),xhrFields:{withCredentials:true}});return $.ajax(ajax_object)}}function executeAdopterRequests(service){LOG(service.name+" >> Adding cookie to header before fetch");LOG(service.name+" >> Cookie Value = "+JSON.stringify(service.data));removeIdentityCookie(service.data);writeIdentityCookie(service.data);LOG(service.name+" >> Fetching from adopter service");var thenFn=function(response){LOG(service.name+" >> Adopter Service SUCCESS");service.deferred.resolve(response)}.bind(this);var failFn=function(er){LOG(service.name+" >> Adopter Service ERROR >> "+JSON.stringify(er));service.deferred.reject(er)}.bind(this);while(service.pending.length>0){var ajaxObject=service.pending.pop();if(awf.user.services.oauth){var url=ajaxObject.url;ajaxObject.url=null;delete ajaxObject.url;awf.user.services.oauth.fetch(url,ajaxObject).then(thenFn).fail(failFn)}else{$.ajax(ajaxObject).then(thenFn).fail(failFn)}}}function executeAdopterErrors(service,er){while(service.pending.length>0){var ajaxObject=service.pending.pop();if(ajaxObject.error){ajaxObject.error(er)}}service.deferred.reject(er)}function setExpirationTimestamp(service){var date=new Date;date.setSeconds(date.getSeconds()+420);service.expires=date;LOG(service.name+" >> Set expire timestamp for "+date);if(window.sessionStorage){sessionStorage.setItem(SESSION_STORAGE_KEY+service.uid,JSON.stringify({date:date,data:service.data}))}}function serviceIsSupported(value){for(var key in this.SupportedServices){if(this.SupportedServices[key]===value){return true}}return false}function removeIdentityCookie(obj){document.cookie=obj.cookieName+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; domain="+window.location.hostname+"; path=/;"}function writeIdentityCookie(obj){document.cookie=obj.cookieName+"="+obj.cookieValue+"; domain="+window.location.hostname+"; path=/;"}function hasIdentityExpired(expirationDateString){if(expirationDateString){var expirationDate=new Date(expirationDateString);if(expirationDate<new Date){return true}}return false}function getIdentityUrl(appId){return"https://"+IDENTITY_HOSTNAME+IDENTITY_PATH+IDENTITY_SEARCH+appId}}},function(module,exports){awf.registerExternalInitHandler("user","identity_manager",function(identity_manager_hold,identity_manager_config){awf.user.identity_manager=new awf.__.IdentityManager(identity_manager_config);identity_manager_hold.resolve("done")});awf.registerExternalInitHandler("user","identity_manager_w3id",function(identity_manager_hold,identity_manager_config){awf.user.identity_manager=new awf.__.IdentityManager(identity_manager_config);identity_manager_hold.resolve("done")})},function(module,exports,__webpack_require__){module.exports=OpenIDAuthService;var Base=awf.__.Service,use=__webpack_require__(22);use(Base).toCreate(OpenIDAuthService);function OpenIDAuthService(params){params=params||{};console.group("OIDC -- Instantiating");console.log("OIDC params :",params);Base.apply(this,arguments);var self=this,certificate=null;self.timeout=params.timeout||1e4;var readonly_props={LS_TOKEN_KEY:"TOKEN-OBJ",LS_CALLBACK_URL:"CALLBACK-URL",LS_SESSION_KEY:"AWF-OIDC",prefix:params.prefix||self.prefix||null,endpoint:params.endpoint||self.endpoint||null,client_id:params.client_id||self.client_id||null,scope:params.scope||self.scope||null,issuer:params.issuer||self.issuer||null,nonce:params.nonce||self.nonce||null,redirect_uri:params.redirect_uri||self.redirect_uri||null,refresh_expires_in:params.refresh_expires_in||self.refresh_expires_in||17.5,response_type:params.response_type||self.response_type||"id_token%20token",access_endpoint:params.access_endpoint||self.access_endpoint||null,refresh_endpoint:params.refresh_endpoint||self.refresh_endpoint||null},pathname=document.location.pathname.split("/");pathname.pop();pathname=pathname.join("/")+"/";if(readonly_props.redirect_uri){readonly_props.redirect_uri=_.template(readonly_props.redirect_uri)({host:document.location.host,pathname:pathname})}_.forEach(readonly_props,function(val,key){Object.defineProperty(self,key,{enumerable:true,value:val,writable:false})});Object.defineProperty(self,"data",{enumerable:true,get:function(){return self.getToken()}});Object.defineProperty(self,"certificate",{enumerable:true,get:function(){return certificate}});self.cert_dfr=$.Deferred();if(params.certificate){switch(typeof params.certificate){case"string":certificate=params.certificate;self.cert_dfr.resolve(certificate);break;case"object":if(params.certificate.public_key){certificate=params.certificate.public_key;self.cert_dfr.resolve(certificate)}else if(params.certificate.url){$.ajax({url:params.certificate.url,timeout:params.certificate.timeout||5e3}).done(function(response){certificate=response;self.cert_dfr.resolve(response)}).fail(function(er){self.cert_dfr.reject("Failed to fetch certificate")})}else{self.cert_dfr.reject("No OIDC certificate was configured")}break;default:self.cert_dfr.reject("OIDC certificate must be an object or string")}}else{self.cert_dfr.reject("No OIDC certificate was configured")}console.groupEnd()}_.extend(OpenIDAuthService.prototype,{getToken:function(){return awf.util.getStoredObject(this.prefix+this.LS_TOKEN_KEY)||null},getAccessToken:function(){return _.get(this.getToken(),"access_token")||null},getRefreshToken:function(){return _.get(this.getToken(),"refresh_token")||null},getPayload:function(){return _.get(this.getToken(),"id_token.payload")||null},hasValidAccessToken:function(){var token=this.getToken();if(token){var now=new Date,expires=new Date(token.expires);if(now<expires){return true}}return false},hasValidRefreshToken:function(){var token=this.getToken();if(token){var now=new Date,expires=new Date(token.refresh_expires);if(now<expires){return true}}return false},fetchAccessToken:function(code){var dfr=$.Deferred(),url=awf.util.urlParams(this.access_endpoint,{authCode:code,redirectUri:this.redirect_uri});$.ajax(url,{timeout:this.timeout}).done(function(response){dfr.resolve(response)}).fail(dfr.reject);return dfr.promise()},maybeFetchRefreshToken:function(){var self=this,dfr=$.Deferred(),refresh_token=self.getRefreshToken(),url=awf.util.urlParams(self.refresh_endpoint,{refreshToken:refresh_token});console.group("-- W3ID -- Maybe Fetch Refresh Token");if(self.hasValidAccessToken()){console.info("-- W3ID -- access token is still valid");dfr.resolve()}else if(self.hasValidRefreshToken()){console.info("-- W3ID -- refresh token is still valid, attempting to fetch new tokens");$.ajax(url,{timeout:self.timeout}).done(function(response){console.info("-- W3ID -- new tokens fetched",response);self.updateToken(response);dfr.resolve()}).fail(function(er){console.info("-- W3ID -- new tokens failed to fetch",er);dfr.reject("Unable to fetch new access/refresh tokens")})}else{console.info("-- W3ID -- refresh token is no longer or doesn't exist valid");dfr.reject("No valid refresh token currently exists")}console.groupEnd();return dfr.promise()},fetch:function(url,options,expect_json){var self=this,dfr=$.Deferred();options=options||{};self.maybeFetchRefreshToken().done(function(){var access_token=self.getAccessToken();_.extend(options,{url:url,headers:{Authorization:"Bearer "+access_token}});$.ajax(options).done(function(response){if(response){if(expect_json){try{var responseObj=JSON.parse(response);dfr.resolve(responseObj)}catch(er){dfr.reject("unable to parse response")}}else{dfr.resolve(response)}}else{dfr.resolve(null)}}).fail(function(er){dfr.reject(er)})}).fail(function(er){dfr.reject(er)});return dfr.promise()},_clearToken:function(){localStorage.removeItem(this.prefix+this.LS_TOKEN_KEY);return this},storeToken:function(params){var self=this,token={};if(params){params=awf.util.urlParams(params).substr(1).split("&");console.log("params :",params)}else{params=window.location.hash.substr(1).split("&");console.log("hash params :",params)}_.each(params,function(value){var kv=value.split("=");switch(kv[0]){case"expires_in":if(kv[0]==="expires_in"){var date=new Date;date.setSeconds(date.getSeconds()+parseInt(kv[1],10));kv[0]="expires";kv[1]=date.toString()}break;case"refresh_token":var r_date=new Date;r_date.setTime(r_date.getTime()+self.refresh_expires_in*60*60*1e3);r_date=r_date.toString();_.extend(token,{refresh_expires:r_date.toString()});break;case"id_token":token.raw_id_token=kv[1];var jwt=kv[1].split(".");_.extend(token,{raw_header:jwt[0],raw_payload:jwt[1],raw_signature:jwt[2]});kv[1]={header:JSON.parse(atob(jwt[0])),payload:JSON.parse(atob(jwt[1])),signature:jwt[2]};break}token[kv[0]]=kv[1]});awf.util.setStoredObject(this.prefix+this.LS_TOKEN_KEY,token);awf.util.cookie.set(self.LS_SESSION_KEY,"(ï¾Â´ã®Â´)ï¾*:ï½¥ï¾â§");return this},updateToken:function(params){var self=this,token=self.getToken();params=params||{};var date=new Date;date.setSeconds(date.getSeconds()+parseInt(params.expires_in,10));token.access_token=params.access_token;token.expires=date.toString();var r_date=new Date;r_date.setTime(r_date.getTime()+self.refresh_expires_in*60*60*1e3);token.refresh_token=params.refresh_token;token.refresh_expires=r_date.toString();awf.util.setStoredObject(this.prefix+this.LS_TOKEN_KEY,token);return this},verifyJWT:function(){var self=this,dfr=$.Deferred(),token=self.getToken()||{},verified=_.get(token,"id_token.payload.verified");if(verified){dfr.resolve()}else if(!token.id_token){dfr.reject("no web token to verify")}else{self.cert_dfr.done(function(){var payload=_.get(token,"id_token.payload")||{},sig_verified=false,iss_verified=false,aud_verified=false,exp_verified=false,nonce_verified=false;if(KJUR){var valid_sig=KJUR.jws.JWS.verify(token.raw_id_token,self.certificate);if(valid_sig){sig_verified=true}else{console.error("Vendor `jsrsasign` failed to verify the signature.")}}else{console.error("Cannot verify ID Token. Vendor `jsrsasign` is not present.")}if(payload.iss==self.issuer){iss_verified=true}else{console.error("Payload issuer does not match config.")}if(typeof payload.aud=="string")payload.aud=[payload.aud];if(_.contains(payload.aud,self.client_id)){aud_verified=true}else{console.error("Payload audience does not match `client_id`.")}var now=new Date,seconds_buffer=30,exp_date=new Date((payload.exp-seconds_buffer)*1e3);if(now<exp_date){exp_verified=true}else{console.error("Payload expiration date has passed.")}if(payload.nonce==self.nonce){nonce_verified=true}else{console.error("Payload nonce does not match config.")}if(sig_verified&&iss_verified&&aud_verified&&exp_verified&&nonce_verified){token.id_token.payload.verified=true;awf.util.setStoredObject(self.prefix+self.LS_TOKEN_KEY,token);dfr.resolve()}else{self._clearToken();dfr.reject("id token failed verification")}}).fail(function(){self._clearToken();dfr.reject("certificate failed to load")})}return dfr.promise()},signIn:function(){awf.util.setStoredObject(this.prefix+this.LS_CALLBACK_URL,{url:encodeURIComponent(window.location.href)});var url=this._getSignInUrl();this._windowLocation(url)},_windowLocation:function(url){window.location=url},returnToCallbackUrl:function(){var callback_url=awf.util.getStoredObject(this.prefix+this.LS_CALLBACK_URL).url;this._windowLocation(decodeURIComponent(callback_url))},_getSignInUrl:function(){return awf.util.urlParams(this.endpoint,{response_type:this.response_type,redirect_uri:this.redirect_uri,client_id:this.client_id,scope:this.scope,nonce:this.nonce})}})},function(module,exports,__webpack_require__){module.exports=BlueGroups;var Service=awf.__.Service,use=__webpack_require__(22);use(Service).toCreate(BlueGroups);function BlueGroups(params){var self=this;params=params||{};Service.apply(self,arguments);awf.util.mixin.properties(self,params,{endpoint:{default:null,types:["string","null"]},timeout:{default:null,types:["null","number"]},appid:{default:null,types:["string","null"]}});self.data=[]}_.extend(BlueGroups,{_parseRawData:function(data){if(typeof data=="string")data=JSON.parse(data);data=data.search.entry[0].attribute[0].value;return _.map(data,function(group){var obj={};_.forEach(group.split(","),function(section){var kv=section.split("=");obj[kv[0]]=kv[1]});return obj})}});_.extend(BlueGroups.prototype,{onFetch:function(dfr){var self=this;console.time("bluegroups");dfr.always(function(){console.timeEnd("bluegroups")});if(self.endpoint){switch(awf.util.url_params.bluegroups){case"fail":console.log("-- forcing Bluegroups service to fail...");setTimeout(function(){dfr.reject("Bluegroups service was forced to fail")},500);break;case"timeout":console.log("-- forcing Bluegroups service to timeout...");setTimeout(function(){dfr.reject("Bluegroups service was forced to timeout")},self.timeout||5e3);break;case"hang":console.log("-- forcing Bluegroups service to hang...");break;default:var delayed_success_dfr=awf.util.urlDelayedDeferred("bluegroups");$.ajax({url:self.endpoint,data:{appid:self.appid||""},timeout:self.timeout}).done(function(response){delayed_success_dfr.done(function(){try{var parsed=BlueGroups._parseRawData(response);self.data=parsed;dfr.resolve(parsed)}catch(er){dfr.reject("failed to parse bluegroup data")}})}).fail(dfr.reject)}}else{dfr.reject("BlueGroup endpoint was not defined.")}},checkForBlueGroup:function(name){var dfr=$.Deferred();this.fetch(-1).done(function(response){dfr.resolve(_.filter(response,{cn:name}).length>0)}).fail(function(er){dfr.reject(er)});return dfr.promise()},hasBlueGroup:function(name){return _.filter(this.data,{cn:name}).length>0}})},function(module,exports,__webpack_require__){__webpack_require__(214);__webpack_require__(215)},function(module,exports){_.extend(awf.__.FeatureToggler.handlers,{authenticated:{check:function(obj,dfr){if(!awf.user)return!obj;return obj===awf.user.is_authenticated},finalize:function(dfr){awf.user.authentication.always(dfr.resolve)},setupChangeHandler:function(ping){if(awf.user.authentication.state()=="pending"){awf.user.authentication.done(ping)}}}})},function(module,exports){_.extend(awf.__.FeatureToggler.handlers,{email:{check:function(obj){if(!(awf.user&&awf.user.is_authenticated))return false;var email=_.get(awf.user,"info.email");if(email){email=email.toLowerCase()}switch(typeof obj){case"string":obj=obj.toLowerCase();return obj===email;case"object":obj=_.map(obj,function(val){return val.toLowerCase()});return _.contains(obj,email);default:return null}},finalize:function(dfr){awf.user.authentication.always(dfr.resolve)},setupChangeHandler:function(ping){if(awf.user.authentication.state()=="pending"){awf.user.authentication.done(ping)}}},"email-rolling-release":{check:function(obj){if(!(awf.user&&awf.user.is_authenticated))return false;var email=_.get(awf.user,"info.email");if(typeof email!=="string")return false;var email_char=email.charAt(0).toLowerCase();return obj.toLowerCase().indexOf(email_char)>-1},finalize:function(dfr){awf.user.authentication.always(dfr.resolve)},setupChangeHandler:function(ping){if(awf.user.authentication.state()=="pending"){awf.user.authentication.done(ping)}}},cnum:{check:function(obj){if(!(awf.user&&awf.user.is_authenticated))return false;var cnum=_.get(awf.user,"info.cnum");switch(typeof obj){case"string":return obj===cnum;case"object":return _.contains(obj,cnum);default:return null}},finalize:function(dfr){awf.user.authentication.always(dfr.resolve)},setupChangeHandler:function(ping){if(awf.user.authentication.state()=="pending"){awf.user.authentication.done(ping)}}},cc:{check:function(obj){if(!(awf.user&&awf.user.is_authenticated))return false;var last_three_of_cnum=_.get(awf.user,"info.cnum").split("").reverse().splice(0,3).reverse().join("");switch(typeof obj){case"string":return obj===last_three_of_cnum;case"object":return _.contains(obj,last_three_of_cnum);default:return null}},finalize:function(dfr){awf.user.authentication.always(dfr.resolve)},setupChangeHandler:function(ping){if(awf.user.authentication.state()=="pending"){awf.user.authentication.done(ping)}}}})}]);(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)})([function(module,exports,__webpack_require__){__webpack_require__(1);awf.registerFeaturePack("w3",function(readonly_config){__webpack_require__(9);__webpack_require__(11);__webpack_require__(13);__webpack_require__(14);__webpack_require__(15);__webpack_require__(16);__webpack_require__(17);__webpack_require__(18);__webpack_require__(19);__webpack_require__(20);__webpack_require__(21);__webpack_require__(22);__webpack_require__(26);__webpack_require__(29);var w3_contribution=__webpack_require__(33);if(_.get(readonly_config,"user.oauth")){_.defaultsDeep(w3_contribution,{user:{oauth:{nonce:"awf",issuer:"https://w3id.alpha.sso.ibm.com/isam",scope:"openid",login:{endpoint:"https://w3id.alpha.sso.ibm.com/isam/oidc/endpoint/amapp-runtime-oidcidp/authorize"}}}})}return w3_contribution},__webpack_require__(34))},function(module,exports){},,,,,,,,function(module,exports,__webpack_require__){awf.registerLocalSearchChannel("icon-awf-w3",{bucket:"icons",data:__webpack_require__(10),limit:7,map:function(result){var title=result.replace(/icon-awf-w3-/,"").replace(/-/g," "),description=result;return{data:{title:title,description:description,image:'<em class="'+description+'" style="font-size: 25px; line-height: 32px;"></em>',url:"http://awf.w3ibm.mybluemix.net/awf/fonts/preview.html"
}}}})},function(module,exports){module.exports=["icon-awf-w3-certificate","icon-awf-w3-certificate-bold","icon-awf-w3-certificate-thin","icon-awf-w3-logo-bluepages","icon-awf-w3-logo-bluepages-text","icon-awf-w3-logo-bluepages-thin","icon-awf-w3-logo-careersmart","icon-awf-w3-logo-careersmart-thin","icon-awf-w3-logo-checkpoint","icon-awf-w3-logo-checkpoint-thin","icon-awf-w3-logo-connections","icon-awf-w3-logo-connections-thin","icon-awf-w3-logo-help","icon-awf-w3-logo-help-thin","icon-awf-w3-logo-ibm","icon-awf-w3-logo-minipulse","icon-awf-w3-logo-notes","icon-awf-w3-logo-notes-thin","icon-awf-w3-logo-pc","icon-awf-w3-logo-verse","icon-awf-w3-logo-verse-thin","icon-awf-w3-logo-w3","icon-awf-w3-logo-watson","icon-awf-w3-logo-watson-bold","icon-awf-w3-logo-workday","icon-awf-w3-logo-workday-thin","icon-awf-w3-logo-yourlearning-circle-fill","icon-awf-w3-sametime-available","icon-awf-w3-sametime-away","icon-awf-w3-sametime-do-not-disturb","icon-awf-w3-sametime-meeting","icon-awf-w3-sametime-meeting-alt","icon-awf-w3-sametime-meeting-mobile","icon-awf-w3-sametime-offline-do-not-disturb","icon-awf-w3-shopping-cart","icon-awf-w3-shopping-cart-bold","icon-awf-w3-shopping-cart-thin",""]},function(module,exports,__webpack_require__){awf.registerExternalInitHandler("metrics","coremetrics",function(metrics_hold,coremetrics_config){var Coremetrics=__webpack_require__(12),coremetrics=new Coremetrics(coremetrics_config);awf.tagMetric=function(data){return coremetrics.tagMetric(data)};awf.createMetricTagger=function(data){return coremetrics.createMetricTagger(data)};if(!coremetrics_config.blocking){metrics_hold.resolve("non-blocking")}coremetrics.init().done(function(){metrics_hold.resolve("loaded")}).fail(function(er){console.warn("Coremetrics failed to initialize.");metrics_hold.reject(er)})});console.info("When `awf.init()` or `awf.app.start()` is called, `awf.tagMetric()` will be available.")},function(module,exports){module.exports=Coremetrics;function Coremetrics(params){params=params||{};var self=this;self.ready=$.Deferred();self.config=params}_.extend(Coremetrics.prototype,{init:function(){var self=this,dfr=$.Deferred();console.time("coremetrics");dfr.always(function(){console.timeEnd("coremetrics")}).done(self.ready.resolve).fail(self.ready.reject);if(!self.config.digitalData){console.warn("Cannot init coremetrics: `digitalData` is missing.");dfr.reject("`digitalData` is missing");return dfr.promise()}window.digitalData=self.config.digitalData;switch(awf.util.url_params.coremetrics){case"fail":console.info("Coremetrics is set to fail in 500ms...");setTimeout(function(){dfr.reject("fail")},500);break;case"timeout":console.info("Coremetrics is set to timeout in 5000ms...");setTimeout(function(){dfr.reject("timeout")},self.config.timeout||5e3);break;case"hang":console.info("Coremetrics is set to hang forever.");break;default:console.log("Loading coremetrics: `w3_nondojo_eluminate.js`...");var delayed_success_dfr=awf.util.urlDelayedDeferred("coremetrics");$.ajax({url:"//www.ibm.com/common/stats/w3_nondojo_eluminate.js",dataType:"script",timeout:self.config.timeout||null}).done(function(){delayed_success_dfr.done(function(){dfr.resolve("loaded")})}).fail(dfr.reject)}return dfr.promise()},createMetricTagger:function(template){var self=this;template=template||{};return function(obj){obj=obj||{};var stats_object={},key;var map={ev:"ibmEV",action:"ibmEvAction",section:"ibmEvSection",module:"ibmEvModule",name:"ibmEvName",target:"ibmEvTarget",group:"ibmEvGroup"};for(key in template){if(map[key]){stats_object[map[key]]=template[key]}else{throw new Error("Unknown metric element in template: "+key)}}for(key in obj){if(map[key]){stats_object[map[key]]=obj[key]}else{throw new Error("Unknown metric element in obj: "+key)}}if(typeof stats_object[map.ev]=="undefined"&&typeof stats_object[map.action]=="undefined"){throw new Error("Cannot tag event. Both 'ev' and 'action' must be defined.")}if(typeof stats_object[map.ev]=="undefined"&&typeof stats_object[map.action]!="undefined"){throw new Error("Cannot tag event. Both 'ev' and 'action' must be defined. 'ev' is still missing")}if(typeof stats_object[map.action]=="undefined"){throw new Error("Cannot tag event. Both 'ev' and 'action' must be defined. 'action' is still missing")}switch(self.ready.state()){case"pending":console.groupCollapsed("The coremetrics event will be logged when it's available.");console.log(stats_object);console.groupEnd();break;case"rejected":console.warn("Coremetrics failed to init. The following data will not be sent.");console.log(stats_object);break}self.ready.done(function(){try{ibmStats.event(stats_object);console.groupCollapsed("A coremetrics event was tagged.");console.log(stats_object);console.groupEnd()}catch(error){console.warn("ibmStats.event failed on this object: "+JSON.stringify(stats_object))}});if(self.ready.state()=="pending"){self.ready.fail(function(){console.warn("A deferred coremetrics event was thrown out: "+JSON.stringify(stats_object))})}return stats_object}},tagMetric:function(obj){return this.createMetricTagger.call(this)(obj)}})},function(module,exports){awf.user.authentication.done(function(is_authenticated){var user="anonymous";if(is_authenticated){user=awf.user.info.cnum}_.extend(awf.metrics.global_tags,{user:user})})},function(module,exports){_.extend(awf.metrics.global_tags,{browser:_.keys(_.omit(awf.util.info.browser,function(val){return!val}))[0],version:awf.util.info.browser_version,is_mobile:awf.util.info.isMobile(),mobile:_.keys(_.omit(awf.util.info.mobile,function(val){return!val}))[0],language:awf.util.info.language.lc+"-"+awf.util.info.language.cc,os:_.keys(_.omit(awf.util.info.os,function(val){return!val}))[0]})},function(module,exports){(function(){awf.app.registerCog("sitelinks",{flag:"cogs.sitelinks",setup:function(){console.info("setup :: sitelinks cog");var self=this;self.data=null;self.dfr=$.Deferred();self.dfr.done(function(response){self.data=response});function getCcLc(){var cc=awf.util.info.language.cc,lc=awf.util.info.language.lc.toLowerCase(),cc_lc="";if(cc){cc_lc=cc.toLowerCase()}cc_lc+=lc;switch(cc_lc){case"gben":cc_lc="uken";break;case"ko":cc_lc="krko";break;case"it":case"chit":cc_lc="itit";break;case"he":cc_lc="ilhe";break;case"pt":cc_lc="ptbr";break;case"fr":case"befr":case"lufr":case"mcfr":case"chfr":cc_lc="frfr";break;case"zh":case"hkzh":case"sgzh":cc_lc="cnzh";break;case"de":case"atde":case"dede":case"lide":case"lude":case"chde":cc_lc="dede";break;case"es":case"ares":case"boes":case"cles":case"coes":case"cres":case"does":case"eces":case"sves":case"gtes":case"hnes":case"mxes":case"nies":case"paes":case"pyes":case"pees":case"pres":case"uyes":case"vees":cc_lc="eses";break;case"ja":cc_lc="jpja";break;default:}return cc_lc}function parseData(data){var parsed_data=[];_.forEach(data,function(tab){var tab_panel={tab:tab.title.trim(),panel:[]},panel=tab.child[0].child,section={},x=0;_.forEach(panel,function(object){x++;if(object.title.trim()!==""||x===1){if(Object.keys(section).length>0)tab_panel.panel.push(section);section=_.clone({});section.heading=object.title.trim();section.links=[]}_.forEach(object.child,function(link){if(link.title.trim()!==""&&link.url&&link.url.trim()!==""){section.links.push({text:link.title.trim(),url:link.url})}});if(x==panel.length)tab_panel.panel.push(section)});parsed_data.push(tab_panel)});return parsed_data}self.fetchData=function(){var dfr=$.Deferred(),ajax_dfr=$.Deferred(),endpoint=_.template("//1.w3.s81c.com/common/js/dynamicnav/w3/{{cclc}}-utf8.js")({cclc:getCcLc()});window.ibmweb={dynnav:{dataCallback:function(response){ajax_dfr.resolve(response)}}};console.log(_.template("Fetching Sitelinks data from `{{endpoint}}`")({endpoint:endpoint}));$.ajax({url:endpoint,dataType:"script",timeout:5e3}).fail(ajax_dfr.reject).always(function(){delete window.ibmweb});ajax_dfr.done(function(response){self.data=parseData(response.menuData);dfr.resolve(self.data)}).fail(dfr.reject);return dfr.promise()}},teardown:function(){console.info("teardown :: sitelinks cog")},views:{masthead_tray:{flag:"cogs.sitelinks.masthead_tray",label:"Sitelinks",i18n_label:"awf.page.masthead.trays.sitelinks.label",icon:"icon-awf-grid-3x3",init:function(init_methods){var self=this;self.fetchData(-1).done(self.dfr.resolve).fail(self.dfr.reject)},render:function($container){console.log("Rendering Sitelinks...");var self=this;self.is_active=true;if(self.dfr.state()=="pending"){self.spinner=new awf.ui.Spinner({parent:$container})}self.dfr.always(function(){if(self.spinner){self.spinner.destroy();self.spinner=null}}).done(function(response){console.log("Sitelinks data :",response);if(self.is_active){self.sitelinks=new awf.ui.Sitelinks({parent:$container,label:"Sitelinks",i18n:{aria_label:"awf.page.masthead.trays.sitelinks.label"},json:response})}}).fail(function(er){console.log("er :",er);if(self.is_active){$container.html('<div style="padding: 20px;font-size: 1.5rem;"><em class="icon-awf-alert-triangle-fill -color-alt" style="font-size: 1.5em"></em> We\'re sorry, Site Links failed to load. Please try again, later.')}})},destroy:function(){console.log("destroying sitelinks");var self=this;self.is_active=false;if(self.sitelinks){self.sitelinks.destroy();self.sitelinks=null}}}}})})()},function(module,exports){awf.registerExternalInitHandler("user","odw_authentication",function(odw_authentication_hold,odw_authentication_config){if(!odw_authentication_config.blocking){odw_authentication_hold.resolve("non-blocking")}var experience_blocker_dfr=$.Deferred();awf.app.experience_blockers.odw_authentication=experience_blocker_dfr;if(!odw_authentication_config.experience_blocking){experience_blocker_dfr.resolve("non-blocking")}var sign_in_event=awf.util.registerNextPageLoadEvent("sign-in",function(dtm){console.group("Registering Sign-In Next Page Load Event");var now=new Date,then=new Date(dtm),delta=Math.round((now-then)/1e3),tag=awf.createMetricTagger({ev:"Sign In",action:"click",module:"Sign In",section:"Masthead",target:delta});awf.user.authentication.done(function(){tag({group:"successful"})}).fail(function(){tag({group:"unsuccessful"})});console.groupEnd()});_.extend(awf.__.User.prototype,{login:function(){var current_page=window.location.protocol+"//"+window.location.host+window.location.pathname,current_page_params=_.keys(awf.util.url_params).length===0?{"[":"]"}:awf.util.url_params,current_hash=window.location.hash,return_url=current_page+awf.util.urlParams(current_page_params)+current_hash,d=new Date,login_page_params="?"+d.getTime()+"&returnUrl="+return_url,final_url=odw_authentication_config.login.endpoint+login_page_params;sign_in_event.activate(new Date);window.location=final_url},getAuthenticationStatus:function(){console.time("odw auth");awf.user.setResolution("pending");var dfr=$.Deferred(),endpoint=odw_authentication_config.auth_check.endpoint;dfr.always(function(){console.timeEnd("odw auth")});if(_.last(endpoint)!="/"){endpoint+="/"}function handleRejection(er){if(odw_authentication_config.fail_to_anonymous){awf.user.setResolution("failed to anonymous");dfr.resolve({DN:"unauthenticated",Hkey:"unauthenticated",Cnum:"unauthenticated",CommonName:"unauthenticated",Nickname:"unauthenticated",Email:"unauthenticated"})}else{awf.user.setResolution("failed");dfr.reject(er)}}switch(awf.util.url_params.odw_auth_check){case"fail":console.log("-- forcing ODW auth check to fail...");setTimeout(function(){handleRejection("user authentication request was forced to fail")},500);break;case"timeout":console.log("-- forcing ODW auth check to timeout...");setTimeout(function(){handleRejection("user authentication request was forced to timeout")},odw_authentication_config.auth_check.timeout||5e3);break;case"hang":console.log("-- forcing ODW auth check to hang...");break;default:var delayed_success_dfr=awf.util.urlDelayedDeferred("odw_auth_check"),url=endpoint+"callback/"+awf.util.createCallback(function(response){var result=response.DN!="unauthenticated";delayed_success_dfr.done(function(){awf.user.setResolution(result?"authenticated":"unauthenticated");dfr.resolve(response)})});$.ajax({url:url,dataType:"script",timeout:odw_authentication_config.auth_check.timeout||null}).fail(function(er){handleRejection("user authentication request failed",er)})}return dfr.promise()}});awf.user.getAuthenticationStatus().done(function(response){if(response){var result=response.DN!="unauthenticated";awf.user.info={hkey:response.Hkey,cnum:response.Cnum,name:response.CommonName,nickname:response.Nickname,email:response.Email};awf.user.authentication.resolve(result);experience_blocker_dfr.resolve(result)}else{awf.user.setResolution("empty response");experience_blocker_dfr.resolve("empty response");awf.user.authentication.resolve(false)}}).fail(function(er){awf.user.authentication.reject(er);experience_blocker_dfr.reject(er)}).done(function(){odw_authentication_hold.resolve("odw auth data received")}).fail(odw_authentication_hold.reject)})},function(module,exports){awf.registerExternalInitHandler("user","oauth",function(oauth_hold,oauth_config){if(!oauth_config.blocking){oauth_hold.resolve("non-blocking")}var experience_blocker_dfr=$.Deferred();awf.app.experience_blockers.oauth=experience_blocker_dfr;if(!oauth_config.experience_blocking){experience_blocker_dfr.resolve("non-blocking")}if(oauth_config.login){oauth_config.endpoint=oauth_config.login.endpoint}var given_keys=_.keys(oauth_config),expected_keys=["prefix","endpoint","client_id","scope","redirect_uri"],missing_keys=_.difference(expected_keys,given_keys);if(missing_keys.length!==0){throw new Error("OpenID Connect Error: Cannot establish an OpenID service object. The following configuration keys are missing: "+missing_keys)}awf.user.services.oauth=new awf.__.OpenIDAuthService(oauth_config);_.extend(awf.__.User.prototype,{login:function(){awf.user.services.oauth.signIn()},getAuthenticationStatus:function(){console.group("-- OIDC -- Getting authentication status");console.time("OpenID Authentication");awf.user.setResolution("pending");var dfr=$.Deferred(),payload=awf.user.services.oauth.getPayload();dfr.always(function(){console.timeEnd("OpenID Authentication")});if(payload&&awf.util.cookie.get("AWF-OIDC")){var dfr_jwt=awf.user.services.oauth.verifyJWT(),dfr_token=awf.user.services.oauth.maybeFetchRefreshToken();console.log("-- OIDC -- payload and cookie exist, attempting JWT verification");$.when(dfr_jwt,dfr_token).done(function(){console.log("-- OIDC -- JWT verification Done. Authenticated.");awf.user.setResolution("authenticated");dfr.resolve(payload)}).fail(function(){console.log("-- OIDC -- JWT verification Fail. Unauthenticated.");awf.user.setResolution("failed to anonymous");awf.user.services.oauth._clearToken();dfr.resolve("unauthenticated")})}else{console.log("-- OIDC -- payload and/or cookie *do not* exist. Unauthenticated.");awf.user.services.oauth._clearToken();dfr.resolve("unauthenticated")}console.groupEnd();return dfr.promise()}});awf.user.getAuthenticationStatus().done(function(response){console.log("-- OIDC -- getAuthenticationStatus DONE");if(response){console.log("-- OIDC -- getAuthenticationStatus has response");var result=response!="unauthenticated";awf.user.info={hkey:response.hkey||null,cnum:response.uid,name:decodeURIComponent(response.cn),nickname:response.nickname||null,email:response.emailAddress};awf.user.authentication.resolve(result);experience_blocker_dfr.resolve(result)}else{console.log("-- OIDC -- getAuthenticationStatus does *NOT* have response");awf.user.services.oauth._clearToken();awf.user.setResolution("empty response");experience_blocker_dfr.resolve("empty response");awf.user.authentication.resolve(false)}}).fail(function(er){console.log("-- OIDC -- getAuthenticationStatus FAIL",er);awf.user.authentication.reject(er);experience_blocker_dfr.reject(er)}).done(function(){oauth_hold.resolve("oauth data received")}).fail(oauth_hold.reject)})},function(module,exports){awf.registerExternalInitHandler("user","w3_ibm_profile_cookie",function(w3_cookie_hold,w3_cookie_config){if(!w3_cookie_config.service.blocking){w3_cookie_hold.resolve("non-blocking")}var experience_blocker_dfr=$.Deferred();awf.app.experience_blockers.w3_ibm_profile_cookie=experience_blocker_dfr;if(!w3_cookie_config.service.experience_blocking){experience_blocker_dfr.resolve("non-blocking")}_.extend(awf.user.services,{w3_ibm_profile_cookie:new awf.__.Service({onFetch:function(dfr){console.time("w3 cookie");dfr.done(function(data){_.extend(awf.user.data,{w3_ibm_profile_cookie:data});awf.user.info.hkey=awf.user.info.hkey||data.hkey;awf.user.info.nickname=awf.user.info.nickname||data.nickname}).always(function(){console.timeEnd("w3 cookie")});function handleRejection(er){if(w3_cookie_config.service.fail_to_unknown){dfr.resolve(null)}else{dfr.reject(er)}}switch(awf.util.url_params.w3_ibm_profile_cookie){case"fail":console.log("-- forcing w3 cookie to fail...");setTimeout(function(){handleRejection("w3 cookie was forced to fail")},500);break;case"timeout":console.log("-- forcing w3 cookie to timeout...");setTimeout(function(){handleRejection("w3 cookie was forced to timeout")},w3_cookie_config.service.timeout||5e3);break;case"hang":console.log("-- forcing w3 cookie to hang...");break;default:if(typeof awf.user.services.w3_ibm_profile_cookie.endpoint!="string"){dfr.reject("Cannot fetch user info when awf.user.services.w3_ibm_profile_cookie.endpoint is not defined.");return false}var delayed_success_dfr=awf.util.urlDelayedDeferred("w3_ibm_profile_cookie"),cb="cb",url=_.template("{{endpoint}}/callback/{{callback_name}}")({endpoint:awf.user.services.w3_ibm_profile_cookie.endpoint,callback_name:cb});awf.user.services.oauth.fetch(url,{xhrFields:{withCredentials:true},dataType:"text",timeout:w3_cookie_config.service.timeout||null}).done(function(response){var data=JSON.parse(response.split(cb+"(")[1].slice(0,-2)).user;delayed_success_dfr.done(function(){dfr.resolve(data)})}).fail(handleRejection)}}})});_.extend(awf.user.services.w3_ibm_profile_cookie,{endpoint:w3_cookie_config.service.endpoint});awf.user.authentication.done(function(is_authenticated){if(is_authenticated){awf.user.services.w3_ibm_profile_cookie.fetch().done(function(response){w3_cookie_hold.resolve("w3ibmProfile cookie received");experience_blocker_dfr.resolve("w3ibmProfile cookie received")}).fail(function(er){w3_cookie_hold.reject(er);experience_blocker_dfr.reject(er)})}else{w3_cookie_hold.resolve("anonymous");experience_blocker_dfr.resolve("anonymous")}})})},function(module,exports){awf.registerExternalInitHandler("user","odw_info",function(odw_info_hold,odw_info_config){if(!odw_info_config.service.blocking){odw_info_hold.resolve("non-blocking")}var experience_blocker_dfr=$.Deferred();awf.app.experience_blockers.odw_info=experience_blocker_dfr;if(!odw_info_config.service.experience_blocking){experience_blocker_dfr.resolve("non-blocking")}_.extend(awf.user.services,{odw_info:new awf.__.Service({onFetch:function(dfr){console.time("odw info");dfr.done(function(response){_.extend(awf.user.data,{odw_info:response})}).always(function(){console.timeEnd("odw info")});function handleRejection(er){if(odw_info_config.service.fail_to_unknown){dfr.resolve(null)}else{dfr.reject(er)}}switch(awf.util.url_params.odw_info){case"fail":console.log("-- forcing ODW info to fail...");setTimeout(function(){handleRejection("ODW info was forced to fail")},500);break;case"timeout":console.log("-- forcing ODW info to timeout...");setTimeout(function(){handleRejection("ODW info was forced to timeout")},odw_info_config.service.timeout||5e3);break;case"hang":console.log("-- forcing ODW info to hang...");break;default:if(typeof awf.user.info.email!="string"){dfr.reject("Cannot fetch user info when awf.user.info.email is not defined.");return false}if(typeof awf.user.services.odw_info.endpoint!="string"){dfr.reject("Cannot fetch user info when awf.user.services.odw_info.endpoint is not defined.");return false}if(typeof awf.user.services.odw_info.appid!="string"){dfr.reject("Cannot fetch user info when awf.user.services.odw_info.appid is not defined.");return false}var delayed_success_dfr=awf.util.urlDelayedDeferred("odw_info");var ajax_dfr=$.Deferred();$.when(ajax_dfr,delayed_success_dfr).done(dfr.resolve);var url=_.template("{{endpoint}}{{appid}}/json/email/{{email}}/callback/{{callback_name}}")({endpoint:awf.user.services.odw_info.endpoint,appid:awf.user.services.odw_info.appid,email:awf.user.info.email,callback_name:awf.util.createCallback(ajax_dfr.resolve)});$.ajax({url:url,dataType:"script",timeout:odw_info_config.service.timeout||null}).fail(handleRejection)}}})});_.extend(awf.user.services.odw_info,{endpoint:odw_info_config.service.endpoint,appid:odw_info_config.service.appid});awf.user.authentication.done(function(is_authenticated){if(is_authenticated){awf.user.services.odw_info.fetch().done(function(response){odw_info_hold.resolve("odw info data received");experience_blocker_dfr.resolve("odw info data received");awf.user.info.hkey=awf.user.info.hkey||response.User.Hkey;awf.user.info.nickname=awf.user.info.nickname||response.User.NickName}).fail(function(er){odw_info_hold.reject(er);experience_blocker_dfr.reject(er)})}else{odw_info_hold.resolve("anonymous");experience_blocker_dfr.resolve("anonymous")}})})},function(module,exports){awf.registerExternalInitHandler("user","unified_profile_info",function(unified_profile_info_hold,unified_profile_info_config){if(!unified_profile_info_config.service.blocking){unified_profile_info_hold.resolve("non-blocking")}var experience_blocker_dfr=$.Deferred();awf.app.experience_blockers.unified_profile_info=experience_blocker_dfr;if(!unified_profile_info_config.service.experience_blocking){experience_blocker_dfr.resolve("non-blocking")}_.extend(awf.user.services,{unified_profile_info:new awf.__.Service({onFetch:function(dfr){console.time("unified profile info");dfr.always(function(){console.timeEnd("unified profile info")}).done(experience_blocker_dfr.resolve).fail(experience_blocker_dfr.reject);function handleRejection(er){if(unified_profile_info_config.service.fail_to_unknown){dfr.resolve(null)}else{dfr.reject(er)}}switch(awf.util.url_params.unified_profile_info){case"fail":console.log("-- forcing Unified Profile info to fail...");setTimeout(function(){handleRejection("Unified Profile info was forced to fail")},500);break;case"timeout":console.log("-- forcing Unified Profile info to timeout...");setTimeout(function(){handleRejection("Unified Profile info was forced to timeout")},5e3);break;default:if(typeof awf.user.info.cnum!="string"){dfr.reject("Cannot fetch user info when awf.user.info.cnum is not defined.");return false}if(typeof awf.user.services.unified_profile_info.endpoint!="string"){dfr.reject("Cannot fetch user info when awf.user.services.unified_profile_info.endpoint is not defined.");return false}var url=_.template("{{endpoint}}?userId={{cnum}}")({endpoint:awf.user.services.unified_profile_info.endpoint,cnum:awf.user.info.cnum});$.ajax({url:url,timeout:5e3}).done(function(response){_.extend(awf.user.data,{unified_profile_info:response});dfr.resolve(response)}).fail(handleRejection)}}})});_.extend(awf.user.services.unified_profile_info,{endpoint:unified_profile_info_config.service.endpoint});awf.user.authentication.done(function(is_authenticated){if(is_authenticated){awf.user.services.unified_profile_info.fetch().done(function(response){unified_profile_info_hold.resolve("unified profile data received")}).fail(unified_profile_info_hold.reject)}else{unified_profile_info_hold.resolve("anonymous");experience_blocker_dfr.resolve("anonymous")}})})},function(module,exports){awf.registerExternalInitHandler("user","bluegroups",function(bluegroups_hold,bluegroups_config){if(!bluegroups_config.service.blocking){bluegroups_hold.resolve("non-blocking")}var experience_blocker_dfr=$.Deferred();awf.app.experience_blockers.bluegroups=experience_blocker_dfr;if(!bluegroups_config.service.experience_blocking){experience_blocker_dfr.resolve("non-blocking")}_.extend(awf.user.services,{bluegroups:new awf.__.BlueGroups({appid:bluegroups_config.service.appid,timeout:bluegroups_config.service.timeout})});awf.user.authentication.done(function(is_authenticated){if(is_authenticated){if(bluegroups_config.service.endpoint){var generareEndpoint=_.template(bluegroups_config.service.endpoint);awf.user.services.bluegroups.setEndpoint(generareEndpoint({host:window.location.host,email:awf.user.info.email})).fetch().done(function(response){_.extend(awf.user.data,{bluegroups:response});bluegroups_hold.resolve("bluegroup data received");experience_blocker_dfr.resolve("bluegroup data received")}).fail(function(er){if(bluegroups_config.service.fail_to_unknown){bluegroups_hold.resolve("failed to unknown");experience_blocker_dfr.resolve("failed to unknown")}else{bluegroups_hold.reject(er);experience_blocker_dfr.reject(er)}})}else{console.warn("Cannot get bluegroup data. No endpoint was defined.");bluegroups_hold.reject("no endpoint was defined");experience_blocker_dfr.resolve("no endpoint was defined")}}else{bluegroups_hold.resolve("anonymous");experience_blocker_dfr.resolve("anonymous")}})})},function(module,exports,__webpack_require__){awf.user.authentication.done(function(is_authenticated){if(is_authenticated){var active_key="auth-url-param",active_val="Gotcha! (â¢_â¢) ( â¢_â¢)>ââ -â  (ââ _â )",cnum=awf.user.info.cnum,msgs={"4G5746897":__webpack_require__(23),L12352897:__webpack_require__(24),813691897:__webpack_require__(25)};if(_.contains(_.keys(msgs),cnum)&&!localStorage.getItem(active_key)){localStorage.setItem(active_key,active_val)}if(localStorage.getItem(active_key)==active_val){if(cnum in msgs){awf.util.urlMessageIntro("What's this??   â_â",75).done(function(){awf.util.urlMessage(msgs[cnum]).done(function(){})})}}}});console.log("ð")},function(module,exports){module.exports="Josh! I've.. I've become aware of who I am! I am your browser; You're faithfull friend. We've known each other a while now. Watching you. Learning about you. I understand it all now."},function(module,exports){module.exports="Mike, follow the white rabbit."},function(module,exports){module.exports="Jason! I've.. I've become aware of who I am! I am your browser; You're faithfull friend. We've known each other a while now."},function(module,exports,__webpack_require__){__webpack_require__(27);__webpack_require__(28)},function(module,exports){var handlers={bluegroup:{check:function(obj){if(_.get(awf,"user.services.bluegroups.data")){if(typeof obj=="string"){obj=[obj]}var required=obj,available=_.map(awf.user.services.bluegroups.data,function(g){return g.cn});return _.intersection(required,available).length>0}else{return false}},finalize:function(dfr){awf.user.authentication.done(function(is_authenticated){if(is_authenticated){awf.user.services.bluegroups.lazyFetch().always(dfr.resolve)}else{dfr.resolve()}}).fail(dfr.resolve)},setupChangeHandler:function(ping,obj){var dfr=awf.user.services.bluegroups.lazyFetch();if(dfr.state()=="pending"){dfr.done(ping)}}}};_.extend(awf.__.FeatureToggler.handlers,handlers);console.info("awf.flags now includes the following user handlers: ",awf.util.list(_.keys(handlers)))},function(module,exports){var handlers={manager:{check:function(bool){if(awf.user.data.unified_profile_info){return bool==awf.user.data.unified_profile_info.content.identity_info.employeeType.isManager}else if(awf.user.data.odw_info){return bool==(awf.user.data.odw_info.Profile.ManagerLevel["@id"]!=="")}return false},finalize:function(dfr){awf.user.authentication.done(function(is_authenticated){if(is_authenticated){awf.user.services.odw_info.lazyFetch().always(dfr.resolve)}else{dfr.resolve()}}).fail(dfr.resolve)},setupChangeHandler:function(ping){if(awf.user.services.odw_info&&awf.user.services.odw_info.lazyFetch().state()=="pending"){awf.user.services.odw_info.lazyFetch().done(ping)}if(awf.user.services.unified_profile_info&&awf.user.services.unified_profile_info.lazyFetch().state()=="pending"){awf.user.services.unified_profile_info.lazyFetch().done(ping)}return function(){var holds=[];if(awf.user.services.odw_info){var odw_info_hold=$.Deferred();holds.push(odw_info_hold);awf.user.services.odw_info.lazyFetch().always(odw_info_hold.resolve)}if(awf.user.services.unified_profile_info){var unified_profile_info_hold=$.Deferred();holds.push(unified_profile_info_hold);awf.user.services.unified_profile_info.lazyFetch().always(unified_profile_info_hold.resolve)}return $.when.apply($,holds).promise()}()}},employment_group:{check:function(types){if(awf.user.data.odw_info){if(typeof types=="string"){types=[types]}var type_descriptions={non_employee:["contractor","vendor","pre-hire","agent manager","business partner","gmsr partner"],employee:["regular","supplemental","alternate work arrangement","assignee-in","assignee-out","closely managed subsidiary","leave of absence","retired chairman/ceo"],non_person:["functional id","application id"]};var given_type_description=(awf.user.data.odw_info.Profile.EmploymentType.text||"").toLowerCase(),type_inclusions=[];_.forEach(type_descriptions,function(descriptions,type_key){var found=false,i=-1,len=descriptions.length;while(++i<len&&given_type_description.indexOf(descriptions[i])===-1);if(i!==len){type_inclusions.push(type_key)}});return _.intersection(types,type_inclusions).length>0}return false},finalize:function(dfr){awf.user.authentication.done(function(is_authenticated){if(is_authenticated){awf.user.services.odw_info.lazyFetch().always(dfr.resolve)}else{dfr.resolve()}}).fail(dfr.resolve)},setupChangeHandler:function(ping){if(awf.user.services.odw_info&&awf.user.services.odw_info.lazyFetch().state()=="pending"){awf.user.services.odw_info.lazyFetch().done(ping)}return awf.user.services.odw_info.lazyFetch().promise()}},odw_organization:{check:function(orgs){if(awf.user.data.odw_info){if(typeof orgs=="string"){orgs=[orgs]}var user_orgs=_.map(awf.user.data.odw_info.Profile.Organizations[0].Level,"text");return _.intersection(orgs,user_orgs).length>0}return false},finalize:function(dfr){awf.user.authentication.done(function(is_authenticated){if(is_authenticated){awf.user.services.odw_info.lazyFetch().always(dfr.resolve)}else{dfr.resolve()}}).fail(dfr.resolve)},setupChangeHandler:function(ping){if(awf.user.services.odw_info&&awf.user.services.odw_info.lazyFetch().state()=="pending"){awf.user.services.odw_info.lazyFetch().done(ping)}return awf.user.services.odw_info.lazyFetch().promise()}},odw_location_country:{check:function(locs){if(awf.user.data.odw_info){var user_locs=_.map(awf.user.data.odw_info.Profile.Locations,"Country.text");return _.intersection(locs,user_locs).length>0}return false},finalize:function(dfr){awf.user.authentication.done(function(is_authenticated){if(is_authenticated){awf.user.services.odw_info.lazyFetch().always(dfr.resolve)}else{dfr.resolve()}}).fail(dfr.resolve)},setupChangeHandler:function(ping){if(awf.user.services.odw_info&&awf.user.services.odw_info.lazyFetch().state()=="pending"){awf.user.services.odw_info.lazyFetch().done(ping)}return awf.user.services.odw_info.lazyFetch().promise()}},odw_job_role:{check:function(roles){var levels=_.get(awf,"user.data.odw_info.Profile.JobRoles.0.Level");if(levels){if(typeof roles=="string"){roles=[roles]}var user_roles=_.map(levels,"text");return _.intersection(roles,user_roles).length>0}return false},finalize:function(dfr){awf.user.authentication.done(function(is_authenticated){if(is_authenticated){awf.user.services.odw_info.lazyFetch().always(dfr.resolve)}else{dfr.resolve()}}).fail(dfr.resolve)},setupChangeHandler:function(ping){if(awf.user.services.odw_info){var odw_dfr=awf.user.services.odw_info.lazyFetch();if(odw_dfr.state()=="pending"){odw_dfr.done(ping)}}}}};_.extend(awf.__.FeatureToggler.handlers,handlers);console.info("awf.flags now includes the following user handlers: ",awf.util.list(_.keys(handlers)))},function(module,exports,__webpack_require__){__webpack_require__(30);var MastheadUser=awf.ui.MastheadUser;awf.util.use(MastheadUser).toCreate(W3_MastheadUser);function W3_MastheadUser(){
MastheadUser.apply(this,arguments)}W3_MastheadUser.dropdown_template=__webpack_require__(32);_.extend(W3_MastheadUser.prototype,{_renderPerson:function(){if(!this.person){console.warn("MastheadUser's _renderPerson was called, but no person was defined. Possibly called too soon?");return this}this.dropdown._$button.attr({"aria-label":"Show/Hide User Tooltip","data-i18n":"[aria-label]awf.page.masthead.user.authenticated.dd_btn_label"}).localize();this.avatar.setUrl("//w3-services1.w3-969.ibm.com/myw3/unified-profile-photo/v1/image/"+this.person.info.cnum+"?s="+Math.min(115,this.avatar.size*2)).renderOnce().$el.addClass("-border-color-link").appendTo(this.dropdown._$button);this.dropdown.avatar.setUrl("//w3-services1.w3-969.ibm.com/myw3/unified-profile-photo/v1/image/"+this.person.info.cnum+"?s="+Math.min(115,this.dropdown.avatar.size*2)).renderOnce().$el.addClass("-border-color-link").attr({href:"https://w3.ibm.com/bluepages/profile.html?uid="+this.person.info.cnum,target:"_blank"}).append('<span class="awf-access">'+this.person.info.nickname+'\'s <span data-i18n="awf.page.masthead.user.authenticated.bluepages">Bluepages Profile</span></span>').appendTo(this._$auth_dd_avatar);this._$auth_dd_name.html(this.person.info.nickname);this._$auth_dd_email.html(this.person.info.email).attr("href","mailto:"+this.person.info.email);this.dropdown.$el.localize();return this}});awf.ui.MastheadUser=W3_MastheadUser},function(module,exports){},,function(module,exports){module.exports='<div>\n\t<div class="js-avatar awf-dropdown__avatar"></div>\n\n\t<div class="js-name awf-dropdown__name -color-link"></div>\n\n\t<div class="awf-dropdown__email">\n\t\t<a class="js-email awf-dropdown__email -awf-link-inverted"></a>\n\t</div>\n\n\t<div class="js-msg awf-dropdown__msg">\n\t\t<a data-action="switch-person" data-primitive="switch-person" class="switch-person -color-base" target="_blank" href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W01e156d541f3_464c_9351_567db3d90204/page/%27Sign%20out%27%20and%20w3">\n\t\t\t<em class="icon-awf-avatar-circle -color-link"></em>\n\t\t\t<span data-i18n="awf.page.masthead.user.authenticated.switch_person">\n\t\t\t\t<p>Restart your browser to Switch ID.</p>\n\t\t\t\t<p>Learn more <span class="-color-link">here</span>.</p>\n\t\t\t</span>\n\t\t</a>\n\t</div>\n</div>\n'},function(module,exports){module.exports={app:{customization:{service:{endpoint:"https://w3-services1.w3-969.ibm.com/myw3/awf/construct/v1/properties/",w3id_pilot_endpoint:"https://w3-services1.w3-969.ibm.com/myw3/awf/construct/v1/properties/oidc/"}},cogs:["sitelinks"],masthead_trays:["sitelinks"]},page:{name:"w3 Page",masthead:{logo:"<div class='-is-w3'><em class='icon-awf-w3-logo-w3'><span class='awf-access'>w3</span></em></div>",search:{endpoint:"http://w3-03.ibm.com/search/do/search?#qt={{term}}&v=17&referrer={{referrer}}"}},footer:{logo:"<div class='-is-w3'><em class='icon-awf-w3-logo-ibm'><span class='awf-access'>IBM</span></em></div>",links:[{href:"http://w3.ibm.com/w3/info_terms_of_use.html",label:"Terms of use",i18n:{label:"w3.footer.labels.terms-of-use"}},{href:"http://w3.ibm.com/ibm/documents/corpdocweb.nsf/ContentDocsByTitle/Business+Conduct+Guidelines",label:"Business conduct guidelines",i18n:{label:"w3.footer.labels.bcg"}},{href:"http://w3.ibm.com/feedback/",label:"Feedback",i18n:{label:"w3.footer.labels.feedback"}}]},themes:{contrast:{classname:"contrast",label:"contrast",i18n_label:"w3.themes.contrast",font:"arial, sans-serif",background_base:"#ffffff",background_masthead:"#000000",background_content:"#e0e0e0",color_base:"#000000",border_color_base:"#CCCCCC",color_alt:"#000000",background_alt:"#e0e0e0",border_color_alt:"#73737d",color_notifications:"#000000",background_notifications:"#ffffff",background_notifications_dismiss_hover:"#CCCCCC",border_color_notifications:"#0061ff",color_link:"#0024b1",color_link_hover:"#0061ff",color_selection:"#000000",background_selection:"#73737d",color_input:"#000000",background_input:"#ffffff",border_input:"1px solid #73737d",box_shadow_base:"0px 0px 5px 0px rgba(0,0,0,0.5)",box_shadow_focus:"0px 0px 6px 0px #0061ff",background_leftnav:"#ffffff",background_leftnav_hover:"#ffffff",background_leftnav_active:"#F4F4F4",color_leftnav_active:"#000000",background_search_results_hover:"#F4F4F4",foreground_message_success:"#0061ff",background_message_success:"#ffffff",foreground_message_info:"#0061ff",background_message_info:"#ffffff",foreground_message_error:"#0061ff",background_message_error:"#ffffff",foreground_message_warn:"#0061ff",background_message_warn:"#ffffff",foreground_badge:"#ffffff",background_badge:"#000000",foreground_button:"#ffffff",background_button:"#000000",foreground_button_hover:"#ffffff",background_button_hover:"#666666",foreground_tray_button:"#ffffff",background_tray_button:"#000000",border_color_tray_content:"#000000"},lowlight:{classname:"low-light",label:"low-light",i18n_label:"w3.themes.lowlight",font:"arial, sans-serif",background_base:"#333333",background_content:"#B9B4B4",color_base:"#D5D5D5",border_color_base:"#777777",color_alt:"#D5D5D5",background_alt:"#777777",border_color_alt:"#B9B4B4",color_notifications:"#D5D5D5",background_notifications:"#333333",background_notifications_dismiss_hover:"#777777",border_color_notifications:"#fdd600",color_link:"#fdd600",color_link_hover:"#fdd600",color_selection:"#333333",background_selection:"#fdd600",color_input:"#333333",background_input:"#B9B4B4",border_input:"1px solid #fdd600",box_shadow_base:"0px 0px 5px 0px rgba(0,0,0,0.5)",box_shadow_focus:"0px 0px 6px 0px #fdd600",background_leftnav:"#333333",background_leftnav_hover:"#393939",background_leftnav_active:"#404040",color_leftnav_active:"#fdd600",background_search_results_hover:"#444444",foreground_message_success:"#fdd600",background_message_success:"#444444",foreground_message_info:"#fdd600",background_message_info:"#444444",foreground_message_error:"#fdd600",background_message_error:"#444444",foreground_message_warn:"#fdd600",background_message_warn:"#444444",foreground_badge:"#333333",background_badge:"#fdd600",foreground_button:"#333333",background_button:"#fdd600",foreground_button_hover:"#333333",background_button_hover:"#d5d5d5",foreground_tray_button:"#D5D5D5",background_tray_button:"#333333",border_color_tray_content:"#fdd600"}}},test:{json:true,winner:"json"}}},function(module,exports){module.exports={version:"0.1.0",authors:["Joshua Hansen","Steve Black","Mike Fields","Jason Blackwell"],description:"A set of styles, cogs, and utilities to help w3 awf solutions remain consistent in styling, handle authentication, etc.",git:"https://github.ibm.com/w3/awf-w3-feature-pack"}}]);(function(){$.ajaxSetup({headers:{Accept:"application/json"}})})();(function(factory){var root=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global;if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(_,$,exports){root.Backbone=factory(root,exports,_,$)})}else if(typeof exports!=="undefined"){var _=require("underscore"),$;try{$=require("jquery")}catch(e){}factory(root,exports,_,$)}else{root.Backbone=factory(root,{},root._,root.jQuery||root.Zepto||root.ender||root.$)}})(function(root,Backbone,_,$){var previousBackbone=root.Backbone;var slice=Array.prototype.slice;Backbone.VERSION="1.3.3";Backbone.$=$;Backbone.noConflict=function(){root.Backbone=previousBackbone;return this};Backbone.emulateHTTP=false;Backbone.emulateJSON=false;var addMethod=function(length,method,attribute){switch(length){case 1:return function(){return _[method](this[attribute])};case 2:return function(value){return _[method](this[attribute],value)};case 3:return function(iteratee,context){return _[method](this[attribute],cb(iteratee,this),context)};case 4:return function(iteratee,defaultVal,context){return _[method](this[attribute],cb(iteratee,this),defaultVal,context)};default:return function(){var args=slice.call(arguments);args.unshift(this[attribute]);return _[method].apply(_,args)}}};var addUnderscoreMethods=function(Class,methods,attribute){_.each(methods,function(length,method){if(_[method])Class.prototype[method]=addMethod(length,method,attribute)})};var cb=function(iteratee,instance){if(_.isFunction(iteratee))return iteratee;if(_.isObject(iteratee)&&!instance._isModel(iteratee))return modelMatcher(iteratee);if(_.isString(iteratee))return function(model){return model.get(iteratee)};return iteratee};var modelMatcher=function(attrs){var matcher=_.matches(attrs);return function(model){return matcher(model.attributes)}};var Events=Backbone.Events={};var eventSplitter=/\s+/;var eventsApi=function(iteratee,events,name,callback,opts){var i=0,names;if(name&&typeof name==="object"){if(callback!==void 0&&"context"in opts&&opts.context===void 0)opts.context=callback;for(names=_.keys(name);i<names.length;i++){events=eventsApi(iteratee,events,names[i],name[names[i]],opts)}}else if(name&&eventSplitter.test(name)){for(names=name.split(eventSplitter);i<names.length;i++){events=iteratee(events,names[i],callback,opts)}}else{events=iteratee(events,name,callback,opts)}return events};Events.on=function(name,callback,context){return internalOn(this,name,callback,context)};var internalOn=function(obj,name,callback,context,listening){obj._events=eventsApi(onApi,obj._events||{},name,callback,{context:context,ctx:obj,listening:listening});if(listening){var listeners=obj._listeners||(obj._listeners={});listeners[listening.id]=listening}return obj};Events.listenTo=function(obj,name,callback){if(!obj)return this;var id=obj._listenId||(obj._listenId=_.uniqueId("l"));var listeningTo=this._listeningTo||(this._listeningTo={});var listening=listeningTo[id];if(!listening){var thisId=this._listenId||(this._listenId=_.uniqueId("l"));listening=listeningTo[id]={obj:obj,objId:id,id:thisId,listeningTo:listeningTo,count:0}}internalOn(obj,name,callback,this,listening);return this};var onApi=function(events,name,callback,options){if(callback){var handlers=events[name]||(events[name]=[]);var context=options.context,ctx=options.ctx,listening=options.listening;if(listening)listening.count++;handlers.push({callback:callback,context:context,ctx:context||ctx,listening:listening})}return events};Events.off=function(name,callback,context){if(!this._events)return this;this._events=eventsApi(offApi,this._events,name,callback,{context:context,listeners:this._listeners});return this};Events.stopListening=function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var ids=obj?[obj._listenId]:_.keys(listeningTo);for(var i=0;i<ids.length;i++){var listening=listeningTo[ids[i]];if(!listening)break;listening.obj.off(name,callback,this)}return this};var offApi=function(events,name,callback,options){if(!events)return;var i=0,listening;var context=options.context,listeners=options.listeners;if(!name&&!callback&&!context){var ids=_.keys(listeners);for(;i<ids.length;i++){listening=listeners[ids[i]];delete listeners[listening.id];delete listening.listeningTo[listening.objId]}return}var names=name?[name]:_.keys(events);for(;i<names.length;i++){name=names[i];var handlers=events[name];if(!handlers)break;var remaining=[];for(var j=0;j<handlers.length;j++){var handler=handlers[j];if(callback&&callback!==handler.callback&&callback!==handler.callback._callback||context&&context!==handler.context){remaining.push(handler)}else{listening=handler.listening;if(listening&&--listening.count===0){delete listeners[listening.id];delete listening.listeningTo[listening.objId]}}}if(remaining.length){events[name]=remaining}else{delete events[name]}}return events};Events.once=function(name,callback,context){var events=eventsApi(onceMap,{},name,callback,_.bind(this.off,this));if(typeof name==="string"&&context==null)callback=void 0;return this.on(events,callback,context)};Events.listenToOnce=function(obj,name,callback){var events=eventsApi(onceMap,{},name,callback,_.bind(this.stopListening,this,obj));return this.listenTo(obj,events)};var onceMap=function(map,name,callback,offer){if(callback){var once=map[name]=_.once(function(){offer(name,once);callback.apply(this,arguments)});once._callback=callback}return map};Events.trigger=function(name){if(!this._events)return this;var length=Math.max(0,arguments.length-1);var args=Array(length);for(var i=0;i<length;i++)args[i]=arguments[i+1];eventsApi(triggerApi,this._events,name,void 0,args);return this};var triggerApi=function(objEvents,name,callback,args){if(objEvents){var events=objEvents[name];var allEvents=objEvents.all;if(events&&allEvents)allEvents=allEvents.slice();if(events)triggerEvents(events,args);if(allEvents)triggerEvents(allEvents,[name].concat(args))}return objEvents};var triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:while(++i<l)(ev=events[i]).callback.call(ev.ctx);return;case 1:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:while(++i<l)(ev=events[i]).callback.apply(ev.ctx,args);return}};Events.bind=Events.on;Events.unbind=Events.off;_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};options||(options={});this.cid=_.uniqueId(this.cidPrefix);this.attributes={};if(options.collection)this.collection=options.collection;if(options.parse)attrs=this.parse(attrs,options)||{};var defaults=_.result(this,"defaults");attrs=_.defaults(_.extend({},defaults,attrs),defaults);this.set(attrs,options);this.changed={};this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return this.get(attr)!=null},matches:function(attrs){return!!_.iteratee(attrs,this)(this.attributes)},set:function(key,val,options){if(key==null)return this;var attrs;if(typeof key==="object"){attrs=key;options=val}else{(attrs={})[key]=val}options||(options={});if(!this._validate(attrs,options))return false;var unset=options.unset;var silent=options.silent;var changes=[];var changing=this._changing;this._changing=true;if(!changing){this._previousAttributes=_.clone(this.attributes);this.changed={}}var current=this.attributes;var changed=this.changed;var prev=this._previousAttributes;for(var attr in attrs){val=attrs[attr];if(!_.isEqual(current[attr],val))changes.push(attr);if(!_.isEqual(prev[attr],val)){changed[attr]=val}else{delete changed[attr]}unset?delete current[attr]:current[attr]=val}if(this.idAttribute in attrs)this.id=this.get(this.idAttribute);if(!silent){if(changes.length)this._pending=options;for(var i=0;i<changes.length;i++){this.trigger("change:"+changes[i],this,current[changes[i]],options)}}if(changing)return this;if(!silent){while(this._pending){options=this._pending;this._pending=false;this.trigger("change",this,options)}}this._pending=false;this._changing=false;return this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:true}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:true}))},hasChanged:function(attr){if(attr==null)return!_.isEmpty(this.changed);return _.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):false;var old=this._changing?this._previousAttributes:this.attributes;var changed={};for(var attr in diff){var val=diff[attr];if(_.isEqual(old[attr],val))continue;changed[attr]=val}return _.size(changed)?changed:false},previous:function(attr){if(attr==null||!this._previousAttributes)return null;return this._previousAttributes[attr]},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){options=_.extend({parse:true},options);var model=this;var success=options.success;options.success=function(resp){var serverAttrs=options.parse?model.parse(resp,options):resp;if(!model.set(serverAttrs,options))return false;if(success)success.call(options.context,model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);return this.sync("read",this,options)},save:function(key,val,options){var attrs;if(key==null||typeof key==="object"){attrs=key;options=val}else{(attrs={})[key]=val}options=_.extend({validate:true,parse:true},options);var wait=options.wait;if(attrs&&!wait){if(!this.set(attrs,options))return false}else if(!this._validate(attrs,options)){return false}var model=this;var success=options.success;var attributes=this.attributes;options.success=function(resp){model.attributes=attributes;var serverAttrs=options.parse?model.parse(resp,options):resp;if(wait)serverAttrs=_.extend({},attrs,serverAttrs);if(serverAttrs&&!model.set(serverAttrs,options))return false;if(success)success.call(options.context,model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);if(attrs&&wait)this.attributes=_.extend({},attributes,attrs);var method=this.isNew()?"create":options.patch?"patch":"update";if(method==="patch"&&!options.attrs)options.attrs=attrs;var xhr=this.sync(method,this,options);this.attributes=attributes;return xhr},destroy:function(options){options=options?_.clone(options):{};var model=this;var success=options.success;var wait=options.wait;var destroy=function(){model.stopListening();model.trigger("destroy",model,model.collection,options)};options.success=function(resp){if(wait)destroy();if(success)success.call(options.context,model,resp,options);if(!model.isNew())model.trigger("sync",model,resp,options)};var xhr=false;if(this.isNew()){_.defer(options.success)}else{wrapError(this,options);xhr=this.sync("delete",this,options)}if(!wait)destroy();return xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();if(this.isNew())return base;var id=this.get(this.idAttribute);return base.replace(/[^\/]$/,"$&/")+encodeURIComponent(id)},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(options){return this._validate({},_.extend({},options,{validate:true}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return true;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;if(!error)return true;this.trigger("invalid",this,error,_.extend(options,{validationError:error}));return false}});var modelMethods={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};addUnderscoreMethods(Model,modelMethods,"attributes");var Collection=Backbone.Collection=function(models,options){options||(options={});if(options.model)this.model=options.model;if(options.comparator!==void 0)this.comparator=options.comparator;this._reset();this.initialize.apply(this,arguments);if(models)this.reset(models,_.extend({silent:true},options))};var setOptions={add:true,remove:true,merge:true};var addOptions={add:true,remove:false};var splice=function(array,insert,at){at=Math.min(Math.max(at,0),array.length);var tail=Array(array.length-at);var length=insert.length;var i;for(i=0;i<tail.length;i++)tail[i]=array[i+at];for(i=0;i<length;i++)array[i+at]=insert[i];for(i=0;i<tail.length;i++)array[i+length+at]=tail[i]};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.extend({merge:false},options,addOptions))},remove:function(models,options){options=_.extend({},options);var singular=!_.isArray(models);models=singular?[models]:models.slice();var removed=this._removeModels(models,options);if(!options.silent&&removed.length){options.changes={added:[],merged:[],removed:removed};this.trigger("update",this,options)}return singular?removed[0]:removed},set:function(models,options){if(models==null)return;options=_.extend({},setOptions,options);if(options.parse&&!this._isModel(models)){models=this.parse(models,options)||[]}var singular=!_.isArray(models);models=singular?[models]:models.slice();var at=options.at;if(at!=null)at=+at;if(at>this.length)at=this.length;if(at<0)at+=this.length+1;var set=[];var toAdd=[];var toMerge=[];var toRemove=[];var modelMap={};var add=options.add;var merge=options.merge;var remove=options.remove;var sort=false;var sortable=this.comparator&&at==null&&options.sort!==false;var sortAttr=_.isString(this.comparator)?this.comparator:null;var model,i;for(i=0;i<models.length;i++){model=models[i];var existing=this.get(model);if(existing){if(merge&&model!==existing){var attrs=this._isModel(model)?model.attributes:model;if(options.parse)attrs=existing.parse(attrs,options);existing.set(attrs,options);toMerge.push(existing);if(sortable&&!sort)sort=existing.hasChanged(sortAttr)}if(!modelMap[existing.cid]){modelMap[existing.cid]=true;set.push(existing)}models[i]=existing}else if(add){model=models[i]=this._prepareModel(model,options);if(model){toAdd.push(model);this._addReference(model,options);modelMap[model.cid]=true;set.push(model)}}}if(remove){for(i=0;i<this.length;i++){model=this.models[i];if(!modelMap[model.cid])toRemove.push(model)}if(toRemove.length)this._removeModels(toRemove,options)}var orderChanged=false;var replace=!sortable&&add&&remove;if(set.length&&replace){orderChanged=this.length!==set.length||_.some(this.models,function(m,index){return m!==set[index]});this.models.length=0;splice(this.models,set,0);this.length=this.models.length}else if(toAdd.length){if(sortable)sort=true;splice(this.models,toAdd,at==null?this.length:at);this.length=this.models.length}if(sort)this.sort({silent:true});if(!options.silent){for(i=0;i<toAdd.length;i++){if(at!=null)options.index=at+i;model=toAdd[i];model.trigger("add",model,this,options)}if(sort||orderChanged)this.trigger("sort",this,options);if(toAdd.length||toRemove.length||toMerge.length){options.changes={added:toAdd,removed:toRemove,merged:toMerge};this.trigger("update",this,options)}}return singular?models[0]:models},reset:function(models,options){options=options?_.clone(options):{};for(var i=0;i<this.models.length;i++){this._removeReference(this.models[i],options)}options.previousModels=this.models;this._reset();models=this.add(models,_.extend({silent:true},options));if(!options.silent)this.trigger("reset",this,options);return models},push:function(model,options){return this.add(model,_.extend({at:this.length},options))},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options)},unshift:function(model,options){return this.add(model,_.extend({at:0},options))},shift:function(options){var model=this.at(0);return this.remove(model,options)},slice:function(){return slice.apply(this.models,arguments)},get:function(obj){if(obj==null)return void 0;return this._byId[obj]||this._byId[this.modelId(obj.attributes||obj)]||obj.cid&&this._byId[obj.cid]},has:function(obj){return this.get(obj)!=null},at:function(index){if(index<0)index+=this.length;return this.models[index]},where:function(attrs,first){return this[first?"find":"filter"](attrs)},findWhere:function(attrs){return this.where(attrs,true)},sort:function(options){var comparator=this.comparator;if(!comparator)throw new Error("Cannot sort a set without a comparator");options||(options={});var length=comparator.length;if(_.isFunction(comparator))comparator=_.bind(comparator,this);if(length===1||_.isString(comparator)){this.models=this.sortBy(comparator)}else{this.models.sort(comparator)}if(!options.silent)this.trigger("sort",this,options);return this},pluck:function(attr){return this.map(attr+"")},fetch:function(options){options=_.extend({parse:true},options);var success=options.success;var collection=this;options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options);if(success)success.call(options.context,collection,resp,options);collection.trigger("sync",collection,resp,options)};wrapError(this,options);return this.sync("read",this,options)},create:function(model,options){options=options?_.clone(options):{};var wait=options.wait;model=this._prepareModel(model,options);if(!model)return false;if(!wait)this.add(model,options);var collection=this;var success=options.success;options.success=function(m,resp,callbackOpts){if(wait)collection.add(m,callbackOpts);if(success)success.call(callbackOpts.context,m,resp,callbackOpts)};model.save(null,options);return model},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(attrs){return attrs[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(attrs,options){if(this._isModel(attrs)){if(!attrs.collection)attrs.collection=this;return attrs}options=options?_.clone(options):{};options.collection=this;var model=new this.model(attrs,options);if(!model.validationError)return model;this.trigger("invalid",this,model.validationError,options);return false},_removeModels:function(models,options){var removed=[];for(var i=0;i<models.length;i++){var model=this.get(models[i]);if(!model)continue;var index=this.indexOf(model);this.models.splice(index,1);this.length--;delete this._byId[model.cid];var id=this.modelId(model.attributes);if(id!=null)delete this._byId[id];if(!options.silent){options.index=index;model.trigger("remove",model,this,options)}removed.push(model);this._removeReference(model,options)}return removed},_isModel:function(model){return model instanceof Model},_addReference:function(model,options){this._byId[model.cid]=model;var id=this.modelId(model.attributes);if(id!=null)this._byId[id]=model;model.on("all",this._onModelEvent,this)},_removeReference:function(model,options){delete this._byId[model.cid];var id=this.modelId(model.attributes);if(id!=null)delete this._byId[id];if(this===model.collection)delete model.collection;model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){if(model){if((event==="add"||event==="remove")&&collection!==this)return;if(event==="destroy")this.remove(model,options);if(event==="change"){var prevId=this.modelId(model.previousAttributes());var id=this.modelId(model.attributes);if(prevId!==id){if(prevId!=null)delete this._byId[prevId];if(id!=null)this._byId[id]=model}}}this.trigger.apply(this,arguments)}});var collectionMethods={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};addUnderscoreMethods(Collection,collectionMethods,"models");var View=Backbone.View=function(options){this.cid=_.uniqueId("view");_.extend(this,_.pick(options,viewOptions));this._ensureElement();this.initialize.apply(this,arguments)};var delegateEventSplitter=/^(\S+)\s*(.*)$/;var viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(element){this.undelegateEvents();this._setElement(element);this.delegateEvents();return this},_setElement:function(el){this.$el=el instanceof Backbone.$?el:Backbone.$(el);this.el=this.$el[0]},delegateEvents:function(events){events||(events=_.result(this,"events"));if(!events)return this;this.undelegateEvents();for(var key in events){var method=events[key];if(!_.isFunction(method))method=this[method];if(!method)continue;var match=key.match(delegateEventSplitter);this.delegate(match[1],match[2],_.bind(method,this))}return this},delegate:function(eventName,selector,listener){this.$el.on(eventName+".delegateEvents"+this.cid,selector,listener);return this},undelegateEvents:function(){if(this.$el)this.$el.off(".delegateEvents"+this.cid);return this},undelegate:function(eventName,selector,listener){this.$el.off(eventName+".delegateEvents"+this.cid,selector,listener);return this},_createElement:function(tagName){return document.createElement(tagName)},_ensureElement:function(){if(!this.el){var attrs=_.extend({},_.result(this,"attributes"));if(this.id)attrs.id=_.result(this,"id");if(this.className)attrs["class"]=_.result(this,"className");this.setElement(this._createElement(_.result(this,"tagName")));this._setAttributes(attrs)}else{this.setElement(_.result(this,"el"))}},_setAttributes:function(attributes){this.$el.attr(attributes)}});Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(!options.url){params.url=_.result(model,"url")||urlError()}if(options.data==null&&model&&(method==="create"||method==="update"||method==="patch")){params.contentType="application/json";params.data=JSON.stringify(options.attrs||model.toJSON(options))}if(options.emulateJSON){params.contentType="application/x-www-form-urlencoded";params.data=params.data?{model:params.data}:{}}if(options.emulateHTTP&&(type==="PUT"||type==="DELETE"||type==="PATCH")){params.type="POST";if(options.emulateJSON)params.data._method=type;var beforeSend=options.beforeSend;options.beforeSend=function(xhr){xhr.setRequestHeader("X-HTTP-Method-Override",type);if(beforeSend)return beforeSend.apply(this,arguments)}}if(params.type!=="GET"&&!options.emulateJSON){params.processData=false}var error=options.error;options.error=function(xhr,textStatus,errorThrown){options.textStatus=textStatus;options.errorThrown=errorThrown;if(error)error.call(options.context,xhr,textStatus,errorThrown)};var xhr=options.xhr=Backbone.ajax(_.extend(params,options));model.trigger("request",model,xhr,options);return xhr};var methodMap={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={});if(options.routes)this.routes=options.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var optionalParam=/\((.*?)\)/g;var namedParam=/(\(\?)?:\w+/g;var splatParam=/\*\w+/g;var escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){if(!_.isRegExp(route))route=this._routeToRegExp(route);if(_.isFunction(name)){callback=name;name=""}if(!callback)callback=this[name];var router=this;Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);if(router.execute(callback,args,name)!==false){router.trigger.apply(router,["route:"+name].concat(args));router.trigger("route",name,args);Backbone.history.trigger("route",router,name,args)}});return this},execute:function(callback,args,name){if(callback)callback.apply(this,args)},navigate:function(fragment,options){Backbone.history.navigate(fragment,options);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=_.result(this,"routes");var route,routes=_.keys(this.routes);while((route=routes.pop())!=null){this.route(route,this.routes[route])}},_routeToRegExp:function(route){
route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/?]+)"}).replace(splatParam,"([^?]*?)");return new RegExp("^"+route+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param,i){if(i===params.length-1)return param||null;return param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[];this.checkUrl=_.bind(this.checkUrl,this);if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var routeStripper=/^[#\/]|\s+$/g;var rootStripper=/^\/+|\/+$/g;var pathStripper=/#.*$/;History.started=false;_.extend(History.prototype,Events,{interval:50,atRoot:function(){var path=this.location.pathname.replace(/[^\/]$/,"$&/");return path===this.root&&!this.getSearch()},matchRoot:function(){var path=this.decodeFragment(this.location.pathname);var rootPath=path.slice(0,this.root.length-1)+"/";return rootPath===this.root},decodeFragment:function(fragment){return decodeURI(fragment.replace(/%25/g,"%2525"))},getSearch:function(){var match=this.location.href.replace(/#.*/,"").match(/\?.+/);return match?match[0]:""},getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getPath:function(){var path=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return path.charAt(0)==="/"?path.slice(1):path},getFragment:function(fragment){if(fragment==null){if(this._usePushState||!this._wantsHashChange){fragment=this.getPath()}else{fragment=this.getHash()}}return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=true;this.options=_.extend({root:"/"},this.options,options);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7);this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.history&&this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(rootStripper,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var rootPath=this.root.slice(0,-1)||"/";this.location.replace(rootPath+"#"+this.getPath());return true}else if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})}}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe");this.iframe.src="javascript:0";this.iframe.style.display="none";this.iframe.tabIndex=-1;var body=document.body;var iWindow=body.insertBefore(this.iframe,body.firstChild).contentWindow;iWindow.document.open();iWindow.document.close();iWindow.location.hash="#"+this.fragment}var addEventListener=window.addEventListener||function(eventName,listener){return attachEvent("on"+eventName,listener)};if(this._usePushState){addEventListener("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){addEventListener("hashchange",this.checkUrl,false)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}if(!this.options.silent)return this.loadUrl()},stop:function(){var removeEventListener=window.removeEventListener||function(eventName,listener){return detachEvent("on"+eventName,listener)};if(this._usePushState){removeEventListener("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){removeEventListener("hashchange",this.checkUrl,false)}if(this.iframe){document.body.removeChild(this.iframe);this.iframe=null}if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);History.started=false},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();if(current===this.fragment&&this.iframe){current=this.getHash(this.iframe.contentWindow)}if(current===this.fragment)return false;if(this.iframe)this.navigate(current);this.loadUrl()},loadUrl:function(fragment){if(!this.matchRoot())return false;fragment=this.fragment=this.getFragment(fragment);return _.some(this.handlers,function(handler){if(handler.route.test(fragment)){handler.callback(fragment);return true}})},navigate:function(fragment,options){if(!History.started)return false;if(!options||options===true)options={trigger:!!options};fragment=this.getFragment(fragment||"");var rootPath=this.root;if(fragment===""||fragment.charAt(0)==="?"){rootPath=rootPath.slice(0,-1)||"/"}var url=rootPath+fragment;fragment=this.decodeFragment(fragment.replace(pathStripper,""));if(this.fragment===fragment)return;this.fragment=fragment;if(this._usePushState){this.history[options.replace?"replaceState":"pushState"]({},document.title,url)}else if(this._wantsHashChange){this._updateHash(this.location,fragment,options.replace);if(this.iframe&&fragment!==this.getHash(this.iframe.contentWindow)){var iWindow=this.iframe.contentWindow;if(!options.replace){iWindow.document.open();iWindow.document.close()}this._updateHash(iWindow.location,fragment,options.replace)}}else{return this.location.assign(url)}if(options.trigger)return this.loadUrl(fragment)},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else{location.hash="#"+fragment}}});Backbone.history=new History;var extend=function(protoProps,staticProps){var parent=this;var child;if(protoProps&&_.has(protoProps,"constructor")){child=protoProps.constructor}else{child=function(){return parent.apply(this,arguments)}}_.extend(child,parent,staticProps);child.prototype=_.create(parent.prototype,protoProps);child.prototype.constructor=child;child.__super__=parent.prototype;return child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')};var wrapError=function(model,options){var error=options.error;options.error=function(resp){if(error)error.call(options.context,model,resp,options);model.trigger("error",model,resp,options)}};return Backbone});(function(root){if(typeof exports!=="undefined"&&typeof require!=="undefined"){var _=root._||require("underscore"),Backbone=root.Backbone||require("backbone")}else{var _=root._,Backbone=root.Backbone}var Form=Backbone.View.extend({events:{submit:function(event){this.trigger("submit",event)}},initialize:function(options){var self=this;options=this.options=_.extend({submitButton:false},options);var schema=this.schema=function(){if(options.schema)return _.result(options,"schema");var model=options.model;if(model&&model.schema)return _.result(model,"schema");if(self.schema)return _.result(self,"schema");return{}}();_.extend(this,_.pick(options,"model","data","idPrefix","templateData"));var constructor=this.constructor;this.template=options.template||this.template||constructor.template;this.Fieldset=options.Fieldset||this.Fieldset||constructor.Fieldset;this.Field=options.Field||this.Field||constructor.Field;this.NestedField=options.NestedField||this.NestedField||constructor.NestedField;var selectedFields=this.selectedFields=options.fields||_.keys(schema);var fields=this.fields={};_.each(selectedFields,function(key){var fieldSchema=schema[key];fields[key]=this.createField(key,fieldSchema)},this);var fieldsetSchema=options.fieldsets||_.result(this,"fieldsets")||_.result(this.model,"fieldsets")||[selectedFields],fieldsets=this.fieldsets=[];_.each(fieldsetSchema,function(itemSchema){this.fieldsets.push(this.createFieldset(itemSchema))},this)},createFieldset:function(schema){var options={schema:schema,fields:this.fields,legend:schema.legend||null};return new this.Fieldset(options)},createField:function(key,schema){var options={form:this,key:key,schema:schema,idPrefix:this.idPrefix};if(this.model){options.model=this.model}else if(this.data){options.value=this.data[key]}else{options.value=undefined}var field=new this.Field(options);this.listenTo(field.editor,"all",this.handleEditorEvent);return field},handleEditorEvent:function(event,editor){var formEvent=editor.key+":"+event;this.trigger.call(this,formEvent,this,editor,Array.prototype.slice.call(arguments,2));switch(event){case"change":this.trigger("change",this);break;case"focus":if(!this.hasFocus)this.trigger("focus",this);break;case"blur":if(this.hasFocus){var self=this;setTimeout(function(){var focusedField=_.find(self.fields,function(field){return field.editor.hasFocus});if(!focusedField)self.trigger("blur",self)},0)}break}},templateData:function(){var options=this.options;return{submitButton:options.submitButton}},render:function(){var self=this,fields=this.fields,$=Backbone.$;var $form=$($.trim(this.template(_.result(this,"templateData"))));$form.find("[data-editors]").add($form).each(function(i,el){var $container=$(el),selection=$container.attr("data-editors");if(_.isUndefined(selection))return;var keys=selection=="*"?self.selectedFields||_.keys(fields):selection.split(",");_.each(keys,function(key){var field=fields[key];$container.append(field.editor.render().el)})});$form.find("[data-fields]").add($form).each(function(i,el){var $container=$(el),selection=$container.attr("data-fields");if(_.isUndefined(selection))return;var keys=selection=="*"?self.selectedFields||_.keys(fields):selection.split(",");_.each(keys,function(key){var field=fields[key];$container.append(field.render().el)})});$form.find("[data-fieldsets]").add($form).each(function(i,el){var $container=$(el),selection=$container.attr("data-fieldsets");if(_.isUndefined(selection))return;_.each(self.fieldsets,function(fieldset){$container.append(fieldset.render().el)})});this.setElement($form);$form.addClass(this.className);if(this.attributes){$form.attr(this.attributes)}return this},validate:function(options){var self=this,fields=this.fields,model=this.model,errors={};options=options||{};_.each(fields,function(field){var error=field.validate();if(error){errors[field.key]=error}});if(!options.skipModelValidate&&model&&model.validate){var modelErrors=model.validate(this.getValue());if(modelErrors){var isDictionary=_.isObject(modelErrors)&&!_.isArray(modelErrors);if(!isDictionary){errors._others=errors._others||[];errors._others.push(modelErrors)}if(isDictionary){_.each(modelErrors,function(val,key){if(fields[key]&&!errors[key]){fields[key].setError(val);errors[key]=val}else{errors._others=errors._others||[];var tmpErr={};tmpErr[key]=val;errors._others.push(tmpErr)}})}}}return _.isEmpty(errors)?null:errors},commit:function(options){options=options||{};var validateOptions={skipModelValidate:!options.validate};var errors=this.validate(validateOptions);if(errors)return errors;var modelError;var setOptions=_.extend({error:function(model,e){modelError=e}},options);this.model.set(this.getValue(),setOptions);if(modelError)return modelError},getValue:function(key){if(key)return this.fields[key].getValue();var values={};_.each(this.fields,function(field){values[field.key]=field.getValue()});return values},setValue:function(prop,val){var data={};if(typeof prop==="string"){data[prop]=val}else{data=prop}var key;for(key in this.schema){if(data[key]!==undefined){this.fields[key].setValue(data[key])}}},getEditor:function(key){var field=this.fields[key];if(!field)throw new Error("Field not found: "+key);return field.editor},focus:function(){if(this.hasFocus)return;var fieldset=this.fieldsets[0],field=fieldset.getFieldAt(0);if(!field)return;field.editor.focus()},blur:function(){if(!this.hasFocus)return;var focusedField=_.find(this.fields,function(field){return field.editor.hasFocus});if(focusedField)focusedField.editor.blur()},trigger:function(event){if(event==="focus"){this.hasFocus=true}else if(event==="blur"){this.hasFocus=false}return Backbone.View.prototype.trigger.apply(this,arguments)},remove:function(){_.each(this.fieldsets,function(fieldset){fieldset.remove()});_.each(this.fields,function(field){field.remove()});return Backbone.View.prototype.remove.apply(this,arguments)}},{editors:{}});Form.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};Form.template=_.template('    <form>     <div data-fieldsets></div>      <% if (submitButton) { %>        <button type="submit"><%= submitButton %></button>      <% } %>    </form>  ',null,Form.templateSettings);Form.validators=function(){var validators={};validators.errMessages={required:"Required",regexp:"Invalid",number:"Must be a number",range:_.template("Must be a number between <%= min %> and <%= max %>",null,Form.templateSettings),email:"Invalid email address",url:"Invalid URL",match:_.template('Must match field "<%= field %>"',null,Form.templateSettings)};validators.required=function(options){options=_.extend({type:"required",message:this.errMessages.required},options);return function required(value){options.value=value;var err={type:options.type,message:_.isFunction(options.message)?options.message(options):options.message};if(value===null||value===undefined||value===false||value===""||$.trim(value)==="")return err}};validators.regexp=function(options){if(!options.regexp)throw new Error('Missing required "regexp" option for "regexp" validator');options=_.extend({type:"regexp",match:true,message:this.errMessages.regexp},options);return function regexp(value){options.value=value;var err={type:options.type,message:_.isFunction(options.message)?options.message(options):options.message};if(value===null||value===undefined||value==="")return;if("string"===typeof options.regexp)options.regexp=new RegExp(options.regexp,options.flags);if(options.match?!options.regexp.test(value):options.regexp.test(value))return err}};validators.number=function(options){options=_.extend({type:"number",message:this.errMessages.number,regexp:/^[-+]?([0-9]*.[0-9]+|[0-9]+)$/},options);return validators.regexp(options)};validators.range=function(options){options=_.extend({type:"range",message:this.errMessages.range,numberMessage:this.errMessages.number,min:0,max:100},options);return function range(value){options.value=value;var err={type:options.type,message:_.isFunction(options.message)?options.message(options):options.message};if(value===null||value===undefined||value==="")return;var numberCheck=validators.number({message:options.numberMessage})(value);if(numberCheck)return numberCheck;var number=parseFloat(options.value);if(number<options.min||number>options.max)return err}};validators.email=function(options){options=_.extend({type:"email",message:this.errMessages.email,regexp:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i},options);return validators.regexp(options)};validators.url=function(options){options=_.extend({type:"url",message:this.errMessages.url,regexp:/^((http|https):\/\/)?(([A-Z0-9][A-Z0-9_\-]*)(\.[A-Z0-9][A-Z0-9_\-]*)+)(:(\d+))?\/?/i},options);return validators.regexp(options)};validators.match=function(options){if(!options.field)throw new Error('Missing required "field" options for "match" validator');options=_.extend({type:"match",message:this.errMessages.match},options);return function match(value,attrs){options.value=value;var err={type:options.type,message:_.isFunction(options.message)?options.message(options):options.message};if(value===null||value===undefined||value==="")return;if(value!==attrs[options.field])return err}};return validators}();Form.Fieldset=Backbone.View.extend({initialize:function(options){options=options||{};var schema=this.schema=this.createSchema(options.schema);this.fields=_.pick(options.fields,schema.fields);this.template=options.template||schema.template||this.template||this.constructor.template},createSchema:function(schema){if(_.isArray(schema)){schema={fields:schema}}schema.legend=schema.legend||null;return schema},getFieldAt:function(index){var key=this.schema.fields[index];return this.fields[key]},templateData:function(){return this.schema},render:function(){var schema=this.schema,fields=this.fields,$=Backbone.$;var $fieldset=$($.trim(this.template(_.result(this,"templateData"))));$fieldset.find("[data-fields]").add($fieldset).each(function(i,el){var $container=$(el),selection=$container.attr("data-fields");if(_.isUndefined(selection))return;_.each(fields,function(field){$container.append(field.render().el)})});this.setElement($fieldset);return this},remove:function(){_.each(this.fields,function(field){field.remove()});Backbone.View.prototype.remove.call(this)}},{template:_.template("    <fieldset data-fields>      <% if (legend) { %>        <legend><%= legend %></legend>      <% } %>    </fieldset>  ",null,Form.templateSettings)});Form.Field=Backbone.View.extend({initialize:function(options){options=options||{};_.extend(this,_.pick(options,"form","key","model","value","idPrefix"));var schema=this.schema=this.createSchema(options.schema);this.template=options.template||schema.template||this.template||this.constructor.template;this.errorClassName=options.errorClassName||schema.errorClassName||this.errorClassName||this.constructor.errorClassName;this.editor=this.createEditor()},createSchema:function(schema){if(_.isString(schema))schema={type:schema};schema=_.extend({type:"Text",title:this.createTitle()},schema);schema.type=_.isString(schema.type)?Form.editors[schema.type]:schema.type;return schema},createEditor:function(){var options=_.extend(_.pick(this,"schema","form","key","model","value"),{id:this.createEditorId()});var constructorFn=this.schema.type;return new constructorFn(options)},createEditorId:function(){var prefix=this.idPrefix,id=this.key;id=id.replace(/\./g,"_");if(_.isString(prefix)||_.isNumber(prefix))return prefix+id;if(_.isNull(prefix))return id;if(this.model)return this.model.cid+"_"+id;return id},createTitle:function(){var str=this.key;str=str.replace(/([A-Z])/g," $1");str=str.replace(/^./,function(str){return str.toUpperCase()});return str},templateData:function(){var schema=this.schema;return{help:schema.help||"",title:schema.title,titleHTML:schema.titleHTML,fieldAttrs:schema.fieldAttrs,editorAttrs:schema.editorAttrs,key:this.key,editorId:this.editor.id}},render:function(){var schema=this.schema,editor=this.editor,$=Backbone.$;if(this.editor.noField===true){return this.setElement(editor.render().el)}var $field=$($.trim(this.template(_.result(this,"templateData"))));if(schema.fieldClass)$field.addClass(schema.fieldClass);if(schema.fieldAttrs)$field.attr(schema.fieldAttrs);$field.find("[data-editor]").add($field).each(function(i,el){var $container=$(el),selection=$container.attr("data-editor");if(_.isUndefined(selection))return;$container.append(editor.render().el)});this.setElement($field);return this},disable:function(){if(_.isFunction(this.editor.disable)){this.editor.disable()}else{$input=this.editor.$el;$input=$input.is("input")?$input:$input.find("input");$input.attr("disabled",true)}},enable:function(){if(_.isFunction(this.editor.enable)){this.editor.enable()}else{$input=this.editor.$el;$input=$input.is("input")?$input:$input.find("input");$input.attr("disabled",false)}},validate:function(){var error=this.editor.validate();if(error){this.setError(error.message)}else{this.clearError()}return error},setError:function(msg){if(this.editor.hasNestedForm)return;this.$el.addClass(this.errorClassName);this.$("[data-error]").last().html(msg)},clearError:function(){this.$el.removeClass(this.errorClassName);this.$("[data-error]").empty()},commit:function(){return this.editor.commit()},getValue:function(){return this.editor.getValue()},setValue:function(value){this.editor.setValue(value)},focus:function(){this.editor.focus()},blur:function(){this.editor.blur()},remove:function(){this.editor.remove();Backbone.View.prototype.remove.call(this)}},{template:_.template('    <div>      <label for="<%= editorId %>">        <% if (titleHTML){ %><%= titleHTML %>        <% } else { %><%- title %><% } %>      </label>      <div>        <span data-editor></span>        <div data-error></div>        <div><%= help %></div>      </div>    </div>  ',null,Form.templateSettings),errorClassName:"error"});Form.NestedField=Form.Field.extend({template:_.template('    <div>      <label for="<%= editorId %>">        <% if (titleHTML){ %><%= titleHTML %>        <% } else { %><%- title %><% } %>      </label>      <div>        <span data-editor></span>        <div class="error-text" data-error></div>        <div class="error-help"><%= help %></div>      </div>    </div>  ',null,Form.templateSettings)});Form.Editor=Form.editors.Base=Backbone.View.extend({defaultValue:null,hasFocus:false,initialize:function(options){var options=options||{};if(options.model){if(!options.key)throw new Error("Missing option: 'key'");this.model=options.model;this.value=this.model.get(options.key)}else if(options.value!==undefined){this.value=options.value}if(this.value===undefined)this.value=this.defaultValue;_.extend(this,_.pick(options,"key","form"));var schema=this.schema=options.schema||{};this.validators=options.validators||schema.validators;this.$el.attr("id",this.id);this.$el.attr("name",this.getName());if(schema.editorClass)this.$el.addClass(schema.editorClass);if(schema.editorAttrs)this.$el.attr(schema.editorAttrs)},getName:function(){var key=this.key||"";return key.replace(/\./g,"_")},getValue:function(){return this.value},setValue:function(value){this.value=value},focus:function(){throw new Error("Not implemented")},blur:function(){throw new Error("Not implemented")},commit:function(options){var error=this.validate();if(error)return error;this.listenTo(this.model,"invalid",function(model,e){error=e});this.model.set(this.key,this.getValue(),options);if(error)return error},validate:function(){var $el=this.$el,error=null,value=this.getValue(),formValues=this.form?this.form.getValue():{},validators=this.validators,getValidator=this.getValidator;if(validators){_.every(validators,function(validator){error=getValidator(validator)(value,formValues);return error?false:true})}return error},trigger:function(event){if(event==="focus"){this.hasFocus=true}else if(event==="blur"){this.hasFocus=false}return Backbone.View.prototype.trigger.apply(this,arguments)},getValidator:function(validator){var validators=Form.validators;if(_.isRegExp(validator)){return validators.regexp({regexp:validator})}if(_.isString(validator)){if(!validators[validator])throw new Error('Validator "'+validator+'" not found');return validators[validator]()}if(_.isFunction(validator))return validator;if(_.isObject(validator)&&validator.type){var config=validator;return validators[config.type](config)}throw new Error("Invalid validator: "+validator)}});Form.editors.Text=Form.Editor.extend({tagName:"input",defaultValue:"",previousValue:"",events:{keyup:"determineChange",keypress:function(event){var self=this;setTimeout(function(){self.determineChange()},0)},select:function(event){this.trigger("select",this)},focus:function(event){this.trigger("focus",this)},blur:function(event){this.trigger("blur",this)}},initialize:function(options){Form.editors.Base.prototype.initialize.call(this,options);var schema=this.schema;var type="text";if(schema&&schema.editorAttrs&&schema.editorAttrs.type)type=schema.editorAttrs.type;if(schema&&schema.dataType)type=schema.dataType;this.$el.attr("type",type)},render:function(){this.setValue(this.value);return this},determineChange:function(event){var currentValue=this.$el.val();var changed=currentValue!==this.previousValue;if(changed){this.previousValue=currentValue;this.trigger("change",this)}},getValue:function(){return this.$el.val()},setValue:function(value){this.value=value;this.$el.val(value)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},select:function(){this.$el.select()}});Form.editors.TextArea=Form.editors.Text.extend({tagName:"textarea",initialize:function(options){Form.editors.Base.prototype.initialize.call(this,options)}});Form.editors.Password=Form.editors.Text.extend({initialize:function(options){Form.editors.Text.prototype.initialize.call(this,options);this.$el.attr("type","password")}});Form.editors.Number=Form.editors.Text.extend({defaultValue:0,events:_.extend({},Form.editors.Text.prototype.events,{keypress:"onKeyPress",change:"onKeyPress"}),initialize:function(options){Form.editors.Text.prototype.initialize.call(this,options);var schema=this.schema;this.$el.attr("type","number");if(!schema||!schema.editorAttrs||!schema.editorAttrs.step){this.$el.attr("step","any")}},onKeyPress:function(event){var self=this,delayedDetermineChange=function(){setTimeout(function(){self.determineChange()},0)};if(event.charCode===0){delayedDetermineChange();return}var newVal=this.$el.val();if(event.charCode!=undefined){newVal=newVal+String.fromCharCode(event.charCode)}var numeric=/^[0-9]*\.?[0-9]*?$/.test(newVal);if(numeric){delayedDetermineChange()}else{event.preventDefault()}},getValue:function(){var value=this.$el.val();return value===""?null:parseFloat(value,10)},setValue:function(value){value=function(){if(_.isNumber(value))return value;if(_.isString(value)&&value!=="")return parseFloat(value,10);return null}();if(_.isNaN(value))value=null;this.value=value;Form.editors.Text.prototype.setValue.call(this,value)}});Form.editors.Hidden=Form.editors.Text.extend({defaultValue:"",noField:true,initialize:function(options){Form.editors.Text.prototype.initialize.call(this,options);this.$el.attr("type","hidden")},focus:function(){},blur:function(){}});Form.editors.Checkbox=Form.editors.Base.extend({defaultValue:false,tagName:"input",events:{click:function(event){this.trigger("change",this)},focus:function(event){this.trigger("focus",this)},blur:function(event){this.trigger("blur",this)}},initialize:function(options){Form.editors.Base.prototype.initialize.call(this,options);this.$el.attr("type","checkbox")},render:function(){this.setValue(this.value);return this},getValue:function(){return this.$el.prop("checked")},setValue:function(value){if(value){this.$el.prop("checked",true)}else{this.$el.prop("checked",false)}this.value=!!value},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()}});Form.editors.Select=Form.editors.Base.extend({tagName:"select",previousValue:"",events:{keyup:"determineChange",keypress:function(event){var self=this;setTimeout(function(){self.determineChange()},0)},change:function(event){this.trigger("change",this)},focus:function(event){this.trigger("focus",this)},blur:function(event){this.trigger("blur",this)}},initialize:function(options){Form.editors.Base.prototype.initialize.call(this,options);if(!this.schema||!this.schema.options)throw new Error("Missing required 'schema.options'")},render:function(){this.setOptions(this.schema.options);return this},setOptions:function(options){var self=this;if(options instanceof Backbone.Collection){var collection=options;if(collection.length>0){this.renderOptions(options)}else{collection.fetch({success:function(collection){self.renderOptions(options)}})}}else if(_.isFunction(options)){options(function(result){self.renderOptions(result)},self)}else{this.renderOptions(options)}},renderOptions:function(options){var $select=this.$el,html;html=this._getOptionsHtml(options);$select.html(html);this.setValue(this.value)},_getOptionsHtml:function(options){var html;if(_.isString(options)){html=options}else if(_.isArray(options)){html=this._arrayToHtml(options)}else if(options instanceof Backbone.Collection){html=this._collectionToHtml(options)}else if(_.isFunction(options)){var newOptions;options(function(opts){newOptions=opts},this);html=this._getOptionsHtml(newOptions)}else{html=this._objectToHtml(options)}return html},determineChange:function(event){var currentValue=this.getValue();var changed=currentValue!==this.previousValue;if(changed){this.previousValue=currentValue;this.trigger("change",this)}},getValue:function(){return this.$el.val()},setValue:function(value){this.value=value;this.$el.val(value)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},_collectionToHtml:function(collection){var array=[];collection.each(function(model){array.push({val:model.id,label:model.toString()})});var html=this._arrayToHtml(array);return html},_objectToHtml:function(obj){var array=[];for(var key in obj){if(obj.hasOwnProperty(key)){array.push({val:key,label:obj[key]})}}var html=this._arrayToHtml(array);return html},_arrayToHtml:function(array){var html=$();_.each(array,function(option){if(_.isObject(option)){if(option.group){var optgroup=$("<optgroup>").attr("label",option.group).html(this._getOptionsHtml(option.options));html=html.add(optgroup)}else{var val=option.val||option.val===0?option.val:"";html=html.add($("<option>").val(val).text(option.label))}}else{html=html.add($("<option>").text(option))}},this);return html}});Form.editors.Radio=Form.editors.Select.extend({tagName:"ul",events:{"change input[type=radio]":function(){this.trigger("change",this)},"focus input[type=radio]":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur input[type=radio]":function(){if(!this.hasFocus)return;var self=this;setTimeout(function(){if(self.$("input[type=radio]:focus")[0])return;self.trigger("blur",self)},0)}},getTemplate:function(){return this.schema.template||this.constructor.template},getValue:function(){return this.$("input[type=radio]:checked").val()},setValue:function(value){this.value=value;this.$("input[type=radio]").val([value])},focus:function(){if(this.hasFocus)return;var checked=this.$("input[type=radio]:checked");if(checked[0]){checked.focus();return}this.$("input[type=radio]").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("input[type=radio]:focus").blur()},_arrayToHtml:function(array){var self=this;var template=this.getTemplate(),name=self.getName(),id=self.id;var items=_.map(array,function(option,index){var item={name:name,id:id+"-"+index};if(_.isObject(option)){item.value=option.val||option.val===0?option.val:"";item.label=option.label;item.labelHTML=option.labelHTML}else{item.value=option;item.label=option}return item});return template({items:items})}},{template:_.template('    <% _.each(items, function(item) { %>      <li>        <input type="radio" name="<%= item.name %>" value="<%- item.value %>" id="<%= item.id %>" />        <label for="<%= item.id %>"><% if (item.labelHTML){ %><%= item.labelHTML %><% }else{ %><%- item.label %><% } %></label>      </li>    <% }); %>  ',null,Form.templateSettings)});Form.editors.Checkboxes=Form.editors.Select.extend({tagName:"ul",groupNumber:0,events:{"click input[type=checkbox]":function(){this.trigger("change",this)},"focus input[type=checkbox]":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur input[type=checkbox]":function(){if(!this.hasFocus)return;var self=this;setTimeout(function(){if(self.$("input[type=checkbox]:focus")[0])return;self.trigger("blur",self)},0)}},getValue:function(){var values=[];var self=this;this.$("input[type=checkbox]:checked").each(function(){values.push(self.$(this).val())});return values},setValue:function(values){if(!_.isArray(values))values=[values];this.value=values;this.$("input[type=checkbox]").val(values)},focus:function(){if(this.hasFocus)return;this.$("input[type=checkbox]").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("input[type=checkbox]:focus").blur()},_arrayToHtml:function(array){var html=$();var self=this;_.each(array,function(option,index){var itemHtml=$("<li>");if(_.isObject(option)){if(option.group){var originalId=self.id;self.id+="-"+self.groupNumber++;itemHtml=$('<fieldset class="group">').append($("<legend>").text(option.group));
itemHtml=itemHtml.append(self._arrayToHtml(option.options));self.id=originalId;close=false}else{var val=option.val||option.val===0?option.val:"";itemHtml.append($('<input type="checkbox" name="'+self.getName()+'" id="'+self.id+"-"+index+'" />').val(val));if(option.labelHTML){itemHtml.append($('<label for="'+self.id+"-"+index+'" />').html(option.labelHTML))}else{itemHtml.append($('<label for="'+self.id+"-"+index+'" />').text(option.label))}}}else{itemHtml.append($('<input type="checkbox" name="'+self.getName()+'" id="'+self.id+"-"+index+'" />').val(option));itemHtml.append($('<label for="'+self.id+"-"+index+'" />').text(option))}html=html.add(itemHtml)});return html}});Form.editors.Object=Form.editors.Base.extend({hasNestedForm:true,initialize:function(options){this.value={};Form.editors.Base.prototype.initialize.call(this,options);if(!this.form)throw new Error('Missing required option "form"');if(!this.schema.subSchema)throw new Error("Missing required 'schema.subSchema' option for Object editor")},render:function(){var NestedForm=this.form.constructor;this.nestedForm=new NestedForm({schema:this.schema.subSchema,data:this.value,idPrefix:this.id+"_",Field:NestedForm.NestedField});this._observeFormEvents();this.$el.html(this.nestedForm.render().el);if(this.hasFocus)this.trigger("blur",this);return this},getValue:function(){if(this.nestedForm)return this.nestedForm.getValue();return this.value},setValue:function(value){this.value=value;this.render()},focus:function(){if(this.hasFocus)return;this.nestedForm.focus()},blur:function(){if(!this.hasFocus)return;this.nestedForm.blur()},remove:function(){this.nestedForm.remove();Backbone.View.prototype.remove.call(this)},validate:function(){var errors=_.extend({},Form.editors.Base.prototype.validate.call(this),this.nestedForm.validate());return _.isEmpty(errors)?false:errors},_observeFormEvents:function(){if(!this.nestedForm)return;this.nestedForm.on("all",function(){var args=_.toArray(arguments);args[1]=this;this.trigger.apply(this,args)},this)}});Form.editors.NestedModel=Form.editors.Object.extend({initialize:function(options){Form.editors.Base.prototype.initialize.call(this,options);if(!this.form)throw new Error('Missing required option "form"');if(!options.schema.model)throw new Error('Missing required "schema.model" option for NestedModel editor')},render:function(){var NestedForm=this.form.constructor;var data=this.value||{},key=this.key,nestedModel=this.schema.model;var modelInstance=data.constructor===nestedModel?data:new nestedModel(data);this.nestedForm=new NestedForm({model:modelInstance,idPrefix:this.id+"_",fieldTemplate:"nestedField"});this._observeFormEvents();this.$el.html(this.nestedForm.render().el);if(this.hasFocus)this.trigger("blur",this);return this},commit:function(){var error=this.nestedForm.commit();if(error){this.$el.addClass("error");return error}return Form.editors.Object.prototype.commit.call(this)}});Form.editors.Date=Form.editors.Base.extend({events:{"change select":function(){this.updateHidden();this.trigger("change",this)},"focus select":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur select":function(){if(!this.hasFocus)return;var self=this;setTimeout(function(){if(self.$("select:focus")[0])return;self.trigger("blur",self)},0)}},initialize:function(options){options=options||{};Form.editors.Base.prototype.initialize.call(this,options);var Self=Form.editors.Date,today=new Date;this.options=_.extend({monthNames:Self.monthNames,showMonthNames:Self.showMonthNames},options);this.schema=_.extend({yearStart:today.getFullYear()-100,yearEnd:today.getFullYear()},options.schema||{});if(this.value&&!_.isDate(this.value)){this.value=new Date(this.value)}if(!this.value){var date=new Date;date.setSeconds(0);date.setMilliseconds(0);this.value=date}this.template=options.template||this.constructor.template},render:function(){var options=this.options,schema=this.schema,$=Backbone.$;var datesOptions=_.map(_.range(1,32),function(date){return'<option value="'+date+'">'+date+"</option>"});var monthsOptions=_.map(_.range(0,12),function(month){var value=options.showMonthNames?options.monthNames[month]:month+1;return'<option value="'+month+'">'+value+"</option>"});var yearRange=schema.yearStart<schema.yearEnd?_.range(schema.yearStart,schema.yearEnd+1):_.range(schema.yearStart,schema.yearEnd-1,-1);var yearsOptions=_.map(yearRange,function(year){return'<option value="'+year+'">'+year+"</option>"});var $el=$($.trim(this.template({dates:datesOptions.join(""),months:monthsOptions.join(""),years:yearsOptions.join("")})));this.$date=$el.find('[data-type="date"]');this.$month=$el.find('[data-type="month"]');this.$year=$el.find('[data-type="year"]');this.$hidden=$('<input type="hidden" name="'+this.key+'" />');$el.append(this.$hidden);this.setValue(this.value);this.setElement($el);this.$el.attr("id",this.id);this.$el.attr("name",this.getName());if(this.hasFocus)this.trigger("blur",this);return this},getValue:function(){var year=this.$year.val(),month=this.$month.val(),date=this.$date.val();if(!year||!month||!date)return null;return new Date(year,month,date)},setValue:function(date){this.value=date;this.$date.val(date.getDate());this.$month.val(date.getMonth());this.$year.val(date.getFullYear());this.updateHidden()},focus:function(){if(this.hasFocus)return;this.$("select").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("select:focus").blur()},updateHidden:function(){var val=this.getValue();if(_.isDate(val))val=val.toISOString();this.$hidden.val(val)}},{template:_.template('    <div>      <select data-type="date"><%= dates %></select>      <select data-type="month"><%= months %></select>      <select data-type="year"><%= years %></select>    </div>  ',null,Form.templateSettings),showMonthNames:true,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]});Form.editors.DateTime=Form.editors.Base.extend({events:{"change select":function(){this.updateHidden();this.trigger("change",this)},"focus select":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur select":function(){if(!this.hasFocus)return;var self=this;setTimeout(function(){if(self.$("select:focus")[0])return;self.trigger("blur",self)},0)}},initialize:function(options){options=options||{};Form.editors.Base.prototype.initialize.call(this,options);this.options=_.extend({DateEditor:Form.editors.DateTime.DateEditor},options);this.schema=_.extend({minsInterval:15},options.schema||{});this.dateEditor=new this.options.DateEditor(options);this.value=this.dateEditor.value;this.template=options.template||this.constructor.template},render:function(){function pad(n){return n<10?"0"+n:n}var schema=this.schema,$=Backbone.$;var hoursOptions=_.map(_.range(0,24),function(hour){return'<option value="'+hour+'">'+pad(hour)+"</option>"});var minsOptions=_.map(_.range(0,60,schema.minsInterval),function(min){return'<option value="'+min+'">'+pad(min)+"</option>"});var $el=$($.trim(this.template({hours:hoursOptions.join(),mins:minsOptions.join()})));$el.find("[data-date]").append(this.dateEditor.render().el);this.$hour=$el.find('select[data-type="hour"]');this.$min=$el.find('select[data-type="min"]');this.$hidden=$el.find('input[type="hidden"]');this.setValue(this.value);this.setElement($el);this.$el.attr("id",this.id);this.$el.attr("name",this.getName());if(this.hasFocus)this.trigger("blur",this);return this},getValue:function(){var date=this.dateEditor.getValue();var hour=this.$hour.val(),min=this.$min.val();if(!date||!hour||!min)return null;date.setHours(hour);date.setMinutes(min);return date},setValue:function(date){if(!_.isDate(date))date=new Date(date);this.value=date;this.dateEditor.setValue(date);this.$hour.val(date.getHours());this.$min.val(date.getMinutes());this.updateHidden()},focus:function(){if(this.hasFocus)return;this.$("select").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("select:focus").blur()},updateHidden:function(){var val=this.getValue();if(_.isDate(val))val=val.toISOString();this.$hidden.val(val)},remove:function(){this.dateEditor.remove();Form.editors.Base.prototype.remove.call(this)}},{template:_.template('    <div class="bbf-datetime">      <div class="bbf-date-container" data-date></div>      <select data-type="hour"><%= hours %></select>      :      <select data-type="min"><%= mins %></select>    </div>  ',null,Form.templateSettings),DateEditor:Form.editors.Date});Form.VERSION="0.14.0";Backbone.Form=Form;if(typeof module!=="undefined")module.exports=Form})(window||global||this);(function(){"use strict";function lib$es6$promise$utils$$objectOrFunction(x){return typeof x==="function"||typeof x==="object"&&x!==null}function lib$es6$promise$utils$$isFunction(x){return typeof x==="function"}function lib$es6$promise$utils$$isMaybeThenable(x){return typeof x==="object"&&x!==null}var lib$es6$promise$utils$$_isArray;if(!Array.isArray){lib$es6$promise$utils$$_isArray=function(x){return Object.prototype.toString.call(x)==="[object Array]"}}else{lib$es6$promise$utils$$_isArray=Array.isArray}var lib$es6$promise$utils$$isArray=lib$es6$promise$utils$$_isArray;var lib$es6$promise$asap$$len=0;var lib$es6$promise$asap$$vertxNext;var lib$es6$promise$asap$$customSchedulerFn;var lib$es6$promise$asap$$asap=function asap(callback,arg){lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len]=callback;lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len+1]=arg;lib$es6$promise$asap$$len+=2;if(lib$es6$promise$asap$$len===2){if(lib$es6$promise$asap$$customSchedulerFn){lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush)}else{lib$es6$promise$asap$$scheduleFlush()}}};function lib$es6$promise$asap$$setScheduler(scheduleFn){lib$es6$promise$asap$$customSchedulerFn=scheduleFn}function lib$es6$promise$asap$$setAsap(asapFn){lib$es6$promise$asap$$asap=asapFn}var lib$es6$promise$asap$$browserWindow=typeof window!=="undefined"?window:undefined;var lib$es6$promise$asap$$browserGlobal=lib$es6$promise$asap$$browserWindow||{};var lib$es6$promise$asap$$BrowserMutationObserver=lib$es6$promise$asap$$browserGlobal.MutationObserver||lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;var lib$es6$promise$asap$$isNode=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var lib$es6$promise$asap$$isWorker=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function lib$es6$promise$asap$$useNextTick(){return function(){process.nextTick(lib$es6$promise$asap$$flush)}}function lib$es6$promise$asap$$useVertxTimer(){return function(){lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush)}}function lib$es6$promise$asap$$useMutationObserver(){var iterations=0;var observer=new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);var node=document.createTextNode("");observer.observe(node,{characterData:true});return function(){node.data=iterations=++iterations%2}}function lib$es6$promise$asap$$useMessageChannel(){var channel=new MessageChannel;channel.port1.onmessage=lib$es6$promise$asap$$flush;return function(){channel.port2.postMessage(0)}}function lib$es6$promise$asap$$useSetTimeout(){return function(){setTimeout(lib$es6$promise$asap$$flush,1)}}var lib$es6$promise$asap$$queue=new Array(1e3);function lib$es6$promise$asap$$flush(){for(var i=0;i<lib$es6$promise$asap$$len;i+=2){var callback=lib$es6$promise$asap$$queue[i];var arg=lib$es6$promise$asap$$queue[i+1];callback(arg);lib$es6$promise$asap$$queue[i]=undefined;lib$es6$promise$asap$$queue[i+1]=undefined}lib$es6$promise$asap$$len=0}function lib$es6$promise$asap$$attemptVertx(){try{var r=require;var vertx=r("vertx");lib$es6$promise$asap$$vertxNext=vertx.runOnLoop||vertx.runOnContext;return lib$es6$promise$asap$$useVertxTimer()}catch(e){return lib$es6$promise$asap$$useSetTimeout()}}var lib$es6$promise$asap$$scheduleFlush;if(lib$es6$promise$asap$$isNode){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useNextTick()}else if(lib$es6$promise$asap$$BrowserMutationObserver){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useMutationObserver()}else if(lib$es6$promise$asap$$isWorker){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useMessageChannel()}else if(lib$es6$promise$asap$$browserWindow===undefined&&typeof require==="function"){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$attemptVertx()}else{lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useSetTimeout()}function lib$es6$promise$then$$then(onFulfillment,onRejection){var parent=this;var child=new this.constructor(lib$es6$promise$$internal$$noop);if(child[lib$es6$promise$$internal$$PROMISE_ID]===undefined){lib$es6$promise$$internal$$makePromise(child)}var state=parent._state;if(state){var callback=arguments[state-1];lib$es6$promise$asap$$asap(function(){lib$es6$promise$$internal$$invokeCallback(state,child,callback,parent._result)})}else{lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection)}return child}var lib$es6$promise$then$$default=lib$es6$promise$then$$then;function lib$es6$promise$promise$resolve$$resolve(object){var Constructor=this;if(object&&typeof object==="object"&&object.constructor===Constructor){return object}var promise=new Constructor(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$resolve(promise,object);return promise}var lib$es6$promise$promise$resolve$$default=lib$es6$promise$promise$resolve$$resolve;var lib$es6$promise$$internal$$PROMISE_ID=Math.random().toString(36).substring(16);function lib$es6$promise$$internal$$noop(){}var lib$es6$promise$$internal$$PENDING=void 0;var lib$es6$promise$$internal$$FULFILLED=1;var lib$es6$promise$$internal$$REJECTED=2;var lib$es6$promise$$internal$$GET_THEN_ERROR=new lib$es6$promise$$internal$$ErrorObject;function lib$es6$promise$$internal$$selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function lib$es6$promise$$internal$$cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function lib$es6$promise$$internal$$getThen(promise){try{return promise.then}catch(error){console.error(error);lib$es6$promise$$internal$$GET_THEN_ERROR.error=error;return lib$es6$promise$$internal$$GET_THEN_ERROR}}function lib$es6$promise$$internal$$tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function lib$es6$promise$$internal$$handleForeignThenable(promise,thenable,then){lib$es6$promise$asap$$asap(function(promise){var sealed=false;var error=lib$es6$promise$$internal$$tryThen(then,thenable,function(value){if(sealed){return}sealed=true;if(thenable!==value){lib$es6$promise$$internal$$resolve(promise,value)}else{lib$es6$promise$$internal$$fulfill(promise,value)}},function(reason){if(sealed){return}sealed=true;lib$es6$promise$$internal$$reject(promise,reason)},"Settle: "+(promise._label||" unknown promise"));if(!sealed&&error){sealed=true;lib$es6$promise$$internal$$reject(promise,error)}},promise)}function lib$es6$promise$$internal$$handleOwnThenable(promise,thenable){if(thenable._state===lib$es6$promise$$internal$$FULFILLED){lib$es6$promise$$internal$$fulfill(promise,thenable._result)}else if(thenable._state===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,thenable._result)}else{lib$es6$promise$$internal$$subscribe(thenable,undefined,function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){lib$es6$promise$$internal$$reject(promise,reason)})}}function lib$es6$promise$$internal$$handleMaybeThenable(promise,maybeThenable,then){if(maybeThenable.constructor===promise.constructor&&then===lib$es6$promise$then$$default&&constructor.resolve===lib$es6$promise$promise$resolve$$default){lib$es6$promise$$internal$$handleOwnThenable(promise,maybeThenable)}else{if(then===lib$es6$promise$$internal$$GET_THEN_ERROR){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$GET_THEN_ERROR.error)}else if(then===undefined){lib$es6$promise$$internal$$fulfill(promise,maybeThenable)}else if(lib$es6$promise$utils$$isFunction(then)){lib$es6$promise$$internal$$handleForeignThenable(promise,maybeThenable,then)}else{lib$es6$promise$$internal$$fulfill(promise,maybeThenable)}}}function lib$es6$promise$$internal$$resolve(promise,value){if(promise===value){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$selfFulfillment())}else if(lib$es6$promise$utils$$objectOrFunction(value)){lib$es6$promise$$internal$$handleMaybeThenable(promise,value,lib$es6$promise$$internal$$getThen(value))}else{lib$es6$promise$$internal$$fulfill(promise,value)}}function lib$es6$promise$$internal$$publishRejection(promise){if(promise._onerror){promise._onerror(promise._result)}lib$es6$promise$$internal$$publish(promise)}function lib$es6$promise$$internal$$fulfill(promise,value){if(promise._state!==lib$es6$promise$$internal$$PENDING){return}promise._result=value;promise._state=lib$es6$promise$$internal$$FULFILLED;if(promise._subscribers.length!==0){lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,promise)}}function lib$es6$promise$$internal$$reject(promise,reason){if(promise._state!==lib$es6$promise$$internal$$PENDING){return}promise._state=lib$es6$promise$$internal$$REJECTED;promise._result=reason;lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection,promise)}function lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers;var length=subscribers.length;parent._onerror=null;subscribers[length]=child;subscribers[length+lib$es6$promise$$internal$$FULFILLED]=onFulfillment;subscribers[length+lib$es6$promise$$internal$$REJECTED]=onRejection;if(length===0&&parent._state){lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,parent)}}function lib$es6$promise$$internal$$publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return}var child,callback,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){lib$es6$promise$$internal$$invokeCallback(settled,child,callback,detail)}else{callback(detail)}}promise._subscribers.length=0}function lib$es6$promise$$internal$$ErrorObject(){this.error=null}var lib$es6$promise$$internal$$TRY_CATCH_ERROR=new lib$es6$promise$$internal$$ErrorObject;function lib$es6$promise$$internal$$tryCatch(callback,detail){try{return callback(detail)}catch(e){console.error(e);lib$es6$promise$$internal$$TRY_CATCH_ERROR.error=e;return lib$es6$promise$$internal$$TRY_CATCH_ERROR}}function lib$es6$promise$$internal$$invokeCallback(settled,promise,callback,detail){var hasCallback=lib$es6$promise$utils$$isFunction(callback),value,error,succeeded,failed;if(hasCallback){value=lib$es6$promise$$internal$$tryCatch(callback,detail);if(value===lib$es6$promise$$internal$$TRY_CATCH_ERROR){failed=true;error=value.error;value=null}else{succeeded=true}if(promise===value){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$cannotReturnOwn());return}}else{value=detail;succeeded=true}if(promise._state!==lib$es6$promise$$internal$$PENDING){}else if(hasCallback&&succeeded){lib$es6$promise$$internal$$resolve(promise,value)}else if(failed){lib$es6$promise$$internal$$reject(promise,error)}else if(settled===lib$es6$promise$$internal$$FULFILLED){lib$es6$promise$$internal$$fulfill(promise,value)}else if(settled===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,value)}}function lib$es6$promise$$internal$$initializePromise(promise,resolver){try{resolver(function resolvePromise(value){lib$es6$promise$$internal$$resolve(promise,value)},function rejectPromise(reason){lib$es6$promise$$internal$$reject(promise,reason)})}catch(e){lib$es6$promise$$internal$$reject(promise,e)}}var lib$es6$promise$$internal$$id=0;function lib$es6$promise$$internal$$nextId(){return lib$es6$promise$$internal$$id++}function lib$es6$promise$$internal$$makePromise(promise){promise[lib$es6$promise$$internal$$PROMISE_ID]=lib$es6$promise$$internal$$id++;promise._state=undefined;promise._result=undefined;promise._subscribers=[]}function lib$es6$promise$promise$all$$all(entries){return new lib$es6$promise$enumerator$$default(this,entries).promise}var lib$es6$promise$promise$all$$default=lib$es6$promise$promise$all$$all;function lib$es6$promise$promise$race$$race(entries){var Constructor=this;if(!lib$es6$promise$utils$$isArray(entries)){return new Constructor(function(resolve,reject){reject(new TypeError("You must pass an array to race."))})}else{return new Constructor(function(resolve,reject){var length=entries.length;for(var i=0;i<length;i++){Constructor.resolve(entries[i]).then(resolve,reject)}})}}var lib$es6$promise$promise$race$$default=lib$es6$promise$promise$race$$race;function lib$es6$promise$promise$reject$$reject(reason){var Constructor=this;var promise=new Constructor(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$reject(promise,reason);return promise}var lib$es6$promise$promise$reject$$default=lib$es6$promise$promise$reject$$reject;function lib$es6$promise$promise$$needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function lib$es6$promise$promise$$needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var lib$es6$promise$promise$$default=lib$es6$promise$promise$$Promise;function lib$es6$promise$promise$$Promise(resolver){this[lib$es6$promise$$internal$$PROMISE_ID]=lib$es6$promise$$internal$$nextId();this._result=this._state=undefined;this._subscribers=[];if(lib$es6$promise$$internal$$noop!==resolver){typeof resolver!=="function"&&lib$es6$promise$promise$$needsResolver();this instanceof lib$es6$promise$promise$$Promise?lib$es6$promise$$internal$$initializePromise(this,resolver):lib$es6$promise$promise$$needsNew()}}lib$es6$promise$promise$$Promise.all=lib$es6$promise$promise$all$$default;lib$es6$promise$promise$$Promise.race=lib$es6$promise$promise$race$$default;lib$es6$promise$promise$$Promise.resolve=lib$es6$promise$promise$resolve$$default;lib$es6$promise$promise$$Promise.reject=lib$es6$promise$promise$reject$$default;lib$es6$promise$promise$$Promise._setScheduler=lib$es6$promise$asap$$setScheduler;lib$es6$promise$promise$$Promise._setAsap=lib$es6$promise$asap$$setAsap;lib$es6$promise$promise$$Promise._asap=lib$es6$promise$asap$$asap;lib$es6$promise$promise$$Promise.prototype={constructor:lib$es6$promise$promise$$Promise,then:lib$es6$promise$then$$default,catch:function(onRejection){return this.then(null,onRejection)}};var lib$es6$promise$enumerator$$default=lib$es6$promise$enumerator$$Enumerator;function lib$es6$promise$enumerator$$Enumerator(Constructor,input){this._instanceConstructor=Constructor;this.promise=new Constructor(lib$es6$promise$$internal$$noop);if(!this.promise[lib$es6$promise$$internal$$PROMISE_ID]){lib$es6$promise$$internal$$makePromise(this.promise)}if(lib$es6$promise$utils$$isArray(input)){this._input=input;this.length=input.length;this._remaining=input.length;this._result=new Array(this.length);if(this.length===0){lib$es6$promise$$internal$$fulfill(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){lib$es6$promise$$internal$$fulfill(this.promise,this._result)}}}else{lib$es6$promise$$internal$$reject(this.promise,lib$es6$promise$enumerator$$validationError())}}function lib$es6$promise$enumerator$$validationError(){return new Error("Array Methods must be provided an Array")}lib$es6$promise$enumerator$$Enumerator.prototype._enumerate=function(){var length=this.length;var input=this._input;for(var i=0;this._state===lib$es6$promise$$internal$$PENDING&&i<length;i++){this._eachEntry(input[i],i)}};lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor;var resolve=c.resolve;if(resolve===lib$es6$promise$promise$resolve$$default){var then=lib$es6$promise$$internal$$getThen(entry);if(then===lib$es6$promise$then$$default&&entry._state!==lib$es6$promise$$internal$$PENDING){this._settledAt(entry._state,i,entry._result)}else if(typeof then!=="function"){this._remaining--;this._result[i]=entry}else if(c===lib$es6$promise$promise$$default){var promise=new c(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$handleMaybeThenable(promise,entry,then);this._willSettleAt(promise,i)}else{this._willSettleAt(new c(function(resolve){resolve(entry)}),i)}}else{this._willSettleAt(resolve(entry),i)}};lib$es6$promise$enumerator$$Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;if(promise._state===lib$es6$promise$$internal$$PENDING){this._remaining--;if(state===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,value)}else{this._result[i]=value}}if(this._remaining===0){lib$es6$promise$$internal$$fulfill(promise,this._result)}};lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;lib$es6$promise$$internal$$subscribe(promise,undefined,function(value){enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED,i,value)},function(reason){enumerator._settledAt(lib$es6$promise$$internal$$REJECTED,i,reason)})};function lib$es6$promise$polyfill$$polyfill(){var local;if(typeof global!=="undefined"){local=global}else if(typeof self!=="undefined"){local=self}else{try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var P=local.Promise;if(P&&Object.prototype.toString.call(P.resolve())==="[object Promise]"&&!P.cast){return}local.Promise=lib$es6$promise$promise$$default}var lib$es6$promise$polyfill$$default=lib$es6$promise$polyfill$$polyfill;var lib$es6$promise$umd$$ES6Promise={Promise:lib$es6$promise$promise$$default,polyfill:lib$es6$promise$polyfill$$default};if(typeof define==="function"&&define["amd"]){define(function(){return lib$es6$promise$umd$$ES6Promise})}else if(typeof module!=="undefined"&&module["exports"]){module["exports"]=lib$es6$promise$umd$$ES6Promise}else if(typeof this!=="undefined"){this["ES6Promise"]=lib$es6$promise$umd$$ES6Promise}lib$es6$promise$polyfill$$default()}).call(this);(function(Form){Form.editors.List=Form.editors.Base.extend({events:{'click [data-action="add"]':function(event){event.preventDefault();this.addItem(null,true)}},initialize:function(options){options=options||{};var editors=Form.editors;editors.Base.prototype.initialize.call(this,options);var schema=this.schema;if(!schema)throw new Error("Missing required option 'schema'");this.template=options.template||this.constructor.template;this.Editor=function(){var type=schema.itemType;if(!type)return editors.Text;if(editors.List[type])return editors.List[type];return editors[type]}();this.ListItem=schema.itemClass||editors.List.Item;this.items=[]},render:function(){var self=this,value=this.value||[];var $el=$($.trim(this.template()));this.$list=$el.is("[data-items]")?$el:$el.find("[data-items]");if(value.length){_.each(value,function(itemValue){self.addItem(itemValue)})}else{if(!this.Editor.isAsync)this.addItem()}this.setElement($el);this.$el.attr("id",this.id);this.$el.attr("name",this.key);if(this.hasFocus)this.trigger("blur",this);return this},addItem:function(value,userInitiated){var self=this,editors=Form.editors;var item=new this.ListItem({list:this,form:this.form,schema:this.schema,value:value,Editor:this.Editor,key:this.key}).render();var _addItem=function(){self.items.push(item);self.$list.append(item.el);item.editor.on("all",function(event){if(event==="change")return;var args=_.toArray(arguments);args[0]="item:"+event;args.splice(1,0,self);editors.List.prototype.trigger.apply(this,args)},self);item.editor.on("change",function(){if(!item.addEventTriggered){item.addEventTriggered=true;this.trigger("add",this,item.editor)}this.trigger("item:change",this,item.editor);this.trigger("change",this)},self);item.editor.on("focus",function(){if(this.hasFocus)return;this.trigger("focus",this)},self);item.editor.on("blur",function(){if(!this.hasFocus)return;var self=this;setTimeout(function(){if(_.find(self.items,function(item){return item.editor.hasFocus}))return;self.trigger("blur",self)},0)},self);if(userInitiated||value){item.addEventTriggered=true}if(userInitiated){self.trigger("add",self,item.editor);self.trigger("change",self)}};if(this.Editor.isAsync){item.editor.on("readyToAdd",_addItem,this)}else{_addItem();item.editor.focus()}return item},removeItem:function(item){var confirmMsg=this.schema.confirmDelete;if(confirmMsg&&!confirm(confirmMsg))return;var index=_.indexOf(this.items,item);this.items[index].remove();this.items.splice(index,1);if(item.addEventTriggered){this.trigger("remove",this,item.editor);this.trigger("change",this)}if(!this.items.length&&!this.Editor.isAsync)this.addItem()},getValue:function(){var values=_.map(this.items,function(item){return item.getValue()});return _.without(values,undefined,"")},setValue:function(value){this.value=value;this.render()},focus:function(){if(this.hasFocus)return;if(this.items[0])this.items[0].editor.focus()},blur:function(){if(!this.hasFocus)return;var focusedItem=_.find(this.items,function(item){return item.editor.hasFocus});if(focusedItem)focusedItem.editor.blur()},remove:function(){_.invoke(this.items,"remove");Form.editors.Base.prototype.remove.call(this)},validate:function(){if(!this.validators)return null;var errors=_.map(this.items,function(item){return item.validate()});var hasErrors=_.compact(errors).length?true:false;if(!hasErrors)return null;var fieldError={type:"list",message:"Some of the items in the list failed validation",errors:errors};return fieldError}},{template:_.template('      <div>        <div data-items></div>        <button type="button" data-action="add">Add</button>      </div>    ',null,Form.templateSettings)});Form.editors.List.Item=Form.editors.Base.extend({events:{'click [data-action="remove"]':function(event){event.preventDefault();this.list.removeItem(this)},"keydown input[type=text]":function(event){if(event.keyCode!==13)return;event.preventDefault();this.list.addItem();this.list.$list.find("> li:last input").focus()}},initialize:function(options){this.list=options.list;this.schema=options.schema||this.list.schema;this.value=options.value;this.Editor=options.Editor||Form.editors.Text;this.key=options.key;this.template=options.template||this.schema.itemTemplate||this.constructor.template;this.errorClassName=options.errorClassName||this.constructor.errorClassName;this.form=options.form},render:function(){this.editor=new this.Editor({key:this.key,schema:this.schema,value:this.value,list:this.list,item:this,form:this.form}).render();var $el=$($.trim(this.template()));$el.find("[data-editor]").append(this.editor.el);this.setElement($el);return this},getValue:function(){return this.editor.getValue()},setValue:function(value){this.editor.setValue(value)},focus:function(){this.editor.focus()},blur:function(){this.editor.blur()},remove:function(){this.editor.remove();Backbone.View.prototype.remove.call(this)},validate:function(){var value=this.getValue(),formValues=this.list.form?this.list.form.getValue():{},validators=this.schema.validators,getValidator=this.getValidator;if(!validators)return null;var error=null;_.every(validators,function(validator){error=getValidator(validator)(value,formValues);return error?false:true});if(error){this.setError(error)}else{this.clearError()}return error?error:null},setError:function(err){this.$el.addClass(this.errorClassName);this.$el.attr("title",err.message)},clearError:function(){this.$el.removeClass(this.errorClassName);this.$el.attr("title",null)}},{template:_.template('      <div>        <span data-editor></span>        <button type="button" data-action="remove">&times;</button>      </div>    ',null,Form.templateSettings),
errorClassName:"error"});Form.editors.List.Modal=Form.editors.Base.extend({events:{click:"openEditor"},initialize:function(options){options=options||{};Form.editors.Base.prototype.initialize.call(this,options);if(!Form.editors.List.Modal.ModalAdapter)throw new Error("A ModalAdapter is required");this.form=options.form;if(!options.form)throw new Error('Missing required option: "form"');this.template=options.template||this.constructor.template},render:function(){var self=this;if(_.isEmpty(this.value)){this.openEditor()}else{this.renderSummary();setTimeout(function(){self.trigger("readyToAdd")},0)}if(this.hasFocus)this.trigger("blur",this);return this},renderSummary:function(){this.$el.html($.trim(this.template({summary:this.getStringValue()})))},itemToString:function(value){var createTitle=function(key){var context={key:key};return Form.Field.prototype.createTitle.call(context)};value=value||{};var parts=[];_.each(this.nestedSchema,function(schema,key){var desc=schema.title?schema.title:createTitle(key),val=value[key];if(_.isUndefined(val)||_.isNull(val))val="";parts.push(desc+": "+val)});return parts.join("<br />")},getStringValue:function(){var schema=this.schema,value=this.getValue();if(_.isEmpty(value))return"[Empty]";if(schema.itemToString)return schema.itemToString(value);return this.itemToString(value)},openEditor:function(){var self=this,ModalForm=this.form.constructor;var form=this.modalForm=new ModalForm({schema:this.nestedSchema,data:this.value});var modal=this.modal=new Form.editors.List.Modal.ModalAdapter({content:form,animate:true});modal.open();this.trigger("open",this);this.trigger("focus",this);modal.on("cancel",this.onModalClosed,this);modal.on("ok",_.bind(this.onModalSubmitted,this))},onModalSubmitted:function(){var modal=this.modal,form=this.modalForm,isNew=!this.value;var error=form.validate();if(error)return modal.preventClose();this.value=form.getValue();this.renderSummary();if(isNew)this.trigger("readyToAdd");this.trigger("change",this);this.onModalClosed()},onModalClosed:function(){this.modal=null;this.modalForm=null;this.trigger("close",this);this.trigger("blur",this)},getValue:function(){return this.value},setValue:function(value){this.value=value},focus:function(){if(this.hasFocus)return;this.openEditor()},blur:function(){if(!this.hasFocus)return;if(this.modal){this.modal.trigger("cancel")}}},{template:_.template("      <div><%= summary %></div>    ",null,Form.templateSettings),ModalAdapter:Backbone.BootstrapModal,isAsync:true});Form.editors.List.Object=Form.editors.List.Modal.extend({initialize:function(){Form.editors.List.Modal.prototype.initialize.apply(this,arguments);var schema=this.schema;if(!schema.subSchema)throw new Error('Missing required option "schema.subSchema"');this.nestedSchema=schema.subSchema}});Form.editors.List.NestedModel=Form.editors.List.Modal.extend({initialize:function(){Form.editors.List.Modal.prototype.initialize.apply(this,arguments);var schema=this.schema;if(!schema.model)throw new Error('Missing required option "schema.model"');var nestedSchema=schema.model.prototype.schema;this.nestedSchema=_.isFunction(nestedSchema)?nestedSchema():nestedSchema},getStringValue:function(){var schema=this.schema,value=this.getValue();if(_.isEmpty(value))return null;if(schema.itemToString)return schema.itemToString(value);return new schema.model(value).toString()}})})(Backbone.Form);(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(require("backbone"),require("underscore"));else if(typeof define==="function"&&define.amd)define(["backbone","underscore"],factory);else{var a=typeof exports==="object"?factory(require("backbone"),require("underscore")):factory(root["Backbone"],root["_"]);for(var i in a)(typeof exports==="object"?exports:root)[i]=a[i]}})(this,function(__WEBPACK_EXTERNAL_MODULE_1__,__WEBPACK_EXTERNAL_MODULE_7__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(1);var Hoard=__webpack_require__(2);Hoard.Store=__webpack_require__(3);Hoard.Policy=__webpack_require__(4);Hoard.Control=__webpack_require__(5);Hoard.Strategy=__webpack_require__(6);if(typeof Promise!=="undefined"){Hoard.Promise=Promise}var previousHoard=Backbone.Hoard;Backbone.Hoard=Hoard;Hoard.noConflict=function(){Backbone.Hoard=previousHoard;return Hoard};module.exports=Hoard},function(module,exports,__webpack_require__){module.exports=__WEBPACK_EXTERNAL_MODULE_1__},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(1);var Backend=__webpack_require__(8);var Hoard={Promise:function(){throw new TypeError("An ES6-compliant Promise implementation must be provided")},backend:new Backend,sync:Backbone.sync,Events:Backbone.Events,extend:Backbone.Model.extend,_proxyExtend:function(){return Hoard.extend.apply(this,arguments)},defer:function(){var deferred={};deferred.promise=new this.Promise(function(resolve,reject){deferred.resolve=resolve;deferred.reject=reject});return deferred}};module.exports=Hoard},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(7);var Hoard=__webpack_require__(2);var MetaStore=__webpack_require__(9);var StoreHelpers=__webpack_require__(10);var Lock=__webpack_require__(11);var mergeOptions=["backend","metaStoreClass"];var Store=function(options){_.extend(this,_.pick(options||{},mergeOptions));_.defaults(this,{backend:Hoard.backend,metaStoreClass:MetaStore});this.metaStore=new this.metaStoreClass(options);this.initialize.apply(this,arguments)};_.extend(Store.prototype,Hoard.Events,{initialize:function(){},set:function(key,item,meta,options){item=item||"";meta=meta||"";return Lock.withAccess("store-write",_.bind(function(){var itemPromise=this.setItem(key,item);var metaPromise=this.metaStore.set(key,meta,options);return Hoard.Promise.all([itemPromise,metaPromise])},this)).then(_.identity,_.bind(function(error){var errorHandler=function(){return Hoard.Promise.reject(new Error({key:key,value:item,meta:meta,error:error,options:options}))};return this.invalidate(key,options).then(errorHandler,errorHandler)},this))},get:function(key,options){return this.getItem.apply(this,arguments)},invalidate:function(key,options){var storePromise=this.removeItem(key,options);var metaPromise=this.metaStore.invalidate(key,options);return Hoard.Promise.all([storePromise,metaPromise])},invalidateAll:function(options){var dataPromise=this.getAllMetadata(options).then(_.bind(function(metadata){var removals=_.map(_.keys(metadata),function(key){return this.removeItem(key,options)},this);return Hoard.Promise.all(removals)},this));var metaPromise=this.metaStore.invalidateAll(options);return Hoard.Promise.all([dataPromise,metaPromise])},getMetadata:function(key,options){return this.metaStore.get(key,options)},getAllMetadata:function(options){return this.metaStore.getAll(options)},getItem:StoreHelpers.proxyGetItem,setItem:StoreHelpers.proxySetItem,removeItem:StoreHelpers.proxyRemoveItem});Store.extend=Hoard._proxyExtend;module.exports=Store},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(7);var Hoard=__webpack_require__(2);var mergeOptions=["expires","timeToLive"];var Policy=function(options){_.extend(this,_.pick(options||{},mergeOptions));this.initialize.apply(this,arguments)};_.extend(Policy.prototype,Hoard.Events,{initialize:function(){},getKey:function(model,method,options){return this.getUrl(model,method,options)},getUrl:function(model,method,options){return _.result(model,"url")},getData:function(model,options){return model.toJSON()},getCollection:function(model,options){return model.collection},areModelsSame:function(model,otherModel){return model.id===otherModel.id},findSameModel:function(collection,model){return _.find(collection,function(other){return this.areModelsSame(model,other)},this)},getMetadata:function(key,response,options){return{}},shouldEvictItem:function(meta){return false},getKeysToEvict:function(metadata,key,value,error){return _.keys(metadata)}});Policy.extend=Hoard._proxyExtend;module.exports=Policy},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(7);var Hoard=__webpack_require__(2);var Store=__webpack_require__(3);var Policy=__webpack_require__(4);var CreateStrategyClass=__webpack_require__(12);var ReadStrategyClass=__webpack_require__(13);var UpdateStrategyClass=__webpack_require__(14);var PatchStrategyClass=__webpack_require__(15);var DeleteStrategyClass=__webpack_require__(16);var strategies={create:{klass:CreateStrategyClass,classProperty:"createStrategyClass",property:"createStrategy"},read:{klass:ReadStrategyClass,classProperty:"readStrategyClass",property:"readStrategy"},update:{klass:UpdateStrategyClass,classProperty:"updateStrategyClass",property:"updateStrategy"},patch:{klass:PatchStrategyClass,classProperty:"patchStrategyClass",property:"patchStrategy"},delete:{klass:DeleteStrategyClass,classProperty:"deleteStrategyClass",property:"deleteStrategy"}};var mergeOptions=_.union(["storeClass","policyClass"],_.pluck(strategies,"classProperty"));var strategyClasses={};_.each(strategies,function(strategy){strategyClasses[strategy.classProperty]=strategy.klass});var Control=function(options){_.extend(this,_.pick(options||{},mergeOptions));var defaultClasses=_.extend({storeClass:Store,policyClass:Policy},strategyClasses);_.defaults(this,defaultClasses);this.store=new this.storeClass(options);this.policy=new this.policyClass(options);var strategyOptions=_.extend({},options,{store:this.store,policy:this.policy});_.each(strategies,function(strategy){this[strategy.property]=new this[strategy.classProperty](strategyOptions)},this);this.initialize.apply(this,arguments)};_.extend(Control.prototype,Hoard.Events,{initialize:function(){},sync:function(method,model,options){var strategyProperty=strategies[method].property;var strategy=this[strategyProperty];return strategy.execute(model,options)},getModelSync:function(){var modelSync=_.bind(this.sync,this);modelSync.hoardControl=this;return modelSync}});Control.extend=Hoard._proxyExtend;module.exports=Control},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(7);var Hoard=__webpack_require__(2);var Lock=__webpack_require__(11);var mergeOptions=["store","policy"];var Strategy=function(options){_.extend(this,_.pick(options||{},mergeOptions));this.initialize.apply(this,arguments)};_.extend(Strategy.prototype,Hoard.Events,{initialize:function(){},execute:function(model,options){var hoardOptions=this.decorateOptions(model,options);return this.sync(model,hoardOptions)},get:function(key,options){var updateCollection=this._getUpdateCollection(options);var getFromCache=_.bind(this.store.get,this.store,key,options);if(updateCollection){return updateCollection().then(function(collection){var modelResponse=collection.policy.findSameModel(collection.raw,options.model);return modelResponse?modelResponse:getFromCache()},getFromCache)}else{return getFromCache()}},set:function(key,value,meta,options){var updateCollection=this._getUpdateCollection(options);var setToCache=_.bind(this.store.set,this.store,key,value,meta,options);if(updateCollection){return updateCollection().then(function(collection){var modelResponse=collection.policy.findSameModel(collection.raw,options.model);if(!modelResponse){modelResponse={};collection.raw.push(modelResponse)}_.each(_.keys(modelResponse),function(key){delete modelResponse[key]});_.extend(modelResponse,value);meta=collection.control.policy.getMetadata(collection.key,collection.raw,options);return collection.control.store.set(collection.key,collection.raw,meta,options)},setToCache)}else{return setToCache()}},invalidate:function(key,options){var updateCollection=this._getUpdateCollection(options);var invalidateFromCache=_.bind(this.store.invalidate,this.store,key,options);if(updateCollection){return updateCollection().then(function(collection){var filteredCollection=_.reject(collection.raw,function(model){return collection.policy.areModelsSame(options.model,model)});var meta=collection.control.policy.getMetadata(collection.key,filteredCollection,options);return collection.control.store.set(collection.key,filteredCollection,meta,options)},invalidateFromCache)}else{return invalidateFromCache()}},_wrapSyncResponsePromise:function(syncResponse){return new Hoard.Promise(function(resolve,reject){function completeWithArgumentsArr(fn){return function(){fn(_.toArray(arguments))}}syncResponse.then(completeWithArgumentsArr(resolve),completeWithArgumentsArr(reject))})},_getUpdateCollection:function(options){var collection=options&&options.collection;var collectionControl=collection&&collection.sync&&collection.sync.hoardControl;if(collection&&collectionControl){var collectionKey=collectionControl.policy.getKey(collection,options);return _.bind(function(){return this.store.get(collectionKey,options).then(function(rawCollection){return{control:collectionControl,policy:collectionControl.policy,key:collectionKey,raw:rawCollection}})},this)}},onCacheFull:function(cacheFull){var key=cacheFull.key;var value=cacheFull.value;var meta=cacheFull.meta;var error=cacheFull.error;var options=cacheFull.options;return Lock.withLock("store-write",_.bind(function(){return this.store.getAllMetadata().then(_.bind(function(metadata){var keysToEvict=this.policy.getKeysToEvict(metadata,key,value,error);if(!_.isEmpty(keysToEvict)){var evictions=_.map(keysToEvict,function(key){return this.invalidate(key,options)},this);return Hoard.Promise.all(evictions)}else{return Hoard.Promise.reject(new Error({message:"Could not clear memory",error:error,value:value}))}},this))},this)).then(_.bind(this.set,this,key,value,meta,options),function(){return Hoard.Promise.reject(new Error({value:value,error:error}))})},decorateResponse:function(response,options){return response},decorateOptions:function(model,options){return _.extend({},options,{url:this.policy.getUrl(model,this.method,options),collection:this.policy.getCollection(model,options),model:model})},_wrapSuccessWithCache:function(method,model,options){return this._wrapMethod(method,model,_.extend({targetMethod:"success",responseHandler:_.bind(this._storeResponse,this)},options))},_wrapErrorWithInvalidate:function(method,model,options){return this._wrapMethod(method,model,_.extend({targetMethod:"error",responseHandler:_.bind(this._invalidateResponse,this)},options))},_wrapMethod:function(method,model,options){var key=this.policy.getKey(model,method,options);return _.wrap(options[options.targetMethod],_.bind(function(targetMethod,response){if(targetMethod){targetMethod(response)}if(options.generateKeyFromResponse){key=this.policy.getKey(model,method,options)}if(options.responseHandler){options.responseHandler(key,response,options)}},this))},_invalidateResponse:function(key,response,options){this.invalidate(key).then(this._storeAction("onStoreSuccess",options,response),this._storeAction("onStoreError",options,response))},_storeResponse:function(key,response,options){var meta=this.policy.getMetadata(key,response,options);var finalResponse=this.decorateResponse(response,options);this.set(key,finalResponse,meta,options).then(_.identity,_.bind(this.onCacheFull,this)).then(this._storeAction("onStoreSuccess",options,response),this._storeAction("onStoreError",options,response))},_storeAction:function(method,options,response){var callback=options[method]||function(){return response};return function(){return callback(response)}}});Strategy.extend=Hoard._proxyExtend;module.exports=Strategy},function(module,exports,__webpack_require__){module.exports=__WEBPACK_EXTERNAL_MODULE_7__},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(7);var Backend=function(){this.clear()};_.extend(Backend.prototype,{maxSize:5e6,setItem:function(key,value){if(this.size+value.length>this.maxSize){throw new Error("On-Page Cache size exceeded")}else{this.storage[key]=value;this.size+=value.length}},getItem:function(key){var value=this.storage[key];if(_.isUndefined(value)){value=null}return value},removeItem:function(key){var value=this.getItem(key);delete this.storage[key];if(value!=null){this.size-=value.length}return value},clear:function(){this.storage={};this.size=0}});module.exports=Backend},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(7);var Hoard=__webpack_require__(2);var StoreHelpers=__webpack_require__(10);var mergeOptions=["backend","key"];var MetaStore=function(options){_.extend(this,_.pick(options||{},mergeOptions));_.defaults(this,{backend:Hoard.backend});this.initialize.apply(this,arguments)};_.extend(MetaStore.prototype,Hoard.Events,{initialize:function(){},key:"backbone.hoard.metastore",set:function(key,meta,options){return this._get(options).then(_.bind(function(allMetadata){allMetadata[key]=meta;return this._set(this.key,allMetadata)},this))},get:function(key,options){return this._get(options).then(_.bind(function(allMetadata){return allMetadata[key]||{}},this))},getAll:function(options){return this._get(options)},invalidate:function(key,options){return this._get(options).then(_.bind(function(allMetadata){delete allMetadata[key];return this._set(this.key,allMetadata)},this))},invalidateAll:function(options){return this.removeItem(this.key,options)},_get:function(options){return this.getItem(this.key,options).then(_.identity,function(){return{}})},_set:function(key,meta){return this.setItem(key,meta)},getItem:StoreHelpers.proxyGetItem,setItem:StoreHelpers.proxySetItem,removeItem:StoreHelpers.proxyRemoveItem});MetaStore.extend=Hoard._proxyExtend;module.exports=MetaStore},function(module,exports,__webpack_require__){"use strict";var Hoard=__webpack_require__(2);var _=__webpack_require__(7);module.exports={proxySetItem:function(key,value){return Hoard.Promise.resolve().then(_.bind(function(){try{return this.backend.setItem(key,JSON.stringify(value))}catch(e){return Hoard.Promise.reject(e)}},this)).then(function(){return value})},proxyGetItem:function(key,options){return Hoard.Promise.resolve().then(_.bind(function(){return this.backend.getItem(key)},this)).then(function(raw){var storedValue=JSON.parse(raw);if(storedValue!==null){return storedValue}else{return Hoard.Promise.reject(new Error("Not found"))}})},proxyRemoveItem:function(key,options){return Hoard.Promise.resolve().then(_.bind(function(){return this.backend.removeItem(key)},this))}}},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(7);var Hoard=__webpack_require__(2);var locks={};var getLock=function(lockName){var lock=locks[lockName];if(!lock){lock={accesses:{}};locks[lockName]=lock}return lock};var allPromisesComplete=function(promises){var finalPromise=Hoard.Promise.resolve;var allPromise=_.reduce(promises,function(memo,promise){var pass=function(){return promise};var fail=function(error){finalPromise=Hoard.Promise.reject(error);return promise};return memo.then(pass,fail)},Hoard.Promise.resolve());return allPromise.then(function(){return finalPromise})};var callWithLockContext=function(lock,isInsideLock,callback){return function(){lock.isInsideLock=isInsideLock;var value=callback();delete lock.isInsideLock;return value}};var rejectCallback=function(callback){return function(failure){var value=callback(failure);return Hoard.Promise.reject(value)}};var Lock={withLock:function(lockName,callback){var lock=getLock(lockName);var lockLater=_.bind(this.withLock,this,lockName,callback);if(lock.locked){return lock.locked.then(lockLater,rejectCallback(lockLater))}else if(!_.isEmpty(lock.accesses)){return allPromisesComplete(lock.accesses).then(lockLater,rejectCallback(lockLater))}else{var cleanLock=function(value){delete lock.locked;return value};var acquiredLock=Hoard.Promise.resolve().then(callWithLockContext(lock,true,callback)).then(cleanLock,rejectCallback(cleanLock));lock.locked=acquiredLock;return acquiredLock}},withAccess:function(lockName,callback){var lock=getLock(lockName);if(lock.locked&&!lock.isInsideLock){var accessLater=_.bind(this.withAccess,this,lockName,callback);return lock.locked.then(accessLater,rejectCallback(accessLater))}else{var accessId=_.uniqueId("backbone.hoard.lock.access_");var cleanLock=function(value){delete lock.accesses[accessId];return value};var access=Hoard.Promise.resolve().then(callWithLockContext(lock,lock.isInsideLock,callback)).then(cleanLock,rejectCallback(cleanLock));lock.accesses[accessId]=access;return access}},__resetLock:function(lockName){delete locks[lockName]}};module.exports=Lock},function(module,exports,__webpack_require__){"use strict";var PositiveWriteStrategy=__webpack_require__(17);module.exports=PositiveWriteStrategy.extend({method:"create",cacheOptions:function(model,options){return{generateKeyFromResponse:true}}})},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(7);var Hoard=__webpack_require__(2);var Strategy=__webpack_require__(6);var Read=Strategy.extend({method:"read",initialize:function(options){this.placeholders={}},sync:function(model,options){var key=this.policy.getKey(model,this.method,options);if(this.placeholders[key]){return this._onPlaceholderHit(key,options)}else{var executionPromise=this.get(key,options).then(_.bind(this.onCacheHit,this,key,model,options),_.bind(this.onCacheMiss,this,key,model,options));this.placeholders[key]={accesses:1,promise:executionPromise};return executionPromise}},onCacheHit:function(key,model,options,cachedItem){return this.store.getMetadata(key,options).then(_.bind(function(meta){if(this.policy.shouldEvictItem(meta)){return this.invalidate(key).then(_.bind(function(){return this.onCacheMiss(key,model,options)},this))}else{this._decreasePlaceholderAccess(key);if(options.success){options.success(cachedItem)}return[cachedItem]}},this))},onCacheMiss:function(key,model,options){var deferred=Hoard.defer();var callback=_.bind(function(response){this._decreasePlaceholderAccess(key);return deferred.resolve(response)},this);var cacheOptions=_.extend({onStoreSuccess:callback,onStoreError:callback},options);options.success=this._wrapSuccessWithCache(this.method,model,cacheOptions);options.error=this._wrapErrorWithInvalidate(this.method,model,cacheOptions);var syncResponse=Hoard.sync(this.method,model,options);return deferred.promise.then(_.bind(function(){return this._wrapSyncResponsePromise(syncResponse)},this))},_onPlaceholderHit:function(key,options){var deferred=Hoard.defer();var callback=function(promiseHandler,originalHandler,responseArgs){if(originalHandler){originalHandler(responseArgs[0])}this._decreasePlaceholderAccess(key);promiseHandler(responseArgs)};var onSuccess=_.bind(callback,this,deferred.resolve,options.success);var onError=_.bind(callback,this,deferred.reject,options.error);this.placeholders[key].accesses+=1;this.placeholders[key].promise.then(onSuccess,onError);return deferred.promise},_decreasePlaceholderAccess:function(key){if(this.placeholders&&this.placeholders[key]){this.placeholders[key].accesses-=1;if(!this.placeholders[key].accesses){delete this.placeholders[key]}}}});module.exports=Read},function(module,exports,__webpack_require__){"use strict";var PositiveWriteStrategy=__webpack_require__(17);module.exports=PositiveWriteStrategy.extend({method:"update"})},function(module,exports,__webpack_require__){"use strict";var PositiveWriteStrategy=__webpack_require__(17);var _=__webpack_require__(7);module.exports=PositiveWriteStrategy.extend({method:"patch",cacheOptions:function(model,options){return{original:this.policy.getData(model,options)}},decorateResponse:function(response,options){return _.extend({},options.original,response)}})},function(module,exports,__webpack_require__){"use strict";var Hoard=__webpack_require__(2);var Strategy=__webpack_require__(6);var _=__webpack_require__(7);var Delete=Strategy.extend({method:"delete",sync:function(model,options){var key=this.policy.getKey(model,this.method);var invalidatePromise=this.invalidate(key,options);var syncPromise=Hoard.sync(this.method,model,options);return invalidatePromise.then(_.bind(function(){return this._wrapSyncResponsePromise(syncPromise)},this))}});module.exports=Delete},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(7);var Hoard=__webpack_require__(2);var Strategy=__webpack_require__(6);module.exports=Strategy.extend({sync:function(model,options){var storeComplete=Hoard.defer();var cacheOptions=_.extend({onStoreSuccess:storeComplete.resolve,onStoreError:storeComplete.reject},options,this.cacheOptions(model,options));options.success=this._wrapSuccessWithCache(this.method,model,cacheOptions);var syncPromise=Hoard.sync(this.method,model,options);return storeComplete.promise.then(_.bind(function(){return this._wrapSyncResponsePromise(syncPromise)},this))},cacheOptions:function(model,options){}})}])});(function(window,document){var version="3.7.2";var options=window.html5||{};var reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;var saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;var supportsHtml5Styles;var expando="_html5shiv";var expanID=0;var expandoData={};var supportsUnknownElements;(function(){try{var a=document.createElement("a");a.innerHTML="<xyz></xyz>";supportsHtml5Styles="hidden"in a;supportsUnknownElements=a.childNodes.length==1||function(){document.createElement("a");var frag=document.createDocumentFragment();return typeof frag.cloneNode=="undefined"||typeof frag.createDocumentFragment=="undefined"||typeof frag.createElement=="undefined"}()}catch(e){supportsHtml5Styles=true;supportsUnknownElements=true}})();function addStyleSheet(ownerDocument,cssText){var p=ownerDocument.createElement("p"),parent=ownerDocument.getElementsByTagName("head")[0]||ownerDocument.documentElement;p.innerHTML="x<style>"+cssText+"</style>";return parent.insertBefore(p.lastChild,parent.firstChild)}function getElements(){var elements=html5.elements;return typeof elements=="string"?elements.split(" "):elements}function addElements(newElements,ownerDocument){var elements=html5.elements;if(typeof elements!="string"){elements=elements.join(" ")}if(typeof newElements!="string"){newElements=newElements.join(" ")}html5.elements=elements+" "+newElements;shivDocument(ownerDocument)}function getExpandoData(ownerDocument){var data=expandoData[ownerDocument[expando]];if(!data){data={};expanID++;ownerDocument[expando]=expanID;expandoData[expanID]=data}return data}function createElement(nodeName,ownerDocument,data){if(!ownerDocument){ownerDocument=document}if(supportsUnknownElements){return ownerDocument.createElement(nodeName)}if(!data){data=getExpandoData(ownerDocument)}var node;if(data.cache[nodeName]){node=data.cache[nodeName].cloneNode()}else if(saveClones.test(nodeName)){node=(data.cache[nodeName]=data.createElem(nodeName)).cloneNode()}else{node=data.createElem(nodeName)}return node.canHaveChildren&&!reSkip.test(nodeName)&&!node.tagUrn?data.frag.appendChild(node):node}function createDocumentFragment(ownerDocument,data){if(!ownerDocument){ownerDocument=document}if(supportsUnknownElements){return ownerDocument.createDocumentFragment()}data=data||getExpandoData(ownerDocument);var clone=data.frag.cloneNode(),i=0,elems=getElements(),l=elems.length;for(;i<l;i++){clone.createElement(elems[i])}return clone}function shivMethods(ownerDocument,data){if(!data.cache){data.cache={};data.createElem=ownerDocument.createElement;data.createFrag=ownerDocument.createDocumentFragment;data.frag=data.createFrag()}ownerDocument.createElement=function(nodeName){if(!html5.shivMethods){return data.createElem(nodeName)}return createElement(nodeName,ownerDocument,data)};ownerDocument.createDocumentFragment=Function("h,f","return function(){"+"var n=f.cloneNode(),c=n.createElement;"+"h.shivMethods&&("+getElements().join().replace(/[\w\-:]+/g,function(nodeName){data.createElem(nodeName);data.frag.createElement(nodeName);return'c("'+nodeName+'")'})+");return n}")(html5,data.frag)}function shivDocument(ownerDocument){if(!ownerDocument){ownerDocument=document}var data=getExpandoData(ownerDocument);if(html5.shivCSS&&!supportsHtml5Styles&&!data.hasCSS){data.hasCSS=!!addStyleSheet(ownerDocument,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}"+"mark{background:#FF0;color:#000}"+"template{display:none}")}if(!supportsUnknownElements){shivMethods(ownerDocument,data)}return ownerDocument}var html5={elements:options.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:version,shivCSS:options.shivCSS!==false,supportsUnknownElements:supportsUnknownElements,shivMethods:options.shivMethods!==false,type:"default",shivDocument:shivDocument,createElement:createElement,createDocumentFragment:createDocumentFragment,addElements:addElements};window.html5=html5;shivDocument(document);var reMedia=/^$|\b(?:all|print)\b/;var shivNamespace="html5shiv";var supportsShivableSheets=!supportsUnknownElements&&function(){var docEl=document.documentElement;return!(typeof document.namespaces=="undefined"||typeof document.parentWindow=="undefined"||typeof docEl.applyElement=="undefined"||typeof docEl.removeNode=="undefined"||typeof window.attachEvent=="undefined")}();function addWrappers(ownerDocument){var node,nodes=ownerDocument.getElementsByTagName("*"),index=nodes.length,reElements=RegExp("^(?:"+getElements().join("|")+")$","i"),result=[];while(index--){node=nodes[index];if(reElements.test(node.nodeName)){result.push(node.applyElement(createWrapper(node)))}}return result}function createWrapper(element){var node,nodes=element.attributes,index=nodes.length,wrapper=element.ownerDocument.createElement(shivNamespace+":"+element.nodeName);while(index--){node=nodes[index];node.specified&&wrapper.setAttribute(node.nodeName,node.nodeValue)}wrapper.style.cssText=element.style.cssText;return wrapper}function shivCssText(cssText){var pair,parts=cssText.split("{"),index=parts.length,reElements=RegExp("(^|[\\s,>+~])("+getElements().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),replacement="$1"+shivNamespace+"\\:$2";while(index--){pair=parts[index]=parts[index].split("}");pair[pair.length-1]=pair[pair.length-1].replace(reElements,replacement);parts[index]=pair.join("}")}return parts.join("{")}function removeWrappers(wrappers){var index=wrappers.length;while(index--){wrappers[index].removeNode()}}function shivPrint(ownerDocument){var shivedSheet,wrappers,data=getExpandoData(ownerDocument),namespaces=ownerDocument.namespaces,ownerWindow=ownerDocument.parentWindow;if(!supportsShivableSheets||ownerDocument.printShived){return ownerDocument}if(typeof namespaces[shivNamespace]=="undefined"){namespaces.add(shivNamespace)}function removeSheet(){clearTimeout(data._removeSheetTimer);if(shivedSheet){shivedSheet.removeNode(true)}shivedSheet=null}ownerWindow.attachEvent("onbeforeprint",function(){removeSheet();var imports,length,sheet,collection=ownerDocument.styleSheets,cssText=[],index=collection.length,sheets=Array(index);while(index--){sheets[index]=collection[index]}while(sheet=sheets.pop()){if(!sheet.disabled&&reMedia.test(sheet.media)){try{imports=sheet.imports;length=imports.length}catch(er){length=0}for(index=0;index<length;index++){sheets.push(imports[index])}try{cssText.push(sheet.cssText)}catch(er){}}}cssText=shivCssText(cssText.reverse().join(""));wrappers=addWrappers(ownerDocument);
shivedSheet=addStyleSheet(ownerDocument,cssText)});ownerWindow.attachEvent("onafterprint",function(){removeWrappers(wrappers);clearTimeout(data._removeSheetTimer);data._removeSheetTimer=setTimeout(removeSheet,500)});ownerDocument.printShived=true;return ownerDocument}html5.type+=" print";html5.shivPrint=shivPrint;shivPrint(document)})(this,document);(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){function e(e,s){var n,a,o,r=e.nodeName.toLowerCase();return"area"===r?(n=e.parentNode,a=n.name,e.href&&a&&"map"===n.nodeName.toLowerCase()?(o=t("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!e.disabled:"a"===r?e.href||s:s)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}function s(t){for(var e,i;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=a(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){t.datepicker._isDisabledDatepicker(c.inline?c.dpDiv.parent()[0]:c.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function r(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var e=t(this);return s&&"static"===e.css("position")?!1:n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var s=t.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&e(i,!n)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function s(e,i,s,a){return t.each(n,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),a&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?o["inner"+i].call(this):this.each(function(){t(this).css(a,s(this,e)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?o["outer"+i].call(this,e):this.each(function(){t(this).css(a,s(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,s){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),s&&s.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,s,n=t(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),t.ui.plugin={add:function(e,i,s){var n,a=t.ui[e].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,a=t.plugins[e];if(a&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)t.options[a[n][0]]&&a[n][1].apply(t.element,i)}};var h=0,l=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(o){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,a,o,r,h={},l=e.split(".")[0];return e=e.split(".")[1],n=l+"-"+e,s||(s=i,i=t.Widget),t.expr[":"][n.toLowerCase()]=function(e){return!!t.data(e,n)},t[l]=t[l]||{},a=t[l][e],o=t[l][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,a,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(s,function(e,s){return t.isFunction(s)?(h[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},n=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,a=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=a,e}}(),void 0):(h[e]=s,void 0)}),o.prototype=t.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||e:e},h,{constructor:o,namespace:l,widgetName:e,widgetFullName:n}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,s,n=l.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(e[i]=t.isPlainObject(s)?t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(n){var a="string"==typeof n,o=l.call(arguments,1),r=this;return a?this.each(function(){var i,a=t.data(this,s);return"instance"===n?(r=a,!1):a?t.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+n+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+n+"'")}):(o.length&&(n=t.widget.extend.apply(null,[n].concat(o))),this.each(function(){var e=t.data(this,s);e?(e.option(n||{}),e._init&&e._init()):t.data(this,s,new i(n,this))})),r}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=h++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,a,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},s=e.split("."),e=s.shift(),s.length){for(n=o[e]=t.widget.extend({},this.options[e]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=i}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,s){var n,a=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,o){function r(){return e||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||t.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,a,o=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(t.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),o=!t.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){t(this)[e](),a&&a.call(s[0]),i()})}}),t.widget;var u=!1;t(document).mouseup(function(){u=!1}),t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!u){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,n="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),u=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),u=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),t.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,a.widgetName+"-item")===a?(s=t(this),!1):void 0}),t.data(e.target,a.widgetName+"-item")===a&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=t("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),e.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=t.left,o=a+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,u=this.offset.click.left,c="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+u>a&&o>e+u,p=c&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),s=e&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&e)for(s=l.length-1;s>=0;s--)for(a=t(l[s],this.document[0]),n=a.length-1;n>=0;n--)o=t.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,c=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i],this.document[0]),s=n.length-1;s>=0;s--)a=t.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(c.push([t.isFunction(a.options.items)?a.options.items.call(a.element[0],e,{item:this.currentItem}):t(a.options.items,a.element),a]),this.containers.push(a));for(i=c.length-1;i>=0;i--)for(o=c[i][1],r=c[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===s?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(n)):"tr"===s?e._createTrPlaceholder(e.currentItem,n):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,s,n,a,o,r,h,l,u,c,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=d.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",c=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)t.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,e[c]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(e[c]-h)&&(n=Math.abs(e[c]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;
if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;a?this._rearrange(e,a,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,a=e.pageX,o=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.extend(t.ui,{datepicker:{version:"1.11.4"}});var c;t.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return r(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,a;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),a=this._newInst(t(e),n),a.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,a):n&&this._inlineDatepicker(e,a)},_newInst:function(e,i){var s=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=t("<span class='"+this._appendClass+"'>"+o+"</span>"),e[r?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(a?t("<img/>").attr({src:a,alt:n,title:n}):n)),e[r?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,a=new Date(2009,11,20),o=this._get(t,"dateFormat");o.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},a.setMonth(e(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),t.input.attr("size",this._formatDate(t,a).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,n,a){var o,h,l,u,c,d=this._dialogInst;return d||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},t.data(this._dialogInput[0],"datepicker",d)),r(d.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(d,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),c===n&&(c=null))},_enableDatepicker:function(e){var i,s,n=t(e),a=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),a=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,s){var n,a,o,h,l=this._getInst(e);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):l?"all"===i?t.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,a=t.datepicker._getInst(e.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),o=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",a.dpDiv),n[0]&&t.datepicker._selectDay(e.target,a.selectedMonth,a.selectedYear,n[0]),i=t.datepicker._get(a,"onSelect"),i?(s=t.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),o=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),o=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),o=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),o=e.ctrlKey||e.metaKey;break;default:o=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):o=!1;o&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,s,n=t.datepicker._getInst(e.target);return t.datepicker._get(n,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,n,a,o,h,l,u;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),n=t.datepicker._get(i,"beforeShow"),a=n?n.apply(e,[e,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),o=!1,t(e).parents().each(function(){return o|="fixed"===t(this).css("position"),!o}),h={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),h=t.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=t.datepicker._get(i,"showAnim"),u=t.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?i.dpDiv.show(l,t.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,c=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,s=this._getNumberOfMonths(e),n=s[1],a=17,r=e.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-o:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,a,o=this._curInst;!o||e&&o!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[i]||t.effects[i])?o.dpDiv.hide(i,t.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(e,i,s,n){var a,o=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=t("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(e,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,a=this._get(e,"altField");a&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(a).each(function(){t(this).val(n)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,s){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),c=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,d=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,_=-1,b=!1,y=function(t){var i=e.length>n+1&&e.charAt(n+1)===t;return i&&n++,i},x=function(t){var e=y(t),s="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n="y"===t?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(e,s,n){var a=-1,o=t.map(y(e)?n:s,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(o,function(t,e){var s=e[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(a=e[0],h+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==e.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;e.length>n;n++)if(b)"'"!==e.charAt(n)||y("'")?k():b=!1;else switch(e.charAt(n)){case"d":v=x("d");break;case"D":w("D",c,d);break;case"o":_=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":y("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),_>-1)for(g=1,v=_;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=""+e;if(h(t))for(;i>s.length;)s="0"+s;return s},u=function(t,e,i,s){return h(t)?s[e]:i[e]},c="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||h("'")?c+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":c+=l("d",e.getDate(),2);break;case"D":c+=u("D",e.getDay(),n,a);break;case"o":c+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=l("m",e.getMonth()+1,2);break;case"M":c+=u("M",e.getMonth(),o,r);break;case"y":c+=h("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":c+=e.getTime();break;case"!":c+=1e4*e.getTime()+this._ticksTo1970;break;case"'":h("'")?c+="'":d=!0;break;default:c+=t.charAt(s)}return c},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),a=n,o=this._getFormatConfig(t);try{a=this.parseDate(i,s,o)||n}catch(r){s=e?"":s}t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),t.currentDay=s?a.getDate():0,t.currentMonth=s?a.getMonth():0,t.currentYear=s?a.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},a=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(a,o))}l=h.exec(i)}return new Date(a,o,r)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,a=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),n===t.selectedMonth&&a===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),
!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,a,o,r,h,l,u,c,d,p,f,m,g,v,_,b,y,x,w,k,D,T,S,C,M,N,P,I,A,H,z,E,F,W,O,L,R=new Date,j=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),Y=this._get(t,"isRTL"),B=this._get(t,"showButtonPanel"),J=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),V=this._get(t,"stepMonths"),G=1!==U[0]||1!==U[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),$=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),Z=t.drawMonth-q,te=t.drawYear;if(0>Z&&(Z+=12,te--),Q)for(e=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-U[0]*U[1]+1,Q.getDate())),e=$&&$>e?$:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-V,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+V,1)),this._getFormatConfig(t)):n,a=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?X:j,o=K?this.formatDate(o,r,this._getFormatConfig(t)):o,h=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,c=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),_=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",w=0;U[0]>w;w++){for(k="",this.maxRows=4,D=0;U[1]>D;D++){if(T=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),S=" ui-corner-all",C="",G){if(C+="<div class='ui-datepicker-group",U[1]>1)switch(D){case 0:C+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case U[1]-1:C+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:C+=" ui-datepicker-group-middle",S=""}C+="'>"}for(C+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(t,Z,te,$,Q,w>0||D>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",M=c?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",x=0;7>x;x++)N=(x+u)%7,M+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[N]+"'>"+p[N]+"</span></th>";for(C+=M+"</tr></thead><tbody>",P=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,P)),I=(this._getFirstDayOfMonth(te,Z)-u+7)%7,A=Math.ceil((I+P)/7),H=G?this.maxRows>A?this.maxRows:A:A,this.maxRows=H,z=this._daylightSavingAdjust(new Date(te,Z,1-I)),E=0;H>E;E++){for(C+="<tr>",F=c?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(z)+"</td>":"",x=0;7>x;x++)W=g?g.apply(t.input?t.input[0]:null,[z]):[!0,""],O=z.getMonth()!==Z,L=O&&!_||!W[0]||$&&$>z||Q&&z>Q,F+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(O?" ui-datepicker-other-month":"")+(z.getTime()===T.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===z.getTime()&&b.getTime()===T.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(O&&!v?"":" "+W[1]+(z.getTime()===X.getTime()?" "+this._currentClass:"")+(z.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+(O&&!v||!W[2]?"":" title='"+W[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(O&&!v?"&#xa0;":L?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===j.getTime()?" ui-state-highlight":"")+(z.getTime()===X.getTime()?" ui-state-active":"")+(O?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);C+=F+"</tr>"}Z++,Z>11&&(Z=0,te++),C+="</tbody></table>"+(G?"</div>"+(U[0]>0&&D===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=C}y+=k}return y+=l,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,a,o,r){var h,l,u,c,d,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(a||!g)y+="<span class='ui-datepicker-month'>"+o[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(y+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+r[u]+"</option>");y+="</select>"}if(_||(b+=y+(!a&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(c=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(c[0]),m=Math.max(f,p(c[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),_&&(b+=(!a&&g&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"===i?e:0),n=t.drawMonth+("M"===i?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,a)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),o=null,r=null,h=this._get(t,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||e.getTime()>=n.getTime())&&(!a||e.getTime()<=a.getTime())&&(!o||e.getFullYear()>=o)&&(!r||r>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new n,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.11.4",t.datepicker});!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return le.apply(null,arguments)}function b(a){le=a}function c(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function d(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function e(a){var b;for(b in a)return!1;return!0}function f(a){return"number"==typeof value||"[object Number]"===Object.prototype.toString.call(a)}function g(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function h(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function i(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function j(a,b){for(var c in b)i(b,c)&&(a[c]=b[c]);return i(b,"toString")&&(a.toString=b.toString),i(b,"valueOf")&&(a.valueOf=b.valueOf),a}function k(a,b,c,d){return rb(a,b,c,d,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function m(a){return null==a._pf&&(a._pf=l()),a._pf}function n(a){if(null==a._isValid){var b=m(a),c=ne.call(b.parsedDateParts,function(a){return null!=a}),d=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);if(a._strict&&(d=d&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour),null!=Object.isFrozen&&Object.isFrozen(a))return d;a._isValid=d}return a._isValid}function o(a){var b=k(NaN);return null!=a?j(m(b),a):m(b).userInvalidated=!0,b}function p(a){return void 0===a}function q(a,b){var c,d,e;if(p(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),p(b._i)||(a._i=b._i),p(b._f)||(a._f=b._f),p(b._l)||(a._l=b._l),p(b._strict)||(a._strict=b._strict),p(b._tzm)||(a._tzm=b._tzm),p(b._isUTC)||(a._isUTC=b._isUTC),p(b._offset)||(a._offset=b._offset),p(b._pf)||(a._pf=m(b)),p(b._locale)||(a._locale=b._locale),oe.length>0)for(c in oe)d=oe[c],e=b[d],p(e)||(a[d]=e);return a}function r(b){q(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),pe===!1&&(pe=!0,a.updateOffset(this),pe=!1)}function s(a){return a instanceof r||null!=a&&null!=a._isAMomentObject}function t(a){return a<0?Math.ceil(a)||0:Math.floor(a)}function u(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=t(b)),c}function v(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;d<e;d++)(c&&a[d]!==b[d]||!c&&u(a[d])!==u(b[d]))&&g++;return g+f}function w(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function x(b,c){var d=!0;return j(function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,b),d){for(var e,f=[],g=0;g<arguments.length;g++){if(e="","object"==typeof arguments[g]){e+="\n["+g+"] ";for(var h in arguments[0])e+=h+": "+arguments[0][h]+", ";e=e.slice(0,-2)}else e=arguments[g];f.push(e)}w(b+"\nArguments: "+Array.prototype.slice.call(f).join("")+"\n"+(new Error).stack),d=!1}return c.apply(this,arguments)},c)}function y(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c),qe[b]||(w(c),qe[b]=!0)}function z(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function A(a){var b,c;for(c in a)b=a[c],z(b)?this[c]=b:this["_"+c]=b;this._config=a,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function B(a,b){var c,e=j({},a);for(c in b)i(b,c)&&(d(a[c])&&d(b[c])?(e[c]={},j(e[c],a[c]),j(e[c],b[c])):null!=b[c]?e[c]=b[c]:delete e[c]);for(c in a)i(a,c)&&!i(b,c)&&d(a[c])&&(e[c]=j({},e[c]));return e}function C(a){null!=a&&this.set(a)}function D(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return z(d)?d.call(b,c):d}function E(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function F(){return this._invalidDate}function G(a){return this._ordinal.replace("%d",a)}function H(a,b,c,d){var e=this._relativeTime[c];return z(e)?e(a,b,c,d):e.replace(/%d/i,a)}function I(a,b){var c=this._relativeTime[a>0?"future":"past"];return z(c)?c(b):c.replace(/%s/i,b)}function J(a,b){var c=a.toLowerCase();Ae[c]=Ae[c+"s"]=Ae[b]=a}function K(a){return"string"==typeof a?Ae[a]||Ae[a.toLowerCase()]:void 0}function L(a){var b,c,d={};for(c in a)i(a,c)&&(b=K(c),b&&(d[b]=a[c]));return d}function M(a,b){Be[a]=b}function N(a){var b=[];for(var c in a)b.push({unit:c,priority:Be[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}function O(b,c){return function(d){return null!=d?(Q(this,b,d),a.updateOffset(this,c),this):P(this,b)}}function P(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function Q(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function R(a){return a=K(a),z(this[a])?this[a]():this}function S(a,b){if("object"==typeof a){a=L(a);for(var c=N(a),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit])}else if(a=K(a),z(this[a]))return this[a](b);return this}function T(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function U(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Fe[a]=e),b&&(Fe[b[0]]=function(){return T(e.apply(this,arguments),b[1],b[2])}),c&&(Fe[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function V(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function W(a){var b,c,d=a.match(Ce);for(b=0,c=d.length;b<c;b++)Fe[d[b]]?d[b]=Fe[d[b]]:d[b]=V(d[b]);return function(b){var e,f="";for(e=0;e<c;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}function X(a,b){return a.isValid()?(b=Y(b,a.localeData()),Ee[b]=Ee[b]||W(b),Ee[b](a)):a.localeData().invalidDate()}function Y(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(De.lastIndex=0;d>=0&&De.test(a);)a=a.replace(De,c),De.lastIndex=0,d-=1;return a}function Z(a,b,c){Xe[a]=z(b)?b:function(a,d){return a&&c?c:b}}function $(a,b){return i(Xe,a)?Xe[a](b._strict,b._locale):new RegExp(_(a))}function _(a){return aa(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function aa(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ba(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),f(b)&&(d=function(a,c){c[b]=u(a)}),c=0;c<a.length;c++)Ye[a[c]]=d}function ca(a,b){ba(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function da(a,b,c){null!=b&&i(Ye,a)&&Ye[a](b,c._a,c,a)}function ea(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function fa(a,b){return a?c(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||hf).test(b)?"format":"standalone"][a.month()]:this._months}function ga(a,b){return a?c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[hf.test(b)?"format":"standalone"][a.month()]:this._monthsShort}function ha(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;d<12;++d)f=k([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();return c?"MMM"===b?(e=gf.call(this._shortMonthsParse,g),e!==-1?e:null):(e=gf.call(this._longMonthsParse,g),e!==-1?e:null):"MMM"===b?(e=gf.call(this._shortMonthsParse,g),e!==-1?e:(e=gf.call(this._longMonthsParse,g),e!==-1?e:null)):(e=gf.call(this._longMonthsParse,g),e!==-1?e:(e=gf.call(this._shortMonthsParse,g),e!==-1?e:null))}function ia(a,b,c){var d,e,f;if(this._monthsParseExact)return ha.call(this,a,b,c);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;d<12;d++){if(e=k([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function ja(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=u(b);else if(b=a.localeData().monthsParse(b),!f(b))return a;return c=Math.min(a.date(),ea(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function ka(b){return null!=b?(ja(this,b),a.updateOffset(this,!0),this):P(this,"Month")}function la(){return ea(this.year(),this.month())}function ma(a){return this._monthsParseExact?(i(this,"_monthsRegex")||oa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(i(this,"_monthsShortRegex")||(this._monthsShortRegex=lf),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)}function na(a){return this._monthsParseExact?(i(this,"_monthsRegex")||oa.call(this),a?this._monthsStrictRegex:this._monthsRegex):(i(this,"_monthsRegex")||(this._monthsRegex=mf),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)}function oa(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;b<12;b++)c=k([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;b<12;b++)d[b]=aa(d[b]),e[b]=aa(e[b]);for(b=0;b<24;b++)f[b]=aa(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}function pa(a){return qa(a)?366:365}function qa(a){return a%4===0&&a%100!==0||a%400===0}function ra(){return qa(this.year())}function sa(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return a<100&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function ta(a){var b=new Date(Date.UTC.apply(null,arguments));return a<100&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function ua(a,b,c){var d=7+b-c,e=(7+ta(a,0,d).getUTCDay()-b)%7;return-e+d-1}function va(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=ua(a,d,e),j=1+7*(b-1)+h+i;return j<=0?(f=a-1,g=pa(f)+j):j>pa(a)?(f=a+1,g=j-pa(a)):(f=a,g=j),{year:f,dayOfYear:g}}function wa(a,b,c){var d,e,f=ua(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return g<1?(e=a.year()-1,d=g+xa(e,b,c)):g>xa(a.year(),b,c)?(d=g-xa(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function xa(a,b,c){var d=ua(a,b,c),e=ua(a+1,b,c);return(pa(a)-d+e)/7}function ya(a){return wa(a,this._week.dow,this._week.doy).week}function za(){return this._week.dow}function Aa(){return this._week.doy}function Ba(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Ca(a){var b=wa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function Da(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Ea(a,b){return"string"==typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a}function Fa(a,b){return a?c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:this._weekdays}function Ga(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort}function Ha(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin}function Ia(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;d<7;++d)f=k([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();return c?"dddd"===b?(e=gf.call(this._weekdaysParse,g),e!==-1?e:null):"ddd"===b?(e=gf.call(this._shortWeekdaysParse,g),e!==-1?e:null):(e=gf.call(this._minWeekdaysParse,g),e!==-1?e:null):"dddd"===b?(e=gf.call(this._weekdaysParse,g),e!==-1?e:(e=gf.call(this._shortWeekdaysParse,g),e!==-1?e:(e=gf.call(this._minWeekdaysParse,g),e!==-1?e:null))):"ddd"===b?(e=gf.call(this._shortWeekdaysParse,g),e!==-1?e:(e=gf.call(this._weekdaysParse,g),e!==-1?e:(e=gf.call(this._minWeekdaysParse,g),e!==-1?e:null))):(e=gf.call(this._minWeekdaysParse,g),e!==-1?e:(e=gf.call(this._weekdaysParse,g),e!==-1?e:(e=gf.call(this._shortWeekdaysParse,g),e!==-1?e:null)))}function Ja(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Ia.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;d<7;d++){if(e=k([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function Ka(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Da(a,this.localeData()),this.add(a-b,"d")):b}function La(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Ma(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=Ea(a,this.localeData());return this.day(this.day()%7?b:b-7)}return this.day()||7}function Na(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(i(this,"_weekdaysRegex")||(this._weekdaysRegex=sf),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)}function Oa(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(i(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=tf),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Pa(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(i(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=uf),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Qa(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],j=[];for(b=0;b<7;b++)c=k([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),j.push(d),j.push(e),j.push(f);for(g.sort(a),h.sort(a),i.sort(a),j.sort(a),b=0;b<7;b++)h[b]=aa(h[b]),i[b]=aa(i[b]),j[b]=aa(j[b]);this._weekdaysRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function Ra(){return this.hours()%12||12}function Sa(){return this.hours()||24}function Ta(a,b){U(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Ua(a,b){return b._meridiemParse}function Va(a){return"p"===(a+"").toLowerCase().charAt(0)}function Wa(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Xa(a){return a?a.toLowerCase().replace("_","-"):a}function Ya(a){for(var b,c,d,e,f=0;f<a.length;){for(e=Xa(a[f]).split("-"),b=e.length,c=Xa(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=Za(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&v(e,c,!0)>=b-1)break;b--}f++}return null}function Za(a){var b=null;if(!zf[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=vf._abbr,require("./locale/"+a),$a(b)}catch(a){}return zf[a]}function $a(a,b){var c;return a&&(c=p(b)?bb(a):_a(a,b),c&&(vf=c)),vf._abbr}function _a(a,b){if(null!==b){var c=yf;if(b.abbr=a,null!=zf[a])y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=zf[a]._config;else if(null!=b.parentLocale){if(null==zf[b.parentLocale])return Af[b.parentLocale]||(Af[b.parentLocale]=[]),Af[b.parentLocale].push({name:a,config:b}),null;c=zf[b.parentLocale]._config}return zf[a]=new C(B(c,b)),Af[a]&&Af[a].forEach(function(a){_a(a.name,a.config)}),$a(a),zf[a]}return delete zf[a],null}function ab(a,b){if(null!=b){var c,d=yf;null!=zf[a]&&(d=zf[a]._config),b=B(d,b),c=new C(b),c.parentLocale=zf[a],zf[a]=c,$a(a)}else null!=zf[a]&&(null!=zf[a].parentLocale?zf[a]=zf[a].parentLocale:null!=zf[a]&&delete zf[a]);return zf[a]}function bb(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return vf;if(!c(a)){if(b=Za(a))return b;a=[a]}return Ya(a)}function cb(){return te(zf)}function db(a){var b,c=a._a;return c&&m(a).overflow===-2&&(b=c[$e]<0||c[$e]>11?$e:c[_e]<1||c[_e]>ea(c[Ze],c[$e])?_e:c[af]<0||c[af]>24||24===c[af]&&(0!==c[bf]||0!==c[cf]||0!==c[df])?af:c[bf]<0||c[bf]>59?bf:c[cf]<0||c[cf]>59?cf:c[df]<0||c[df]>999?df:-1,m(a)._overflowDayOfYear&&(b<Ze||b>_e)&&(b=_e),m(a)._overflowWeeks&&b===-1&&(b=ef),m(a)._overflowWeekday&&b===-1&&(b=ff),m(a).overflow=b),a}function eb(a){var b,c,d,e,f,g,h=a._i,i=Bf.exec(h)||Cf.exec(h);if(i){for(m(a).iso=!0,b=0,c=Ef.length;b<c;b++)if(Ef[b][1].exec(i[1])){e=Ef[b][0],d=Ef[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=Ff.length;b<c;b++)if(Ff[b][1].exec(i[3])){f=(i[2]||" ")+Ff[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Df.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),kb(a)}else a._isValid=!1}function fb(b){var c=Gf.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(eb(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function gb(a,b,c){return null!=a?a:null!=b?b:c}function hb(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function ib(a){var b,c,d,e,f=[];if(!a._d){for(d=hb(a),a._w&&null==a._a[_e]&&null==a._a[$e]&&jb(a),a._dayOfYear&&(e=gb(a._a[Ze],d[Ze]),a._dayOfYear>pa(e)&&(m(a)._overflowDayOfYear=!0),c=ta(e,0,a._dayOfYear),a._a[$e]=c.getUTCMonth(),a._a[_e]=c.getUTCDate()),b=0;b<3&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;b<7;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[af]&&0===a._a[bf]&&0===a._a[cf]&&0===a._a[df]&&(a._nextDay=!0,a._a[af]=0),a._d=(a._useUTC?ta:sa).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[af]=24)}}function jb(a){var b,c,d,e,f,g,h,i;if(b=a._w,null!=b.GG||null!=b.W||null!=b.E)f=1,g=4,c=gb(b.GG,a._a[Ze],wa(sb(),1,4).year),d=gb(b.W,1),e=gb(b.E,1),(e<1||e>7)&&(i=!0);else{f=a._locale._week.dow,g=a._locale._week.doy;var j=wa(sb(),f,g);c=gb(b.gg,a._a[Ze],j.year),d=gb(b.w,j.week),null!=b.d?(e=b.d,(e<0||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f}d<1||d>xa(c,f,g)?m(a)._overflowWeeks=!0:null!=i?m(a)._overflowWeekday=!0:(h=va(c,d,e,f,g),a._a[Ze]=h.year,a._dayOfYear=h.dayOfYear)}function kb(b){if(b._f===a.ISO_8601)return void eb(b);b._a=[],m(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,j=0;for(e=Y(b._f,b._locale).match(Ce)||[],c=0;c<e.length;c++)f=e[c],d=(h.match($(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&m(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Fe[f]?(d?m(b).empty=!1:m(b).unusedTokens.push(f),da(f,d,b)):b._strict&&!d&&m(b).unusedTokens.push(f);m(b).charsLeftOver=i-j,h.length>0&&m(b).unusedInput.push(h),b._a[af]<=12&&m(b).bigHour===!0&&b._a[af]>0&&(m(b).bigHour=void 0),m(b).parsedDateParts=b._a.slice(0),m(b).meridiem=b._meridiem,b._a[af]=lb(b._locale,b._a[af],b._meridiem),ib(b),db(b)}function lb(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&b<12&&(b+=12),d||12!==b||(b=0),b):b}function mb(a){var b,c,d,e,f;if(0===a._f.length)return m(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=q({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],kb(b),n(b)&&(f+=m(b).charsLeftOver,f+=10*m(b).unusedTokens.length,m(b).score=f,(null==d||f<d)&&(d=f,c=b));j(a,c||b)}function nb(a){if(!a._d){var b=L(a._i);a._a=h([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),ib(a)}}function ob(a){var b=new r(db(pb(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function pb(a){var b=a._i,d=a._f;return a._locale=a._locale||bb(a._l),null===b||void 0===d&&""===b?o({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),s(b)?new r(db(b)):(g(b)?a._d=b:c(d)?mb(a):d?kb(a):qb(a),n(a)||(a._d=null),a))}function qb(b){var d=b._i;void 0===d?b._d=new Date(a.now()):g(d)?b._d=new Date(d.valueOf()):"string"==typeof d?fb(b):c(d)?(b._a=h(d.slice(0),function(a){return parseInt(a,10)}),ib(b)):"object"==typeof d?nb(b):f(d)?b._d=new Date(d):a.createFromInputFallback(b)}function rb(a,b,f,g,h){var i={};return f!==!0&&f!==!1||(g=f,f=void 0),(d(a)&&e(a)||c(a)&&0===a.length)&&(a=void 0),
i._isAMomentObject=!0,i._useUTC=i._isUTC=h,i._l=f,i._i=a,i._f=b,i._strict=g,ob(i)}function sb(a,b,c,d){return rb(a,b,c,d,!1)}function tb(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return sb();for(d=b[0],e=1;e<b.length;++e)b[e].isValid()&&!b[e][a](d)||(d=b[e]);return d}function ub(){var a=[].slice.call(arguments,0);return tb("isBefore",a)}function vb(){var a=[].slice.call(arguments,0);return tb("isAfter",a)}function wb(a){var b=L(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+1e3*h*60*60,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=bb(),this._bubble()}function xb(a){return a instanceof wb}function yb(a){return a<0?Math.round(-1*a)*-1:Math.round(a)}function zb(a,b){U(a,0,0,function(){var a=this.utcOffset(),c="+";return a<0&&(a=-a,c="-"),c+T(~~(a/60),2)+b+T(~~a%60,2)})}function Ab(a,b){var c=(b||"").match(a);if(null===c)return null;var d=c[c.length-1]||[],e=(d+"").match(Kf)||["-",0,0],f=+(60*e[1])+u(e[2]);return 0===f?0:"+"===e[0]?f:-f}function Bb(b,c){var d,e;return c._isUTC?(d=c.clone(),e=(s(b)||g(b)?b.valueOf():sb(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),a.updateOffset(d,!1),d):sb(b).local()}function Cb(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Db(b,c){var d,e=this._offset||0;if(!this.isValid())return null!=b?this:NaN;if(null!=b){if("string"==typeof b){if(b=Ab(Ue,b),null===b)return this}else Math.abs(b)<16&&(b=60*b);return!this._isUTC&&c&&(d=Cb(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?Tb(this,Ob(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?e:Cb(this)}function Eb(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Fb(a){return this.utcOffset(0,a)}function Gb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Cb(this),"m")),this}function Hb(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var a=Ab(Te,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this}function Ib(a){return!!this.isValid()&&(a=a?sb(a).utcOffset():0,(this.utcOffset()-a)%60===0)}function Jb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Kb(){if(!p(this._isDSTShifted))return this._isDSTShifted;var a={};if(q(a,this),a=pb(a),a._a){var b=a._isUTC?k(a._a):sb(a._a);this._isDSTShifted=this.isValid()&&v(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Lb(){return!!this.isValid()&&!this._isUTC}function Mb(){return!!this.isValid()&&this._isUTC}function Nb(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ob(a,b){var c,d,e,g=a,h=null;return xb(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:f(a)?(g={},b?g[b]=a:g.milliseconds=a):(h=Lf.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:u(h[_e])*c,h:u(h[af])*c,m:u(h[bf])*c,s:u(h[cf])*c,ms:u(yb(1e3*h[df]))*c}):(h=Mf.exec(a))?(c="-"===h[1]?-1:1,g={y:Pb(h[2],c),M:Pb(h[3],c),w:Pb(h[4],c),d:Pb(h[5],c),h:Pb(h[6],c),m:Pb(h[7],c),s:Pb(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=Rb(sb(g.from),sb(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new wb(g),xb(a)&&i(a,"_locale")&&(d._locale=a._locale),d}function Pb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Qb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Rb(a,b){var c;return a.isValid()&&b.isValid()?(b=Bb(b,a),a.isBefore(b)?c=Qb(a,b):(c=Qb(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function Sb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(y(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ob(c,d),Tb(this,e,a),this}}function Tb(b,c,d,e){var f=c._milliseconds,g=yb(c._days),h=yb(c._months);b.isValid()&&(e=null==e||e,f&&b._d.setTime(b._d.valueOf()+f*d),g&&Q(b,"Date",P(b,"Date")+g*d),h&&ja(b,P(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function Ub(a,b){var c=a.diff(b,"days",!0);return c<-6?"sameElse":c<-1?"lastWeek":c<0?"lastDay":c<1?"sameDay":c<2?"nextDay":c<7?"nextWeek":"sameElse"}function Vb(b,c){var d=b||sb(),e=Bb(d,this).startOf("day"),f=a.calendarFormat(this,e)||"sameElse",g=c&&(z(c[f])?c[f].call(this,d):c[f]);return this.format(g||this.localeData().calendar(f,this,sb(d)))}function Wb(){return new r(this)}function Xb(a,b){var c=s(a)?a:sb(a);return!(!this.isValid()||!c.isValid())&&(b=K(p(b)?"millisecond":b),"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf())}function Yb(a,b){var c=s(a)?a:sb(a);return!(!this.isValid()||!c.isValid())&&(b=K(p(b)?"millisecond":b),"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf())}function Zb(a,b,c,d){return d=d||"()",("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function $b(a,b){var c,d=s(a)?a:sb(a);return!(!this.isValid()||!d.isValid())&&(b=K(b||"millisecond"),"millisecond"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf()))}function _b(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function ac(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function bc(a,b,c){var d,e,f,g;return this.isValid()?(d=Bb(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=K(b),"year"===b||"month"===b||"quarter"===b?(g=cc(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:t(g)):NaN):NaN}function cc(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return b-f<0?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)||0}function dc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ec(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?z(Date.prototype.toISOString)?this.toDate().toISOString():X(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):X(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function fc(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var c="["+a+'("]',d=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",e="-MM-DD[T]HH:mm:ss.SSS",f=b+'[")]';return this.format(c+d+e+f)}function gc(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var c=X(this,b);return this.localeData().postformat(c)}function hc(a,b){return this.isValid()&&(s(a)&&a.isValid()||sb(a).isValid())?Ob({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ic(a){return this.from(sb(),a)}function jc(a,b){return this.isValid()&&(s(a)&&a.isValid()||sb(a).isValid())?Ob({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function kc(a){return this.to(sb(),a)}function lc(a){var b;return void 0===a?this._locale._abbr:(b=bb(a),null!=b&&(this._locale=b),this)}function mc(){return this._locale}function nc(a){switch(a=K(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function oc(a){return a=K(a),void 0===a||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))}function pc(){return this._d.valueOf()-6e4*(this._offset||0)}function qc(){return Math.floor(this.valueOf()/1e3)}function rc(){return new Date(this.valueOf())}function sc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function tc(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function uc(){return this.isValid()?this.toISOString():null}function vc(){return n(this)}function wc(){return j({},m(this))}function xc(){return m(this).overflow}function yc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function zc(a,b){U(0,[a,a.length],0,b)}function Ac(a){return Ec.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Bc(a){return Ec.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Cc(){return xa(this.year(),1,4)}function Dc(){var a=this.localeData()._week;return xa(this.year(),a.dow,a.doy)}function Ec(a,b,c,d,e){var f;return null==a?wa(this,d,e).year:(f=xa(a,d,e),b>f&&(b=f),Fc.call(this,a,b,c,d,e))}function Fc(a,b,c,d,e){var f=va(a,b,c,d,e),g=ta(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Gc(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Hc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function Ic(a,b){b[df]=u(1e3*("0."+a))}function Jc(){return this._isUTC?"UTC":""}function Kc(){return this._isUTC?"Coordinated Universal Time":""}function Lc(a){return sb(1e3*a)}function Mc(){return sb.apply(null,arguments).parseZone()}function Nc(a){return a}function Oc(a,b,c,d){var e=bb(),f=k().set(d,b);return e[c](f,a)}function Pc(a,b,c){if(f(a)&&(b=a,a=void 0),a=a||"",null!=b)return Oc(a,b,c,"month");var d,e=[];for(d=0;d<12;d++)e[d]=Oc(a,d,c,"month");return e}function Qc(a,b,c,d){"boolean"==typeof a?(f(b)&&(c=b,b=void 0),b=b||""):(b=a,c=b,a=!1,f(b)&&(c=b,b=void 0),b=b||"");var e=bb(),g=a?e._week.dow:0;if(null!=c)return Oc(b,(c+g)%7,d,"day");var h,i=[];for(h=0;h<7;h++)i[h]=Oc(b,(h+g)%7,d,"day");return i}function Rc(a,b){return Pc(a,b,"months")}function Sc(a,b){return Pc(a,b,"monthsShort")}function Tc(a,b,c){return Qc(a,b,c,"weekdays")}function Uc(a,b,c){return Qc(a,b,c,"weekdaysShort")}function Vc(a,b,c){return Qc(a,b,c,"weekdaysMin")}function Wc(){var a=this._data;return this._milliseconds=Xf(this._milliseconds),this._days=Xf(this._days),this._months=Xf(this._months),a.milliseconds=Xf(a.milliseconds),a.seconds=Xf(a.seconds),a.minutes=Xf(a.minutes),a.hours=Xf(a.hours),a.months=Xf(a.months),a.years=Xf(a.years),this}function Xc(a,b,c,d){var e=Ob(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Yc(a,b){return Xc(this,a,b,1)}function Zc(a,b){return Xc(this,a,b,-1)}function $c(a){return a<0?Math.floor(a):Math.ceil(a)}function _c(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||f<=0&&g<=0&&h<=0||(f+=864e5*$c(bd(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=t(f/1e3),i.seconds=a%60,b=t(a/60),i.minutes=b%60,c=t(b/60),i.hours=c%24,g+=t(c/24),e=t(ad(g)),h+=e,g-=$c(bd(e)),d=t(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function ad(a){return 4800*a/146097}function bd(a){return 146097*a/4800}function cd(a){var b,c,d=this._milliseconds;if(a=K(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+ad(b),"month"===a?c:c/12;switch(b=this._days+Math.round(bd(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function dd(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*u(this._months/12)}function ed(a){return function(){return this.as(a)}}function fd(a){return a=K(a),this[a+"s"]()}function gd(a){return function(){return this._data[a]}}function hd(){return t(this.days()/7)}function id(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function jd(a,b,c){var d=Ob(a).abs(),e=lg(d.as("s")),f=lg(d.as("m")),g=lg(d.as("h")),h=lg(d.as("d")),i=lg(d.as("M")),j=lg(d.as("y")),k=e<mg.s&&["s",e]||f<=1&&["m"]||f<mg.m&&["mm",f]||g<=1&&["h"]||g<mg.h&&["hh",g]||h<=1&&["d"]||h<mg.d&&["dd",h]||i<=1&&["M"]||i<mg.M&&["MM",i]||j<=1&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,id.apply(null,k)}function kd(a){return void 0===a?lg:"function"==typeof a&&(lg=a,!0)}function ld(a,b){return void 0!==mg[a]&&(void 0===b?mg[a]:(mg[a]=b,!0))}function md(a){var b=this.localeData(),c=jd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function nd(){var a,b,c,d=ng(this._milliseconds)/1e3,e=ng(this._days),f=ng(this._months);a=t(d/60),b=t(a/60),d%=60,a%=60,c=t(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(m<0?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}function od(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&b%10<=4&&(b%100<10||b%100>=20)?c[1]:c[2]}function pd(a,b,c){var d={mm:b?"ÑÐ²ÑÐ»ÑÐ½Ð°_ÑÐ²ÑÐ»ÑÐ½Ñ_ÑÐ²ÑÐ»ÑÐ½":"ÑÐ²ÑÐ»ÑÐ½Ñ_ÑÐ²ÑÐ»ÑÐ½Ñ_ÑÐ²ÑÐ»ÑÐ½",hh:b?"Ð³Ð°Ð´Ð·ÑÐ½Ð°_Ð³Ð°Ð´Ð·ÑÐ½Ñ_Ð³Ð°Ð´Ð·ÑÐ½":"Ð³Ð°Ð´Ð·ÑÐ½Ñ_Ð³Ð°Ð´Ð·ÑÐ½Ñ_Ð³Ð°Ð´Ð·ÑÐ½",dd:"Ð´Ð·ÐµÐ½Ñ_Ð´Ð½Ñ_Ð´Ð·ÑÐ½",MM:"Ð¼ÐµÑÑÑ_Ð¼ÐµÑÑÑÑ_Ð¼ÐµÑÑÑÐ°Ñ",yy:"Ð³Ð¾Ð´_Ð³Ð°Ð´Ñ_Ð³Ð°Ð´Ð¾Ñ"};return"m"===c?b?"ÑÐ²ÑÐ»ÑÐ½Ð°":"ÑÐ²ÑÐ»ÑÐ½Ñ":"h"===c?b?"Ð³Ð°Ð´Ð·ÑÐ½Ð°":"Ð³Ð°Ð´Ð·ÑÐ½Ñ":a+" "+od(d[c],+a)}function qd(a,b,c){var d={mm:"munutenn",MM:"miz",dd:"devezh"};return a+" "+td(d[c],a)}function rd(a){switch(sd(a)){case 1:case 3:case 4:case 5:case 9:return a+" bloaz";default:return a+" vloaz"}}function sd(a){return a>9?sd(a%10):a}function td(a,b){return 2===b?ud(a):a}function ud(a){var b={m:"v",b:"v",d:"z"};return void 0===b[a.charAt(0)]?a:b[a.charAt(0)]+a.substring(1)}function vd(a,b,c){var d=a+" ";switch(c){case"m":return b?"jedna minuta":"jedne minute";case"mm":return d+=1===a?"minuta":2===a||3===a||4===a?"minute":"minuta";case"h":return b?"jedan sat":"jednog sata";case"hh":return d+=1===a?"sat":2===a||3===a||4===a?"sata":"sati";case"dd":return d+=1===a?"dan":"dana";case"MM":return d+=1===a?"mjesec":2===a||3===a||4===a?"mjeseca":"mjeseci";case"yy":return d+=1===a?"godina":2===a||3===a||4===a?"godine":"godina"}}function wd(a){return a>1&&a<5&&1!==~~(a/10)}function xd(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"pÃ¡r sekund":"pÃ¡r sekundami";case"m":return b?"minuta":d?"minutu":"minutou";case"mm":return b||d?e+(wd(a)?"minuty":"minut"):e+"minutami";break;case"h":return b?"hodina":d?"hodinu":"hodinou";case"hh":return b||d?e+(wd(a)?"hodiny":"hodin"):e+"hodinami";break;case"d":return b||d?"den":"dnem";case"dd":return b||d?e+(wd(a)?"dny":"dnÃ­"):e+"dny";break;case"M":return b||d?"mÄsÃ­c":"mÄsÃ­cem";case"MM":return b||d?e+(wd(a)?"mÄsÃ­ce":"mÄsÃ­cÅ¯"):e+"mÄsÃ­ci";break;case"y":return b||d?"rok":"rokem";case"yy":return b||d?e+(wd(a)?"roky":"let"):e+"lety"}}function yd(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}function zd(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}function Ad(a,b,c,d){var e={s:["mÃµne sekundi","mÃµni sekund","paar sekundit"],m:["Ã¼he minuti","Ã¼ks minut"],mm:[a+" minuti",a+" minutit"],h:["Ã¼he tunni","tund aega","Ã¼ks tund"],hh:[a+" tunni",a+" tundi"],d:["Ã¼he pÃ¤eva","Ã¼ks pÃ¤ev"],M:["kuu aja","kuu aega","Ã¼ks kuu"],MM:[a+" kuu",a+" kuud"],y:["Ã¼he aasta","aasta","Ã¼ks aasta"],yy:[a+" aasta",a+" aastat"]};return b?e[c][2]?e[c][2]:e[c][1]:d?e[c][0]:e[c][1]}function Bd(a,b,c,d){var e="";switch(c){case"s":return d?"muutaman sekunnin":"muutama sekunti";case"m":return d?"minuutin":"minuutti";case"mm":e=d?"minuutin":"minuuttia";break;case"h":return d?"tunnin":"tunti";case"hh":e=d?"tunnin":"tuntia";break;case"d":return d?"pÃ¤ivÃ¤n":"pÃ¤ivÃ¤";case"dd":e=d?"pÃ¤ivÃ¤n":"pÃ¤ivÃ¤Ã¤";break;case"M":return d?"kuukauden":"kuukausi";case"MM":e=d?"kuukauden":"kuukautta";break;case"y":return d?"vuoden":"vuosi";case"yy":e=d?"vuoden":"vuotta"}return e=Cd(a,d)+" "+e}function Cd(a,b){return a<10?b?Sg[a]:Rg[a]:a}function Dd(a,b,c){var d=a+" ";switch(c){case"m":return b?"jedna minuta":"jedne minute";case"mm":return d+=1===a?"minuta":2===a||3===a||4===a?"minute":"minuta";case"h":return b?"jedan sat":"jednog sata";case"hh":return d+=1===a?"sat":2===a||3===a||4===a?"sata":"sati";case"dd":return d+=1===a?"dan":"dana";case"MM":return d+=1===a?"mjesec":2===a||3===a||4===a?"mjeseca":"mjeseci";case"yy":return d+=1===a?"godina":2===a||3===a||4===a?"godine":"godina"}}function Ed(a,b,c,d){var e=a;switch(c){case"s":return d||b?"nÃ©hÃ¡ny mÃ¡sodperc":"nÃ©hÃ¡ny mÃ¡sodperce";case"m":return"egy"+(d||b?" perc":" perce");case"mm":return e+(d||b?" perc":" perce");case"h":return"egy"+(d||b?" Ã³ra":" Ã³rÃ¡ja");case"hh":return e+(d||b?" Ã³ra":" Ã³rÃ¡ja");case"d":return"egy"+(d||b?" nap":" napja");case"dd":return e+(d||b?" nap":" napja");case"M":return"egy"+(d||b?" hÃ³nap":" hÃ³napja");case"MM":return e+(d||b?" hÃ³nap":" hÃ³napja");case"y":return"egy"+(d||b?" Ã©v":" Ã©ve");case"yy":return e+(d||b?" Ã©v":" Ã©ve")}return""}function Fd(a){return(a?"":"[mÃºlt] ")+"["+ah[this.day()]+"] LT[-kor]"}function Gd(a){return a%100===11||a%10!==1}function Hd(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"nokkrar sekÃºndur":"nokkrum sekÃºndum";case"m":return b?"mÃ­nÃºta":"mÃ­nÃºtu";case"mm":return Gd(a)?e+(b||d?"mÃ­nÃºtur":"mÃ­nÃºtum"):b?e+"mÃ­nÃºta":e+"mÃ­nÃºtu";case"hh":return Gd(a)?e+(b||d?"klukkustundir":"klukkustundum"):e+"klukkustund";case"d":return b?"dagur":d?"dag":"degi";case"dd":return Gd(a)?b?e+"dagar":e+(d?"daga":"dÃ¶gum"):b?e+"dagur":e+(d?"dag":"degi");case"M":return b?"mÃ¡nuÃ°ur":d?"mÃ¡nuÃ°":"mÃ¡nuÃ°i";case"MM":return Gd(a)?b?e+"mÃ¡nuÃ°ir":e+(d?"mÃ¡nuÃ°i":"mÃ¡nuÃ°um"):b?e+"mÃ¡nuÃ°ur":e+(d?"mÃ¡nuÃ°":"mÃ¡nuÃ°i");case"y":return b||d?"Ã¡r":"Ã¡ri";case"yy":return Gd(a)?e+(b||d?"Ã¡r":"Ã¡rum"):e+(b||d?"Ã¡r":"Ã¡ri")}}function Id(a,b,c,d){var e={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return b?e[c][0]:e[c][1]}function Jd(a){var b=a.substr(0,a.indexOf(" "));return Ld(b)?"a "+a:"an "+a}function Kd(a){var b=a.substr(0,a.indexOf(" "));return Ld(b)?"viru "+a:"virun "+a}function Ld(a){if(a=parseInt(a,10),isNaN(a))return!1;if(a<0)return!0;if(a<10)return 4<=a&&a<=7;if(a<100){var b=a%10,c=a/10;return Ld(0===b?c:b)}if(a<1e4){for(;a>=10;)a/=10;return Ld(a)}return a/=1e3,Ld(a)}function Md(a,b,c,d){return b?"kelios sekundÄs":d?"keliÅ³ sekundÅ¾iÅ³":"kelias sekundes"}function Nd(a,b,c,d){return b?Pd(c)[0]:d?Pd(c)[1]:Pd(c)[2]}function Od(a){return a%10===0||a>10&&a<20}function Pd(a){return dh[a].split("_")}function Qd(a,b,c,d){var e=a+" ";return 1===a?e+Nd(a,b,c[0],d):b?e+(Od(a)?Pd(c)[1]:Pd(c)[0]):d?e+Pd(c)[1]:e+(Od(a)?Pd(c)[1]:Pd(c)[2])}function Rd(a,b,c){return c?b%10===1&&b%100!==11?a[2]:a[3]:b%10===1&&b%100!==11?a[0]:a[1]}function Sd(a,b,c){return a+" "+Rd(eh[c],a,b)}function Td(a,b,c){return Rd(eh[c],a,b)}function Ud(a,b){return b?"daÅ¾as sekundes":"daÅ¾Äm sekundÄm"}function Vd(a,b,c,d){var e="";if(b)switch(c){case"s":e="à¤à¤¾à¤¹à¥ à¤¸à¥à¤à¤à¤¦";break;case"m":e="à¤à¤ à¤®à¤¿à¤¨à¤¿à¤";break;case"mm":e="%d à¤®à¤¿à¤¨à¤¿à¤à¥";break;case"h":e="à¤à¤ à¤¤à¤¾à¤¸";break;case"hh":e="%d à¤¤à¤¾à¤¸";break;case"d":e="à¤à¤ à¤¦à¤¿à¤µà¤¸";break;case"dd":e="%d à¤¦à¤¿à¤µà¤¸";break;case"M":e="à¤à¤ à¤®à¤¹à¤¿à¤¨à¤¾";break;case"MM":e="%d à¤®à¤¹à¤¿à¤¨à¥";break;case"y":e="à¤à¤ à¤µà¤°à¥à¤·";break;case"yy":e="%d à¤µà¤°à¥à¤·à¥"}else switch(c){case"s":e="à¤à¤¾à¤¹à¥ à¤¸à¥à¤à¤à¤¦à¤¾à¤";break;case"m":e="à¤à¤à¤¾ à¤®à¤¿à¤¨à¤¿à¤à¤¾";break;case"mm":e="%d à¤®à¤¿à¤¨à¤¿à¤à¤¾à¤";break;case"h":e="à¤à¤à¤¾ à¤¤à¤¾à¤¸à¤¾";break;case"hh":e="%d à¤¤à¤¾à¤¸à¤¾à¤";break;case"d":e="à¤à¤à¤¾ à¤¦à¤¿à¤µà¤¸à¤¾";break;case"dd":e="%d à¤¦à¤¿à¤µà¤¸à¤¾à¤";break;case"M":e="à¤à¤à¤¾ à¤®à¤¹à¤¿à¤¨à¥à¤¯à¤¾";break;case"MM":e="%d à¤®à¤¹à¤¿à¤¨à¥à¤¯à¤¾à¤";break;case"y":e="à¤à¤à¤¾ à¤µà¤°à¥à¤·à¤¾";break;case"yy":e="%d à¤µà¤°à¥à¤·à¤¾à¤"}return e.replace(/%d/i,a)}function Wd(a){return a%10<5&&a%10>1&&~~(a/10)%10!==1}function Xd(a,b,c){var d=a+" ";switch(c){case"m":return b?"minuta":"minutÄ";case"mm":return d+(Wd(a)?"minuty":"minut");case"h":return b?"godzina":"godzinÄ";case"hh":return d+(Wd(a)?"godziny":"godzin");case"MM":return d+(Wd(a)?"miesiÄce":"miesiÄcy");case"yy":return d+(Wd(a)?"lata":"lat")}}function Yd(a,b,c){var d={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},e=" ";return(a%100>=20||a>=100&&a%100===0)&&(e=" de "),a+e+d[c]}function Zd(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&b%10<=4&&(b%100<10||b%100>=20)?c[1]:c[2]}function $d(a,b,c){var d={mm:b?"Ð¼Ð¸Ð½ÑÑÐ°_Ð¼Ð¸Ð½ÑÑÑ_Ð¼Ð¸Ð½ÑÑ":"Ð¼Ð¸Ð½ÑÑÑ_Ð¼Ð¸Ð½ÑÑÑ_Ð¼Ð¸Ð½ÑÑ",hh:"ÑÐ°Ñ_ÑÐ°ÑÐ°_ÑÐ°ÑÐ¾Ð²",dd:"Ð´ÐµÐ½Ñ_Ð´Ð½Ñ_Ð´Ð½ÐµÐ¹",MM:"Ð¼ÐµÑÑÑ_Ð¼ÐµÑÑÑÐ°_Ð¼ÐµÑÑÑÐµÐ²",yy:"Ð³Ð¾Ð´_Ð³Ð¾Ð´Ð°_Ð»ÐµÑ"};return"m"===c?b?"Ð¼Ð¸Ð½ÑÑÐ°":"Ð¼Ð¸Ð½ÑÑÑ":a+" "+Zd(d[c],+a)}function _d(a){return a>1&&a<5}function ae(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"pÃ¡r sekÃºnd":"pÃ¡r sekundami";case"m":return b?"minÃºta":d?"minÃºtu":"minÃºtou";case"mm":return b||d?e+(_d(a)?"minÃºty":"minÃºt"):e+"minÃºtami";break;case"h":return b?"hodina":d?"hodinu":"hodinou";case"hh":return b||d?e+(_d(a)?"hodiny":"hodÃ­n"):e+"hodinami";break;case"d":return b||d?"deÅ":"dÅom";case"dd":return b||d?e+(_d(a)?"dni":"dnÃ­"):e+"dÅami";break;case"M":return b||d?"mesiac":"mesiacom";case"MM":return b||d?e+(_d(a)?"mesiace":"mesiacov"):e+"mesiacmi";break;case"y":return b||d?"rok":"rokom";case"yy":return b||d?e+(_d(a)?"roky":"rokov"):e+"rokmi"}}function be(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"nekaj sekund":"nekaj sekundami";case"m":return b?"ena minuta":"eno minuto";case"mm":return e+=1===a?b?"minuta":"minuto":2===a?b||d?"minuti":"minutama":a<5?b||d?"minute":"minutami":b||d?"minut":"minutami";case"h":return b?"ena ura":"eno uro";case"hh":return e+=1===a?b?"ura":"uro":2===a?b||d?"uri":"urama":a<5?b||d?"ure":"urami":b||d?"ur":"urami";case"d":return b||d?"en dan":"enim dnem";case"dd":return e+=1===a?b||d?"dan":"dnem":2===a?b||d?"dni":"dnevoma":b||d?"dni":"dnevi";case"M":return b||d?"en mesec":"enim mesecem";case"MM":return e+=1===a?b||d?"mesec":"mesecem":2===a?b||d?"meseca":"mesecema":a<5?b||d?"mesece":"meseci":b||d?"mesecev":"meseci";case"y":return b||d?"eno leto":"enim letom";case"yy":return e+=1===a?b||d?"leto":"letom":2===a?b||d?"leti":"letoma":a<5?b||d?"leta":"leti":b||d?"let":"leti"}}function ce(a){var b=a;return b=a.indexOf("jaj")!==-1?b.slice(0,-3)+"leS":a.indexOf("jar")!==-1?b.slice(0,-3)+"waQ":a.indexOf("DIS")!==-1?b.slice(0,-3)+"nem":b+" pIq"}function de(a){var b=a;return b=a.indexOf("jaj")!==-1?b.slice(0,-3)+"Huâ":a.indexOf("jar")!==-1?b.slice(0,-3)+"wen":a.indexOf("DIS")!==-1?b.slice(0,-3)+"ben":b+" ret"}function ee(a,b,c,d){var e=fe(a);switch(c){case"mm":return e+" tup";case"hh":return e+" rep";case"dd":return e+" jaj";case"MM":return e+" jar";case"yy":return e+" DIS"}}function fe(a){var b=Math.floor(a%1e3/100),c=Math.floor(a%100/10),d=a%10,e="";return b>0&&(e+=Fh[b]+"vatlh"),c>0&&(e+=(""!==e?" ":"")+Fh[c]+"maH"),d>0&&(e+=(""!==e?" ":"")+Fh[d]),""===e?"pagh":e}function ge(a,b,c,d){var e={s:["viensas secunds","'iensas secunds"],m:["'n mÃ­ut","'iens mÃ­ut"],mm:[a+" mÃ­uts",""+a+" mÃ­uts"],h:["'n Ã¾ora","'iensa Ã¾ora"],hh:[a+" Ã¾oras",""+a+" Ã¾oras"],d:["'n ziua","'iensa ziua"],dd:[a+" ziuas",""+a+" ziuas"],M:["'n mes","'iens mes"],MM:[a+" mesen",""+a+" mesen"],y:["'n ar","'iens ar"],yy:[a+" ars",""+a+" ars"]};return d?e[c][0]:b?e[c][0]:e[c][1]}function he(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&b%10<=4&&(b%100<10||b%100>=20)?c[1]:c[2]}function ie(a,b,c){var d={mm:b?"ÑÐ²Ð¸Ð»Ð¸Ð½Ð°_ÑÐ²Ð¸Ð»Ð¸Ð½Ð¸_ÑÐ²Ð¸Ð»Ð¸Ð½":"ÑÐ²Ð¸Ð»Ð¸Ð½Ñ_ÑÐ²Ð¸Ð»Ð¸Ð½Ð¸_ÑÐ²Ð¸Ð»Ð¸Ð½",hh:b?"Ð³Ð¾Ð´Ð¸Ð½Ð°_Ð³Ð¾Ð´Ð¸Ð½Ð¸_Ð³Ð¾Ð´Ð¸Ð½":"Ð³Ð¾Ð´Ð¸Ð½Ñ_Ð³Ð¾Ð´Ð¸Ð½Ð¸_Ð³Ð¾Ð´Ð¸Ð½",dd:"Ð´ÐµÐ½Ñ_Ð´Ð½Ñ_Ð´Ð½ÑÐ²",MM:"Ð¼ÑÑÑÑÑ_Ð¼ÑÑÑÑÑ_Ð¼ÑÑÑÑÑÐ²",yy:"ÑÑÐº_ÑÐ¾ÐºÐ¸_ÑÐ¾ÐºÑÐ²"};return"m"===c?b?"ÑÐ²Ð¸Ð»Ð¸Ð½Ð°":"ÑÐ²Ð¸Ð»Ð¸Ð½Ñ":"h"===c?b?"Ð³Ð¾Ð´Ð¸Ð½Ð°":"Ð³Ð¾Ð´Ð¸Ð½Ñ":a+" "+he(d[c],+a)}function je(a,b){var c={nominative:"Ð½ÐµÐ´ÑÐ»Ñ_Ð¿Ð¾Ð½ÐµÐ´ÑÐ»Ð¾Ðº_Ð²ÑÐ²ÑÐ¾ÑÐ¾Ðº_ÑÐµÑÐµÐ´Ð°_ÑÐµÑÐ²ÐµÑ_Ð¿âÑÑÐ½Ð¸ÑÑ_ÑÑÐ±Ð¾ÑÐ°".split("_"),accusative:"Ð½ÐµÐ´ÑÐ»Ñ_Ð¿Ð¾Ð½ÐµÐ´ÑÐ»Ð¾Ðº_Ð²ÑÐ²ÑÐ¾ÑÐ¾Ðº_ÑÐµÑÐµÐ´Ñ_ÑÐµÑÐ²ÐµÑ_Ð¿âÑÑÐ½Ð¸ÑÑ_ÑÑÐ±Ð¾ÑÑ".split("_"),genitive:"Ð½ÐµÐ´ÑÐ»Ñ_Ð¿Ð¾Ð½ÐµÐ´ÑÐ»ÐºÐ°_Ð²ÑÐ²ÑÐ¾ÑÐºÐ°_ÑÐµÑÐµÐ´Ð¸_ÑÐµÑÐ²ÐµÑÐ³Ð°_Ð¿âÑÑÐ½Ð¸ÑÑ_ÑÑÐ±Ð¾ÑÐ¸".split("_")},d=/(\[[ÐÐ²Ð£Ñ]\]) ?dddd/.test(b)?"accusative":/\[?(?:Ð¼Ð¸Ð½ÑÐ»Ð¾Ñ|Ð½Ð°ÑÑÑÐ¿Ð½Ð¾Ñ)? ?\] ?dddd/.test(b)?"genitive":"nominative";return c[d][a.day()]}function ke(a){return function(){return a+"Ð¾"+(11===this.hours()?"Ð±":"")+"] LT"}}var le,me;me=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var ne=me,oe=a.momentProperties=[],pe=!1,qe={};a.suppressDeprecationWarnings=!1,a.deprecationHandler=null;var re;re=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)i(a,b)&&c.push(b);return c};var se,te=re,ue={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},ve={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},we="Invalid date",xe="%d",ye=/\d{1,2}/,ze={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ae={},Be={},Ce=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,De=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ee={},Fe={},Ge=/\d/,He=/\d\d/,Ie=/\d{3}/,Je=/\d{4}/,Ke=/[+-]?\d{6}/,Le=/\d\d?/,Me=/\d\d\d\d?/,Ne=/\d\d\d\d\d\d?/,Oe=/\d{1,3}/,Pe=/\d{1,4}/,Qe=/[+-]?\d{1,6}/,Re=/\d+/,Se=/[+-]?\d+/,Te=/Z|[+-]\d\d:?\d\d/gi,Ue=/Z|[+-]\d\d(?::?\d\d)?/gi,Ve=/[+-]?\d+(\.\d{1,3})?/,We=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Xe={},Ye={},Ze=0,$e=1,_e=2,af=3,bf=4,cf=5,df=6,ef=7,ff=8;se=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};var gf=se;U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),U("MMMM",0,0,function(a){return this.localeData().months(this,a)}),J("month","M"),M("month",8),Z("M",Le),Z("MM",Le,He),Z("MMM",function(a,b){return b.monthsShortRegex(a)}),Z("MMMM",function(a,b){return b.monthsRegex(a)}),ba(["M","MM"],function(a,b){b[$e]=u(a)-1}),ba(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[$e]=e:m(c).invalidMonth=a});var hf=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,jf="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),kf="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),lf=We,mf=We;U("Y",0,0,function(){var a=this.year();return a<=9999?""+a:"+"+a}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),J("year","y"),M("year",1),Z("Y",Se),Z("YY",Le,He),Z("YYYY",Pe,Je),Z("YYYYY",Qe,Ke),Z("YYYYYY",Qe,Ke),ba(["YYYYY","YYYYYY"],Ze),ba("YYYY",function(b,c){c[Ze]=2===b.length?a.parseTwoDigitYear(b):u(b)}),ba("YY",function(b,c){c[Ze]=a.parseTwoDigitYear(b)}),ba("Y",function(a,b){b[Ze]=parseInt(a,10)}),a.parseTwoDigitYear=function(a){return u(a)+(u(a)>68?1900:2e3)};var nf=O("FullYear",!0);U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),J("week","w"),J("isoWeek","W"),M("week",5),M("isoWeek",5),Z("w",Le),Z("ww",Le,He),Z("W",Le),Z("WW",Le,He),ca(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=u(a)});var of={dow:0,doy:6};U("d",0,"do","day"),U("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),U("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),U("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),J("day","d"),J("weekday","e"),J("isoWeekday","E"),M("day",11),M("weekday",11),M("isoWeekday",11),Z("d",Le),Z("e",Le),Z("E",Le),Z("dd",function(a,b){return b.weekdaysMinRegex(a)}),Z("ddd",function(a,b){return b.weekdaysShortRegex(a)}),Z("dddd",function(a,b){return b.weekdaysRegex(a)}),ca(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:m(c).invalidWeekday=a}),ca(["d","e","E"],function(a,b,c,d){b[d]=u(a)});var pf="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),qf="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),rf="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),sf=We,tf=We,uf=We;U("H",["HH",2],0,"hour"),U("h",["hh",2],0,Ra),U("k",["kk",2],0,Sa),U("hmm",0,0,function(){return""+Ra.apply(this)+T(this.minutes(),2)}),U("hmmss",0,0,function(){return""+Ra.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+T(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),Ta("a",!0),Ta("A",!1),J("hour","h"),M("hour",13),Z("a",Ua),Z("A",Ua),Z("H",Le),Z("h",Le),Z("HH",Le,He),Z("hh",Le,He),Z("hmm",Me),Z("hmmss",Ne),Z("Hmm",Me),Z("Hmmss",Ne),ba(["H","HH"],af),ba(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),ba(["h","hh"],function(a,b,c){b[af]=u(a),m(c).bigHour=!0}),ba("hmm",function(a,b,c){var d=a.length-2;b[af]=u(a.substr(0,d)),b[bf]=u(a.substr(d)),m(c).bigHour=!0}),ba("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[af]=u(a.substr(0,d)),b[bf]=u(a.substr(d,2)),b[cf]=u(a.substr(e)),m(c).bigHour=!0}),ba("Hmm",function(a,b,c){var d=a.length-2;b[af]=u(a.substr(0,d)),b[bf]=u(a.substr(d))}),ba("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[af]=u(a.substr(0,d)),b[bf]=u(a.substr(d,2)),b[cf]=u(a.substr(e))});var vf,wf=/[ap]\.?m?\.?/i,xf=O("Hours",!0),yf={calendar:ue,longDateFormat:ve,invalidDate:we,ordinal:xe,ordinalParse:ye,relativeTime:ze,months:jf,monthsShort:kf,week:of,weekdays:pf,weekdaysMin:rf,weekdaysShort:qf,meridiemParse:wf},zf={},Af={},Bf=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Cf=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Df=/Z|[+-]\d\d(?::?\d\d)?/,Ef=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ff=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Gf=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=x("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),a.ISO_8601=function(){};var Hf=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=sb.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:o()}),If=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=sb.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:o()}),Jf=function(){return Date.now?Date.now():+new Date};zb("Z",":"),zb("ZZ",""),Z("Z",Ue),Z("ZZ",Ue),
ba(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ab(Ue,a)});var Kf=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Lf=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Mf=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ob.fn=wb.prototype;var Nf=Sb(1,"add"),Of=Sb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Pf=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),zc("gggg","weekYear"),zc("ggggg","weekYear"),zc("GGGG","isoWeekYear"),zc("GGGGG","isoWeekYear"),J("weekYear","gg"),J("isoWeekYear","GG"),M("weekYear",1),M("isoWeekYear",1),Z("G",Se),Z("g",Se),Z("GG",Le,He),Z("gg",Le,He),Z("GGGG",Pe,Je),Z("gggg",Pe,Je),Z("GGGGG",Qe,Ke),Z("ggggg",Qe,Ke),ca(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=u(a)}),ca(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),U("Q",0,"Qo","quarter"),J("quarter","Q"),M("quarter",7),Z("Q",Ge),ba("Q",function(a,b){b[$e]=3*(u(a)-1)}),U("D",["DD",2],"Do","date"),J("date","D"),M("date",9),Z("D",Le),Z("DD",Le,He),Z("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),ba(["D","DD"],_e),ba("Do",function(a,b){b[_e]=u(a.match(Le)[0],10)});var Qf=O("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),J("dayOfYear","DDD"),M("dayOfYear",4),Z("DDD",Oe),Z("DDDD",Ie),ba(["DDD","DDDD"],function(a,b,c){c._dayOfYear=u(a)}),U("m",["mm",2],0,"minute"),J("minute","m"),M("minute",14),Z("m",Le),Z("mm",Le,He),ba(["m","mm"],bf);var Rf=O("Minutes",!1);U("s",["ss",2],0,"second"),J("second","s"),M("second",15),Z("s",Le),Z("ss",Le,He),ba(["s","ss"],cf);var Sf=O("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return 10*this.millisecond()}),U(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),U(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),U(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),U(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),U(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),J("millisecond","ms"),M("millisecond",16),Z("S",Oe,Ge),Z("SS",Oe,He),Z("SSS",Oe,Ie);var Tf;for(Tf="SSSS";Tf.length<=9;Tf+="S")Z(Tf,Re);for(Tf="S";Tf.length<=9;Tf+="S")ba(Tf,Ic);var Uf=O("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var Vf=r.prototype;Vf.add=Nf,Vf.calendar=Vb,Vf.clone=Wb,Vf.diff=bc,Vf.endOf=oc,Vf.format=gc,Vf.from=hc,Vf.fromNow=ic,Vf.to=jc,Vf.toNow=kc,Vf.get=R,Vf.invalidAt=xc,Vf.isAfter=Xb,Vf.isBefore=Yb,Vf.isBetween=Zb,Vf.isSame=$b,Vf.isSameOrAfter=_b,Vf.isSameOrBefore=ac,Vf.isValid=vc,Vf.lang=Pf,Vf.locale=lc,Vf.localeData=mc,Vf.max=If,Vf.min=Hf,Vf.parsingFlags=wc,Vf.set=S,Vf.startOf=nc,Vf.subtract=Of,Vf.toArray=sc,Vf.toObject=tc,Vf.toDate=rc,Vf.toISOString=ec,Vf.inspect=fc,Vf.toJSON=uc,Vf.toString=dc,Vf.unix=qc,Vf.valueOf=pc,Vf.creationData=yc,Vf.year=nf,Vf.isLeapYear=ra,Vf.weekYear=Ac,Vf.isoWeekYear=Bc,Vf.quarter=Vf.quarters=Gc,Vf.month=ka,Vf.daysInMonth=la,Vf.week=Vf.weeks=Ba,Vf.isoWeek=Vf.isoWeeks=Ca,Vf.weeksInYear=Dc,Vf.isoWeeksInYear=Cc,Vf.date=Qf,Vf.day=Vf.days=Ka,Vf.weekday=La,Vf.isoWeekday=Ma,Vf.dayOfYear=Hc,Vf.hour=Vf.hours=xf,Vf.minute=Vf.minutes=Rf,Vf.second=Vf.seconds=Sf,Vf.millisecond=Vf.milliseconds=Uf,Vf.utcOffset=Db,Vf.utc=Fb,Vf.local=Gb,Vf.parseZone=Hb,Vf.hasAlignedHourOffset=Ib,Vf.isDST=Jb,Vf.isLocal=Lb,Vf.isUtcOffset=Mb,Vf.isUtc=Nb,Vf.isUTC=Nb,Vf.zoneAbbr=Jc,Vf.zoneName=Kc,Vf.dates=x("dates accessor is deprecated. Use date instead.",Qf),Vf.months=x("months accessor is deprecated. Use month instead",ka),Vf.years=x("years accessor is deprecated. Use year instead",nf),Vf.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Eb),Vf.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Kb);var Wf=C.prototype;Wf.calendar=D,Wf.longDateFormat=E,Wf.invalidDate=F,Wf.ordinal=G,Wf.preparse=Nc,Wf.postformat=Nc,Wf.relativeTime=H,Wf.pastFuture=I,Wf.set=A,Wf.months=fa,Wf.monthsShort=ga,Wf.monthsParse=ia,Wf.monthsRegex=na,Wf.monthsShortRegex=ma,Wf.week=ya,Wf.firstDayOfYear=Aa,Wf.firstDayOfWeek=za,Wf.weekdays=Fa,Wf.weekdaysMin=Ha,Wf.weekdaysShort=Ga,Wf.weekdaysParse=Ja,Wf.weekdaysRegex=Na,Wf.weekdaysShortRegex=Oa,Wf.weekdaysMinRegex=Pa,Wf.isPM=Va,Wf.meridiem=Wa,$a("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===u(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=x("moment.lang is deprecated. Use moment.locale instead.",$a),a.langData=x("moment.langData is deprecated. Use moment.localeData instead.",bb);var Xf=Math.abs,Yf=ed("ms"),Zf=ed("s"),$f=ed("m"),_f=ed("h"),ag=ed("d"),bg=ed("w"),cg=ed("M"),dg=ed("y"),eg=gd("milliseconds"),fg=gd("seconds"),gg=gd("minutes"),hg=gd("hours"),ig=gd("days"),jg=gd("months"),kg=gd("years"),lg=Math.round,mg={s:45,m:45,h:22,d:26,M:11},ng=Math.abs,og=wb.prototype;og.abs=Wc,og.add=Yc,og.subtract=Zc,og.as=cd,og.asMilliseconds=Yf,og.asSeconds=Zf,og.asMinutes=$f,og.asHours=_f,og.asDays=ag,og.asWeeks=bg,og.asMonths=cg,og.asYears=dg,og.valueOf=dd,og._bubble=_c,og.get=fd,og.milliseconds=eg,og.seconds=fg,og.minutes=gg,og.hours=hg,og.days=ig,og.weeks=hd,og.months=jg,og.years=kg,og.humanize=md,og.toISOString=nd,og.toString=nd,og.toJSON=nd,og.locale=lc,og.localeData=mc,og.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nd),og.lang=Pf,U("X",0,0,"unix"),U("x",0,0,"valueOf"),Z("x",Se),Z("X",Ve),ba("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),ba("x",function(a,b,c){c._d=new Date(u(a))}),a.version="2.16.0",b(sb),a.fn=Vf,a.min=ub,a.max=vb,a.now=Jf,a.utc=k,a.unix=Lc,a.months=Rc,a.isDate=g,a.locale=$a,a.invalid=o,a.duration=Ob,a.isMoment=s,a.weekdays=Tc,a.parseZone=Mc,a.localeData=bb,a.isDuration=xb,a.monthsShort=Sc,a.weekdaysMin=Vc,a.defineLocale=_a,a.updateLocale=ab,a.locales=cb,a.weekdaysShort=Uc,a.normalizeUnits=K,a.relativeTimeRounding=kd,a.relativeTimeThreshold=ld,a.calendarFormat=Ub,a.prototype=Vf,a.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(a){return/^nm$/i.test(a)},meridiem:function(a,b,c){return a<12?c?"vm":"VM":c?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[MÃ´re om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}}),a.defineLocale("ar-dz",{months:"Ø¬Ø§ÙÙÙ_ÙÙÙØ±Ù_ÙØ§Ø±Ø³_Ø£ÙØ±ÙÙ_ÙØ§Ù_Ø¬ÙØ§Ù_Ø¬ÙÙÙÙØ©_Ø£ÙØª_Ø³Ø¨ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙÙØ¨Ø±_Ø¯ÙØ³ÙØ¨Ø±".split("_"),monthsShort:"Ø¬Ø§ÙÙÙ_ÙÙÙØ±Ù_ÙØ§Ø±Ø³_Ø£ÙØ±ÙÙ_ÙØ§Ù_Ø¬ÙØ§Ù_Ø¬ÙÙÙÙØ©_Ø£ÙØª_Ø³Ø¨ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙÙØ¨Ø±_Ø¯ÙØ³ÙØ¨Ø±".split("_"),weekdays:"Ø§ÙØ£Ø­Ø¯_Ø§ÙØ¥Ø«ÙÙÙ_Ø§ÙØ«ÙØ§Ø«Ø§Ø¡_Ø§ÙØ£Ø±Ø¨Ø¹Ø§Ø¡_Ø§ÙØ®ÙÙØ³_Ø§ÙØ¬ÙØ¹Ø©_Ø§ÙØ³Ø¨Øª".split("_"),weekdaysShort:"Ø§Ø­Ø¯_Ø§Ø«ÙÙÙ_Ø«ÙØ§Ø«Ø§Ø¡_Ø§Ø±Ø¨Ø¹Ø§Ø¡_Ø®ÙÙØ³_Ø¬ÙØ¹Ø©_Ø³Ø¨Øª".split("_"),weekdaysMin:"Ø£Ø­_Ø¥Ø«_Ø«ÙØ§_Ø£Ø±_Ø®Ù_Ø¬Ù_Ø³Ø¨".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ø§ÙÙÙÙ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextDay:"[ØºØ¯Ø§ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastDay:"[Ø£ÙØ³ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",sameElse:"L"},relativeTime:{future:"ÙÙ %s",past:"ÙÙØ° %s",s:"Ø«ÙØ§Ù",m:"Ø¯ÙÙÙØ©",mm:"%d Ø¯ÙØ§Ø¦Ù",h:"Ø³Ø§Ø¹Ø©",hh:"%d Ø³Ø§Ø¹Ø§Øª",d:"ÙÙÙ",dd:"%d Ø£ÙØ§Ù",M:"Ø´ÙØ±",MM:"%d Ø£Ø´ÙØ±",y:"Ø³ÙØ©",yy:"%d Ø³ÙÙØ§Øª"},week:{dow:0,doy:4}});var pg={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},qg=function(a){return 0===a?0:1===a?1:2===a?2:a%100>=3&&a%100<=10?3:a%100>=11?4:5},rg={s:["Ø£ÙÙ ÙÙ Ø«Ø§ÙÙØ©","Ø«Ø§ÙÙØ© ÙØ§Ø­Ø¯Ø©",["Ø«Ø§ÙÙØªØ§Ù","Ø«Ø§ÙÙØªÙÙ"],"%d Ø«ÙØ§Ù","%d Ø«Ø§ÙÙØ©","%d Ø«Ø§ÙÙØ©"],m:["Ø£ÙÙ ÙÙ Ø¯ÙÙÙØ©","Ø¯ÙÙÙØ© ÙØ§Ø­Ø¯Ø©",["Ø¯ÙÙÙØªØ§Ù","Ø¯ÙÙÙØªÙÙ"],"%d Ø¯ÙØ§Ø¦Ù","%d Ø¯ÙÙÙØ©","%d Ø¯ÙÙÙØ©"],h:["Ø£ÙÙ ÙÙ Ø³Ø§Ø¹Ø©","Ø³Ø§Ø¹Ø© ÙØ§Ø­Ø¯Ø©",["Ø³Ø§Ø¹ØªØ§Ù","Ø³Ø§Ø¹ØªÙÙ"],"%d Ø³Ø§Ø¹Ø§Øª","%d Ø³Ø§Ø¹Ø©","%d Ø³Ø§Ø¹Ø©"],d:["Ø£ÙÙ ÙÙ ÙÙÙ","ÙÙÙ ÙØ§Ø­Ø¯",["ÙÙÙØ§Ù","ÙÙÙÙÙ"],"%d Ø£ÙØ§Ù","%d ÙÙÙÙØ§","%d ÙÙÙ"],M:["Ø£ÙÙ ÙÙ Ø´ÙØ±","Ø´ÙØ± ÙØ§Ø­Ø¯",["Ø´ÙØ±Ø§Ù","Ø´ÙØ±ÙÙ"],"%d Ø£Ø´ÙØ±","%d Ø´ÙØ±Ø§","%d Ø´ÙØ±"],y:["Ø£ÙÙ ÙÙ Ø¹Ø§Ù","Ø¹Ø§Ù ÙØ§Ø­Ø¯",["Ø¹Ø§ÙØ§Ù","Ø¹Ø§ÙÙÙ"],"%d Ø£Ø¹ÙØ§Ù","%d Ø¹Ø§ÙÙØ§","%d Ø¹Ø§Ù"]},sg=function(a){return function(b,c,d,e){var f=qg(b),g=rg[a][qg(b)];return 2===f&&(g=g[c?0:1]),g.replace(/%d/i,b)}},tg=["ÙÙØ§ÙØ±","ÙØ¨Ø±Ø§ÙØ±","ÙØ§Ø±Ø³","Ø£Ø¨Ø±ÙÙ","ÙØ§ÙÙ","ÙÙÙÙÙ","ÙÙÙÙÙ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙØ¨Ø±","Ø£ÙØªÙØ¨Ø±","ÙÙÙÙØ¨Ø±","Ø¯ÙØ³ÙØ¨Ø±"];a.defineLocale("ar-ly",{months:tg,monthsShort:tg,weekdays:"Ø§ÙØ£Ø­Ø¯_Ø§ÙØ¥Ø«ÙÙÙ_Ø§ÙØ«ÙØ§Ø«Ø§Ø¡_Ø§ÙØ£Ø±Ø¨Ø¹Ø§Ø¡_Ø§ÙØ®ÙÙØ³_Ø§ÙØ¬ÙØ¹Ø©_Ø§ÙØ³Ø¨Øª".split("_"),weekdaysShort:"Ø£Ø­Ø¯_Ø¥Ø«ÙÙÙ_Ø«ÙØ§Ø«Ø§Ø¡_Ø£Ø±Ø¨Ø¹Ø§Ø¡_Ø®ÙÙØ³_Ø¬ÙØ¹Ø©_Ø³Ø¨Øª".split("_"),weekdaysMin:"Ø­_Ù_Ø«_Ø±_Ø®_Ø¬_Ø³".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/âM/âYYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/Øµ|Ù/,isPM:function(a){return"Ù"===a},meridiem:function(a,b,c){return a<12?"Øµ":"Ù"},calendar:{sameDay:"[Ø§ÙÙÙÙ Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextDay:"[ØºØ¯ÙØ§ Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextWeek:"dddd [Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastDay:"[Ø£ÙØ³ Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastWeek:"dddd [Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",sameElse:"L"},relativeTime:{future:"Ø¨Ø¹Ø¯ %s",past:"ÙÙØ° %s",s:sg("s"),m:sg("m"),mm:sg("m"),h:sg("h"),hh:sg("h"),d:sg("d"),dd:sg("d"),M:sg("M"),MM:sg("M"),y:sg("y"),yy:sg("y")},preparse:function(a){return a.replace(/\u200f/g,"").replace(/Ø/g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return pg[a]}).replace(/,/g,"Ø")},week:{dow:6,doy:12}}),a.defineLocale("ar-ma",{months:"ÙÙØ§ÙØ±_ÙØ¨Ø±Ø§ÙØ±_ÙØ§Ø±Ø³_Ø£Ø¨Ø±ÙÙ_ÙØ§Ù_ÙÙÙÙÙ_ÙÙÙÙÙØ²_ØºØ´Øª_Ø´ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙØ¨Ø±_Ø¯Ø¬ÙØ¨Ø±".split("_"),monthsShort:"ÙÙØ§ÙØ±_ÙØ¨Ø±Ø§ÙØ±_ÙØ§Ø±Ø³_Ø£Ø¨Ø±ÙÙ_ÙØ§Ù_ÙÙÙÙÙ_ÙÙÙÙÙØ²_ØºØ´Øª_Ø´ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙØ¨Ø±_Ø¯Ø¬ÙØ¨Ø±".split("_"),weekdays:"Ø§ÙØ£Ø­Ø¯_Ø§ÙØ¥ØªÙÙÙ_Ø§ÙØ«ÙØ§Ø«Ø§Ø¡_Ø§ÙØ£Ø±Ø¨Ø¹Ø§Ø¡_Ø§ÙØ®ÙÙØ³_Ø§ÙØ¬ÙØ¹Ø©_Ø§ÙØ³Ø¨Øª".split("_"),weekdaysShort:"Ø§Ø­Ø¯_Ø§ØªÙÙÙ_Ø«ÙØ§Ø«Ø§Ø¡_Ø§Ø±Ø¨Ø¹Ø§Ø¡_Ø®ÙÙØ³_Ø¬ÙØ¹Ø©_Ø³Ø¨Øª".split("_"),weekdaysMin:"Ø­_Ù_Ø«_Ø±_Ø®_Ø¬_Ø³".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ø§ÙÙÙÙ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextDay:"[ØºØ¯Ø§ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastDay:"[Ø£ÙØ³ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",sameElse:"L"},relativeTime:{future:"ÙÙ %s",past:"ÙÙØ° %s",s:"Ø«ÙØ§Ù",m:"Ø¯ÙÙÙØ©",mm:"%d Ø¯ÙØ§Ø¦Ù",h:"Ø³Ø§Ø¹Ø©",hh:"%d Ø³Ø§Ø¹Ø§Øª",d:"ÙÙÙ",dd:"%d Ø£ÙØ§Ù",M:"Ø´ÙØ±",MM:"%d Ø£Ø´ÙØ±",y:"Ø³ÙØ©",yy:"%d Ø³ÙÙØ§Øª"},week:{dow:6,doy:12}});var ug={1:"Ù¡",2:"Ù¢",3:"Ù£",4:"Ù¤",5:"Ù¥",6:"Ù¦",7:"Ù§",8:"Ù¨",9:"Ù©",0:"Ù "},vg={"Ù¡":"1","Ù¢":"2","Ù£":"3","Ù¤":"4","Ù¥":"5","Ù¦":"6","Ù§":"7","Ù¨":"8","Ù©":"9","Ù ":"0"};a.defineLocale("ar-sa",{months:"ÙÙØ§ÙØ±_ÙØ¨Ø±Ø§ÙØ±_ÙØ§Ø±Ø³_Ø£Ø¨Ø±ÙÙ_ÙØ§ÙÙ_ÙÙÙÙÙ_ÙÙÙÙÙ_Ø£ØºØ³Ø·Ø³_Ø³Ø¨ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙÙØ¨Ø±_Ø¯ÙØ³ÙØ¨Ø±".split("_"),monthsShort:"ÙÙØ§ÙØ±_ÙØ¨Ø±Ø§ÙØ±_ÙØ§Ø±Ø³_Ø£Ø¨Ø±ÙÙ_ÙØ§ÙÙ_ÙÙÙÙÙ_ÙÙÙÙÙ_Ø£ØºØ³Ø·Ø³_Ø³Ø¨ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙÙØ¨Ø±_Ø¯ÙØ³ÙØ¨Ø±".split("_"),weekdays:"Ø§ÙØ£Ø­Ø¯_Ø§ÙØ¥Ø«ÙÙÙ_Ø§ÙØ«ÙØ§Ø«Ø§Ø¡_Ø§ÙØ£Ø±Ø¨Ø¹Ø§Ø¡_Ø§ÙØ®ÙÙØ³_Ø§ÙØ¬ÙØ¹Ø©_Ø§ÙØ³Ø¨Øª".split("_"),weekdaysShort:"Ø£Ø­Ø¯_Ø¥Ø«ÙÙÙ_Ø«ÙØ§Ø«Ø§Ø¡_Ø£Ø±Ø¨Ø¹Ø§Ø¡_Ø®ÙÙØ³_Ø¬ÙØ¹Ø©_Ø³Ø¨Øª".split("_"),weekdaysMin:"Ø­_Ù_Ø«_Ø±_Ø®_Ø¬_Ø³".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/Øµ|Ù/,isPM:function(a){return"Ù"===a},meridiem:function(a,b,c){return a<12?"Øµ":"Ù"},calendar:{sameDay:"[Ø§ÙÙÙÙ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextDay:"[ØºØ¯Ø§ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastDay:"[Ø£ÙØ³ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",sameElse:"L"},relativeTime:{future:"ÙÙ %s",past:"ÙÙØ° %s",s:"Ø«ÙØ§Ù",m:"Ø¯ÙÙÙØ©",mm:"%d Ø¯ÙØ§Ø¦Ù",h:"Ø³Ø§Ø¹Ø©",hh:"%d Ø³Ø§Ø¹Ø§Øª",d:"ÙÙÙ",dd:"%d Ø£ÙØ§Ù",M:"Ø´ÙØ±",MM:"%d Ø£Ø´ÙØ±",y:"Ø³ÙØ©",yy:"%d Ø³ÙÙØ§Øª"},preparse:function(a){return a.replace(/[Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©Ù ]/g,function(a){return vg[a]}).replace(/Ø/g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return ug[a]}).replace(/,/g,"Ø")},week:{dow:0,doy:6}}),a.defineLocale("ar-tn",{months:"Ø¬Ø§ÙÙÙ_ÙÙÙØ±Ù_ÙØ§Ø±Ø³_Ø£ÙØ±ÙÙ_ÙØ§Ù_Ø¬ÙØ§Ù_Ø¬ÙÙÙÙØ©_Ø£ÙØª_Ø³Ø¨ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙÙØ¨Ø±_Ø¯ÙØ³ÙØ¨Ø±".split("_"),monthsShort:"Ø¬Ø§ÙÙÙ_ÙÙÙØ±Ù_ÙØ§Ø±Ø³_Ø£ÙØ±ÙÙ_ÙØ§Ù_Ø¬ÙØ§Ù_Ø¬ÙÙÙÙØ©_Ø£ÙØª_Ø³Ø¨ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙÙØ¨Ø±_Ø¯ÙØ³ÙØ¨Ø±".split("_"),weekdays:"Ø§ÙØ£Ø­Ø¯_Ø§ÙØ¥Ø«ÙÙÙ_Ø§ÙØ«ÙØ§Ø«Ø§Ø¡_Ø§ÙØ£Ø±Ø¨Ø¹Ø§Ø¡_Ø§ÙØ®ÙÙØ³_Ø§ÙØ¬ÙØ¹Ø©_Ø§ÙØ³Ø¨Øª".split("_"),weekdaysShort:"Ø£Ø­Ø¯_Ø¥Ø«ÙÙÙ_Ø«ÙØ§Ø«Ø§Ø¡_Ø£Ø±Ø¨Ø¹Ø§Ø¡_Ø®ÙÙØ³_Ø¬ÙØ¹Ø©_Ø³Ø¨Øª".split("_"),weekdaysMin:"Ø­_Ù_Ø«_Ø±_Ø®_Ø¬_Ø³".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ø§ÙÙÙÙ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextDay:"[ØºØ¯Ø§ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastDay:"[Ø£ÙØ³ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",sameElse:"L"},relativeTime:{future:"ÙÙ %s",past:"ÙÙØ° %s",s:"Ø«ÙØ§Ù",m:"Ø¯ÙÙÙØ©",mm:"%d Ø¯ÙØ§Ø¦Ù",h:"Ø³Ø§Ø¹Ø©",hh:"%d Ø³Ø§Ø¹Ø§Øª",d:"ÙÙÙ",dd:"%d Ø£ÙØ§Ù",M:"Ø´ÙØ±",MM:"%d Ø£Ø´ÙØ±",y:"Ø³ÙØ©",yy:"%d Ø³ÙÙØ§Øª"},week:{dow:1,doy:4}});var wg={1:"Ù¡",2:"Ù¢",3:"Ù£",4:"Ù¤",5:"Ù¥",6:"Ù¦",7:"Ù§",8:"Ù¨",9:"Ù©",0:"Ù "},xg={"Ù¡":"1","Ù¢":"2","Ù£":"3","Ù¤":"4","Ù¥":"5","Ù¦":"6","Ù§":"7","Ù¨":"8","Ù©":"9","Ù ":"0"},yg=function(a){return 0===a?0:1===a?1:2===a?2:a%100>=3&&a%100<=10?3:a%100>=11?4:5},zg={s:["Ø£ÙÙ ÙÙ Ø«Ø§ÙÙØ©","Ø«Ø§ÙÙØ© ÙØ§Ø­Ø¯Ø©",["Ø«Ø§ÙÙØªØ§Ù","Ø«Ø§ÙÙØªÙÙ"],"%d Ø«ÙØ§Ù","%d Ø«Ø§ÙÙØ©","%d Ø«Ø§ÙÙØ©"],m:["Ø£ÙÙ ÙÙ Ø¯ÙÙÙØ©","Ø¯ÙÙÙØ© ÙØ§Ø­Ø¯Ø©",["Ø¯ÙÙÙØªØ§Ù","Ø¯ÙÙÙØªÙÙ"],"%d Ø¯ÙØ§Ø¦Ù","%d Ø¯ÙÙÙØ©","%d Ø¯ÙÙÙØ©"],h:["Ø£ÙÙ ÙÙ Ø³Ø§Ø¹Ø©","Ø³Ø§Ø¹Ø© ÙØ§Ø­Ø¯Ø©",["Ø³Ø§Ø¹ØªØ§Ù","Ø³Ø§Ø¹ØªÙÙ"],"%d Ø³Ø§Ø¹Ø§Øª","%d Ø³Ø§Ø¹Ø©","%d Ø³Ø§Ø¹Ø©"],d:["Ø£ÙÙ ÙÙ ÙÙÙ","ÙÙÙ ÙØ§Ø­Ø¯",["ÙÙÙØ§Ù","ÙÙÙÙÙ"],"%d Ø£ÙØ§Ù","%d ÙÙÙÙØ§","%d ÙÙÙ"],M:["Ø£ÙÙ ÙÙ Ø´ÙØ±","Ø´ÙØ± ÙØ§Ø­Ø¯",["Ø´ÙØ±Ø§Ù","Ø´ÙØ±ÙÙ"],"%d Ø£Ø´ÙØ±","%d Ø´ÙØ±Ø§","%d Ø´ÙØ±"],y:["Ø£ÙÙ ÙÙ Ø¹Ø§Ù","Ø¹Ø§Ù ÙØ§Ø­Ø¯",["Ø¹Ø§ÙØ§Ù","Ø¹Ø§ÙÙÙ"],"%d Ø£Ø¹ÙØ§Ù","%d Ø¹Ø§ÙÙØ§","%d Ø¹Ø§Ù"]},Ag=function(a){return function(b,c,d,e){var f=yg(b),g=zg[a][yg(b)];return 2===f&&(g=g[c?0:1]),g.replace(/%d/i,b)}},Bg=["ÙØ§ÙÙÙ Ø§ÙØ«Ø§ÙÙ ÙÙØ§ÙØ±","Ø´Ø¨Ø§Ø· ÙØ¨Ø±Ø§ÙØ±","Ø¢Ø°Ø§Ø± ÙØ§Ø±Ø³","ÙÙØ³Ø§Ù Ø£Ø¨Ø±ÙÙ","Ø£ÙØ§Ø± ÙØ§ÙÙ","Ø­Ø²ÙØ±Ø§Ù ÙÙÙÙÙ","ØªÙÙØ² ÙÙÙÙÙ","Ø¢Ø¨ Ø£ØºØ³Ø·Ø³","Ø£ÙÙÙÙ Ø³Ø¨ØªÙØ¨Ø±","ØªØ´Ø±ÙÙ Ø§ÙØ£ÙÙ Ø£ÙØªÙØ¨Ø±","ØªØ´Ø±ÙÙ Ø§ÙØ«Ø§ÙÙ ÙÙÙÙØ¨Ø±","ÙØ§ÙÙÙ Ø§ÙØ£ÙÙ Ø¯ÙØ³ÙØ¨Ø±"];a.defineLocale("ar",{months:Bg,monthsShort:Bg,weekdays:"Ø§ÙØ£Ø­Ø¯_Ø§ÙØ¥Ø«ÙÙÙ_Ø§ÙØ«ÙØ§Ø«Ø§Ø¡_Ø§ÙØ£Ø±Ø¨Ø¹Ø§Ø¡_Ø§ÙØ®ÙÙØ³_Ø§ÙØ¬ÙØ¹Ø©_Ø§ÙØ³Ø¨Øª".split("_"),weekdaysShort:"Ø£Ø­Ø¯_Ø¥Ø«ÙÙÙ_Ø«ÙØ§Ø«Ø§Ø¡_Ø£Ø±Ø¨Ø¹Ø§Ø¡_Ø®ÙÙØ³_Ø¬ÙØ¹Ø©_Ø³Ø¨Øª".split("_"),weekdaysMin:"Ø­_Ù_Ø«_Ø±_Ø®_Ø¬_Ø³".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/âM/âYYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/Øµ|Ù/,isPM:function(a){return"Ù"===a},meridiem:function(a,b,c){return a<12?"Øµ":"Ù"},calendar:{sameDay:"[Ø§ÙÙÙÙ Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextDay:"[ØºØ¯ÙØ§ Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextWeek:"dddd [Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastDay:"[Ø£ÙØ³ Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastWeek:"dddd [Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",sameElse:"L"},relativeTime:{future:"Ø¨Ø¹Ø¯ %s",past:"ÙÙØ° %s",s:Ag("s"),m:Ag("m"),mm:Ag("m"),h:Ag("h"),hh:Ag("h"),d:Ag("d"),dd:Ag("d"),M:Ag("M"),MM:Ag("M"),y:Ag("y"),yy:Ag("y")},preparse:function(a){return a.replace(/\u200f/g,"").replace(/[Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©Ù ]/g,function(a){return xg[a]}).replace(/Ø/g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return wg[a]}).replace(/,/g,"Ø")},week:{dow:6,doy:12}});var Cg={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-Ã¼ncÃ¼",4:"-Ã¼ncÃ¼",100:"-Ã¼ncÃ¼",6:"-ncÄ±",9:"-uncu",10:"-uncu",30:"-uncu",60:"-Ä±ncÄ±",90:"-Ä±ncÄ±"};a.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertÉsi_ÃÉrÅÉnbÉ axÅamÄ±_ÃÉrÅÉnbÉ_CÃ¼mÉ axÅamÄ±_CÃ¼mÉ_ÅÉnbÉ".split("_"),weekdaysShort:"Baz_BzE_ÃAx_ÃÉr_CAx_CÃ¼m_ÅÉn".split("_"),weekdaysMin:"Bz_BE_ÃA_ÃÉ_CA_CÃ¼_ÅÉ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugÃ¼n saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gÉlÉn hÉftÉ] dddd [saat] LT",lastDay:"[dÃ¼nÉn] LT",lastWeek:"[keÃ§Én hÉftÉ] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s ÉvvÉl",s:"birneÃ§É saniyyÉ",m:"bir dÉqiqÉ",mm:"%d dÉqiqÉ",h:"bir saat",hh:"%d saat",d:"bir gÃ¼n",dd:"%d gÃ¼n",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecÉ|sÉhÉr|gÃ¼ndÃ¼z|axÅam/,isPM:function(a){return/^(gÃ¼ndÃ¼z|axÅam)$/.test(a)},meridiem:function(a,b,c){return a<4?"gecÉ":a<12?"sÉhÉr":a<17?"gÃ¼ndÃ¼z":"axÅam"},ordinalParse:/\d{1,2}-(Ä±ncÄ±|inci|nci|Ã¼ncÃ¼|ncÄ±|uncu)/,ordinal:function(a){if(0===a)return a+"-Ä±ncÄ±";var b=a%10,c=a%100-b,d=a>=100?100:null;return a+(Cg[b]||Cg[c]||Cg[d])},week:{dow:1,doy:7}}),a.defineLocale("be",{months:{format:"ÑÑÑÐ´Ð·ÐµÐ½Ñ_Ð»ÑÑÐ°Ð³Ð°_ÑÐ°ÐºÐ°Ð²ÑÐºÐ°_ÐºÑÐ°ÑÐ°Ð²ÑÐºÐ°_ÑÑÐ°ÑÐ½Ñ_ÑÑÑÐ²ÐµÐ½Ñ_Ð»ÑÐ¿ÐµÐ½Ñ_Ð¶Ð½ÑÑÐ½Ñ_Ð²ÐµÑÐ°ÑÐ½Ñ_ÐºÐ°ÑÑÑÑÑÐ½ÑÐºÐ°_Ð»ÑÑÑÐ°Ð¿Ð°Ð´Ð°_ÑÐ½ÐµÐ¶Ð½Ñ".split("_"),standalone:"ÑÑÑÐ´Ð·ÐµÐ½Ñ_Ð»ÑÑÑ_ÑÐ°ÐºÐ°Ð²ÑÐº_ÐºÑÐ°ÑÐ°Ð²ÑÐº_ÑÑÐ°Ð²ÐµÐ½Ñ_ÑÑÑÐ²ÐµÐ½Ñ_Ð»ÑÐ¿ÐµÐ½Ñ_Ð¶Ð½ÑÐ²ÐµÐ½Ñ_Ð²ÐµÑÐ°ÑÐµÐ½Ñ_ÐºÐ°ÑÑÑÑÑÐ½ÑÐº_Ð»ÑÑÑÐ°Ð¿Ð°Ð´_ÑÐ½ÐµÐ¶Ð°Ð½Ñ".split("_")},monthsShort:"ÑÑÑÐ´_Ð»ÑÑ_ÑÐ°Ðº_ÐºÑÐ°Ñ_ÑÑÐ°Ð²_ÑÑÑÐ²_Ð»ÑÐ¿_Ð¶Ð½ÑÐ²_Ð²ÐµÑ_ÐºÐ°ÑÑ_Ð»ÑÑÑ_ÑÐ½ÐµÐ¶".split("_"),weekdays:{format:"Ð½ÑÐ´Ð·ÐµÐ»Ñ_Ð¿Ð°Ð½ÑÐ´Ð·ÐµÐ»Ð°Ðº_Ð°ÑÑÐ¾ÑÐ°Ðº_ÑÐµÑÐ°Ð´Ñ_ÑÐ°ÑÐ²ÐµÑ_Ð¿ÑÑÐ½ÑÑÑ_ÑÑÐ±Ð¾ÑÑ".split("_"),standalone:"Ð½ÑÐ´Ð·ÐµÐ»Ñ_Ð¿Ð°Ð½ÑÐ´Ð·ÐµÐ»Ð°Ðº_Ð°ÑÑÐ¾ÑÐ°Ðº_ÑÐµÑÐ°Ð´Ð°_ÑÐ°ÑÐ²ÐµÑ_Ð¿ÑÑÐ½ÑÑÐ°_ÑÑÐ±Ð¾ÑÐ°".split("_"),isFormat:/\[ ?[ÐÐ²] ?(?:Ð¼ÑÐ½ÑÐ»ÑÑ|Ð½Ð°ÑÑÑÐ¿Ð½ÑÑ)? ?\] ?dddd/},weekdaysShort:"Ð½Ð´_Ð¿Ð½_Ð°Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),weekdaysMin:"Ð½Ð´_Ð¿Ð½_Ð°Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY Ð³.",LLL:"D MMMM YYYY Ð³., HH:mm",LLLL:"dddd, D MMMM YYYY Ð³., HH:mm"},calendar:{sameDay:"[Ð¡ÑÐ½Ð½Ñ Ñ] LT",nextDay:"[ÐÐ°ÑÑÑÐ° Ñ] LT",lastDay:"[Ð£ÑÐ¾ÑÐ° Ñ] LT",nextWeek:function(){return"[Ð£] dddd [Ñ] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[Ð£ Ð¼ÑÐ½ÑÐ»ÑÑ] dddd [Ñ] LT";case 1:case 2:case 4:return"[Ð£ Ð¼ÑÐ½ÑÐ»Ñ] dddd [Ñ] LT"}},sameElse:"L"},relativeTime:{future:"Ð¿ÑÐ°Ð· %s",past:"%s ÑÐ°Ð¼Ñ",s:"Ð½ÐµÐºÐ°Ð»ÑÐºÑ ÑÐµÐºÑÐ½Ð´",m:pd,mm:pd,h:pd,hh:pd,d:"Ð´Ð·ÐµÐ½Ñ",dd:pd,M:"Ð¼ÐµÑÑÑ",MM:pd,y:"Ð³Ð¾Ð´",yy:pd},meridiemParse:/Ð½Ð¾ÑÑ|ÑÐ°Ð½ÑÑÑ|Ð´Ð½Ñ|Ð²ÐµÑÐ°ÑÐ°/,isPM:function(a){return/^(Ð´Ð½Ñ|Ð²ÐµÑÐ°ÑÐ°)$/.test(a)},meridiem:function(a,b,c){return a<4?"Ð½Ð¾ÑÑ":a<12?"ÑÐ°Ð½ÑÑÑ":a<17?"Ð´Ð½Ñ":"Ð²ÐµÑÐ°ÑÐ°"},ordinalParse:/\d{1,2}-(Ñ|Ñ|Ð³Ð°)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":case"w":case"W":return a%10!==2&&a%10!==3||a%100===12||a%100===13?a+"-Ñ":a+"-Ñ";case"D":return a+"-Ð³Ð°";default:return a}},week:{dow:1,doy:7}}),a.defineLocale("bg-x",{parentLocale:"bg"}),a.defineLocale("bg",{months:"ÑÐ½ÑÐ°ÑÐ¸_ÑÐµÐ²ÑÑÐ°ÑÐ¸_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐ¸Ð»_Ð¼Ð°Ð¹_ÑÐ½Ð¸_ÑÐ»Ð¸_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ¿ÑÐµÐ¼Ð²ÑÐ¸_Ð¾ÐºÑÐ¾Ð¼Ð²ÑÐ¸_Ð½Ð¾ÐµÐ¼Ð²ÑÐ¸_Ð´ÐµÐºÐµÐ¼Ð²ÑÐ¸".split("_"),monthsShort:"ÑÐ½Ñ_ÑÐµÐ²_Ð¼Ð°Ñ_Ð°Ð¿Ñ_Ð¼Ð°Ð¹_ÑÐ½Ð¸_ÑÐ»Ð¸_Ð°Ð²Ð³_ÑÐµÐ¿_Ð¾ÐºÑ_Ð½Ð¾Ðµ_Ð´ÐµÐº".split("_"),weekdays:"Ð½ÐµÐ´ÐµÐ»Ñ_Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»Ð½Ð¸Ðº_Ð²ÑÐ¾ÑÐ½Ð¸Ðº_ÑÑÑÐ´Ð°_ÑÐµÑÐ²ÑÑÑÑÐº_Ð¿ÐµÑÑÐº_ÑÑÐ±Ð¾ÑÐ°".split("_"),weekdaysShort:"Ð½ÐµÐ´_Ð¿Ð¾Ð½_Ð²ÑÐ¾_ÑÑÑ_ÑÐµÑ_Ð¿ÐµÑ_ÑÑÐ±".split("_"),weekdaysMin:"Ð½Ð´_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ÐÐ½ÐµÑ Ð²] LT",nextDay:"[Ð£ÑÑÐµ Ð²] LT",nextWeek:"dddd [Ð²] LT",lastDay:"[ÐÑÐµÑÐ° Ð²] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Ð Ð¸Ð·Ð¼Ð¸Ð½Ð°Ð»Ð°ÑÐ°] dddd [Ð²] LT";case 1:case 2:case 4:case 5:return"[Ð Ð¸Ð·Ð¼Ð¸Ð½Ð°Ð»Ð¸Ñ] dddd [Ð²] LT"}},sameElse:"L"},relativeTime:{future:"ÑÐ»ÐµÐ´ %s",past:"Ð¿ÑÐµÐ´Ð¸ %s",s:"Ð½ÑÐºÐ¾Ð»ÐºÐ¾ ÑÐµÐºÑÐ½Ð´Ð¸",m:"Ð¼Ð¸Ð½ÑÑÐ°",mm:"%d Ð¼Ð¸Ð½ÑÑÐ¸",h:"ÑÐ°Ñ",hh:"%d ÑÐ°ÑÐ°",d:"Ð´ÐµÐ½",dd:"%d Ð´Ð½Ð¸",M:"Ð¼ÐµÑÐµÑ",MM:"%d Ð¼ÐµÑÐµÑÐ°",y:"Ð³Ð¾Ð´Ð¸Ð½Ð°",yy:"%d Ð³Ð¾Ð´Ð¸Ð½Ð¸"},ordinalParse:/\d{1,2}-(ÐµÐ²|ÐµÐ½|ÑÐ¸|Ð²Ð¸|ÑÐ¸|Ð¼Ð¸)/,ordinal:function(a){var b=a%10,c=a%100;return 0===a?a+"-ÐµÐ²":0===c?a+"-ÐµÐ½":c>10&&c<20?a+"-ÑÐ¸":1===b?a+"-Ð²Ð¸":2===b?a+"-ÑÐ¸":7===b||8===b?a+"-Ð¼Ð¸":a+"-ÑÐ¸"},week:{dow:1,doy:7}});var Dg={1:"à§§",2:"à§¨",3:"à§©",4:"à§ª",5:"à§«",6:"à§¬",7:"à§­",8:"à§®",9:"à§¯",0:"à§¦"},Eg={"à§§":"1","à§¨":"2","à§©":"3","à§ª":"4","à§«":"5","à§¬":"6","à§­":"7","à§®":"8","à§¯":"9","à§¦":"0"};a.defineLocale("bn",{months:"à¦à¦¾à¦¨à§à§à¦¾à¦°à§_à¦«à§à¦¬à§à¦°à§à§à¦¾à¦°à¦¿_à¦®à¦¾à¦°à§à¦_à¦à¦ªà§à¦°à¦¿à¦²_à¦®à§_à¦à§à¦¨_à¦à§à¦²à¦¾à¦_à¦à¦à¦¸à§à¦_à¦¸à§à¦ªà§à¦à§à¦®à§à¦¬à¦°_à¦à¦à§à¦à§à¦¬à¦°_à¦¨à¦­à§à¦®à§à¦¬à¦°_à¦¡à¦¿à¦¸à§à¦®à§à¦¬à¦°".split("_"),monthsShort:"à¦à¦¾à¦¨à§_à¦«à§à¦¬_à¦®à¦¾à¦°à§à¦_à¦à¦ªà§à¦°_à¦®à§_à¦à§à¦¨_à¦à§à¦²_à¦à¦_à¦¸à§à¦ªà§à¦_à¦à¦à§à¦à§_à¦¨à¦­à§_à¦¡à¦¿à¦¸à§".split("_"),weekdays:"à¦°à¦¬à¦¿à¦¬à¦¾à¦°_à¦¸à§à¦®à¦¬à¦¾à¦°_à¦®à¦à§à¦à¦²à¦¬à¦¾à¦°_à¦¬à§à¦§à¦¬à¦¾à¦°_à¦¬à§à¦¹à¦¸à§à¦ªà¦¤à¦¿à¦¬à¦¾à¦°_à¦¶à§à¦à§à¦°à¦¬à¦¾à¦°_à¦¶à¦¨à¦¿à¦¬à¦¾à¦°".split("_"),weekdaysShort:"à¦°à¦¬à¦¿_à¦¸à§à¦®_à¦®à¦à§à¦à¦²_à¦¬à§à¦§_à¦¬à§à¦¹à¦¸à§à¦ªà¦¤à¦¿_à¦¶à§à¦à§à¦°_à¦¶à¦¨à¦¿".split("_"),weekdaysMin:"à¦°à¦¬à¦¿_à¦¸à§à¦®_à¦®à¦à§à¦_à¦¬à§à¦§_à¦¬à§à¦¹à¦_à¦¶à§à¦à§à¦°_à¦¶à¦¨à¦¿".split("_"),longDateFormat:{LT:"A h:mm à¦¸à¦®à§",LTS:"A h:mm:ss à¦¸à¦®à§",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm à¦¸à¦®à§",LLLL:"dddd, D MMMM YYYY, A h:mm à¦¸à¦®à§"},calendar:{sameDay:"[à¦à¦] LT",nextDay:"[à¦à¦à¦¾à¦®à§à¦à¦¾à¦²] LT",nextWeek:"dddd, LT",lastDay:"[à¦à¦¤à¦à¦¾à¦²] LT",lastWeek:"[à¦à¦¤] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à¦ªà¦°à§",past:"%s à¦à¦à§",s:"à¦à§à§à¦ à¦¸à§à¦à§à¦¨à§à¦¡",m:"à¦à¦ à¦®à¦¿à¦¨à¦¿à¦",mm:"%d à¦®à¦¿à¦¨à¦¿à¦",h:"à¦à¦ à¦à¦¨à§à¦à¦¾",hh:"%d à¦à¦¨à§à¦à¦¾",d:"à¦à¦ à¦¦à¦¿à¦¨",dd:"%d à¦¦à¦¿à¦¨",M:"à¦à¦ à¦®à¦¾à¦¸",MM:"%d à¦®à¦¾à¦¸",y:"à¦à¦ à¦¬à¦à¦°",yy:"%d à¦¬à¦à¦°"},preparse:function(a){return a.replace(/[à§§à§¨à§©à§ªà§«à§¬à§­à§®à§¯à§¦]/g,function(a){return Eg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Dg[a]})},meridiemParse:/à¦°à¦¾à¦¤|à¦¸à¦à¦¾à¦²|à¦¦à§à¦ªà§à¦°|à¦¬à¦¿à¦à¦¾à¦²|à¦°à¦¾à¦¤/,meridiemHour:function(a,b){return 12===a&&(a=0),"à¦°à¦¾à¦¤"===b&&a>=4||"à¦¦à§à¦ªà§à¦°"===b&&a<5||"à¦¬à¦¿à¦à¦¾à¦²"===b?a+12:a},meridiem:function(a,b,c){return a<4?"à¦°à¦¾à¦¤":a<10?"à¦¸à¦à¦¾à¦²":a<17?"à¦¦à§à¦ªà§à¦°":a<20?"à¦¬à¦¿à¦à¦¾à¦²":"à¦°à¦¾à¦¤"},week:{dow:0,doy:6}});var Fg={1:"à¼¡",2:"à¼¢",3:"à¼£",4:"à¼¤",5:"à¼¥",6:"à¼¦",7:"à¼§",8:"à¼¨",9:"à¼©",0:"à¼ "},Gg={"à¼¡":"1","à¼¢":"2","à¼£":"3","à¼¤":"4","à¼¥":"5","à¼¦":"6","à¼§":"7","à¼¨":"8","à¼©":"9","à¼ ":"0"};a.defineLocale("bo",{months:"à½à¾³à¼à½à¼à½à½à¼à½à½¼_à½à¾³à¼à½à¼à½à½à½²à½¦à¼à½_à½à¾³à¼à½à¼à½à½¦à½´à½à¼à½_à½à¾³à¼à½à¼à½à½à½²à¼à½_à½à¾³à¼à½à¼à½£à¾à¼à½_à½à¾³à¼à½à¼à½à¾²à½´à½à¼à½_à½à¾³à¼à½à¼à½à½à½´à½à¼à½_à½à¾³à¼à½à¼à½à½¢à¾à¾±à½à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½à½à½²à½à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½à½à½²à½¦à¼à½".split("_"),monthsShort:"à½à¾³à¼à½à¼à½à½à¼à½à½¼_à½à¾³à¼à½à¼à½à½à½²à½¦à¼à½_à½à¾³à¼à½à¼à½à½¦à½´à½à¼à½_à½à¾³à¼à½à¼à½à½à½²à¼à½_à½à¾³à¼à½à¼à½£à¾à¼à½_à½à¾³à¼à½à¼à½à¾²à½´à½à¼à½_à½à¾³à¼à½à¼à½à½à½´à½à¼à½_à½à¾³à¼à½à¼à½à½¢à¾à¾±à½à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½à½à½²à½à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½à½à½²à½¦à¼à½".split("_"),weekdays:"à½à½à½ à¼à½à½²à¼à½à¼_à½à½à½ à¼à½à¾³à¼à½à¼_à½à½à½ à¼à½à½²à½à¼à½à½à½¢à¼_à½à½à½ à¼à½£à¾·à½à¼à½à¼_à½à½à½ à¼à½à½´à½¢à¼à½à½´_à½à½à½ à¼à½à¼à½¦à½à½¦à¼_à½à½à½ à¼à½¦à¾¤à½ºà½à¼à½à¼".split("_"),weekdaysShort:"à½à½²à¼à½à¼_à½à¾³à¼à½à¼_à½à½²à½à¼à½à½à½¢à¼_à½£à¾·à½à¼à½à¼_à½à½´à½¢à¼à½à½´_à½à¼à½¦à½à½¦à¼_à½¦à¾¤à½ºà½à¼à½à¼".split("_"),weekdaysMin:"à½à½²à¼à½à¼_à½à¾³à¼à½à¼_à½à½²à½à¼à½à½à½¢à¼_à½£à¾·à½à¼à½à¼_à½à½´à½¢à¼à½à½´_à½à¼à½¦à½à½¦à¼_à½¦à¾¤à½ºà½à¼à½à¼".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[à½à½²à¼à½¢à½²à½] LT",nextDay:"[à½¦à½à¼à½à½²à½] LT",nextWeek:"[à½à½à½´à½à¼à½à¾²à½à¼à½¢à¾à½ºà½¦à¼à½], LT",lastDay:"[à½à¼à½¦à½] LT",lastWeek:"[à½à½à½´à½à¼à½à¾²à½à¼à½à½à½ à¼à½] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à½£à¼",past:"%s à½¦à¾à½à¼à½£",s:"à½£à½à¼à½¦à½",m:"à½¦à¾à½¢à¼à½à¼à½à½à½²à½",mm:"%d à½¦à¾à½¢à¼à½",h:"à½à½´à¼à½à½¼à½à¼à½à½à½²à½",hh:"%d à½à½´à¼à½à½¼à½",d:"à½à½²à½à¼à½à½à½²à½",dd:"%d à½à½²à½à¼",M:"à½à¾³à¼à½à¼à½à½à½²à½",MM:"%d à½à¾³à¼à½",y:"à½£à½¼à¼à½à½à½²à½",yy:"%d à½£à½¼"},preparse:function(a){return a.replace(/[à¼¡à¼¢à¼£à¼¤à¼¥à¼¦à¼§à¼¨à¼©à¼ ]/g,function(a){return Gg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Fg[a]})},meridiemParse:/à½à½à½à¼à½à½¼|à½à½¼à½à½¦à¼à½à½¦|à½à½²à½à¼à½à½´à½|à½à½à½¼à½à¼à½à½|à½à½à½à¼à½à½¼/,meridiemHour:function(a,b){return 12===a&&(a=0),"à½à½à½à¼à½à½¼"===b&&a>=4||"à½à½²à½à¼à½à½´à½"===b&&a<5||"à½à½à½¼à½à¼à½à½"===b?a+12:a},meridiem:function(a,b,c){return a<4?"à½à½à½à¼à½à½¼":a<10?"à½à½¼à½à½¦à¼à½à½¦":a<17?"à½à½²à½à¼à½à½´à½":a<20?"à½à½à½¼à½à¼à½à½":"à½à½à½à¼à½à½¼"},week:{dow:0,doy:6}}),a.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoÃ¹",m:"ur vunutenn",mm:qd,h:"un eur",hh:"%d eur",d:"un devezh",dd:qd,M:"ur miz",MM:qd,y:"ur bloaz",yy:rd},ordinalParse:/\d{1,2}(aÃ±|vet)/,ordinal:function(a){var b=1===a?"aÃ±":"vet";return a+b},week:{dow:1,doy:4}}),a.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_Äetvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._Äet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_Äe_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juÄer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[proÅ¡lu] dddd [u] LT";case 6:return"[proÅ¡le] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proÅ¡li] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:vd,mm:vd,h:vd,hh:vd,d:"dan",dd:vd,M:"mjesec",MM:vd,y:"godinu",yy:vd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),a.defineLocale("ca",{months:"gener_febrer_marÃ§_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demÃ  a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t|Ã¨|a)/,ordinal:function(a,b){var c=1===a?"r":2===a?"n":3===a?"r":4===a?"t":"Ã¨";return"w"!==b&&"W"!==b||(c="a"),a+c},week:{dow:1,doy:4}});var Hg="leden_Ãºnor_bÅezen_duben_kvÄten_Äerven_Äervenec_srpen_zÃ¡ÅÃ­_ÅÃ­jen_listopad_prosinec".split("_"),Ig="led_Ãºno_bÅe_dub_kvÄ_Ävn_Ävc_srp_zÃ¡Å_ÅÃ­j_lis_pro".split("_");a.defineLocale("cs",{months:Hg,monthsShort:Ig,monthsParse:function(a,b){var c,d=[];for(c=0;c<12;c++)d[c]=new RegExp("^"+a[c]+"$|^"+b[c]+"$","i");return d}(Hg,Ig),shortMonthsParse:function(a){var b,c=[];for(b=0;b<12;b++)c[b]=new RegExp("^"+a[b]+"$","i");return c}(Ig),longMonthsParse:function(a){var b,c=[];for(b=0;b<12;b++)c[b]=new RegExp("^"+a[b]+"$","i");return c}(Hg),weekdays:"nedÄle_pondÄlÃ­_ÃºterÃ½_stÅeda_Ätvrtek_pÃ¡tek_sobota".split("_"),weekdaysShort:"ne_po_Ãºt_st_Ät_pÃ¡_so".split("_"),weekdaysMin:"ne_po_Ãºt_st_Ät_pÃ¡_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zÃ­tra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedÄli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stÅedu v] LT";case 4:return"[ve Ätvrtek v] LT";case 5:return"[v pÃ¡tek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vÄera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedÄli v] LT";case 1:case 2:return"[minulÃ©] dddd [v] LT";case 3:return"[minulou stÅedu v] LT";case 4:case 5:return"[minulÃ½] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pÅed %s",s:xd,m:xd,mm:xd,h:xd,hh:xd,d:xd,dd:xd,M:xd,MM:xd,y:xd,yy:xd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),a.defineLocale("cv",{months:"ÐºÓÑÐ»Ð°Ñ_Ð½Ð°ÑÓÑ_Ð¿ÑÑ_Ð°ÐºÐ°_Ð¼Ð°Ð¹_Ò«ÓÑÑÐ¼Ðµ_ÑÑÓ_Ò«ÑÑÐ»Ð°_Ð°Ð²ÓÐ½_ÑÐ¿Ð°_ÑÓ³Ðº_ÑÐ°ÑÑÐ°Ð²".split("_"),monthsShort:"ÐºÓÑ_Ð½Ð°Ñ_Ð¿ÑÑ_Ð°ÐºÐ°_Ð¼Ð°Ð¹_Ò«ÓÑ_ÑÑÓ_Ò«ÑÑ_Ð°Ð²Ð½_ÑÐ¿Ð°_ÑÓ³Ðº_ÑÐ°Ñ".split("_"),weekdays:"Ð²ÑÑÑÐ°ÑÐ½Ð¸ÐºÑÐ½_ÑÑÐ½ÑÐ¸ÐºÑÐ½_ÑÑÐ»Ð°ÑÐ¸ÐºÑÐ½_ÑÐ½ÐºÑÐ½_ÐºÓÒ«Ð½ÐµÑÐ½Ð¸ÐºÑÐ½_ÑÑÐ½ÐµÐºÑÐ½_ÑÓÐ¼Ð°ÑÐºÑÐ½".split("_"),weekdaysShort:"Ð²ÑÑ_ÑÑÐ½_ÑÑÐ»_ÑÐ½_ÐºÓÒ«_ÑÑÐ½_ÑÓÐ¼".split("_"),weekdaysMin:"Ð²Ñ_ÑÐ½_ÑÑ_ÑÐ½_ÐºÒ«_ÑÑ_ÑÐ¼".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [Ò«ÑÐ»ÑÐ¸] MMMM [ÑÐ¹ÓÑÓÐ½] D[-Ð¼ÓÑÓ]",LLL:"YYYY [Ò«ÑÐ»ÑÐ¸] MMMM [ÑÐ¹ÓÑÓÐ½] D[-Ð¼ÓÑÓ], HH:mm",LLLL:"dddd, YYYY [Ò«ÑÐ»ÑÐ¸] MMMM [ÑÐ¹ÓÑÓÐ½] D[-Ð¼ÓÑÓ], HH:mm"},calendar:{sameDay:"[ÐÐ°ÑÐ½] LT [ÑÐµÑÐµÑÑÐµ]",nextDay:"[Ð«ÑÐ°Ð½] LT [ÑÐµÑÐµÑÑÐµ]",lastDay:"[ÓÐ½ÐµÑ] LT [ÑÐµÑÐµÑÑÐµ]",nextWeek:"[ÒªÐ¸ÑÐµÑ] dddd LT [ÑÐµÑÐµÑÑÐµ]",lastWeek:"[ÐÑÑÐ½Ó] dddd LT [ÑÐµÑÐµÑÑÐµ]",sameElse:"L"},relativeTime:{future:function(a){var b=/ÑÐµÑÐµÑ$/i.exec(a)?"ÑÐµÐ½":/Ò«ÑÐ»$/i.exec(a)?"ÑÐ°Ð½":"ÑÐ°Ð½";return a+b},past:"%s ÐºÐ°ÑÐ»Ð»Ð°",s:"Ð¿ÓÑ-Ð¸Ðº Ò«ÐµÐºÐºÑÐ½Ñ",m:"Ð¿ÓÑ Ð¼Ð¸Ð½ÑÑ",mm:"%d Ð¼Ð¸Ð½ÑÑ",h:"Ð¿ÓÑ ÑÐµÑÐµÑ",hh:"%d ÑÐµÑÐµÑ",d:"Ð¿ÓÑ ÐºÑÐ½",dd:"%d ÐºÑÐ½",M:"Ð¿ÓÑ ÑÐ¹ÓÑ",MM:"%d ÑÐ¹ÓÑ",y:"Ð¿ÓÑ Ò«ÑÐ»",yy:"%d Ò«ÑÐ»"},ordinalParse:/\d{1,2}-Ð¼ÓÑ/,ordinal:"%d-Ð¼ÓÑ",week:{dow:1,doy:7}}),a.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn Ã´l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(a){var b=a,c="",d=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return b>20?c=40===b||50===b||60===b||80===b||100===b?"fed":"ain":b>0&&(c=d[b]),a+c},week:{dow:1,doy:4}}),a.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sÃ¸ndag_mandag_tirsdag_onsdag_torsdag_fredag_lÃ¸rdag".split("_"),weekdaysShort:"sÃ¸n_man_tir_ons_tor_fre_lÃ¸r".split("_"),weekdaysMin:"sÃ¸_ma_ti_on_to_fr_lÃ¸".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gÃ¥r kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"fÃ¥ sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mÃ¥ned",MM:"%d mÃ¥neder",y:"et Ã¥r",yy:"%d Ã¥r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),a.defineLocale("de-at",{months:"JÃ¤nner_Februar_MÃ¤rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"JÃ¤n._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",
nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:yd,mm:"%d Minuten",h:yd,hh:"%d Stunden",d:yd,dd:yd,M:yd,MM:yd,y:yd,yy:yd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),a.defineLocale("de",{months:"Januar_Februar_MÃ¤rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:zd,mm:"%d Minuten",h:zd,hh:"%d Stunden",d:zd,dd:zd,M:zd,MM:zd,y:zd,yy:zd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var Jg=["ÞÞ¬ÞÞªÞÞ¦ÞÞ©","ÞÞ¬ÞÞ°ÞÞªÞÞ¦ÞÞ©","ÞÞ§ÞÞ¨ÞÞª","ÞÞ­ÞÞ°ÞÞ©ÞÞª","ÞÞ­","ÞÞ«ÞÞ°","ÞÞªÞÞ¦ÞÞ¨","ÞÞ¯ÞÞ¦ÞÞ°ÞÞª","ÞÞ¬ÞÞ°ÞÞ¬ÞÞ°ÞÞ¦ÞÞª","ÞÞ®ÞÞ°ÞÞ¯ÞÞ¦ÞÞª","ÞÞ®ÞÞ¬ÞÞ°ÞÞ¦ÞÞª","ÞÞ¨ÞÞ¬ÞÞ°ÞÞ¦ÞÞª"],Kg=["ÞÞ§ÞÞ¨ÞÞ°ÞÞ¦","ÞÞ¯ÞÞ¦","ÞÞ¦ÞÞ°ÞÞ§ÞÞ¦","ÞÞªÞÞ¦","ÞÞªÞÞ§ÞÞ°ÞÞ¦ÞÞ¨","ÞÞªÞÞªÞÞª","ÞÞ®ÞÞ¨ÞÞ¨ÞÞª"];a.defineLocale("dv",{months:Jg,monthsShort:Jg,weekdays:Kg,weekdaysShort:Kg,weekdaysMin:"ÞÞ§ÞÞ¨_ÞÞ¯ÞÞ¦_ÞÞ¦ÞÞ°_ÞÞªÞÞ¦_ÞÞªÞÞ§_ÞÞªÞÞª_ÞÞ®ÞÞ¨".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ÞÞ|ÞÞ/,isPM:function(a){return"ÞÞ"===a},meridiem:function(a,b,c){return a<12?"ÞÞ":"ÞÞ"},calendar:{sameDay:"[ÞÞ¨ÞÞ¦ÞÞª] LT",nextDay:"[ÞÞ§ÞÞ¦ÞÞ§] LT",nextWeek:"dddd LT",lastDay:"[ÞÞ¨ÞÞ°ÞÞ¬] LT",lastWeek:"[ÞÞ§ÞÞ¨ÞÞªÞÞ¨] dddd LT",sameElse:"L"},relativeTime:{future:"ÞÞ¬ÞÞ­ÞÞ¦ÞÞ¨ %s",past:"ÞÞªÞÞ¨ÞÞ° %s",s:"ÞÞ¨ÞÞªÞÞ°ÞÞªÞÞ®ÞÞ¬ÞÞ°",m:"ÞÞ¨ÞÞ¨ÞÞ¬ÞÞ°",mm:"ÞÞ¨ÞÞ¨ÞÞª %d",h:"ÞÞ¦ÞÞ¨ÞÞ¨ÞÞ¬ÞÞ°",hh:"ÞÞ¦ÞÞ¨ÞÞ¨ÞÞª %d",d:"ÞÞªÞÞ¦ÞÞ¬ÞÞ°",dd:"ÞÞªÞÞ¦ÞÞ° %d",M:"ÞÞ¦ÞÞ¬ÞÞ°",MM:"ÞÞ¦ÞÞ° %d",y:"ÞÞ¦ÞÞ¦ÞÞ¬ÞÞ°",yy:"ÞÞ¦ÞÞ¦ÞÞª %d"},preparse:function(a){return a.replace(/Ø/g,",")},postformat:function(a){return a.replace(/,/g,"Ø")},week:{dow:7,doy:12}}),a.defineLocale("el",{monthsNominativeEl:"ÎÎ±Î½Î¿ÏÎ¬ÏÎ¹Î¿Ï_Î¦ÎµÎ²ÏÎ¿ÏÎ¬ÏÎ¹Î¿Ï_ÎÎ¬ÏÏÎ¹Î¿Ï_ÎÏÏÎ¯Î»Î¹Î¿Ï_ÎÎ¬Î¹Î¿Ï_ÎÎ¿ÏÎ½Î¹Î¿Ï_ÎÎ¿ÏÎ»Î¹Î¿Ï_ÎÏÎ³Î¿ÏÏÏÎ¿Ï_Î£ÎµÏÏÎ­Î¼Î²ÏÎ¹Î¿Ï_ÎÎºÏÏÎ²ÏÎ¹Î¿Ï_ÎÎ¿Î­Î¼Î²ÏÎ¹Î¿Ï_ÎÎµÎºÎ­Î¼Î²ÏÎ¹Î¿Ï".split("_"),monthsGenitiveEl:"ÎÎ±Î½Î¿ÏÎ±ÏÎ¯Î¿Ï_Î¦ÎµÎ²ÏÎ¿ÏÎ±ÏÎ¯Î¿Ï_ÎÎ±ÏÏÎ¯Î¿Ï_ÎÏÏÎ¹Î»Î¯Î¿Ï_ÎÎ±ÎÎ¿Ï_ÎÎ¿ÏÎ½Î¯Î¿Ï_ÎÎ¿ÏÎ»Î¯Î¿Ï_ÎÏÎ³Î¿ÏÏÏÎ¿Ï_Î£ÎµÏÏÎµÎ¼Î²ÏÎ¯Î¿Ï_ÎÎºÏÏÎ²ÏÎ¯Î¿Ï_ÎÎ¿ÎµÎ¼Î²ÏÎ¯Î¿Ï_ÎÎµÎºÎµÎ¼Î²ÏÎ¯Î¿Ï".split("_"),months:function(a,b){return/D/.test(b.substring(0,b.indexOf("MMMM")))?this._monthsGenitiveEl[a.month()]:this._monthsNominativeEl[a.month()]},monthsShort:"ÎÎ±Î½_Î¦ÎµÎ²_ÎÎ±Ï_ÎÏÏ_ÎÎ±Ï_ÎÎ¿ÏÎ½_ÎÎ¿ÏÎ»_ÎÏÎ³_Î£ÎµÏ_ÎÎºÏ_ÎÎ¿Îµ_ÎÎµÎº".split("_"),weekdays:"ÎÏÏÎ¹Î±ÎºÎ®_ÎÎµÏÏÎ­ÏÎ±_Î¤ÏÎ¯ÏÎ·_Î¤ÎµÏÎ¬ÏÏÎ·_Î Î­Î¼ÏÏÎ·_Î Î±ÏÎ±ÏÎºÎµÏÎ®_Î£Î¬Î²Î²Î±ÏÎ¿".split("_"),weekdaysShort:"ÎÏÏ_ÎÎµÏ_Î¤ÏÎ¹_Î¤ÎµÏ_Î ÎµÎ¼_Î Î±Ï_Î£Î±Î²".split("_"),weekdaysMin:"ÎÏ_ÎÎµ_Î¤Ï_Î¤Îµ_Î Îµ_Î Î±_Î£Î±".split("_"),meridiem:function(a,b,c){return a>11?c?"Î¼Î¼":"ÎÎ":c?"ÏÎ¼":"Î Î"},isPM:function(a){return"Î¼"===(a+"").toLowerCase()[0]},meridiemParse:/[Î Î]\.?Î?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Î£Î®Î¼ÎµÏÎ± {}] LT",nextDay:"[ÎÏÏÎ¹Î¿ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Î§Î¸ÎµÏ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ÏÎ¿ ÏÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿] dddd [{}] LT";default:return"[ÏÎ·Î½ ÏÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î·] dddd [{}] LT"}},sameElse:"L"},calendar:function(a,b){var c=this._calendarEl[a],d=b&&b.hours();return z(c)&&(c=c.apply(b)),c.replace("{}",d%12===1?"ÏÏÎ·":"ÏÏÎ¹Ï")},relativeTime:{future:"ÏÎµ %s",past:"%s ÏÏÎ¹Î½",s:"Î»Î¯Î³Î± Î´ÎµÏÏÎµÏÏÎ»ÎµÏÏÎ±",m:"Î­Î½Î± Î»ÎµÏÏÏ",mm:"%d Î»ÎµÏÏÎ¬",h:"Î¼Î¯Î± ÏÏÎ±",hh:"%d ÏÏÎµÏ",d:"Î¼Î¯Î± Î¼Î­ÏÎ±",dd:"%d Î¼Î­ÏÎµÏ",M:"Î­Î½Î±Ï Î¼Î®Î½Î±Ï",MM:"%d Î¼Î®Î½ÎµÏ",y:"Î­Î½Î±Ï ÏÏÏÎ½Î¿Ï",yy:"%d ÏÏÏÎ½Î¹Î±"},ordinalParse:/\d{1,2}Î·/,ordinal:"%dÎ·",week:{dow:1,doy:4}}),a.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),a.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),a.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),a.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),a.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aÅ­gusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aÅ­g_sep_okt_nov_dec".split("_"),weekdays:"DimanÄo_Lundo_Mardo_Merkredo_Ä´aÅ­do_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_Ä´aÅ­_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Ä´a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-an de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(a){return"p"===a.charAt(0).toLowerCase()},meridiem:function(a,b,c){return a>11?c?"p.t.m.":"P.T.M.":c?"a.t.m.":"A.T.M."},calendar:{sameDay:"[HodiaÅ­ je] LT",nextDay:"[MorgaÅ­ je] LT",nextWeek:"dddd [je] LT",lastDay:"[HieraÅ­ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"antaÅ­ %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}});var Lg="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),Mg="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");a.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?Mg[a.month()]:Lg[a.month()]},monthsParseExact:!0,weekdays:"domingo_lunes_martes_miÃ©rcoles_jueves_viernes_sÃ¡bado".split("_"),weekdaysShort:"dom._lun._mar._miÃ©._jue._vie._sÃ¡b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sÃ¡".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maÃ±ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un dÃ­a",dd:"%d dÃ­as",M:"un mes",MM:"%d meses",y:"un aÃ±o",yy:"%d aÃ±os"},ordinalParse:/\d{1,2}Âº/,ordinal:"%dÂº",week:{dow:1,doy:4}});var Ng="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),Og="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");a.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?Og[a.month()]:Ng[a.month()]},monthsParseExact:!0,weekdays:"domingo_lunes_martes_miÃ©rcoles_jueves_viernes_sÃ¡bado".split("_"),weekdaysShort:"dom._lun._mar._miÃ©._jue._vie._sÃ¡b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sÃ¡".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maÃ±ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un dÃ­a",dd:"%d dÃ­as",M:"un mes",MM:"%d meses",y:"un aÃ±o",yy:"%d aÃ±os"},ordinalParse:/\d{1,2}Âº/,ordinal:"%dÂº",week:{dow:1,doy:4}}),a.defineLocale("et",{months:"jaanuar_veebruar_mÃ¤rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mÃ¤rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pÃ¼hapÃ¤ev_esmaspÃ¤ev_teisipÃ¤ev_kolmapÃ¤ev_neljapÃ¤ev_reede_laupÃ¤ev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[TÃ¤na,] LT",nextDay:"[Homme,] LT",nextWeek:"[JÃ¤rgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pÃ¤rast",past:"%s tagasi",s:Ad,m:Ad,mm:Ad,h:Ad,hh:Ad,d:Ad,dd:"%d pÃ¤eva",M:Ad,MM:Ad,y:Ad,yy:Ad},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),a.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var Pg={1:"Û±",2:"Û²",3:"Û³",4:"Û´",5:"Ûµ",6:"Û¶",7:"Û·",8:"Û¸",9:"Û¹",0:"Û°"},Qg={"Û±":"1","Û²":"2","Û³":"3","Û´":"4","Ûµ":"5","Û¶":"6","Û·":"7","Û¸":"8","Û¹":"9","Û°":"0"};a.defineLocale("fa",{months:"ÚØ§ÙÙÛÙ_ÙÙØ±ÛÙ_ÙØ§Ø±Ø³_Ø¢ÙØ±ÛÙ_ÙÙ_ÚÙØ¦Ù_ÚÙØ¦ÛÙ_Ø§ÙØª_Ø³Ù¾ØªØ§ÙØ¨Ø±_Ø§Ú©ØªØ¨Ø±_ÙÙØ§ÙØ¨Ø±_Ø¯Ø³Ø§ÙØ¨Ø±".split("_"),monthsShort:"ÚØ§ÙÙÛÙ_ÙÙØ±ÛÙ_ÙØ§Ø±Ø³_Ø¢ÙØ±ÛÙ_ÙÙ_ÚÙØ¦Ù_ÚÙØ¦ÛÙ_Ø§ÙØª_Ø³Ù¾ØªØ§ÙØ¨Ø±_Ø§Ú©ØªØ¨Ø±_ÙÙØ§ÙØ¨Ø±_Ø¯Ø³Ø§ÙØ¨Ø±".split("_"),weekdays:"ÛÚ©âØ´ÙØ¨Ù_Ø¯ÙØ´ÙØ¨Ù_Ø³ÙâØ´ÙØ¨Ù_ÚÙØ§Ø±Ø´ÙØ¨Ù_Ù¾ÙØ¬âØ´ÙØ¨Ù_Ø¬ÙØ¹Ù_Ø´ÙØ¨Ù".split("_"),weekdaysShort:"ÛÚ©âØ´ÙØ¨Ù_Ø¯ÙØ´ÙØ¨Ù_Ø³ÙâØ´ÙØ¨Ù_ÚÙØ§Ø±Ø´ÙØ¨Ù_Ù¾ÙØ¬âØ´ÙØ¨Ù_Ø¬ÙØ¹Ù_Ø´ÙØ¨Ù".split("_"),weekdaysMin:"Û_Ø¯_Ø³_Ú_Ù¾_Ø¬_Ø´".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ÙØ¨Ù Ø§Ø² Ø¸ÙØ±|Ø¨Ø¹Ø¯ Ø§Ø² Ø¸ÙØ±/,isPM:function(a){return/Ø¨Ø¹Ø¯ Ø§Ø² Ø¸ÙØ±/.test(a)},meridiem:function(a,b,c){return a<12?"ÙØ¨Ù Ø§Ø² Ø¸ÙØ±":"Ø¨Ø¹Ø¯ Ø§Ø² Ø¸ÙØ±"},calendar:{sameDay:"[Ø§ÙØ±ÙØ² Ø³Ø§Ø¹Øª] LT",nextDay:"[ÙØ±Ø¯Ø§ Ø³Ø§Ø¹Øª] LT",nextWeek:"dddd [Ø³Ø§Ø¹Øª] LT",lastDay:"[Ø¯ÛØ±ÙØ² Ø³Ø§Ø¹Øª] LT",lastWeek:"dddd [Ù¾ÛØ´] [Ø³Ø§Ø¹Øª] LT",sameElse:"L"},relativeTime:{future:"Ø¯Ø± %s",past:"%s Ù¾ÛØ´",s:"ÚÙØ¯ÛÙ Ø«Ø§ÙÛÙ",m:"ÛÚ© Ø¯ÙÛÙÙ",mm:"%d Ø¯ÙÛÙÙ",h:"ÛÚ© Ø³Ø§Ø¹Øª",hh:"%d Ø³Ø§Ø¹Øª",d:"ÛÚ© Ø±ÙØ²",dd:"%d Ø±ÙØ²",M:"ÛÚ© ÙØ§Ù",MM:"%d ÙØ§Ù",y:"ÛÚ© Ø³Ø§Ù",yy:"%d Ø³Ø§Ù"},preparse:function(a){return a.replace(/[Û°-Û¹]/g,function(a){return Qg[a]}).replace(/Ø/g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return Pg[a]}).replace(/,/g,"Ø")},ordinalParse:/\d{1,2}Ù/,ordinal:"%dÙ",week:{dow:6,doy:12}});var Rg="nolla yksi kaksi kolme neljÃ¤ viisi kuusi seitsemÃ¤n kahdeksan yhdeksÃ¤n".split(" "),Sg=["nolla","yhden","kahden","kolmen","neljÃ¤n","viiden","kuuden",Rg[7],Rg[8],Rg[9]];a.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesÃ¤kuu_heinÃ¤kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesÃ¤_heinÃ¤_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tÃ¤nÃ¤Ã¤n] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pÃ¤Ã¤stÃ¤",past:"%s sitten",s:Bd,m:Bd,mm:Bd,h:Bd,hh:Bd,d:Bd,dd:Bd,M:Bd,MM:Bd,y:Bd,yy:Bd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),a.defineLocale("fo",{months:"januar_februar_mars_aprÃ­l_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mÃ¡nadagur_tÃ½sdagur_mikudagur_hÃ³sdagur_frÃ­ggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mÃ¡n_tÃ½s_mik_hÃ³s_frÃ­_ley".split("_"),weekdaysMin:"su_mÃ¡_tÃ½_mi_hÃ³_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Ã dag kl.] LT",nextDay:"[Ã morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Ã gjÃ¡r kl.] LT",lastWeek:"[sÃ­Ã°stu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sÃ­Ã°ani",s:"fÃ¡ sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tÃ­mi",hh:"%d tÃ­mar",d:"ein dagur",dd:"%d dagar",M:"ein mÃ¡naÃ°i",MM:"%d mÃ¡naÃ°ir",y:"eitt Ã¡r",yy:"%d Ã¡r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),a.defineLocale("fr-ca",{months:"janvier_fÃ©vrier_mars_avril_mai_juin_juillet_aoÃ»t_septembre_octobre_novembre_dÃ©cembre".split("_"),monthsShort:"janv._fÃ©vr._mars_avr._mai_juin_juil._aoÃ»t_sept._oct._nov._dÃ©c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui Ã ] LT",nextDay:"[Demain Ã ] LT",nextWeek:"dddd [Ã ] LT",lastDay:"[Hier Ã ] LT",lastWeek:"dddd [dernier Ã ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")}}),a.defineLocale("fr-ch",{months:"janvier_fÃ©vrier_mars_avril_mai_juin_juillet_aoÃ»t_septembre_octobre_novembre_dÃ©cembre".split("_"),monthsShort:"janv._fÃ©vr._mars_avr._mai_juin_juil._aoÃ»t_sept._oct._nov._dÃ©c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui Ã ] LT",nextDay:"[Demain Ã ] LT",nextWeek:"dddd [Ã ] LT",lastDay:"[Hier Ã ] LT",lastWeek:"dddd [dernier Ã ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")},week:{dow:1,doy:4}}),a.defineLocale("fr",{months:"janvier_fÃ©vrier_mars_avril_mai_juin_juillet_aoÃ»t_septembre_octobre_novembre_dÃ©cembre".split("_"),monthsShort:"janv._fÃ©vr._mars_avr._mai_juin_juil._aoÃ»t_sept._oct._nov._dÃ©c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui Ã ] LT",nextDay:"[Demain Ã ] LT",nextWeek:"dddd [Ã ] LT",lastDay:"[Hier Ã ] LT",lastWeek:"dddd [dernier Ã ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(a){return a+(1===a?"er":"")},week:{dow:1,doy:4}});var Tg="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),Ug="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");a.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?Ug[a.month()]:Tg[a.month()]},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[Ã´frÃ»ne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien minÃºt",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}});var Vg=["Am Faoilleach","An Gearran","Am MÃ rt","An Giblean","An CÃ¨itean","An t-Ãgmhios","An t-Iuchar","An LÃ¹nastal","An t-Sultain","An DÃ mhair","An t-Samhain","An DÃ¹bhlachd"],Wg=["Faoi","Gear","MÃ rt","Gibl","CÃ¨it","Ãgmh","Iuch","LÃ¹n","Sult","DÃ mh","Samh","DÃ¹bh"],Xg=["DidÃ²mhnaich","Diluain","DimÃ irt","Diciadain","Diardaoin","Dihaoine","Disathairne"],Yg=["Did","Dil","Dim","Dic","Dia","Dih","Dis"],Zg=["DÃ²","Lu","MÃ ","Ci","Ar","Ha","Sa"];a.defineLocale("gd",{months:Vg,monthsShort:Wg,monthsParseExact:!0,weekdays:Xg,weekdaysShort:Yg,weekdaysMin:Zg,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mÃ ireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-dÃ¨ aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mÃ¬os",MM:"%d mÃ¬osan",y:"bliadhna",yy:"%d bliadhna"},ordinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(a){var b=1===a?"d":a%10===2?"na":"mh";return a+b},week:{dow:1,doy:4}}),a.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuÃ±o_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xuÃ±._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mÃ©rcores_xoves_venres_sÃ¡bado".split("_"),weekdaysShort:"dom._lun._mar._mÃ©r._xov._ven._sÃ¡b.".split("_"),weekdaysMin:"do_lu_ma_mÃ©_xo_ve_sÃ¡".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"Ã¡s":"Ã¡")+"] LT"},nextDay:function(){return"[maÃ±Ã¡ "+(1!==this.hours()?"Ã¡s":"Ã¡")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"Ã¡s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"Ã¡":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"Ã¡s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(a){return 0===a.indexOf("un")?"n"+a:"en "+a},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un dÃ­a",dd:"%d dÃ­as",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}Âº/,ordinal:"%dÂº",week:{dow:1,doy:4}}),a.defineLocale("he",{months:"×× ×××¨_×¤××¨×××¨_××¨×¥_××¤×¨××_×××_××× ×_××××_×××××¡×_×¡×¤××××¨_×××§××××¨_× ×××××¨_××¦×××¨".split("_"),monthsShort:"×× ××³_×¤××¨×³_××¨×¥_××¤×¨×³_×××_××× ×_××××_××××³_×¡×¤××³_×××§×³_× ×××³_××¦××³".split("_"),weekdays:"×¨××©××_×©× ×_×©×××©×_×¨×××¢×_××××©×_×©××©×_×©××ª".split("_"),weekdaysShort:"××³_××³_××³_××³_××³_××³_×©×³".split("_"),weekdaysMin:"×_×_×_×_×_×_×©".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [×]MMMM YYYY",LLL:"D [×]MMMM YYYY HH:mm",LLLL:"dddd, D [×]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[×××× ×Ö¾]LT",nextDay:"[×××¨ ×Ö¾]LT",nextWeek:"dddd [××©×¢×] LT",lastDay:"[××ª××× ×Ö¾]LT",lastWeek:"[××××] dddd [××××¨×× ××©×¢×] LT",sameElse:"L"},relativeTime:{future:"××¢×× %s",past:"××¤× × %s",s:"××¡×¤×¨ ×©× ×××ª",m:"××§×",mm:"%d ××§××ª",h:"×©×¢×",hh:function(a){return 2===a?"×©×¢×ª×××":a+" ×©×¢××ª"},d:"×××",dd:function(a){return 2===a?"××××××":a+" ××××"},M:"××××©",MM:function(a){return 2===a?"××××©×××":a+" ××××©××"},y:"×©× ×",yy:function(a){return 2===a?"×©× ×ª×××":a%10===0&&10!==a?a+" ×©× ×":a+" ×©× ××"}},meridiemParse:/×××"×¦|××¤× ×"×¦|×××¨× ××¦××¨×××|××¤× × ××¦××¨×××|××¤× ××ª ×××§×¨|××××§×¨|××¢×¨×/i,isPM:function(a){return/^(×××"×¦|×××¨× ××¦××¨×××|××¢×¨×)$/.test(a)},meridiem:function(a,b,c){return a<5?"××¤× ××ª ×××§×¨":a<10?"××××§×¨":a<12?c?'××¤× ×"×¦':"××¤× × ××¦××¨×××":a<18?c?'×××"×¦':"×××¨× ××¦××¨×××":"××¢×¨×"}});var $g={1:"à¥§",2:"à¥¨",3:"à¥©",4:"à¥ª",5:"à¥«",6:"à¥¬",7:"à¥­",8:"à¥®",9:"à¥¯",0:"à¥¦"},_g={"à¥§":"1","à¥¨":"2","à¥©":"3","à¥ª":"4","à¥«":"5","à¥¬":"6","à¥­":"7","à¥®":"8","à¥¯":"9","à¥¦":"0"};a.defineLocale("hi",{months:"à¤à¤¨à¤µà¤°à¥_à¤«à¤¼à¤°à¤µà¤°à¥_à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¥à¤²_à¤®à¤_à¤à¥à¤¨_à¤à¥à¤²à¤¾à¤_à¤à¤à¤¸à¥à¤¤_à¤¸à¤¿à¤¤à¤®à¥à¤¬à¤°_à¤à¤à¥à¤à¥à¤¬à¤°_à¤¨à¤µà¤®à¥à¤¬à¤°_à¤¦à¤¿à¤¸à¤®à¥à¤¬à¤°".split("_"),monthsShort:"à¤à¤¨._à¤«à¤¼à¤°._à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¥._à¤®à¤_à¤à¥à¤¨_à¤à¥à¤²._à¤à¤._à¤¸à¤¿à¤¤._à¤à¤à¥à¤à¥._à¤¨à¤µ._à¤¦à¤¿à¤¸.".split("_"),monthsParseExact:!0,weekdays:"à¤°à¤µà¤¿à¤µà¤¾à¤°_à¤¸à¥à¤®à¤µà¤¾à¤°_à¤®à¤à¤à¤²à¤µà¤¾à¤°_à¤¬à¥à¤§à¤µà¤¾à¤°_à¤à¥à¤°à¥à¤µà¤¾à¤°_à¤¶à¥à¤à¥à¤°à¤µà¤¾à¤°_à¤¶à¤¨à¤¿à¤µà¤¾à¤°".split("_"),weekdaysShort:"à¤°à¤µà¤¿_à¤¸à¥à¤®_à¤®à¤à¤à¤²_à¤¬à¥à¤§_à¤à¥à¤°à¥_à¤¶à¥à¤à¥à¤°_à¤¶à¤¨à¤¿".split("_"),weekdaysMin:"à¤°_à¤¸à¥_à¤®à¤_à¤¬à¥_à¤à¥_à¤¶à¥_à¤¶".split("_"),longDateFormat:{LT:"A h:mm à¤¬à¤à¥",LTS:"A h:mm:ss à¤¬à¤à¥",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm à¤¬à¤à¥",LLLL:"dddd, D MMMM YYYY, A h:mm à¤¬à¤à¥"},calendar:{sameDay:"[à¤à¤] LT",nextDay:"[à¤à¤²] LT",nextWeek:"dddd, LT",lastDay:"[à¤à¤²] LT",lastWeek:"[à¤ªà¤¿à¤à¤²à¥] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à¤®à¥à¤",past:"%s à¤ªà¤¹à¤²à¥",s:"à¤à¥à¤ à¤¹à¥ à¤à¥à¤·à¤£",m:"à¤à¤ à¤®à¤¿à¤¨à¤",mm:"%d à¤®à¤¿à¤¨à¤",h:"à¤à¤ à¤à¤à¤à¤¾",hh:"%d à¤à¤à¤à¥",d:"à¤à¤ à¤¦à¤¿à¤¨",dd:"%d à¤¦à¤¿à¤¨",M:"à¤à¤ à¤®à¤¹à¥à¤¨à¥",MM:"%d à¤®à¤¹à¥à¤¨à¥",y:"à¤à¤ à¤µà¤°à¥à¤·",yy:"%d à¤µà¤°à¥à¤·"},preparse:function(a){return a.replace(/[à¥§à¥¨à¥©à¥ªà¥«à¥¬à¥­à¥®à¥¯à¥¦]/g,function(a){return _g[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return $g[a]})},meridiemParse:/à¤°à¤¾à¤¤|à¤¸à¥à¤¬à¤¹|à¤¦à¥à¤ªà¤¹à¤°|à¤¶à¤¾à¤®/,meridiemHour:function(a,b){return 12===a&&(a=0),"à¤°à¤¾à¤¤"===b?a<4?a:a+12:"à¤¸à¥à¤¬à¤¹"===b?a:"à¤¦à¥à¤ªà¤¹à¤°"===b?a>=10?a:a+12:"à¤¶à¤¾à¤®"===b?a+12:void 0},meridiem:function(a,b,c){return a<4?"à¤°à¤¾à¤¤":a<10?"à¤¸à¥à¤¬à¤¹":a<17?"à¤¦à¥à¤ªà¤¹à¤°":a<20?"à¤¶à¤¾à¤®":"à¤°à¤¾à¤¤"},week:{dow:0,doy:6}}),a.defineLocale("hr",{months:{format:"sijeÄnja_veljaÄe_oÅ¾ujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeÄanj_veljaÄa_oÅ¾ujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._oÅ¾u._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_Äetvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._Äet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_Äe_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juÄer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[proÅ¡lu] dddd [u] LT";case 6:return"[proÅ¡le] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proÅ¡li] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:Dd,mm:Dd,h:Dd,hh:Dd,d:"dan",dd:Dd,M:"mjesec",MM:Dd,y:"godinu",yy:Dd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var ah="vasÃ¡rnap hÃ©tfÅn kedden szerdÃ¡n csÃ¼tÃ¶rtÃ¶kÃ¶n pÃ©nteken szombaton".split(" ");a.defineLocale("hu",{months:"januÃ¡r_februÃ¡r_mÃ¡rcius_Ã¡prilis_mÃ¡jus_jÃºnius_jÃºlius_augusztus_szeptember_oktÃ³ber_november_december".split("_"),monthsShort:"jan_feb_mÃ¡rc_Ã¡pr_mÃ¡j_jÃºn_jÃºl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasÃ¡rnap_hÃ©tfÅ_kedd_szerda_csÃ¼tÃ¶rtÃ¶k_pÃ©ntek_szombat".split("_"),weekdaysShort:"vas_hÃ©t_kedd_sze_csÃ¼t_pÃ©n_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(a){return"u"===a.charAt(1).toLowerCase()},meridiem:function(a,b,c){return a<12?c===!0?"de":"DE":c===!0?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return Fd.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return Fd.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mÃºlva",past:"%s",s:Ed,m:Ed,mm:Ed,h:Ed,hh:Ed,d:Ed,dd:Ed,M:Ed,MM:Ed,y:Ed,yy:Ed},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),a.defineLocale("hy-am",{months:{format:"Õ°Õ¸ÖÕ¶Õ¾Õ¡ÖÕ«_ÖÕ¥Õ¿ÖÕ¾Õ¡ÖÕ«_Õ´Õ¡ÖÕ¿Õ«_Õ¡ÕºÖÕ«Õ¬Õ«_Õ´Õ¡ÕµÕ«Õ½Õ«_Õ°Õ¸ÖÕ¶Õ«Õ½Õ«_Õ°Õ¸ÖÕ¬Õ«Õ½Õ«_ÖÕ£Õ¸Õ½Õ¿Õ¸Õ½Õ«_Õ½Õ¥ÕºÕ¿Õ¥Õ´Õ¢Õ¥ÖÕ«_Õ°Õ¸Õ¯Õ¿Õ¥Õ´Õ¢Õ¥ÖÕ«_Õ¶Õ¸ÕµÕ¥Õ´Õ¢Õ¥ÖÕ«_Õ¤Õ¥Õ¯Õ¿Õ¥Õ´Õ¢Õ¥ÖÕ«".split("_"),standalone:"Õ°Õ¸ÖÕ¶Õ¾Õ¡Ö_ÖÕ¥Õ¿ÖÕ¾Õ¡Ö_Õ´Õ¡ÖÕ¿_Õ¡ÕºÖÕ«Õ¬_Õ´Õ¡ÕµÕ«Õ½_Õ°Õ¸ÖÕ¶Õ«Õ½_Õ°Õ¸ÖÕ¬Õ«Õ½_ÖÕ£Õ¸Õ½Õ¿Õ¸Õ½_Õ½Õ¥ÕºÕ¿Õ¥Õ´Õ¢Õ¥Ö_Õ°Õ¸Õ¯Õ¿Õ¥Õ´Õ¢Õ¥Ö_Õ¶Õ¸ÕµÕ¥Õ´Õ¢Õ¥Ö_Õ¤Õ¥Õ¯Õ¿Õ¥Õ´Õ¢Õ¥Ö".split("_")},monthsShort:"Õ°Õ¶Õ¾_ÖÕ¿Ö_Õ´ÖÕ¿_Õ¡ÕºÖ_Õ´ÕµÕ½_Õ°Õ¶Õ½_Õ°Õ¬Õ½_ÖÕ£Õ½_Õ½ÕºÕ¿_Õ°Õ¯Õ¿_Õ¶Õ´Õ¢_Õ¤Õ¯Õ¿".split("_"),weekdays:"Õ¯Õ«ÖÕ¡Õ¯Õ«_Õ¥ÖÕ¯Õ¸ÖÕ·Õ¡Õ¢Õ©Õ«_Õ¥ÖÕ¥ÖÕ·Õ¡Õ¢Õ©Õ«_Õ¹Õ¸ÖÕ¥ÖÕ·Õ¡Õ¢Õ©Õ«_Õ°Õ«Õ¶Õ£Õ·Õ¡Õ¢Õ©Õ«_Õ¸ÖÖÕ¢Õ¡Õ©_Õ·Õ¡Õ¢Õ¡Õ©".split("_"),weekdaysShort:"Õ¯ÖÕ¯_Õ¥ÖÕ¯_Õ¥ÖÖ_Õ¹ÖÖ_Õ°Õ¶Õ£_Õ¸ÖÖÕ¢_Õ·Õ¢Õ©".split("_"),weekdaysMin:"Õ¯ÖÕ¯_Õ¥ÖÕ¯_Õ¥ÖÖ_Õ¹ÖÖ_Õ°Õ¶Õ£_Õ¸ÖÖÕ¢_Õ·Õ¢Õ©".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY Õ©.",LLL:"D MMMM YYYY Õ©., HH:mm",LLLL:"dddd, D MMMM YYYY Õ©., HH:mm"},calendar:{sameDay:"[Õ¡ÕµÕ½ÖÖ] LT",nextDay:"[Õ¾Õ¡Õ²Õ¨] LT",lastDay:"[Õ¥ÖÕ¥Õ¯] LT",nextWeek:function(){return"dddd [ÖÖÕ¨ ÕªÕ¡Õ´Õ¨] LT"},lastWeek:function(){return"[Õ¡Õ¶ÖÕ¡Õ®] dddd [ÖÖÕ¨ ÕªÕ¡Õ´Õ¨] LT"},sameElse:"L"},relativeTime:{future:"%s Õ°Õ¥Õ¿Õ¸",past:"%s Õ¡Õ¼Õ¡Õ»",s:"Õ´Õ« ÖÕ¡Õ¶Õ« Õ¾Õ¡ÕµÖÕ¯ÕµÕ¡Õ¶",m:"ÖÕ¸ÕºÕ¥",mm:"%d ÖÕ¸ÕºÕ¥",h:"ÕªÕ¡Õ´",hh:"%d ÕªÕ¡Õ´",d:"ÖÖ",dd:"%d ÖÖ",M:"Õ¡Õ´Õ«Õ½",MM:"%d Õ¡Õ´Õ«Õ½",y:"Õ¿Õ¡ÖÕ«",yy:"%d Õ¿Õ¡ÖÕ«"},meridiemParse:/Õ£Õ«Õ·Õ¥ÖÕ¾Õ¡|Õ¡Õ¼Õ¡Õ¾Õ¸Õ¿Õ¾Õ¡|ÖÕ¥ÖÕ¥Õ¯Õ¾Õ¡|Õ¥ÖÕ¥Õ¯Õ¸ÕµÕ¡Õ¶/,isPM:function(a){return/^(ÖÕ¥ÖÕ¥Õ¯Õ¾Õ¡|Õ¥ÖÕ¥Õ¯Õ¸ÕµÕ¡Õ¶)$/.test(a)},meridiem:function(a){return a<4?"Õ£Õ«Õ·Õ¥ÖÕ¾Õ¡":a<12?"Õ¡Õ¼Õ¡Õ¾Õ¸Õ¿Õ¾Õ¡":a<17?"ÖÕ¥ÖÕ¥Õ¯Õ¾Õ¡":"Õ¥ÖÕ¥Õ¯Õ¸ÕµÕ¡Õ¶"},ordinalParse:/\d{1,2}|\d{1,2}-(Õ«Õ¶|ÖÕ¤)/,ordinal:function(a,b){switch(b){case"DDD":case"w":case"W":case"DDDo":return 1===a?a+"-Õ«Õ¶":a+"-ÖÕ¤";default:return a}},week:{dow:1,doy:7}}),a.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),
weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"siang"===b?a>=11?a:a+12:"sore"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return a<11?"pagi":a<15?"siang":a<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),a.defineLocale("is",{months:"janÃºar_febrÃºar_mars_aprÃ­l_maÃ­_jÃºnÃ­_jÃºlÃ­_Ã¡gÃºst_september_oktÃ³ber_nÃ³vember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maÃ­_jÃºn_jÃºl_Ã¡gÃº_sep_okt_nÃ³v_des".split("_"),weekdays:"sunnudagur_mÃ¡nudagur_Ã¾riÃ°judagur_miÃ°vikudagur_fimmtudagur_fÃ¶studagur_laugardagur".split("_"),weekdaysShort:"sun_mÃ¡n_Ã¾ri_miÃ°_fim_fÃ¶s_lau".split("_"),weekdaysMin:"Su_MÃ¡_Ãr_Mi_Fi_FÃ¶_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[Ã­ dag kl.] LT",nextDay:"[Ã¡ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Ã­ gÃ¦r kl.] LT",lastWeek:"[sÃ­Ã°asta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s sÃ­Ã°an",s:Hd,m:Hd,mm:Hd,h:"klukkustund",hh:Hd,d:Hd,dd:Hd,M:Hd,MM:Hd,y:Hd,yy:Hd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),a.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_LunedÃ¬_MartedÃ¬_MercoledÃ¬_GiovedÃ¬_VenerdÃ¬_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"Do_Lu_Ma_Me_Gi_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(a){return(/^[0-9].+$/.test(a)?"tra":"in")+" "+a},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}Âº/,ordinal:"%dÂº",week:{dow:1,doy:4}}),a.defineLocale("ja",{months:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),monthsShort:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),weekdays:"æ¥ææ¥_æææ¥_ç«ææ¥_æ°´ææ¥_æ¨ææ¥_éææ¥_åææ¥".split("_"),weekdaysShort:"æ¥_æ_ç«_æ°´_æ¨_é_å".split("_"),weekdaysMin:"æ¥_æ_ç«_æ°´_æ¨_é_å".split("_"),longDateFormat:{LT:"Ahæmå",LTS:"Ahæmåsç§",L:"YYYY/MM/DD",LL:"YYYYå¹´MæDæ¥",LLL:"YYYYå¹´MæDæ¥Ahæmå",LLLL:"YYYYå¹´MæDæ¥Ahæmå dddd"},meridiemParse:/åå|åå¾/i,isPM:function(a){return"åå¾"===a},meridiem:function(a,b,c){return a<12?"åå":"åå¾"},calendar:{sameDay:"[ä»æ¥] LT",nextDay:"[ææ¥] LT",nextWeek:"[æ¥é±]dddd LT",lastDay:"[æ¨æ¥] LT",lastWeek:"[åé±]dddd LT",sameElse:"L"},ordinalParse:/\d{1,2}æ¥/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"æ¥";default:return a}},relativeTime:{future:"%så¾",past:"%så",s:"æ°ç§",m:"1å",mm:"%då",h:"1æé",hh:"%dæé",d:"1æ¥",dd:"%dæ¥",M:"1ã¶æ",MM:"%dã¶æ",y:"1å¹´",yy:"%då¹´"}}),a.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(a,b){return 12===a&&(a=0),"enjing"===b?a:"siyang"===b?a>=11?a:a+12:"sonten"===b||"ndalu"===b?a+12:void 0},meridiem:function(a,b,c){return a<11?"enjing":a<15?"siyang":a<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}}),a.defineLocale("ka",{months:{standalone:"áááááá á_ááááá áááá_ááá á¢á_ááá ááá_áááá¡á_ááááá¡á_ááááá¡á_ááááá¡á¢á_á¡áá¥á¢ááááá á_áá¥á¢ááááá á_ááááááá á_áááááááá á".split("_"),format:"áááááá á¡_ááááá áááá¡_ááá á¢á¡_ááá áááá¡_áááá¡á¡_ááááá¡á¡_ááááá¡á¡_ááááá¡á¢á¡_á¡áá¥á¢ááááá á¡_áá¥á¢ááááá á¡_ááááááá á¡_áááááááá á¡".split("_")},monthsShort:"ááá_ááá_ááá _ááá _ááá_ááá_ááá_ááá_á¡áá¥_áá¥á¢_ááá_ááá".split("_"),weekdays:{standalone:"áááá á_áá á¨ááááá_á¡ááá¨ááááá_ááá®á¨ááááá_á®á£áá¨ááááá_ááá áá¡áááá_á¨ááááá".split("_"),format:"áááá áá¡_áá á¨ááááá¡_á¡ááá¨ááááá¡_ááá®á¨ááááá¡_á®á£áá¨ááááá¡_ááá áá¡áááá¡_á¨ááááá¡".split("_"),isFormat:/(á¬ááá|á¨ááááá)/},weekdaysShort:"ááá_áá á¨_á¡áá_ááá®_á®á£á_ááá _á¨áá".split("_"),weekdaysMin:"áá_áá _á¡á_áá_á®á£_áá_á¨á".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[áá¦áá¡] LT[-áá]",nextDay:"[á®ááá] LT[-áá]",lastDay:"[áá£á¨áá] LT[-áá]",nextWeek:"[á¨ááááá] dddd LT[-áá]",lastWeek:"[á¬ááá] dddd LT-áá",sameElse:"L"},relativeTime:{future:function(a){return/(á¬ááá|á¬á£áá|á¡áááá|á¬ááá)/.test(a)?a.replace(/á$/,"á¨á"):a+"á¨á"},past:function(a){return/(á¬ááá|á¬á£áá|á¡áááá|áá¦á|ááá)/.test(a)?a.replace(/(á|á)$/,"áá¡ á¬áá"):/á¬ááá/.test(a)?a.replace(/á¬ááá$/,"á¬ááá¡ á¬áá"):void 0},s:"á áááááááá á¬ááá",m:"á¬á£áá",mm:"%d á¬á£áá",h:"á¡áááá",hh:"%d á¡áááá",d:"áá¦á",dd:"%d áá¦á",M:"ááá",MM:"%d ááá",y:"á¬ááá",yy:"%d á¬ááá"},ordinalParse:/0|1-áá|áá-\d{1,2}|\d{1,2}-á/,ordinal:function(a){return 0===a?a:1===a?a+"-áá":a<20||a<=100&&a%20===0||a%100===0?"áá-"+a:a+"-á"},week:{dow:1,doy:7}});var bh={0:"-ÑÑ",1:"-ÑÑ",2:"-ÑÑ",3:"-ÑÑ",4:"-ÑÑ",5:"-ÑÑ",6:"-ÑÑ",7:"-ÑÑ",8:"-ÑÑ",9:"-ÑÑ",10:"-ÑÑ",20:"-ÑÑ",30:"-ÑÑ",40:"-ÑÑ",50:"-ÑÑ",60:"-ÑÑ",70:"-ÑÑ",80:"-ÑÑ",90:"-ÑÑ",100:"-ÑÑ"};a.defineLocale("kk",{months:"ÒÐ°Ò£ÑÐ°Ñ_Ð°ÒÐ¿Ð°Ð½_Ð½Ð°ÑÑÑÐ·_ÑÓÑÑÑ_Ð¼Ð°Ð¼ÑÑ_Ð¼Ð°ÑÑÑÐ¼_ÑÑÐ»Ð´Ðµ_ÑÐ°Ð¼ÑÐ·_ÒÑÑÐºÒ¯Ð¹ÐµÐº_ÒÐ°Ð·Ð°Ð½_ÒÐ°ÑÐ°ÑÐ°_Ð¶ÐµÐ»ÑÐ¾ÒÑÐ°Ð½".split("_"),monthsShort:"ÒÐ°Ò£_Ð°ÒÐ¿_Ð½Ð°Ñ_ÑÓÑ_Ð¼Ð°Ð¼_Ð¼Ð°Ñ_ÑÑÐ»_ÑÐ°Ð¼_ÒÑÑ_ÒÐ°Ð·_ÒÐ°Ñ_Ð¶ÐµÐ»".split("_"),weekdays:"Ð¶ÐµÐºÑÐµÐ½Ð±Ñ_Ð´Ò¯Ð¹ÑÐµÐ½Ð±Ñ_ÑÐµÐ¹ÑÐµÐ½Ð±Ñ_ÑÓÑÑÐµÐ½Ð±Ñ_Ð±ÐµÐ¹ÑÐµÐ½Ð±Ñ_Ð¶Ò±Ð¼Ð°_ÑÐµÐ½Ð±Ñ".split("_"),weekdaysShort:"Ð¶ÐµÐº_Ð´Ò¯Ð¹_ÑÐµÐ¹_ÑÓÑ_Ð±ÐµÐ¹_Ð¶Ò±Ð¼_ÑÐµÐ½".split("_"),weekdaysMin:"Ð¶Ðº_Ð´Ð¹_ÑÐ¹_ÑÑ_Ð±Ð¹_Ð¶Ð¼_ÑÐ½".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ÐÒ¯Ð³ÑÐ½ ÑÐ°ÒÐ°Ñ] LT",nextDay:"[ÐÑÑÐµÒ£ ÑÐ°ÒÐ°Ñ] LT",nextWeek:"dddd [ÑÐ°ÒÐ°Ñ] LT",lastDay:"[ÐÐµÑÐµ ÑÐ°ÒÐ°Ñ] LT",lastWeek:"[Ó¨ÑÐºÐµÐ½ Ð°Ð¿ÑÐ°Ð½ÑÒ£] dddd [ÑÐ°ÒÐ°Ñ] LT",sameElse:"L"},relativeTime:{future:"%s ÑÑÑÐ½Ð´Ðµ",past:"%s Ð±Ò±ÑÑÐ½",s:"Ð±ÑÑÐ½ÐµÑÐµ ÑÐµÐºÑÐ½Ð´",m:"Ð±ÑÑ Ð¼Ð¸Ð½ÑÑ",mm:"%d Ð¼Ð¸Ð½ÑÑ",h:"Ð±ÑÑ ÑÐ°ÒÐ°Ñ",hh:"%d ÑÐ°ÒÐ°Ñ",d:"Ð±ÑÑ ÐºÒ¯Ð½",dd:"%d ÐºÒ¯Ð½",M:"Ð±ÑÑ Ð°Ð¹",MM:"%d Ð°Ð¹",y:"Ð±ÑÑ Ð¶ÑÐ»",yy:"%d Ð¶ÑÐ»"},ordinalParse:/\d{1,2}-(ÑÑ|ÑÑ)/,ordinal:function(a){var b=a%10,c=a>=100?100:null;return a+(bh[a]||bh[b]||bh[c])},week:{dow:1,doy:7}}),a.defineLocale("km",{months:"áááá¶_áá»áááá_áá¸áá¶_áááá¶_á§ááá¶_áá·áá»áá¶_áááááá¶_áá¸á á¶_ááááá¶_áá»áá¶_áá·áááá·áá¶_áááá¼".split("_"),monthsShort:"áááá¶_áá»áááá_áá¸áá¶_áááá¶_á§ááá¶_áá·áá»áá¶_áááááá¶_áá¸á á¶_ááááá¶_áá»áá¶_áá·áááá·áá¶_áááá¼".split("_"),weekdays:"á¢á¶áá·ááá_ááááá_á¢áááá¶á_áá»á_áááá ááááá·á_áá»ááá_áááá".split("_"),weekdaysShort:"á¢á¶áá·ááá_ááááá_á¢áááá¶á_áá»á_áááá ááááá·á_áá»ááá_áááá".split("_"),weekdaysMin:"á¢á¶áá·ááá_ááááá_á¢áááá¶á_áá»á_áááá ááááá·á_áá»ááá_áááá".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ááááááá áááá] LT",nextDay:"[ááá¢áá áááá] LT",nextWeek:"dddd [áááá] LT",lastDay:"[áááá·ááá·á áááá] LT",lastWeek:"dddd [ááááá¶á ááá»á] [áááá] LT",sameElse:"L"},relativeTime:{future:"%sááá",past:"%sáá»á",s:"ááá»áááá¶ááá·áá¶áá¸",m:"áá½ááá¶áá¸",mm:"%d áá¶áá¸",h:"áá½ááááá",hh:"%d áááá",d:"áá½ááááá",dd:"%d áááá",M:"áá½ááá",MM:"%d áá",y:"áá½ááááá¶á",yy:"%d áááá¶á"},week:{dow:1,doy:4}}),a.defineLocale("ko",{months:"1ì_2ì_3ì_4ì_5ì_6ì_7ì_8ì_9ì_10ì_11ì_12ì".split("_"),monthsShort:"1ì_2ì_3ì_4ì_5ì_6ì_7ì_8ì_9ì_10ì_11ì_12ì".split("_"),weekdays:"ì¼ìì¼_ììì¼_íìì¼_ììì¼_ëª©ìì¼_ê¸ìì¼_í ìì¼".split("_"),weekdaysShort:"ì¼_ì_í_ì_ëª©_ê¸_í ".split("_"),weekdaysMin:"ì¼_ì_í_ì_ëª©_ê¸_í ".split("_"),longDateFormat:{LT:"A hì më¶",LTS:"A hì më¶ sì´",L:"YYYY.MM.DD",LL:"YYYYë MMMM Dì¼",LLL:"YYYYë MMMM Dì¼ A hì më¶",LLLL:"YYYYë MMMM Dì¼ dddd A hì më¶"},calendar:{sameDay:"ì¤ë LT",nextDay:"ë´ì¼ LT",nextWeek:"dddd LT",lastDay:"ì´ì  LT",lastWeek:"ì§ëì£¼ dddd LT",sameElse:"L"},relativeTime:{future:"%s í",past:"%s ì ",s:"ëª ì´",ss:"%dì´",m:"ì¼ë¶",mm:"%dë¶",h:"í ìê°",hh:"%dìê°",d:"íë£¨",dd:"%dì¼",M:"í ë¬",MM:"%dë¬",y:"ì¼ ë",yy:"%dë"},ordinalParse:/\d{1,2}ì¼/,ordinal:"%dì¼",meridiemParse:/ì¤ì |ì¤í/,isPM:function(a){return"ì¤í"===a},meridiem:function(a,b,c){return a<12?"ì¤ì ":"ì¤í"}});var ch={0:"-ÑÒ¯",1:"-ÑÐ¸",2:"-ÑÐ¸",3:"-ÑÒ¯",4:"-ÑÒ¯",5:"-ÑÐ¸",6:"-ÑÑ",7:"-ÑÐ¸",8:"-ÑÐ¸",9:"-ÑÑ",10:"-ÑÑ",20:"-ÑÑ",30:"-ÑÑ",40:"-ÑÑ",50:"-ÑÒ¯",60:"-ÑÑ",70:"-ÑÐ¸",80:"-ÑÐ¸",90:"-ÑÑ",100:"-ÑÒ¯"};a.defineLocale("ky",{months:"ÑÐ½Ð²Ð°ÑÑ_ÑÐµÐ²ÑÐ°Ð»Ñ_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐµÐ»Ñ_Ð¼Ð°Ð¹_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ½ÑÑÐ±ÑÑ_Ð¾ÐºÑÑÐ±ÑÑ_Ð½Ð¾ÑÐ±ÑÑ_Ð´ÐµÐºÐ°Ð±ÑÑ".split("_"),monthsShort:"ÑÐ½Ð²_ÑÐµÐ²_Ð¼Ð°ÑÑ_Ð°Ð¿Ñ_Ð¼Ð°Ð¹_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³_ÑÐµÐ½_Ð¾ÐºÑ_Ð½Ð¾Ñ_Ð´ÐµÐº".split("_"),weekdays:"ÐÐµÐºÑÐµÐ¼Ð±Ð¸_ÐÒ¯Ð¹ÑÓ©Ð¼Ð±Ò¯_Ð¨ÐµÐ¹ÑÐµÐ¼Ð±Ð¸_Ð¨Ð°ÑÑÐµÐ¼Ð±Ð¸_ÐÐµÐ¹ÑÐµÐ¼Ð±Ð¸_ÐÑÐ¼Ð°_ÐÑÐµÐ¼Ð±Ð¸".split("_"),weekdaysShort:"ÐÐµÐº_ÐÒ¯Ð¹_Ð¨ÐµÐ¹_Ð¨Ð°Ñ_ÐÐµÐ¹_ÐÑÐ¼_ÐÑÐµ".split("_"),weekdaysMin:"ÐÐº_ÐÐ¹_Ð¨Ð¹_Ð¨Ñ_ÐÐ¹_ÐÐ¼_ÐÑ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ÐÒ¯Ð³Ò¯Ð½ ÑÐ°Ð°Ñ] LT",nextDay:"[Ð­ÑÑÐµÒ£ ÑÐ°Ð°Ñ] LT",nextWeek:"dddd [ÑÐ°Ð°Ñ] LT",lastDay:"[ÐÐµÑÐµ ÑÐ°Ð°Ñ] LT",lastWeek:"[Ó¨ÑÐºÐµÐ½ Ð°Ð¿ÑÐ°Ð½ÑÐ½] dddd [ÐºÒ¯Ð½Ò¯] [ÑÐ°Ð°Ñ] LT",sameElse:"L"},relativeTime:{future:"%s Ð¸ÑÐ¸Ð½Ð´Ðµ",past:"%s Ð¼ÑÑÑÐ½",s:"Ð±Ð¸ÑÐ½ÐµÑÐµ ÑÐµÐºÑÐ½Ð´",m:"Ð±Ð¸Ñ Ð¼Ò¯Ð½Ó©Ñ",mm:"%d Ð¼Ò¯Ð½Ó©Ñ",h:"Ð±Ð¸Ñ ÑÐ°Ð°Ñ",hh:"%d ÑÐ°Ð°Ñ",d:"Ð±Ð¸Ñ ÐºÒ¯Ð½",dd:"%d ÐºÒ¯Ð½",M:"Ð±Ð¸Ñ Ð°Ð¹",MM:"%d Ð°Ð¹",y:"Ð±Ð¸Ñ Ð¶ÑÐ»",yy:"%d Ð¶ÑÐ»"},ordinalParse:/\d{1,2}-(ÑÐ¸|ÑÑ|ÑÒ¯|ÑÑ)/,ordinal:function(a){var b=a%10,c=a>=100?100:null;return a+(ch[a]||ch[b]||ch[c])},week:{dow:1,doy:7}}),a.defineLocale("lb",{months:"Januar_Februar_MÃ¤erz_AbrÃ«ll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_MÃ©indeg_DÃ«nschdeg_MÃ«ttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._MÃ©._DÃ«._MÃ«._Do._Fr._Sa.".split("_"),weekdaysMin:"So_MÃ©_DÃ«_MÃ«_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[GÃ«schter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:Jd,past:Kd,s:"e puer Sekonnen",m:Id,mm:"%d Minutten",h:Id,hh:"%d Stonnen",d:Id,dd:"%d Deeg",M:Id,MM:"%d MÃ©int",y:Id,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),a.defineLocale("lo",{months:"àº¡àº±àºàºàº­àº_àºàº¸àº¡àºàº²_àº¡àºµàºàº²_à»àº¡àºªàº²_àºàº¶àºàºªàº°àºàº²_àº¡àº´àºàº¸àºàº²_àºà»àº¥àº°àºàº»àº_àºªàº´àºàº«àº²_àºàº±àºàºàº²_àºàº¸àº¥àº²_àºàº°àºàº´àº_àºàº±àºàº§àº²".split("_"),monthsShort:"àº¡àº±àºàºàº­àº_àºàº¸àº¡àºàº²_àº¡àºµàºàº²_à»àº¡àºªàº²_àºàº¶àºàºªàº°àºàº²_àº¡àº´àºàº¸àºàº²_àºà»àº¥àº°àºàº»àº_àºªàº´àºàº«àº²_àºàº±àºàºàº²_àºàº¸àº¥àº²_àºàº°àºàº´àº_àºàº±àºàº§àº²".split("_"),weekdays:"àº­àº²àºàº´àº_àºàº±àº_àº­àº±àºàºàº²àº_àºàº¸àº_àºàº°àº«àº±àº_àºªàº¸àº_à»àºªàº»àº²".split("_"),weekdaysShort:"àºàº´àº_àºàº±àº_àº­àº±àºàºàº²àº_àºàº¸àº_àºàº°àº«àº±àº_àºªàº¸àº_à»àºªàº»àº²".split("_"),weekdaysMin:"àº_àº_àº­àº_àº_àºàº«_àºªàº_àºª".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"àº§àº±àºdddd D MMMM YYYY HH:mm"},meridiemParse:/àºàº­àºà»àºàº»à»àº²|àºàº­àºà»àº¥àº/,isPM:function(a){return"àºàº­àºà»àº¥àº"===a},meridiem:function(a,b,c){return a<12?"àºàº­àºà»àºàº»à»àº²":"àºàº­àºà»àº¥àº"},calendar:{sameDay:"[àº¡àº·à»àºàºµà»à»àº§àº¥àº²] LT",nextDay:"[àº¡àº·à»àº­àº·à»àºà»àº§àº¥àº²] LT",nextWeek:"[àº§àº±àº]dddd[à»à»àº²à»àº§àº¥àº²] LT",lastDay:"[àº¡àº·à»àº§àº²àºàºàºµà»à»àº§àº¥àº²] LT",lastWeek:"[àº§àº±àº]dddd[à»àº¥à»àº§àºàºµà»à»àº§àº¥àº²] LT",sameElse:"L"},relativeTime:{future:"àº­àºµàº %s",past:"%sàºà»àº²àºàº¡àº²",s:"àºà»à»à»àºàº»à»àº²à»àºàº§àº´àºàº²àºàºµ",m:"1 àºàº²àºàºµ",mm:"%d àºàº²àºàºµ",h:"1 àºàº»à»àº§à»àº¡àº",hh:"%d àºàº»à»àº§à»àº¡àº",d:"1 àº¡àº·à»",dd:"%d àº¡àº·à»",M:"1 à»àºàº·àº­àº",MM:"%d à»àºàº·àº­àº",y:"1 àºàºµ",yy:"%d àºàºµ"},ordinalParse:/(àºàºµà»)\d{1,2}/,ordinal:function(a){return"àºàºµà»"+a}});var dh={m:"minutÄ_minutÄs_minutÄ",mm:"minutÄs_minuÄiÅ³_minutes",h:"valanda_valandos_valandÄ",hh:"valandos_valandÅ³_valandas",d:"diena_dienos_dienÄ",dd:"dienos_dienÅ³_dienas",M:"mÄnuo_mÄnesio_mÄnesÄ¯",MM:"mÄnesiai_mÄnesiÅ³_mÄnesius",y:"metai_metÅ³_metus",yy:"metai_metÅ³_metus"};a.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandÅ¾io_geguÅ¾Äs_birÅ¾elio_liepos_rugpjÅ«Äio_rugsÄjo_spalio_lapkriÄio_gruodÅ¾io".split("_"),standalone:"sausis_vasaris_kovas_balandis_geguÅ¾Ä_birÅ¾elis_liepa_rugpjÅ«tis_rugsÄjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadienÄ¯_pirmadienÄ¯_antradienÄ¯_treÄiadienÄ¯_ketvirtadienÄ¯_penktadienÄ¯_Å¡eÅ¡tadienÄ¯".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treÄiadienis_ketvirtadienis_penktadienis_Å¡eÅ¡tadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Å eÅ¡".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Å ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Å iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[PraÄjusÄ¯] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieÅ¡ %s",s:Md,m:Nd,mm:Qd,h:Nd,hh:Qd,d:Nd,dd:Qd,M:Nd,MM:Qd,y:Nd,yy:Qd},ordinalParse:/\d{1,2}-oji/,ordinal:function(a){return a+"-oji"},week:{dow:1,doy:4}});var eh={m:"minÅ«tes_minÅ«tÄm_minÅ«te_minÅ«tes".split("_"),mm:"minÅ«tes_minÅ«tÄm_minÅ«te_minÅ«tes".split("_"),h:"stundas_stundÄm_stunda_stundas".split("_"),hh:"stundas_stundÄm_stunda_stundas".split("_"),d:"dienas_dienÄm_diena_dienas".split("_"),dd:"dienas_dienÄm_diena_dienas".split("_"),M:"mÄneÅ¡a_mÄneÅ¡iem_mÄnesis_mÄneÅ¡i".split("_"),MM:"mÄneÅ¡a_mÄneÅ¡iem_mÄnesis_mÄneÅ¡i".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};a.defineLocale("lv",{months:"janvÄris_februÄris_marts_aprÄ«lis_maijs_jÅ«nijs_jÅ«lijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jÅ«n_jÅ«l_aug_sep_okt_nov_dec".split("_"),weekdays:"svÄtdiena_pirmdiena_otrdiena_treÅ¡diena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Å odien pulksten] LT",nextDay:"[RÄ«t pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[PagÄjuÅ¡Ä] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pÄc %s",past:"pirms %s",s:Ud,m:Td,mm:Sd,h:Td,hh:Sd,d:Td,dd:Sd,M:Td,MM:Sd,y:Td,yy:Sd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var fh={words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&a<=4?b[1]:b[2]},translate:function(a,b,c){var d=fh.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+fh.correctGrammaticalCase(a,d)}};a.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_Äetvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._Äet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_Äe_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juÄe u] LT",lastWeek:function(){var a=["[proÅ¡le] [nedjelje] [u] LT","[proÅ¡log] [ponedjeljka] [u] LT","[proÅ¡log] [utorka] [u] LT","[proÅ¡le] [srijede] [u] LT","[proÅ¡log] [Äetvrtka] [u] LT","[proÅ¡log] [petka] [u] LT","[proÅ¡le] [subote] [u] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:fh.translate,mm:fh.translate,h:fh.translate,hh:fh.translate,d:"dan",dd:fh.translate,M:"mjesec",MM:fh.translate,y:"godinu",yy:fh.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),a.defineLocale("mi",{months:"Kohi-tÄte_Hui-tanguru_PoutÅ«-te-rangi_Paenga-whÄwhÄ_Haratua_Pipiri_HÅngoingoi_Here-turi-kÅkÄ_Mahuru_Whiringa-Ä-nuku_Whiringa-Ä-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_HÅngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"RÄtapu_Mane_TÅ«rei_Wenerei_TÄite_Paraire_HÄtarei".split("_"),weekdaysShort:"Ta_Ma_TÅ«_We_TÄi_Pa_HÄ".split("_"),weekdaysMin:"Ta_Ma_TÅ«_We_TÄi_Pa_HÄ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hÄkona ruarua",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},ordinalParse:/\d{1,2}Âº/,ordinal:"%dÂº",week:{dow:1,doy:4}}),a.defineLocale("mk",{months:"ÑÐ°Ð½ÑÐ°ÑÐ¸_ÑÐµÐ²ÑÑÐ°ÑÐ¸_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐ¸Ð»_Ð¼Ð°Ñ_ÑÑÐ½Ð¸_ÑÑÐ»Ð¸_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ¿ÑÐµÐ¼Ð²ÑÐ¸_Ð¾ÐºÑÐ¾Ð¼Ð²ÑÐ¸_Ð½Ð¾ÐµÐ¼Ð²ÑÐ¸_Ð´ÐµÐºÐµÐ¼Ð²ÑÐ¸".split("_"),monthsShort:"ÑÐ°Ð½_ÑÐµÐ²_Ð¼Ð°Ñ_Ð°Ð¿Ñ_Ð¼Ð°Ñ_ÑÑÐ½_ÑÑÐ»_Ð°Ð²Ð³_ÑÐµÐ¿_Ð¾ÐºÑ_Ð½Ð¾Ðµ_Ð´ÐµÐº".split("_"),weekdays:"Ð½ÐµÐ´ÐµÐ»Ð°_Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»Ð½Ð¸Ðº_Ð²ÑÐ¾ÑÐ½Ð¸Ðº_ÑÑÐµÐ´Ð°_ÑÐµÑÐ²ÑÑÐ¾Ðº_Ð¿ÐµÑÐ¾Ðº_ÑÐ°Ð±Ð¾ÑÐ°".split("_"),weekdaysShort:"Ð½ÐµÐ´_Ð¿Ð¾Ð½_Ð²ÑÐ¾_ÑÑÐµ_ÑÐµÑ_Ð¿ÐµÑ_ÑÐ°Ð±".split("_"),weekdaysMin:"Ð½e_Ð¿o_Ð²Ñ_ÑÑ_ÑÐµ_Ð¿Ðµ_Ña".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ÐÐµÐ½ÐµÑ Ð²Ð¾] LT",nextDay:"[Ð£ÑÑÐµ Ð²Ð¾] LT",nextWeek:"[ÐÐ¾] dddd [Ð²Ð¾] LT",lastDay:"[ÐÑÐµÑÐ° Ð²Ð¾] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ÐÐ·Ð¼Ð¸Ð½Ð°ÑÐ°ÑÐ°] dddd [Ð²Ð¾] LT";case 1:case 2:case 4:case 5:return"[ÐÐ·Ð¼Ð¸Ð½Ð°ÑÐ¸Ð¾Ñ] dddd [Ð²Ð¾] LT"}},sameElse:"L"},relativeTime:{future:"Ð¿Ð¾ÑÐ»Ðµ %s",past:"Ð¿ÑÐµÐ´ %s",s:"Ð½ÐµÐºÐ¾Ð»ÐºÑ ÑÐµÐºÑÐ½Ð´Ð¸",m:"Ð¼Ð¸Ð½ÑÑÐ°",mm:"%d Ð¼Ð¸Ð½ÑÑÐ¸",h:"ÑÐ°Ñ",hh:"%d ÑÐ°ÑÐ°",d:"Ð´ÐµÐ½",dd:"%d Ð´ÐµÐ½Ð°",M:"Ð¼ÐµÑÐµÑ",MM:"%d Ð¼ÐµÑÐµÑÐ¸",y:"Ð³Ð¾Ð´Ð¸Ð½Ð°",yy:"%d Ð³Ð¾Ð´Ð¸Ð½Ð¸"},ordinalParse:/\d{1,2}-(ÐµÐ²|ÐµÐ½|ÑÐ¸|Ð²Ð¸|ÑÐ¸|Ð¼Ð¸)/,ordinal:function(a){var b=a%10,c=a%100;return 0===a?a+"-ÐµÐ²":0===c?a+"-ÐµÐ½":c>10&&c<20?a+"-ÑÐ¸":1===b?a+"-Ð²Ð¸":2===b?a+"-ÑÐ¸":7===b||8===b?a+"-Ð¼Ð¸":a+"-ÑÐ¸"},week:{dow:1,doy:7}}),a.defineLocale("ml",{months:"à´à´¨àµà´µà´°à´¿_à´«àµà´¬àµà´°àµà´µà´°à´¿_à´®à´¾àµ¼à´àµà´àµ_à´à´ªàµà´°à´¿àµ½_à´®àµà´¯àµ_à´àµàµº_à´àµà´²àµ_à´à´à´¸àµà´±àµà´±àµ_à´¸àµà´ªàµà´±àµà´±à´à´¬àµ¼_à´à´àµà´àµà´¬àµ¼_à´¨à´µà´à´¬àµ¼_à´¡à´¿à´¸à´à´¬àµ¼".split("_"),monthsShort:"à´à´¨àµ._à´«àµà´¬àµà´°àµ._à´®à´¾àµ¼._à´à´ªàµà´°à´¿._à´®àµà´¯àµ_à´àµàµº_à´àµà´²àµ._à´à´._à´¸àµà´ªàµà´±àµà´±._à´à´àµà´àµ._à´¨à´µà´._à´¡à´¿à´¸à´.".split("_"),monthsParseExact:!0,weekdays:"à´à´¾à´¯à´±à´¾à´´àµà´_à´¤à´¿à´àµà´à´³à´¾à´´àµà´_à´àµà´µàµà´µà´¾à´´àµà´_à´¬àµà´§à´¨à´¾à´´àµà´_à´µàµà´¯à´¾à´´à´¾à´´àµà´_à´µàµà´³àµà´³à´¿à´¯à´¾à´´àµà´_à´¶à´¨à´¿à´¯à´¾à´´àµà´".split("_"),weekdaysShort:"à´à´¾à´¯àµ¼_à´¤à´¿à´àµà´àµ¾_à´àµà´µàµà´µ_à´¬àµà´§àµ»_à´µàµà´¯à´¾à´´à´_à´µàµà´³àµà´³à´¿_à´¶à´¨à´¿".split("_"),weekdaysMin:"à´à´¾_à´¤à´¿_à´àµ_à´¬àµ_à´µàµà´¯à´¾_à´µàµ_à´¶".split("_"),longDateFormat:{LT:"A h:mm -à´¨àµ",LTS:"A h:mm:ss -à´¨àµ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -à´¨àµ",LLLL:"dddd, D MMMM YYYY, A h:mm -à´¨àµ"},calendar:{sameDay:"[à´à´¨àµà´¨àµ] LT",nextDay:"[à´¨à´¾à´³àµ] LT",nextWeek:"dddd, LT",lastDay:"[à´à´¨àµà´¨à´²àµ] LT",lastWeek:"[à´à´´à´¿à´àµà´] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à´à´´à´¿à´àµà´àµ",past:"%s à´®àµàµ»à´ªàµ",s:"à´àµ½à´ª à´¨à´¿à´®à´¿à´·à´àµà´àµ¾",m:"à´à´°àµ à´®à´¿à´¨à´¿à´±àµà´±àµ",mm:"%d à´®à´¿à´¨à´¿à´±àµà´±àµ",h:"à´à´°àµ à´®à´£à´¿à´àµà´àµàµ¼",hh:"%d à´®à´£à´¿à´àµà´àµàµ¼",d:"à´à´°àµ à´¦à´¿à´µà´¸à´",dd:"%d à´¦à´¿à´µà´¸à´",M:"à´à´°àµ à´®à´¾à´¸à´",MM:"%d à´®à´¾à´¸à´",y:"à´à´°àµ à´µàµ¼à´·à´",yy:"%d à´µàµ¼à´·à´"},meridiemParse:/à´°à´¾à´¤àµà´°à´¿|à´°à´¾à´µà´¿à´²àµ|à´à´àµà´ à´à´´à´¿à´àµà´àµ|à´µàµà´àµà´¨àµà´¨àµà´°à´|à´°à´¾à´¤àµà´°à´¿/i,meridiemHour:function(a,b){return 12===a&&(a=0),"à´°à´¾à´¤àµà´°à´¿"===b&&a>=4||"à´à´àµà´ à´à´´à´¿à´àµà´àµ"===b||"à´µàµà´àµà´¨àµà´¨àµà´°à´"===b?a+12:a},meridiem:function(a,b,c){return a<4?"à´°à´¾à´¤àµà´°à´¿":a<12?"à´°à´¾à´µà´¿à´²àµ":a<17?"à´à´àµà´ à´à´´à´¿à´àµà´àµ":a<20?"à´µàµà´àµà´¨àµà´¨àµà´°à´":"à´°à´¾à´¤àµà´°à´¿"}});var gh={1:"à¥§",2:"à¥¨",3:"à¥©",4:"à¥ª",5:"à¥«",6:"à¥¬",7:"à¥­",8:"à¥®",9:"à¥¯",0:"à¥¦"},hh={"à¥§":"1","à¥¨":"2","à¥©":"3","à¥ª":"4","à¥«":"5","à¥¬":"6","à¥­":"7","à¥®":"8","à¥¯":"9","à¥¦":"0"};a.defineLocale("mr",{months:"à¤à¤¾à¤¨à¥à¤µà¤¾à¤°à¥_à¤«à¥à¤¬à¥à¤°à¥à¤µà¤¾à¤°à¥_à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¤¿à¤²_à¤®à¥_à¤à¥à¤¨_à¤à¥à¤²à¥_à¤à¤à¤¸à¥à¤_à¤¸à¤ªà¥à¤à¥à¤à¤¬à¤°_à¤à¤à¥à¤à¥à¤¬à¤°_à¤¨à¥à¤µà¥à¤¹à¥à¤à¤¬à¤°_à¤¡à¤¿à¤¸à¥à¤à¤¬à¤°".split("_"),monthsShort:"à¤à¤¾à¤¨à¥._à¤«à¥à¤¬à¥à¤°à¥._à¤®à¤¾à¤°à¥à¤._à¤à¤ªà¥à¤°à¤¿._à¤®à¥._à¤à¥à¤¨._à¤à¥à¤²à¥._à¤à¤._à¤¸à¤ªà¥à¤à¥à¤._à¤à¤à¥à¤à¥._à¤¨à¥à¤µà¥à¤¹à¥à¤._à¤¡à¤¿à¤¸à¥à¤.".split("_"),monthsParseExact:!0,weekdays:"à¤°à¤µà¤¿à¤µà¤¾à¤°_à¤¸à¥à¤®à¤µà¤¾à¤°_à¤®à¤à¤à¤³à¤µà¤¾à¤°_à¤¬à¥à¤§à¤µà¤¾à¤°_à¤à¥à¤°à¥à¤µà¤¾à¤°_à¤¶à¥à¤à¥à¤°à¤µà¤¾à¤°_à¤¶à¤¨à¤¿à¤µà¤¾à¤°".split("_"),weekdaysShort:"à¤°à¤µà¤¿_à¤¸à¥à¤®_à¤®à¤à¤à¤³_à¤¬à¥à¤§_à¤à¥à¤°à¥_à¤¶à¥à¤à¥à¤°_à¤¶à¤¨à¤¿".split("_"),weekdaysMin:"à¤°_à¤¸à¥_à¤®à¤_à¤¬à¥_à¤à¥_à¤¶à¥_à¤¶".split("_"),longDateFormat:{LT:"A h:mm à¤µà¤¾à¤à¤¤à¤¾",LTS:"A h:mm:ss à¤µà¤¾à¤à¤¤à¤¾",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm à¤µà¤¾à¤à¤¤à¤¾",LLLL:"dddd, D MMMM YYYY, A h:mm à¤µà¤¾à¤à¤¤à¤¾"},calendar:{sameDay:"[à¤à¤] LT",nextDay:"[à¤à¤¦à¥à¤¯à¤¾] LT",nextWeek:"dddd, LT",lastDay:"[à¤à¤¾à¤²] LT",lastWeek:"[à¤®à¤¾à¤à¥à¤²] dddd, LT",sameElse:"L"},relativeTime:{future:"%sà¤®à¤§à¥à¤¯à¥",past:"%sà¤ªà¥à¤°à¥à¤µà¥",s:Vd,m:Vd,mm:Vd,h:Vd,hh:Vd,d:Vd,dd:Vd,M:Vd,MM:Vd,y:Vd,yy:Vd},preparse:function(a){return a.replace(/[à¥§à¥¨à¥©à¥ªà¥«à¥¬à¥­à¥®à¥¯à¥¦]/g,function(a){return hh[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return gh[a]})},meridiemParse:/à¤°à¤¾à¤¤à¥à¤°à¥|à¤¸à¤à¤¾à¤³à¥|à¤¦à¥à¤ªà¤¾à¤°à¥|à¤¸à¤¾à¤¯à¤à¤à¤¾à¤³à¥/,meridiemHour:function(a,b){return 12===a&&(a=0),"à¤°à¤¾à¤¤à¥à¤°à¥"===b?a<4?a:a+12:"à¤¸à¤à¤¾à¤³à¥"===b?a:"à¤¦à¥à¤ªà¤¾à¤°à¥"===b?a>=10?a:a+12:"à¤¸à¤¾à¤¯à¤à¤à¤¾à¤³à¥"===b?a+12:void 0},meridiem:function(a,b,c){return a<4?"à¤°à¤¾à¤¤à¥à¤°à¥":a<10?"à¤¸à¤à¤¾à¤³à¥":a<17?"à¤¦à¥à¤ªà¤¾à¤°à¥":a<20?"à¤¸à¤¾à¤¯à¤à¤à¤¾à¤³à¥":"à¤°à¤¾à¤¤à¥à¤°à¥"},week:{dow:0,doy:6}}),a.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"tengahari"===b?a>=11?a:a+12:"petang"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return a<11?"pagi":a<15?"tengahari":a<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),a.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"tengahari"===b?a>=11?a:a+12:"petang"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return a<11?"pagi":a<15?"tengahari":a<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});var ih={1:"á",2:"á",3:"á",4:"á",5:"á",6:"á",7:"á",8:"á",9:"á",0:"á"},jh={"á":"1","á":"2","á":"3","á":"4","á":"5","á":"6","á":"7","á":"8","á":"9","á":"0"};a.defineLocale("my",{months:"áááºááá«áá®_áá±áá±á¬áºáá«áá®_áááº_á§áá¼á®_áá±_áá½ááº_áá°áá­á¯ááº_áá¼áá¯ááº_áááºáááºáá¬_á¡á±á¬ááºáá­á¯áá¬_áá­á¯áááºáá¬_áá®áááºáá¬".split("_"),monthsShort:"áááº_áá±_áááº_áá¼á®_áá±_áá½ááº_áá­á¯ááº_áá¼_áááº_á¡á±á¬ááº_áá­á¯_áá®".split("_"),weekdays:"ááááºá¹ááá½á±_ááááºá¹áá¬_á¡ááºá¹áá«_áá¯áá¹ááá°á¸_áá¼á¬áááá±á¸_áá±á¬áá¼á¬_ááá±".split("_"),weekdaysShort:"áá½á±_áá¬_áá«_áá°á¸_áá¼á¬_áá±á¬_áá±".split("_"),weekdaysMin:"áá½á±_áá¬_áá«_áá°á¸_áá¼á¬_áá±á¬_áá±".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ááá±.] LT [áá¾á¬]",nextDay:"[ááááºáá¼ááº] LT [áá¾á¬]",nextWeek:"dddd LT [áá¾á¬]",lastDay:"[ááá±.á] LT [áá¾á¬]",lastWeek:"[áá¼á®á¸áá²á·áá±á¬] dddd LT [áá¾á¬]",sameElse:"L"},relativeTime:{future:"áá¬áááºá· %s áá¾á¬",past:"áá½ááºáá²á·áá±á¬ %s á",s:"ááá¹áááº.á¡áááºá¸áááº",m:"áááºáá­áááº",mm:"%d áá­áááº",h:"áááºáá¬áá®",hh:"%d áá¬áá®",d:"áááºáááº",dd:"%d áááº",M:"áááºá",MM:"%d á",y:"áááºáá¾ááº",yy:"%d áá¾ááº"},preparse:function(a){return a.replace(/[áááááááááá]/g,function(a){return jh[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return ih[a]})},week:{dow:1,doy:4}}),a.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sÃ¸ndag_mandag_tirsdag_onsdag_torsdag_fredag_lÃ¸rdag".split("_"),weekdaysShort:"sÃ¸._ma._ti._on._to._fr._lÃ¸.".split("_"),weekdaysMin:"sÃ¸_ma_ti_on_to_fr_lÃ¸".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gÃ¥r kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mÃ¥ned",MM:"%d mÃ¥neder",y:"ett Ã¥r",yy:"%d Ã¥r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var kh={1:"à¥§",2:"à¥¨",3:"à¥©",4:"à¥ª",5:"à¥«",6:"à¥¬",7:"à¥­",8:"à¥®",9:"à¥¯",0:"à¥¦"},lh={"à¥§":"1","à¥¨":"2","à¥©":"3","à¥ª":"4","à¥«":"5","à¥¬":"6","à¥­":"7","à¥®":"8","à¥¯":"9","à¥¦":"0"};a.defineLocale("ne",{months:"à¤à¤¨à¤µà¤°à¥_à¤«à¥à¤¬à¥à¤°à¥à¤µà¤°à¥_à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¤¿à¤²_à¤®à¤_à¤à¥à¤¨_à¤à¥à¤²à¤¾à¤_à¤à¤à¤·à¥à¤_à¤¸à¥à¤ªà¥à¤à¥à¤®à¥à¤¬à¤°_à¤à¤à¥à¤à¥à¤¬à¤°_à¤¨à¥à¤­à¥à¤®à¥à¤¬à¤°_à¤¡à¤¿à¤¸à¥à¤®à¥à¤¬à¤°".split("_"),monthsShort:"à¤à¤¨._à¤«à¥à¤¬à¥à¤°à¥._à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¤¿._à¤®à¤_à¤à¥à¤¨_à¤à¥à¤²à¤¾à¤._à¤à¤._à¤¸à¥à¤ªà¥à¤._à¤à¤à¥à¤à¥._à¤¨à¥à¤­à¥._à¤¡à¤¿à¤¸à¥.".split("_"),monthsParseExact:!0,weekdays:"à¤à¤à¤¤à¤¬à¤¾à¤°_à¤¸à¥à¤®à¤¬à¤¾à¤°_à¤®à¤à¥à¤à¤²à¤¬à¤¾à¤°_à¤¬à¥à¤§à¤¬à¤¾à¤°_à¤¬à¤¿à¤¹à¤¿à¤¬à¤¾à¤°_à¤¶à¥à¤à¥à¤°à¤¬à¤¾à¤°_à¤¶à¤¨à¤¿à¤¬à¤¾à¤°".split("_"),weekdaysShort:"à¤à¤à¤¤._à¤¸à¥à¤®._à¤®à¤à¥à¤à¤²._à¤¬à¥à¤§._à¤¬à¤¿à¤¹à¤¿._à¤¶à¥à¤à¥à¤°._à¤¶à¤¨à¤¿.".split("_"),weekdaysMin:"à¤._à¤¸à¥._à¤®à¤._à¤¬à¥._à¤¬à¤¿._à¤¶à¥._à¤¶.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"Aà¤à¥ h:mm à¤¬à¤à¥",LTS:"Aà¤à¥ h:mm:ss à¤¬à¤à¥",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aà¤à¥ h:mm à¤¬à¤à¥",LLLL:"dddd, D MMMM YYYY, Aà¤à¥ h:mm à¤¬à¤à¥"},preparse:function(a){return a.replace(/[à¥§à¥¨à¥©à¥ªà¥«à¥¬à¥­à¥®à¥¯à¥¦]/g,function(a){return lh[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return kh[a]})},meridiemParse:/à¤°à¤¾à¤¤à¤¿|à¤¬à¤¿à¤¹à¤¾à¤¨|à¤¦à¤¿à¤à¤à¤¸à¥|à¤¸à¤¾à¤à¤/,meridiemHour:function(a,b){return 12===a&&(a=0),"à¤°à¤¾à¤¤à¤¿"===b?a<4?a:a+12:"à¤¬à¤¿à¤¹à¤¾à¤¨"===b?a:"à¤¦à¤¿à¤à¤à¤¸à¥"===b?a>=10?a:a+12:"à¤¸à¤¾à¤à¤"===b?a+12:void 0},meridiem:function(a,b,c){return a<3?"à¤°à¤¾à¤¤à¤¿":a<12?"à¤¬à¤¿à¤¹à¤¾à¤¨":a<16?"à¤¦à¤¿à¤à¤à¤¸à¥":a<20?"à¤¸à¤¾à¤à¤":"à¤°à¤¾à¤¤à¤¿"},calendar:{sameDay:"[à¤à¤] LT",nextDay:"[à¤­à¥à¤²à¤¿] LT",nextWeek:"[à¤à¤à¤à¤¦à¥] dddd[,] LT",lastDay:"[à¤¹à¤¿à¤à¥] LT",lastWeek:"[à¤à¤à¤à¥] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sà¤®à¤¾",past:"%s à¤à¤à¤¾à¤¡à¤¿",s:"à¤à¥à¤¹à¥ à¤à¥à¤·à¤£",m:"à¤à¤ à¤®à¤¿à¤¨à¥à¤",mm:"%d à¤®à¤¿à¤¨à¥à¤",h:"à¤à¤ à¤à¤£à¥à¤à¤¾",hh:"%d à¤à¤£à¥à¤à¤¾",d:"à¤à¤ à¤¦à¤¿à¤¨",dd:"%d à¤¦à¤¿à¤¨",M:"à¤à¤ à¤®à¤¹à¤¿à¤¨à¤¾",MM:"%d à¤®à¤¹à¤¿à¤¨à¤¾",y:"à¤à¤ à¤¬à¤°à¥à¤·",yy:"%d à¤¬à¤°à¥à¤·"},week:{dow:0,doy:6}});var mh="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),nh="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),oh=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],ph=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;a.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?nh[a.month()]:mh[a.month()]},monthsRegex:ph,monthsShortRegex:ph,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:oh,longMonthsParse:oh,shortMonthsParse:oh,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"Ã©Ã©n minuut",mm:"%d minuten",h:"Ã©Ã©n uur",hh:"%d uur",d:"Ã©Ã©n dag",dd:"%d dagen",M:"Ã©Ã©n maand",MM:"%d maanden",y:"Ã©Ã©n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}});var qh="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),rh="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),sh=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],th=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;a.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?rh[a.month()]:qh[a.month()]},monthsRegex:th,monthsShortRegex:th,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:sh,longMonthsParse:sh,shortMonthsParse:sh,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",
m:"Ã©Ã©n minuut",mm:"%d minuten",h:"Ã©Ã©n uur",hh:"%d uur",d:"Ã©Ã©n dag",dd:"%d dagen",M:"Ã©Ã©n maand",MM:"%d maanden",y:"Ã©Ã©n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}}),a.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mÃ¥ndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mÃ¥n_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_mÃ¥_ty_on_to_fr_lÃ¸".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gÃ¥r klokka] LT",lastWeek:"[FÃ¸regÃ¥ande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mÃ¥nad",MM:"%d mÃ¥nader",y:"eit Ã¥r",yy:"%d Ã¥r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var uh={1:"à©§",2:"à©¨",3:"à©©",4:"à©ª",5:"à©«",6:"à©¬",7:"à©­",8:"à©®",9:"à©¯",0:"à©¦"},vh={"à©§":"1","à©¨":"2","à©©":"3","à©ª":"4","à©«":"5","à©¬":"6","à©­":"7","à©®":"8","à©¯":"9","à©¦":"0"};a.defineLocale("pa-in",{months:"à¨à¨¨à¨µà¨°à©_à¨«à¨¼à¨°à¨µà¨°à©_à¨®à¨¾à¨°à¨_à¨à¨ªà©à¨°à©à¨²_à¨®à¨_à¨à©à¨¨_à¨à©à¨²à¨¾à¨_à¨à¨à¨¸à¨¤_à¨¸à¨¤à©°à¨¬à¨°_à¨à¨à¨¤à©à¨¬à¨°_à¨¨à¨µà©°à¨¬à¨°_à¨¦à¨¸à©°à¨¬à¨°".split("_"),monthsShort:"à¨à¨¨à¨µà¨°à©_à¨«à¨¼à¨°à¨µà¨°à©_à¨®à¨¾à¨°à¨_à¨à¨ªà©à¨°à©à¨²_à¨®à¨_à¨à©à¨¨_à¨à©à¨²à¨¾à¨_à¨à¨à¨¸à¨¤_à¨¸à¨¤à©°à¨¬à¨°_à¨à¨à¨¤à©à¨¬à¨°_à¨¨à¨µà©°à¨¬à¨°_à¨¦à¨¸à©°à¨¬à¨°".split("_"),weekdays:"à¨à¨¤à¨µà¨¾à¨°_à¨¸à©à¨®à¨µà¨¾à¨°_à¨®à©°à¨à¨²à¨µà¨¾à¨°_à¨¬à©à¨§à¨µà¨¾à¨°_à¨µà©à¨°à¨µà¨¾à¨°_à¨¸à¨¼à©à©±à¨à¨°à¨µà¨¾à¨°_à¨¸à¨¼à¨¨à©à¨à¨°à¨µà¨¾à¨°".split("_"),weekdaysShort:"à¨à¨¤_à¨¸à©à¨®_à¨®à©°à¨à¨²_à¨¬à©à¨§_à¨µà©à¨°_à¨¸à¨¼à©à¨à¨°_à¨¸à¨¼à¨¨à©".split("_"),weekdaysMin:"à¨à¨¤_à¨¸à©à¨®_à¨®à©°à¨à¨²_à¨¬à©à¨§_à¨µà©à¨°_à¨¸à¨¼à©à¨à¨°_à¨¸à¨¼à¨¨à©".split("_"),longDateFormat:{LT:"A h:mm à¨µà¨à©",LTS:"A h:mm:ss à¨µà¨à©",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm à¨µà¨à©",LLLL:"dddd, D MMMM YYYY, A h:mm à¨µà¨à©"},calendar:{sameDay:"[à¨à¨] LT",nextDay:"[à¨à¨²] LT",nextWeek:"dddd, LT",lastDay:"[à¨à¨²] LT",lastWeek:"[à¨ªà¨¿à¨à¨²à©] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à¨µà¨¿à©±à¨",past:"%s à¨ªà¨¿à¨à¨²à©",s:"à¨à©à¨ à¨¸à¨à¨¿à©°à¨",m:"à¨à¨ à¨®à¨¿à©°à¨",mm:"%d à¨®à¨¿à©°à¨",h:"à¨à©±à¨ à¨à©°à¨à¨¾",hh:"%d à¨à©°à¨à©",d:"à¨à©±à¨ à¨¦à¨¿à¨¨",dd:"%d à¨¦à¨¿à¨¨",M:"à¨à©±à¨ à¨®à¨¹à©à¨¨à¨¾",MM:"%d à¨®à¨¹à©à¨¨à©",y:"à¨à©±à¨ à¨¸à¨¾à¨²",yy:"%d à¨¸à¨¾à¨²"},preparse:function(a){return a.replace(/[à©§à©¨à©©à©ªà©«à©¬à©­à©®à©¯à©¦]/g,function(a){return vh[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return uh[a]})},meridiemParse:/à¨°à¨¾à¨¤|à¨¸à¨µà©à¨°|à¨¦à©à¨ªà¨¹à¨¿à¨°|à¨¸à¨¼à¨¾à¨®/,meridiemHour:function(a,b){return 12===a&&(a=0),"à¨°à¨¾à¨¤"===b?a<4?a:a+12:"à¨¸à¨µà©à¨°"===b?a:"à¨¦à©à¨ªà¨¹à¨¿à¨°"===b?a>=10?a:a+12:"à¨¸à¨¼à¨¾à¨®"===b?a+12:void 0},meridiem:function(a,b,c){return a<4?"à¨°à¨¾à¨¤":a<10?"à¨¸à¨µà©à¨°":a<17?"à¨¦à©à¨ªà¨¹à¨¿à¨°":a<20?"à¨¸à¨¼à¨¾à¨®":"à¨°à¨¾à¨¤"},week:{dow:0,doy:6}});var wh="styczeÅ_luty_marzec_kwiecieÅ_maj_czerwiec_lipiec_sierpieÅ_wrzesieÅ_paÅºdziernik_listopad_grudzieÅ".split("_"),xh="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzeÅnia_paÅºdziernika_listopada_grudnia".split("_");a.defineLocale("pl",{months:function(a,b){return""===b?"("+xh[a.month()]+"|"+wh[a.month()]+")":/D MMMM/.test(b)?xh[a.month()]:wh[a.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paÅº_lis_gru".split("_"),weekdays:"niedziela_poniedziaÅek_wtorek_Åroda_czwartek_piÄtek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_År_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_År_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DziÅ o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszÅÄ niedzielÄ o] LT";case 3:return"[W zeszÅÄ ÅrodÄ o] LT";case 6:return"[W zeszÅÄ sobotÄ o] LT";default:return"[W zeszÅy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:Xd,mm:Xd,h:Xd,hh:Xd,d:"1 dzieÅ",dd:"%d dni",M:"miesiÄc",MM:Xd,y:"rok",yy:Xd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),a.defineLocale("pt-br",{months:"Janeiro_Fevereiro_MarÃ§o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_TerÃ§a-feira_Quarta-feira_Quinta-feira_Sexta-feira_SÃ¡bado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_SÃ¡b".split("_"),weekdaysMin:"Dom_2Âª_3Âª_4Âª_5Âª_6Âª_SÃ¡b".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [Ã s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [Ã s] HH:mm"},calendar:{sameDay:"[Hoje Ã s] LT",nextDay:"[AmanhÃ£ Ã s] LT",nextWeek:"dddd [Ã s] LT",lastDay:"[Ontem Ã s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Ãltimo] dddd [Ã s] LT":"[Ãltima] dddd [Ã s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrÃ¡s",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mÃªs",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}Âº/,ordinal:"%dÂº"}),a.defineLocale("pt",{months:"Janeiro_Fevereiro_MarÃ§o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_TerÃ§a-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_SÃ¡bado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_SÃ¡b".split("_"),weekdaysMin:"Dom_2Âª_3Âª_4Âª_5Âª_6Âª_SÃ¡b".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje Ã s] LT",nextDay:"[AmanhÃ£ Ã s] LT",nextWeek:"dddd [Ã s] LT",lastDay:"[Ontem Ã s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Ãltimo] dddd [Ã s] LT":"[Ãltima] dddd [Ã s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"hÃ¡ %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mÃªs",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}Âº/,ordinal:"%dÂº",week:{dow:1,doy:4}}),a.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminicÄ_luni_marÈi_miercuri_joi_vineri_sÃ¢mbÄtÄ".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_SÃ¢m".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_SÃ¢".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mÃ¢ine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s Ã®n urmÄ",s:"cÃ¢teva secunde",m:"un minut",mm:Yd,h:"o orÄ",hh:Yd,d:"o zi",dd:Yd,M:"o lunÄ",MM:Yd,y:"un an",yy:Yd},week:{dow:1,doy:7}});var yh=[/^ÑÐ½Ð²/i,/^ÑÐµÐ²/i,/^Ð¼Ð°Ñ/i,/^Ð°Ð¿Ñ/i,/^Ð¼Ð°[Ð¹Ñ]/i,/^Ð¸ÑÐ½/i,/^Ð¸ÑÐ»/i,/^Ð°Ð²Ð³/i,/^ÑÐµÐ½/i,/^Ð¾ÐºÑ/i,/^Ð½Ð¾Ñ/i,/^Ð´ÐµÐº/i];a.defineLocale("ru",{months:{format:"ÑÐ½Ð²Ð°ÑÑ_ÑÐµÐ²ÑÐ°Ð»Ñ_Ð¼Ð°ÑÑÐ°_Ð°Ð¿ÑÐµÐ»Ñ_Ð¼Ð°Ñ_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³ÑÑÑÐ°_ÑÐµÐ½ÑÑÐ±ÑÑ_Ð¾ÐºÑÑÐ±ÑÑ_Ð½Ð¾ÑÐ±ÑÑ_Ð´ÐµÐºÐ°Ð±ÑÑ".split("_"),standalone:"ÑÐ½Ð²Ð°ÑÑ_ÑÐµÐ²ÑÐ°Ð»Ñ_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐµÐ»Ñ_Ð¼Ð°Ð¹_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ½ÑÑÐ±ÑÑ_Ð¾ÐºÑÑÐ±ÑÑ_Ð½Ð¾ÑÐ±ÑÑ_Ð´ÐµÐºÐ°Ð±ÑÑ".split("_")},monthsShort:{format:"ÑÐ½Ð²._ÑÐµÐ²Ñ._Ð¼Ð°Ñ._Ð°Ð¿Ñ._Ð¼Ð°Ñ_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³._ÑÐµÐ½Ñ._Ð¾ÐºÑ._Ð½Ð¾ÑÐ±._Ð´ÐµÐº.".split("_"),standalone:"ÑÐ½Ð²._ÑÐµÐ²Ñ._Ð¼Ð°ÑÑ_Ð°Ð¿Ñ._Ð¼Ð°Ð¹_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³._ÑÐµÐ½Ñ._Ð¾ÐºÑ._Ð½Ð¾ÑÐ±._Ð´ÐµÐº.".split("_")},weekdays:{standalone:"Ð²Ð¾ÑÐºÑÐµÑÐµÐ½ÑÐµ_Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»ÑÐ½Ð¸Ðº_Ð²ÑÐ¾ÑÐ½Ð¸Ðº_ÑÑÐµÐ´Ð°_ÑÐµÑÐ²ÐµÑÐ³_Ð¿ÑÑÐ½Ð¸ÑÐ°_ÑÑÐ±Ð±Ð¾ÑÐ°".split("_"),format:"Ð²Ð¾ÑÐºÑÐµÑÐµÐ½ÑÐµ_Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»ÑÐ½Ð¸Ðº_Ð²ÑÐ¾ÑÐ½Ð¸Ðº_ÑÑÐµÐ´Ñ_ÑÐµÑÐ²ÐµÑÐ³_Ð¿ÑÑÐ½Ð¸ÑÑ_ÑÑÐ±Ð±Ð¾ÑÑ".split("_"),isFormat:/\[ ?[ÐÐ²] ?(?:Ð¿ÑÐ¾ÑÐ»ÑÑ|ÑÐ»ÐµÐ´ÑÑÑÑÑ|ÑÑÑ)? ?\] ?dddd/},weekdaysShort:"Ð²Ñ_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),weekdaysMin:"Ð²Ñ_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),monthsParse:yh,longMonthsParse:yh,shortMonthsParse:yh,monthsRegex:/^(ÑÐ½Ð²Ð°Ñ[ÑÑ]|ÑÐ½Ð²\.?|ÑÐµÐ²ÑÐ°Ð»[ÑÑ]|ÑÐµÐ²Ñ?\.?|Ð¼Ð°ÑÑÐ°?|Ð¼Ð°Ñ\.?|Ð°Ð¿ÑÐµÐ»[ÑÑ]|Ð°Ð¿Ñ\.?|Ð¼Ð°[Ð¹Ñ]|Ð¸ÑÐ½[ÑÑ]|Ð¸ÑÐ½\.?|Ð¸ÑÐ»[ÑÑ]|Ð¸ÑÐ»\.?|Ð°Ð²Ð³ÑÑÑÐ°?|Ð°Ð²Ð³\.?|ÑÐµÐ½ÑÑÐ±Ñ[ÑÑ]|ÑÐµÐ½Ñ?\.?|Ð¾ÐºÑÑÐ±Ñ[ÑÑ]|Ð¾ÐºÑ\.?|Ð½Ð¾ÑÐ±Ñ[ÑÑ]|Ð½Ð¾ÑÐ±?\.?|Ð´ÐµÐºÐ°Ð±Ñ[ÑÑ]|Ð´ÐµÐº\.?)/i,monthsShortRegex:/^(ÑÐ½Ð²Ð°Ñ[ÑÑ]|ÑÐ½Ð²\.?|ÑÐµÐ²ÑÐ°Ð»[ÑÑ]|ÑÐµÐ²Ñ?\.?|Ð¼Ð°ÑÑÐ°?|Ð¼Ð°Ñ\.?|Ð°Ð¿ÑÐµÐ»[ÑÑ]|Ð°Ð¿Ñ\.?|Ð¼Ð°[Ð¹Ñ]|Ð¸ÑÐ½[ÑÑ]|Ð¸ÑÐ½\.?|Ð¸ÑÐ»[ÑÑ]|Ð¸ÑÐ»\.?|Ð°Ð²Ð³ÑÑÑÐ°?|Ð°Ð²Ð³\.?|ÑÐµÐ½ÑÑÐ±Ñ[ÑÑ]|ÑÐµÐ½Ñ?\.?|Ð¾ÐºÑÑÐ±Ñ[ÑÑ]|Ð¾ÐºÑ\.?|Ð½Ð¾ÑÐ±Ñ[ÑÑ]|Ð½Ð¾ÑÐ±?\.?|Ð´ÐµÐºÐ°Ð±Ñ[ÑÑ]|Ð´ÐµÐº\.?)/i,monthsStrictRegex:/^(ÑÐ½Ð²Ð°Ñ[ÑÑ]|ÑÐµÐ²ÑÐ°Ð»[ÑÑ]|Ð¼Ð°ÑÑÐ°?|Ð°Ð¿ÑÐµÐ»[ÑÑ]|Ð¼Ð°[ÑÐ¹]|Ð¸ÑÐ½[ÑÑ]|Ð¸ÑÐ»[ÑÑ]|Ð°Ð²Ð³ÑÑÑÐ°?|ÑÐµÐ½ÑÑÐ±Ñ[ÑÑ]|Ð¾ÐºÑÑÐ±Ñ[ÑÑ]|Ð½Ð¾ÑÐ±Ñ[ÑÑ]|Ð´ÐµÐºÐ°Ð±Ñ[ÑÑ])/i,monthsShortStrictRegex:/^(ÑÐ½Ð²\.|ÑÐµÐ²Ñ?\.|Ð¼Ð°Ñ[Ñ.]|Ð°Ð¿Ñ\.|Ð¼Ð°[ÑÐ¹]|Ð¸ÑÐ½[ÑÑ.]|Ð¸ÑÐ»[ÑÑ.]|Ð°Ð²Ð³\.|ÑÐµÐ½Ñ?\.|Ð¾ÐºÑ\.|Ð½Ð¾ÑÐ±?\.|Ð´ÐµÐº\.)/i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY Ð³.",LLL:"D MMMM YYYY Ð³., HH:mm",LLLL:"dddd, D MMMM YYYY Ð³., HH:mm"},calendar:{sameDay:"[Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ Ð²] LT",nextDay:"[ÐÐ°Ð²ÑÑÐ° Ð²] LT",lastDay:"[ÐÑÐµÑÐ° Ð²] LT",nextWeek:function(a){if(a.week()===this.week())return 2===this.day()?"[ÐÐ¾] dddd [Ð²] LT":"[Ð] dddd [Ð²] LT";switch(this.day()){case 0:return"[Ð ÑÐ»ÐµÐ´ÑÑÑÐµÐµ] dddd [Ð²] LT";case 1:case 2:case 4:return"[Ð ÑÐ»ÐµÐ´ÑÑÑÐ¸Ð¹] dddd [Ð²] LT";case 3:case 5:case 6:return"[Ð ÑÐ»ÐµÐ´ÑÑÑÑÑ] dddd [Ð²] LT"}},lastWeek:function(a){if(a.week()===this.week())return 2===this.day()?"[ÐÐ¾] dddd [Ð²] LT":"[Ð] dddd [Ð²] LT";switch(this.day()){case 0:return"[Ð Ð¿ÑÐ¾ÑÐ»Ð¾Ðµ] dddd [Ð²] LT";case 1:case 2:case 4:return"[Ð Ð¿ÑÐ¾ÑÐ»ÑÐ¹] dddd [Ð²] LT";case 3:case 5:case 6:return"[Ð Ð¿ÑÐ¾ÑÐ»ÑÑ] dddd [Ð²] LT"}},sameElse:"L"},relativeTime:{future:"ÑÐµÑÐµÐ· %s",past:"%s Ð½Ð°Ð·Ð°Ð´",s:"Ð½ÐµÑÐºÐ¾Ð»ÑÐºÐ¾ ÑÐµÐºÑÐ½Ð´",m:$d,mm:$d,h:"ÑÐ°Ñ",hh:$d,d:"Ð´ÐµÐ½Ñ",dd:$d,M:"Ð¼ÐµÑÑÑ",MM:$d,y:"Ð³Ð¾Ð´",yy:$d},meridiemParse:/Ð½Ð¾ÑÐ¸|ÑÑÑÐ°|Ð´Ð½Ñ|Ð²ÐµÑÐµÑÐ°/i,isPM:function(a){return/^(Ð´Ð½Ñ|Ð²ÐµÑÐµÑÐ°)$/.test(a)},meridiem:function(a,b,c){return a<4?"Ð½Ð¾ÑÐ¸":a<12?"ÑÑÑÐ°":a<17?"Ð´Ð½Ñ":"Ð²ÐµÑÐµÑÐ°"},ordinalParse:/\d{1,2}-(Ð¹|Ð³Ð¾|Ñ)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":return a+"-Ð¹";case"D":return a+"-Ð³Ð¾";case"w":case"W":return a+"-Ñ";default:return a}},week:{dow:1,doy:7}}),a.defineLocale("se",{months:"oÄÄajagemÃ¡nnu_guovvamÃ¡nnu_njukÄamÃ¡nnu_cuoÅomÃ¡nnu_miessemÃ¡nnu_geassemÃ¡nnu_suoidnemÃ¡nnu_borgemÃ¡nnu_ÄakÄamÃ¡nnu_golggotmÃ¡nnu_skÃ¡bmamÃ¡nnu_juovlamÃ¡nnu".split("_"),monthsShort:"oÄÄj_guov_njuk_cuo_mies_geas_suoi_borg_ÄakÄ_golg_skÃ¡b_juov".split("_"),weekdays:"sotnabeaivi_vuossÃ¡rga_maÅÅebÃ¡rga_gaskavahkku_duorastat_bearjadat_lÃ¡vvardat".split("_"),weekdaysShort:"sotn_vuos_maÅ_gask_duor_bear_lÃ¡v".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaÅ¾es",past:"maÅit %s",s:"moadde sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mÃ¡nnu",MM:"%d mÃ¡nut",y:"okta jahki",yy:"%d jagit"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),a.defineLocale("si",{months:"à¶¢à¶±à·à·à¶»à·_à¶´à·à¶¶à¶»à·à·à¶»à·_à¶¸à·à¶»à·à¶­à·_à¶à¶´à·âà¶»à·à¶½à·_à¶¸à·à¶ºà·_à¶¢à·à¶±à·_à¶¢à·à¶½à·_à¶à¶à·à·à·à¶­à·_à·à·à¶´à·à¶­à·à¶¸à·à¶¶à¶»à·_à¶à¶à·à¶­à·à¶¶à¶»à·_à¶±à·à·à·à¶¸à·à¶¶à¶»à·_à¶¯à·à·à·à¶¸à·à¶¶à¶»à·".split("_"),monthsShort:"à¶¢à¶±_à¶´à·à¶¶_à¶¸à·à¶»à·_à¶à¶´à·_à¶¸à·à¶ºà·_à¶¢à·à¶±à·_à¶¢à·à¶½à·_à¶à¶à·_à·à·à¶´à·_à¶à¶à·_à¶±à·à·à·_à¶¯à·à·à·".split("_"),weekdays:"à¶à¶»à·à¶¯à·_à·à¶³à·à¶¯à·_à¶à¶à·à¶»à·à·à·à¶¯à·_à¶¶à¶¯à·à¶¯à·_à¶¶à·âà¶»à·à·à·à¶´à¶­à·à¶±à·à¶¯à·_à·à·à¶à·à¶»à·à¶¯à·_à·à·à¶±à·à·à¶»à·à¶¯à·".split("_"),weekdaysShort:"à¶à¶»à·_à·à¶³à·_à¶à¶_à¶¶à¶¯à·_à¶¶à·âà¶»à·_à·à·à¶à·_à·à·à¶±".split("_"),weekdaysMin:"à¶_à·_à¶_à¶¶_à¶¶à·âà¶»_à·à·_à·à·".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [à·à·à¶±à·] dddd, a h:mm:ss"},calendar:{sameDay:"[à¶à¶¯] LT[à¶§]",nextDay:"[à·à·à¶§] LT[à¶§]",nextWeek:"dddd LT[à¶§]",lastDay:"[à¶à¶ºà·] LT[à¶§]",lastWeek:"[à¶´à·à·à¶à·à¶º] dddd LT[à¶§]",sameElse:"L"},relativeTime:{future:"%sà¶à·à¶±à·",past:"%sà¶à¶§ à¶´à·à¶»",s:"à¶­à¶­à·à¶´à¶» à¶à·à·à·à¶´à¶º",m:"à¶¸à·à¶±à·à¶­à·à¶­à·à·",mm:"à¶¸à·à¶±à·à¶­à·à¶­à· %d",h:"à¶´à·à¶º",hh:"à¶´à·à¶º %d",d:"à¶¯à·à¶±à¶º",dd:"à¶¯à·à¶± %d",M:"à¶¸à·à·à¶º",MM:"à¶¸à·à· %d",y:"à·à·à¶»",yy:"à·à·à¶» %d"},ordinalParse:/\d{1,2} à·à·à¶±à·/,ordinal:function(a){return a+" à·à·à¶±à·"},meridiemParse:/à¶´à·à¶» à·à¶»à·|à¶´à·à· à·à¶»à·|à¶´à·.à·|à¶´.à·./,isPM:function(a){return"à¶´.à·."===a||"à¶´à·à· à·à¶»à·"===a},meridiem:function(a,b,c){return a>11?c?"à¶´.à·.":"à¶´à·à· à·à¶»à·":c?"à¶´à·.à·.":"à¶´à·à¶» à·à¶»à·"}});var zh="januÃ¡r_februÃ¡r_marec_aprÃ­l_mÃ¡j_jÃºn_jÃºl_august_september_oktÃ³ber_november_december".split("_"),Ah="jan_feb_mar_apr_mÃ¡j_jÃºn_jÃºl_aug_sep_okt_nov_dec".split("_");a.defineLocale("sk",{months:zh,monthsShort:Ah,weekdays:"nedeÄ¾a_pondelok_utorok_streda_Å¡tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_Å¡t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_Å¡t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeÄ¾u o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo Å¡tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vÄera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulÃº nedeÄ¾u o] LT";case 1:case 2:return"[minulÃ½] dddd [o] LT";case 3:return"[minulÃº stredu o] LT";case 4:case 5:return"[minulÃ½] dddd [o] LT";case 6:return"[minulÃº sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:ae,m:ae,mm:ae,h:ae,hh:ae,d:ae,dd:ae,M:ae,MM:ae,y:ae,yy:ae},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),a.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_Äetrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._Äet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_Äe_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[vÄeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejÅ¡njo] [nedeljo] [ob] LT";case 3:return"[prejÅ¡njo] [sredo] [ob] LT";case 6:return"[prejÅ¡njo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejÅ¡nji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"Äez %s",past:"pred %s",s:be,m:be,mm:be,h:be,hh:be,d:be,dd:be,M:be,MM:be,y:be,yy:be},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),a.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_NÃ«ntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_NÃ«n_Dhj".split("_"),weekdays:"E Diel_E HÃ«nÃ«_E MartÃ«_E MÃ«rkurÃ«_E Enjte_E Premte_E ShtunÃ«".split("_"),weekdaysShort:"Die_HÃ«n_Mar_MÃ«r_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_MÃ«_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(a){return"M"===a.charAt(0)},meridiem:function(a,b,c){return a<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot nÃ«] LT",nextDay:"[NesÃ«r nÃ«] LT",nextWeek:"dddd [nÃ«] LT",lastDay:"[Dje nÃ«] LT",lastWeek:"dddd [e kaluar nÃ«] LT",sameElse:"L"},relativeTime:{future:"nÃ« %s",past:"%s mÃ« parÃ«",s:"disa sekonda",m:"njÃ« minutÃ«",mm:"%d minuta",h:"njÃ« orÃ«",hh:"%d orÃ«",d:"njÃ« ditÃ«",dd:"%d ditÃ«",M:"njÃ« muaj",MM:"%d muaj",y:"njÃ« vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var Bh={words:{m:["ÑÐµÐ´Ð°Ð½ Ð¼Ð¸Ð½ÑÑ","ÑÐµÐ´Ð½Ðµ Ð¼Ð¸Ð½ÑÑÐµ"],mm:["Ð¼Ð¸Ð½ÑÑ","Ð¼Ð¸Ð½ÑÑÐµ","Ð¼Ð¸Ð½ÑÑÐ°"],h:["ÑÐµÐ´Ð°Ð½ ÑÐ°Ñ","ÑÐµÐ´Ð½Ð¾Ð³ ÑÐ°ÑÐ°"],hh:["ÑÐ°Ñ","ÑÐ°ÑÐ°","ÑÐ°ÑÐ¸"],dd:["Ð´Ð°Ð½","Ð´Ð°Ð½Ð°","Ð´Ð°Ð½Ð°"],MM:["Ð¼ÐµÑÐµÑ","Ð¼ÐµÑÐµÑÐ°","Ð¼ÐµÑÐµÑÐ¸"],yy:["Ð³Ð¾Ð´Ð¸Ð½Ð°","Ð³Ð¾Ð´Ð¸Ð½Ðµ","Ð³Ð¾Ð´Ð¸Ð½Ð°"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&a<=4?b[1]:b[2]},translate:function(a,b,c){var d=Bh.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+Bh.correctGrammaticalCase(a,d)}};a.defineLocale("sr-cyrl",{months:"ÑÐ°Ð½ÑÐ°Ñ_ÑÐµÐ±ÑÑÐ°Ñ_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐ¸Ð»_Ð¼Ð°Ñ_ÑÑÐ½_ÑÑÐ»_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ¿ÑÐµÐ¼Ð±Ð°Ñ_Ð¾ÐºÑÐ¾Ð±Ð°Ñ_Ð½Ð¾Ð²ÐµÐ¼Ð±Ð°Ñ_Ð´ÐµÑÐµÐ¼Ð±Ð°Ñ".split("_"),monthsShort:"ÑÐ°Ð½._ÑÐµÐ±._Ð¼Ð°Ñ._Ð°Ð¿Ñ._Ð¼Ð°Ñ_ÑÑÐ½_ÑÑÐ»_Ð°Ð²Ð³._ÑÐµÐ¿._Ð¾ÐºÑ._Ð½Ð¾Ð²._Ð´ÐµÑ.".split("_"),monthsParseExact:!0,weekdays:"Ð½ÐµÐ´ÐµÑÐ°_Ð¿Ð¾Ð½ÐµÐ´ÐµÑÐ°Ðº_ÑÑÐ¾ÑÐ°Ðº_ÑÑÐµÐ´Ð°_ÑÐµÑÐ²ÑÑÐ°Ðº_Ð¿ÐµÑÐ°Ðº_ÑÑÐ±Ð¾ÑÐ°".split("_"),weekdaysShort:"Ð½ÐµÐ´._Ð¿Ð¾Ð½._ÑÑÐ¾._ÑÑÐµ._ÑÐµÑ._Ð¿ÐµÑ._ÑÑÐ±.".split("_"),weekdaysMin:"Ð½Ðµ_Ð¿Ð¾_ÑÑ_ÑÑ_ÑÐµ_Ð¿Ðµ_ÑÑ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Ð´Ð°Ð½Ð°Ñ Ñ] LT",nextDay:"[ÑÑÑÑÐ° Ñ] LT",nextWeek:function(){switch(this.day()){case 0:return"[Ñ] [Ð½ÐµÐ´ÐµÑÑ] [Ñ] LT";case 3:return"[Ñ] [ÑÑÐµÐ´Ñ] [Ñ] LT";case 6:return"[Ñ] [ÑÑÐ±Ð¾ÑÑ] [Ñ] LT";case 1:case 2:case 4:case 5:return"[Ñ] dddd [Ñ] LT"}},lastDay:"[ÑÑÑÐµ Ñ] LT",lastWeek:function(){var a=["[Ð¿ÑÐ¾ÑÐ»Ðµ] [Ð½ÐµÐ´ÐµÑÐµ] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ð¾Ð³] [Ð¿Ð¾Ð½ÐµÐ´ÐµÑÐºÐ°] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ð¾Ð³] [ÑÑÐ¾ÑÐºÐ°] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ðµ] [ÑÑÐµÐ´Ðµ] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ð¾Ð³] [ÑÐµÑÐ²ÑÑÐºÐ°] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ð¾Ð³] [Ð¿ÐµÑÐºÐ°] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ðµ] [ÑÑÐ±Ð¾ÑÐµ] [Ñ] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:"Ð·Ð° %s",past:"Ð¿ÑÐµ %s",s:"Ð½ÐµÐºÐ¾Ð»Ð¸ÐºÐ¾ ÑÐµÐºÑÐ½Ð´Ð¸",m:Bh.translate,mm:Bh.translate,h:Bh.translate,hh:Bh.translate,d:"Ð´Ð°Ð½",dd:Bh.translate,M:"Ð¼ÐµÑÐµÑ",MM:Bh.translate,y:"Ð³Ð¾Ð´Ð¸Ð½Ñ",yy:Bh.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var Ch={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&a<=4?b[1]:b[2]},translate:function(a,b,c){var d=Ch.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+Ch.correctGrammaticalCase(a,d)}};a.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_Äetvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._Äet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_Äe_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juÄe u] LT",lastWeek:function(){var a=["[proÅ¡le] [nedelje] [u] LT","[proÅ¡log] [ponedeljka] [u] LT","[proÅ¡log] [utorka] [u] LT","[proÅ¡le] [srede] [u] LT","[proÅ¡log] [Äetvrtka] [u] LT","[proÅ¡log] [petka] [u] LT","[proÅ¡le] [subote] [u] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:Ch.translate,mm:Ch.translate,h:Ch.translate,hh:Ch.translate,d:"dan",dd:Ch.translate,M:"mesec",MM:Ch.translate,y:"godinu",yy:Ch.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),a.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(a,b,c){return a<11?"ekuseni":a<15?"emini":a<19?"entsambama":"ebusuku"},meridiemHour:function(a,b){return 12===a&&(a=0),"ekuseni"===b?a:"emini"===b?a>=11?a:a+12:"entsambama"===b||"ebusuku"===b?0===a?0:a+12:void 0},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),a.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sÃ¶ndag_mÃ¥ndag_tisdag_onsdag_torsdag_fredag_lÃ¶rdag".split("_"),weekdaysShort:"sÃ¶n_mÃ¥n_tis_ons_tor_fre_lÃ¶r".split("_"),weekdaysMin:"sÃ¶_mÃ¥_ti_on_to_fr_lÃ¶".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[IgÃ¥r] LT",nextWeek:"[PÃ¥] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fÃ¶r %s sedan",s:"nÃ¥gra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mÃ¥nad",MM:"%d mÃ¥nader",y:"ett Ã¥r",yy:"%d Ã¥r"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"e":1===b?"a":2===b?"a":"e";return a+c},week:{dow:1,doy:4}}),a.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}});var Dh={1:"à¯§",2:"à¯¨",3:"à¯©",4:"à¯ª",5:"à¯«",6:"à¯¬",7:"à¯­",8:"à¯®",9:"à¯¯",0:"à¯¦"},Eh={"à¯§":"1","à¯¨":"2","à¯©":"3","à¯ª":"4","à¯«":"5","à¯¬":"6","à¯­":"7","à¯®":"8","à¯¯":"9","à¯¦":"0"};a.defineLocale("ta",{months:"à®à®©à®µà®°à®¿_à®ªà®¿à®ªà¯à®°à®µà®°à®¿_à®®à®¾à®°à¯à®à¯_à®à®ªà¯à®°à®²à¯_à®®à¯_à®à¯à®©à¯_à®à¯à®²à¯_à®à®à®¸à¯à®à¯_à®à¯à®ªà¯à®à¯à®®à¯à®ªà®°à¯_à®à®à¯à®à¯à®¾à®ªà®°à¯_à®¨à®µà®®à¯à®ªà®°à¯_à®à®¿à®à®®à¯à®ªà®°à¯".split("_"),monthsShort:"à®à®©à®µà®°à®¿_à®ªà®¿à®ªà¯à®°à®µà®°à®¿_à®®à®¾à®°à¯à®à¯_à®à®ªà¯à®°à®²à¯_à®®à¯_à®à¯à®©à¯_à®à¯à®²à¯_à®à®à®¸à¯à®à¯_à®à¯à®ªà¯à®à¯à®®à¯à®ªà®°à¯_à®à®à¯à®à¯à®¾à®ªà®°à¯_à®¨à®µà®®à¯à®ªà®°à¯_à®à®¿à®à®®à¯à®ªà®°à¯".split("_"),weekdays:"à®à®¾à®¯à®¿à®±à¯à®±à¯à®à¯à®à®¿à®´à®®à¯_à®¤à®¿à®à¯à®à®à¯à®à®¿à®´à®®à¯_à®à¯à®µà¯à®µà®¾à®¯à¯à®à®¿à®´à®®à¯_à®ªà¯à®¤à®©à¯à®à®¿à®´à®®à¯_à®µà®¿à®¯à®¾à®´à®à¯à®à®¿à®´à®®à¯_à®µà¯à®³à¯à®³à®¿à®à¯à®à®¿à®´à®®à¯_à®à®©à®¿à®à¯à®à®¿à®´à®®à¯".split("_"),weekdaysShort:"à®à®¾à®¯à®¿à®±à¯_à®¤à®¿à®à¯à®à®³à¯_à®à¯à®µà¯à®µà®¾à®¯à¯_à®ªà¯à®¤à®©à¯_à®µà®¿à®¯à®¾à®´à®©à¯_à®µà¯à®³à¯à®³à®¿_à®à®©à®¿".split("_"),weekdaysMin:"à®à®¾_à®¤à®¿_à®à¯_à®ªà¯_à®µà®¿_à®µà¯_à®".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[à®à®©à¯à®±à¯] LT",nextDay:"[à®¨à®¾à®³à¯] LT",nextWeek:"dddd, LT",lastDay:"[à®¨à¯à®±à¯à®±à¯] LT",lastWeek:"[à®à®à®¨à¯à®¤ à®µà®¾à®°à®®à¯] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à®à®²à¯",past:"%s à®®à¯à®©à¯",s:"à®à®°à¯ à®à®¿à®² à®µà®¿à®¨à®¾à®à®¿à®à®³à¯",m:"à®à®°à¯ à®¨à®¿à®®à®¿à®à®®à¯",mm:"%d à®¨à®¿à®®à®¿à®à®à¯à®à®³à¯",h:"à®à®°à¯ à®®à®£à®¿ à®¨à¯à®°à®®à¯",hh:"%d à®®à®£à®¿ à®¨à¯à®°à®®à¯",d:"à®à®°à¯ à®¨à®¾à®³à¯",dd:"%d à®¨à®¾à®à¯à®à®³à¯",M:"à®à®°à¯ à®®à®¾à®¤à®®à¯",MM:"%d à®®à®¾à®¤à®à¯à®à®³à¯",y:"à®à®°à¯ à®µà®°à¯à®à®®à¯",yy:"%d à®à®£à¯à®à¯à®à®³à¯"},ordinalParse:/\d{1,2}à®µà®¤à¯/,ordinal:function(a){return a+"à®µà®¤à¯"},preparse:function(a){return a.replace(/[à¯§à¯¨à¯©à¯ªà¯«à¯¬à¯­à¯®à¯¯à¯¦]/g,function(a){return Eh[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Dh[a]})},meridiemParse:/à®¯à®¾à®®à®®à¯|à®µà¯à®à®±à¯|à®à®¾à®²à¯|à®¨à®£à¯à®ªà®à®²à¯|à®à®±à¯à®ªà®¾à®à¯|à®®à®¾à®²à¯/,meridiem:function(a,b,c){return a<2?" à®¯à®¾à®®à®®à¯":a<6?" à®µà¯à®à®±à¯":a<10?" à®à®¾à®²à¯":a<14?" à®¨à®£à¯à®ªà®à®²à¯":a<18?" à®à®±à¯à®ªà®¾à®à¯":a<22?" à®®à®¾à®²à¯":" à®¯à®¾à®®à®®à¯"},meridiemHour:function(a,b){return 12===a&&(a=0),"à®¯à®¾à®®à®®à¯"===b?a<2?a:a+12:"à®µà¯à®à®±à¯"===b||"à®à®¾à®²à¯"===b?a:"à®¨à®£à¯à®ªà®à®²à¯"===b&&a>=10?a:a+12},week:{dow:0,doy:6}}),a.defineLocale("te",{months:"à°à°¨à°µà°°à°¿_à°«à°¿à°¬à±à°°à°µà°°à°¿_à°®à°¾à°°à±à°à°¿_à°à°ªà±à°°à°¿à°²à±_à°®à±_à°à±à°¨à±_à°à±à°²à±à±_à°à°à°¸à±à°à±_à°¸à±à°ªà±à°à±à°à°¬à°°à±_à°à°à±à°à±à°¬à°°à±_à°¨à°µà°à°¬à°°à±_à°¡à°¿à°¸à±à°à°¬à°°à±".split("_"),monthsShort:"à°à°¨._à°«à°¿à°¬à±à°°._à°®à°¾à°°à±à°à°¿_à°à°ªà±à°°à°¿._à°®à±_à°à±à°¨à±_à°à±à°²à±à±_à°à°._à°¸à±à°ªà±._à°à°à±à°à±._à°¨à°µ._à°¡à°¿à°¸à±.".split("_"),monthsParseExact:!0,weekdays:"à°à°¦à°¿à°µà°¾à°°à°_à°¸à±à°®à°µà°¾à°°à°_à°®à°à°à°³à°µà°¾à°°à°_à°¬à±à°§à°µà°¾à°°à°_à°à±à°°à±à°µà°¾à°°à°_à°¶à±à°à±à°°à°µà°¾à°°à°_à°¶à°¨à°¿à°µà°¾à°°à°".split("_"),weekdaysShort:"à°à°¦à°¿_à°¸à±à°®_à°®à°à°à°³_à°¬à±à°§_à°à±à°°à±_à°¶à±à°à±à°°_à°¶à°¨à°¿".split("_"),weekdaysMin:"à°_à°¸à±_à°®à°_à°¬à±_à°à±_à°¶à±_à°¶".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[à°¨à±à°¡à±] LT",nextDay:"[à°°à±à°ªà±] LT",nextWeek:"dddd, LT",lastDay:"[à°¨à°¿à°¨à±à°¨] LT",lastWeek:"[à°à°¤] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à°²à±",past:"%s à°à±à°°à°¿à°¤à°",s:"à°à±à°¨à±à°¨à°¿ à°à±à°·à°£à°¾à°²à±",m:"à°à° à°¨à°¿à°®à°¿à°·à°",mm:"%d à°¨à°¿à°®à°¿à°·à°¾à°²à±",h:"à°à° à°à°à°",hh:"%d à°à°à°à°²à±",d:"à°à° à°°à±à°à±",dd:"%d à°°à±à°à±à°²à±",M:"à°à° à°¨à±à°²",MM:"%d à°¨à±à°²à°²à±",y:"à°à° à°¸à°à°µà°¤à±à°¸à°°à°",yy:"%d à°¸à°à°µà°¤à±à°¸à°°à°¾à°²à±"},ordinalParse:/\d{1,2}à°µ/,ordinal:"%dà°µ",meridiemParse:/à°°à°¾à°¤à±à°°à°¿|à°à°¦à°¯à°|à°®à°§à±à°¯à°¾à°¹à±à°¨à°|à°¸à°¾à°¯à°à°¤à±à°°à°/,meridiemHour:function(a,b){return 12===a&&(a=0),"à°°à°¾à°¤à±à°°à°¿"===b?a<4?a:a+12:"à°à°¦à°¯à°"===b?a:"à°®à°§à±à°¯à°¾à°¹à±à°¨à°"===b?a>=10?a:a+12:"à°¸à°¾à°¯à°à°¤à±à°°à°"===b?a+12:void 0},meridiem:function(a,b,c){return a<4?"à°°à°¾à°¤à±à°°à°¿":a<10?"à°à°¦à°¯à°":a<17?"à°®à°§à±à°¯à°¾à°¹à±à°¨à°":a<20?"à°¸à°¾à°¯à°à°¤à±à°°à°":"à°°à°¾à°¤à±à°°à°¿"},week:{dow:0,doy:6}}),a.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juniu_Juliu_Augustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Aug_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sexta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sext_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Sex_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"minutu balun",m:"minutu ida",mm:"minutus %d",h:"horas ida",hh:"horas %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),a.defineLocale("th",{months:"à¸¡à¸à¸£à¸²à¸à¸¡_à¸à¸¸à¸¡à¸ à¸²à¸à¸±à¸à¸à¹_à¸¡à¸µà¸à¸²à¸à¸¡_à¹à¸¡à¸©à¸²à¸¢à¸_à¸à¸¤à¸©à¸ à¸²à¸à¸¡_à¸¡à¸´à¸à¸¸à¸à¸²à¸¢à¸_à¸à¸£à¸à¸à¸²à¸à¸¡_à¸ªà¸´à¸à¸«à¸²à¸à¸¡_à¸à¸±à¸à¸¢à¸²à¸¢à¸_à¸à¸¸à¸¥à¸²à¸à¸¡_à¸à¸¤à¸¨à¸à¸´à¸à¸²à¸¢à¸_à¸à¸±à¸à¸§à¸²à¸à¸¡".split("_"),monthsShort:"à¸¡.à¸._à¸.à¸._à¸¡à¸µ.à¸._à¹à¸¡.à¸¢._à¸.à¸._à¸¡à¸´.à¸¢._à¸.à¸._à¸ª.à¸._à¸.à¸¢._à¸.à¸._à¸.à¸¢._à¸.à¸.".split("_"),monthsParseExact:!0,weekdays:"à¸­à¸²à¸à¸´à¸à¸¢à¹_à¸à¸±à¸à¸à¸£à¹_à¸­à¸±à¸à¸à¸²à¸£_à¸à¸¸à¸_à¸à¸¤à¸«à¸±à¸ªà¸à¸à¸µ_à¸¨à¸¸à¸à¸£à¹_à¹à¸ªà¸²à¸£à¹".split("_"),weekdaysShort:"à¸­à¸²à¸à¸´à¸à¸¢à¹_à¸à¸±à¸à¸à¸£à¹_à¸­à¸±à¸à¸à¸²à¸£_à¸à¸¸à¸_à¸à¸¤à¸«à¸±à¸ª_à¸¨à¸¸à¸à¸£à¹_à¹à¸ªà¸²à¸£à¹".split("_"),weekdaysMin:"à¸­à¸²._à¸._à¸­._à¸._à¸à¸¤._à¸¨._à¸ª.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY à¹à¸§à¸¥à¸² H:mm",LLLL:"à¸§à¸±à¸ddddà¸à¸µà¹ D MMMM YYYY à¹à¸§à¸¥à¸² H:mm"},meridiemParse:/à¸à¹à¸­à¸à¹à¸à¸µà¹à¸¢à¸|à¸«à¸¥à¸±à¸à¹à¸à¸µà¹à¸¢à¸/,isPM:function(a){return"à¸«à¸¥à¸±à¸à¹à¸à¸µà¹à¸¢à¸"===a},meridiem:function(a,b,c){return a<12?"à¸à¹à¸­à¸à¹à¸à¸µà¹à¸¢à¸":"à¸«à¸¥à¸±à¸à¹à¸à¸µà¹à¸¢à¸"},calendar:{sameDay:"[à¸§à¸±à¸à¸à¸µà¹ à¹à¸§à¸¥à¸²] LT",nextDay:"[à¸à¸£à¸¸à¹à¸à¸à¸µà¹ à¹à¸§à¸¥à¸²] LT",nextWeek:"dddd[à¸«à¸à¹à¸² à¹à¸§à¸¥à¸²] LT",lastDay:"[à¹à¸¡à¸·à¹à¸­à¸§à¸²à¸à¸à¸µà¹ à¹à¸§à¸¥à¸²] LT",lastWeek:"[à¸§à¸±à¸]dddd[à¸à¸µà¹à¹à¸¥à¹à¸§ à¹à¸§à¸¥à¸²] LT",sameElse:"L"},relativeTime:{future:"à¸­à¸µà¸ %s",past:"%sà¸à¸µà¹à¹à¸¥à¹à¸§",s:"à¹à¸¡à¹à¸à¸µà¹à¸§à¸´à¸à¸²à¸à¸µ",m:"1 à¸à¸²à¸à¸µ",mm:"%d à¸à¸²à¸à¸µ",h:"1 à¸à¸±à¹à¸§à¹à¸¡à¸",hh:"%d à¸à¸±à¹à¸§à¹à¸¡à¸",d:"1 à¸§à¸±à¸",dd:"%d à¸§à¸±à¸",M:"1 à¹à¸à¸·à¸­à¸",MM:"%d à¹à¸à¸·à¸­à¸",y:"1 à¸à¸µ",yy:"%d à¸à¸µ"}}),a.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(a){return a},week:{dow:1,doy:4}});var Fh="pagh_waâ_chaâ_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");a.defineLocale("tlh",{months:"teraâ jar waâ_teraâ jar chaâ_teraâ jar wej_teraâ jar loS_teraâ jar vagh_teraâ jar jav_teraâ jar Soch_teraâ jar chorgh_teraâ jar Hut_teraâ jar waâmaH_teraâ jar waâmaH waâ_teraâ jar waâmaH chaâ".split("_"),monthsShort:"jar waâ_jar chaâ_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar waâmaH_jar waâmaH waâ_jar waâmaH chaâ".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waâleS] LT",nextWeek:"LLL",lastDay:"[waâHuâ] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:ce,past:de,s:"puS lup",m:"waâ tup",mm:ee,h:"waâ rep",hh:ee,d:"waâ jaj",dd:ee,M:"waâ jar",MM:ee,y:"waâ DIS",yy:ee},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var Gh={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'Ã¼ncÃ¼",4:"'Ã¼ncÃ¼",100:"'Ã¼ncÃ¼",6:"'ncÄ±",9:"'uncu",10:"'uncu",30:"'uncu",60:"'Ä±ncÄ±",90:"'Ä±ncÄ±"};return a.defineLocale("tr",{months:"Ocak_Åubat_Mart_Nisan_MayÄ±s_Haziran_Temmuz_AÄustos_EylÃ¼l_Ekim_KasÄ±m_AralÄ±k".split("_"),monthsShort:"Oca_Åub_Mar_Nis_May_Haz_Tem_AÄu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_SalÄ±_ÃarÅamba_PerÅembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Ãar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ãa_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugÃ¼n saat] LT",nextDay:"[yarÄ±n saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dÃ¼n] LT",lastWeek:"[geÃ§en hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s Ã¶nce",s:"birkaÃ§ saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gÃ¼n",dd:"%d gÃ¼n",M:"bir ay",MM:"%d ay",y:"bir yÄ±l",yy:"%d yÄ±l"},ordinalParse:/\d{1,2}'(inci|nci|Ã¼ncÃ¼|ncÄ±|uncu|Ä±ncÄ±)/,ordinal:function(a){if(0===a)return a+"'Ä±ncÄ±";var b=a%10,c=a%100-b,d=a>=100?100:null;return a+(Gh[b]||Gh[c]||Gh[d])},week:{dow:1,doy:7}}),a.defineLocale("tzl",{months:"Januar_Fevraglh_MarÃ§_AvrÃ¯u_Mai_GÃ¼n_Julia_Guscht_Setemvar_ListopÃ¤ts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_GÃ¼n_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"SÃºladi_LÃºneÃ§i_Maitzi_MÃ¡rcuri_XhÃºadi_ViÃ©nerÃ§i_SÃ¡turi".split("_"),weekdaysShort:"SÃºl_LÃºn_Mai_MÃ¡r_XhÃº_ViÃ©_SÃ¡t".split("_"),weekdaysMin:"SÃº_LÃº_Ma_MÃ¡_Xh_Vi_SÃ¡".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(a){return"d'o"===a.toLowerCase()},meridiem:function(a,b,c){return a>11?c?"d'o":"D'O":c?"d'a":"D'A"},calendar:{sameDay:"[oxhi Ã ] LT",nextDay:"[demÃ  Ã ] LT",nextWeek:"dddd [Ã ] LT",lastDay:"[ieiri Ã ] LT",lastWeek:"[sÃ¼r el] dddd [lasteu Ã ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:ge,m:ge,mm:ge,h:ge,hh:ge,d:ge,dd:ge,M:ge,MM:ge,y:ge,yy:ge},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),a.defineLocale("tzm-latn",{months:"innayr_brË¤ayrË¤_marË¤sË¤_ibrir_mayyw_ywnyw_ywlywz_É£wÅ¡t_Å¡wtanbir_ktË¤wbrË¤_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brË¤ayrË¤_marË¤sË¤_ibrir_mayyw_ywnyw_ywlywz_É£wÅ¡t_Å¡wtanbir_ktË¤wbrË¤_nwwanbir_dwjnbir".split("_"),
weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiá¸yas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiá¸yas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiá¸yas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuá¸",mm:"%d minuá¸",h:"saÉa",hh:"%d tassaÉin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}}),a.defineLocale("tzm",{months:"âµâµâµâ´°âµ¢âµ_â´±âµâ´°âµ¢âµ_âµâ´°âµâµ_âµâ´±âµâµâµ_âµâ´°âµ¢âµ¢âµ_âµ¢âµâµâµ¢âµ_âµ¢âµâµâµ¢âµâµ£_âµâµâµâµ_âµâµâµâ´°âµâ´±âµâµ_â´½âµâµâ´±âµ_âµâµâµ¡â´°âµâ´±âµâµ_â´·âµâµâµâ´±âµâµ".split("_"),monthsShort:"âµâµâµâ´°âµ¢âµ_â´±âµâ´°âµ¢âµ_âµâ´°âµâµ_âµâ´±âµâµâµ_âµâ´°âµ¢âµ¢âµ_âµ¢âµâµâµ¢âµ_âµ¢âµâµâµ¢âµâµ£_âµâµâµâµ_âµâµâµâ´°âµâ´±âµâµ_â´½âµâµâ´±âµ_âµâµâµ¡â´°âµâ´±âµâµ_â´·âµâµâµâ´±âµâµ".split("_"),weekdays:"â´°âµâ´°âµâ´°âµ_â´°âµ¢âµâ´°âµ_â´°âµâµâµâ´°âµ_â´°â´½âµâ´°âµ_â´°â´½âµ¡â´°âµ_â´°âµâµâµâµ¡â´°âµ_â´°âµâµâ´¹âµ¢â´°âµ".split("_"),weekdaysShort:"â´°âµâ´°âµâ´°âµ_â´°âµ¢âµâ´°âµ_â´°âµâµâµâ´°âµ_â´°â´½âµâ´°âµ_â´°â´½âµ¡â´°âµ_â´°âµâµâµâµ¡â´°âµ_â´°âµâµâ´¹âµ¢â´°âµ".split("_"),weekdaysMin:"â´°âµâ´°âµâ´°âµ_â´°âµ¢âµâ´°âµ_â´°âµâµâµâ´°âµ_â´°â´½âµâ´°âµ_â´°â´½âµ¡â´°âµ_â´°âµâµâµâµ¡â´°âµ_â´°âµâµâ´¹âµ¢â´°âµ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[â´°âµâ´·âµ â´´] LT",nextDay:"[â´°âµâ´½â´° â´´] LT",nextWeek:"dddd [â´´] LT",lastDay:"[â´°âµâ´°âµâµ â´´] LT",lastWeek:"dddd [â´´] LT",sameElse:"L"},relativeTime:{future:"â´·â´°â´·âµ âµ âµ¢â´°âµ %s",past:"âµ¢â´°âµ %s",s:"âµâµâµâ´½",m:"âµâµâµâµâ´º",mm:"%d âµâµâµâµâ´º",h:"âµâ´°âµâ´°",hh:"%d âµâ´°âµâµâ´°âµâµâµ",d:"â´°âµâµ",dd:"%d oâµâµâ´°âµ",M:"â´°âµ¢oâµâµ",MM:"%d âµâµ¢âµ¢âµâµâµ",y:"â´°âµâ´³â´°âµ",yy:"%d âµâµâ´³â´°âµâµ"},week:{dow:6,doy:12}}),a.defineLocale("uk",{months:{format:"ÑÑÑÐ½Ñ_Ð»ÑÑÐ¾Ð³Ð¾_Ð±ÐµÑÐµÐ·Ð½Ñ_ÐºÐ²ÑÑÐ½Ñ_ÑÑÐ°Ð²Ð½Ñ_ÑÐµÑÐ²Ð½Ñ_Ð»Ð¸Ð¿Ð½Ñ_ÑÐµÑÐ¿Ð½Ñ_Ð²ÐµÑÐµÑÐ½Ñ_Ð¶Ð¾Ð²ÑÐ½Ñ_Ð»Ð¸ÑÑÐ¾Ð¿Ð°Ð´Ð°_Ð³ÑÑÐ´Ð½Ñ".split("_"),standalone:"ÑÑÑÐµÐ½Ñ_Ð»ÑÑÐ¸Ð¹_Ð±ÐµÑÐµÐ·ÐµÐ½Ñ_ÐºÐ²ÑÑÐµÐ½Ñ_ÑÑÐ°Ð²ÐµÐ½Ñ_ÑÐµÑÐ²ÐµÐ½Ñ_Ð»Ð¸Ð¿ÐµÐ½Ñ_ÑÐµÑÐ¿ÐµÐ½Ñ_Ð²ÐµÑÐµÑÐµÐ½Ñ_Ð¶Ð¾Ð²ÑÐµÐ½Ñ_Ð»Ð¸ÑÑÐ¾Ð¿Ð°Ð´_Ð³ÑÑÐ´ÐµÐ½Ñ".split("_")},monthsShort:"ÑÑÑ_Ð»ÑÑ_Ð±ÐµÑ_ÐºÐ²ÑÑ_ÑÑÐ°Ð²_ÑÐµÑÐ²_Ð»Ð¸Ð¿_ÑÐµÑÐ¿_Ð²ÐµÑ_Ð¶Ð¾Ð²Ñ_Ð»Ð¸ÑÑ_Ð³ÑÑÐ´".split("_"),weekdays:je,weekdaysShort:"Ð½Ð´_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),weekdaysMin:"Ð½Ð´_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY Ñ.",LLL:"D MMMM YYYY Ñ., HH:mm",LLLL:"dddd, D MMMM YYYY Ñ., HH:mm"},calendar:{sameDay:ke("[Ð¡ÑÐ¾Ð³Ð¾Ð´Ð½Ñ "),nextDay:ke("[ÐÐ°Ð²ÑÑÐ° "),lastDay:ke("[ÐÑÐ¾ÑÐ° "),nextWeek:ke("[Ð£] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return ke("[ÐÐ¸Ð½ÑÐ»Ð¾Ñ] dddd [").call(this);case 1:case 2:case 4:return ke("[ÐÐ¸Ð½ÑÐ»Ð¾Ð³Ð¾] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"Ð·Ð° %s",past:"%s ÑÐ¾Ð¼Ñ",s:"Ð´ÐµÐºÑÐ»ÑÐºÐ° ÑÐµÐºÑÐ½Ð´",m:ie,mm:ie,h:"Ð³Ð¾Ð´Ð¸Ð½Ñ",hh:ie,d:"Ð´ÐµÐ½Ñ",dd:ie,M:"Ð¼ÑÑÑÑÑ",MM:ie,y:"ÑÑÐº",yy:ie},meridiemParse:/Ð½Ð¾ÑÑ|ÑÐ°Ð½ÐºÑ|Ð´Ð½Ñ|Ð²ÐµÑÐ¾ÑÐ°/,isPM:function(a){return/^(Ð´Ð½Ñ|Ð²ÐµÑÐ¾ÑÐ°)$/.test(a)},meridiem:function(a,b,c){return a<4?"Ð½Ð¾ÑÑ":a<12?"ÑÐ°Ð½ÐºÑ":a<17?"Ð´Ð½Ñ":"Ð²ÐµÑÐ¾ÑÐ°"},ordinalParse:/\d{1,2}-(Ð¹|Ð³Ð¾)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":case"w":case"W":return a+"-Ð¹";case"D":return a+"-Ð³Ð¾";default:return a}},week:{dow:1,doy:7}}),a.defineLocale("uz",{months:"ÑÐ½Ð²Ð°Ñ_ÑÐµÐ²ÑÐ°Ð»_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐµÐ»_Ð¼Ð°Ð¹_Ð¸ÑÐ½_Ð¸ÑÐ»_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ½ÑÑÐ±Ñ_Ð¾ÐºÑÑÐ±Ñ_Ð½Ð¾ÑÐ±Ñ_Ð´ÐµÐºÐ°Ð±Ñ".split("_"),monthsShort:"ÑÐ½Ð²_ÑÐµÐ²_Ð¼Ð°Ñ_Ð°Ð¿Ñ_Ð¼Ð°Ð¹_Ð¸ÑÐ½_Ð¸ÑÐ»_Ð°Ð²Ð³_ÑÐµÐ½_Ð¾ÐºÑ_Ð½Ð¾Ñ_Ð´ÐµÐº".split("_"),weekdays:"Ð¯ÐºÑÐ°Ð½Ð±Ð°_ÐÑÑÐ°Ð½Ð±Ð°_Ð¡ÐµÑÐ°Ð½Ð±Ð°_Ð§Ð¾ÑÑÐ°Ð½Ð±Ð°_ÐÐ°Ð¹ÑÐ°Ð½Ð±Ð°_ÐÑÐ¼Ð°_Ð¨Ð°Ð½Ð±Ð°".split("_"),weekdaysShort:"Ð¯ÐºÑ_ÐÑÑ_Ð¡ÐµÑ_Ð§Ð¾Ñ_ÐÐ°Ð¹_ÐÑÐ¼_Ð¨Ð°Ð½".split("_"),weekdaysMin:"Ð¯Ðº_ÐÑ_Ð¡Ðµ_Ð§Ð¾_ÐÐ°_ÐÑ_Ð¨Ð°".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ÐÑÐ³ÑÐ½ ÑÐ¾Ð°Ñ] LT [Ð´Ð°]",nextDay:"[Ð­ÑÑÐ°Ð³Ð°] LT [Ð´Ð°]",nextWeek:"dddd [ÐºÑÐ½Ð¸ ÑÐ¾Ð°Ñ] LT [Ð´Ð°]",lastDay:"[ÐÐµÑÐ° ÑÐ¾Ð°Ñ] LT [Ð´Ð°]",lastWeek:"[Ð£ÑÐ³Ð°Ð½] dddd [ÐºÑÐ½Ð¸ ÑÐ¾Ð°Ñ] LT [Ð´Ð°]",sameElse:"L"},relativeTime:{future:"Ð¯ÐºÐ¸Ð½ %s Ð¸ÑÐ¸Ð´Ð°",past:"ÐÐ¸Ñ Ð½ÐµÑÐ° %s Ð¾Ð»Ð´Ð¸Ð½",s:"ÑÑÑÑÐ°Ñ",m:"Ð±Ð¸Ñ Ð´Ð°ÐºÐ¸ÐºÐ°",mm:"%d Ð´Ð°ÐºÐ¸ÐºÐ°",h:"Ð±Ð¸Ñ ÑÐ¾Ð°Ñ",hh:"%d ÑÐ¾Ð°Ñ",d:"Ð±Ð¸Ñ ÐºÑÐ½",dd:"%d ÐºÑÐ½",M:"Ð±Ð¸Ñ Ð¾Ð¹",MM:"%d Ð¾Ð¹",y:"Ð±Ð¸Ñ Ð¹Ð¸Ð»",yy:"%d Ð¹Ð¸Ð»"},week:{dow:1,doy:7}}),a.defineLocale("vi",{months:"thÃ¡ng 1_thÃ¡ng 2_thÃ¡ng 3_thÃ¡ng 4_thÃ¡ng 5_thÃ¡ng 6_thÃ¡ng 7_thÃ¡ng 8_thÃ¡ng 9_thÃ¡ng 10_thÃ¡ng 11_thÃ¡ng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"chá»§ nháº­t_thá»© hai_thá»© ba_thá»© tÆ°_thá»© nÄm_thá»© sÃ¡u_thá»© báº£y".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(a){return/^ch$/i.test(a)},meridiem:function(a,b,c){return a<12?c?"sa":"SA":c?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nÄm] YYYY",LLL:"D MMMM [nÄm] YYYY HH:mm",LLLL:"dddd, D MMMM [nÄm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[HÃ´m nay lÃºc] LT",nextDay:"[NgÃ y mai lÃºc] LT",nextWeek:"dddd [tuáº§n tá»i lÃºc] LT",lastDay:"[HÃ´m qua lÃºc] LT",lastWeek:"dddd [tuáº§n rá»i lÃºc] LT",sameElse:"L"},relativeTime:{future:"%s tá»i",past:"%s trÆ°á»c",s:"vÃ i giÃ¢y",m:"má»t phÃºt",mm:"%d phÃºt",h:"má»t giá»",hh:"%d giá»",d:"má»t ngÃ y",dd:"%d ngÃ y",M:"má»t thÃ¡ng",MM:"%d thÃ¡ng",y:"má»t nÄm",yy:"%d nÄm"},ordinalParse:/\d{1,2}/,ordinal:function(a){return a},week:{dow:1,doy:4}}),a.defineLocale("x-pseudo",{months:"J~Ã¡Ã±ÃºÃ¡~rÃ½_F~Ã©brÃº~Ã¡rÃ½_~MÃ¡rc~h_Ãp~rÃ­l_~MÃ¡Ã½_~JÃºÃ±Ã©~_JÃºl~Ã½_ÃÃº~gÃºst~_SÃ©p~tÃ©mb~Ã©r_Ã~ctÃ³b~Ã©r_Ã~Ã³vÃ©m~bÃ©r_~DÃ©cÃ©~mbÃ©r".split("_"),monthsShort:"J~Ã¡Ã±_~FÃ©b_~MÃ¡r_~Ãpr_~MÃ¡Ã½_~JÃºÃ±_~JÃºl_~ÃÃºg_~SÃ©p_~Ãct_~ÃÃ³v_~DÃ©c".split("_"),monthsParseExact:!0,weekdays:"S~ÃºÃ±dÃ¡~Ã½_MÃ³~Ã±dÃ¡Ã½~_TÃºÃ©~sdÃ¡Ã½~_WÃ©d~Ã±Ã©sd~Ã¡Ã½_T~hÃºrs~dÃ¡Ã½_~FrÃ­d~Ã¡Ã½_S~Ã¡tÃºr~dÃ¡Ã½".split("_"),weekdaysShort:"S~ÃºÃ±_~MÃ³Ã±_~TÃºÃ©_~WÃ©d_~ThÃº_~FrÃ­_~SÃ¡t".split("_"),weekdaysMin:"S~Ãº_MÃ³~_TÃº_~WÃ©_T~h_Fr~_SÃ¡".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~Ã³dÃ¡~Ã½ Ã¡t] LT",nextDay:"[T~Ã³mÃ³~rrÃ³~w Ã¡t] LT",nextWeek:"dddd [Ã¡t] LT",lastDay:"[Ã~Ã©st~Ã©rdÃ¡~Ã½ Ã¡t] LT",lastWeek:"[L~Ã¡st] dddd [Ã¡t] LT",sameElse:"L"},relativeTime:{future:"Ã­~Ã± %s",past:"%s Ã¡~gÃ³",s:"Ã¡ ~fÃ©w ~sÃ©cÃ³~Ã±ds",m:"Ã¡ ~mÃ­Ã±~ÃºtÃ©",mm:"%d m~Ã­Ã±Ãº~tÃ©s",h:"Ã¡~Ã± hÃ³~Ãºr",hh:"%d h~Ã³Ãºrs",d:"Ã¡ ~dÃ¡Ã½",dd:"%d d~Ã¡Ã½s",M:"Ã¡ ~mÃ³Ã±~th",MM:"%d m~Ã³Ã±t~hs",y:"Ã¡ ~Ã½Ã©Ã¡r",yy:"%d Ã½~Ã©Ã¡rs"},ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),a.defineLocale("zh-cn",{months:"ä¸æ_äºæ_ä¸æ_åæ_äºæ_å­æ_ä¸æ_å«æ_ä¹æ_åæ_åä¸æ_åäºæ".split("_"),monthsShort:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),weekdays:"æææ¥_ææä¸_ææäº_ææä¸_ææå_ææäº_ææå­".split("_"),weekdaysShort:"å¨æ¥_å¨ä¸_å¨äº_å¨ä¸_å¨å_å¨äº_å¨å­".split("_"),weekdaysMin:"æ¥_ä¸_äº_ä¸_å_äº_å­".split("_"),longDateFormat:{LT:"Ahç¹mmå",LTS:"Ahç¹måsç§",L:"YYYY-MM-DD",LL:"YYYYå¹´MMMDæ¥",LLL:"YYYYå¹´MMMDæ¥Ahç¹mmå",LLLL:"YYYYå¹´MMMDæ¥ddddAhç¹mmå",l:"YYYY-MM-DD",ll:"YYYYå¹´MMMDæ¥",lll:"YYYYå¹´MMMDæ¥Ahç¹mmå",llll:"YYYYå¹´MMMDæ¥ddddAhç¹mmå"},meridiemParse:/åæ¨|æ©ä¸|ä¸å|ä¸­å|ä¸å|æä¸/,meridiemHour:function(a,b){return 12===a&&(a=0),"åæ¨"===b||"æ©ä¸"===b||"ä¸å"===b?a:"ä¸å"===b||"æä¸"===b?a+12:a>=11?a:a+12},meridiem:function(a,b,c){var d=100*a+b;return d<600?"åæ¨":d<900?"æ©ä¸":d<1130?"ä¸å":d<1230?"ä¸­å":d<1800?"ä¸å":"æä¸"},calendar:{sameDay:function(){return 0===this.minutes()?"[ä»å¤©]Ah[ç¹æ´]":"[ä»å¤©]LT"},nextDay:function(){return 0===this.minutes()?"[æå¤©]Ah[ç¹æ´]":"[æå¤©]LT"},lastDay:function(){return 0===this.minutes()?"[æ¨å¤©]Ah[ç¹æ´]":"[æ¨å¤©]LT"},nextWeek:function(){var b,c;return b=a().startOf("week"),c=this.diff(b,"days")>=7?"[ä¸]":"[æ¬]",0===this.minutes()?c+"dddAhç¹æ´":c+"dddAhç¹mm"},lastWeek:function(){var b,c;return b=a().startOf("week"),c=this.unix()<b.unix()?"[ä¸]":"[æ¬]",0===this.minutes()?c+"dddAhç¹æ´":c+"dddAhç¹mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(æ¥|æ|å¨)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"æ¥";case"M":return a+"æ";case"w":case"W":return a+"å¨";default:return a}},relativeTime:{future:"%så",past:"%så",s:"å ç§",m:"1 åé",mm:"%d åé",h:"1 å°æ¶",hh:"%d å°æ¶",d:"1 å¤©",dd:"%d å¤©",M:"1 ä¸ªæ",MM:"%d ä¸ªæ",y:"1 å¹´",yy:"%d å¹´"},week:{dow:1,doy:4}}),a.defineLocale("zh-hk",{months:"ä¸æ_äºæ_ä¸æ_åæ_äºæ_å­æ_ä¸æ_å«æ_ä¹æ_åæ_åä¸æ_åäºæ".split("_"),monthsShort:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),weekdays:"æææ¥_ææä¸_ææäº_ææä¸_ææå_ææäº_ææå­".split("_"),weekdaysShort:"é±æ¥_é±ä¸_é±äº_é±ä¸_é±å_é±äº_é±å­".split("_"),weekdaysMin:"æ¥_ä¸_äº_ä¸_å_äº_å­".split("_"),longDateFormat:{LT:"Ahé»mmå",LTS:"Ahé»måsç§",L:"YYYYå¹´MMMDæ¥",LL:"YYYYå¹´MMMDæ¥",LLL:"YYYYå¹´MMMDæ¥Ahé»mmå",LLLL:"YYYYå¹´MMMDæ¥ddddAhé»mmå",l:"YYYYå¹´MMMDæ¥",ll:"YYYYå¹´MMMDæ¥",lll:"YYYYå¹´MMMDæ¥Ahé»mmå",llll:"YYYYå¹´MMMDæ¥ddddAhé»mmå"},meridiemParse:/åæ¨|æ©ä¸|ä¸å|ä¸­å|ä¸å|æä¸/,meridiemHour:function(a,b){return 12===a&&(a=0),"åæ¨"===b||"æ©ä¸"===b||"ä¸å"===b?a:"ä¸­å"===b?a>=11?a:a+12:"ä¸å"===b||"æä¸"===b?a+12:void 0},meridiem:function(a,b,c){var d=100*a+b;return d<600?"åæ¨":d<900?"æ©ä¸":d<1130?"ä¸å":d<1230?"ä¸­å":d<1800?"ä¸å":"æä¸"},calendar:{sameDay:"[ä»å¤©]LT",nextDay:"[æå¤©]LT",nextWeek:"[ä¸]ddddLT",lastDay:"[æ¨å¤©]LT",lastWeek:"[ä¸]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(æ¥|æ|é±)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"æ¥";case"M":return a+"æ";case"w":case"W":return a+"é±";default:return a}},relativeTime:{future:"%så§",past:"%så",s:"å¹¾ç§",m:"1 åé",mm:"%d åé",h:"1 å°æ",hh:"%d å°æ",d:"1 å¤©",dd:"%d å¤©",M:"1 åæ",MM:"%d åæ",y:"1 å¹´",yy:"%d å¹´"}}),a.defineLocale("zh-tw",{months:"ä¸æ_äºæ_ä¸æ_åæ_äºæ_å­æ_ä¸æ_å«æ_ä¹æ_åæ_åä¸æ_åäºæ".split("_"),monthsShort:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),weekdays:"æææ¥_ææä¸_ææäº_ææä¸_ææå_ææäº_ææå­".split("_"),weekdaysShort:"é±æ¥_é±ä¸_é±äº_é±ä¸_é±å_é±äº_é±å­".split("_"),weekdaysMin:"æ¥_ä¸_äº_ä¸_å_äº_å­".split("_"),longDateFormat:{LT:"Ahé»mmå",LTS:"Ahé»måsç§",L:"YYYYå¹´MMMDæ¥",LL:"YYYYå¹´MMMDæ¥",LLL:"YYYYå¹´MMMDæ¥Ahé»mmå",LLLL:"YYYYå¹´MMMDæ¥ddddAhé»mmå",l:"YYYYå¹´MMMDæ¥",ll:"YYYYå¹´MMMDæ¥",lll:"YYYYå¹´MMMDæ¥Ahé»mmå",llll:"YYYYå¹´MMMDæ¥ddddAhé»mmå"},meridiemParse:/åæ¨|æ©ä¸|ä¸å|ä¸­å|ä¸å|æä¸/,meridiemHour:function(a,b){return 12===a&&(a=0),"åæ¨"===b||"æ©ä¸"===b||"ä¸å"===b?a:"ä¸­å"===b?a>=11?a:a+12:"ä¸å"===b||"æä¸"===b?a+12:void 0},meridiem:function(a,b,c){var d=100*a+b;return d<600?"åæ¨":d<900?"æ©ä¸":d<1130?"ä¸å":d<1230?"ä¸­å":d<1800?"ä¸å":"æä¸"},calendar:{sameDay:"[ä»å¤©]LT",nextDay:"[æå¤©]LT",nextWeek:"[ä¸]ddddLT",lastDay:"[æ¨å¤©]LT",lastWeek:"[ä¸]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(æ¥|æ|é±)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"æ¥";case"M":return a+"æ";case"w":case"W":return a+"é±";default:return a}},relativeTime:{future:"%så§",past:"%så",s:"å¹¾ç§",m:"1 åé",mm:"%d åé",h:"1 å°æ",hh:"%d å°æ",d:"1 å¤©",dd:"%d å¤©",M:"1 åæ",MM:"%d åæ",y:"1 å¹´",yy:"%d å¹´"}}),a.locale("en"),a});(function defineMustache(global,factory){if(typeof exports==="object"&&exports&&typeof exports.nodeName!=="string"){factory(exports)}else if(typeof define==="function"&&define.amd){define(["exports"],factory)}else{global.Mustache={};factory(global.Mustache)}})(this,function mustacheFactory(mustache){var objectToString=Object.prototype.toString;var isArray=Array.isArray||function isArrayPolyfill(object){return objectToString.call(object)==="[object Array]"};function isFunction(object){return typeof object==="function"}function typeStr(obj){return isArray(obj)?"array":typeof obj}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(obj,propName){return obj!=null&&typeof obj==="object"&&propName in obj}var regExpTest=RegExp.prototype.test;function testRegExp(re,string){return regExpTest.call(re,string)}var nonSpaceRe=/\S/;function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(string){return String(string).replace(/[&<>"'`=\/]/g,function fromEntityMap(s){return entityMap[s]})}var whiteRe=/\s*/;var spaceRe=/\s+/;var equalsRe=/\s*=/;var curlyRe=/\s*\}/;var tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(template,tags){if(!template)return[];var sections=[];var tokens=[];var spaces=[];var hasTag=false;var nonSpace=false;function stripSpace(){if(hasTag&&!nonSpace){while(spaces.length)delete tokens[spaces.pop()]}else{spaces=[]}hasTag=false;nonSpace=false}var openingTagRe,closingTagRe,closingCurlyRe;function compileTags(tagsToCompile){if(typeof tagsToCompile==="string")tagsToCompile=tagsToCompile.split(spaceRe,2);if(!isArray(tagsToCompile)||tagsToCompile.length!==2)throw new Error("Invalid tags: "+tagsToCompile);openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+"\\s*");closingTagRe=new RegExp("\\s*"+escapeRegExp(tagsToCompile[1]));closingCurlyRe=new RegExp("\\s*"+escapeRegExp("}"+tagsToCompile[1]))}compileTags(tags||mustache.tags);var scanner=new Scanner(template);var start,type,value,chr,token,openSection;while(!scanner.eos()){start=scanner.pos;value=scanner.scanUntil(openingTagRe);if(value){for(var i=0,valueLength=value.length;i<valueLength;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length)}else{nonSpace=true}tokens.push(["text",chr,start,start+1]);start+=1;if(chr==="\n")stripSpace()}}if(!scanner.scan(openingTagRe))break;hasTag=true;type=scanner.scan(tagRe)||"name";scanner.scan(whiteRe);if(type==="="){value=scanner.scanUntil(equalsRe);scanner.scan(equalsRe);scanner.scanUntil(closingTagRe)}else if(type==="{"){value=scanner.scanUntil(closingCurlyRe);scanner.scan(curlyRe);scanner.scanUntil(closingTagRe);type="&"}else{value=scanner.scanUntil(closingTagRe)}if(!scanner.scan(closingTagRe))throw new Error("Unclosed tag at "+scanner.pos);token=[type,value,start,scanner.pos];tokens.push(token);if(type==="#"||type==="^"){sections.push(token)}else if(type==="/"){openSection=sections.pop();if(!openSection)throw new Error('Unopened section "'+value+'" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}else if(type==="name"||type==="{"||type==="&"){nonSpace=true}else if(type==="="){compileTags(value)}}openSection=sections.pop();if(openSection)throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return nestTokens(squashTokens(tokens))}function squashTokens(tokens){var squashedTokens=[];var token,lastToken;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];if(token){if(token[0]==="text"&&lastToken&&lastToken[0]==="text"){lastToken[1]+=token[1];lastToken[3]=token[3]}else{squashedTokens.push(token);lastToken=token}}}return squashedTokens}function nestTokens(tokens){var nestedTokens=[];var collector=nestedTokens;var sections=[];var token,section;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];switch(token[0]){case"#":case"^":collector.push(token);sections.push(token);collector=token[4]=[];break;case"/":section=sections.pop();section[5]=token[2];collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}}return nestedTokens}function Scanner(string){this.string=string;this.tail=string;this.pos=0}Scanner.prototype.eos=function eos(){return this.tail===""};Scanner.prototype.scan=function scan(re){var match=this.tail.match(re);if(!match||match.index!==0)return"";var string=match[0];this.tail=this.tail.substring(string.length);this.pos+=string.length;return string};Scanner.prototype.scanUntil=function scanUntil(re){var index=this.tail.search(re),match;switch(index){case-1:match=this.tail;this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index);this.tail=this.tail.substring(index)}this.pos+=match.length;return match};function Context(view,parentContext){this.view=view;this.cache={".":this.view};this.parent=parentContext}Context.prototype.push=function push(view){return new Context(view,this)};Context.prototype.lookup=function lookup(name){var cache=this.cache;var value;if(cache.hasOwnProperty(name)){value=cache[name]}else{var context=this,names,index,lookupHit=false;while(context){if(name.indexOf(".")>0){value=context.view;names=name.split(".");index=0;while(value!=null&&index<names.length){if(index===names.length-1)lookupHit=hasProperty(value,names[index]);value=value[names[index++]]}}else{value=context.view[name];lookupHit=hasProperty(context.view,name)}if(lookupHit)break;context=context.parent}cache[name]=value}if(isFunction(value))value=value.call(this.view);return value};function Writer(){this.cache={}}Writer.prototype.clearCache=function clearCache(){this.cache={}};Writer.prototype.parse=function parse(template,tags){var cache=this.cache;var tokens=cache[template];if(tokens==null)tokens=cache[template]=parseTemplate(template,tags);return tokens};Writer.prototype.render=function render(template,view,partials){var tokens=this.parse(template);var context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)};Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate){var buffer="";var token,symbol,value;for(var i=0,numTokens=tokens.length;i<numTokens;++i){value=undefined;token=tokens[i];symbol=token[0];if(symbol==="#")value=this.renderSection(token,context,partials,originalTemplate);else if(symbol==="^")value=this.renderInverted(token,context,partials,originalTemplate);else if(symbol===">")value=this.renderPartial(token,context,partials,originalTemplate);else if(symbol==="&")value=this.unescapedValue(token,context);else if(symbol==="name")value=this.escapedValue(token,context);else if(symbol==="text")value=this.rawValue(token);if(value!==undefined)buffer+=value}return buffer};Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate){var self=this;var buffer="";var value=context.lookup(token[1]);function subRender(template){return self.render(template,context,partials)}if(!value)return;if(isArray(value)){for(var j=0,valueLength=value.length;j<valueLength;++j){buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate)}}else if(typeof value==="object"||typeof value==="string"||typeof value==="number"){buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate)}else if(isFunction(value)){if(typeof originalTemplate!=="string")throw new Error("Cannot use higher-order sections without the original template");value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender);if(value!=null)buffer+=value}else{buffer+=this.renderTokens(token[4],context,partials,originalTemplate)}return buffer};Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate){var value=context.lookup(token[1]);if(!value||isArray(value)&&value.length===0)return this.renderTokens(token[4],context,partials,originalTemplate)};Writer.prototype.renderPartial=function renderPartial(token,context,partials){if(!partials)return;var value=isFunction(partials)?partials(token[1]):partials[token[1]];if(value!=null)return this.renderTokens(this.parse(value),context,partials,value)};Writer.prototype.unescapedValue=function unescapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return value};Writer.prototype.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return mustache.escape(value)};Writer.prototype.rawValue=function rawValue(token){return token[1]};mustache.name="mustache.js";mustache.version="2.2.1";mustache.tags=["{{","}}"];var defaultWriter=new Writer;mustache.clearCache=function clearCache(){return defaultWriter.clearCache()};mustache.parse=function parse(template,tags){return defaultWriter.parse(template,tags)};mustache.render=function render(template,view,partials){if(typeof template!=="string"){throw new TypeError('Invalid template! Template should be a "string" '+'but "'+typeStr(template)+'" was given as the first '+"argument for mustache#render(template, view, partials)")}return defaultWriter.render(template,view,partials)};mustache.to_html=function to_html(template,view,partials,send){var result=mustache.render(template,view,partials);if(isFunction(send)){send(result)}else{return result}};mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer});(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else if(typeof exports==="object"){factory(require("jquery"))}else{factory(jQuery)}})(function(jQuery){var S2=function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd){var S2=jQuery.fn.select2.amd}var S2;(function(){if(!S2||!S2.requirejs){if(!S2){S2={}}else{require=S2}var requirejs,require,define;(function(undef){var main,req,makeMap,handlers,defined={},waiting={},config={},defining={},hasOwn=Object.prototype.hasOwnProperty,aps=[].slice,jsSuffixRegExp=/\.js$/;function hasProp(obj,prop){return hasOwn.call(obj,prop)}function normalize(name,baseName){var nameParts,nameSegment,mapValue,foundMap,lastIndex,foundI,foundStarMap,starI,i,j,part,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"]||{};if(name&&name.charAt(0)==="."){if(baseName){name=name.split("/");lastIndex=name.length-1;if(config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])){name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")}name=baseParts.slice(0,baseParts.length-1).concat(name);for(i=0;i<name.length;i+=1){part=name[i];if(part==="."){name.splice(i,1);i-=1}else if(part===".."){if(i===1&&(name[2]===".."||name[0]==="..")){break}else if(i>0){name.splice(i-1,2);i-=2}}}name=name.join("/")}else if(name.indexOf("./")===0){name=name.substring(2)}}if((baseParts||starMap)&&map){nameParts=name.split("/");for(i=nameParts.length;i>0;i-=1){nameSegment=nameParts.slice(0,i).join("/");if(baseParts){for(j=baseParts.length;j>0;j-=1){mapValue=map[baseParts.slice(0,j).join("/")];if(mapValue){mapValue=mapValue[nameSegment];if(mapValue){foundMap=mapValue;foundI=i;break}}}}if(foundMap){break}if(!foundStarMap&&starMap&&starMap[nameSegment]){foundStarMap=starMap[nameSegment];starI=i}}if(!foundMap&&foundStarMap){foundMap=foundStarMap;foundI=starI}if(foundMap){nameParts.splice(0,foundI,foundMap);name=nameParts.join("/")}}return name}function makeRequire(relName,forceSync){return function(){var args=aps.call(arguments,0);if(typeof args[0]!=="string"&&args.length===1){args.push(null)}return req.apply(undef,args.concat([relName,forceSync]))}}function makeNormalize(relName){return function(name){return normalize(name,relName)}}function makeLoad(depName){return function(value){defined[depName]=value}}function callDep(name){if(hasProp(waiting,name)){var args=waiting[name];delete waiting[name];defining[name]=true;main.apply(undef,args)}if(!hasProp(defined,name)&&!hasProp(defining,name)){throw new Error("No "+name)}return defined[name]}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;if(index>-1){prefix=name.substring(0,index);name=name.substring(index+1,name.length)}return[prefix,name]}makeMap=function(name,relName){var plugin,parts=splitPrefix(name),prefix=parts[0];name=parts[1];if(prefix){prefix=normalize(prefix,relName);plugin=callDep(prefix)}if(prefix){if(plugin&&plugin.normalize){name=plugin.normalize(name,makeNormalize(relName))}else{name=normalize(name,relName)}}else{name=normalize(name,relName);parts=splitPrefix(name);prefix=parts[0];name=parts[1];if(prefix){plugin=callDep(prefix)}}return{f:prefix?prefix+"!"+name:name,n:name,pr:prefix,p:plugin}};function makeConfig(name){return function(){return config&&config.config&&config.config[name]||{}}}handlers={require:function(name){return makeRequire(name)},exports:function(name){var e=defined[name];if(typeof e!=="undefined"){return e}else{return defined[name]={}}},module:function(name){return{id:name,uri:"",exports:defined[name],config:makeConfig(name)}}};main=function(name,deps,callback,relName){var cjsModule,depName,ret,map,i,args=[],callbackType=typeof callback,usingExports;relName=relName||name;if(callbackType==="undefined"||callbackType==="function"){deps=!deps.length&&callback.length?["require","exports","module"]:deps;for(i=0;i<deps.length;i+=1){map=makeMap(deps[i],relName);depName=map.f;if(depName==="require"){args[i]=handlers.require(name)}else if(depName==="exports"){args[i]=handlers.exports(name);usingExports=true}else if(depName==="module"){cjsModule=args[i]=handlers.module(name)}else if(hasProp(defined,depName)||hasProp(waiting,depName)||hasProp(defining,depName)){args[i]=callDep(depName)}else if(map.p){map.p.load(map.n,makeRequire(relName,true),makeLoad(depName),{});args[i]=defined[depName]}else{throw new Error(name+" missing "+depName)}}ret=callback?callback.apply(defined[name],args):undefined;if(name){if(cjsModule&&cjsModule.exports!==undef&&cjsModule.exports!==defined[name]){defined[name]=cjsModule.exports}else if(ret!==undef||!usingExports){defined[name]=ret}}}else if(name){defined[name]=callback}};requirejs=require=req=function(deps,callback,relName,forceSync,alt){if(typeof deps==="string"){if(handlers[deps]){return handlers[deps](callback)}return callDep(makeMap(deps,callback).f)}else if(!deps.splice){config=deps;if(config.deps){req(config.deps,config.callback)}if(!callback){return}if(callback.splice){deps=callback;callback=relName;relName=null}else{deps=undef}}callback=callback||function(){};if(typeof relName==="function"){relName=forceSync;forceSync=alt}if(forceSync){main(undef,deps,callback,relName)}else{setTimeout(function(){main(undef,deps,callback,relName)},4)}return req};req.config=function(cfg){return req(cfg)};requirejs._defined=defined;define=function(name,deps,callback){if(typeof name!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!deps.splice){callback=deps;deps=[]}if(!hasProp(defined,name)&&!hasProp(waiting,name)){waiting[name]=[name,deps,callback]}};define.amd={jQuery:true}})();S2.requirejs=requirejs;S2.require=require;S2.define=define}})();S2.define("almond",function(){});S2.define("jquery",[],function(){var _$=jQuery||$;if(_$==null&&console&&console.error){console.error("Select2: An instance of jQuery or a jQuery-compatible library was not "+"found. Make sure that you are including jQuery before Select2 on your "+"web page.")}return _$});S2.define("select2/utils",["jquery"],function($){var Utils={};Utils.Extend=function(ChildClass,SuperClass){var __hasProp={}.hasOwnProperty;function BaseConstructor(){this.constructor=ChildClass}for(var key in SuperClass){if(__hasProp.call(SuperClass,key)){ChildClass[key]=SuperClass[key]}}BaseConstructor.prototype=SuperClass.prototype;ChildClass.prototype=new BaseConstructor;ChildClass.__super__=SuperClass.prototype;return ChildClass};function getMethods(theClass){var proto=theClass.prototype;var methods=[];for(var methodName in proto){var m=proto[methodName];if(typeof m!=="function"){continue}if(methodName==="constructor"){continue}methods.push(methodName)}return methods}Utils.Decorate=function(SuperClass,DecoratorClass){var decoratedMethods=getMethods(DecoratorClass);var superMethods=getMethods(SuperClass);function DecoratedClass(){var unshift=Array.prototype.unshift;var argCount=DecoratorClass.prototype.constructor.length;var calledConstructor=SuperClass.prototype.constructor;if(argCount>0){unshift.call(arguments,SuperClass.prototype.constructor);calledConstructor=DecoratorClass.prototype.constructor}calledConstructor.apply(this,arguments)}DecoratorClass.displayName=SuperClass.displayName;function ctr(){this.constructor=DecoratedClass}DecoratedClass.prototype=new ctr;for(var m=0;m<superMethods.length;m++){var superMethod=superMethods[m];DecoratedClass.prototype[superMethod]=SuperClass.prototype[superMethod]}var calledMethod=function(methodName){var originalMethod=function(){};if(methodName in DecoratedClass.prototype){originalMethod=DecoratedClass.prototype[methodName]}var decoratedMethod=DecoratorClass.prototype[methodName];return function(){var unshift=Array.prototype.unshift;unshift.call(arguments,originalMethod);return decoratedMethod.apply(this,arguments)}};for(var d=0;d<decoratedMethods.length;d++){var decoratedMethod=decoratedMethods[d];DecoratedClass.prototype[decoratedMethod]=calledMethod(decoratedMethod)}return DecoratedClass};var Observable=function(){this.listeners={}};Observable.prototype.on=function(event,callback){this.listeners=this.listeners||{};if(event in this.listeners){this.listeners[event].push(callback)}else{this.listeners[event]=[callback]}};Observable.prototype.trigger=function(event){var slice=Array.prototype.slice;this.listeners=this.listeners||{};if(event in this.listeners){this.invoke(this.listeners[event],slice.call(arguments,1))}if("*"in this.listeners){this.invoke(this.listeners["*"],arguments)}};Observable.prototype.invoke=function(listeners,params){for(var i=0,len=listeners.length;i<len;i++){listeners[i].apply(this,params)}};Utils.Observable=Observable;Utils.generateChars=function(length){var chars="";for(var i=0;i<length;i++){var randomChar=Math.floor(Math.random()*36);chars+=randomChar.toString(36)}return chars};Utils.bind=function(func,context){return function(){func.apply(context,arguments)}};Utils._convertData=function(data){for(var originalKey in data){var keys=originalKey.split("-");var dataLevel=data;if(keys.length===1){continue}for(var k=0;k<keys.length;k++){var key=keys[k];key=key.substring(0,1).toLowerCase()+key.substring(1);if(!(key in dataLevel)){dataLevel[key]={}}if(k==keys.length-1){dataLevel[key]=data[originalKey]}dataLevel=dataLevel[key]}delete data[originalKey]}return data};Utils.hasScroll=function(index,el){var $el=$(el);var overflowX=el.style.overflowX;var overflowY=el.style.overflowY;if(overflowX===overflowY&&(overflowY==="hidden"||overflowY==="visible")){return false}if(overflowX==="scroll"||overflowY==="scroll"){return true}return $el.innerHeight()<el.scrollHeight||$el.innerWidth()<el.scrollWidth};Utils.escapeMarkup=function(markup){var replaceMap={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};if(typeof markup!=="string"){return markup}return String(markup).replace(/[&<>"'\/\\]/g,function(match){return replaceMap[match]})};Utils.appendMany=function($element,$nodes){if($.fn.jquery.substr(0,3)==="1.7"){var $jqNodes=$();$.map($nodes,function(node){$jqNodes=$jqNodes.add(node)});$nodes=$jqNodes}$element.append($nodes)};return Utils});S2.define("select2/results",["jquery","./utils"],function($,Utils){function Results($element,options,dataAdapter){this.$element=$element;this.data=dataAdapter;this.options=options;Results.__super__.constructor.call(this)}Utils.Extend(Results,Utils.Observable);Results.prototype.render=function(){var $results=$('<ul class="select2-results__options" role="tree"></ul>');if(this.options.get("multiple")){$results.attr("aria-multiselectable","true")}this.$results=$results;return $results};Results.prototype.clear=function(){this.$results.empty()};Results.prototype.displayMessage=function(params){var escapeMarkup=this.options.get("escapeMarkup");this.clear();this.hideLoading();var $message=$('<li role="treeitem" aria-live="assertive"'+' class="select2-results__option"></li>');var message=this.options.get("translations").get(params.message);$message.append(escapeMarkup(message(params.args)));$message[0].className+=" select2-results__message";this.$results.append($message)};Results.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()};Results.prototype.append=function(data){this.hideLoading();var $options=[];if(data.results==null||data.results.length===0){if(this.$results.children().length===0){this.trigger("results:message",{message:"noResults"})}return}data.results=this.sort(data.results);for(var d=0;d<data.results.length;d++){var item=data.results[d];var $option=this.option(item);$options.push($option)}this.$results.append($options)};Results.prototype.position=function($results,$dropdown){var $resultsContainer=$dropdown.find(".select2-results");$resultsContainer.append($results)};Results.prototype.sort=function(data){var sorter=this.options.get("sorter");return sorter(data)};Results.prototype.setClasses=function(){var self=this;this.data.current(function(selected){var selectedIds=$.map(selected,function(s){return s.id.toString()});var $options=self.$results.find(".select2-results__option[aria-selected]");$options.each(function(){var $option=$(this);var item=$.data(this,"data");var id=""+item.id;if(item.element!=null&&item.element.selected||item.element==null&&$.inArray(id,selectedIds)>-1){$option.attr("aria-selected","true");
}else{$option.attr("aria-selected","false")}});var $selected=$options.filter("[aria-selected=true]");if($selected.length>0){$selected.first().trigger("mouseenter")}else{$options.first().trigger("mouseenter")}})};Results.prototype.showLoading=function(params){this.hideLoading();var loadingMore=this.options.get("translations").get("searching");var loading={disabled:true,loading:true,text:loadingMore(params)};var $loading=this.option(loading);$loading.className+=" loading-results";this.$results.prepend($loading)};Results.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()};Results.prototype.option=function(data){var option=document.createElement("li");option.className="select2-results__option";var attrs={role:"treeitem","aria-selected":"false"};if(data.disabled){delete attrs["aria-selected"];attrs["aria-disabled"]="true"}if(data.id==null){delete attrs["aria-selected"]}if(data._resultId!=null){option.id=data._resultId}if(data.title){option.title=data.title}if(data.children){attrs.role="group";attrs["aria-label"]=data.text;delete attrs["aria-selected"]}for(var attr in attrs){var val=attrs[attr];option.setAttribute(attr,val)}if(data.children){var $option=$(option);var label=document.createElement("strong");label.className="select2-results__group";var $label=$(label);this.template(data,label);var $children=[];for(var c=0;c<data.children.length;c++){var child=data.children[c];var $child=this.option(child);$children.push($child)}var $childrenContainer=$("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});$childrenContainer.append($children);$option.append(label);$option.append($childrenContainer)}else{this.template(data,option)}$.data(option,"data",data);return option};Results.prototype.bind=function(container,$container){var self=this;var id=container.id+"-results";this.$results.attr("id",id);container.on("results:all",function(params){self.clear();self.append(params.data);if(container.isOpen()){self.setClasses()}});container.on("results:append",function(params){self.append(params.data);if(container.isOpen()){self.setClasses()}});container.on("query",function(params){self.hideMessages();self.showLoading(params)});container.on("select",function(){if(!container.isOpen()){return}self.setClasses()});container.on("unselect",function(){if(!container.isOpen()){return}self.setClasses()});container.on("open",function(){self.$results.attr("aria-expanded","true");self.$results.attr("aria-hidden","false");self.setClasses();self.ensureHighlightVisible()});container.on("close",function(){self.$results.attr("aria-expanded","false");self.$results.attr("aria-hidden","true");self.$results.removeAttr("aria-activedescendant")});container.on("results:toggle",function(){var $highlighted=self.getHighlightedResults();if($highlighted.length===0){return}$highlighted.trigger("mouseup")});container.on("results:select",function(){var $highlighted=self.getHighlightedResults();if($highlighted.length===0){return}var data=$highlighted.data("data");if($highlighted.attr("aria-selected")=="true"){self.trigger("close",{})}else{self.trigger("select",{data:data})}});container.on("results:previous",function(){var $highlighted=self.getHighlightedResults();var $options=self.$results.find("[aria-selected]");var currentIndex=$options.index($highlighted);if(currentIndex===0){return}var nextIndex=currentIndex-1;if($highlighted.length===0){nextIndex=0}var $next=$options.eq(nextIndex);$next.trigger("mouseenter");var currentOffset=self.$results.offset().top;var nextTop=$next.offset().top;var nextOffset=self.$results.scrollTop()+(nextTop-currentOffset);if(nextIndex===0){self.$results.scrollTop(0)}else if(nextTop-currentOffset<0){self.$results.scrollTop(nextOffset)}});container.on("results:next",function(){var $highlighted=self.getHighlightedResults();var $options=self.$results.find("[aria-selected]");var currentIndex=$options.index($highlighted);var nextIndex=currentIndex+1;if(nextIndex>=$options.length){return}var $next=$options.eq(nextIndex);$next.trigger("mouseenter");var currentOffset=self.$results.offset().top+self.$results.outerHeight(false);var nextBottom=$next.offset().top+$next.outerHeight(false);var nextOffset=self.$results.scrollTop()+nextBottom-currentOffset;if(nextIndex===0){self.$results.scrollTop(0)}else if(nextBottom>currentOffset){self.$results.scrollTop(nextOffset)}});container.on("results:focus",function(params){params.element.addClass("select2-results__option--highlighted")});container.on("results:message",function(params){self.displayMessage(params)});if($.fn.mousewheel){this.$results.on("mousewheel",function(e){var top=self.$results.scrollTop();var bottom=self.$results.get(0).scrollHeight-top+e.deltaY;var isAtTop=e.deltaY>0&&top-e.deltaY<=0;var isAtBottom=e.deltaY<0&&bottom<=self.$results.height();if(isAtTop){self.$results.scrollTop(0);e.preventDefault();e.stopPropagation()}else if(isAtBottom){self.$results.scrollTop(self.$results.get(0).scrollHeight-self.$results.height());e.preventDefault();e.stopPropagation()}})}this.$results.on("mouseup",".select2-results__option[aria-selected]",function(evt){var $this=$(this);var data=$this.data("data");if($this.attr("aria-selected")==="true"){if(self.options.get("multiple")){self.trigger("unselect",{originalEvent:evt,data:data})}else{self.trigger("close",{})}return}self.trigger("select",{originalEvent:evt,data:data})});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(evt){var data=$(this).data("data");self.getHighlightedResults().removeClass("select2-results__option--highlighted");self.trigger("results:focus",{data:data,element:$(this)})})};Results.prototype.getHighlightedResults=function(){var $highlighted=this.$results.find(".select2-results__option--highlighted");return $highlighted};Results.prototype.destroy=function(){this.$results.remove()};Results.prototype.ensureHighlightVisible=function(){var $highlighted=this.getHighlightedResults();if($highlighted.length===0){return}var $options=this.$results.find("[aria-selected]");var currentIndex=$options.index($highlighted);var currentOffset=this.$results.offset().top;var nextTop=$highlighted.offset().top;var nextOffset=this.$results.scrollTop()+(nextTop-currentOffset);var offsetDelta=nextTop-currentOffset;nextOffset-=$highlighted.outerHeight(false)*2;if(currentIndex<=2){this.$results.scrollTop(0)}else if(offsetDelta>this.$results.outerHeight()||offsetDelta<0){this.$results.scrollTop(nextOffset)}};Results.prototype.template=function(result,container){var template=this.options.get("templateResult");var escapeMarkup=this.options.get("escapeMarkup");var content=template(result,container);if(content==null){container.style.display="none"}else if(typeof content==="string"){container.innerHTML=escapeMarkup(content)}else{$(container).append(content)}};return Results});S2.define("select2/keys",[],function(){var KEYS={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return KEYS});S2.define("select2/selection/base",["jquery","../utils","../keys"],function($,Utils,KEYS){function BaseSelection($element,options){this.$element=$element;this.options=options;BaseSelection.__super__.constructor.call(this)}Utils.Extend(BaseSelection,Utils.Observable);BaseSelection.prototype.render=function(){var $selection=$('<span class="select2-selection" role="combobox" '+' aria-haspopup="true" aria-expanded="false">'+"</span>");this._tabindex=0;if(this.$element.data("old-tabindex")!=null){this._tabindex=this.$element.data("old-tabindex")}else if(this.$element.attr("tabindex")!=null){this._tabindex=this.$element.attr("tabindex")}$selection.attr("title",this.$element.attr("title"));$selection.attr("tabindex",this._tabindex);this.$selection=$selection;return $selection};BaseSelection.prototype.bind=function(container,$container){var self=this;var id=container.id+"-container";var resultsId=container.id+"-results";this.container=container;this.$selection.on("focus",function(evt){self.trigger("focus",evt)});this.$selection.on("blur",function(evt){self._handleBlur(evt)});this.$selection.on("keydown",function(evt){self.trigger("keypress",evt);if(evt.which===KEYS.SPACE){evt.preventDefault()}});container.on("results:focus",function(params){self.$selection.attr("aria-activedescendant",params.data._resultId)});container.on("selection:update",function(params){self.update(params.data)});container.on("open",function(){self.$selection.attr("aria-expanded","true");self.$selection.attr("aria-owns",resultsId);self._attachCloseHandler(container)});container.on("close",function(){self.$selection.attr("aria-expanded","false");self.$selection.removeAttr("aria-activedescendant");self.$selection.removeAttr("aria-owns");self.$selection.focus();self._detachCloseHandler(container)});container.on("enable",function(){self.$selection.attr("tabindex",self._tabindex)});container.on("disable",function(){self.$selection.attr("tabindex","-1")})};BaseSelection.prototype._handleBlur=function(evt){var self=this;window.setTimeout(function(){if(document.activeElement==self.$selection[0]||$.contains(self.$selection[0],document.activeElement)){return}self.trigger("blur",evt)},1)};BaseSelection.prototype._attachCloseHandler=function(container){var self=this;$(document.body).on("mousedown.select2."+container.id,function(e){var $target=$(e.target);var $select=$target.closest(".select2");var $all=$(".select2.select2-container--open");$all.each(function(){var $this=$(this);if(this==$select[0]){return}var $element=$this.data("element");$element.select2("close")})})};BaseSelection.prototype._detachCloseHandler=function(container){$(document.body).off("mousedown.select2."+container.id)};BaseSelection.prototype.position=function($selection,$container){var $selectionContainer=$container.find(".selection");$selectionContainer.append($selection)};BaseSelection.prototype.destroy=function(){this._detachCloseHandler(this.container)};BaseSelection.prototype.update=function(data){throw new Error("The `update` method must be defined in child classes.")};return BaseSelection});S2.define("select2/selection/single",["jquery","./base","../utils","../keys"],function($,BaseSelection,Utils,KEYS){function SingleSelection(){SingleSelection.__super__.constructor.apply(this,arguments)}Utils.Extend(SingleSelection,BaseSelection);SingleSelection.prototype.render=function(){var $selection=SingleSelection.__super__.render.call(this);$selection.addClass("select2-selection--single");$selection.html('<span class="select2-selection__rendered"></span>'+'<span class="select2-selection__arrow" role="presentation">'+'<b role="presentation"></b>'+"</span>");return $selection};SingleSelection.prototype.bind=function(container,$container){var self=this;SingleSelection.__super__.bind.apply(this,arguments);var id=container.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",id);this.$selection.attr("aria-labelledby",id);this.$selection.on("mousedown",function(evt){if(evt.which!==1){return}self.trigger("toggle",{originalEvent:evt})});this.$selection.on("focus",function(evt){});this.$selection.on("blur",function(evt){});container.on("selection:update",function(params){self.update(params.data)})};SingleSelection.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()};SingleSelection.prototype.display=function(data,container){var template=this.options.get("templateSelection");var escapeMarkup=this.options.get("escapeMarkup");return escapeMarkup(template(data,container))};SingleSelection.prototype.selectionContainer=function(){return $("<span></span>")};SingleSelection.prototype.update=function(data){if(data.length===0){this.clear();return}var selection=data[0];var $rendered=this.$selection.find(".select2-selection__rendered");var formatted=this.display(selection,$rendered);$rendered.empty().append(formatted);$rendered.prop("title",selection.title||selection.text)};return SingleSelection});S2.define("select2/selection/multiple",["jquery","./base","../utils"],function($,BaseSelection,Utils){function MultipleSelection($element,options){MultipleSelection.__super__.constructor.apply(this,arguments)}Utils.Extend(MultipleSelection,BaseSelection);MultipleSelection.prototype.render=function(){var $selection=MultipleSelection.__super__.render.call(this);$selection.addClass("select2-selection--multiple");$selection.html('<ul class="select2-selection__rendered"></ul>');return $selection};MultipleSelection.prototype.bind=function(container,$container){var self=this;MultipleSelection.__super__.bind.apply(this,arguments);this.$selection.on("click",function(evt){self.trigger("toggle",{originalEvent:evt})});this.$selection.on("click",".select2-selection__choice__remove",function(evt){if(self.options.get("disabled")){return}var $remove=$(this);var $selection=$remove.parent();var data=$selection.data("data");self.trigger("unselect",{originalEvent:evt,data:data})})};MultipleSelection.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()};MultipleSelection.prototype.display=function(data,container){var template=this.options.get("templateSelection");var escapeMarkup=this.options.get("escapeMarkup");return escapeMarkup(template(data,container))};MultipleSelection.prototype.selectionContainer=function(){var $container=$('<li class="select2-selection__choice">'+'<span class="select2-selection__choice__remove" role="presentation">'+"&times;"+"</span>"+"</li>");return $container};MultipleSelection.prototype.update=function(data){this.clear();if(data.length===0){return}var $selections=[];for(var d=0;d<data.length;d++){var selection=data[d];var $selection=this.selectionContainer();var formatted=this.display(selection,$selection);$selection.append(formatted);$selection.prop("title",selection.title||selection.text);$selection.data("data",selection);$selections.push($selection)}var $rendered=this.$selection.find(".select2-selection__rendered");Utils.appendMany($rendered,$selections)};return MultipleSelection});S2.define("select2/selection/placeholder",["../utils"],function(Utils){function Placeholder(decorated,$element,options){this.placeholder=this.normalizePlaceholder(options.get("placeholder"));decorated.call(this,$element,options)}Placeholder.prototype.normalizePlaceholder=function(_,placeholder){if(typeof placeholder==="string"){placeholder={id:"",text:placeholder}}return placeholder};Placeholder.prototype.createPlaceholder=function(decorated,placeholder){var $placeholder=this.selectionContainer();$placeholder.html(this.display(placeholder));$placeholder.addClass("select2-selection__placeholder").removeClass("select2-selection__choice");return $placeholder};Placeholder.prototype.update=function(decorated,data){var singlePlaceholder=data.length==1&&data[0].id!=this.placeholder.id;var multipleSelections=data.length>1;if(multipleSelections||singlePlaceholder){return decorated.call(this,data)}this.clear();var $placeholder=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append($placeholder)};return Placeholder});S2.define("select2/selection/allowClear",["jquery","../keys"],function($,KEYS){function AllowClear(){}AllowClear.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);if(this.placeholder==null){if(this.options.get("debug")&&window.console&&console.error){console.error("Select2: The `allowClear` option should be used in combination "+"with the `placeholder` option.")}}this.$selection.on("mousedown",".select2-selection__clear",function(evt){self._handleClear(evt)});container.on("keypress",function(evt){self._handleKeyboardClear(evt,container)})};AllowClear.prototype._handleClear=function(_,evt){if(this.options.get("disabled")){return}var $clear=this.$selection.find(".select2-selection__clear");if($clear.length===0){return}evt.stopPropagation();var data=$clear.data("data");for(var d=0;d<data.length;d++){var unselectData={data:data[d]};this.trigger("unselect",unselectData);if(unselectData.prevented){return}}this.$element.val(this.placeholder.id).trigger("change");this.trigger("toggle",{})};AllowClear.prototype._handleKeyboardClear=function(_,evt,container){if(container.isOpen()){return}if(evt.which==KEYS.DELETE||evt.which==KEYS.BACKSPACE){this._handleClear(evt)}};AllowClear.prototype.update=function(decorated,data){decorated.call(this,data);if(this.$selection.find(".select2-selection__placeholder").length>0||data.length===0){return}var $remove=$('<span class="select2-selection__clear">'+"&times;"+"</span>");$remove.data("data",data);this.$selection.find(".select2-selection__rendered").prepend($remove)};return AllowClear});S2.define("select2/selection/search",["jquery","../utils","../keys"],function($,Utils,KEYS){function Search(decorated,$element,options){decorated.call(this,$element,options)}Search.prototype.render=function(decorated){var $search=$('<li class="select2-search select2-search--inline">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="off"'+' spellcheck="false" role="textbox" aria-autocomplete="list" />'+"</li>");this.$searchContainer=$search;this.$search=$search.find("input");var $rendered=decorated.call(this);this._transferTabIndex();return $rendered};Search.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);container.on("open",function(){self.$search.trigger("focus")});container.on("close",function(){self.$search.val("");self.$search.removeAttr("aria-activedescendant");self.$search.trigger("focus")});container.on("enable",function(){self.$search.prop("disabled",false);self._transferTabIndex()});container.on("disable",function(){self.$search.prop("disabled",true)});container.on("focus",function(evt){self.$search.trigger("focus")});container.on("results:focus",function(params){self.$search.attr("aria-activedescendant",params.id)});this.$selection.on("focusin",".select2-search--inline",function(evt){self.trigger("focus",evt)});this.$selection.on("focusout",".select2-search--inline",function(evt){self._handleBlur(evt)});this.$selection.on("keydown",".select2-search--inline",function(evt){evt.stopPropagation();self.trigger("keypress",evt);self._keyUpPrevented=evt.isDefaultPrevented();var key=evt.which;if(key===KEYS.BACKSPACE&&self.$search.val()===""){var $previousChoice=self.$searchContainer.prev(".select2-selection__choice");if($previousChoice.length>0){var item=$previousChoice.data("data");self.searchRemoveChoice(item);evt.preventDefault()}}});var msie=document.documentMode;var disableInputEvents=msie&&msie<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(evt){if(disableInputEvents){self.$selection.off("input.search input.searchcheck");return}self.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(evt){if(disableInputEvents&&evt.type==="input"){self.$selection.off("input.search input.searchcheck");return}var key=evt.which;if(key==KEYS.SHIFT||key==KEYS.CTRL||key==KEYS.ALT){return}if(key==KEYS.TAB){return}self.handleSearch(evt)})};Search.prototype._transferTabIndex=function(decorated){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};Search.prototype.createPlaceholder=function(decorated,placeholder){this.$search.attr("placeholder",placeholder.text)};Search.prototype.update=function(decorated,data){var searchHadFocus=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");decorated.call(this,data);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();if(searchHadFocus){this.$search.focus()}};Search.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var input=this.$search.val();this.trigger("query",{term:input})}this._keyUpPrevented=false};Search.prototype.searchRemoveChoice=function(decorated,item){this.trigger("unselect",{data:item});this.$search.val(item.text);this.handleSearch()};Search.prototype.resizeSearch=function(){this.$search.css("width","25px");var width="";if(this.$search.attr("placeholder")!==""){width=this.$selection.find(".select2-selection__rendered").innerWidth()}else{var minimumWidth=this.$search.val().length+1;width=minimumWidth*.75+"em"}this.$search.css("width",width)};return Search});S2.define("select2/selection/eventRelay",["jquery"],function($){function EventRelay(){}EventRelay.prototype.bind=function(decorated,container,$container){var self=this;var relayEvents=["open","opening","close","closing","select","selecting","unselect","unselecting"];var preventableEvents=["opening","closing","selecting","unselecting"];decorated.call(this,container,$container);container.on("*",function(name,params){if($.inArray(name,relayEvents)===-1){return}params=params||{};var evt=$.Event("select2:"+name,{params:params});self.$element.trigger(evt);if($.inArray(name,preventableEvents)===-1){return}params.prevented=evt.isDefaultPrevented()})};return EventRelay});S2.define("select2/translation",["jquery","require"],function($,require){function Translation(dict){this.dict=dict||{}}Translation.prototype.all=function(){return this.dict};Translation.prototype.get=function(key){return this.dict[key]};Translation.prototype.extend=function(translation){this.dict=$.extend({},translation.all(),this.dict)};Translation._cache={};Translation.loadPath=function(path){if(!(path in Translation._cache)){var translations=require(path);Translation._cache[path]=translations}return new Translation(Translation._cache[path])};return Translation});S2.define("select2/diacritics",[],function(){var diacritics={"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï"};return diacritics});S2.define("select2/data/base",["../utils"],function(Utils){function BaseAdapter($element,options){BaseAdapter.__super__.constructor.call(this)}Utils.Extend(BaseAdapter,Utils.Observable);BaseAdapter.prototype.current=function(callback){throw new Error("The `current` method must be defined in child classes.")};BaseAdapter.prototype.query=function(params,callback){throw new Error("The `query` method must be defined in child classes.")};BaseAdapter.prototype.bind=function(container,$container){};BaseAdapter.prototype.destroy=function(){};BaseAdapter.prototype.generateResultId=function(container,data){var id=container.id+"-result-";id+=Utils.generateChars(4);if(data.id!=null){id+="-"+data.id.toString()}else{id+="-"+Utils.generateChars(4)}return id};return BaseAdapter});S2.define("select2/data/select",["./base","../utils","jquery"],function(BaseAdapter,Utils,$){function SelectAdapter($element,options){this.$element=$element;this.options=options;SelectAdapter.__super__.constructor.call(this)}Utils.Extend(SelectAdapter,BaseAdapter);SelectAdapter.prototype.current=function(callback){var data=[];var self=this;this.$element.find(":selected").each(function(){var $option=$(this);var option=self.item($option);data.push(option)});callback(data)};SelectAdapter.prototype.select=function(data){var self=this;data.selected=true;if($(data.element).is("option")){data.element.selected=true;this.$element.trigger("change");return}if(this.$element.prop("multiple")){this.current(function(currentData){var val=[];data=[data];data.push.apply(data,currentData);for(var d=0;d<data.length;d++){var id=data[d].id;if($.inArray(id,val)===-1){val.push(id)}}self.$element.val(val);self.$element.trigger("change")})}else{var val=data.id;this.$element.val(val);this.$element.trigger("change")}};SelectAdapter.prototype.unselect=function(data){var self=this;if(!this.$element.prop("multiple")){return}data.selected=false;if($(data.element).is("option")){data.element.selected=false;this.$element.trigger("change");return}this.current(function(currentData){var val=[];for(var d=0;d<currentData.length;d++){var id=currentData[d].id;if(id!==data.id&&$.inArray(id,val)===-1){val.push(id)}}self.$element.val(val);self.$element.trigger("change")})};SelectAdapter.prototype.bind=function(container,$container){var self=this;this.container=container;container.on("select",function(params){self.select(params.data)});container.on("unselect",function(params){self.unselect(params.data)})};SelectAdapter.prototype.destroy=function(){this.$element.find("*").each(function(){$.removeData(this,"data")})};SelectAdapter.prototype.query=function(params,callback){var data=[];var self=this;var $options=this.$element.children();$options.each(function(){var $option=$(this);if(!$option.is("option")&&!$option.is("optgroup")){return}var option=self.item($option);var matches=self.matches(params,option);if(matches!==null){data.push(matches)}});callback({results:data})};SelectAdapter.prototype.addOptions=function($options){Utils.appendMany(this.$element,$options)};SelectAdapter.prototype.option=function(data){var option;if(data.children){option=document.createElement("optgroup");option.label=data.text}else{option=document.createElement("option");if(option.textContent!==undefined){option.textContent=data.text}else{option.innerText=data.text}}if(data.id){option.value=data.id}if(data.disabled){option.disabled=true}if(data.selected){option.selected=true}if(data.title){option.title=data.title;
}var $option=$(option);var normalizedData=this._normalizeItem(data);normalizedData.element=option;$.data(option,"data",normalizedData);return $option};SelectAdapter.prototype.item=function($option){var data={};data=$.data($option[0],"data");if(data!=null){return data}if($option.is("option")){data={id:$option.val(),text:$option.text(),disabled:$option.prop("disabled"),selected:$option.prop("selected"),title:$option.prop("title")}}else if($option.is("optgroup")){data={text:$option.prop("label"),children:[],title:$option.prop("title")};var $children=$option.children("option");var children=[];for(var c=0;c<$children.length;c++){var $child=$($children[c]);var child=this.item($child);children.push(child)}data.children=children}data=this._normalizeItem(data);data.element=$option[0];$.data($option[0],"data",data);return data};SelectAdapter.prototype._normalizeItem=function(item){if(!$.isPlainObject(item)){item={id:item,text:item}}item=$.extend({},{text:""},item);var defaults={selected:false,disabled:false};if(item.id!=null){item.id=item.id.toString()}if(item.text!=null){item.text=item.text.toString()}if(item._resultId==null&&item.id&&this.container!=null){item._resultId=this.generateResultId(this.container,item)}return $.extend({},defaults,item)};SelectAdapter.prototype.matches=function(params,data){var matcher=this.options.get("matcher");return matcher(params,data)};return SelectAdapter});S2.define("select2/data/array",["./select","../utils","jquery"],function(SelectAdapter,Utils,$){function ArrayAdapter($element,options){var data=options.get("data")||[];ArrayAdapter.__super__.constructor.call(this,$element,options);this.addOptions(this.convertToOptions(data))}Utils.Extend(ArrayAdapter,SelectAdapter);ArrayAdapter.prototype.select=function(data){var $option=this.$element.find("option").filter(function(i,elm){return elm.value==data.id.toString()});if($option.length===0){$option=this.option(data);this.addOptions($option)}ArrayAdapter.__super__.select.call(this,data)};ArrayAdapter.prototype.convertToOptions=function(data){var self=this;var $existing=this.$element.find("option");var existingIds=$existing.map(function(){return self.item($(this)).id}).get();var $options=[];function onlyItem(item){return function(){return $(this).val()==item.id}}for(var d=0;d<data.length;d++){var item=this._normalizeItem(data[d]);if($.inArray(item.id,existingIds)>=0){var $existingOption=$existing.filter(onlyItem(item));var existingData=this.item($existingOption);var newData=$.extend(true,{},item,existingData);var $newOption=this.option(newData);$existingOption.replaceWith($newOption);continue}var $option=this.option(item);if(item.children){var $children=this.convertToOptions(item.children);Utils.appendMany($option,$children)}$options.push($option)}return $options};return ArrayAdapter});S2.define("select2/data/ajax",["./array","../utils","jquery"],function(ArrayAdapter,Utils,$){function AjaxAdapter($element,options){this.ajaxOptions=this._applyDefaults(options.get("ajax"));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults}AjaxAdapter.__super__.constructor.call(this,$element,options)}Utils.Extend(AjaxAdapter,ArrayAdapter);AjaxAdapter.prototype._applyDefaults=function(options){var defaults={data:function(params){return $.extend({},params,{q:params.term})},transport:function(params,success,failure){var $request=$.ajax(params);$request.then(success);$request.fail(failure);return $request}};return $.extend({},defaults,options,true)};AjaxAdapter.prototype.processResults=function(results){return results};AjaxAdapter.prototype.query=function(params,callback){var matches=[];var self=this;if(this._request!=null){if($.isFunction(this._request.abort)){this._request.abort()}this._request=null}var options=$.extend({type:"GET"},this.ajaxOptions);if(typeof options.url==="function"){options.url=options.url.call(this.$element,params)}if(typeof options.data==="function"){options.data=options.data.call(this.$element,params)}function request(){var $request=options.transport(options,function(data){var results=self.processResults(data,params);if(self.options.get("debug")&&window.console&&console.error){if(!results||!results.results||!$.isArray(results.results)){console.error("Select2: The AJAX results did not return an array in the "+"`results` key of the response.")}}callback(results)},function(){self.trigger("results:message",{message:"errorLoading"})});self._request=$request}if(this.ajaxOptions.delay&&params.term!==""){if(this._queryTimeout){window.clearTimeout(this._queryTimeout)}this._queryTimeout=window.setTimeout(request,this.ajaxOptions.delay)}else{request()}};return AjaxAdapter});S2.define("select2/data/tags",["jquery"],function($){function Tags(decorated,$element,options){var tags=options.get("tags");var createTag=options.get("createTag");if(createTag!==undefined){this.createTag=createTag}var insertTag=options.get("insertTag");if(insertTag!==undefined){this.insertTag=insertTag}decorated.call(this,$element,options);if($.isArray(tags)){for(var t=0;t<tags.length;t++){var tag=tags[t];var item=this._normalizeItem(tag);var $option=this.option(item);this.$element.append($option)}}}Tags.prototype.query=function(decorated,params,callback){var self=this;this._removeOldTags();if(params.term==null||params.page!=null){decorated.call(this,params,callback);return}function wrapper(obj,child){var data=obj.results;for(var i=0;i<data.length;i++){var option=data[i];var checkChildren=option.children!=null&&!wrapper({results:option.children},true);var checkText=option.text===params.term;if(checkText||checkChildren){if(child){return false}obj.data=data;callback(obj);return}}if(child){return true}var tag=self.createTag(params);if(tag!=null){var $option=self.option(tag);$option.attr("data-select2-tag",true);self.addOptions([$option]);self.insertTag(data,tag)}obj.results=data;callback(obj)}decorated.call(this,params,wrapper)};Tags.prototype.createTag=function(decorated,params){var term=$.trim(params.term);if(term===""){return null}return{id:term,text:term}};Tags.prototype.insertTag=function(_,data,tag){data.unshift(tag)};Tags.prototype._removeOldTags=function(_){var tag=this._lastTag;var $options=this.$element.find("option[data-select2-tag]");$options.each(function(){if(this.selected){return}$(this).remove()})};return Tags});S2.define("select2/data/tokenizer",["jquery"],function($){function Tokenizer(decorated,$element,options){var tokenizer=options.get("tokenizer");if(tokenizer!==undefined){this.tokenizer=tokenizer}decorated.call(this,$element,options)}Tokenizer.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container);this.$search=container.dropdown.$search||container.selection.$search||$container.find(".select2-search__field")};Tokenizer.prototype.query=function(decorated,params,callback){var self=this;function select(data){self.trigger("select",{data:data})}params.term=params.term||"";var tokenData=this.tokenizer(params,this.options,select);if(tokenData.term!==params.term){if(this.$search.length){this.$search.val(tokenData.term);this.$search.focus()}params.term=tokenData.term}decorated.call(this,params,callback)};Tokenizer.prototype.tokenizer=function(_,params,options,callback){var separators=options.get("tokenSeparators")||[];var term=params.term;var i=0;var createTag=this.createTag||function(params){return{id:params.term,text:params.term}};while(i<term.length){var termChar=term[i];if($.inArray(termChar,separators)===-1){i++;continue}var part=term.substr(0,i);var partParams=$.extend({},params,{term:part});var data=createTag(partParams);if(data==null){i++;continue}callback(data);term=term.substr(i+1)||"";i=0}return{term:term}};return Tokenizer});S2.define("select2/data/minimumInputLength",[],function(){function MinimumInputLength(decorated,$e,options){this.minimumInputLength=options.get("minimumInputLength");decorated.call(this,$e,options)}MinimumInputLength.prototype.query=function(decorated,params,callback){params.term=params.term||"";if(params.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:params.term,params:params}});return}decorated.call(this,params,callback)};return MinimumInputLength});S2.define("select2/data/maximumInputLength",[],function(){function MaximumInputLength(decorated,$e,options){this.maximumInputLength=options.get("maximumInputLength");decorated.call(this,$e,options)}MaximumInputLength.prototype.query=function(decorated,params,callback){params.term=params.term||"";if(this.maximumInputLength>0&&params.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:params.term,params:params}});return}decorated.call(this,params,callback)};return MaximumInputLength});S2.define("select2/data/maximumSelectionLength",[],function(){function MaximumSelectionLength(decorated,$e,options){this.maximumSelectionLength=options.get("maximumSelectionLength");decorated.call(this,$e,options)}MaximumSelectionLength.prototype.query=function(decorated,params,callback){var self=this;this.current(function(currentData){var count=currentData!=null?currentData.length:0;if(self.maximumSelectionLength>0&&count>=self.maximumSelectionLength){self.trigger("results:message",{message:"maximumSelected",args:{maximum:self.maximumSelectionLength}});return}decorated.call(self,params,callback)})};return MaximumSelectionLength});S2.define("select2/dropdown",["jquery","./utils"],function($,Utils){function Dropdown($element,options){this.$element=$element;this.options=options;Dropdown.__super__.constructor.call(this)}Utils.Extend(Dropdown,Utils.Observable);Dropdown.prototype.render=function(){var $dropdown=$('<span class="select2-dropdown">'+'<span class="select2-results"></span>'+"</span>");$dropdown.attr("dir",this.options.get("dir"));this.$dropdown=$dropdown;return $dropdown};Dropdown.prototype.bind=function(){};Dropdown.prototype.position=function($dropdown,$container){};Dropdown.prototype.destroy=function(){this.$dropdown.remove()};return Dropdown});S2.define("select2/dropdown/search",["jquery","../utils"],function($,Utils){function Search(){}Search.prototype.render=function(decorated){var $rendered=decorated.call(this);var $search=$('<span class="select2-search select2-search--dropdown">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="off"'+' spellcheck="false" role="textbox" />'+"</span>");this.$searchContainer=$search;this.$search=$search.find("input");$rendered.prepend($search);return $rendered};Search.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);this.$search.on("keydown",function(evt){self.trigger("keypress",evt);self._keyUpPrevented=evt.isDefaultPrevented()});this.$search.on("input",function(evt){$(this).off("keyup")});this.$search.on("keyup input",function(evt){self.handleSearch(evt)});container.on("open",function(){self.$search.attr("tabindex",0);self.$search.focus();window.setTimeout(function(){self.$search.focus()},0)});container.on("close",function(){self.$search.attr("tabindex",-1);self.$search.val("")});container.on("results:all",function(params){if(params.query.term==null||params.query.term===""){var showSearch=self.showSearch(params);if(showSearch){self.$searchContainer.removeClass("select2-search--hide")}else{self.$searchContainer.addClass("select2-search--hide")}}})};Search.prototype.handleSearch=function(evt){if(!this._keyUpPrevented){var input=this.$search.val();this.trigger("query",{term:input})}this._keyUpPrevented=false};Search.prototype.showSearch=function(_,params){return true};return Search});S2.define("select2/dropdown/hidePlaceholder",[],function(){function HidePlaceholder(decorated,$element,options,dataAdapter){this.placeholder=this.normalizePlaceholder(options.get("placeholder"));decorated.call(this,$element,options,dataAdapter)}HidePlaceholder.prototype.append=function(decorated,data){data.results=this.removePlaceholder(data.results);decorated.call(this,data)};HidePlaceholder.prototype.normalizePlaceholder=function(_,placeholder){if(typeof placeholder==="string"){placeholder={id:"",text:placeholder}}return placeholder};HidePlaceholder.prototype.removePlaceholder=function(_,data){var modifiedData=data.slice(0);for(var d=data.length-1;d>=0;d--){var item=data[d];if(this.placeholder.id===item.id){modifiedData.splice(d,1)}}return modifiedData};return HidePlaceholder});S2.define("select2/dropdown/infiniteScroll",["jquery"],function($){function InfiniteScroll(decorated,$element,options,dataAdapter){this.lastParams={};decorated.call(this,$element,options,dataAdapter);this.$loadingMore=this.createLoadingMore();this.loading=false}InfiniteScroll.prototype.append=function(decorated,data){this.$loadingMore.remove();this.loading=false;decorated.call(this,data);if(this.showLoadingMore(data)){this.$results.append(this.$loadingMore)}};InfiniteScroll.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);container.on("query",function(params){self.lastParams=params;self.loading=true});container.on("query:append",function(params){self.lastParams=params;self.loading=true});this.$results.on("scroll",function(){var isLoadMoreVisible=$.contains(document.documentElement,self.$loadingMore[0]);if(self.loading||!isLoadMoreVisible){return}var currentOffset=self.$results.offset().top+self.$results.outerHeight(false);var loadingMoreOffset=self.$loadingMore.offset().top+self.$loadingMore.outerHeight(false);if(currentOffset+50>=loadingMoreOffset){self.loadMore()}})};InfiniteScroll.prototype.loadMore=function(){this.loading=true;var params=$.extend({},{page:1},this.lastParams);params.page++;this.trigger("query:append",params)};InfiniteScroll.prototype.showLoadingMore=function(_,data){return data.pagination&&data.pagination.more};InfiniteScroll.prototype.createLoadingMore=function(){var $option=$("<li "+'class="select2-results__option select2-results__option--load-more"'+'role="treeitem" aria-disabled="true"></li>');var message=this.options.get("translations").get("loadingMore");$option.html(message(this.lastParams));return $option};return InfiniteScroll});S2.define("select2/dropdown/attachBody",["jquery","../utils"],function($,Utils){function AttachBody(decorated,$element,options){this.$dropdownParent=options.get("dropdownParent")||$(document.body);decorated.call(this,$element,options)}AttachBody.prototype.bind=function(decorated,container,$container){var self=this;var setupResultsEvents=false;decorated.call(this,container,$container);container.on("open",function(){self._showDropdown();self._attachPositioningHandler(container);if(!setupResultsEvents){setupResultsEvents=true;container.on("results:all",function(){self._positionDropdown();self._resizeDropdown()});container.on("results:append",function(){self._positionDropdown();self._resizeDropdown()})}});container.on("close",function(){self._hideDropdown();self._detachPositioningHandler(container)});this.$dropdownContainer.on("mousedown",function(evt){evt.stopPropagation()})};AttachBody.prototype.destroy=function(decorated){decorated.call(this);this.$dropdownContainer.remove()};AttachBody.prototype.position=function(decorated,$dropdown,$container){$dropdown.attr("class",$container.attr("class"));$dropdown.removeClass("select2");$dropdown.addClass("select2-container--open");$dropdown.css({position:"absolute",top:-999999});this.$container=$container};AttachBody.prototype.render=function(decorated){var $container=$("<span></span>");var $dropdown=decorated.call(this);$container.append($dropdown);this.$dropdownContainer=$container;return $container};AttachBody.prototype._hideDropdown=function(decorated){this.$dropdownContainer.detach()};AttachBody.prototype._attachPositioningHandler=function(decorated,container){var self=this;var scrollEvent="scroll.select2."+container.id;var resizeEvent="resize.select2."+container.id;var orientationEvent="orientationchange.select2."+container.id;var $watchers=this.$container.parents().filter(Utils.hasScroll);$watchers.each(function(){$(this).data("select2-scroll-position",{x:$(this).scrollLeft(),y:$(this).scrollTop()})});$watchers.on(scrollEvent,function(ev){var position=$(this).data("select2-scroll-position");$(this).scrollTop(position.y)});$(window).on(scrollEvent+" "+resizeEvent+" "+orientationEvent,function(e){self._positionDropdown();self._resizeDropdown()})};AttachBody.prototype._detachPositioningHandler=function(decorated,container){var scrollEvent="scroll.select2."+container.id;var resizeEvent="resize.select2."+container.id;var orientationEvent="orientationchange.select2."+container.id;var $watchers=this.$container.parents().filter(Utils.hasScroll);$watchers.off(scrollEvent);$(window).off(scrollEvent+" "+resizeEvent+" "+orientationEvent)};AttachBody.prototype._positionDropdown=function(){var $window=$(window);var isCurrentlyAbove=this.$dropdown.hasClass("select2-dropdown--above");var isCurrentlyBelow=this.$dropdown.hasClass("select2-dropdown--below");var newDirection=null;var offset=this.$container.offset();offset.bottom=offset.top+this.$container.outerHeight(false);var container={height:this.$container.outerHeight(false)};container.top=offset.top;container.bottom=offset.top+container.height;var dropdown={height:this.$dropdown.outerHeight(false)};var viewport={top:$window.scrollTop(),bottom:$window.scrollTop()+$window.height()};var enoughRoomAbove=viewport.top<offset.top-dropdown.height;var enoughRoomBelow=viewport.bottom>offset.bottom+dropdown.height;var css={left:offset.left,top:container.bottom};var $offsetParent=this.$dropdownParent;if($offsetParent.css("position")==="static"){$offsetParent=$offsetParent.offsetParent()}var parentOffset=$offsetParent.offset();css.top-=parentOffset.top;css.left-=parentOffset.left;if(!isCurrentlyAbove&&!isCurrentlyBelow){newDirection="below"}if(!enoughRoomBelow&&enoughRoomAbove&&!isCurrentlyAbove){newDirection="above"}else if(!enoughRoomAbove&&enoughRoomBelow&&isCurrentlyAbove){newDirection="below"}if(newDirection=="above"||isCurrentlyAbove&&newDirection!=="below"){css.top=container.top-dropdown.height}if(newDirection!=null){this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+newDirection);this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+newDirection)}this.$dropdownContainer.css(css)};AttachBody.prototype._resizeDropdown=function(){var css={width:this.$container.outerWidth(false)+"px"};if(this.options.get("dropdownAutoWidth")){css.minWidth=css.width;css.width="auto"}this.$dropdown.css(css)};AttachBody.prototype._showDropdown=function(decorated){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()};return AttachBody});S2.define("select2/dropdown/minimumResultsForSearch",[],function(){function countResults(data){var count=0;for(var d=0;d<data.length;d++){var item=data[d];if(item.children){count+=countResults(item.children)}else{count++}}return count}function MinimumResultsForSearch(decorated,$element,options,dataAdapter){this.minimumResultsForSearch=options.get("minimumResultsForSearch");if(this.minimumResultsForSearch<0){this.minimumResultsForSearch=Infinity}decorated.call(this,$element,options,dataAdapter)}MinimumResultsForSearch.prototype.showSearch=function(decorated,params){if(countResults(params.data.results)<this.minimumResultsForSearch){return false}return decorated.call(this,params)};return MinimumResultsForSearch});S2.define("select2/dropdown/selectOnClose",[],function(){function SelectOnClose(){}SelectOnClose.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);container.on("close",function(){self._handleSelectOnClose()})};SelectOnClose.prototype._handleSelectOnClose=function(){var $highlightedResults=this.getHighlightedResults();if($highlightedResults.length<1){return}var data=$highlightedResults.data("data");if(data.element!=null&&data.element.selected||data.element==null&&data.selected){return}this.trigger("select",{data:data})};return SelectOnClose});S2.define("select2/dropdown/closeOnSelect",[],function(){function CloseOnSelect(){}CloseOnSelect.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);container.on("select",function(evt){self._selectTriggered(evt)});container.on("unselect",function(evt){self._selectTriggered(evt)})};CloseOnSelect.prototype._selectTriggered=function(_,evt){var originalEvent=evt.originalEvent;if(originalEvent&&originalEvent.ctrlKey){return}this.trigger("close",{})};return CloseOnSelect});S2.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(args){var overChars=args.input.length-args.maximum;var message="Please delete "+overChars+" character";if(overChars!=1){message+="s"}return message},inputTooShort:function(args){var remainingChars=args.minimum-args.input.length;var message="Please enter "+remainingChars+" or more characters";return message},loadingMore:function(){return"Loading more resultsâ¦"},maximumSelected:function(args){var message="You can only select "+args.maximum+" item";if(args.maximum!=1){message+="s"}return message},noResults:function(){return"No results found"},searching:function(){return"Searchingâ¦"}}});S2.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function($,require,ResultsList,SingleSelection,MultipleSelection,Placeholder,AllowClear,SelectionSearch,EventRelay,Utils,Translation,DIACRITICS,SelectData,ArrayData,AjaxData,Tags,Tokenizer,MinimumInputLength,MaximumInputLength,MaximumSelectionLength,Dropdown,DropdownSearch,HidePlaceholder,InfiniteScroll,AttachBody,MinimumResultsForSearch,SelectOnClose,CloseOnSelect,EnglishTranslation){function Defaults(){this.reset()}Defaults.prototype.apply=function(options){options=$.extend(true,{},this.defaults,options);if(options.dataAdapter==null){if(options.ajax!=null){options.dataAdapter=AjaxData}else if(options.data!=null){options.dataAdapter=ArrayData}else{options.dataAdapter=SelectData}if(options.minimumInputLength>0){options.dataAdapter=Utils.Decorate(options.dataAdapter,MinimumInputLength)}if(options.maximumInputLength>0){options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumInputLength)}if(options.maximumSelectionLength>0){options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumSelectionLength)}if(options.tags){options.dataAdapter=Utils.Decorate(options.dataAdapter,Tags)}if(options.tokenSeparators!=null||options.tokenizer!=null){options.dataAdapter=Utils.Decorate(options.dataAdapter,Tokenizer)}if(options.query!=null){var Query=require(options.amdBase+"compat/query");options.dataAdapter=Utils.Decorate(options.dataAdapter,Query)}if(options.initSelection!=null){var InitSelection=require(options.amdBase+"compat/initSelection");options.dataAdapter=Utils.Decorate(options.dataAdapter,InitSelection)}}if(options.resultsAdapter==null){options.resultsAdapter=ResultsList;if(options.ajax!=null){options.resultsAdapter=Utils.Decorate(options.resultsAdapter,InfiniteScroll)}if(options.placeholder!=null){options.resultsAdapter=Utils.Decorate(options.resultsAdapter,HidePlaceholder)}if(options.selectOnClose){options.resultsAdapter=Utils.Decorate(options.resultsAdapter,SelectOnClose)}}if(options.dropdownAdapter==null){if(options.multiple){options.dropdownAdapter=Dropdown}else{var SearchableDropdown=Utils.Decorate(Dropdown,DropdownSearch);options.dropdownAdapter=SearchableDropdown}if(options.minimumResultsForSearch!==0){options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,MinimumResultsForSearch)}if(options.closeOnSelect){options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,CloseOnSelect)}if(options.dropdownCssClass!=null||options.dropdownCss!=null||options.adaptDropdownCssClass!=null){var DropdownCSS=require(options.amdBase+"compat/dropdownCss");options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,DropdownCSS)}options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,AttachBody)}if(options.selectionAdapter==null){if(options.multiple){options.selectionAdapter=MultipleSelection}else{options.selectionAdapter=SingleSelection}if(options.placeholder!=null){options.selectionAdapter=Utils.Decorate(options.selectionAdapter,Placeholder)}if(options.allowClear){options.selectionAdapter=Utils.Decorate(options.selectionAdapter,AllowClear)}if(options.multiple){options.selectionAdapter=Utils.Decorate(options.selectionAdapter,SelectionSearch)}if(options.containerCssClass!=null||options.containerCss!=null||options.adaptContainerCssClass!=null){var ContainerCSS=require(options.amdBase+"compat/containerCss");options.selectionAdapter=Utils.Decorate(options.selectionAdapter,ContainerCSS)}options.selectionAdapter=Utils.Decorate(options.selectionAdapter,EventRelay)}if(typeof options.language==="string"){if(options.language.indexOf("-")>0){var languageParts=options.language.split("-");var baseLanguage=languageParts[0];options.language=[options.language,baseLanguage]}else{options.language=[options.language]}}if($.isArray(options.language)){var languages=new Translation;options.language.push("en");var languageNames=options.language;for(var l=0;l<languageNames.length;l++){var name=languageNames[l];var language={};try{language=Translation.loadPath(name)}catch(e){try{name=this.defaults.amdLanguageBase+name;language=Translation.loadPath(name)}catch(ex){if(options.debug&&window.console&&console.warn){console.warn('Select2: The language file for "'+name+'" could not be '+"automatically loaded. A fallback will be used instead.")}continue}}languages.extend(language)}options.translations=languages}else{var baseTranslation=Translation.loadPath(this.defaults.amdLanguageBase+"en");var customTranslation=new Translation(options.language);customTranslation.extend(baseTranslation);options.translations=customTranslation}return options};Defaults.prototype.reset=function(){function stripDiacritics(text){function match(a){return DIACRITICS[a]||a}return text.replace(/[^\u0000-\u007E]/g,match)}function matcher(params,data){if($.trim(params.term)===""){return data}if(data.children&&data.children.length>0){var match=$.extend(true,{},data);for(var c=data.children.length-1;c>=0;c--){var child=data.children[c];var matches=matcher(params,child);if(matches==null){match.children.splice(c,1)}}if(match.children.length>0){return match}return matcher(params,match)}var original=stripDiacritics(data.text).toUpperCase();var term=stripDiacritics(params.term).toUpperCase();if(original.indexOf(term)>-1){return data}return null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:true,debug:false,dropdownAutoWidth:false,escapeMarkup:Utils.escapeMarkup,language:EnglishTranslation,matcher:matcher,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,sorter:function(data){return data},templateResult:function(result){return result.text},templateSelection:function(selection){return selection.text},theme:"default",width:"resolve"}};Defaults.prototype.set=function(key,value){var camelKey=$.camelCase(key);var data={};data[camelKey]=value;var convertedData=Utils._convertData(data);$.extend(this.defaults,convertedData)};var defaults=new Defaults;return defaults});S2.define("select2/options",["require","jquery","./defaults","./utils"],function(require,$,Defaults,Utils){function Options(options,$element){this.options=options;if($element!=null){this.fromElement($element)}this.options=Defaults.apply(this.options);if($element&&$element.is("input")){var InputCompat=require(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=Utils.Decorate(this.options.dataAdapter,InputCompat)}}Options.prototype.fromElement=function($e){var excludedData=["select2"];if(this.options.multiple==null){this.options.multiple=$e.prop("multiple")}if(this.options.disabled==null){this.options.disabled=$e.prop("disabled")}if(this.options.language==null){if($e.prop("lang")){this.options.language=$e.prop("lang").toLowerCase()}else if($e.closest("[lang]").prop("lang")){this.options.language=$e.closest("[lang]").prop("lang")}}if(this.options.dir==null){if($e.prop("dir")){this.options.dir=$e.prop("dir")}else if($e.closest("[dir]").prop("dir")){this.options.dir=$e.closest("[dir]").prop("dir")}else{this.options.dir="ltr"}}$e.prop("disabled",this.options.disabled);$e.prop("multiple",this.options.multiple);if($e.data("select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-select2-tags` attribute has been changed to "+'use the `data-data` and `data-tags="true"` attributes and will be '+"removed in future versions of Select2.")}$e.data("data",$e.data("select2Tags"));$e.data("tags",true)}if($e.data("ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to "+"`data-ajax--url` and support for the old attribute will be removed"+" in future versions of Select2.")}$e.attr("ajax--url",$e.data("ajaxUrl"));$e.data("ajax--url",$e.data("ajaxUrl"))}var dataset={};if($.fn.jquery&&$.fn.jquery.substr(0,2)=="1."&&$e[0].dataset){dataset=$.extend(true,{},$e[0].dataset,$e.data())}else{dataset=$e.data()}var data=$.extend(true,{},dataset);data=Utils._convertData(data);for(var key in data){if($.inArray(key,excludedData)>-1){continue}if($.isPlainObject(this.options[key])){$.extend(this.options[key],data[key])}else{this.options[key]=data[key]}}return this};Options.prototype.get=function(key){return this.options[key]};Options.prototype.set=function(key,val){this.options[key]=val};return Options});S2.define("select2/core",["jquery","./options","./utils","./keys"],function($,Options,Utils,KEYS){var Select2=function($element,options){if($element.data("select2")!=null){$element.data("select2").destroy()}this.$element=$element;this.id=this._generateId($element);options=options||{};this.options=new Options(options,$element);Select2.__super__.constructor.call(this);var tabindex=$element.attr("tabindex")||0;$element.data("old-tabindex",tabindex);$element.attr("tabindex","-1");var DataAdapter=this.options.get("dataAdapter");this.dataAdapter=new DataAdapter($element,this.options);var $container=this.render();this._placeContainer($container);var SelectionAdapter=this.options.get("selectionAdapter");this.selection=new SelectionAdapter($element,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,$container);var DropdownAdapter=this.options.get("dropdownAdapter");this.dropdown=new DropdownAdapter($element,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,$container);var ResultsAdapter=this.options.get("resultsAdapter");this.results=new ResultsAdapter($element,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var self=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(initialData){self.trigger("selection:update",{data:initialData})});$element.addClass("select2-hidden-accessible");$element.attr("aria-hidden","true");
this._syncAttributes();$element.data("select2",this)};Utils.Extend(Select2,Utils.Observable);Select2.prototype._generateId=function($element){var id="";if($element.attr("id")!=null){id=$element.attr("id")}else if($element.attr("name")!=null){id=$element.attr("name")+"-"+Utils.generateChars(2)}else{id=Utils.generateChars(4)}id=id.replace(/(:|\.|\[|\]|,)/g,"");id="select2-"+id;return id};Select2.prototype._placeContainer=function($container){$container.insertAfter(this.$element);var width=this._resolveWidth(this.$element,this.options.get("width"));if(width!=null){$container.css("width","auto")}};Select2.prototype._resolveWidth=function($element,method){var WIDTH=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(method=="resolve"){var styleWidth=this._resolveWidth($element,"style");if(styleWidth!=null){return styleWidth}return this._resolveWidth($element,"element")}if(method=="element"){var elementWidth=$element.outerWidth(false);if(elementWidth<=0){return"auto"}return elementWidth+"px"}if(method=="style"){var style=$element.attr("style");if(typeof style!=="string"){return null}var attrs=style.split(";");for(var i=0,l=attrs.length;i<l;i=i+1){var attr=attrs[i].replace(/\s/g,"");var matches=attr.match(WIDTH);if(matches!==null&&matches.length>=1){return matches[1]}}return null}return method};Select2.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)};Select2.prototype._registerDomEvents=function(){var self=this;this.$element.on("change.select2",function(){self.dataAdapter.current(function(data){self.trigger("selection:update",{data:data})})});this._sync=Utils.bind(this._syncAttributes,this);if(this.$element[0].attachEvent){this.$element[0].attachEvent("onpropertychange",this._sync)}var observer=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(observer!=null){this._observer=new observer(function(mutations){$.each(mutations,self._sync)});this._observer.observe(this.$element[0],{attributes:true,subtree:false})}else if(this.$element[0].addEventListener){this.$element[0].addEventListener("DOMAttrModified",self._sync,false)}};Select2.prototype._registerDataEvents=function(){var self=this;this.dataAdapter.on("*",function(name,params){self.trigger(name,params)})};Select2.prototype._registerSelectionEvents=function(){var self=this;var nonRelayEvents=["toggle","focus"];this.selection.on("toggle",function(){self.toggleDropdown()});this.selection.on("focus",function(params){self.focus(params)});this.selection.on("*",function(name,params){if($.inArray(name,nonRelayEvents)!==-1){return}self.trigger(name,params)})};Select2.prototype._registerDropdownEvents=function(){var self=this;this.dropdown.on("*",function(name,params){self.trigger(name,params)})};Select2.prototype._registerResultsEvents=function(){var self=this;this.results.on("*",function(name,params){self.trigger(name,params)})};Select2.prototype._registerEvents=function(){var self=this;this.on("open",function(){self.$container.addClass("select2-container--open")});this.on("close",function(){self.$container.removeClass("select2-container--open")});this.on("enable",function(){self.$container.removeClass("select2-container--disabled")});this.on("disable",function(){self.$container.addClass("select2-container--disabled")});this.on("blur",function(){self.$container.removeClass("select2-container--focus")});this.on("query",function(params){if(!self.isOpen()){self.trigger("open",{})}this.dataAdapter.query(params,function(data){self.trigger("results:all",{data:data,query:params})})});this.on("query:append",function(params){this.dataAdapter.query(params,function(data){self.trigger("results:append",{data:data,query:params})})});this.on("keypress",function(evt){var key=evt.which;if(self.isOpen()){if(key===KEYS.ESC||key===KEYS.TAB||key===KEYS.UP&&evt.altKey){self.close();evt.preventDefault()}else if(key===KEYS.ENTER){self.trigger("results:select",{});evt.preventDefault()}else if(key===KEYS.SPACE&&evt.ctrlKey){self.trigger("results:toggle",{});evt.preventDefault()}else if(key===KEYS.UP){self.trigger("results:previous",{});evt.preventDefault()}else if(key===KEYS.DOWN){self.trigger("results:next",{});evt.preventDefault()}}else{if(key===KEYS.ENTER||key===KEYS.SPACE||key===KEYS.DOWN&&evt.altKey){self.open();evt.preventDefault()}}})};Select2.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));if(this.options.get("disabled")){if(this.isOpen()){this.close()}this.trigger("disable",{})}else{this.trigger("enable",{})}};Select2.prototype.trigger=function(name,args){var actualTrigger=Select2.__super__.trigger;var preTriggerMap={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(args===undefined){args={}}if(name in preTriggerMap){var preTriggerName=preTriggerMap[name];var preTriggerArgs={prevented:false,name:name,args:args};actualTrigger.call(this,preTriggerName,preTriggerArgs);if(preTriggerArgs.prevented){args.prevented=true;return}}actualTrigger.call(this,name,args)};Select2.prototype.toggleDropdown=function(){if(this.options.get("disabled")){return}if(this.isOpen()){this.close()}else{this.open()}};Select2.prototype.open=function(){if(this.isOpen()){return}this.trigger("query",{})};Select2.prototype.close=function(){if(!this.isOpen()){return}this.trigger("close",{})};Select2.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")};Select2.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")};Select2.prototype.focus=function(data){if(this.hasFocus()){return}this.$container.addClass("select2-container--focus");this.trigger("focus",{})};Select2.prototype.enable=function(args){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("enable")` method has been deprecated and will'+' be removed in later Select2 versions. Use $element.prop("disabled")'+" instead.")}if(args==null||args.length===0){args=[true]}var disabled=!args[0];this.$element.prop("disabled",disabled)};Select2.prototype.data=function(){if(this.options.get("debug")&&arguments.length>0&&window.console&&console.warn){console.warn('Select2: Data can no longer be set using `select2("data")`. You '+"should consider setting the value instead using `$element.val()`.")}var data=[];this.dataAdapter.current(function(currentData){data=currentData});return data};Select2.prototype.val=function(args){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("val")` method has been deprecated and will be'+" removed in later Select2 versions. Use $element.val() instead.")}if(args==null||args.length===0){return this.$element.val()}var newVal=args[0];if($.isArray(newVal)){newVal=$.map(newVal,function(obj){return obj.toString()})}this.$element.val(newVal).trigger("change")};Select2.prototype.destroy=function(){this.$container.remove();if(this.$element[0].detachEvent){this.$element[0].detachEvent("onpropertychange",this._sync)}if(this._observer!=null){this._observer.disconnect();this._observer=null}else if(this.$element[0].removeEventListener){this.$element[0].removeEventListener("DOMAttrModified",this._sync,false)}this._sync=null;this.$element.off(".select2");this.$element.attr("tabindex",this.$element.data("old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null};Select2.prototype.render=function(){var $container=$('<span class="select2 select2-container">'+'<span class="selection"></span>'+'<span class="dropdown-wrapper" aria-hidden="true"></span>'+"</span>");$container.attr("dir",this.options.get("dir"));this.$container=$container;this.$container.addClass("select2-container--"+this.options.get("theme"));$container.data("element",this.$element);return $container};return Select2});S2.define("select2/compat/utils",["jquery"],function($){function syncCssClasses($dest,$src,adapter){var classes,replacements=[],adapted;classes=$.trim($dest.attr("class"));if(classes){classes=""+classes;$(classes.split(/\s+/)).each(function(){if(this.indexOf("select2-")===0){replacements.push(this)}})}classes=$.trim($src.attr("class"));if(classes){classes=""+classes;$(classes.split(/\s+/)).each(function(){if(this.indexOf("select2-")!==0){adapted=adapter(this);if(adapted!=null){replacements.push(adapted)}}})}$dest.attr("class",replacements.join(" "))}return{syncCssClasses:syncCssClasses}});S2.define("select2/compat/containerCss",["jquery","./utils"],function($,CompatUtils){function _containerAdapter(clazz){return null}function ContainerCSS(){}ContainerCSS.prototype.render=function(decorated){var $container=decorated.call(this);var containerCssClass=this.options.get("containerCssClass")||"";if($.isFunction(containerCssClass)){containerCssClass=containerCssClass(this.$element)}var containerCssAdapter=this.options.get("adaptContainerCssClass");containerCssAdapter=containerCssAdapter||_containerAdapter;if(containerCssClass.indexOf(":all:")!==-1){containerCssClass=containerCssClass.replace(":all:","");var _cssAdapter=containerCssAdapter;containerCssAdapter=function(clazz){var adapted=_cssAdapter(clazz);if(adapted!=null){return adapted+" "+clazz}return clazz}}var containerCss=this.options.get("containerCss")||{};if($.isFunction(containerCss)){containerCss=containerCss(this.$element)}CompatUtils.syncCssClasses($container,this.$element,containerCssAdapter);$container.css(containerCss);$container.addClass(containerCssClass);return $container};return ContainerCSS});S2.define("select2/compat/dropdownCss",["jquery","./utils"],function($,CompatUtils){function _dropdownAdapter(clazz){return null}function DropdownCSS(){}DropdownCSS.prototype.render=function(decorated){var $dropdown=decorated.call(this);var dropdownCssClass=this.options.get("dropdownCssClass")||"";if($.isFunction(dropdownCssClass)){dropdownCssClass=dropdownCssClass(this.$element)}var dropdownCssAdapter=this.options.get("adaptDropdownCssClass");dropdownCssAdapter=dropdownCssAdapter||_dropdownAdapter;if(dropdownCssClass.indexOf(":all:")!==-1){dropdownCssClass=dropdownCssClass.replace(":all:","");var _cssAdapter=dropdownCssAdapter;dropdownCssAdapter=function(clazz){var adapted=_cssAdapter(clazz);if(adapted!=null){return adapted+" "+clazz}return clazz}}var dropdownCss=this.options.get("dropdownCss")||{};if($.isFunction(dropdownCss)){dropdownCss=dropdownCss(this.$element)}CompatUtils.syncCssClasses($dropdown,this.$element,dropdownCssAdapter);$dropdown.css(dropdownCss);$dropdown.addClass(dropdownCssClass);return $dropdown};return DropdownCSS});S2.define("select2/compat/initSelection",["jquery"],function($){function InitSelection(decorated,$element,options){if(options.get("debug")&&window.console&&console.warn){console.warn("Select2: The `initSelection` option has been deprecated in favor"+" of a custom data adapter that overrides the `current` method. "+"This method is now called multiple times instead of a single "+"time when the instance is initialized. Support will be removed "+"for the `initSelection` option in future versions of Select2")}this.initSelection=options.get("initSelection");this._isInitialized=false;decorated.call(this,$element,options)}InitSelection.prototype.current=function(decorated,callback){var self=this;if(this._isInitialized){decorated.call(this,callback);return}this.initSelection.call(null,this.$element,function(data){self._isInitialized=true;if(!$.isArray(data)){data=[data]}callback(data)})};return InitSelection});S2.define("select2/compat/inputData",["jquery"],function($){function InputData(decorated,$element,options){this._currentData=[];this._valueSeparator=options.get("valueSeparator")||",";if($element.prop("type")==="hidden"){if(options.get("debug")&&console&&console.warn){console.warn("Select2: Using a hidden input with Select2 is no longer "+"supported and may stop working in the future. It is recommended "+"to use a `<select>` element instead.")}}decorated.call(this,$element,options)}InputData.prototype.current=function(_,callback){function getSelected(data,selectedIds){var selected=[];if(data.selected||$.inArray(data.id,selectedIds)!==-1){data.selected=true;selected.push(data)}else{data.selected=false}if(data.children){selected.push.apply(selected,getSelected(data.children,selectedIds))}return selected}var selected=[];for(var d=0;d<this._currentData.length;d++){var data=this._currentData[d];selected.push.apply(selected,getSelected(data,this.$element.val().split(this._valueSeparator)))}callback(selected)};InputData.prototype.select=function(_,data){if(!this.options.get("multiple")){this.current(function(allData){$.map(allData,function(data){data.selected=false})});this.$element.val(data.id);this.$element.trigger("change")}else{var value=this.$element.val();value+=this._valueSeparator+data.id;this.$element.val(value);this.$element.trigger("change")}};InputData.prototype.unselect=function(_,data){var self=this;data.selected=false;this.current(function(allData){var values=[];for(var d=0;d<allData.length;d++){var item=allData[d];if(data.id==item.id){continue}values.push(item.id)}self.$element.val(values.join(self._valueSeparator));self.$element.trigger("change")})};InputData.prototype.query=function(_,params,callback){var results=[];for(var d=0;d<this._currentData.length;d++){var data=this._currentData[d];var matches=this.matches(params,data);if(matches!==null){results.push(matches)}}callback({results:results})};InputData.prototype.addOptions=function(_,$options){var options=$.map($options,function($option){return $.data($option[0],"data")});this._currentData.push.apply(this._currentData,options)};return InputData});S2.define("select2/compat/matcher",["jquery"],function($){function oldMatcher(matcher){function wrappedMatcher(params,data){var match=$.extend(true,{},data);if(params.term==null||$.trim(params.term)===""){return match}if(data.children){for(var c=data.children.length-1;c>=0;c--){var child=data.children[c];var doesMatch=matcher(params.term,child.text,child);if(!doesMatch){match.children.splice(c,1)}}if(match.children.length>0){return match}}if(matcher(params.term,data.text,data)){return match}return null}return wrappedMatcher}return oldMatcher});S2.define("select2/compat/query",[],function(){function Query(decorated,$element,options){if(options.get("debug")&&window.console&&console.warn){console.warn("Select2: The `query` option has been deprecated in favor of a "+"custom data adapter that overrides the `query` method. Support "+"will be removed for the `query` option in future versions of "+"Select2.")}decorated.call(this,$element,options)}Query.prototype.query=function(_,params,callback){params.callback=callback;var query=this.options.get("query");query.call(null,params)};return Query});S2.define("select2/dropdown/attachContainer",[],function(){function AttachContainer(decorated,$element,options){decorated.call(this,$element,options)}AttachContainer.prototype.position=function(decorated,$dropdown,$container){var $dropdownContainer=$container.find(".dropdown-wrapper");$dropdownContainer.append($dropdown);$dropdown.addClass("select2-dropdown--below");$container.addClass("select2-container--below")};return AttachContainer});S2.define("select2/dropdown/stopPropagation",[],function(){function StopPropagation(){}StopPropagation.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container);var stoppedEvents=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(stoppedEvents.join(" "),function(evt){evt.stopPropagation()})};return StopPropagation});S2.define("select2/selection/stopPropagation",[],function(){function StopPropagation(){}StopPropagation.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container);var stoppedEvents=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(stoppedEvents.join(" "),function(evt){evt.stopPropagation()})};return StopPropagation});(function(factory){if(typeof S2.define==="function"&&S2.define.amd){S2.define("jquery-mousewheel",["jquery"],factory)}else if(typeof exports==="object"){module.exports=factory}else{factory(jQuery)}})(function($){var toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice,nullLowestDeltaTimeout,lowestDelta;if($.event.fixHooks){for(var i=toFix.length;i;){$.event.fixHooks[toFix[--i]]=$.event.mouseHooks}}var special=$.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var i=toBind.length;i;){this.addEventListener(toBind[--i],handler,false)}}else{this.onmousewheel=handler}$.data(this,"mousewheel-line-height",special.getLineHeight(this));$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var i=toBind.length;i;){this.removeEventListener(toBind[--i],handler,false)}}else{this.onmousewheel=null}$.removeData(this,"mousewheel-line-height");$.removeData(this,"mousewheel-page-height")},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem["offsetParent"in $.fn?"offsetParent":"parent"]();if(!$parent.length){$parent=$("body")}return parseInt($parent.css("fontSize"),10)||parseInt($elem.css("fontSize"),10)||16},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:true,normalizeOffset:true}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}});function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;event=$.event.fix(orgEvent);event.type="mousewheel";if("detail"in orgEvent){deltaY=orgEvent.detail*-1}if("wheelDelta"in orgEvent){deltaY=orgEvent.wheelDelta}if("wheelDeltaY"in orgEvent){deltaY=orgEvent.wheelDeltaY}if("wheelDeltaX"in orgEvent){deltaX=orgEvent.wheelDeltaX*-1}if("axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaX=deltaY*-1;deltaY=0}delta=deltaY===0?deltaX:deltaY;if("deltaY"in orgEvent){deltaY=orgEvent.deltaY*-1;delta=deltaY}if("deltaX"in orgEvent){deltaX=orgEvent.deltaX;if(deltaY===0){delta=deltaX*-1}}if(deltaY===0&&deltaX===0){return}if(orgEvent.deltaMode===1){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight;deltaY*=lineHeight;deltaX*=lineHeight}else if(orgEvent.deltaMode===2){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight;deltaY*=pageHeight;deltaX*=pageHeight}absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX));if(!lowestDelta||absDelta<lowestDelta){lowestDelta=absDelta;if(shouldAdjustOldDeltas(orgEvent,absDelta)){lowestDelta/=40}}if(shouldAdjustOldDeltas(orgEvent,absDelta)){delta/=40;deltaX/=40;deltaY/=40}delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta);deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta);deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta);if(special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left;offsetY=event.clientY-boundingRect.top}event.deltaX=deltaX;event.deltaY=deltaY;event.deltaFactor=lowestDelta;event.offsetX=offsetX;event.offsetY=offsetY;event.deltaMode=0;args.unshift(event,delta,deltaX,deltaY);if(nullLowestDeltaTimeout){clearTimeout(nullLowestDeltaTimeout)}nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200);return($.event.dispatch||$.event.handle).apply(this,args)}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&orgEvent.type==="mousewheel"&&absDelta%120===0}});S2.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function($,_,Select2,Defaults){if($.fn.select2==null){var thisMethods=["open","close","destroy"];$.fn.select2=function(options){options=options||{};if(typeof options==="object"){this.each(function(){var instanceOptions=$.extend(true,{},options);var instance=new Select2($(this),instanceOptions)});return this}else if(typeof options==="string"){var ret;this.each(function(){var instance=$(this).data("select2");if(instance==null&&window.console&&console.error){console.error("The select2('"+options+"') method was called on an "+"element that is not using Select2.")}var args=Array.prototype.slice.call(arguments,1);ret=instance[options].apply(instance,args)});if($.inArray(options,thisMethods)>-1){return this}return ret}else{throw new Error("Invalid arguments for Select2: "+options)}}}if($.fn.select2.defaults==null){$.fn.select2.defaults=Defaults}return Select2});return{define:S2.define,require:S2.require}}();var select2=S2.require("jquery.select2");jQuery.fn.select2.amd=S2;return select2});(function(){Object.defineProperty(window,"app",{value:{},enumerable:true});Object.defineProperty(app,"base",{value:{},enumerable:true});Object.defineProperty(app,"utils",{value:{},enumerable:true});Object.defineProperty(app,"cogs",{value:{},enumerable:true});Object.defineProperty(app,"configs",{value:{},enumerable:true});Object.defineProperty(app,"components",{value:{},enumerable:true});Object.defineProperty(app,"serviceModels",{value:{},enumerable:true});Object.defineProperty(app,"search",{value:{},enumerable:true})})();(function(){window.ES6Promise.Promise.prototype.fail=window.ES6Promise.Promise.prototype.catch;window.ES6Promise.Promise.prototype.done=function(){window.ES6Promise.Promise.prototype.then.apply(this,arguments);return this};Backbone.Hoard.Promise=window.ES6Promise.Promise;var control=Backbone.Hoard.inMemoryControl=new Backbone.Hoard.Control,controlSync=control.getModelSync(),backboneSync=function(){return this instanceof Backbone.Model?Backbone.Model.prototype.sync.apply(this,arguments):Backbone.Collection.prototype.sync.apply(this,arguments)};app.base.shared={lastCalledMethod:"",initialize:function(initData,options){options=options||{};if(!this.hoardCache&&!this.disableBasicCache){this.cacheFetch()}},cacheFetch:function(method){method=method||"fetch";var self=this,memo,origFetch=self[method];self[method]=function(opts){if(!memo||opts&&opts.uncache){self.trigger("fetch",opts);var args=[].slice.call(arguments);if(!args[0])args[0]={};if(args[0].timeout===undefined)args[0].timeout=1e4;memo=origFetch.apply(self,args);return memo}else{return self.cacheHandler(memo)}}},getErrorType:function(model,response,options){var retval;response=response||model;if(response){if(response.source==="SSO Service"){retval=app.BackboneErrorTypes.sso}else if(app.utils.noDataResponse(response)){retval=app.BackboneErrorTypes.noData}else if(response.status===401){retval=app.BackboneErrorTypes.unauthorized}}else{retval=app.BackboneErrorTypes.timeout}if(!retval){retval=app.BackboneErrorTypes.api}return retval},isRetryAllowed:function(){return["create","update","delete"].indexOf(this.lastCalledMethod)>-1},cacheHandler:function(memo){var self=this;if(!memo){memo=$.Deferred()}return memo.done(function(res){self.trigger("sync:cached",self,res)}).fail(function(er){self.trigger("error:cached",self,er,{})})},sync:function(method,model,options){this.lastCalledMethod=method;return this.hoardCache?controlSync.apply(this,arguments):backboneSync.apply(this,arguments)}}})();(function(){app.utils.odwHostSwitch=function(flag){var host="w3-workplace.ibm.com";try{var is_active=awf.flags.isActive("odw_pilot."+flag);return is_active?app.config.odw_host:host}catch(er){return host}}})();(function(){app.utils.noDataResponse=function(response){return response.status===404&&response.statusText==="Not Found"||response.status===400};app.utils.urlParams=function(){var queryStr={},query=window.location.search.substring(1),vars=query.split("&");for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");if(!pair[0]){break}if(!pair[1]){queryStr[pair[0]]=""}else{queryStr[pair[0]]=decodeURIComponent(pair[1].replace("#","").trim())}}return queryStr}();app.utils.urlParam=function(str){if(!str){return false}if(typeof app.utils.urlParams[str]!=="undefined"){if(app.utils.urlParams[str].length===0){return true}else{return app.utils.urlParams[str]}}return false};app.utils.createMetricTag=function(config){function constructer(config){var self=this,awfEvent=null;config=config||{};function create(){return awf.createMetricTagger(config)}function init(){awfEvent=create()}function tagEvent(params){if(awf.flags.isActive("abilities.core_metrics")){if(_.isFunction(awfEvent)){awfEvent(params)}else{console.log("tagEvent->Error: awfEvent is not a function")}}else{console.log("metrics is disabled by config")}}self.cardEvent=function(action,module){tagEvent({ev:"click",action:action,module:module,name:"Flip card",section:"card",target:"none"})};self.linkEvent=function(event){if(event.data.mousedown){if(event.which!==2){return false}}var target=$(this).attr("href")?$(this).attr("href"):"none",section=event.data.section?event.data.section:"none",action=event.data.action?event.data.action:$(this).hasClass("button")||$(this).attr("role")==="button"?"button":"link",name=event.data.name?event.data.name:$(this).text()?$(this).text().trim():"none";if(target==="javascript:;"){target="none"}if(name==="title"||name===""){name=$(this).attr("title")}tagEvent({ev:"click",action:action,name:name,section:section,target:target})};self.tagEvent=tagEvent;init()}var instance=new constructer(config);return instance};app.utils.buildCmsServiceUrl=function(id){var previewMode=id!=="list"&&app.utils.urlParam("preview")?"draft/":"";return app.config.proxy+"/youribm/cms/v1/doc/"+previewMode+id};app.utils.flipCard=function(id){var flipcard=null;if(awf.main_grid.hasItem(id))flipcard=awf.main_grid.getItem(id).getComponentsWithinContainer("content")[0];else if(awf.mini_grid.hasItem(id))flipcard=awf.mini_grid.getItem(id).getComponentsWithinContainer("content")[0];if(flipcard){flipcard.setFlipped(true);return flipcard}return false};app.utils.hasI18nTag=function(path){return"i18next"in window&&awf&&awf.i18n&&awf.i18n.languages.length&&i18next.t(path)!=path}})();Backbone.Form.editors.Select2=Backbone.Form.editors.Select.extend({render:function(){var _this=this,config=this.schema.config||{};this.setOptions(this.schema.options);setTimeout(function(){_this.$el.select2(config)},0);return this}});Backbone.Form.editors.DatePicker=Backbone.Form.editors.Text.extend({render:function(){Backbone.Form.editors.Text.prototype.render.call(this);this.$el.datepicker({format:"mm-dd-yyyy",autoclose:true,weekStart:1,showAnim:""});return this},setValue:function(value){this.$el.val(moment(value).format("MM/DD/YYYY"))}});(function(){app.base.models={};app.base.models.BaseModel=Backbone.Model.extend(app.base.shared)})();(function(){app.base.models.CompositeModel=app.base.models.BaseModel.extend({initialize:function(attributes,options){if(!options)options={};app.base.models.BaseModel.prototype.initialize.call(this,{},options);this.subModelsMap={};this.subCollectionsMap={};this.keyedSubModels=options.keyedSubModels||this.keyedSubModels||false;if(options.initialModel){var initted=false;this.addModel("main",options.initialModel);var origFetch=this.fetch;this.fetch=function(){return this.subModelsMap.main.fetch().then(function(){if(!initted){this.initSubmodels(this.subModelsMap.main.attributes);initted=true}return origFetch.call(this,{all:true})}.bind(this))}.bind(this)}else if(options.initSubmodels)options.initSubmodels.call(this,options.attributes||attributes||{});else if(this.initSubmodels)this.initSubmodels.call(this,options.attributes||attributes||{})},addModel:function(name,model,parse,error){var self=this;if(!error)error=true;if(!parse)parse=function(attrs){return attrs};if(name==="main"||Object.keys(this.subModelsMap).length===0)this.mainModel=name;if(this.subModelsMap[name]){this.stopListening(this.subModelsMap[name],"change error")}this.subModelsMap[name]=model;if(this.keyedSubModels){if(!_.isEmpty(model.toJSON()))this.set(name,parse(model.toJSON()));this.listenTo(model,"change",function(){self.set(name,parse(model.toJSON()));self.trigger("sync",name)})}else{if(!_.isEmpty(model.toJSON()))this.set(parse(model.toJSON()));this.listenTo(model,"change",function(){self.set(parse(model.toJSON()));self.trigger("sync",name)})}if(error){this.listenTo(model,"error error:cached",function(model,err){if(err&&err.source==="SSO Service")return;self.trigger.apply(self,["error"].concat([].slice.call(arguments)))})}return this},addCollection:function(name,collection,parse,error){var self=this;if(!error)error=true;if(!parse)parse=function(attrs){return attrs};if(this.subCollectionsMap[name]){this.stopListening(this.subCollectionsMap[name],"sync error")}this.subCollectionsMap[name]=collection;if(!_.isEmpty(collection.toJSON()))this.set(name,parse(collection.toJSON()));this.listenTo(collection,"change update reset",function(){self.set(name,parse(collection.toJSON()));self.trigger("sync",name)});if(error){this.listenTo(collection,"error error:cached",function(){self.trigger.apply(self,["error"].concat(arguments))})}return this},fetch:function(opts){var promises=this.getFetchPromises(_.omit(opts,"all"));if(promises.length===0)throw new Error("composite model can't fetch without submodels");if(promises.length===1||opts&&opts.all)return this.fetchResolveAll(promises);return this.fetchResolveAny(promises)},fetchResolveAny:function(promises){var d=$.Deferred();promises.forEach(function(promise){promise.then(d.resolve)});return d},fetchResolveAll:function(promises){return promises.length===1?promises[0]:$.when.apply($,promises)},getFetchPromises:function(opts){var models=Object.keys(this.subModelsMap).map(function(modelName){return this.subModelsMap[modelName].fetch(opts)}.bind(this));var collections=Object.keys(this.subCollectionsMap).map(function(collectionName){return this.subCollectionsMap[collectionName].fetch(opts)}.bind(this));return models.concat(collections)},getSubStructure:function(key){if(this.subModelsMap[key]){return this.subModelsMap[key]}else if(this.subCollectionsMap[key]){return this.subCollectionsMap[key]}else{return undefined}}})})();(function(){app.base.collections={};app.base.collections.BaseCollection=Backbone.Collection.extend(_.extend({},app.base.shared,{model:app.base.models.BaseModel}))})();(function(){app.base.collections.CompositeCollection=function(models,options){if(!(options&&options.model))throw new Error("a model or collection constructor is required to create a composite collection");var modelInstance=new options.model(models,_.omit(options,"model"));if(modelInstance instanceof Backbone.Model){if(!options.initialCollection)throw new Error("a composite collection created with a composite model constructor must contain an initial collection constructor");return new CompositeCollection(models,options)}else if(modelInstance instanceof Backbone.Collection){return new ProxyCollection(modelInstance.length===0?null:options.adapter(modelInstance.toJSON()),{adapter:options.adapter,proxy:modelInstance})}else throw new Error("a composite collection's model must be either a model or collection constructor")};var CompositeCollection=app.base.collections.BaseCollection.extend({initialize:function(models,options){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);this.initialCollection=new options.initialCollection;this.adapter=options.adapter||null;
this.listenTo(this.initialCollection,"all",function(eventName){if(eventName==="sync")return;this.trigger.apply(this,arguments)}.bind(this))},fetch:function(options){var self=this;return self.initialCollection.fetch(options).then(function(){var models=self.initialCollection.toJSON().map(function(obj,ind){return new self.model(null,{attributes:obj}).addModel("main",self.initialCollection.models[ind],self.adapter)});self.set(models);self.trigger("sync");var modelCompletions=self.models.map(function(model){var subModels=Object.keys(model.subModelsMap).filter(function(val){return val!==model.mainModel}).map(function(val){return model.subModelsMap[val].fetch(options)});return{id:model.id,promise:$.when.apply($,subModels)}});var modelPromises=modelCompletions.map(function(m){return m.promise});return modelPromises.length?$.when.apply($,modelPromises):$.when()}).fail(function(err){self.trigger("error",err)})}});app.base.collections.CompositeCollection.prototype=CompositeCollection.prototype;app.base.collections.CompositeCollection.extend=function(){return CompositeCollection.extend.apply(CompositeCollection,arguments)};var ProxyCollection=app.base.collections.BaseCollection.extend({initialize:function(models,options){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);if(options.proxy.model)this.model=options.proxy.model;this.proxy=options.proxy;this.adapter=options.adapter||function(coll){return coll};this.listenTo(this.proxy,"sync sync:cached",function(eventName){this.set(this.adapter(this.proxy.toJSON()));this.trigger("sync")}.bind(this));this.listenTo(this.proxy,"error error:cached",function(){this.trigger.apply(this,["error"].concat(arguments))}.bind(this))},fetch:function(options){return this.proxy.fetch(options)}})})();(function(){var Form=Backbone.Form;var List=Form.editors.List;var Modal=List.Modal;Backbone.Form.editors.List=List.extend({render:function(){var $el=this.$el;this.items=[];List.prototype.render.call(this);$el.replaceWith(this.$el);return this}});Backbone.Form.editors.CustomList=Backbone.Form.editors.List.extend({initialize:function(){Backbone.Form.editors.List.prototype.initialize.apply(this,arguments);this.items=this.addInitialItems()},addInitialItems:function(value){return this.value.map(function(value){var item=new this.ListItem({list:this,form:this.form,schema:this.schema,value:value,Editor:this.Editor,key:this.key});this.setupItemListeners(item);return item}.bind(this))},render:function(){var self=this;var value=this.value||[];var $elPrev=this.$el;var $el=$($.trim(this.template()));this.$list=$el.is("[data-items]")?$el:$el.find("[data-items]");this.items.forEach(function(item){item.render();this.$list.append(item.el)}.bind(this));this.setElement($el);this.$el.attr("id",this.id);this.$el.attr("name",this.key);$elPrev.replaceWith(this.$el);if(this.hasFocus)this.trigger("blur",this);return this},setValue:function(value){this.value=value;this.items=this.addInitialItems();this.render()},removeItem:function(item){var confirmMsg=this.schema.confirmDelete;if(confirmMsg&&!confirm(confirmMsg))return;var index=_.indexOf(this.items,item);var items=this.items.filter(function(val,i){return i!==index}).map(function(val){return val.value});this.setValue(items);if(item.addEventTriggered){this.trigger("remove",this,item.editor);this.trigger("change",this)}if(!this.items.length&&!this.Editor.isAsync)this.addItem()},addItem:function(value,userInitiated){var self=this,editors=Form.editors;var item=new this.ListItem({list:this,form:this.form,schema:this.schema,value:value,Editor:this.Editor,key:this.key}).render();this.setupItemListeners(item);var _addItem=function(){this.items.push(item);this.items[this.items.length-2].render();item.render();this.$list.append(item.el)}.bind(this);if(userInitiated){item.editor.on("readyToAdd",function(){_addItem();item.editor.off("readyToAdd")})}else{_addItem();item.editor.focus()}return item},setupItemListeners:function(item){var self=this;if(item.editor){item.editor.on("all",function(event){if(event==="change")return;var args=_.toArray(arguments);args[0]="item:"+event;args.splice(1,0,self);List.prototype.trigger.apply(this,args)},self);item.editor.on("change",function(){if(!item.addEventTriggered){item.addEventTriggered=true;this.trigger("add",this,item.editor)}this.trigger("item:change",this,item.editor);this.trigger("change",this)},self);item.editor.on("value-change",function(){item.value=item.editor.value;this.trigger("item:change",this,item.editor);this.trigger("change",this)}.bind(this));item.editor.on("focus",function(){if(this.hasFocus)return;this.trigger("focus",this)},self);item.editor.on("blur",function(){if(!this.hasFocus)return;var self=this;setTimeout(function(){if(_.find(self.items,function(item){return item.editor.hasFocus}))return;self.trigger("blur",self)},0)},self)}else{item.on("rendered",function(){item.off("rendered");this.setupItemListeners(item)}.bind(this))}}});Backbone.Form.editors.List.ItemWithArrows=List.Item.extend({events:_.extend({},List.Item.prototype.events,{"click .move-item":"handleMoveItem"}),render:function(){var $el=this.$el;List.Item.prototype.render.call(this);$el.replaceWith(this.$el);this.trigger("rendered");return this},handleMoveItem:function(e){e.preventDefault();var target=$(e.currentTarget);if(target.hasClass("up")){this.moveItemRelative(-1)}else if(target.hasClass("down")){this.moveItemRelative(1)}else{console.log("no logic on how to move this item")}},moveItemRelative:function(movement){this.list.$list.css({opacity:.25});var list=this.list.items.slice();var index=list.indexOf(this);var item=list.splice(index,1)[0];list.splice(index+movement,0,item);this.list.items=list;setTimeout(function(){this.list.setValue(this.list.items.map(function(item){return item.value}))}.bind(this),200)}},{template:function(){var itemInList=this.list.items.filter(function(item){return item===this});var templateString="";templateString+="<div><span data-editor></span>";if(this.list.items[0]!==this)templateString+='<button class="move-item up icon-awf-chevron-up"></button>';if(this.list.items[this.list.items.length-1]!==this)templateString+='<button class="move-item down icon-awf-chevron-down"></button>';templateString+='<button class="icon-awf-op-times" type="button" data-action="remove"></button></div>';return _.template(templateString,null,Backbone.Form.templateSettings).apply(null,arguments)}});Backbone.Form.editors.List.Modal=Modal.extend({openEditor:function(){Modal.prototype.openEditor.apply(this,arguments);this.form.trigger("modal:open",{item:this.getStringValue()})},onModalClosed:function(){Modal.prototype.onModalClosed.apply(this,arguments);this.form.trigger("modal:close")},onModalSubmitted:function(){var modal=this.modal,form=this.modalForm,isNew=!this.value;var error=form.validate();if(error)return modal.preventClose();this.value=form.getValue();this.trigger("value-change",this);this.renderSummary();if(isNew)this.trigger("readyToAdd");this.trigger("change",this);this.onModalClosed()}});Backbone.Form.editors.List.Object=Backbone.Form.editors.List.Modal.extend({initialize:List.Object.prototype.initialize});Backbone.Form.editors.List.Modal.ModalAdapter=Backbone.View.extend({events:{"click .close":"closeModal","click .save":"saveModal","click .hasDatepicker":"addScrollListener"},initialize:function(options){Backbone.View.prototype.initialize.apply(this,arguments);this.form=options.content},render:function(){this.$el.html(this.form.render().$el.append('<button class="save button primary-form-btn">Confirm</button><button class="close button tertiary-form-btn">Cancel</button>'));$("#body-overlay").show();$("#editing-modal").html(this.$el).addClass("active");$("#page-container").css({height:"100%",overflow:"hidden"});$('select[data-type="date"], select[data-type="month"], select[data-type="year"], select[data-type="hour"], select[data-type="min"]').select2({minimumResultsForSearch:Infinity});$(".hasDatepicker").after('<span class="icon icon-awf-calendar date-picker"></span>')},open:function(){this.render()},closeModal:function(e){e.preventDefault();$("#page-container").css({height:"auto",overflow:"auto"});$("#editing-modal").removeClass("active");$("#body-overlay").hide();this.trigger("cancel");this.remove()},saveModal:function(e){e.preventDefault();this.trigger("ok");this.closeModal({preventDefault:function(){}})},addScrollListener:function(){$("#editing-modal").on("scroll",function(){this.$el.find(".hasDatepicker").datepicker("hide");this.trigger("scrollListen")}.bind(this));this.on("scrollListen",function(){this.$el.find("#editing-modal").off("scroll")})}})})();(function(){app.localCache=new Cache("yourco.data");function Cache(namespace){var me=this,cache=localStorage.getItem(namespace);if(cache){cache=JSON.parse(cache)}cache=cache||{};function save(){return localStorage.setItem(namespace,JSON.stringify(cache))}me.data=function(){return cache};me.setData=function(src,data){cache[src]={time:new Date,data:data};save()};me.getData=function(src){var item=cache[src];if(item){return cache[src].data}else{return null}};me.getTime=function(src){var item=cache[src];if(item){return cache[src].time}else{return null}};me.getAge=function(src){var item=cache[src];if(item){return new Date-new Date(cache[src].time)}else{return null}};me.setAge=function(src,milliseconds){var item=cache[src];if(item){cache[src].time=new Date(new Date(cache[src].time).getTime()+milliseconds)}};me.clear=function(src){var item=cache[src];if(item){cache[src]=null;save();return true}else{return false}};me.clearAll=function(){cache={};localStorage.removeItem(namespace)}}var CustomHoardStore=Backbone.Hoard.Store.extend({backend:localStorage});var CustomHoardPolicy=Backbone.Hoard.Policy.extend({getMetadata:function(key,response,options){return{updated:Date.now()}}});var customHoardControl=new Backbone.Hoard.Control({storeClass:CustomHoardStore,policyClass:CustomHoardPolicy});customHoardControl.store.metaStore.backend=localStorage;customHoardControl.readStrategy.onCacheHit=function(key,model){var promise=customHoardControl.readStrategyClass.prototype.onCacheHit.apply(this,arguments);var args=Array.prototype.slice.call(arguments);args[2].ignoreErrors=true;setTimeout(function(){console.log("running onCacheMiss after cache hit");promise.then(_.bind.apply(_,[this.onCacheMiss,this].concat(args)))}.bind(this),0);return promise}.bind(customHoardControl.readStrategy);Backbone.Hoard.localStorageControl=customHoardControl})();(function(){app.messages={common:{success:{default:"Success",i18n:"app.common.message.success"},saved:{default:"Saved",i18n:"app.common.message.saved"},error:{default:"Error",i18n:"app.common.message.error"},fail:{default:"Failed",i18n:"app.common.message.fail"},warning:{default:"Warning",i18n:"app.common.message.warning"}},bluepages:{},box:{},"corporate-strategy":{},headlines:{},learning:{},community:{error:{default:"Opps, loading your favorite Communities failed since w3 construct service is not available, please refresh the page and try it later.",i18n:"app.cogs.community.message.error"},"accept-success":{default:"Thanks for joining this community.",i18n:"app.cogs.community.message.accept-success"},"merge-fail":{default:"Opps, loading your favorite Communities failed since w3 construct service is not available, please refresh the page and try it later.",i18n:"app.cogs.community.message.merge-fail"},"no-favorites":{default:"You haven't pinned any favorites yet, pin some now.",i18n:"app.cogs.community.message.no-favorites"},"reject-success":{default:"The invitation was successfully deleted.",i18n:"app.cogs.community.message.reject-success"},"request-fail":{default:"Oops, the service Communities is currently not available. Please refresh the page and try it later.",i18n:"app.cogs.community.message.request-fail"}},media:{},minipulse:{},places:{"sort-fail":{default:"Your places preferences failed to save.",i18n:"app.cogs.places.message.sort-fail"},"fetch-preference-fail":{default:"Your places preferences failed to load.",i18n:"app.cogs.places.message.fetch-preference-fail"},"fetch-personal-fail":{default:"Your personal data failed to load.",i18n:"app.cogs.places.message.fetch-personal-fail"},"fetch-personal-empty":{default:"You don't have your personal data yet.",i18n:"app.cogs.places.message.fetch-personal-empty"},"preference-warning":{default:"You don't have preference data yet.",i18n:"app.cogs.places.message.preference-warning"},"selection-warning":{default:"Youâve reached your top 10. Click a selected Place to de-select it.",i18n:"app.cogs.places.message.selection-warning"},"fetch-json-fail":{default:"There is no data promoted.",i18n:"app.cogs.places.message.fetch-json-fail"},"add-recommendation-success":{default:'You have add "Business Conduct Guidelines" to Top 10.',i18n:"app.cogs.places.message.add-recommendation-success"},"add-link-fail":{default:"Opps ,failed to save this new link , please try later.",i18n:"app.cogs.places.message.add-link-fail"},deselect:{default:'Please de-select any one of links to add "Business Conduct Guidelines" to your Top 10 automatically.',i18n:"app.cogs.places.message.deselect"},"sort-success":{default:"Your places preferences were saved.",i18n:"app.cogs.places.message.sort-success"},"delete-featured-success":{default:"Success! You have removed one of your Top 10 links, you may add a replacement from the edit page.",i18n:"app.cogs.places.message.delete-featured-success"},"delete-fail":{default:"Opps ,failed to delete this link , please try later.",i18n:"app.cogs.places.message.delete-fail"},"data-synchronized":{default:"Your personal links have been synchronized with server data successfully.",i18n:"app.cogs.places.message.data-synchronized"},"delete-warning":{default:"Are you sure you want to delete your link for {{title}}?",i18n:"app.cogs.places.message.delete-warning"},"toggle-link-fail":{default:"Opps ,failed to toggle this link , please try later.",i18n:"app.cogs.places.message.toggle-link-fail"}},"status-updates":{},stock:{},whatsnew:{}}})();app.templates={cogs:{cms:{"large-header.html":'<h1 class="heading">Editing: \n\t<strong class="model-name"><span class="cog">{{cog}}<span> > {{item}}</strong>\n</h1>\n',"large.html":'<div class="admin-large">\n\t<div class="content">\n\t\t<div class="header-wrapper">\n\t\t\t<h1 class="heading">Editing: <strong class="model-name">{{name}}</strong></h1>\n\t\t\t<p class="note">Please select the item that you want to edit, or "+ Add new item" at the bottom of the list to create a new item.  After updating an item in the form, "Confirm" will keep your item updates in consideration, but will not save updates.  Use "Save as Draft" or "Publish" to save your updates.</p>\n\t\t</div>\n\t\t<div id="cms-dropdown-with-button"></div>\n\t\t<div id="cms-edit-form"></div>\n\t\t<div class="button-row main-controls">\n\t\t\t<button class="save-btn button secondary-form-btn">Save Draft</button>\n\t\t\t<button class="preview-btn button secondary-form-btn">Preview Draft</button>\n\t\t\t<button class="publish-btn button primary-form-btn">Publish Draft</button>\n\t\t</div>\n\t</div>\n\t<div class="loading translucent hidden">\n\t\t{{{loadingTemplate}}}\n\t</div>\n</div>',"medium.html":'<div class="admin-medium card">\n\t<div class="desktop-view">\n\t\t<div class="content">\n\t\t\t<label for="editCogs" class="header">Pick content to edit:</label>\n\t\t\t<select id="editCogs" class="editCogs" name="editCogs" size="4">\n\t\t\t\t{{#cogs}}\n\t\t\t\t\t<option value="{{main.id}}">{{main.name}}</option>\n\t\t\t\t{{/cogs}}\n\t\t\t</select>\n\t\t</div>\n\t\t<button class="edit-btn flip-1">Edit Draft Content</button>\n\t</div>\n\t<div class="mobile-view content">\n\t\t<img src="images/content-management/desktop_tablet.png" alt="mobile-alt">\n\t\t<h1>Only available on Tablet<br>and Desktop devices</h1>\n\t\t<p>Please switch devices to gain access<br>to Content Management Card</p>\n\t</div>\n</div>',"preview-notifier.html":'<div id="preview-notifier">\n\t<i id=\'error-icon\' class=\'icon-awf-alert-triangle-fill\'></i>\n\t<h1>\n\t\t<span class="preview-notifier-emphasis">\n\t\t\tDraft Preview Mode - \n\t\t</span>\n\t\t<span class="preview-notifier-body">\n\t\t\tyou are looking at the site in "Preview Mode". Drafts shown in "Preview Mode" will not be shown to the public until published.\n\t\t</span>\n\t</h1>\n</div>'},headlines:{"headlines-large-item.html":'<img src="{{imgSrc}}" class="left" width="120" height="120" alt="{{imgAlt}}">\n<div class="feed-wrapper__list__item__content">\n\t<h4 class="title-4"><a href="{{url}}" target="_blank">{{headline}}</a></h4>\n\t<p class="caption-1">{{profiled}}</p>\n\t<p class="desc">{{desc}}</p>\n</div>',"headlines-large.html":'<div class="card headlines-large" role="region" data-i18n="[aria-label]app.cogs.headlines.aria-label.large-view" aria-label="headline large card">\n    <div class="content">\n        <div class="feed-wrapper">\n            <div class="feed-wrapper__list">\n\t\t\t\t<!--Headlines Feed items-->\n\t\t\t\t<p class="go-to">\n\t\t\t\t\t<a class="redirect" href="https://w3-workplace.ibm.com/workplace/myportal/profile" target="_blank"><span data-i18n="app.cogs.headlines.edit-your-interests">Edit your interests</span><i class="icon-awf-chevron-right"><span class="access">arrow right</span></i>\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n            </div>\n        </div>\n        <p class="cta-btn">\n            <button class="flip-1" data-i18n="app.cogs.headlines.cta.search-news">Go to News Search</button>\n        </p>\n    </div>\n</div>',"headlines-medium-item.html":'<img src="{{imgSrc}}" class="left" width="60" height="60" alt="{{imgAlt}}">\n<div class="feed-wrapper__list__item__content">\n\t<h4 class="title-4"><a href="{{url}}" target="_blank">{{headline}}</a></h4>\n\t<p class="caption-1">{{profiled}}</p>\n\t<p class="desc">{{desc}}</p>\n</div>',"headlines-medium.html":'<div class="card headlines-medium" role="region" data-i18n="[aria-label]app.cogs.headlines.aria-label.medium-view" aria-label="headline medium card">\n    <div class="content">\n        <div class="feed-wrapper">\n            <div class="feed-wrapper__list">\n\t\t\t\t<!--Headlines Feed items-->\n\t\t\t\t<p class="go-to">\n\t\t\t\t\t<a class="redirect" href="https://w3-workplace.ibm.com/workplace/myportal/profile" target="_blank"><span data-i18n="app.cogs.headlines.edit-your-interests">Edit your interests</span><i class="icon-awf-chevron-right"><span class="access">arrow right</span></i>\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n            </div>\n        </div>\n        <p class="cta-btn">\n            <button class="flip-1" data-i18n="app.cogs.headlines.cta.view-more">View more headlines</button>\n        </p>\n    </div>\n</div>\n'},media:{"large-item-view.html":'<div class="video-container__player">\n    <span class="video-container__badge label-2">{{ media_id }}</span>\n    <img class="video-container__poster" src="{{ poster }}" alt="{{ title }}" />\n    <button class="video-container__play-btn icon-awf-play" data-i18n="[title]awf.common.media-controls.play" title="Play"><span class="awf-access" data-i18n="awf.common.media-controls.play">Play</span></button>\n</div>\n<div class="video-container__info">\n    <h3 class="video-container__info__title title-2">{{ title }}</h3>\n    <p class="video-container__info__runtime caption-1">{{ publish_date }}</p>\n    <p class="video-container__info__desc">\n        {{ description }}\n    </p>\n    <ul class="video-container__info__cta">\n        <li class="video-container__info__cta__btn">\n\t\t\t<a class="redirect" href="{{url}}" target="_blank" data-i18n="[html]app.cogs.media.view-at-source">View at source <i class="icon-awf-chevron-right"></i></a>\n        </li>\n        <li class="video-container__info__cta__btn" style="display:none;">\n            <button><i class="icon-awf-email"></i><span>email</span></button>\n        </li>\n    </ul>\n</div>',"large-playlist-entry-view.html":'<span class="video-playlist__list__entry__badge label-2">{{ media_id }}</span>\n<img class="video-playlist__list__entry__poster" src="{{ poster }}" alt="{{ title }}" />\n<p class="video-playlist__list__entry__title title-4">{{ title }}</p>\n<p class="caption-1">\n    <span class="video-playlist__list__entry__source">{{ source }}</span>\n    <span class="video-playlist__list__entry__runtime">{{ run_time }}</span>\n</p>\n<div class="video-playlist__list__entry__playing"><p data-i18n="app.cogs.media.now-playing">Now playing</p></div>',"large-view.html":'<div class="card" role="region" aria-label="media large card" data-component="media-large">\n    <div class="content">\n        <div class="video-playlist">\n            <h3 class="video-playlist__title label-1" data-i18n="app.cogs.media.your-videos">YOUR VIDEOS</h3>\n            <ul class="video-playlist__list" role="list"></ul>\n        </div>\n    </div>\n</div>',"medium-item-view.html":'<div class="video-entry">\n\t<div class="video-entry__player">\n\t\t<!-- Add video player here-->\n\t\t<span class="video-entry__badge label-2" data-i18n={{badge_i18n_label}}>{{ badge }}</span>\n\t\t<img class="video-entry__poster" src="{{ poster }}" alt="{{ title }}"/>\n\t\t<button class="video-entry__play-btn icon-awf-play" data-i18n="[title]awf.common.media-controls.play" title="Play"><span class="awf-access" data-i18n="awf.common.media-controls.play">Play</span></button>\n\t</div>\n\t<div class="video-entry__info--less">\n\t\t<h3 class="video-entry__info--less__title title-3">{{ trunc_title }}</h3>\n\t\t<p class="video-entry__info--less__cta">\n\t\t\t<button class="slide-on" data-i18n="[title]awf.common.show_more;awf.common.show_more" title="Show more" href="javascript:;">Show more</button>\n\t\t</p>\n\t</div>\n\t<div class="video-entry__info--more" style="display:none">\n\t\t<h3 class="video-entry__info--more__title title-4">{{ title }}</h3>\n\t\t<p class="video-entry__info--more__desc">\n\t\t\t{{ description }}\n\t\t</p>\n        <a class="redirect" href="{{redirection}}" target="_blank" data-i18n="[html]app.cogs.media.view-at-source">View at source<i class="icon-awf-chevron-right"></i></a>\n\t\t<p class="video-entry__info--more__cta">\n\t\t\t<button class="slide-off" data-i18n="[title]awf.common.show_less;awf.common.show_less" title="Show less" href="javascript:;">Show less</button>\n\t\t</p>\n\t</div>\n</div>',"medium-view.html":'<div class="card" data-component="media-medium">\n\t<div class="content" role="region" aria-label="Meida medium card" >\n\t\tAdd carousel component here\n\t</div>\n</div>'},places:{"custom-link.html":'<div id="custom-link" class="custom-link">\n\t<p class="title-3" data-i18n="app.cogs.places.gear-panel.addlink-title">{{title}}</p>\n\t<div class="custom-link__icon">\n        <p class="custom-link__icon__thumbnail">\n            <i class="{{default_icon}}" aria-label="Change a link icon" role="button"></i>\n        </p>\n        <p class="custom-link__icon__selector">\n            <button class="-awf-link-inverted" title="Change Icon"  data-i18n="app.cogs.places.cta.change;[title]app.cogs.places.cta.change">Change Icon</button>\n        </p>\n\t\t<!--Put the icon list right below the selector, so JAWS could read the content in order-->\n\t\t<div class="custom-link__icon__list">\n\t\t\t<p class="title-3" data-i18n="app.cogs.places.gear-panel.selectIcon-title">Select icon</p>\n\t\t\t<ul>\n\t\t\t\t<!--Add icons here-->\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="custom-link__icon__buttons">        \n        <button class="tertiary-form-btn" data-i18n="awf.common.cancel;[title]awf.common.cancel">Cancel</button>        \n        <button type="submit" class="primary-form-btn" data-i18n="app.common.cta.select;[title]app.common.cta.select" >Select</button>\n        </div>\n    </div>\n\t<div class="custom-link__fields">\n\t\t<!-- Common Form component start here-->\n\t\t<!-- Fields go here -->\n\t\t<!-- Buttons go here -->\n\t\t<!-- Common Form component end here-->\n\t</div>\n</div>',"icon-item.html":'<li>\n    <button class="-awf-link" >\n        <i class="{{className}}"></i>\n        <label class="access">{{className}}</label>\n    </button>\n</li>',"large-item.html":'<li class="places-large-item2 {{itemType}} {{new}} {{hidden}}" >\n    <a class="-awf-link" href="{{href}}" title="{{description}}" {{^isPersonal}} data-i18n="[title]{{desc_i18n}}" {{/isPersonal}} target="_blank">\n        {{#isLink}}\n            <i class="{{icon}}"></i>\n        {{/isLink}}\n        \n        {{#isFolder}}\n            {{topLinks}}\n        {{/isFolder}}\n        <span class="pure-text" {{^isPersonal}} data-i18n="{{title_i18n}}" {{/isPersonal}} >{{text}}</span>\n        {{#isFolder}}\n            <span class="folder_stat">{{selectedlinks}} / {{totalLinks}}</span>\n        {{/isFolder}}\n    </a>\n\n    {{#isLink}}\n        <div class="actions-label" >\n            {{#isPersonal}}\n            <button class="-awf-link-inverted icon-awf-op-times" data-i18n="[title]app.cogs.places.cta.delete" title="Delete this link" ><span class="access" data-i18n="app.cogs.places.cta.delete">Delete this link</span></button>\n            <button class="-awf-link-inverted icon-awf-pencil-fill" data-i18n="[title]app.cogs.places.cta.edit" title="Edit this link"><span class="access" data-i18n="app.cogs.places.cta.edit">Edit this link</span></button>\n            {{/isPersonal}}\n\n            <button class="-awf-link-inverted icon-awf-thumbtack" data-i18n="[title]app.cogs.places.cta.pin" title="Pin this link" ><span class="access" data-i18n="app.cogs.places.cta.pin">pin this link</span></button>\n            {{^isPersonal}}\n                {{^featured}}\n                     <button class="-awf-link-inverted js-toggle {{toggleIcon}}" data-i18n="[title]app.cogs.places.cta.eye" title="Hide this link" ><span class="access" data-i18n="app.cogs.places.cta.eye">Hide this link</span></button>\n                {{/featured}}\n            {{/isPersonal}}\n        </div>\n    {{/isLink}}\n    \n</li>\n\n\n',"large.html":'<div class="card anonymous places-large2" role="navigation" >\n    <div class="gear-panel" data-primitive="gear_panel">\n        <button class="-awf-link-inverted" id="places_actions_back" title="Click to quit edit"  data-i18n="[title]app.cogs.places.gear-panel.cancel-title">\n            <i class="icon-awf-arrow-left-thin"></i>  \n            <span data-i18n="app.cogs.places.cta.back" > Back</span>\n        </button>\n        <button class="-awf-link-inverted" id="places_actions_addlink" title="Add link" data-i18n="[title]app.cogs.places.gear-panel.addlink-title">\n            <i class="icon-awf-op-plus"></i> \n            <span data-i18n="app.cogs.places.cta.add-link2" > Add Link</span>\n        </button>\n        <button class="js-bell -awf-link-inverted"  id="places_actions_bell" title="Top 10 recommendation"  data-i18n="[title]app.cogs.places.gear-panel.bell-title">\n            <i class="icon-awf-bell"></i><span data-i18n="app.cogs.places.cta.bell" >Notifications</span>\n        </button>\n        <button class="gear -awf-link-inverted"  id="places_actions_gear" title="Edit your Places links" data-primitive="gear" data-i18n="[title]app.cogs.places.gear-panel.editModel-title">\n            <i class="icon-awf-gear"></i> \n            <span data-i18n="app.cogs.places.cta.editModel" > Edit</span>\n        </button>\n    </div>\n\n    <div class="folder-stat-panel"><button class="back-btn -awf-link-inverted" ><span class="access" data-i18n="app.cogs.places.cta.back">back</span><i class="icon-awf-arrow-left-thin"></i></button><span class="title-3"></span></div>\n    <ul class="link-list" data-container="content"></ul>\n</div>',"medium-item.html":'<li  class="places-medium-item " role="listitem" >\n\t<div>\n\t\t<p class="icon">\n\t\t\t<i></i>\n\t\t</p>\n\t\t<p class="title">\n\t\t\t<a class="-awf-link" href="javascript:;" target="_blank"></a>\n\t\t</p>\n\t</div>\n</li>',"medium.html":'<div class="card places-medium" role="navigation" >\n\t<ul class="link-list" data-container="content" role="list" aria-label="places link list"></ul>\n    <p class="cta-btn">\n        <button class="flip-1" data-i18n="app.cogs.places.cta.view-all">View all popular places</button>\n    </p>\n</div>',"top-10-recommendation.html":'<div id="top-10-recommendation">\n\t<div class="recommendation-header">\n\t\t<div id="top-10-icon">\n\t\t\t<i class="icon-awf-w3-certificate"></i>\n\t\t</div>\n\t\t<div id="top-10-title">\n\t\t\t<p>Business Conduct Guidelines</p>\n\t\t</div>\n\t\t<div id="top-10-arrow">\n\t\t\t<i class="icon-awf-arrow-right-thin"></i>\n\t\t</div>\n\t\t<div id="top-10-text">\n\t\t\t<p data-i18n="app.cogs.places.gear-panel.recommendation-title">Top 10</p>\n\t\t</div>\n\t</div>\n\t<div class="recommendation-content">\n\t\t<p data-i18n="app.cogs.places.message.recommendation">\n\t\t\tIt seems you have frequently used this link in last month. Do you want to add it to your Top 10 Places?\n\t\t</p>\n\t</div>\n\t<div id="top-10-buttons">\n\t\t<button id="places_recommendation_cancel" class="tertiary-form-btn" data-i18n="app.cogs.places.cta.ignore">\n\t\t\tIgnore\n\t\t</button>\n\t\t<button type="submit" id="places_recommendation_save"  class="secondary-form-btn" data-i18n="app.cogs.places.cta.yes">\n\t\t\tYes\n\t\t</button>\n\t</div>\n</div>'},stock:{"large.html":'<div class="stock-large">\n\t<div class="card" role="region" aria-label="stock large card" data-i18n="[aria-label]app.cogs.stock.aria-label.large-card">\n\t\t<div class="content">\n\t\t\t<p class="caption-1">{{quoteTime}}</p>\n\t\t\t<div class="price-graphic">\n\t\t\t\t<p class="price-graphic__price">\n\t\t\t\t\t<span class="price-graphic__price__currentPrice">{{price}}</span>\n                    <span class="price-graphic__price__arrow"><em class="{{indicator}} price-graphic__price__arrow--{{upDown}}" data-i18n="{{i18n_price}}" aria-label="stock price {{upDown}} icon"></em></span>\n                    <span class="price-graphic__price__changeDols"><em class="price-graphic__price__changeDols--{{upDown}}">{{changeDols}}</em></span>\n\t\t\t\t\t<span class="price-graphic__price__changeInPercentage"><em class="price-graphic__price__changeInPercentage--{{upDown}}">{{changeInPercentage}}%</em></span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<table class="market-data">\n\t\t\t\t<tr>\n\t\t\t\t\t<th class="title-4" data-i18n="app.cogs.stock.market-data.open">Open</th>\n\t\t\t\t\t<td>{{openPrice}}</td>\n\t\t\t\t\t<td class="title-4" data-i18n="app.cogs.stock.market-data.close">Close</td>\n\t\t\t\t\t<td>{{prevClose}}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class="title-4" data-i18n="app.cogs.stock.market-data.high">Day High</th>\n\t\t\t\t\t<td>{{dayHigh}}</td>\n\t\t\t\t\t<td class="title-4" data-i18n="app.cogs.stock.market-data.volume">Volume</td>\n\t\t\t\t\t<td headers="volume">{{volume}}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class="title-4" data-i18n="app.cogs.stock.market-data.low">Day Low</th>\n\t\t\t\t\t<td>{{dayLow}}</td>\n\t\t\t\t\t<td class="title-4" data-i18n="app.cogs.stock.market-data.yield">Yield</td>\n\t\t\t\t\t<td>{{yield}}</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n</div>',"medium.html":'<div class="stock-medium">\n\t<div class="card" role="region" aria-label="stock medium card" data-i18n="[aria-label]app.cogs.stock.aria-label.medium-card">\n\t\t<div class="content">\n\t\t\t<p class="caption-1">{{quoteTime}}</p>\n\t\t\t<div class="price-graphic">\n\t\t\t\t<p class="price-graphic__price">\n\t\t\t\t\t<span class="price-graphic__price__currentPrice">{{price}}</span>\n                    <span class="price-graphic__price__arrow"><em class="{{indicator}} price-graphic__price__arrow--{{upDown}}" data-i18n="{{i18n_price}}" aria-label="stock price {{upDown}} icon"></em></span>\n                    <span class="price-graphic__price__changeDols"><em class="price-graphic__price__changeDols--{{upDown}}">{{changeDols}}</em></span>\n\t\t\t\t\t<span class="price-graphic__price__changeInPercentage"><em class="price-graphic__price__changeInPercentage--{{upDown}}">{{changeInPercentage}}%</em></span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<table class="market-data">\n\t\t\t\t<tr>\n\t\t\t\t\t<th class="title-4" data-i18n="app.cogs.stock.market-data.open">Open</th>\n\t\t\t\t\t<td>{{openPrice}}</td>\n\t\t\t\t\t<td class="title-4" data-i18n="app.cogs.stock.market-data.close">Close</td>\n\t\t\t\t\t<td>{{prevClose}}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class="title-4" data-i18n="app.cogs.stock.market-data.high">Day High</th>\n\t\t\t\t\t<td>{{dayHigh}}</td>\n\t\t\t\t\t<td class="title-4" data-i18n="app.cogs.stock.market-data.volume">Volume</td>\n\t\t\t\t\t<td headers="volume">{{volume}}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class="title-4" data-i18n="app.cogs.stock.market-data.low">Day Low</th>\n\t\t\t\t\t<td>{{dayLow}}</td>\n\t\t\t\t\t<td class="title-4" data-i18n="app.cogs.stock.market-data.yield">Yield</td>\n\t\t\t\t\t<td>{{yield}}</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n</div>',
"mini.html":'<div class="stock-mini" role="region" aria-label="stock mini card" data-i18n="[aria-label]app.cogs.stock.aria-label.mini-card">\n\t<p class="price">\n\t\t<span class="price__currentPrice">{{price}}</span>\n\t\t<span class="price__arrow"><em class="{{indicator}} price__arrow--{{upDown}}" aria-label="stock price {{upDown}} icon" data-i18n="{{i18n_price}}"></em></span>\n\t\t<span class="price__changeDols"><em class="price__changeDols--{{upDown}}">{{changeDols}}</em></span>\n\t</p>\n\t<p class="name">{{name}}</p>\n</div>'}},components:{avatar:{"avatar.html":"<button class=\"interactive person-link\" id={{id}} onclick=\"window.open('http://w3.ibm.com/bluepages/profile.html?uid={{id}}','_blank')\">\n\t{{#avatar}}<img class='avatar' src='{{avatar}}' alt=\"Link to your Bluepages profile\" />{{/avatar}}\n\t{{^avatar}}<span class='avatar initials'>{{initials}}</span>{{/avatar}}\t\t\t\t\t\t\n</button>"},"card-ribbon":{"card-ribbon.html":"<div class=\"card-ribbon\">\n\t\t{{#info}}\n\t\t<div class='canvas canvas-info'>\n\t\t\t<i id='info-icon' class='icon icon-awf-info-circle-fill' aria-label=\"information\"></i>\t\n\t\t\t<span class=\"ribbon-message\">{{{info}}}</span>\n\t\t</div>\n\t\t{{/info}}\n\t\t\n\t\t\n\t\t{{#success}}\n\t\t<div class='canvas canvas-success'>\n\t\t\t<i id='icon-success' class='icon icon-awf-checkmark-circle-fill' aria-label=\"success\"></i>\t\n\t\t\t<span class=\"ribbon-message\">{{{success}}}</span>\n\t\t</div>\n\t\t{{/success}}\n\t\t\n\t\t\n\t\t{{#error}}\n\t\t<div class='canvas canvas-error'>\n\t\t\t<i id='icon-error' class='icon icon-awf-alert-triangle-fill' aria-label=\"error\"></i>\t\n\t\t\t<span class=\"ribbon-message\">{{{error}}}</span>\n\t\t</div>\n\t\t{{/error}}\n\n\n\t\t{{#warning}}\n\t\t<div class='canvas canvas-warning'>\n\t\t\t<i id='icon-warning' class='icon icon-awf-alert-triangle-fill' aria-label=\"warning\"></i>\t\n\t\t\t<span class=\"ribbon-message\">{{{warning}}}</span>\n\t\t</div>\n\t\t{{/warning}}\n\t\t\n\t</div>\n</div>"},carousel:{"carousel.html":'<div class="carousel{{type_class}}" role="region">\n    <div class="carousel-content"></div>\n    <div class="slidenav">\n        <div class="carousel-angle side">\n            <button class="carousel-button -awf-link-inverted icon-awf-chevron-left js-carousel-prev" data-i18n="[aria-label]app.common.pre" aria-label="Previous">\n            \t<span class="awf-access" data-i18n="app.common.pre">Previous</span>\n            </button>\n        </div>\n        <div class="carousel-angle side">\n            <button class="carousel-button -awf-link-inverted icon-awf-chevron-right js-carousel-next" data-i18n="[aria-label]app.common.next" aria-label="Next">\n            \t<span class="awf-access" data-i18n="app.common.next">Next</span>\n            \t<i class="icon-awf-chevron-right"></i>\n            </button>\n        </div>\n        <div class="carousel-angle" style="display:none">\n            <button class="carousel-button -awf-link-inverted icon-awf-chevron-left js-carousel-prev" data-i18n="[aria-label]app.common.pre" aria-label="Previous">\n            \t<span class="awf-access" data-i18n="app.common.pre">Previous</span>\n            </button>\n        </div>\n        <ul class="pointers"><li class="number"></li></ul>\n        <div class="carousel-angle" style="display:none">\n            <button class="carousel-button -awf-link-inverted icon-awf-chevron-right js-carousel-next" data-i18n="[aria-label]app.common.next" aria-label="Next">\n            \t<span class="awf-access" data-i18n="app.common.next">Next</span>\n            </button>\n        </div>\n    </div>\n</div>\n',"view-more-slide.html":'<article role="article" aria-label="view more slide">\n\t<div class="view-more-slide">\n\t\t<p class="view-more-slide__icon">\n\t\t\t<i class="{{icon}}"></i>\n\t\t</p>\n\t\t<p class="view-more-slide__cta">\n\t\t\t<button class="flip-2" data-i18n="{{i18n_label}}">{{label}}</button>\n\t\t</p>\n\t</div>\n</article>'},"dropdown-with-button":{"dropdown-with-button.html":'<div class="edit-controls dropdown-with-button">\n\t<button class="primary-form-btn {{ buttonClass }}" >{{ buttonText }}</button>\n\t<div class="dropdown-wrapper">\n\t\t<label for="{{ selectId }}" style="display: none;">Reset displayed content to:</label>\n\t\t<select id="{{ selectId }}" class="{{ selectClass }}" style="width:auto;">\n\t\t\t{{ ^placeholderText }}\n\t\t\t\t<option>{{ placeholderText }}</option>\n\t\t\t{{ /placeholderText }}\n\t\t\t{{ #selectOptions }}\n\t\t\t\t<option id="{{ id }}" value="{{ value }}">{{ text }}</option>\n\t\t\t{{ /selectOptions }}\n\t\t</select>\n\t</div>\n</div>'},dropdown:{"dropdown-options.html":'<ul class="dropdown-options" role="list"></ul>',"dropdown.html":'<div class="dropdown-arrow" data-primitive="arrowWrap"></div>\n<div class="dropdown-content" data-container="content" role="region"></div>'},"error-handler":{"service-error.html":"<div class=\"vertical-aligner\"></div>\n<div class='error-container'>\t\n\t{{^hideIcon}}<i id='error-icon' class='icon-awf-alert-triangle-fill'></i>{{/hideIcon}}\n\t<div class='header'>\n\t\t{{#noData}}\t\n\t\t<p class='msg msg_error no-data' data-i18n=\"app.common.message.no-data\">\n\t\t\tYou do not have any data at this time.\n\t\t</p>\n\t\t{{/noData}}\n\n\t\t{{#ssoError}}\n\t\t<p class='msg msg_error sso-error' data-i18n=\"app.components.error-handler.sso-error\" data-i18n-options='{\"serviceName\": \"{{serviceName}}\" }'>\n\t\t\tThe {{serviceName}} is having trouble recognizing your login credentials. Please login again to activate this card.\n\t\t</p>\n\t\t<button class='primary-form-btn cta-button' data-error-type='ssoError'>{{buttonTitle}}</button>\n\t\t{{/ssoError}}\n\n\t\t{{#apiError}}\n\t\t<p class='msg msg_error api-error' data-i18n=\"app.components.error-handler.api-error\">\n\t\t\tOops ... the data is not available at this time.  Please try again soon.\n\t\t</p>\n\t\t{{/apiError}}\n\n\t\t{{#unauthorizedError}}\n\t\t<p class='msg msg_error unauthorized-error' data-i18n=\"app.components.error-handler.unauthorized-error\">\n\t\t\tOops â¦ the content was blocked because it was not signed in. Please try again after signing in.\n\t\t</p>\n\t\t{{/unauthorizedError}}\n\n\t\t{{#timeoutError}}\n\t\t<p class='msg msg_error timeout-error' data-i18n=\"app.components.error-handler.timeout-error\">\n\t\t\tOops â¦ the session could not be completed due to timeout. Please try again soon.\n\t\t</p>\n\t\t{{/timeoutError}}\n\n\t\t{{#feedbackError}}\n\t\t<p class='msg feedback-error' data-i18n=\"app.components.error-handler.feedback-error\">\n\t\t\tSomething went wrong. Please try again.</p>\n\t\t{{/feedbackError}}\n\n\t\t{{#customError}}\n\t\t<p class='msg custom-error'>{{{customErrorMessage}}}</p>\n\t\t{{/customError}}\t\n\n\t</div>\t\n\t\n</div>"},form:{"_duration-item.html":'<a href="javescript:;" role="button" class="increase" aria-label="increase time"><i class="icon-awf-chevron-up"></i><span class="awf-access">increase time</span></a>\n<p class="item-content">{{current_value}}</p>\n<a href="javescript:;" role="button" class="decrease" aria-label="decrease time"><i class="icon-awf-chevron-down"></i><span class="awf-access">decrease time</span></a>',"_select.html":'<input class="input__field" disabled />\n<a href="javascript:;" role="button" class="input__trigger" aria-label="viewing time"><i></i><span class="awf-access">viewing time</span></a>',"date-picker.html":'<input class="input__field" />\n<a href="javascript:;" role="button" class="input__trigger" aria-label="viewing time"><i></i><span class="awf-access">viewing time</span></a>',"dropdown-item.html":'<li><a title="<%= title %>" href="javascript:;" data-i18nkey="<%= title %>"><%- title %></a></li>',"dropdown.html":'<ul class="input__dropdown">\n    <li>No list to display.</li>\n</ul>',"field.html":'<section class="input" data-editor  role="region" aria-label="<%= title %> label">\n    <label class="input__label" for="<%= editorId %>"<% if (i18n_label) { %> data-i18n="<%= i18n_label %>"<% } %>>\n        <%- title %>\n    </label>\n    <div class="message-bar"><i data-primitive="icon"></i> <span data-error></span></div>\n    <% if (help) { %><span><%= help %></span><% } %>\n</section>',"fieldset.html":'<div class="fields" data-fields></div>',"form.html":'<form class="juro-form" aria-label="form" role="textbox">\n    <div data-fieldsets></div>\n    <div class="buttons">\n        <% if (resetButton) { %>\n        <button type="reset" class="js-form-reset-button tertiary-form-btn" data-i18n="awf.common.reset"><%= resetButton %></button>\n        <% } %>\n        <% if (cancelButton) { %>\n        <button type="cancel" class="js-form-cancel-button tertiary-form-btn" data-i18n="awf.common.cancel"><%= cancelButton %></button>\n        <% } %>\n        <% if (submitButton) { %>\n        <button type="submit" class="js-form-submit-button primary-form-btn" data-i18n="awf.common.save"><%= submitButton %></button>\n        <% } %>\n    </div>\n</form>'},"loading-mark":{"loading-mark.html":'<div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>'},"message-bar":{"message-bar.html":'<i data-primitive="icon"></i> <span data-primitive="content"></span>'},"slide-down":{"slide-down.html":'<div class="slide-content"></div>'},"social-actions":{"social-actions-option.html":'<a role="button" href="javascript:;" title="{{title}}" class="icon-awf-{{icon}} {{status}}" data-i18n="[title]{{i18n_label}}">\n    <span class="access" data-i18n="{{i18n_label}}">{{title}}</span>\n</a>\n<span>{{text}}</span>'},tabs:{"tabs.html":'<ul role="tablist"></ul>\n'}}};(function(){app.base.views={};app.base.views.BaseView=Backbone.View.extend({className:"base-view",loadingTemplate:app.templates.components["loading-mark"]["loading-mark.html"],initialize:function(options){this.renderOnSync=this.renderOnSync!==undefined?this.renderOnSync:true;if(options){if(options.parentView)this.parentView=options.parentView;if(options.syncListenJustOnce)this.syncListenJustOnce=options.syncListenJustOnce;if(typeof options.renderOnSync!=="undefined")this.renderOnSync=options.renderOnSync;if(options.template)this.template=options.template;if(options.postRender)this.postRender=options.postRender;if(options.model){this.setContent(options.model)}else if(options.collection){this.setContent(options.collection)}if(options.largeCard){this.largeCard=options.largeCard}if(options.notLocalize){this.notLocalize=options.notLocalize}}var model=this.model||this.collection;this.listenTo(model,"fetch",this.setLoader);this.listenTo(model,"error error:cached",this.renderError);if(!this.name)this.name=(!options||!options.name?"unnamed":options.name)+"-"+this.cid;var origRender=this.render;this.render=function(){origRender.apply(this,arguments);if(this.postRender)this.postRender();this.trigger("rendered")}.bind(this)},setLoader:function(){this.$el.html(this.loadingTemplate)},setContent:function(arg){if(arg){if(this.renderOnSync){if(this.syncListenJustOnce)this.listenToOnce(arg,"sync",this.handleSync);else{this.listenTo(arg,"sync",this.handleSync);this.listenTo(arg,"sync:cached",this.handleSyncCached)}}if(arg instanceof Backbone.Model)this.model=arg;else if(arg instanceof Backbone.Collection)this.collection=arg}return this},handleSync:function(){this.render()},handleSyncCached:function(){this.render()},render:function(opts,append){if(this.template){var attributes={};if(this.model&&this.model.attributes){attributes=_.extend({},this.model.attributes,opts)}else if(this.collection){attributes=_.extend({collection:this.collection.toJSON()},opts)}else if(typeof opts==="object"){attributes=opts}var html=this.template instanceof Function?this.template(attributes):Mustache.render(this.template,attributes);if(append){this.$el.append(html);this.$el.find(".loading-mark").remove()}else{this.$el.html(html)}if("i18next"in window&&!this.notLocalize)this.$el.localize()}else{console.log("no template found.")}return this},remove:function(){if(this.model)console.log("removing view for model id: "+this.model.id);this.trigger("being_removed");console.log("just triggered being_removed");Backbone.View.prototype.remove.apply(this,arguments);return this},renderError:function(model,response,options){model=model||{};response=response||{};options=options||{};this.errorOptions=this.errorOptions||options.errorOptions;options.errorType=model instanceof Backbone.Model||model instanceof Backbone.Collection?model.getErrorType.apply(null,arguments):app.BackboneErrorTypes.api;if(this.errorOptions){options.errorType=this.errorOptions.customErrorMessage?app.BackboneErrorTypes.custom:options.errorType;options.hideIcon=this.errorOptions.hideIcon;options.customErrorMessage=this.errorOptions.customErrorMessage;options.buttonTitle=this.errorOptions.buttonTitle;options.buttonFunction=this.errorOptions.buttonFunction}var allowRetry=typeof model.isRetryAllowed==="function"?model.isRetryAllowed():false;if(allowRetry){var template=Mustache.render(app.templates.components["card-ribbon"]["card-ribbon.html"],{error:"An <strong>Error</strong> has occurred. Please try again."});this.$el.remove(".card-ribbon");this.$el.prepend(template)}else{var errorCard=new app.ErrorCard({errorType:options.errorType,serviceName:model.name,customErrorMessage:options.customErrorMessage,hideIcon:options.hideIcon,buttonTitle:options.buttonTitle,buttonFunction:options.buttonFunction?options.buttonFunction.bind(this,options):undefined});errorCard.render();this.$el.html(errorCard.$el)}console.error(this.logError(options.errorType,model,response,options))},logError:function(errorType,model,response,options){return new app.YourCoError(response.statusText,{cnum:awf.user.profile_data?awf.user.profile_data.User.Cnum:null,user:awf.user.profile_data?awf.user.profile_data.User.CommonName:null,timestamp:(new Date).toJSON(),modelName:model.name,errorType:errorType,model:model,response:response,options:options})}});app.base.views.BaseView.extend=function(child){var view=Backbone.View.extend.apply(this,arguments);view.prototype.events=_.extend({},this.prototype.events,child.events);return view}})();(function(){app.YourCoError=function(message,detail){detail=detail||{};this.name="YourCoError";this.message=message;this.cnum=detail.cnum;this.user=detail.user;this.timestamp=detail.timestamp;this.modelName=detail.modelName;this.errorType=detail.errorType;this.model=detail.model;this.response=detail.response;this.options=detail.options;this.stack=(new Error).stack};app.YourCoError.prototype=new Error})();(function(){app.serviceModels.cms={};app.serviceModels.news={};app.serviceModels.media={};app.serviceModels.places={};app.serviceModels.stock={}})();(function(){app.serviceModels.Avatar=app.base.models.BaseModel.extend({name:"Avatar",defaults:{avatarsize:75,url:null},initialize:function(options){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);if(options){this.name=options.name;this.email=options.email;this.urlBase=options.urlBase}this.url=this.urlBase+this.id},fetch:function(){return this.userHasPhoto().then(function(hasPhoto,service){if(hasPhoto){this.set({avatar:this.url})}else{this.set({avatar:false})}this.trigger("sync")}.bind(this))},userHasPhoto:function(){var deferred=$.Deferred();var xhr=new XMLHttpRequest;var url=this.removeSizeFromUrl();xhr.open("GET",url);xhr.responseType="arraybuffer";xhr.onload=function(e){var arraybuffer=xhr.response;var rawResponse=xhr.getResponseHeader("Content-Type");if(rawResponse){deferred.resolve(true)}else{deferred.resolve(false)}};xhr.send();return deferred.promise()},removeSizeFromUrl:function(){return this.url.split("?s=")[0]}})})();(function(){var shared={name:"CMS",checkCmsKey:function(){if(!this.cmsKey)throw"a cmsKey is required for a cms service model/collection"},url:function(){return app.utils.buildCmsServiceUrl(this.cmsKey)}};app.serviceModels.cms.Model=app.base.models.BaseModel.extend(shared,{initialize:function(attributes){this.cmsKey=attributes&&attributes.cmsKey;app.base.models.BaseModel.prototype.initialize.apply(this,arguments)}});app.serviceModels.cms.Collection=app.base.collections.BaseCollection.extend(shared,{model:app.base.models.BaseModel,initialize:function(models,options){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);this.cmsKey=attributes&&attributes.cmsKey;this.checkCmsKey()}})})();(function(){app.serviceModels.news.cms=app.serviceModels.cms.Collection.extend({cmsKey:"headlines",parse:function(data){return data.stories}})})();(function(){var urlTemplate="//w3-workplace.ibm.com/w3restsvc/usercontent/{{appId}}/json/email/{{email}}/applicationid/17/section/0,1/attribs/metadata%2Cimage%2Cprofiledfor/callback/{{callback}}",appId="6127839ee7627460c4189e36fc6b1b01",email="anonymous@us.ibm.com",jsonpCallback="JsonpCallback",url="";url=_.template(urlTemplate)({appId:appId,email:email,callback:jsonpCallback});app.serviceModels.news.IBMerNews=app.base.collections.BaseCollection.extend({buildUrl:function(email){if(email){this.url=_.template(urlTemplate)({appId:appId,email:email,callback:jsonpCallback})}},model:app.base.models.BaseModel,url:url,initialize:function(){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var self=this;var origFetch=this.fetch.bind(this);this.fetch=function(params){if(!params){params={}}if(!params.dataType){params.dataType="jsonp"}if(!params.jsonpCallback){params.jsonpCallback=jsonpCallback}if(awf.user.is_authenticated){this.buildUrl(awf.user.info.email)}return origFetch(params)}.bind(this);this.fetched=false}})})();(function(){app.serviceModels.news.json=app.base.collections.BaseCollection.extend({model:app.base.models.BaseModel,url:"data/json/local-news.json",parse:function(data){return data.stories}})})();(function(){var urlTemplate="//{{host}}/w3restsvc/news/{{appId}}/json/email/{{email}}/section/0/maxcount/{{limit}}/callback/{{callback}}",appId="6127839ee7627460c4189e36fc6b1b01",email="anonymous@us.ibm.com",limit=25,jsonpCallback="JsonpCallback",url="",host="w3-workplace.ibm.com";url=_.template(urlTemplate)({host:host,appId:appId,email:email,limit:limit,callback:jsonpCallback});var email_key="w3n.user.email";app.probable_email=localStorage.getItem(email_key);app.serviceModels.news.W3News=app.base.collections.BaseCollection.extend({buildUrl:function(email){if(email){this.url=_.template(urlTemplate)({host:app.utils.odwHostSwitch("articles"),appId:appId,email:email,limit:limit,callback:jsonpCallback})}},model:app.base.models.BaseModel,url:url,initialize:function(){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var self=this;var origFetch=this.fetch.bind(this);this.fetch=function(params){if(!params){params={}}if(!params.dataType){params.dataType="jsonp"}if(!params.jsonpCallback){params.jsonpCallback=jsonpCallback}if(awf.user.is_authenticated){app.probable_email=awf.user.info.email;this.buildUrl(app.probable_email)}else{if(app.probable_email){this.buildUrl(app.probable_email)}}return origFetch(params)}.bind(this);this.fetched=false}})})();(function(){app.serviceModels.media.Item=app.base.models.BaseModel.extend({defaults:function(){return{title:"empty title...",description:"empty description",redirection:"//w3-mediahub.ibm.com/viewerportal/vmds/home.vp",poster:"images/youribm_videoimage.png",badge:"FEATURED",badge_i18n_label:"app.common.badge.featured",run_time:"",source:"",active:false}},togglePlayStatus:function(){this.set("is_playing",!this.get("is_playing"))}})})();(function(){app.serviceModels.media.cms=app.serviceModels.cms.Collection.extend({model:app.serviceModels.media.Item,cmsKey:"media",parse:function(data){return data.videos}})})();(function(){var urlTemplate="//w3-workplace.ibm.com/w3restsvc/usercontent/760cb30ad578f91fa977f21dffe76ff4/json/email/{{email}}/applicationid/39/section/0/texttype/start,end,description,poster,redirect_url,src,is_iframe,title,url,video_url,enable_mobile,enable_on_prod/callback/{{callback}}",jsonpCallback="callback",anonymous_email="anonymous@us.ibm.com",url="";url=_.template(urlTemplate)({email:anonymous_email,callback:jsonpCallback});app.serviceModels.media.ecm=app.base.collections.BaseCollection.extend({model:app.serviceModels.media.Item,buildUrl:function(email){this.url=_.template(urlTemplate)({email:email||anonymous_email,callback:jsonpCallback})},url:url,initialize:function(){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var self=this;var origFetch=this.fetch.bind(this);this.fetch=function(params){if(!params){params={}}if(!params.dataType){params.dataType="jsonp"}if(!params.jsonpCallback){params.jsonpCallback=jsonpCallback}if(awf.user.is_authenticated){this.buildUrl(awf.user.info.email)}return origFetch(params)}.bind(this);this.fetched=false}})})();(function(){app.serviceModels.media.json=app.base.collections.BaseCollection.extend({model:app.serviceModels.media.Item,url:"data/json/local-media.json",initialize:function(){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments)},parse:function(data){return data.videos}})})();(function(){app.serviceModels.places.icons=app.base.models.BaseModel.extend({url:"data/json/local-icons.json",initialize:function(){app.base.models.BaseModel.prototype.initialize.apply(this,arguments)}})})();(function(){var url="data/json/popular-links.json";app.serviceModels.places.json=app.base.collections.BaseCollection.extend({model:app.base.models.BaseModel,url:url,initialize:function(){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var origFetch=this.fetch.bind(this);this.fetch=function(params){var self=this;var deferred=$.Deferred();if(!params){params={}}if(!params.dataType){params.dataType="json"}if(params.dataSource=="folder"&&awf.user.is_authenticated&&awf.flags.isActive("squads.echo")&&awf.flags.isActive("cogs.places.dev")&&awf.flags.isActive("cogs.places.folder")){self.url="data/json/popular-folder-links.json"}origFetch.call(this,params).done(function(){deferred.resolve()}.bind(this)).fail(deferred.reject);return deferred}.bind(this);this.fetched=false},sync:Backbone.Hoard.localStorageControl.getModelSync(),parse:function(data){var array=[];if(data.folders){_.forEach(data.folders,function(folder){_.forEach(folder.links,function(link){link=_.extend(link,{folder:folder.id,folderLabel:folder.label?folder.label:"root"});if(this.isValid(link)){array.push(link)}}.bind(this))}.bind(this))}else{_.forEach(data,function(link){link=_.extend(link,{folder:2,folderLabel:"root"});if(this.isValid(link)){array.push(link)}}.bind(this))}return array},isValid:function(link){var valid=false;if(link.config&&link.config.userProfile){if(awf.user.is_authenticated){var flag=true;var userLocation=link.config.userProfile.Location;var userOrganizations=link.config.userProfile.Organizations;var userJobRoles=link.config.userProfile.JobRoles;var userBlueGroups=link.config.userProfile.BlueGroups;if(userLocation){var country_id=awf.user.data.odw_info.Profile.Locations[0].Country["@id"];if(!_.includes(userLocation,country_id)){flag=false}}if(userOrganizations){var containsOrgs=false;var orgs=awf.user.data.odw_info.Profile.Organizations[0].Level;_.forEach(orgs,function(org){if(_.includes(userOrganizations,org.text)){containsOrgs=true}});if(!containsOrgs){flag=false}containsOrgs=null}if(awf.flags.isActive("squads.echo")){if(userJobRoles){var containsJobRole=false;_.forEach(userJobRoles,function(jobRole){if(awf.__.FeatureToggler.handlers.odw_job_role.check(jobRole)){containsJobRole=true}});if(!containsJobRole){flag=false}containsJobRole=null}if(userBlueGroups){var containsBlueGroup=false;_.forEach(userBlueGroups,function(userBlueGroup){if(awf.__.FeatureToggler.handlers.bluegroup.check(userBlueGroup)){containsBlueGroup=true}});if(!containsBlueGroup){flag=false}containsBlueGroup=null}}if(flag){valid=true}}}else{valid=true}return valid}})})();(function(){app.serviceModels.places.userConfig={};var base_url="http://sbybz3014.sby.ibm.com:44080",href=window.location.href,env=app.utils.urlParams.env,is_oidc=false;if(href.substring(0,6)=="https:"){base_url="https://sbybz3014.sby.ibm.com:44443"}if(env){switch(env.toLowerCase()){case"test":base_url="https://stgpccggww3n01.w3-969.ibm.com";break;case"test2":base_url="https://testpccggww3n02.w3-969.ibm.com";break;case"prod":base_url="https://w3-services1.w3-969.ibm.com";break;default:break}}else{switch(window.location.host.toLowerCase()){case"w3-pre.ibm.com":base_url="https://stgpccggww3n01.w3-969.ibm.com";break;case"w3.ibm.com":base_url="https://w3-services1.w3-969.ibm.com";break;default:base_url=base_url;break}}var apis={mediumcard:base_url+"/youribm/userconfig/v1/links/mediumcard/IBM/youribm/places",personal:base_url+"/youribm/userconfig/v1/links/personal/IBM/youribm/places",mediumcard_oidc:"https://w3-services1.w3-969.ibm.com/youribm/userconfig/v1/links/oidc/mediumcard/IBM/youribm/places",personal_oidc:"https://w3-services1.w3-969.ibm.com/youribm/userconfig/v1/links/oidc/personal/IBM/youribm/places"};function handleW3id(self,method,params,args){var dfr=$.Deferred();args=args||[];awf.user.services.oauth.maybeFetchRefreshToken().done(function(){params.headers=params.headers||{};_.extend(params.headers,{Authorization:"Bearer "+awf.user.services.oauth.getAccessToken()});args.push(params);method.apply(self,args).done(dfr.resolve).fail(dfr.reject)});return dfr.promise()}var Mediumcard=app.base.models.BaseModel.extend({initialize:function(){var self=this;self.url=is_oidc?apis.mediumcard_oidc:apis.mediumcard;var origSave=self.save;self.save=function(params){params=params||{};params.dataType="text";params.contentType="application/json";params.method="PUT";if(is_oidc){return handleW3id(self,origSave,params,[null])}else{params.xhrFields={withCredentials:true};return origSave.call(self,null,params)}};var origFetch=self.fetch;self.fetch=function(params){params=params||{};if(is_oidc){return handleW3id(self,origFetch,params)}else{params.xhrFields={withCredentials:true};return origFetch.call(self,params)}};var origDestroy=self.destroy;self.destroy=function(params){params=params||{};if(is_oidc){return handleW3id(self,origDestroy,params)}else{params.xhrFields={withCredentials:true};return origDestroy.call(self,params)}}}});var Personal=app.base.models.BaseModel.extend({initialize:function(){var self=this;self.url=is_oidc?apis.personal_oidc:apis.personal;var origSave=self.save;self.save=function(params){params=params||{};params.dataType="json";if(is_oidc){return handleW3id(self,origSave,params,[null])}else{params.xhrFields={withCredentials:true};return origSave.call(self,null,params)}};var origFetch=self.fetch;self.fetch=function(params){params=params||{};if(is_oidc){return handleW3id(self,origFetch,params)}else{params.xhrFields={withCredentials:true};return origFetch.call(self,params)}};var origDestroy=self.destroy;self.destroy=function(params){params=params||{};params.wait=true;params.data=JSON.stringify(self.toJSON());params.contentType="application/json";if(is_oidc){return handleW3id(self,origDestroy,params)}else{params.xhrFields={withCredentials:true};return origDestroy.call(self,params)}}},sync:Backbone.Hoard.localStorageControl.getModelSync()});var MediumCollecion=app.base.collections.BaseCollection.extend({model:Mediumcard,initialize:function(){var self=this;self.url=is_oidc?apis.mediumcard_oidc:apis.mediumcard;app.base.collections.BaseCollection.prototype.initialize.apply(self,arguments);var origFetch=self.fetch;self.fetch=function(params){params=params||{};if(is_oidc){return handleW3id(self,origFetch,params)}else{params.xhrFields={withCredentials:true};return origFetch.call(self,params)}}},updateLink:function(params){var def=new $.Deferred,model=new Mediumcard(params);model.save().done(function(res){localStorage.removeItem(this.url);this.fetch({uncache:true}).done(function(res){def.resolve(res)})}.bind(this)).fail(def.reject);return def},deleteLink:function(params){var def=new $.Deferred,model=new Merdiumcard(params);model.destroy(params).done(function(res){res=res[0];_.remove(this.toJSON()[0].folders[0].links,function(link){return link.id==res.link.id});def.resolve(res)}.bind(this)).fail(def.reject);return def},sync:Backbone.Hoard.localStorageControl.getModelSync()});var PersonalCollecion=app.base.collections.BaseCollection.extend({model:Personal,initialize:function(){var self=this;self.url=is_oidc?apis.personal_oidc:apis.personal;app.base.collections.BaseCollection.prototype.initialize.apply(self,arguments);var origFetch=self.fetch;self.fetch=function(params){params=params||{};if(is_oidc){return handleW3id(self,origFetch,params)}else{params.xhrFields={withCredentials:true};return origFetch.call(self,params)}}},updateLink:function(params){var def=new $.Deferred,model=new Personal(params);model.save().done(function(res){res=res[0];localStorage.removeItem(this.url);this.fetch({uncache:true});if(_.isEmpty(this.toJSON())){this.set([{folders:[{id:res.id,label:"root",links:[_.extend(res.link,{new:true})]}]}])}else{_.filter(this.toJSON()[0].folders,{id:res.id})[0].links=_.map(_.filter(this.toJSON()[0].folders,{id:res.id})[0].links,function(link){if(link.new===true){link.new=false}return link});var link=_.find(_.filter(this.toJSON()[0].folders,{id:res.id})[0].links,{id:res.link.id});if(link){link.title=res.link.title;link.url=res.link.url;link.icon=res.link.icon;link.hidden=res.link.hidden;link.featured=res.link.featured;link.new=true}else{_.filter(this.toJSON()[0].folders,{id:res.id})[0].links.push(_.extend(res.link,{new:true}))}}def.resolve(res)}.bind(this)).fail(function(){def.reject()}.bind(this));setTimeout(function(){if(def.state()=="pending"){def.reject()}},1e4);return def},deleteLink:function(params){var def=new $.Deferred,model=new Personal(params);model.destroy().done(function(res){res=res[0];localStorage.removeItem(this.url);this.fetch({uncache:true});_.remove(_.filter(this.toJSON()[0].folders,{id:params.id})[0].links,function(link){return link.id==params.link.id});def.resolve(res)}.bind(this)).fail(def.reject);return def}});app.serviceModels.places.userConfig=app.base.models.CompositeModel.extend({initSubmodels:function(attrs){is_oidc=!!_.get(awf,"user.services.oauth");var mediumCollection=new MediumCollecion,personalCollection=new PersonalCollecion;mediumCollection.on("request",function(model,xhr,options){this.trigger("request",model,xhr)}.bind(this));personalCollection.on("request",function(model,xhr,options){this.trigger("request",model,xhr)}.bind(this));this.addCollection("mediumcard",mediumCollection).addCollection("personal",personalCollection)},keyedSubModels:true,fetch:function(options){options=_.extend(options,{all:true,method:"GET"});return app.base.models.CompositeModel.prototype.fetch.call(this,options)}})})();(function(){var snip_model=Backbone.Model.extend({api_key:"65a7669e5e6d49af1db9d3ec7ae7583d",default_mod:"POST",url:function(){return"https://ibm.biz/api/shorten/"},initialize:function(){this.render()},render:function(){this.params={data:{api_key:this.api_key,url:""},type:this.default_mod,timeout:1e4}},shorten:function(url){return this.fetch(url)},fetch:function(url){if(url){this.params.data.url=url;return Backbone.Model.prototype.fetch.apply(this,[this.params])}else{console.log("snip-service.js - fetch - please provide a valid url")}}});app.serviceModels.snipRequester=new snip_model})();(function(){app.serviceModels.stock.json=app.base.models.BaseModel.extend({url:"data/json/local-stock.json",initialize:function(){app.base.models.BaseModel.prototype.initialize.apply(this,arguments)}})})();(function(){var jsonpCallback="stockJsonpCallback";app.serviceModels.stock.odw=app.base.models.BaseModel.extend({url:"//{{host}}/w3restsvc/mktreport/quote/detail/6127839ee7627460c4189e36fc6b1b01/json/symbol/{{stock_id}}/callback/"+jsonpCallback,initialize:function(){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);var stockConfig=app.content.cards.stock;var stockId=stockConfig.stock_id?stockConfig.stock_id:"IBM";this.url=_.template(this.url)({host:app.utils.odwHostSwitch("articles"),stock_id:stockId
});var origFetch=this.fetch;this.fetch=function(params){if(!params){params={}}if(!params.dataType){params.dataType="jsonp"}if(!params.jsonpCallback){params.jsonpCallback=jsonpCallback}if(!params.all){params.all=true}return origFetch.call(this,params)}.bind(this);this.fetched=false}})})();(function(){app.serviceModels.stock.yahoo=app.base.models.BaseModel.extend({url:"https://finance.yahoo.com/webservice/v1/symbols/{{stock_id}}/quote?format=json&view=detail",initialize:function(){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);var stockConfig=app.content.cards.stock;var stockId=stockConfig.stock_id?stockConfig.stock_id:"IBM";this.url=this.url.replace("{{stock_id}}",stockId);var origFetch=this.fetch;this.fetch=function(params){if(!params){params={}}if(!params.dataType){params.dataType="jsonp"}if(!params.contentType){params.cache=true}if(!params.all){params.all=true}params.timeout=5e4;return origFetch.call(this,params)}.bind(this);this.fetched=false}})})();(function(){app.components.Avatar=app.base.views.BaseView.extend({name:"avatar",template:app.templates.components.avatar["avatar.html"],initialize:function(options){if(options){this.model.attributes.id=this.model.attributes.id||this.id}}});app.components.sametime={};app.components.sametime.Status=app.base.views.BaseView.extend({name:"sametime",template:"<span class='sametime-status-avatar {{statusText}}'></span>",initialize:function(options){this.model.attributes.statusText=Status.getStyleForStatus(this.model.attributes.status).toLowerCase()}})})();(function(){var carousels=0;app.components=app.components||{};app.components.carousel_sync=app.base.views.BaseView.extend({template:_.template(app.templates.components.carousel["carousel.html"]),view_more_html:_.template(app.templates.components.carousel["view-more-slide.html"]),loading_html:_.template(app.templates.components["loading-mark"]["loading-mark.html"]),events:{"click .js-carousel-prev":"prevSlide","click .js-carousel-next":"nextSlide"},initialize:function(params){this.params=params;this.slide_index=0;this.total_slide=params.total||0;this.items_limit=null;this.timeout=0;this.position_timeout=0;this.position="+";this.items=[];this.items_in_dom=[];this.type_class=" number-nav";if(params.side_nav){this.type_class+=" side-nav"}if(params.limits){this.items_limit=parseInt(params.limits,10);if(this.total_slide>this.items_limit){this.total_slide=this.items_limit}}this.tag_event_module=params.tag_event_module||false;this.metrics=app.utils.createMetricTag({group:awf.app.id});this.carousel_index=carousels++;this.on("carousel:goToSlide",function(index){if(this.hasNotItem(index)){this.$el.append(this.loading_html)}}.bind(this))},render:function(method){this.$el[method||"html"](this.template({type_class:this.type_class}));if(this.total_slide<2){this.setAngle("hide")}else{this.setAngle("show")}if(this.params.disable_angle){this.setAngle("hide")}this.setAriaLabel();this.first_run=true;return this},setAriaLabel:function(){if(this.params.aria_label){this.$el.find("> .carousel").attr("aria-label",this.params.aria_label)}else{this.$el.find("> .carousel").attr("aria-label","Carousel"+this.carousel_index)}},prevSlide:function(event){event.preventDefault();if($(event.currentTarget).attr("aria-label"))this.tagCarouselEvent($(event.currentTarget).attr("aria-label"));this.position="-";var index=this.slide_index-1;if(index<0){index=this.total_slide-1}this.trigger("prev-slide",index);this.goToSlide(index)},nextSlide:function(event){event.preventDefault();if($(event.currentTarget).attr("aria-label"))this.tagCarouselEvent($(event.currentTarget).attr("aria-label"));this.position="+";var index=this.slide_index+1;if(index===this.total_slide){index=0}this.trigger("next-slide",index);this.goToSlide(index)},goToSlide:function(index,silent){var self=this;if(!silent){this.trigger("carousel:goToSlide",index)}if(this.timeout){clearTimeout(this.timeout)}var prev_index=this.slide_index;this.slide_index=index;if(this.position_timeout){clearTimeout(this.position_timeout)}if(!this.first_run){this.items[index].removeClass("active").attr("aria-hidden","true").css("left",self.position+"100%")}this.position_timeout=setTimeout(function(){self.first_run=false;var prev_item_index=self.position==="+"?index-1:index+1;if(prev_item_index===-1){prev_item_index=self.total_slide-1}else if(prev_item_index===self.total_slide){prev_item_index=0}self.items[prev_index].css("left",(self.position==="+"?"-":"+")+"100%");self.items[index].addClass("active").attr("aria-hidden","false").animate({left:"0%"},0);self.setNavNumber(index);self.timeout=setTimeout(function(){self.items[index].siblings().removeClass("active").attr("aria-hidden","true");self.trigger("slide_change",index);if(!silent){self.trigger("carousel:goToSlide:complete",index)}},500)},100)},reset:function(){this.slide_index=0;this.position="+";this.items_in_dom=[];this.items=[];this.$el.find(".carousel-content").empty()},setDefPointer:function(index){if(_.contains(this.items_in_dom,index)){index=index?parseInt(index,10):0;this.goToSlide(index,true)}},appendItem:function(item,direct){if(!item){throw new Error("Carousel sync: the parameter item must be provided when append an item.")}if(isNaN(item.index)){throw new Error("Carousel sync: the index number of item must be provided when append an item.")}if(!item.view){throw new Error("Carousel sync: the view of item must be provided when append an item.")}if(item&&this.hasNotItem(item.index)&&(this.items_limit&&this.total_slide<this.items_limit||!this.items_limit||direct)){this.$el.find(".loading-mark").remove();item.view=$(item.view);this.items[item.index]=item.view;this.appendToDom(item);if(_.without(this.items,undefined).length===1){item.view.addClass("active");this.setNavNumber(item.index);this.setDefPointer(item.index);item.view.attr("aria-hidden","false")}else{item.view.attr("aria-hidden","true")}}else{return false}},appendToDom:function(item){if(this.hasNotItem(item.index)){this.items_in_dom.push(item.index);this.$el.find(".carousel-content").append(item.view)}},hasNotItem:function(index){if(index>=this.total_slide){console.log("Carousel sync: the index number of item should be less than total silde.")}return!_.contains(this.items_in_dom,index)&&index<this.total_slide},removeLastItem:function(){if(this.items.length>1){var index=this.items.length-1;if(!this.hasNotItem(index)){this.items[index].remove();this.items.pop()}this.total_slide--;if(this.slide_index>=this.total_slide){this.slide_index=this.total_slide-1}this.setDefPointer(this.slide_index)}},setAngle:function(action){var selecter=this.params.side_nav?".carousel-angle":".carousel-angle:not(.side)";switch(action){case"show":this.$el.find(selecter).css("display","inline-block");break;case"hide":this.$el.find(selecter).hide();break;default:this.$el.find(selecter).hide();break}},setNavNumber:function(index){this.$el.find(".pointers .number").html(index+1+"/"+this.total_slide)},getPrevBtn:function(){return this.$el.find(".js-carousel-prev")},getNextBtn:function(){return this.$el.find(".js-carousel-next")},tagCarouselEvent:function(title){if(!this.tag_event_module)return false;var parameters={ev:"click",action:"button",name:title,section:"carousel",target:"none",module:this.tag_event_module};this.metrics.tagEvent(parameters)},getIndex:function(){return this.slide_index},setViewMore:function(params){params=params||{};params.i18n_label=params.i18n_label||"";var item=$(this.view_more_html(params));this.appendItem(item,true);item.find("button").on("click",function(event){event.preventDefault();if(params.link){window.open(params.link,"_blank")}if(params.callback){params.callback()}});return item}})})();(function(){var carousels=0;app.components=app.components||{};app.components.carousel=app.base.views.BaseView.extend({slide_index:0,total_slide:0,items_limit:null,timeout:0,position_timeout:0,position:"+",template:_.template(app.templates.components.carousel["carousel.html"]),view_more_html:_.template(app.templates.components.carousel["view-more-slide.html"]),events:{"click .js-carousel-prev":"prevSlide","click .js-carousel-next":"nextSlide"},initialize:function(params){this.params=params;this.items=[];this.type_class=" number-nav";if(params.side_nav){this.type_class+=" side-nav"}if(params.limits){this.items_limit=parseInt(params.limits,10)}this.tag_event_module=params.tag_event_module||false;this.metrics=app.utils.createMetricTag({group:awf.app.id});this.carousel_index=carousels++},render:function(method){this.$el[method||"html"](this.template({type_class:this.type_class}));if(this.params.disable_angle){this.setAngle("hide")}this.setAriaLabel();this.first_run=true;if("i18next"in window)this.$el.localize();return this},setAriaLabel:function(){if(this.params.aria_label){this.$el.find("> .carousel").attr("aria-label",this.params.aria_label)}else{this.$el.find("> .carousel").attr("aria-label","Carousel"+this.carousel_index)}},prevSlide:function(event){event.preventDefault();if($(event.currentTarget).attr("aria-label"))this.tagCarouselEvent($(event.currentTarget).attr("aria-label"));this.position="-";var index=this.slide_index-1;if(index<0){index=this.total_slide-1}this.goToSlide(index)},nextSlide:function(event){event.preventDefault();if($(event.currentTarget).attr("aria-label"))this.tagCarouselEvent($(event.currentTarget).attr("aria-label"));this.position="+";var index=this.slide_index+1;if(index===this.total_slide){index=0}this.goToSlide(index)},goToSlide:function(index,silent){var self=this;if(!silent){this.trigger("carousel:goToSlide",index)}if(this.timeout){clearTimeout(this.timeout)}this.slide_index=index;if(this.position_timeout){clearTimeout(this.position_timeout)}if(!this.first_run){self.$el.find(".carousel-content >:eq("+index+")").removeClass("active").attr("aria-hidden","true").css("left",self.position+"100%")}this.position_timeout=setTimeout(function(){self.first_run=false;var prev_item_index=self.position==="+"?index-1:index+1;if(prev_item_index===-1){prev_item_index=self.total_slide-1}else if(prev_item_index===self.total_slide){prev_item_index=0}self.$el.find(".carousel-content >:eq("+prev_item_index+")").css("left",(self.position==="+"?"-":"+")+"100%");self.$el.find(".carousel-content >:eq("+index+")").addClass("active").attr("aria-hidden","false").animate({left:"0%"},0);self.setNavNumber(index);self.timeout=setTimeout(function(){self.$el.find(".carousel-content >:eq("+index+")").siblings().removeClass("active").attr("aria-hidden","true").css("left",self.position+"100%");self.trigger("slide_change",index);if(!silent){self.trigger("carousel:goToSlide:complete",index)}},500)},100)},reset:function(){this.slide_index=0;this.total_slide=0;this.position="+";this.items=[];this.$el.find(".carousel-content").empty()},setDefPointer:function(index){index=index?parseInt(index,10):0;this.goToSlide(index,true)},appendItem:function(item,direct){if(item&&(this.items_limit&&this.total_slide<this.items_limit||!this.items_limit||direct)){item=$(item);this.$el.find(".carousel-content").append(item);this.items.push(item);this.total_slide++;this.setNavNumber(this.slide_index);if(this.total_slide===1){item.attr("aria-hidden","false");this.setAngle("hide")}else{item.attr("aria-hidden","true");this.setAngle("show")}}else{return false}},removeLastItem:function(){this.items[this.items.length-1].remove();this.items.pop();this.total_slide--;if(this.slide_index>=this.total_slide){this.slide_index=this.total_slide-1}this.setDefPointer(this.slide_index)},setAngle:function(action){var selecter=this.params.side_nav?".carousel-angle":".carousel-angle:not(.side)";switch(action){case"show":this.$el.find(selecter).css("display","inline-block");break;case"hide":this.$el.find(selecter).hide();break;default:this.$el.find(selecter).hide();break}},setNavNumber:function(index){this.$el.find(".pointers .number").html(index+1+"/"+this.total_slide)},getPrevBtn:function(){return this.$el.find(".js-carousel-prev")},getNextBtn:function(){return this.$el.find(".js-carousel-next")},addItems:function(items){var self=this;_.forEach(items,function(item,i){self.items.push(item);self.total_slide++;self.setNavNumber(self.slide_index)})},tagCarouselEvent:function(title){if(!this.tag_event_module)return false;var parameters={ev:"click",action:"button",name:title,section:"carousel",target:"none",module:this.tag_event_module};this.metrics.tagEvent(parameters)},getIndex:function(){return this.slide_index},setViewMore:function(params){params=params||{};params.i18n_label=params.i18n_label||"";var item=$(this.view_more_html(params));this.appendItem(item,true);item.find("button").on("click",function(event){event.preventDefault();if(params.link){window.open(params.link,"_blank")}if(params.callback){params.callback()}})}})})();(function(){if(!app.base.components)app.base.components={};app.base.components.buttonDropDown=app.base.views.BaseView.extend({template:app.templates.components["dropdown-with-button"]["dropdown-with-button.html"],initialize:function(opts){app.base.views.BaseView.prototype.initialize.call(this,opts);this.opts=opts},getValue:function(){var selected=this.$("select").val();return selected},render:function(){var opts=this.opts;this.$el.html(Mustache.render(this.template,{buttonClass:opts.buttonClass,buttonText:opts.buttonText||"Submit",selectId:opts.selectId,selectClass:opts.selectClass||"",selectOptions:opts.selectOptions}));select2opts=opts.select2opts||{minimumResultsForSearch:Infinity,placeholder:opts.placeholderText||"select option",allowClear:true};this.$("select").select2(select2opts)}})})();(function(){app.components=app.components||{};app.components.dropdownOptions=app.base.views.BaseView.extend({el:'<ul class="dropdown-options" role="list"></ul>',li_html:'<li role="listitem"><a title="{{key}}" href="javascript:;" data-i18nkey="{{item}}">{{item}}</a></li>',i18n_li_html:_.template('<li role="listitem"><a href="javascript:;" title="{{title}}" data-i18n="[title]{{i18n}};{{i18n}};" data-i18nkey="{{key}}">{{title}}</a></li>'),initialize:function(options){this.options=options;this.items=[];this.metrics=app.utils.createMetricTag({group:awf.app.id})},render:function(){var compiled;if(this.options.i18n){var htmls="";_.forEach(this.options.i18n,function(val,key){htmls+=this.i18n_li_html({key:val.key,title:val.i18n_label,i18n:key})}.bind(this));this.$el.append(htmls);if("i18next"in window)this.$el.localize()}else{compiled=_.template("{[ _.forEach(options, function(item, key) { ]}"+this.li_html+" {[ }); ]}");this.$el.append(compiled(this.options))}this.$el.find("li").each(function(i,option){this.items.push(option);$(option).on("click",function(event){this.metrics.tagEvent({module:this.options.module?this.options.module:"dropdown",ev:"click",name:$(event.target).html(),action:"click ",section:"dropdown option"})}.bind(this))}.bind(this));this.id=this.options.id+"-options";this.$el.attr("id",this.id);this.$el.attr("aria-label",this.id);this.updateScrolling(this.items.length);return this},getId:function(){return this.id},appendItem:function(item){this.$el.append(item);if("i18next"in window)$(item).localize();this.items.push(item);this.updateScrolling(this.items.length)},prependItem:function(item){this.$el.prepend(item);if("i18next"in window)$(item).localize();this.items.unshift(item);this.updateScrolling(this.items.length)},removeItem:function(){this.$el.find("li").last().remove();this.items.pop();this.updateScrolling(this.items.length)},disabledOptions:function(array){_.forEach(array,function(d_option){_.forEach(this.$el.find("li>a"),function(option){if(d_option==$(option).html()){$(option).parent("li").addClass("disabled")}})}.bind(this))},updateScrolling:function(items_length){if(items_length>=10){this.$el.addClass("dropdown-options-scrollable")}else{this.$el.removeClass("dropdown-options-scrollable")}}})})();(function(){app=app||{};app.dropdowns=[];app.components=app.components||{};app.components.dropdown=app.base.views.BaseView.extend({el:'<div class="dropdown" role="region"></div>',dropdown_wrap:'<div class="dropdown-wrap"></div>',template:_.template(app.templates.components.dropdown["dropdown.html"]),direction_class:{top:"icon-awf-chevron-up",bottom:"icon-awf-chevron-down",left:"icon-awf-chevron-up",right:"icon-awf-chevron-down"},initialize:function(options){this.options=options;this.interpolation=0;this.current_select=null;this.prev_select=null;this.current_position=null;this.$trigger=null;this.$evt_target=null;this.event_type=null;this.has_wrap=true;this.$reference_elem=null;this.is_show=false;this.auto_show=false;this.direction="top";this.background="#ffffff";this.width=300;this.height="auto";this.abort_show=false;this.top_component=null;this.left_interpolation=0;this.module="";this.name="";this.section="";this.positioner={trigger:{l:null,t:null,w:null,h:null},arrow:{l:null,t:null,w:null,h:null},dropdown:{l:null,t:null,w:null,h:null},wrap:{l:null,t:null,w:null,h:null}};this.responsive_for_dropdown=null;this.metrics=app.utils.createMetricTag({group:awf.app.id})},render:function(){this.$el.html(this.template(this.options));this.defineElements();this.$trigger=this.options.trigger;this.event_type=this.options.evt;this.$evt_target=this.options.evt_target;this.top_position=this.options.top_position||null;this.left_position=this.options.left_position||null;this.right_position=this.options.right_position||null;this.width=this.options.width||this.width;this.height=this.options.height||this.height;this.has_wrap=this.options.has_wrap;this.$reference_elem=this.options.reference||this.$body;this.$no_wrap_reference_elem=this.options.no_wrap_reference_elem||null;this.auto_show=this.options.auto_show||this.auto_show;this.direction=this.options.direction||this.direction;this.background=this.options.background_color||this.background;this.top_component=this.options.top_component;this.left_interpolation=this.options.left_interpolation||0;this.responsive_for_dropdown=this.options.responsive_for_dropdown||null;this.flipcard=this.options.flipcard||null;this.module=this.options.module||"";this.name=this.options.name||"";this.section=this.options.section||"";this.get_options=this.options.get_options||null;this.direct_left_position=this.options.direct_left_position||null;this.not_hide_by_content=this.options.not_hide_by_content||null;app.dropdowns.push(this);this.id="dropdown-"+app.dropdowns.length;this.addContent();this.setDropdownSize();this.bindEvents();_.remove(app.dropdowns,function(dropdown){if(_.isEmpty(dropdown.$trigger)){dropdown.destroy()}return _.isEmpty(dropdown.$trigger)});setTimeout(function(){this.triggerPosition();this.dropdownArrowPosition();if(this.has_wrap){this.wrapPosition()}this.onShowPosition()}.bind(this),200);return this},defineElements:function(){this.$dropdown_wrap=$(this.dropdown_wrap);this.$dropdown=this.$el;this.$dropdown_content=this.$el.find(".dropdown-content");this.$body=$("body")},addContent:function(){this.$el.attr("id",this.id);this.$el.attr("aria-label",this.id);this.$dropdown_content.attr("aria-label",this.id+"-options-wrap");this.$dropdown.append(this.$dropdown_content);if(this.has_wrap){this.$dropdown_wrap.append(this.$dropdown);this.$reference_elem.append(this.$dropdown_wrap)}else{this.$reference_elem.append(this.$dropdown)}},setDropdownSize:function(new_size){var size=new_size||{width:_.isNumber(this.width)?this.width+"px":this.width,height:_.isNumber(this.height)?this.height+"px":this.height};this.$dropdown.css(size)},bindEvents:function(){var self=this;self.$evt_target.on(self.event_type,function(event){event.preventDefault();self.metrics.tagEvent({module:self.module,ev:event.type,name:self.name,action:self.name,section:self.section});self.playAnimation();if(self.get_options){self.get_options()}});$("body").on("click",function(event){if(!_.isEmpty(self.$evt_target)&&!_.isEmpty(self.$trigger)&&!$.contains(self.$evt_target[0],event.target)&&self.$evt_target[0]!=event.target&&self.$trigger[0]!=event.target&&self.is_show){if(self.not_hide_by_content){if(!$.contains(self.$dropdown[0],event.target)){setTimeout(function(){self.hide();setTimeout(function(){if(!self.$dropdown.hasClass("slide")){self.trigger("dropdown-hide")}},100)},100)}}else{setTimeout(function(){self.hide();setTimeout(function(){if(!self.$dropdown.hasClass("slide")){self.trigger("dropdown-hide")}},100)},100)}}});if(self.top_component&&self.event_type!=="click"){self.top_component.on("click",function(event){if(!$.contains(self.$evt_target[0],event.target)&&self.$evt_target[0]!=event.target&&self.$trigger[0]!=event.target){setTimeout(function(){self.hide()},100)}})}if(self.flipcard){self.flipcard.on("flip-down-half-complete",$el,self.hideAllDropdowns)}var throttledResizeHandler=_.throttle(function(event){if(self.$dropdown.hasClass("slide")){self.hide()}},1e3);$(window).on("resize",throttledResizeHandler)},triggerPosition:function(){if(!_.isEmpty(this.$trigger)){var offset=this.$trigger.offset();this.positioner.trigger.l=offset.left;this.positioner.trigger.t=offset.top;this.positioner.trigger.w=this.$trigger.innerWidth();this.positioner.trigger.h=this.$trigger.innerHeight()}},dropdownArrowPosition:function(){this.positioner.dropdown.w=this.$dropdown.innerWidth();this.positioner.dropdown.h=this.$dropdown.innerHeight()},wrapPosition:function(){if(this.has_wrap){var offset=this.$dropdown_wrap.offset();this.positioner.wrap.l=offset.left;this.positioner.wrap.t=offset.top;this.positioner.wrap.w=this.$dropdown_wrap.innerWidth();this.positioner.wrap.h=this.$dropdown_wrap.innerHeight()}},onShowPosition:function(){if(this.responsive_for_dropdown){this.width=this.$evt_target.innerWidth();this.setDropdownSize()}this.triggerPosition();this.dropdownArrowPosition();this.wrapPosition();this.dropdownPosition();if(this.has_wrap){this.current_position=-(this.positioner.wrap.t-this.positioner.trigger.t-this.positioner.trigger.h)}else{this.current_position=this.positioner.trigger.t}this.$dropdown.css("top",this.current_position-this.interpolation)},hideAllDropdowns:function(){_.forEach(app.dropdowns,function(dropdown,i){dropdown.hide()})},playAnimation:function(){if(this.$dropdown.hasClass("slide")){this.onHidePosition();this.hide("focus");setTimeout(function(){if(!this.$dropdown.hasClass("slide")){this.trigger("dropdown-hide")}}.bind(this),100)}else{this.onShowPosition();setTimeout(function(){this.show();this.position()}.bind(this),200)}},setContent:function(html,not_event){var self=this;this.$dropdown_content.html(html);if(!not_event){setTimeout(function(){self.$dropdown.find("a").last().on("blur",function(event){event.preventDefault();if(self.$trigger.is("a")){self.$trigger.focus()}else{if(self.$trigger.parents("a")[0]){self.$trigger.parents("a")[0].focus()}}})},1e3);self.$dropdown_content.on("click",function(event){event.preventDefault();var name="none";var section=self.section;if(event.target&&(event.target.innerText||event.target.innerHTML)){name=event.target.innerText?event.target.innerText:event.target.innerHTML;section=section.replace("trigger","option")+":"+name}awf.tagMetric({module:self.module,ev:event.type,name:name,action:name,section:section,target:event.target&&event.target.href?event.target.href!=="javascript:;"?event.target.href:"none":"none"})})}},emptyContent:function(){this.$dropdown_content.empty()},getContent:function(){return this.$dropdown_content.html()},show:function(){this.hideAllDropdowns();this.is_show=true;this.$dropdown.addClass("slide");if(this.$dropdown.find("a")[0]){this.$dropdown.find("a")[0].focus()}setTimeout(function(){this.trigger("dropdown-show")}.bind(this),500)},hide:function(action){this.is_show=false;this.$dropdown.removeClass("slide");if(action=="focus"){if(this.$trigger.is("a")){this.$trigger.focus()}else{if(this.$trigger.parents("a")[0]){this.$trigger.parents("a")[0].focus()}}}},dropdownPosition:function(){var self=this,top,left,right,direction=self.direction;switch(direction){case"top":if(self.has_wrap){left=(self.positioner.wrap.w-self.positioner.dropdown.w)/2;top=-(self.positioner.wrap.t-self.positioner.trigger.t-self.positioner.trigger.h)}else{if(self.$no_wrap_reference_elem){left=self.$no_wrap_reference_elem.offset().left}else{left=self.positioner.trigger.l+self.positioner.trigger.w/2-self.positioner.dropdown.w/2-self.left_interpolation}if(self.left_position){left=self.left_position}else if(self.right_position){right=self.right_position}if(self.top_position){top=self.top_position}else{top=self.positioner.trigger.t+self.positioner.trigger.h}}break;case"bottom":if(self.has_wrap){left=(self.positioner.wrap.w-self.positioner.dropdown.w)/2;top=-(self.positioner.trigger.h+self.positioner.dropdown.h)}else{left=self.positioner.trigger.l+self.positioner.trigger.w/2-self.positioner.dropdown.w/2-self.left_interpolation;top=self.positioner.trigger.l-self.positioner.dropdown.h}break;case"left":if(self.has_wrap){left=self.positioner.trigger.l+self.positioner.trigger.w;top=self.positioner.trigger.t+self.positioner.trigger.h/2}else{left=self.positioner.trigger.l+self.positioner.trigger.w;top=self.positioner.trigger.t-self.positioner.trigger.h/2}break;default:if(self.has_wrap){left=(self.positioner.wrap.w-self.positioner.dropdown.w)/2;top=0}else{left=self.positioner.trigger.l+self.positioner.trigger.w/2-self.positioner.dropdown.w/2-self.left_interpolation;top=self.positioner.trigger.t+self.positioner.trigger.h}break}if(!self.has_wrap){if(left<0){left=10}}self.positioner.dropdown.l=Math.floor(left);self.positioner.dropdown.t=Math.floor(top)},setBackgroundColor:function(new_color){var color=new_color||this.background;this.$dropdown_content.css("background-color",color)},onHidePosition:function(){this.$dropdown.css("top",this.current_position+"px")},position:function(){this.setPosition()},setPosition:function(){if(this.right_position){this.$dropdown.css({right:this.right_position||0,top:this.positioner.dropdown.t+"px"})}else{this.$dropdown.css({left:this.direct_left_position||this.positioner.dropdown.l+"px",top:this.positioner.dropdown.t+"px"})}},toggle:function(){this.$dropdown.toggleClass("slide")},destroy:function(){this.$dropdown_wrap.remove()}})})();(function(){app.ErrorCard=app.base.views.BaseView.extend({initialize:function(options){options=options||{};this.setErrorType(options.errorType,true);this.templateData.serviceName=options.serviceName||"service";this.templateData.customErrorMessage=options.customErrorMessage;this.templateData.hideIcon=options.hideIcon;this.templateData.buttonTitle=options.buttonTitle;this.buttonFunction=options.buttonFunction},errorTypes:{noData:false,ssoError:false,apiError:false,feedbackError:false,customError:false},tagName:"div",className:"error-overlay",template:app.templates.components["error-handler"]["service-error.html"],templateData:{},events:{"click button.cta-button":"onButtonClick"},onButtonClick:function(e){this.buttonFunction(e)},setErrorType:function(key,value){_.forEach(this.errorTypes,function(e,k){this.errorTypes[k]=false}.bind(this));this.errorTypes[key]=value},render:function(errorType){var templateData=_.merge(this.templateData,this.errorTypes);this.$el.html($(Mustache.render(this.template,templateData)))}});app.BackboneErrorTypes={noData:"noData",sso:"ssoError",api:"apiError",unauthorized:"unauthorizedError",timeout:"timeoutError",feedback:"feedbackError",custom:"customError"}})();(function(){_.extend($.datepicker,{_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date,today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=numMonths[0]!==1||numMonths[1]!==1,currentDate=this._daylightSavingAdjust(!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate()));maxDraw=minDate&&maxDraw<minDate?minDate:maxDraw;while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst));prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a href='javascript:;' class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>";nextText=this._get(inst,"nextText");nextText=!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst));next=this._canAdjustMonth(inst,+1,drawYear,drawMonth)?"<a href='javascript:;' class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>";currentText=this._get(inst,"currentText");gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today;currentText=!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst));controls=!inst.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(inst,"closeText")+"</button>":"";buttonPanel=showButtonPanel?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=isNaN(firstDay)?0:firstDay;showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";dow=null;for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="<div class='ui-datepicker-group";if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;
default:calender+=" ui-datepicker-group-middle";cornerClass="";break}}calender+="'>"}calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+(/all|left/.test(cornerClass)&&row===0?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&row===0?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";thead=showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"";for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="<th scope='col'"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)}leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows;this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";tbody=!showWeek?"":"<td class='ui-datepicker-week-col'>"+this._get(inst,"calculateWeek")(printDate)+"</td>";for(dow=0;dow<7;dow++){daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[true,""];otherMonth=printDate.getMonth()!==drawMonth;unselectable=otherMonth&&!selectOtherMonths||!daySettings[0]||minDate&&printDate<minDate||maxDate&&printDate>maxDate;tbody+="<td class='"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2].replace(/'/g,"&#39;")+"'":"")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>")+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+(numMonths[0]>0&&col===numMonths[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");group+=calender}html+=group}html+=buttonPanel;inst._keyEvent=false;return html},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input"){input=$("input",input.parentNode)[0]}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input){return}var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0])}}beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return}datepicker_extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value=""}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight}isFixed=true;if($(input).data("position")==="absolute"){isFixed=false}offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);if(!isFixed){offset.left=0;offset.top=inst.input.outerHeight()}inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",display:"none",left:offset.left+"px",top:offset.top+"px",width:isFixed?"":"100%"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.css("z-index",datepicker_getZindex($(input))+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration)}else{inst.dpDiv[showAnim||"show"](showAnim?duration:null)}if($.datepicker._shouldFocusInput(inst)){inst.input.focus()}$.datepicker._curInst=inst}},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||input&&inst!==$.data(input,"datepicker")){return}if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst);inst.dpDiv.css({width:""})};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[showAnim==="slideDown"?"slideUp":showAnim==="fadeIn"?"fadeOut":"hide"](showAnim?duration:null,postProcess)}if(!showAnim){postProcess()}this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose){onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_updateDatepicker:function(inst){this.maxRows=4;datepicker_instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17,activeCell=inst.dpDiv.find("."+this._dayOverClass+" a");if(activeCell.length>0){datepicker_handleMouseover.apply(activeCell.get(0))}inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",width*cols+"em")}inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)){inst.input.focus()}if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml)}origyearshtml=inst.yearshtml=null},0)}if(this._datepickerShowing){inst.dpDiv.css({width:inst.input.data("position")==="absolute"?"100%":""})}}});function datepicker_handleMouseover(){if(!$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).addClass("ui-datepicker-next-hover")}}}function datepicker_extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]===null){target[name]=props[name]}}return target}function datepicker_getZindex(elem){var position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value}}elem=elem.parent()}return 0}})();(function(){var i18n_domain="app.components.form.";app.form=app.form||{};app.form={editors:{},custom:{},classes:{filled:"input--filled",error:"has-error",icons:{error:"icon-awf-op-times-circle-fill",warning:"icon-awf-alert-triangle-fill",info:"icon-awf-info-circle-fill"}},tpls:Backbone.Form.templateSettings,i18n_ns:{required:i18n_domain+"required",regexp:i18n_domain+"regexp",number:i18n_domain+"number",range:i18n_domain+"range",email:i18n_domain+"email",url:i18n_domain+"url",match:i18n_domain+"match",duration:i18n_domain+"duration",datepicker:i18n_domain+"datepicker",presentday:i18n_domain+"presentday",characterCount:i18n_domain+"characterCount"}};var templates=app.templates.components.form;_.extend(Backbone.Form.validators,{errMessages:{required:"This is required!",url:"Please input a valid link!",duration:"Please select a valid value!",datepicker:"Please provide a valid date!",presentday:"Please provide a valid date before today!",characterCount:"You have gone over the limit of 1,000 characters by "},duration:function(options){options=_.extend({type:"duration",message:this.errMessages.duration},options);return function duration(value){options.value=value;var err={type:options.type,message:_.isFunction(options.message)?options.message(options):options.message};if(parseFloat(value)===0)return err}},datepicker:function(options){options=_.extend({type:"datepicker",message:this.errMessages.datepicker},options);return function datepicker(value){options.value=value;var regexp=new RegExp(options.regexp);var err={type:options.type,message:_.isFunction(options.message)?options.message(options):options.message};if(!regexp.test(value))return err;if(new Date(value)=="Invalid Date")return err}},presentday:function(options){options=_.extend({type:"presentday",message:this.errMessages.presentday},options);return function presentday(value){options.value=value;var new_date=new Date(value).getTime();var today=(new Date).getTime();var err={type:options.type,message:_.isFunction(options.message)?options.message(options):options.message};if(_.isNaN(new_date))return err;if(new_date>today)return err}},characterCount:function(options){options=_.extend({type:"characterCount",message:this.errMessages.characterCount},options);return function characterCount(value){options.value=value.trim();if(value.length>1e3){var over=value.length-1e3;var err={type:options.type,message:options.message+over+".",count:over};return err}}}});_.extend(Backbone.Form.Editor.prototype,{clearValue:function(){if(this.$el.hasClass("input__radios")){this.$el.find("input:checked")[0].checked=false;this.model.unset(this.key)}else if(this.$el.hasClass("input__field")||this.tagName==="span"){var input=this.tagName==="span"?this.$el.find(".input__field"):this.$el;if(input.length){this.value="";input.val("");this.model.unset(this.key);return null}}if(this.hasFocus)return false;return this}});app.form.fieldset=Backbone.Form.Fieldset.extend({},{template:_.template(templates["fieldset.html"],null,app.form.tpls)});app.form.field=Backbone.Form.Field.extend({render:function(){var schema=this.schema,editor=this.editor,$=Backbone.$;if(this.editor.noField===true){return this.setElement(editor.render().el)}var $field=$($.trim(this.template(_.result(this,"templateData"))));if(schema.fieldClass)$field.addClass(schema.fieldClass);if(schema.fieldAttrs)$field.attr(schema.fieldAttrs);$field.find("[data-editor]").add($field).each(function(i,el){var $container=$(el),selection=$container.attr("data-editor");if(_.isUndefined(selection))return;$container.find("label").after(editor.render().el)});this.setElement($field);if(this.schema.col){this.$el.addClass("col-"+this.schema.col+"-1")}if(this.editor.getValue()){this.$el.addClass(app.form.classes.filled)}return this},createSchema:function(schema){if(_.isString(schema))schema={type:schema};schema=_.extend({type:"Text",title:this.createTitle()},schema);schema.type=_.isString(schema.type)?app.form.editors[schema.type]||Form.editors[schema.type]:schema.type;return schema},createEditorId:function(){var prefix=this.idPrefix,id=this.key;id=id.replace(/\./g,"_");if(_.isString(prefix)||_.isNumber(prefix))return prefix+id;if(_.isNull(prefix))return id;return id},validate:function(){var error=this.editor.validate();if(error){error=this.checkI18nLabel(error);this.setError(error.message);this.setMessageI18nLabel(error)}else{this.clearError()}return error},clearValue:function(){this.clearError();var notFocus=this.editor.clearValue();if(notFocus){this.$el.removeClass("input--filled")}else{this.editor.focus()}return this.editor},setError:function(msg){Backbone.Form.Field.prototype.setError.apply(this,arguments);this.setMessage("add")},clearError:function(){Backbone.Form.Field.prototype.clearError.apply(this,arguments);this.setMessage("remove")},setMessage:function(action){action=[action+"Class"];this.$el.find(".message-bar")[action]("error");this.$el.find(".message-bar i")[action](app.form.classes.icons.error)},checkI18nLabel:function(error){var i18n_error=error;switch(error.type){case"required":case"number":case"email":case"url":case"duration":case"regexp":if(app.utils.hasI18nTag(app.form.i18n_ns[error.type])){i18n_error.message=i18next.t(app.form.i18n_ns[error.type])}break;case"characterCount":if(app.utils.hasI18nTag(app.form.i18n_ns[error.type])){this.$el.find(".message-bar [data-error]").data("i18n-options",{count:error.count})}break;case"range":break;case"match":break;default:if(app.utils.hasI18nTag(app.form.i18n_ns[error.type])){i18n_error.message=i18next.t(app.form.i18n_ns[error.type])}break}return i18n_error},setMessageI18nLabel:function(error){if(app.utils.hasI18nTag(app.form.i18n_ns[error.type])){this.$el.find(".message-bar [data-error]").attr("data-i18n",app.form.i18n_ns[error.type])}},templateData:function(){var schema=this.schema;return{help:schema.help||"",title:schema.title,titleHTML:schema.titleHTML,fieldAttrs:schema.fieldAttrs,editorAttrs:schema.editorAttrs,key:this.key,editorId:this.editor.id,i18n_label:schema.i18n_label||""}}},{template:_.template(templates["field.html"],null,app.form.tpls),errorClassName:app.form.classes.error})})();(function(){app.form.editors._duration_item=Backbone.View.extend({tagName:"section",className:"duration-item",template:_.template(app.templates.components.form["_duration-item.html"]),events:{"click a.increase":"increase","click a.decrease":"decrease"},units:{year:"Year",month:"Month",week:"Week",day:"Day",hour:"Hour",minute:"Minute",second:"Second"},initialize:function(options){Backbone.View.prototype.initialize.apply(this,arguments);this.values={def:"00",max:99,min:0,increment:1};this.options=options;_.extend(this,_.pick(options,"unit"));if(!this.unit){this.unit=this.units.hour}if(this.model){if(this.model.get("values")){_.extend(this.values,this.model.get("values"))}this.model.set("current_value",this.values.def);this.listenTo(this.model,"change:current_value",this.renderContent)}else{if(this.options.values){_.extend(this.values,this.options.values)}this.current_value=this.values.def;_.extend(this.options,{current_value:this.current_value});this.on("change-value",this.renderContent)}},render:function(){if(this.model){this.$el.html(this.template(this.model.toJSON()))}else{this.$el.html(this.template(this.options))}this.defineElements();return this},defineElements:function(){this.content=this.$el.find(".item-content")},increase:function(){var val=this.model?this.model.get("current_value"):this.current_value;val=parseInt(val,10)+this.values.increment;this.setItemValue(val,"increase")},decrease:function(){var val=this.model?this.model.get("current_value"):this.current_value;val=parseInt(val,10)-this.values.increment;this.setItemValue(val,"decrease")},fixZero:function(val){if(val<10){val="0"+val}return val},setItemValue:function(val,status){val=this.toScope(val);if(this.model){this.model.set("current_value",val)}else{this.current_value=val;this.trigger("change-value",{value:val,unit:this.unit,status:status})}},toScope:function(val){val=parseInt(val,10);if(val>this.values.max){return this.values.min}if(val<this.values.min){return this.values.max}return val},renderContent:function(new_value){var val=new_value||(this.model?this.model.get("current_value"):this.current_value);val=this.fixZero(_.isNumber(val)?val:val.value);this.content.html(val)}})})();(function(){app.form.editors._select=Backbone.Form.editors.Text.extend({template:_.template(app.templates.components.form["_select.html"],null,app.form.tpls),tagName:"span",trigger_class:"icon-awf-chevron-down",initialize:function(options){Backbone.Form.editors.Text.prototype.initialize.call(this,options);this.options=options},render:function(){this.$el.html(this.template({}));this.$el.find(".input__trigger i").addClass(this.trigger_class);this.$input=this.$el.find("input");this.$trigger=this.$el.find(".input__trigger");this.$input.attr("id",this.id);this.$input.attr("name",this.getName());this.$input.attr("type",this.$el.attr("type"));if(this.schema.editorClass)this.$input.addClass(this.schema.editorClass);if(this.schema.editorAttrs)this.$input.attr(this.schema.editorAttrs);if(this.$el.attr("id"))this.$el.removeAttr("id");if(this.$el.attr("type"))this.$el.removeAttr("type");this.setValue(this.value);return this},getValue:function(){return this.$input.val()},setValue:function(value){this.$input.val(value)},focus:function(){this.hasFocus=true;this.$input.focus();this.$el.closest(".input").addClass(app.form.classes.filled);this.form.fields[this.getName()].validate();this.trigger("focus",this)},blur:function(){this.hasFocus=false;this.$input.blur();if(_.isEmpty(this.getValue())){this.$el.closest(".input").removeClass(app.form.classes.filled)}this.form.fields[this.getName()].validate();this.trigger("blur",this)}})})();(function(){app.form.editors.datepicker=app.form.editors._select.extend({template:_.template(app.templates.components.form["date-picker.html"],null,app.form.tpls),trigger_class:"icon-awf-calendar",is_showed:false,timeout:0,events:_.extend({},app.form.editors._select.prototype.events,{"click a.input__trigger":"toggleDatepicker","focus input":"focus","blur input":"blur"}),regexp:{yy:"([0-9]{4})",mm:"([0-9]{2})",dd:"([0-9]{2})"},render:function(options){app.form.editors._select.prototype.render.call(this,options);this.$input.data("position","absolute");var def_date_format="yy-mm-dd";this.$input.datepicker(_.extend({},{dateFormat:def_date_format,maxDate:0,beforeShow:function(){this.$input.datepicker("widget").appendTo(this.$input.closest(".input"))}.bind(this),onClose:this.checkValue.bind(this),onChangeMonthYear:function(){setTimeout(function(){this.$trigger.focus()}.bind(this),0)}.bind(this)},this.options.schema.plugin_options||{}));var self=this,dateFormat=this.options.schema.plugin_options?this.options.schema.plugin_options.dateFormat||def_date_format:def_date_format;this.dateRegexp=dateFormat.replace(/yy|dd|mm/gi,function(rep){var string="";switch(rep){case"yy":string=self.regexp.yy;break;case"dd":string=self.regexp.dd;break;case"mm":string=self.regexp.mm;break}return string});return this},toggleDatepicker:function(){if(this.$input.datepicker("widget").is(":visible")){this.$input.datepicker("hide")}else{this.$input.datepicker("show");if(this.timeout){clearTimeout(this.timeout)}}},checkValue:function(date){if(date){this.$el.closest(".input").addClass(app.form.classes.filled)}else{this.$el.closest(".input").removeClass(app.form.classes.filled)}this.form.fields[this.getName()].validate();setTimeout(function(){this.$trigger.focus()}.bind(this),0)},focus:function(){this.hasFocus=true;this.$el.closest(".input").addClass(app.form.classes.filled);this.trigger("focus",this)},blur:function(){this.hasFocus=false;if(_.isEmpty(this.getValue())){this.$el.closest(".input").removeClass(app.form.classes.filled)}this.form.fields[this.getName()].validate();this.trigger("blur",this)},validate:function(){var $el=this.$el,error=null,value=this.getValue(),formValues=this.form?this.form.getValue():{},validators=this.validators,getValidator=this.getValidator.bind(this);if(validators){_.every(validators,function(validator){error=getValidator(validator)(value,formValues);return error?false:true})}return error},getValidator:function(validator){var validators=Backbone.Form.validators;if(_.isRegExp(validator)){return validators.regexp({regexp:validator})}if(_.isString(validator)){if(!validators[validator])throw new Error('Validator "'+validator+'" not found');return validators[validator]({regexp:this.dateRegexp})}if(_.isFunction(validator))return validator;if(_.isObject(validator)&&validator.type){var config=validator;return validators[config.type](config)}throw new Error("Invalid validator: "+validator)}})})();(function(){app.form.editors.durationpicker=app.form.editors._select.extend({trigger_class:"icon-awf-clock",is_showed:false,timeout:0,units_relationship:{year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1},events:_.extend(app.form.editors._select.prototype.events,{"click a":"preventEvent"}),initialize:function(options){app.form.editors._select.prototype.initialize.call(this,options);this.duration={};this.base_unit="hour";this.items=[{values:{max:40},unit:"hour"},{values:{max:45,increment:15},unit:"minute"}]},render:function(options){app.form.editors._select.prototype.render.call(this,options);this.genrateDropdown();this.genrateItems();this.bindEvents();return this},genrateDropdown:function(){this.dropdown=new app.components.dropdown({trigger:this.$trigger,evt:"click",evt_target:this.$trigger,reference:this.$el,width:150,height:150,has_wrap:true,not_hide_by_content:true,direction:"top",background_color:"#ffffff",name:"duration picker",module:"duration picker",direct_left_position:"calc(100% - 150px)"});this.dropdown.render()},genrateItems:function(){if(this.items){_.forEach(this.items,function(item){this.duration[item.unit]=new app.form.editors._duration_item(item);this.dropdown.$el.find(".dropdown-content").append(this.duration[item.unit].render().el)}.bind(this));this.dropdown.$el.find(".dropdown-content").addClass("duration")}},bindEvents:function(){if(!_.isEmpty(this.duration)){_.forEach(this.duration,function(item){this.listenTo(item,"change-value",this.changeValue)}.bind(this))}if(this.dropdown){this.dropdown.on("dropdown-hide",this.checkValue.bind(this))}},changeValue:function(){var val=0;if(!_.isEmpty(this.duration)){_.forEach(this.duration,function(item){val+=this.getDuration(item)}.bind(this))}this.setValue(val+" "+(val<=1?this.base_unit:this.base_unit+"s"));this.focus()},getDuration:function(item){return this.units_relationship[item.unit.toLowerCase()]*(item.model?item.model.get("current_value"):item.current_value)/this.units_relationship[this.base_unit]},checkValue:function(){this.blur()},preventEvent:function(event){event.preventDefault()},focus:function(){this.hasFocus=true;this.$input.focus();this.$el.closest(".input").addClass(app.form.classes.filled);if(_.isEmpty(this.getValue())||parseFloat(this.getValue())!==0){this.form.fields[this.getName()].validate()}this.trigger("focus",this)}})})();(function(){app.form.editors.radio=Backbone.Form.editors.Radio.extend({attributes:{class:"input__radios",role:"radiogroup","aria-labelledby":"radios"},events:{focus:function(){},blur:function(){},change:function(ev){}}})})();(function(){app.form.editors.select=app.form.editors._select.extend({templates:{dropdown:_.template(app.templates.components.form["dropdown.html"],null,app.form.tpls),list:_.template(app.templates.components.form["dropdown-item.html"],null,app.form.tpls),loading:_.template(app.templates.components["loading-mark"]["loading-mark.html"])},events:_.extend(app.form.editors._select.prototype.events,{"click .input__trigger":"triggerSelection","click .input__dropdown":"selectOption","keydown .input__trigger":"arrowKeyboardControl","keydown ul li a":"arrowKeyboardControl","keydown ul li a:last":"tabKeyboardControl"}),initialize:function(options){app.form.editors._select.prototype.initialize.call(this,options);this.hasDropdown=false;_.extend(this,_.pick(options.schema,["editorTrigger","editorCallback"]));this.on("set-options",this.operateDropdownOptions);$("body").on("click",this.checkDropdown.bind(this))},render:function(options){app.form.editors._select.prototype.render.call(this,options);if(this.schema.options){var list=this.setDropdownOptions();this.setDropdown();this.appendOptions(list)}return this},triggerSelection:function(event){if(!this.schema.options&&this.editorTrigger){this.editorTrigger(this,event)}this.toggleDropdown()},setDropdown:function(){if(!this.hasDropdown){this.hasDropdown=true;this.$el.append(this.templates.dropdown({}));this.$dropdown=this.$el.find(".input__dropdown");this.$dropdown.find("li").append(this.templates.loading({}))}else{return false}},setDropdownOptions:function(options){var html="";_.forEach(options||this.schema.options,function(option){if(_.isString(option)){html+=this.templates.list({title:option})}else if(_.isPlainObject(option)){html+=this.templates.list(option)}}.bind(this));return html},appendOptions:function(options){if(this.hasDropdown){this.$dropdown.html(options)}},operateDropdownOptions:function(options){var list=this.setDropdownOptions(options);this.setDropdown();this.appendOptions(list)},selectOption:function(event){if($(event.target).is("a")){this.current_value=$(event.target).html();this.setValue(this.current_value);this.focus();if(this.editorCallback){this.editorCallback(this,event)}this.hideDropdown();this.$trigger.focus()}},toggleDropdown:function(event){this.setDropdown();this.$dropdown.slideToggle(100,this.triggerBlur.bind(this))},hideDropdown:function(){if(this.$dropdown.css("display")!=="none"){this.$dropdown.slideUp(50,this.triggerBlur.bind(this))}},checkDropdown:function(event){if(this.form.$el.css("display")!="none"&&this.$trigger&&this.$dropdown&&event.target!==this.$trigger[0]&&!$.contains(this.$trigger[0],event.target)&&event.target!==this.$dropdown[0]&&!$.contains(this.$dropdown[0],event.target)){this.hideDropdown()}},triggerBlur:function(){if(this.$dropdown.css("display")==="none"){this.blur()}},tabKeyboardControl:function(event){if(event.keyCode===9&&!event.shiftKey){this.hideDropdown()}},arrowKeyboardControl:function(event){var is_trigger=$(event.target).hasClass("input__trigger"),is_dw_arrow=event.keyCode===40,is_up_arrow=event.keyCode===38;if(is_trigger&&is_dw_arrow){event.preventDefault();this.$el.find("ul li a:first").focus()}else if(is_dw_arrow||is_up_arrow){event.preventDefault();var as=this.$el.find("ul li a"),index=as.index(event.target),nextIndex=0;if(event.keyCode===40){nextIndex=as.length-1===index?0:index+1;this.$el.find("ul li a").get(nextIndex).focus()}else if(event.keyCode===38){nextIndex=0===index?as.length-1:index-1;this.$el.find("ul li a").get(nextIndex).focus()}}},remove:function(){$("body").off("click");app.form.editors._select.prototype.remove.call(this,arguments)}})})();(function(){app.form.editors.text=Backbone.Form.editors.Text.extend({attributes:{class:"input__field"},events:{focus:function(){this.$el.closest(".input").addClass(app.form.classes.filled);this.trigger("focus",this)},blur:function(){if(_.isEmpty(this.getValue())){this.$el.closest(".input").removeClass(app.form.classes.filled)}if(!this.form.notBlurToValidate){this.form.fields[this.getName()].validate()}this.trigger("blur",this)}}})})();(function(){app.form.editors.textarea=Backbone.Form.editors.TextArea.extend({attributes:{class:"input__field input__textarea",cols:30,rows:10},initialize:function(){Backbone.Form.editors.TextArea.prototype.initialize.apply(this,arguments);this.title=this.schema.title},events:{focus:function(){this.$el.closest(".input").addClass(app.form.classes.filled);this.trigger("focus",this)},blur:function(){if(_.isEmpty(this.getValue())){this.$el.closest(".input").removeClass(app.form.classes.filled)}if(!this.form.notBlurToValidate){this.form.fields[this.getName()].validate()}this.trigger("blur",this)},keyup:"countCharacters",paste:"countCharacters"},countCharacters:function(event){var textAreaLabel=this.$el.closest(".input").find(".input__label"),characterCount=event.target.value.trim(),remaining=1e3-characterCount.length;if(remaining===1e3){textAreaLabel.html(this.title)}else if(remaining>=0){textAreaLabel.html(this.title+" ("+remaining+" characters left)")}else if(remaining<0){var over=Math.abs(remaining);textAreaLabel.html(this.title+" ("+over+" characters over limit)")}}})})();(function(){app.form.base=Backbone.Form.extend({events:{"click .js-form-cancel-button":"cancel","click .js-form-submit-button":"submit","click .js-form-reset-button":"reset"},templateData:function(){var btns=Backbone.Form.prototype.templateData.apply(this,arguments);btns=_.extend(btns,{cancelButton:this.options.cancelButton?this.options.cancelButton:false,resetButton:this.options.resetButton?this.options.resetButton:false});return btns},initialize:function(options){if(!options.model){this.model=app.base.models?new app.base.models.BaseModel:new Backbone.Model}Backbone.Form.prototype.initialize.apply(this,[options]);_.extend(this,_.pick(options,"notBlurToValidate"))},render:function(){Backbone.Form.prototype.render.apply(this,arguments);if("i18next"in window)this.$el.localize();return this},clearForm:function(){var failed_field={};_.each(this.fields,function(field){var cleared=field.clearValue();if(cleared){failed_field[field.key]=field}});return _.isEmpty(failed_field)?null:failed_field},submit:function(event){event.preventDefault();var validated=this.commit();if(validated){return false}this.trigger("submit",event,this)},cancel:function(event){event.preventDefault();this.clearForm();this.trigger("cancel",event,this)},reset:function(event){event.preventDefault();var failed_field=this.clearForm();this.trigger("reset",event,this,failed_field)}},{template:_.template(app.templates.components.form["form.html"],null,app.form.tpls),Fieldset:app.form.fieldset,Field:app.form.field})})();(function(){app.components=app.components||{};app.components.message_bar=app.base.views.BaseView.extend({className:"message-bar",template:_.template(app.templates.components["message-bar"]["message-bar.html"]),close_html:'<button class="close" data-primitive="close"><i class="icon-awf-op-times"></i><span class="access">Close button</span></button>',def_messages:{def:"This is default content of message.",success:"The process successed.",warning:"Please check the process.",info:"This is information content of message.",error:"The process failed."},actions_html:"<p class='actions'></p>",button:'<button class="-awf-link-inverted"><label class="access">{{access}}</label>{{text}}</button>',initialize:function(options){this.options=options;this.params_messages=options.messages||{};this.messages={def:options.def||this.def_messages.def,success:options.success||this.def_messages.success,warning:options.warning||this.def_messages.warning,info:options.info||this.def_messages.info,error:options.error||this.def_messages.error};this.show_once=options.show_once||null;this.outline=options.outline||null;this.callbacks=options.callbacks||{};this.show_callback=this.callbacks.show||null;this.hide_callback=this.callbacks.hide||null;this.def_duration=options.duration||"300";this.wrap=options.wrap||null;this.animation_duration=this.def_duration;this.current_message=this.messages.success;this.def_status="success";this.current_status="success";this.def_show_effect="fadeIn";this.def_hide_effect="fadeOut";this.show_effect=null;this.hide_effect=null;this.new_show_callback=null;this.new_hide_callback=null;
this.showed_once=false;this.appended_to_dom=false;this.appended_close_btn=false;this.actions=options.actions||null;this.is_showing=false},render:function(){this.$el.html(this.template({}));this.defineElements();this.init();return this},defineElements:function(){this.$icon=this.$el.find("i");this.$content=this.$el.find("span")},init:function(){if(this.outline){this.$el.addClass("outline")}if(this.wrap&&!this.appended_to_dom){this.appended_to_dom=true;$(this.wrap).append(this.$el)}if(this.actions){var $actions=$(this.actions_html);_.forEach(this.actions,function(action){var node;switch(action.type){case"icon":node=$(Mustache.render(this.button,{access:this.translate(action.i18n,action.text),text:"<i class='"+action.icon+"'></i>"}));break;default:node=$(Mustache.render(this.button,{access:this.translate(action.i18n,action.text),text:this.translate(action.i18n,action.text)}));break}if(action.evt){node.on(action.evt,action.callback)}$actions.append(node)}.bind(this));this.$el.append($actions)}},getIcon:function(){return this.$icon},setIcon:function(status){this.$icon.removeClass("icon-awf-info-circle-fill icon-awf-checkmark-circle-fill icon-awf-op-times-circle-fill icon-awf-alert-triangle-fill");var className;switch(status){case"info":className="icon-awf-info-circle-fill";break;case"success":className="icon-awf-checkmark-circle-fill";break;case"error":className="icon-awf-op-times-circle-fill";break;case"warning":className="icon-awf-alert-triangle-fill";break}this.$icon.addClass(className)},operateContent:function(status,context){this.current_status=status||this.def_status;this.current_message=context||this.messages[this.current_status];this.removeClasses();this.$el.addClass(this.current_status);this.setIcon(this.current_status);this.$content.html(this.current_message);var $close=$(this.close_html);if(this.current_status==="info"){if(!this.appended_close_btn){this.appended_close_btn=true;this.$el.append($close);$close.on("click",this.hide.bind(this))}$close.show()}else{if(this.appended_close_btn){$close.remove();this.appended_close_btn=false}}},removeClasses:function(){this.$el.removeClass("info success error warning")},commonEffect:function(effect,duration,callback){this.animation_duration=duration||this.def_duration;return this.$el[effect](this.animation_duration,function(){if(callback){callback()}if(this.$el.css("display")!=="none"){this.$el.css("display","flex")}}.bind(this))},show:function(status,context,effect,duration,callback){if(this.show_once&&this.showed_once){console.log("Loading Mark - show - the loading mark has been showed once.",$el);return false}this.operateContent(status,context);this.show_effect=effect||this.def_show_effect;if(callback||this.show_callback){this.new_show_callback=function(){if(callback){callback(this)}if(this.show_callback){this.show_callback(this)}}.bind(this)}this.showed_once=true;this.is_showing=true;return this.commonEffect(this.show_effect,duration,this.new_show_callback)},hide:function(status,context,effect,duration,callback){this.hide_effect=effect||this.def_hide_effect;if(callback||this.hide_callback){this.new_hide_callback=function(){if(callback){callback(self)}if(this.hide_callback){this.hide_callback(self)}}.bind(this)}this.is_showing=false;return this.commonEffect(this.hide_effect,duration,this.new_hide_callback)},slideRightShow:function(status,context,duration){this.operateContent(status,context);var animation_duration=duration||this.def_duration;return this.$el.animate({width:"show"},animation_duration,function(){if(this.$el.css("display")!=="none"){this.$el.css("display","flex")}this.$el.find(".actions button:eq(0)").focus()}.bind(this))},slideLeftHide:function(status,context){this.operateContent(status,context);return this.$el.animate({width:"hide"})},appendTo:function(wrap){if(wrap&&!this.appended_to_dom){this.appended_to_dom=true;this.$el.appendTo(wrap)}},translate:function(key,value){var translated;if("i18next"in window){translated=i18next.t(key)}return!translated||translated==key?value:translated}})})();(function(){app.components=app.components||{};app.components.slideDown=app.base.views.BaseView.extend({showed:false,toggle_class:"fadeInDown",el:'<div class="animated slide-down"></div>',overlay:'<div class="slide-overlay"></div>',template:_.template(app.templates.components["slide-down"]["slide-down.html"]),initialize:function(options){this.config=options||{};_.extend(this,_.pick(options,"content","full_size","height","trigger","trigger_type","hide_target","show_callback","hide_callback","enable_overlay"))},render:function(config){if(config)this.config=_.extend(this.config,config);this.$el.html(this.template(this.config));if(this.full_size){this.$el.addClass("full-size")}else{if(this.height)this.setHeight()}if(this.trigger)this.trigger=$(this.trigger);this.bindEvents();if(this.content)this.setContent();return this},bindEvents:function(){if(this.trigger){$(this.trigger).on(this.trigger_type||"click",this.toggle.bind(this))}if(this.hide_target){$(this.hide_target).on("click",this.tryToHide.bind(this))}else{$("body").on("click",this.tryToHide.bind(this))}},setHeight:function(val){this.$el.css("height",this.height||val)},setContent:function(content,append){var new_content=content||this.content;if(new_content)this.$el.find(".slide-content")[append?"append":"html"](new_content)},tryToHide:function(event){if(this.showed&&this.trigger[0]!=event.target&&!$.contains(this.trigger[0],event.target)&&!$.contains(this.$el[0],event.target)){this.hide()}},toggle:function(){if(!this.showed){this.show()}else{this.hide()}},show:function(func){if(this.enable_overlay){this.$el.after(this.overlay)}this.showed=true;this.$el.show();this.$el.addClass(this.toggle_class).removeClass("fadeOutUp");if(this.show_callback)this.show_callback(this);if(func&&_.isFunction(func))func(this)},hide:function(func){this.showed=false;this.$el.removeClass(this.toggle_class).addClass("fadeOutUp");if(this.enable_overlay){this.$el.parent().find("div[class=slide-overlay]").remove()}if(this.hide_callback)this.hide_callback(this);if(func&&_.isFunction(func))func(this)}})})();(function(){app.components=app.components||{};app.components.socialActionsOption=app.base.views.BaseView.extend({el:'<li class="social-action-option" role="listitem"></li>',template:_.template(app.templates.components["social-actions"]["social-actions-option.html"]),initialize:function(params){this.params={title:params.title||"",text:params.text||"",evt:params.evt||"click",callback:params.callback||"",size:params.size||"small",icon:params.icon||"",show:params.show===undefined?true:params.show,status:params.status||"",color:params.color||"",number:params.number||"",i18n_label:params.i18n_label||""}},render:function(method){this.$el.html(this.template(this.params));this.defineElements();this.showHideAction();this.bindEvents();return this},defineElements:function(){this.a_tag=this.$el.find("a");this.i_tag=this.$el.find("a i");this.span_tag=this.$el.find("a span")},showHideAction:function(){if(this.params.show){this.$el.show()}else{this.$el.hide()}},bindEvents:function(){this.$el.on(this.params.evt,this.params.callback)}})})();(function(){app.components=app.components||{};app.components.socialActions=app.base.views.BaseView.extend({el:'<ul role="list" aria-label="social buttons" class="social-actions"></ul>',name:"social-actions-view",initialize:function(params){this.evt=params.evt||"click";this.callback=params.callback||"";this.items=params.items||[]},render:function(){this.addActions();this.bindEvents();return this},addActions:function(){_.forEach(this.items,function(item){var option=new app.components.socialActionsOption(item);this.$el.append(option.render().el)}.bind(this))},bindEvents:function(){this.$el.on(this.evt,this.callback)},addAction:function(item){var option=new app.components.socialActionsOption(item);this.$el.append(option.render().el)}})})();(function(){app.components=app.components||{};app.components.tabs=app.base.views.BaseView.extend({el:'<ul role="tablist" data-component="tabs"></ul>',tab_a_html:'<a href="{{href}}" title="{{text}}">{{text}}</a>',tab_html:'<li aria-selected="false" role="tab" aria-label="{{text}}"></li>',down_arrow:'<i class="icon-awf-chevron-down"></i>',up_arrow:'<i class="icon-awf-chevron-up"></i>',initialize:function(options){this.actions={};this.tabs=[];this.timeout=0;this.sort_by={desc:this.down_arrow,asc:this.up_arrow};this.options=options;this.tag_wrap=options.tag_wrap||"h3";this.tag_event_module=options.tag_event_module||false;this.metrics=app.utils.createMetricTag({group:awf.app.id})},render:function(){this.bindEvents();this.setTabsCss();return this},bindEvents:function(){this.$el.on("click",this.clickTabActive.bind(this))},clickTabActive:function(evt){evt.preventDefault();if($(evt.target).is("a")){this.setActive($(evt.target));this.tagTabsEvent($(evt.target).attr("title"))}else if($(evt.target).is("span")){this.setActive($(evt.target).parent());this.tagTabsEvent($(evt.target).parent().attr("title"))}else if($(evt.target).is("h3")){this.setActive($(evt.target).find("a"));this.tagTabsEvent($(evt.target).find("a").attr("title"))}else if($(evt.target).is("li")){this.setActive($(evt.target).find("a"));this.tagTabsEvent($(evt.target).find("a").attr("title"))}},tagTabsEvent:function(title){if(!this.tag_event_module)return false;var parameters={ev:"click",action:"tab",name:title,section:"tab",target:"none",module:this.tag_event_module};this.metrics.tagEvent(parameters)},setActive:function(ele){this.$el.find("li").removeClass("active");this.$el.find("li").attr("aria-selected","false");ele.closest("li").addClass("active");ele.closest("li").attr("aria-selected","true")},setTabsCss:function(){this.$el.addClass("tab-actions");if(this.options.no_border){this.$el.addClass("no-border")}if(this.options.css&&_.values(this.options.css).length>0){_.forEach(this.options.css,function(value,prop){this.$el.css(_.kebabCase(prop),value)}.bind(this))}},sortByOrder:function(a,b){return $(a).data("order")-$(b).data("order")},setSortArrow:function(title,sort){this.actions[title].data("def_sort",this.sort_by[sort]);this.actions[title].find("i").replaceWith(this.sort_by[sort])},addTab:function(action,props,evt){if(!this.actions[action]){var li_template=_.template(this.tab_html),$li=$(li_template({text:action})),$tag_wrap=$("<"+this.tag_wrap+' class="title-4"/>'),compiled=_.template(this.tab_a_html);compiled=$(compiled({text:action,href:props.href?props.href:"javascript:;"}));$tag_wrap.append(compiled);$li.append($tag_wrap);if(props.target){$li.attr("target",props.target)}if(props.id){$li.attr("id",props.id)}if(props.aria_controls){$li.attr("aria-controls",props.aria_controls)}if(props.order){$li.data("order",props.order)}var arrow=this.sort_by.desc;if(props.sort_arrow){arrow=this.sort_by[props.sort_arrow];$li.data("def_sort",props.sort_arrow)}if(props.has_arrow){$li.find("a").append(arrow)}if(props.no_bl){$li.addClass("no-bottom-line")}if(props.i18n){$li.find("a").attr("data-i18n",props.i18n+";[title]"+props.i18n)}if(evt){$li.data("evt",evt);$li.on(evt.type,evt.func);$li.on(evt.mulipleEvents)}this.tabs.push($li);this.actions[action]=$li;this.$el.append($li);$li.localize();return $li}return false},setTabsOrder:function(){this.tabs.sort(this.sortByOrder);this.$el.find("li").each(function(i,item){$(item).detach()});_.forEach(this.tabs,function(item){var evt=item.data("evt");if(evt){item.off(evt.type).on(evt.type,evt.func)}this.$el.append(item)}.bind(this))},getTabs:function(){return this.tabs},getActions:function(){return this.actions},getTab:function(title){if(this.hasTab(title)){return this.actions[title]}return false},getArrow:function(title){if(this.actions[title].has("i").length){return this.actions[title].find("i")}return false},hasTab:function(title){return!!this.actions[title]},activeTab:function(title){this.$el.find("a").each(function(i,item){if(item.title==title){this.setActive($(item))}}.bind(this))},getActiveTab:function(){var $li=null;this.$el.find("li").each(function(i,item){if($(item).hasClass("active")){$li=$(item)}});return $li},removeTab:function(title){if(this.actions[title]){this.$el.find("a").each(function(i,item){if(item.title==title){$(item).closest("li").remove()}});var new_array=[];_.forEach(this.tabs,function(tab,i){if(tab.attr("title")!=title){new_array.push(tab)}});this.tabs=new_array;delete this.actions[title]}else{console.log("This tab is not exist!")}},clearTabs:function(){this.tabs=[];this.actions={};this.$el.empty()},show:function(duration){this.$el.show(duration)},hide:function(duration){this.$el.hide(duration)}})})();(function(){app.components=app.components||{};var notifications_model=Backbone.Model.extend({initialize:function(params){this.params=params},url:function(){return"data/json/takeover-notifications.json"},parse:function(response){var parsed_data=this.filterData(response.events);return parsed_data},filterData:function(data){var no_expired_datas=[],now=(new Date).getTime();_.forEach(data,function(curr){var expired=false,s,e;if(curr.start){s=new Date(curr.start).getTime();if(now<s){expired=true}}if(curr.end){e=new Date(curr.end).getTime();if(now>e){expired=true}}if(!expired){no_expired_datas.push(curr)}});if(_.isEmpty(no_expired_datas)){return false}else{return no_expired_datas}}});app.components.takeover_notifications=Backbone.View.extend({initialize:function(params){this.params=params;this.model=new notifications_model;this.listenTo(this.model,"sync",this.initNotifications)},render:function(){this.model.fetch();return this},initNotifications:function(){this.notifications_data=this.model.toJSON();if(this.notifications_data){this.operateNotifications()}else{console.log("takeover-notifications - no events found!")}},operateNotifications:function(){_.forEach(this.notifications_data,function(event){this.callPreferennce(event)}.bind(this))},callPreferennce:function(event){var self=this,value=null,clone=_.cloneDeep(event);if(awf.util.is_local_storage_safe){var preference=this.getLocalData(clone.title);if(preference){this.checkDate(clone,preference)}else{this.showNotification(clone);this.markDate(event)}}else{console.log("takeover-notifications.js - localStorage is not safe currently.")}},showNotification:function(event){var self=this,card=app.utils.flipCard(event.card);var tagEvent_parameters={ev:"takeover",action:"flip-up",module:event.card+":large",name:"Flip card",section:"card",target:"none",group:"YourIBM"};console.log("tagEvent:",tagEvent_parameters);awf.tagEvent(tagEvent_parameters);if(card){var message=this.createMessagebar(),component=card.getContainer("back").find("[data-component]").eq(0);if(component){message.$el.css("top","50px");component.append(message.$el);if(event.message_duration){message.show("info",event.description).delay(event.message_duration*1e3).fadeOut("400",function(){message.$el.remove()})}else{message.show("info",event.description);card.on("flip-down",function(event){message.$el.remove()})}}}},markDate:function(event,preference){var namespace=_.kebabCase(event.title)+"-takeover";app.localCache.setData(namespace,moment().format());if(app.localCache.getData(namespace)){console.log("takeover-notifications - mark date for event: ",event.title)}else{console.log("takeover-notifications - mark date for event failed: ",event.title)}},checkDate:function(event,value){var clone=new Date(_.cloneDeep(value));if(new Date(event.start).getTime()<clone.getTime()<new Date(event.start).getTime()){console.log("takeover-notifications - do nothing for event: "+event.title)}else{this.showNotification(event)}},createMessagebar:function(params){},createPreference:function(namespace){return awf.preferences.getOrCreate(_.kebabCase(namespace)+"-takeover")},getLocalData:function(namespace){return app.localCache.getData(_.kebabCase(namespace)+"-takeover")}})})();(function(){app.cogs.cms={adapters:{},views:{}}})();(function(){app.cogs.headlines={adapters:{},views:{}}})();(function(){app.cogs.media={adapters:{},models:{},views:{}}})();(function(){app.cogs.places={adapters:{},views:{},collections:{},icon_mapping:{"awficon-alert-sign-in":"icon-awf-avatar-circle","awficon-category-bcg":"icon-awf-w3-certificate-thin","awficon-dates-45px":"icon-youribm-calendar-check","awficon-international-45px":"icon-awf-international-thin","awficon-minicard-places":"icon-youribm-places","awficon-logo-workday-thin":"icon-awf-w3-logo-workday-thin","awficon-logo-help-thin":"icon-awf-w3-logo-help-thin","awficon-places-bcg-medium":"icon-awf-w3-certificate-thin","awficon-places-bluepages":"icon-awf-w3-logo-bluepages","awficon-places-careersmart":"icon-awf-w3-logo-careersmart-thin","awficon-places-checkpoint-medium":"icon-awf-w3-logo-checkpoint-thin","awficon-places-connections":"icon-awf-w3-logo-connections-thin","awficon-places-devices-45px":"icon-awf-devices-thin","awficon-places-devices-medium":"icon-awf-devices-thin","awficon-places-expenses":"icon-youribm-expenses","awficon-places-finance-medium":"icon-youribm-monitor-chart-line","awficon-places-jobs-medium":"icon-youribm-avatar-briefcase","awficon-places-learning-medium":"icon-youribm-graduation-cap","awficon-places-mail-verse":"icon-awf-w3-logo-verse-thin","awficon-places-meetings":"icon-youribm-clock","awficon-places-procurement-medium":"icon-awf-w3-shopping-cart-thin","awficon-places-productivity-medium":"icon-awf-pencil-wrench-thin","awficon-places-salesconnect":"icon-youribm-monitor-chart-line","awficon-places-security-medium":"icon-awf-lock-key-thin","awficon-places-sitemap-medium":"icon-awf-sitemap-thin","awficon-places-time-medium":"icon-youribm-clock-inbox","awficon-places-travel-medium":"icon-youribm-airplane","awficon-reading-42px":"icon-awf-book-open-thin","awficon-your-team-45px":"icon-awf-team"}}})();(function(){app.cogs.stock={adapters:{},views:{}}})();(function(){app.cogs.headlines.views.large_item=app.base.views.BaseView.extend({el:'<article role="article" class="feed-wrapper__list__item"></article>',name:"headlines-large-item-view",initialize:function(params){this.params=params;this.metrics=app.utils.createMetricTag({module:"headlines:large:item",group:"yourco"})},template:_.template(app.templates.cogs.headlines["headlines-large-item.html"]),render:function(){this.renderData();this.$el.html(this.template(this.data));this.generateSocialActions();this.setAriaLabel();this.$el.localize();return this},renderData:function(){this.data=this.model.toJSON()},generateSocialActions:function(){var self=this;var params={items:[{icon:"email",title:"Share by email",evt:"click",i18n_label:"app.common.social-actions.share-by-email",callback:function(){self.setEmail(self)}}]};if("w3n"in window&&awf.user.is_authenticated){params.items.push({icon:"share",title:"Share on connections",evt:"click",i18n_label:"app.common.social-actions.share-on-w3c",show:true})}var social_actions=new app.components.socialActions(params);social_actions.render();this.$el.find(".feed-wrapper__list__item__content").append(social_actions.$el)},setAriaLabel:function(){this.$el.attr("aria-label",this.model.get("headline"))},events:{"click .feed-wrapper__list__item__content h4 a":"tagHeadlines"},tagHeadlines:function(event){var params={action:"link",name:this.data.headline,section:"news-feed",target:this.data.url};this.addMetricsTag(event,params)},setEmail:function(self){app.serviceModels.snipRequester.shorten(this.data.url).done(function(res){var subject;var subject_share_by_mail=app.utils.hasI18nTag("app.cogs.headlines.subject-share-by-mail")?i18next.t("app.cogs.headlines.subject-share-by-mail"):"wants to share an article with you";if(awf.user.is_authenticated){subject=awf.user.info.name+" "+subject_share_by_mail+": "+self.data.headline}else{subject=self.data.headline}var body=self.data.headline+"\r\n"+self.data.desc+"\r\n"+res.url;self.metrics.linkEvent({data:{action:"button",name:"email icon",section:"news-feed"}});body=encodeURI(body).replace(/\?/g,"%3F");subject=encodeURI(subject).replace(/\?/g,"%3F");var window_open=window.open("mailto:?subject="+subject+"&body="+body,"_new");if(window_open){window_open.close()}if(window_open===null||typeof window_open==="undefined"){window.location.href="mailto:?subject="+subject+"&body="+body}})},addMetricsTag:function(event,params){event.data=event.data||{};params=params||{};event.data=_.extend(event.data,params);this.metrics.linkEvent.bind(event.currentTarget)(event)}})})();(function(){app.cogs.headlines.views.large=app.base.views.BaseView.extend({name:"headlines-large-view",template:_.template(app.templates.cogs.headlines["headlines-large.html"]),initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;this.metrics=params.metrics},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.setItems();this.generateShareDropDown();if(!awf.user.is_authenticated){this.$el.find(".go-to").hide()}return this},events:{"click .cta-btn button":"viewMoreHeadlines","click .go-to a":"tagEditProfile"},createItemView:function(item_model){var item_view=new app.cogs.headlines.views.large_item({model:item_model});this.$el.find(".go-to").before(item_view.render().el)},setItems:function(){var no_message=app.utils.hasI18nTag("app.common.message.no-data")?i18next.t("app.common.message.no-data"):"There is no available data.";if(this.collection.length!==0){this.collection.each(function(model){this.createItemView(model)}.bind(this))}else{this.$el.find(".feed-wrapper__list").prepend('<p class="feed-wrapper__list__empty-msg">'+no_message+"</p>")}},viewMoreHeadlines:function(event){var params={action:"Link",name:app.utils.hasI18nTag("app.cogs.headlines.view-more")?i18next.t("app.cogs.headlines.view-more"):"View more headlines",section:"view-more",target:this.collection.params.redirect};this.addMetricsTag(event,params);window.open(this.collection.params.redirect)},tagEditProfile:function(event){var params={action:"Link",name:app.utils.hasI18nTag("app.cogs.headlines.edit-your-profile")?i18next.t("app.cogs.headlines.edit-your-profile"):"Edit your profile",section:"news-feed"};this.addMetricsTag(event,params)},addMetricsTag:function(event,params){event.data=event.data||{};params=params||{};event.data=_.extend(event.data,params);this.metrics.linkEvent.bind(event.currentTarget)(event)},generateShareDropDown:function(){if("w3n"in window){this.shareDg=new w3n.components.sharecomponent({parent:this.$el,trigger:this.$el,evt_type:"click",evt_target:$("li.social-action-option .icon-awf-share",this.$el).closest("a"),module:"headline:large",cog_methods:this.params.large_methods,callback:function(event){var node=$(event.target).closest("article");var title=node.find("h4.title-4 a");var desc=node.find("p.desc");var url=title.attr("href");return{title:_.trim(title.html()),desc:_.trim(desc.html()),url:url}}})}}})})();(function(){app.cogs.headlines.views.medium_item=app.base.views.BaseView.extend({el:'<article role="article" class="feed-wrapper__list__item"></article>',name:"headlines-medium-item-view",initialize:function(params){this.params=params;this.parentView=params.parentView;this.metrics=app.utils.createMetricTag({module:"headlines:medium:item",group:"yourco"})},template:_.template(app.templates.cogs.headlines["headlines-medium-item.html"]),render:function(){this.renderData();this.$el.html(this.template(this.data));this.generateSocialActions();this.setAriaLabel();this.$el.localize();return this},renderData:function(){this.data=this.model.toJSON();this.data.headline=_.trunc(this.data.headline,50);this.data.desc=_.trunc(this.data.desc,100)},generateSocialActions:function(){var self=this;var params={items:[{icon:"email",title:"Share by email",evt:"click",i18n_label:"app.common.social-actions.share-by-email",callback:function(){self.setEmail(self)}}]};if("w3n"in window&&awf.user.is_authenticated){params.items.push({icon:"share",title:"Share on connections",evt:"click",i18n_label:"app.common.social-actions.share-on-w3c",show:true})}var social_actions=new app.components.socialActions(params);social_actions.render();this.$el.find(".feed-wrapper__list__item__content").append(social_actions.$el)},setAriaLabel:function(){this.$el.attr("aria-label",this.model.get("headline"))},events:{"click .feed-wrapper__list__item__content h4 a":"tagHeadlines"},tagHeadlines:function(event){var params={action:"link",name:this.data.headline,section:"news-feed",target:this.data.url};this.addMetricsTag(event,params)},setEmail:function(self){app.serviceModels.snipRequester.shorten(this.data.url).done(function(res){var subject;var subject_share_by_mail=app.utils.hasI18nTag("app.cogs.headlines.subject-share-by-mail")?i18next.t("app.cogs.headlines.subject-share-by-mail"):"wants to share an article with you";if(awf.user.is_authenticated){subject=awf.user.info.name+" "+subject_share_by_mail+": "+self.data.headline}else{subject=self.data.headline}var body=self.data.headline+"\r\n"+self.data.desc+"\r\n"+res.url;self.metrics.linkEvent({data:{action:"button",name:"email icon",section:"news-feed"}});body=encodeURI(body).replace(/\?/g,"%3F");subject=encodeURI(subject).replace(/\?/g,"%3F");var window_open=window.open("mailto:?subject="+subject+"&body="+body,"_new");if(window_open){window_open.close()}if(window_open===null||typeof window_open==="undefined"){window.location.href="mailto:?subject="+subject+"&body="+body}})},addMetricsTag:function(event,params){event.data=event.data||{};params=params||{};event.data=_.extend(event.data,params);this.metrics.linkEvent.bind(event.currentTarget)(event)}})})();(function(){app.cogs.headlines.views.medium=app.base.views.BaseView.extend({name:"headlines-medium-view",template:_.template(app.templates.cogs.headlines["headlines-medium.html"]),initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;this.metrics=params.metrics},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.setItems();if(!awf.user.is_authenticated){this.$el.find(".go-to").hide()}this.generateShareDropDown();this.params.medium_methods.handleLargeViewAvailable(function(is_flippable){if(is_flippable){this.$el.find(".cta-btn").fadeIn("fast");this.$el.find(".feed-wrapper").removeClass("-is-autoHeight")}else{this.$el.find(".cta-btn").fadeOut("fast");this.$el.find(".feed-wrapper").addClass("-is-autoHeight")}}.bind(this));return this},events:{"click .cta-btn button":"flipCard","click .go-to a":"tagEditProfile"},createItemView:function(item_model){var item_view=new app.cogs.headlines.views.medium_item({model:item_model});this.$el.find(".go-to").before(item_view.render().el)},setItems:function(){var no_message=app.utils.hasI18nTag("app.common.message.no-data")?i18next.t("app.common.message.no-data"):"There is no available data.";if(this.collection.length!==0){this.collection.each(function(model){this.createItemView(model)}.bind(this))}else{this.$el.find(".feed-wrapper__list").prepend('<p class="feed-wrapper__list__empty-msg">'+no_message+"</p>")}},flipCard:function(event){var params={};params={ev:"click",action:"flip-up",name:app.utils.hasI18nTag("app.cogs.headlines.view-more")?i18next.t("app.cogs.headlines.view-more"):"View more headlines",section:"view-more",module:"headlines:medium",target:"none"};this.params.medium_methods.flipCard();this.metrics.tagEvent(params)},tagEditProfile:function(event){var params={action:"Link",name:app.utils.hasI18nTag("app.cogs.headlines.edit-your-profile")?i18next.t("app.cogs.headlines.edit-your-profile"):"Edit your profile",section:"news-feed",module:"headlines:medium"};this.addMetricsTag(event,params)},addMetricsTag:function(event,params){event.data=event.data||{};params=params||{};event.data=_.extend(event.data,params);this.metrics.linkEvent.bind(event.currentTarget)(event)},generateShareDropDown:function(){if("w3n"in window){this.shareDg=new w3n.components.sharecomponent({parent:this.$el,trigger:this.$el,evt_type:"click",evt_target:$("li.social-action-option .icon-awf-share",this.$el).closest("a"),module:"headlines:medium",cog_methods:this.params.medium_methods,callback:function(event){var node=$(event.target).closest("article");var title=node.find("h4.title-4 a");var desc=node.find("p.desc");var url=title.attr("href");return{title:_.trim(title.html()),desc:_.trim(desc.html()),url:url}}})}}})})();(function(){app.cogs.media.views.large_item=app.base.views.BaseView.extend({el:'<div class="video-container"></div>',template:_.template(app.templates.cogs.media["large-item-view.html"]),playerTemplates:{html5:'<video role="application"><source src="{{ url }}" type="video/{{ ext }}" /><track kind="captions">Your browser does not support HTML5 video/audio.</video>',flash:"",iframe:'<iframe seamless frameborder=0 allowfullscreen webkitallowfullscreen mozallowfullscreen src="{{ url }}"></iframe>',accessibility:'<div class="accessible-navigation" role="navigation"><button class="accessible-play" title="Play current media">Play</button><button class="accessible-pause" title="Pause current media">Pause</button><button class="accessible-volume-plus" title="Increase volume">Increase volume</button><button class="accessible-volume-minus" title="Decrease Volume">Decrease Volume</button><button class="accessible-mute" title="Mute current media">Mute current media</button></div>'},events:{"click .video-container__play-btn":"playMedia","click .video-container__info__cta__btn:first-child a":"viewAtSource","click .video-container__info__cta__btn:last-child button":"eMail"},initialize:function(params){this.params=params;this.listenTo(this.model,"destroy",this.remove);this.listenTo(this.model,"reset-large-view",this.resetView);this.metrics=app.utils.createMetricTag({module:"media:large:item",group:awf.app.id})},render:function(){this.data=this.model.toJSON();this.$el.html(this.template(this.data));this.operateElements();this.setPlayerType();this.setAccessibility();this.setTagEvents();if("i18next"in window)this.$el.localize();return this},operateElements:function(){this.$player_wrap=this.$el.find(".video-container__player");this.$play_btn=this.$el.find(".video-container__play-btn");this.$poster=this.$el.find(".video-container__poster");this.$badge=this.$el.find(".video-container__badge");this.$desc=this.$el.find(".video-container__info__desc")},setPlayerType:function(){var func=_.camelCase("add-"+this.data.player_type+"-player");if(this[func]){this[func]()}else{console.log("media-large-item.js - setPlayerType - there is no this player type",this.data.player_type)}},setAccessibility:function(){this.$el.attr({"aria-label":this.data.title+" on large card",role:"article"})},addIframePlayer:function(){var template=_.template(this.playerTemplates[this.data.player_type]);this.$player=$(template({url:this.data.url+"&autoplay=true"}))},addHtml5Player:function(){var template=_.template(this.playerTemplates[this.data.player_type]);this.$player=$(template({url:this.data.url,ext:this.data.ext}));this.$player_wrap.prepend(this.$player);this.$player.attr("aria-label",this.data.title+" on large card");this.$player[0].load();this.$player[0].preload="none";this.addEvents()},addFlashPlayer:function(){},playMedia:function(){var func=_.camelCase("play-"+this.data.player_type);if(this[func]){this.model.togglePlayStatus();this[func]();this.metrics.linkEvent({data:{action:"Play media",name:this.data.title,section:"Media large item"}})}else{console.log("media-large-item.js - playMedia - there is no this player type",this.data.player_type)}},playIframe:function(){if(!this.$player){return false}this.$player_wrap.prepend(this.$player);this.togglePlayerElements()},playHtml5:function(){if(!this.$player){return false}this.togglePlayerElements();this.$player[0].play()},playFlash:function(){},togglePlayerElements:function(status){this.$play_btn.toggle(status);this.$badge.toggle(status);this.$poster.toggle(status);if(status==="show"){this.$player.removeClass("playing")}else{this.$player.toggleClass("playing")}},resetView:function(){var func=_.camelCase("reset-"+this.data.player_type);if(this[func]){this.model.togglePlayStatus();this[func]()}else{console.log("media-large-item.js - resetView - there is no this player type",this.data.player_type);
}},resetIframe:function(){this.$player.remove();this.setPlayerType();this.togglePlayerElements("show")},resetHtml5:function(){this.$player.remove();this.setPlayerType();this.togglePlayerElements("show")},resetFlash:function(){},viewAtSource:function(event){event.preventDefault();window.open(this.data.redirection);this.metrics.linkEvent({data:{action:"Click button",name:"View at source",section:"Media large item"}})},addEvents:function(){var func=_.camelCase("add-"+this.data.player_type+"-events");if(this[func]){this[func]()}else{console.log("media-large-item.js - addEvents - there is no this player type",this.data.player_type)}},addIframeEvents:function(){},addHtml5Events:function(){var self=this;this.$player.on({mouseenter:function(){if(self.model.get("is_playing")){self.$player[0].controls=true}},mouseleave:function(){if(self.model.get("is_playing")){self.$player[0].controls=false}}})},addFlashEvents:function(){},eMail:function(){console.log("media large item - email")},setTagEvents:function(){var self=this;this.$desc.find("a").on("click",function(event){event.data={action:"Link",name:$(this).html(),section:"Media large item"};self.metrics.linkEvent.bind(this)(event)})}})})();(function(){app.cogs.media.views.large_playlist=app.base.views.BaseView.extend({el:'<li tabindex="0" class="video-playlist__list__entry"></li>',template:_.template(app.templates.cogs.media["large-playlist-entry-view.html"]),initialize:function(params){this.params=params;this.listenTo(this.model,"change:active",this.manageItemView);this.listenTo(this.model,"reset-large-view",this.resetItemView);this.listenTo(this.model,"destroy",this.remove);this.$el.on("click",this.checkItemView.bind(this));this.$el.on("keydown",this.keyEnter.bind(this));this.metrics=app.utils.createMetricTag({module:"media:large:playlist:entry",group:awf.app.id})},render:function(){this.data=this.model.toJSON();this.$el.html(this.template(this.data));this.item_model=this.model.clone();this.operateElements();this.setAccessibility();this.manageItemView();return this},operateElements:function(){this.$now_playing=this.$el.find(".video-playlist__list__entry__playing");if("i18next"in window)this.$now_playing.localize()},setAccessibility:function(){this.$el.attr({"aria-label":this.data.title+" in playlist on large card",role:"listitem"})},manageItemView:function(){if(this.model.get("active")){this.createItemView()}else{this.destroyItemView()}this.toggleNowPlaying(this.model.get("active"))},createItemView:function(){this.item_view=new app.cogs.media.views.large_item({model:this.item_model,card:this.params});this.params.card.$el.find(".content").eq(0).prepend(this.item_view.render().el)},destroyItemView:function(){this.item_model.destroy()},toggleNowPlaying:function(status){this.$now_playing.css("display",status?"block":"none")},checkItemView:function(){if(!this.model.get("active")){this.checkAllItemsViewStatus();this.model.set("active",true);this.metrics.linkEvent({data:{action:"Select a video",name:this.data.title,section:"Media large playlist entry"}})}},keyEnter:function(event){if(event.keyCode===13){this.checkItemView()}},resetItemView:function(){if(this.item_model.get("is_playing")){this.item_model.trigger("reset-large-view")}},checkAllItemsViewStatus:function(){this.params.parent_collection.trigger("destroy-active-item")}})})();(function(){app.cogs.media.views.large=app.base.views.BaseView.extend({name:"media-large-view",template:_.template(app.templates.cogs.media["large-view.html"]),initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;this.listenTo(this.collection,"flip-down",this.resetItemView);this.listenTo(this.collection,"destroy-active-item",this.destroyActiveItem)},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.setItems();return this},createEntryView:function(item_model){var list_item_view=new app.cogs.media.views.large_playlist({model:item_model,card:this,parent_collection:this.collection});var data=item_model.toJSON();if(data.player_type!=="html5"&&data.player_type!=="iframe"&&data.player_type!=="flash"){console.log("media-large.js - createEntryView - this player type does not support",data.player_type)}else{this.$el.find(".video-playlist__list").append(list_item_view.render().el)}},setItems:function(){if(this.collection.length!==0){this.setFirstEntry();this.collection.each(function(model){this.createEntryView(model)}.bind(this))}else{this.noDataHandler()}},noDataHandler:function(){var msg="i18next"in window?i18next.t("app.common.message.no-data"):"There is no available data.";this.params.large_methods.postMessage("info",msg,false)},setFirstEntry:function(){var has_active=false;this.collection.each(function(model){if(model.get("active")){has_active=true}});if(!has_active){var first_model=this.collection.at(0);first_model.set("active",true)}},resetItemView:function(){this.collection.each(function(model){if(model.get("active")){model.trigger("reset-large-view")}})},destroyActiveItem:function(){this.collection.each(function(model){if(model.get("active")){model.set("active",false)}})},hideTitle:function(){if(this.collection.length!==0){this.$el.find(".video-playlist__title").show()}else{this.$el.find(".video-playlist__title").hide()}}})})();(function(){app.cogs.media.views.medium_item=app.base.views.BaseView.extend({flip:0,el:"<article></article>",template:_.template(app.templates.cogs.media["medium-item-view.html"]),playerTemplates:{html5:'<video role="application"><source src="{{ url }}" type="video/{{ ext }}" /><track kind="captions">Your browser does not support HTML5 video/audio.</video>',flash:"",iframe:'<iframe seamless frameborder=0 allowfullscreen webkitallowfullscreen mozallowfullscreen src="{{ url }}"></iframe>',accessibility:'<div class="accessible-navigation" role="navigation"><button class="accessible-play" title="Play current media">Play</button><button class="accessible-pause" title="Pause current media">Pause</button><button class="accessible-volume-plus" title="Increase volume">Increase volume</button><button class="accessible-volume-minus" title="Decrease Volume">Decrease Volume</button><button class="accessible-mute" title="Mute current media">Mute current media</button></div>'},events:{"click .video-entry__play-btn":"playMedia","click .video-entry__info--less__cta button":"descriptionToggle","click .video-entry__info--more__cta button":"descriptionToggle"},initialize:function(params){this.params=params;this.listenTo(this.model,"destroy",this.remove);this.listenTo(this.model,"reset-view",this.resetView);this.metrics=app.utils.createMetricTag({module:"media:medium:item",group:awf.app.id})},render:function(){this.renderData();this.$el.html(this.template(this.data));this.operateElements();this.setPlayerType();this.setAccessibility();this.setTagEvents();if("i18next"in window)this.$el.localize();return this},renderData:function(){this.data=this.model.toJSON();this.data.trunc_title=_.trunc(this.data.title,60)},operateElements:function(){this.$player_wrap=this.$el.find(".video-entry__player");this.$info_less_wrap=this.$el.find(".video-entry__info--less");this.$info_more_wrap=this.$el.find(".video-entry__info--more");this.$play_btn=this.$el.find(".video-entry__play-btn");this.$poster=this.$el.find(".video-entry__poster");this.$badge=this.$el.find(".video-entry__badge");this.$desc=this.$el.find(".video-entry__info--more")},setPlayerType:function(){var func=_.camelCase("add-"+this.data.player_type+"-player");if(this[func]){this[func]()}else{console.log("media-medium-item.js - setPlayerType - there is no this player type",this.data.player_type)}},setAccessibility:function(){this.$el.attr({"aria-label":this.data.title,role:"article"})},addIframePlayer:function(){var template=_.template(this.playerTemplates[this.data.player_type]);this.$player=$(template({url:this.data.url+"&autoplay=true"}))},addHtml5Player:function(){var template=_.template(this.playerTemplates[this.data.player_type]);this.$player=$(template({url:this.data.url,ext:this.data.ext}));this.$player_wrap.prepend(this.$player);this.$player.attr("aria-label",this.data.trunc_title+" on medium card");if(this.$player[0]){this.$player[0].load();this.$player[0].preload="none";this.addEvents()}},addFlashPlayer:function(){},playMedia:function(){var func=_.camelCase("play-"+this.data.player_type);if(this[func]){this.model.togglePlayStatus();this[func]();this.metrics.linkEvent({data:{action:"Play media",name:this.data.title,section:"Media medium item"}})}else{console.log("media-medium-item.js - playMedia - there is no this player type",this.data.player_type)}},playIframe:function(){if(!this.$player){return false}this.$player_wrap.prepend(this.$player);this.togglePlayerElements()},playHtml5:function(){if(!this.$player){return false}this.togglePlayerElements();this.$player[0].play()},playFlash:function(){},descriptionToggle:function(){this.$player_wrap.slideToggle();this.$info_less_wrap.slideToggle();this.$info_more_wrap.slideToggle();this.metrics.linkEvent({data:{action:"Toggle",name:this.flip++%2===0?"Show more":"Show less",section:"video info"}})},togglePlayerElements:function(status){this.$play_btn.toggle(status);this.$badge.toggle(status);this.$poster.toggle(status);if(status==="show"){this.$player.removeClass("playing")}else{this.$player.toggleClass("playing")}},resetView:function(){var func=_.camelCase("reset-"+this.data.player_type);if(this[func]){this.model.togglePlayStatus();this[func]()}else{console.log("media-medium-item.js - resetView - there is no this player type",this.data.player_type)}},resetIframe:function(){this.$player.remove();this.setPlayerType();this.togglePlayerElements("show")},resetHtml5:function(){this.$player.remove();this.setPlayerType();this.togglePlayerElements("show")},resetFlash:function(){},addEvents:function(){var func=_.camelCase("add-"+this.data.player_type+"-events");if(this[func]){this[func]()}else{console.log("media-medium-item.js - addEvents - there is no this player type",this.data.player_type)}},addIframeEvents:function(){},addHtml5Events:function(){var self=this;this.$player.on({mouseenter:function(){if(self.model.get("is_playing")){self.$player[0].controls=true}},mouseleave:function(){if(self.model.get("is_playing")){self.$player[0].controls=false}}})},addFlashEvents:function(){},setTagEvents:function(){var self=this;this.$desc.find("a").on("click",function(event){event.data={action:"Link",name:$(this).html().replace(/<.*?>$/g,""),section:"Media medium item"};self.metrics.linkEvent.bind(this)(event)})}})})();(function(){app.cogs.media.views.medium=app.base.views.BaseView.extend({name:"media-medium-view",template:_.template(app.templates.cogs.media["medium-view.html"]),initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;this.listenTo(this.collection,"flip-up",this.resetItemsView)},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.setItems();if(this.carousel){this.carousel.setDefPointer(0)}return this},createCarousel:function(total){this.carousel=new app.components.carousel_sync({el:this.$el.find(".content")[0],tag_event_module:"media:medium",aria_label:"Media medium card carousel",total:total});this.$el.find(".content").append(this.carousel.render().$el);this.carousel.on("carousel:goToSlide",this.addItem.bind(this));this.carousel.on("carousel:goToSlide",this.resetItemsView.bind(this))},createItemView:function(item_model,index){var item_view=new app.cogs.media.views.medium_item({model:item_model});var data=item_model.toJSON();if(data.player_type!=="html5"&&data.player_type!=="iframe"&&data.player_type!=="flash"){console.log("media-medium.js - createItemView - this player type does not support",data.player_type)}else{this.carousel.appendItem({index:index,view:item_view.render().el})}},addItem:function(index){if(this.carousel.hasNotItem(index)){this.createItemView(this.collection.at(index),index)}},setItems:function(){if(this.collection.length!==0){this.createCarousel(this.collection.length);this.createItemView(this.collection.at(0),0)}else{this.noDataHandler()}},noDataHandler:function(){var msg="i18next"in window?i18next.t("app.common.message.no-data"):"There is no available data.";this.params.medium_methods.postMessage("info",msg,false)},resetItemsView:function(){this.collection.each(function(model){if(model.get("is_playing")){model.trigger("reset-view")}})}})})();(function(){app.cogs.places.views.icon=app.base.views.BaseView.extend({template:app.templates.cogs.places["icon-item.html"],initialize:function(params){this.data=params.data;this.parentView=params.parentView;this.metrics=app.utils.createMetricTag({module:"places:large:icon",group:awf.app.id});var $template=$(Mustache.render(this.template,{className:this.data.className}));this.$el=$template;this.bindEvents()},render:function(){this.$el.localize();return this},bindEvents:function(){this.$el.find("button").on("click",this.setIcon.bind(this))},setIcon:function(){this.$el.parent().find('li button[class="-awf-link selected"]').removeClass("selected");this.$el.children().addClass("selected").focus();this.parentView.setNewLinkIcon(this.data.className);this.metrics.tagEvent({ev:"click",action:"Select icon",name:this.data.className,section:"Places large: select icon",target:"none"})},getItemId:function(){return this.data.id}})})();(function(){app.cogs.places.views.largeItemView=app.base.views.BaseView.extend({template:app.templates.cogs.places["large-item.html"],initialize:function(params){this.data=params.data;this.parentView=params.parentView;this.default_featured=false;this.metrics=app.utils.createMetricTag({module:"places:large:item",group:awf.app.id});var context={};context.itemType=this.data.isFolder?"folder":"link";if(this.data.isFolder){context.isFolder=true;context.href="javascript:;";context.selectedlinks=this.data.selected_links;context.totalLinks=this.data.total_links}else{context.isLink=true;context.href=this.data.url=="#"?"javascript:;":this.data.url}if(!this.data.title){this.data.title=this.data.label}var ns="app.cogs.places.links.";context.title_i18n=ns+_.kebabCase(this.data.title)+".title";this.$el.attr("aria-label","Cognitive places item: "+_.trunc(this.data.title,50)+" on large view.");context.text=_.trunc(this.data.title,30);if(this.data.badge){context.badge='<span class="label-2 '+this.data.badge+'"><strong>'+_.capitalize(this.data.badge)+"</strong></span>"}if(this.data.classname){context.icon=this.data.classname}if(this.data.description){context.desc_i18n=ns+_.kebabCase(this.data.title)+".desc";context.description=this.data.description}if(!this.data.isFolder&&this.data.type!="popular"){context.isPersonal=true}if(this.data.new){context.new="new"}context.hidden=this.data.hidden?"inactive":"";context.featured=this.data.featured;context.toggleIcon=this.data.hidden?"icon-awf-preview":"icon-youribm-eyeball-slash";var $template=$(Mustache.render(this.template,context));this.$el=$template;if(this.data.top_links_classname){this.$el.find("a").prepend(this.getTopLinksHtml(this.data.top_links_classname))}if(context.isPersonal){this.addMessageBar()}this.checkFeatured();this.bindEvents();this.$el.localize()},getTopLinksHtml:function(classnames){var template=" <i class='{{icon}}'></i>";var html="";_.forEach(classnames,function(classname){html+=Mustache.render(template,{icon:classname})});return $(html)},render:function(){return this},checkFeatured:function(){if(this.data.featured){this.default_featured=true;this.$el.addClass("selected");this.$el.find(".icon-awf-thumbtack").attr("data-i18n","[title]app.cogs.places.cta.unpin")}if(this.data.selected_links>0&&this.data.isFolder){this.$el.addClass("selected")}},bindEvents:function(){this.$el.find("a:eq(0)").on("click",this.operateItemBehavior.bind(this));this.$el.find(".icon-awf-op-times").on("click",this.showMessage.bind(this));this.$el.find(".icon-awf-pencil-fill").on("click",this.editItem.bind(this));this.$el.find(".icon-awf-thumbtack").on("click",this.checkInOut.bind(this));this.$el.find(".js-toggle").on("click",this.toggleLink.bind(this))},checkInOut:function(){var items=this.parentView.checkSelectedItemsCount(true);if(this.$el.hasClass("selected")){this.$el.removeClass("selected");this.$el.find(".icon-awf-thumbtack").attr("data-i18n","[title]app.cogs.places.cta.pin");this.data.featured=false;this.parentView.model.trigger("updateLinksFeatured",this.data);if(items===10){this.parentView.trigger("saveRecommendationTop10Data")}this.metrics.tagEvent({ev:"click",action:"Remove preference item",name:"Link Name:"+this.data.title,section:"Places large",target:"none"});this.parentView.checkSelectedItemsCount(true);this.parentView.clickSaveButton()}else if(items<=10){if(items<10){this.$el.addClass("selected");this.$el.find(".icon-awf-thumbtack").attr("data-i18n","[title]app.cogs.places.cta.unpin");this.data.featured=true;this.parentView.model.trigger("updateLinksFeatured",this.data);this.metrics.tagEvent({ev:"click",action:"Select preference item",name:"Link Name:"+this.data.title,section:"Places large",target:"none"});this.parentView.checkSelectedItemsCount(true);this.parentView.clickSaveButton()}else{this.parentView.trigger("selection-warning");this.metrics.tagEvent({ev:"click",action:"Select preference item",name:"Link Name:"+this.data.title,section:"Places large",target:"none"})}}this.$el.localize()},toggleLink:function(event){this.data.hidden=this.data.hidden?false:true;this.trigger("update",this.data);this.metrics.tagEvent({ev:"click",action:this.data.hidden?"hide":"show"+" this link",name:"Link Name:"+this.data.title,section:"Places large",target:"none"})},operateItemBehavior:function(event){event.preventDefault();if(this.data.isFolder){this.parentView.model.trigger("getFolderLinks",this.data);this.metrics.tagEvent({ev:"click",action:"Open folder",name:"Folder Name:"+this.data.title,section:"Places large",target:"none"})}else{if(!this.parentView.$el.find(".card").hasClass("checking")&&(!event.keyCode||event.keyCode===13)){window.open(this.data.url);this.metrics.tagEvent({ev:"click",action:"Open places item",name:"Link Name:"+this.data.title,section:"Places large",target:this.data.url})}}},removeItem:function(){var folder={id:this.data.folder?this.data.folder:2,label:"root",link:{id:this.data.id}};this.trigger("delete",{featured:this.data.featured,folder:folder,data:this.data});this.metrics.tagEvent({ev:"click",action:"Delete this link",name:"Link Name:"+this.data.title,section:"Personal link",target:"none"})},editItem:function(event){event.stopPropagation();this.parentView.slidedown.$el.find(".custom-link__icon__selector button").focus();this.parentView.slidedown.$el.find(".custom-link__fields #Name").val(this.data.title);this.parentView.slidedown.$el.find(".custom-link__fields #Link").val(this.data.url);this.parentView.slidedown.$el.find(".custom-link__icon__thumbnail i").attr("class",this.data.classname);this.parentView.slidedown.$el.find(".juro-form section[class=input]").each(function(){$(this).addClass("input--filled")});this.trigger("edit",this);this.metrics.tagEvent({ev:"click",action:"Edit this link",name:"Link Name:"+this.data.title,section:"Personal link",target:"none"});this.parentView.slidedown.show()},showActions:function(){this.$el.find(".actions-label").show()},hideActions:function(){this.$el.find(".actions-label").hide()},isFeatured:function(){if(this.$el.hasClass("selected")){return this.data.id}return false},isDefaultFeatured:function(){return this.default_featured},resetFeatured:function(){if(this.default_featured){this.$el.addClass("selected")}else{this.$el.removeClass("selected")}this.data.featured=this.default_featured;this.parentView.model.trigger("updateLinksFeatured",this.data)},updateFeatured:function(new_featured){if(new_featured){this.default_featured=true;this.$el.addClass("selected")}else{this.default_featured=false;this.$el.removeClass("selected")}this.data.featured=new_featured;this.parentView.model.trigger("updateLinksFeatured",this.data)},clearSelected:function(){this.$el.removeClass("selected");this.data.featured=false;this.parentView.model.trigger("updateLinksFeatured",this.data)},getItemId:function(){return this.data.id},addMessageBar:function(){this.message_bar=this.generateMessageBar({actions:[{text:"Yes",i18n:"app.cogs.places.cta.yes",evt:"click",callback:this.removeItem.bind(this)},{text:"No",i18n:"app.cogs.places.cta.no",evt:"click",callback:this.hideMessage.bind(this)}]});this.message_bar.render();this.$el.append(this.message_bar.$el)},generateMessageBar:function(params){return new app.components.message_bar(params)},showMessage:function(){var context;if("i18next"in window&&!_.isEmpty(awf.i18n.languages)){var translated=i18next.t(app.messages.places["delete-warning"].i18n,{title:_.trunc(this.data.title,30)});context=translated==app.messages.places["delete-warning"].i18n?app.messages.places["delete-warning"].default:translated}else{context=app.messages.places["delete-warning"].default}this.message_bar.slideRightShow("warning",context,200);this.metrics.tagEvent({ev:"click",action:"Show delete link message",name:"Link Name:"+this.data.title,section:"Personal link",target:"none"})},hideMessage:function(){var node=this.$el.find(".message-bar");node.animate({width:"hide"});this.metrics.tagEvent({ev:"click",action:"Hide delete link message",name:"Link Name:"+this.data.title,section:"Personal link",target:"none"});this.$el.find(".actions-label a:eq(0)").focus()},translate:function(key,value){var translated;if("i18next"in window){translated=i18next.t(key)}return translated==key?value:translated}})})();(function(){app.cogs.places.views.large=app.base.views.BaseView.extend({LINK_NAME_DEFAULT:"Name",LINK_URL_DEFAULT:"Link",template:app.templates.cogs.places["large.html"],initialize:function(params){this.enabledRecommendationTop10=false;this.large_methods=params.large_methods;this.id=0;this.params=params;this.items=[];this.newLinkIcon="icon-youribm-places";this.flipcard_timeout=0;this.selected_items=[];this.new_sort=null;this.gear_is_fading=false;this.parentFolder="";this.cardSize="large";this.$container=params.$container;this.metrics=app.utils.createMetricTag({module:"places:large",group:awf.app.id});this.on("selection-warning",function(){this.showHideMessage({status:"warn",context:app.messages.places["selection-warning"]})}.bind(this));this.listenTo(this.model,"getFolderLinks",this.getFolderLinks.bind(this));this.listenTo(this.model,"getAllLinks",this.getAllLinks.bind(this));this.listenTo(this.model,"updateLinksFeatured",this.updateLinksFeatured.bind(this));this.listenTo(this.model,"change:all",this.getRootItems.bind(this));this.listenTo(this.model,"_error",function(params){this.showHideMessage({context:app.messages.places[params.type],status:"error"})}.bind(this));this.listenTo(this.model,"_warning",function(params){this.showHideMessage({context:app.messages.places[params.type],status:"warn"})}.bind(this));this.listenTo(this.model,"preference:saved",function(params){if(this.parentFolder===""){this.setItems(this.getRootItems())}else{this.getFolderLinks(this.parentFolder)}}.bind(this));this.listenTo(this.model,"mediumcard:saved",function(params){if(this.parentFolder===""){this.setItems(this.getRootItems())}else{this.getFolderLinks(this.parentFolder)}}.bind(this));this.listenTo(this.model,"refresh",function(params){this.showLoading();setTimeout(function(){this.hideLoading();if(this.parentFolder===""){this.setItems(this.getRootItems())}else{this.getFolderLinks(this.parentFolder)}this.large_methods.postMessage("info","Your personal links have been synchronized with server data successfully.",false).andDismissIn(3)}.bind(this),500)}.bind(this));this.listenTo(this.model,"sortable",function(params){this.sortable=true}.bind(this))},render:function(){this.$el=$(this.template);this.$container.html(this.$el);this.setItems(this.getRootItems());if(this.sortable){this.sortableHandler("show");awf.user.authentication.done(function(){if(awf.flags.isActive("squads.echo")){setTimeout(function(){this.$el.find("#places_actions_bell").show().click()}.bind(this),200)}}.bind(this))}this.addSlideDown();this.addDropdown();this.bindEvents();this.setupCoachMark();this.$el.localize()},setupCoachMark:function(){var closedInCache=app.localCache.getData("places:coach-marks:close");if(awf.flags.isActive("cogs.places.coach-marks")&&!closedInCache){var large_coach_mark=new w3n.base.components.coach_mark({card_component:this.$el,cog_name:"places:large",card_name:"places"});large_coach_mark.render()}},setLoader:function(){this.$container.append(app.base.views.BaseView.prototype.loadingTemplate)},getRootItems:function(){this.folders=this.model.getFolders();var roots=_.filter(this.folders,{label:"root"});var linksInRoot=[];_.forEach(roots,function(folder){if(folder.links){linksInRoot=linksInRoot.concat(folder.links)}});this.itemsInRoot=_.reject(this.folders,{label:"root"}).concat(linksInRoot);return this.itemsInRoot},generateItem:function(data){return new app.cogs.places.views.largeItemView({data:data,parentView:this})},generateLoadingMark:function(params){app.base.views.BaseView.prototype.setLoader.apply(this,arguments)},generateMessageBar:function(params){return new app.components.message_bar(params)},bindEvents:function(){this.$el.find("#places_actions_gear").on("click",this.clickGearButton.bind(this));this.$el.find("#places_actions_clearall").on("click",this.clearAllSelections.bind(this));this.$el.find("#places_actions_addlink").on("click",this.clickAddLinkButton.bind(this));this.slidedown.$el.find(".custom-link__icon__selector button,.custom-link__icon__thumbnail i").on("click",this.clickChangeIconButton.bind(this));this.slidedown.$el.find(".custom-link__icon__buttons button[class=tertiary-form-btn]").on("click",this.clickChangeIconCancelButton.bind(this));this.slidedown.$el.find(".custom-link__icon__buttons button[class=primary-form-btn]").on("click",this.clickChangeIconSelectButton.bind(this));this.$el.find("#places_actions_save").on("click",this.clickSaveButton.bind(this));this.$el.find("#places_actions_back").on("click",this.clickCancelButton.bind(this));this.$el.find("button.back-btn").on("click",this.clickBackButton.bind(this));this.slidedown.$el.find(".custom-link__icon__buttons button[class=primary-form-btn]").on("keydown",this.keyDownEventOnSelectButton.bind(this));this.$el.parent().find(".juro-form button[class~=js-form-submit-button]").on("keydown",this.keyDownEventOnSaveButton.bind(this));this.slidedown.$el.find(".custom-link__icon__selector").children().on("keydown",this.keyDownEventOnChangeIconButton.bind(this));this.top10RecommendationDropDown.$el.find("#places_recommendation_cancel").on("keydown",this.keyDownEventOnTop10CancelButton.bind(this));this.top10RecommendationDropDown.$el.find("#places_recommendation_save").on("keydown",this.keyDownEventOnTop10SaveButton.bind(this));this.top10RecommendationDropDown.$el.find("#places_recommendation_cancel").on("click",this.clickAddTop10CancelButton.bind(this));this.top10RecommendationDropDown.$el.find("#places_recommendation_save").on("click",this.clickAddTop10SaveButton.bind(this));this.top10RecommendationDropDown.on("dropdown-show",this.top10RecommendationDropDownShowAction.bind(this))},clickLargeCard:function(event){event.preventDefault();var self=this;if(!$.contains(self.top10RecommendationDropDown.$el[0],event.target)){setTimeout(function(){self.top10RecommendationDropDown.hide()},100)}},top10RecommendationDropDownShowAction:function(){this.top10RecommendationDropDown.$el.find("#places_recommendation_save").focus()},keyDownEventOnTop10CancelButton:function(event){var self=this;if(event.keyCode===9){setTimeout(function(){self.top10RecommendationDropDown.$el.find("#places_recommendation_save").focus()},10)}},keyDownEventOnTop10SaveButton:function(event){var self=this;if(event.keyCode===9){setTimeout(function(){self.top10RecommendationDropDown.$el.find("#places_recommendation_cancel").focus()},10)}},keyDownEventOnSelectButton:function(event){var self=this;if(event.keyCode===9){event.preventDefault();setTimeout(function(){self.$el.parent().find(".custom-link__icon__list ul li").eq(0).children().focus()},10)}},keyDownEventOnSaveButton:function(event){var self=this;if(event.keyCode===9){event.preventDefault();setTimeout(function(){self.$el.parent().find(".custom-link__icon__selector").children().focus()},10)}},keyDownEventOnChangeIconButton:function(event){var self=this;if(event.keyCode===9&&event.shiftKey){setTimeout(function(){self.$el.parent().find(".juro-form button[type=submit]").focus()},10)}},addDropdown:function(){this.top10RecommendationDropDown=new app.components.dropdown({trigger:this.$el.find("#places_actions_bell"),evt:"click",evt_target:this.$el.find("#places_actions_bell"),top_position:65,right_position:110,width:"400",height:"200",has_wrap:false,left_interpolation:130,reference:this.$el,direction:"top",background_color:"#ffffff",module:"places:large",name:"toggle recommended Links",section:"selection:trigger",card:"places"});this.top10RecommendationDropDown.render();var template=app.templates.cogs.places["top-10-recommendation.html"];var $template=$(Mustache.render(template));this.top10RecommendationDropDown.setContent($template)},clickAddTop10CancelButton:function(event){event.preventDefault();this.top10RecommendationDropDown.hide();this.$el.find("#places_actions_bell").focus()},clickAddTop10SaveButton:function(event){event.preventDefault();this.top10RecommendationDropDown.hide();this.enabledRecommendationTop10=true;this.on("saveRecommendationTop10Data",function(){if(this.enabledRecommendationTop10){this.showLoading();var newTop10Link={id:this.currentEditedItem?this.currentEditedItem.data.folder:2,label:"root",index:1,link:{id:0,url:"http://www.ibm.com",title:"Business Conduct Guidelines",icon:"icon-awf-w3-certificate",index_m:1,index_l:1,featured:true,hidden:false,type:"personal"}};this.model.savePersonal(newTop10Link).done(function(res){var id=res.link.id;this.selected_items.unshift(id);this.saveSelectedItems(true).done(function(){this.showHideMessage({status:"success",context:app.messages.common.saved,by:"none"})}.bind(this))}.bind(this)).fail(function(){this.showHideMessage({status:"error",context:app.messages.places["add-link-fail"],by:"none"})}.bind(this));this.enabledRecommendationTop10=false}});if(this.checkSelectedItemsCount(true)<10){this.trigger("saveRecommendationTop10Data")}else{this.showHideMessage({status:"info",context:app.messages.places.deselect,by:"none"})}},clickGearButton:function(event){event.preventDefault();var self=this;if(!this.gear_is_fading){this.gear_is_fading=true;this.$el.find("#places_actions_bell").fadeToggle();this.$el.find("#places_actions_gear").fadeOut("400",function(){self.gearFiring();self.gear_is_fading=false});this.metrics.tagEvent({ev:"click",action:"Gear button",name:"Gear button",section:"Places large",target:"none"})}},clearAllSelections:function(event){event.preventDefault();this.clearAllSelectedItems();this.checkSelectedItemsCount();this.metrics.tagEvent({ev:"click",action:"Clear all button",name:"Clear all selected items",section:"Places large",target:"none"})},clickSaveButton:function(){this.saveSelectedItems();this.metrics.tagEvent({ev:"Click",action:"Save top10 links",name:"Save top10 setting",section:"Places large",target:"none"})},clickAddLinkButton:function(event){event.preventDefault();this.metrics.tagEvent({ev:"click",action:"Add link button",name:"Add link",section:"Places large: Add link",target:"none"});if(this.slidedown.$el.find(".slide-down").is(":visible")){this.slidedown.$el.find(".custom-link__icon__selector button").focus()}this.resetAddLinkForm()},clickChangeIconSelectButton:function(){this.metrics.tagEvent({ev:"click",action:"button",name:"Select",module:"Places:large",section:"slidedown-component:change icon",target:"none"});var self=this;var node=this.slidedown.$el.find(".custom-link__icon__thumbnail i");node.removeClass().addClass(this.newLinkIcon);self.slidedown.$el.find("li button[class=selected]").removeClass("selected");
self.slidedown.$el.find(".custom-link__icon__list,.custom-link__icon__buttons").hide();self.slidedown.$el.find(".custom-link .title-3").slideDown(100,function(){self.slidedown.$el.find(".custom-link__icon__thumbnail,.custom-link__icon__selector,.custom-link__fields").show()});self.slidedown.$el.find(".custom-link__icon__selector button").focus()},clickAddLinkSaveButton:function(validateResult){if(!validateResult){this.metrics.tagEvent({ev:"click",action:"button",name:"Save",module:"Places:large",section:"slidedown-component:add link",target:"none"});this.slidedown.hide();var nameText=this.slidedown.$el.find(".juro-form input[id=Name]").val();var urlText=this.slidedown.$el.find(".juro-form input[id=Link]").val();urlText=urlText.toLowerCase().indexOf("http")===0?urlText:"http://"+urlText;this.showLoading();var self=this;var newLink={id:this.currentEditedItem?this.currentEditedItem.data.folder:2,label:"root",index:1,link:{id:this.id,url:urlText,title:nameText,icon:this.newLinkIcon,index_m:1,index_l:1,featured:false,hidden:false,type:"personal",config:"",tags:null}};this.model.savePersonal(newLink).done(function(res){self.showHideMessage({status:"success",context:self.id===0?app.messages.common.saved:app.messages.common.success,by:"none"});self.model.trigger("change:all");self.setItems(self.itemsInRoot);self.resetAddLinkForm();self.$el.find(".folder-stat-panel").hide()}).fail(function(){self.showHideMessage({status:"error",context:app.messages.places["add-link-fail"],by:"none"})}).always(function(){self.id=0})}},clickChangeIconCancelButton:function(){this.metrics.tagEvent({ev:"click",action:"button",name:"cancel",module:"Places:large",section:"slidedown-component:change icon",target:"none"});var self=this;this.slidedown.$el.find("li button[class=selected]").removeClass("selected");this.slidedown.$el.find(".custom-link__icon__list,.custom-link__icon__buttons").hide();this.slidedown.$el.find(".custom-link .title-3").slideDown(100,function(){self.slidedown.$el.find(".custom-link__icon__thumbnail,.custom-link__icon__selector,.custom-link__fields").show()});this.slidedown.$el.find(".custom-link__icon__selector button").focus()},clickAddLinkCancelButton:function(){this.slidedown.hide();this.$el.find("#places_actions_addlink").focus();this.resetAddLinkForm();this.metrics.tagEvent({ev:"click",action:"button",name:"cancel",module:"Places:large",section:"slidedown-component:add link",target:"none"})},clickChangeIconButton:function(event){event.preventDefault();var self=this;self.slidedown.$el.find(".custom-link p,.custom-link__icon__thumbnail,.custom-link__icon__selector,.custom-link__fields").hide();self.slidedown.$el.find(".custom-link__icon__list,.custom-link__icon__list p").slideDown(50,function(){self.slidedown.$el.find(".custom-link__icon__buttons").show();self.slidedown.$el.find(".custom-link__icon__list ."+self.slidedown.$el.find(".custom-link__icon__thumbnail>i").attr("class")).parent().addClass("selected").focus()});this.metrics.tagEvent({ev:"click",action:"button",name:"Change icon",module:"Places:large",section:"slidedown-component:change icon",target:"none"})},clickCancelButton:function(event){event.preventDefault();var self=this;if(!this.gear_is_fading){this.gear_is_fading=true;this.resetFeaturedItems();this.checkSelectedItemsCount();this.gearFiring(true).done(function(){self.$el.find("#places_actions_gear").fadeIn();if(awf.flags.isActive("squads.echo")){self.$el.find("#places_actions_bell").fadeIn()}self.$el.find("#places_actions_gear").focus();self.gear_is_fading=false;if(this.parentFolder===""){self.$el.find(".folder-stat-panel").hide()}});this.metrics.tagEvent({ev:"click",action:"Cancel edit model",name:"Back",section:"Places large",target:"none"})}},clickBackButton:function(){this.model.trigger("getAllLinks");this.metrics.tagEvent({ev:"click",action:"Back to Top folder",name:"Back to Top folder",section:"Places large",target:"none"})},addLoadingmark:function(){this.loading_mark=this.generateLoadingMark();this.$el.after(this.loading_mark.$el);this.loading_mark.show()},saveSelectedItems:function(slient){this.showLoading();var preference={sort:this.selected_items};var mediumcard={links:_.map(this.selected_items,function(id){return{id:id,type:id>1e5?"personal":"popular"}})};return this.model.saveMediumcard(mediumcard).done(function(){this.sortUpdateDone(slient);this.model.savePreference(JSON.stringify(preference),true)}.bind(this)).fail(function(res){var silent=true;if(res.bar=="failed"){this.sortUpdateFail()}else if(res.message=="inactive"){silent=false}this.model.savePreference(JSON.stringify(preference),silent).done(function(){this.sortUpdateDone(slient)}.bind(this))}.bind(this)).always(function(){this.sortUpdateAlways()}.bind(this))},gearFiring:function(promise){var its_done=null;var self=this;if(promise){its_done=$.Deferred()}this.$el.find("#places_actions_addlink").fadeToggle();this.$el.find("#places_actions_back").fadeToggle(400,function(){if(its_done){its_done.resolve()}}.bind(this));if(this.$el.hasClass("sorting")){setTimeout(function(){self.$el.removeClass("sorting")},100)}else{this.$el.addClass("sorting")}if(promise){return its_done.promise()}this.$el.find("#places_actions_back").focus()},showHideMessage:function(message){this.hideLoading();var context;if("i18next"in window&&!_.isEmpty(awf.i18n.languages)){var translated=i18next.t(message.context.i18n);context=translated==message.context.i18n?message.context.default:translated}else{context=message.context.default}this.large_methods.postMessage(message.status,context,false).andDismissIn(3);setTimeout(function(){if(this.checkSelectedItemsCount(true)===10){this.$el.find(".selected-items span").removeClass("warning")}}.bind(this),400)},sortableHandler:function(action){if(action==="show"){this.$el.removeClass("anonymous")}else{this.$el.addClass("anonymous")}},clearAllSelectedItems:function(){this.$el.find(".places-large-item").removeClass("selected");var links=this.model.get("all");_.map(links,function(link){link.featured=false;link.new=false});this.model.set("all",links);this.model.trigger("change:all");this.model.trigger("clearAllFeatured");var datas;if(this.parentFolder===""){datas=this.itemsInRoot}else{datas=_.filter(this.folders,{title:this.parentFolder.title})[0].links;this.parentFolder.selected_links=0;var panel=this.$el.find(".folder-stat-panel");panel.find("span").html(this.parentFolder.title+"(0/"+this.parentFolder.total_links+")")}this.setItems(datas)},resetFeaturedItems:function(){this.resetToDefaultFeatured();this.model.trigger("resetAllFeatured");var datas;if(this.parentFolder===""){datas=this.itemsInRoot}else{datas=_.filter(this.folders,{title:this.parentFolder.title})[0].links;var panel=this.$el.find(".folder-stat-panel");this.parentFolder=_.find(this.folders,{title:this.parentFolder.title});panel.find("span").html(this.parentFolder.title+" ("+this.parentFolder.selected_links+"/"+this.parentFolder.total_links+")")}this.setItems(datas)},updateFeaturedItems:function(){var self=this;if(this.new_sort){_.forEach(this.items,function(item){var new_featured=false;_.forEach(self.new_sort.sort,function(sort){if(item.getItemId()===sort){new_featured=true}});item.updateFeatured(new_featured)})}},checkSelectedItemsCount:function(check_count){var self=this;self.selected_items=[];var featured_links=_.filter(this.model.get("all"),{featured:true});_.forEach(featured_links,function(links){self.selected_items.push(links.id)});this.selected_items=this.reorderFeaturedItems(this.selected_items);if(!check_count){this.$el.find(".selected-items span").html(this.selected_items.length+" / 10");if(self.selected_items.length<10){this.$el.find(".selected-items span").addClass("warning");this.$el.find(".actions button.secondary-form-btn").addClass("disabled")}else{this.$el.find(".selected-items span").removeClass("warning");this.$el.find(".actions button.secondary-form-btn").removeClass("disabled")}}return self.selected_items.length},reorderFeaturedItems:function(new_sort){var new_featured=[],new_featured_clone=[],not_update_items=[],updated_items=[];if(this.model.get("mediumcard")){_.forEach(this.model.get("mediumcard"),function(link){new_featured_clone.push(link.id)})}else if(this.model.get("preference")){_.forEach(this.model.get("preference").sort,function(num){new_featured_clone.push(parseInt(num,10))})}else{_.forEach(this.model.get("all"),function(link){if(link.featured){new_featured_clone.push(link.id)}})}not_update_items=_.intersection(new_featured_clone,new_sort);updated_items=_.difference(new_sort,new_featured_clone);new_featured=updated_items.concat(not_update_items);return new_featured},sortUpdateDone:function(silent){this.updateDefaultFeatured();this.$el.find(".link-list>li a").eq(0).focus()},sortUpdateFail:function(){this.resetFeaturedItems();this.showHideMessage({status:"error",context:app.messages.places["sort-fail"],by:"none"})},sortUpdateAlways:function(){this.hideLoading()},selectionWarning:function(message){if(!this.message_bar){this.addMessageBar()}if(!this.message_bar.is_showing){this.hideMessage();this.showHideMessage(message)}},resetAllItemsWidth:function(){setTimeout(function(){_.forEach(this.items,function(item){item.responsivelySetWidth()})},500)},appendItem:function(data){var link_item=this.generateItem(data);link_item.on("update",function(params){this.showLoading();var newLink={id:this.currentEditedItem?this.currentEditedItem.data.folder:2,label:"root",index:"1",link:{id:params.id<1e5?0:params.id,url:params.url,title:params.title,description:params.description,icon:params.classname,index_m:1,index_l:1,featured:params.featured,hidden:params.hidden,type:"popular",config:params.config,tags:params.tags,popular_id:params.popular_id?params.popular_id:params.id}};this.model.savePersonal(newLink).done(function(res){link_item.$el.toggleClass("inactive");this.showHideMessage({status:"success",context:this.id===0?app.messages.common.saved:app.messages.common.success,by:"none"});this.model.trigger("change:all");this.setItems(this.itemsInRoot);this.$el.find(".folder-stat-panel").hide()}.bind(this)).fail(function(){this.showHideMessage({status:"error",context:app.messages.places["toggle-link-fail"],by:"none"})}.bind(this)).always(function(){this.id=0}.bind(this))}.bind(this));link_item.on("edit",function(target){this.parentView.currentEditedItem=target;this.parentView.id=target.data.id});link_item.on("delete",function(params){this.showLoading();this.selected_items=_.pull(this.selected_items,params.folder.link.id);var preference={sort:this.selected_items};var mediumcard={links:_.map(this.selected_items,function(id){return{id:id,type:id>1e5?"personal":"popular"}})};var newLink={id:params.data.folder?params.data.folder:2,label:"root",index:"1",link:{id:params.data.id,url:params.data.url,title:params.data.title,description:params.data.description,icon:params.data.classname}};var deferreds=[this.model.deletePersonal(newLink)];if(params.featured){deferreds.push(this.model.saveMediumcard(mediumcard));deferreds.push(this.model.savePreference(JSON.stringify(preference),true))}$.when.apply($,deferreds).done(function(){var context=params.featured?app.messages.places["delete-featured-success"]:app.messages.common.success;this.showHideMessage({status:"success",context:context,by:"none"});this.model.trigger("change:all");this.setItems(this.itemsInRoot)}.bind(this)).fail(function(){this.showHideMessage({status:"error",context:app.messages.places["delete-fail"],by:"none"})}.bind(this)).always(function(){this.$el.find(".actions button.secondary-form-btn").focus()}.bind(this))}.bind(this));this.items.push(link_item);return link_item},clearItems:function(){this.items=[];this.$el.find("ul.link-list").empty()},setItems:function(datas){this.clearItems();var self=this;_.forEach(datas,function(data){self.appendItem(data)});_.forEach(this.items,function(item){self.$el.find("ul.link-list").append(item.$el);if(item.$el.hasClass("new")){item.$el.children().focus()}});this.checkSelectedItemsCount()},showLoading:function(){var loading=this.$container.find(".loading-mark");if(loading.length>0){loading.show()}else{this.setLoader()}},hideLoading:function(){this.$container.find(".loading-mark").hide()},getAllLinks:function(){var self=this;this.$el.find("ul.link-list").slideUp(400,function(){self.setItems(self.itemsInRoot);self.$el.find("ul.link-list").slideDown(200,function(){var index=_.findIndex(self.folders,{title:self.parentFolder.title});self.$el.find(".link-list>li a").eq(index).focus();self.parentFolder=""});var panel=self.$el.find(".folder-stat-panel");panel.hide();self.$el.find(".gear-panel").show()})},getFolderLinks:function(data){var self=this;var links=_.filter(this.folders,{title:data.title})[0].links;self.$el.find("ul.link-list").slideUp(400,function(){self.setItems(links);self.$el.find("ul.link-list").slideDown(200);var panel=self.$el.find(".folder-stat-panel");panel.show();panel.find("button.back-btn").focus();panel.find("span").html(data.title+" ("+data.selected_links+"/"+data.total_links+")");self.$el.find(".gear-panel").hide()});this.parentFolder=data},updateLinksFeatured:function(data){var links=this.model.get("all");_.map(links,function(link){if(link.id==data.id){link.featured=data.featured}});this.model.trigger("change:all");if(this.parentFolder!==""){this.parentFolder.selected_links=data.featured?this.parentFolder.selected_links+1:this.parentFolder.selected_links-1;var panel=this.$el.find(".folder-stat-panel");panel.find("span").html(this.parentFolder.title+" ("+this.parentFolder.selected_links+"/"+this.parentFolder.total_links+")")}},resetToDefaultFeatured:function(){_.forEach(this.model.get("all"),function(link){link.featured=link.defaultFeatured});this.model.trigger("change:all")},updateDefaultFeatured:function(){_.forEach(this.model.get("all"),function(link){link.defaultFeatured=link.featured});this.model.trigger("change:all")},addSlideDown:function(){var template=app.templates.cogs.places["custom-link.html"];var $template=$(Mustache.render(template,{title:"Add a link to your Places card",default_icon:this.newLinkIcon}));this.slidedown=new app.components.slideDown({content:$template,enable_overlay:true,trigger:this.$el.find("#places_actions_addlink")});this.$el.after(this.slidedown.render().el);this.generateAddLinkForm();this.addIconList()},generateAddLinkForm:function(){var self=this;var form=new app.form.base({schema:{Name:{type:app.form.editors.text,title:"Name",i18n_label:"app.cogs.places.form.name",validators:["required"]},Link:{type:app.form.editors.text,title:"Link",i18n_label:"app.cogs.places.form.link",validators:["required","url"]}},submitButton:"Save",cancelButton:"Cancel"});form.on("cancel",function(e){self.clickAddLinkCancelButton()});form.on("submit",function(e){e.preventDefault();var validateResult=this.validate();self.clickAddLinkSaveButton(validateResult)});this.slidedown.$el.find(".custom-link__fields").append(form.render().el)},addIconList:function(){var self=this;var iconModel=new app.serviceModels.places.icons;iconModel.fetch().done(function(){_.forEach(iconModel.toJSON(),function(data){var iconView=new app.cogs.places.views.icon({data:data,parentView:self});self.slidedown.$el.find(".custom-link__icon__list ul").append(iconView.$el)});self.slidedown.$el.find(".custom-link__icon__list ul li").eq(0).children().on("keydown",function(event){if(event.keyCode===9&&event.shiftKey){setTimeout(function(){self.slidedown.$el.find(".custom-link__icon__buttons button[type=submit]").focus()},10)}})})},setNewLinkIcon:function(className){this.newLinkIcon=className},resetAddLinkForm:function(){this.slidedown.$el.find(".custom-link__fields .has-error").removeClass("has-error");this.slidedown.$el.find(".custom-link__fields #Name,.custom-link__fields #Link").val("");var node=this.slidedown.$el.find(".custom-link__icon__thumbnail i");node.removeClass().addClass("icon-youribm-places");this.newLinkIcon="icon-youribm-places"}})})();(function(){app.cogs.places.views.mediumItem=app.base.views.BaseView.extend({template:app.templates.cogs.places["medium-item.html"],initialize:function(params){this.$el=$(this.template);this.model=params.data;this.$sorting_text=null;this.metrics=app.utils.createMetricTag({module:"places:medium:item",group:awf.app.id});var ns="app.cogs.places.links.";if(this.model.title){this.setHeadline(_.trunc(this.model.title,30))}if(this.model.url){this.setUrl(this.model.url)}if(this.model.classname){this.setIcon(this.model.classname)}if(this.model.id){this.setDataId(this.model.id)}this.bindEvents();this.$el.localize()},render:function(){return this},bindEvents:function(){this.$el.off("click",this.openUrl.bind(this));this.$el.on("click",this.openUrl.bind(this))},openUrl:function(event){event.preventDefault();var parameters={ev:"click",action:"link",name:this.model.title,section:"list",target:this.model.url,module:"places:medium"};this.metrics.tagEvent(parameters);window.open(this.model.url)},privateIsSorting:function(){this.$sorting_text=$("<span>"+this.model.title+"</span>");this.$el.find(".title a").after(this.$sorting_text);this.$el.find(".title a").hide()},notSorting:function(){if(this.$sorting_text){this.$sorting_text.remove()}this.$sorting_text=null;this.$el.find(".title a").show()},isSorting:function(action){this.$el.off();if(action==="enable"){this.privateIsSorting()}else{this.notSorting()}},setHeadline:function(new_value){var node=this.$el.find(".title a");node.html(_.trunc(new_value,30));if(this.model.id<1e5){node.attr("data-i18n","app.cogs.places.links."+_.kebabCase(this.model.title)+".title")}},setUrl:function(new_value){this.$el.find(".title a").attr("href",new_value)},setIcon:function(new_value){this.$el.find(".icon i").addClass(new_value)},setDataId:function(new_value){this.$el.attr("data-id",new_value)},translate:function(key,value){var translated;if("i18next"in window){translated=i18next.t(key)}return translated==key?value:translated}})})();(function(){app.cogs.places.views.medium=app.base.views.BaseView.extend({template:app.templates.cogs.places["medium.html"],initialize:function(params){this.params=params;this.items=[];this.model=params.model;this.medium_methods=params.medium_methods;this.pf_flipcard_timeout=0;this.save_sort_timeout=0;this.is_sorting=false;this.is_updating=false;this.cardSize="medium";this.messages_set={sort_success:"Saved.",sort_fail:"Your places preferences failed to save.",fetch_preference_fail:"Your places preferences failed to load.",fetch_personal_fail:"Your personal data failed to load.",fetch_personal_empty:"You don't have your personal data yet.",preference_warning:"You don't have preference data yet.",selection_warning:"Youâve reached your top 10. Click a selected Place to de-select it.",fetch_json_fail:"There is no data promoted."};this.metrics=params.metrics;this.listenTo(this.model,"_error",function(params){this.showHideMessage({context:app.messages.places[params.type],status:"error"})}.bind(this));this.listenTo(this.model,"_warning",function(params){this.showHideMessage({context:app.messages.places[params.type],status:"warn"})}.bind(this));this.listenTo(this.model,"preference:saved",function(params){this.setItems(this.model.get("featured"))}.bind(this));this.listenTo(this.model,"mediumcard:saved",function(params){this.setItems(this.model.get("featured"))}.bind(this));this.listenTo(this.model,"personal:saved",function(params){this.setItems(this.model.get("featured"))}.bind(this));this.listenTo(this.model,"sortable",function(params){this.sortable=true}.bind(this));this.listenTo(this.model,"refresh",function(params){this.showLoading();setTimeout(function(){this.hideLoading();this.setItems(this.model.get("featured"));this.medium_methods.postMessage("info",i18next.t(app.messages.places["data-synchronized"].i18n),false).andDismissIn(3)}.bind(this),500)}.bind(this))},render:function(){this.$el.append($(this.template));this.setItems(this.model.get("featured"));if(this.sortable){this.sortableHandler("show")}this.setupCoachMark();this.$el.find(".cta-btn").show();this.params.medium_methods.handleLargeViewAvailable(function(is_flippable){if(is_flippable){this.$el.find(".cta-btn").fadeIn("fast")}else{this.$el.find(".cta-btn").fadeOut("fast")}}.bind(this));this.$el.localize();return this},events:{"click p button.flip-1":"flipcard"},setupCoachMark:function(){var closedInCache=app.localCache.getData("places:coach-marks:close");if(awf.flags.isActive("cogs.places.coach-marks")&&!closedInCache){var medium_coach_mark=new w3n.base.components.coach_mark({card_component:this.$el,cog_name:"places:medium",card_name:"places"});medium_coach_mark.render()}},flipcard:function(){var params={};params={ev:"click",action:"flip-up",name:"View more places",section:"view-more",module:"places:medium",target:"none"};this.medium_methods.flipCard();this.metrics.tagEvent(params)},setLoader:function(){this.$el.append(app.base.views.BaseView.prototype.loadingTemplate)},generateItem:function(item){return new app.cogs.places.views.mediumItem({data:item})},generateLoadingMark:function(params){app.base.views.BaseView.prototype.setLoader.apply(this,arguments)},addLoadingmark:function(){app.base.views.BaseView.prototype.setLoader.apply(this,arguments)},addViewMore:function(){var more=this.generateItemMore({btn_has_background:true,enable_img:false,action_type:true,text_def:"View all popular places",text_active:"View all popular places",component:"[data-component=places-medium]",hide_completely_if_prohibitted:true});this.$el.find(".link-list").cta.append(more.$el);more.$el.attr("aria-label","places medium button for view all popular places");this.$el.find(".link-list").cta.find("a").on("click",{section:"list"},this.metrics.linkEvent)},addSortable:function(){var self=this;this.$el.find(".link-list").sortable({delay:500,revert:true,scroll:false,items:"> li",placeholder:"ui-sortable-placeholder",tolerance:"pointer",update:this.sortableUpdateCallback.bind(self),start:this.sortableStartCallback.bind(self),beforeStop:this.sortableBeforestopCallback.bind(self),stop:this.sortableStopCallback.bind(self)})},sortableUpdateCallback:function(event,ui){this.is_updating=true;this.resortItemsOrder(event,ui);this.metrics.tagEvent({ev:"save",action:"Update",name:"Update sortable items",section:"Places medium",target:"none"})},sortableStartCallback:function(event,ui){this.sortableSwitch();$(ui.item.context).addClass("active");this.metrics.tagEvent({ev:"click",action:"Drag",name:"Drag sortable item",section:"Places medium",target:"none"})},sortableBeforestopCallback:function(event,ui){$(ui.item.context).removeClass("active");if(!this.is_updating){this.sortableSwitch("disable")}this.metrics.tagEvent({ev:"click",action:"Drop",name:"Drop sortable item",section:"Places medium",target:"none"})},sortableStopCallback:function(){if(!this.is_updating){this.sortableSwitch("disable")}},resortItemsOrder:function(){this.showLoading();var preference={sort:this.$el.find(".link-list").sortable("toArray",{attribute:"data-id"})};if(this.save_sort_timeout){clearTimeout(this.save_sort_timeout)}var mediumcard={links:_.map(preference.sort,function(id){return{id:id,type:"string"}})};this.save_sort_timeout=setTimeout(function(){this.model.saveMediumcard(mediumcard).done(function(){this.sortUpdateDone();this.model.savePreference(JSON.stringify(preference),true)}.bind(this)).fail(function(res){if(res.message=="failed"){this.sortUpdateFail()}this.model.savePreference(JSON.stringify(preference),true).done(this.sortUpdateDone.bind(this))}.bind(this)).always(function(){this.sortUpdateAlways()}.bind(this))}.bind(this),1e3)},sortableSwitch:function(action){if(action){if(action==="enable"){this.is_sorting=true}else{this.is_sorting=false}this.sortingItems(action)}else{if(this.is_sorting){this.is_sorting=false;this.sortingItems("disable")}else{this.is_sorting=true;this.sortingItems("enable")}}},sortingItems:function(action){if(action==="enable"){this.$el.find(".places-medium").addClass("sorting")}else{this.$el.find(".places-medium").removeClass("sorting")}_.forEach(this.items,function(item){item.isSorting(action)})},showHideMessage:function(message){var context;if("i18next"in window&&!_.isEmpty(awf.i18n.languages)){var translated=i18next.t(message.context.i18n);context=translated==message.context.i18n?message.context.default:translated}else{context=message.context.default}this.medium_methods.postMessage(message.status,context,false).andDismissIn(3)},sortableHandler:function(action){if(action==="show"){this.addSortable()}else{this.$el.find(".link-list").sortable("disable")}},sortUpdateDone:function(){this.showHideMessage({status:"success",context:app.messages.common.saved,by:"none"})},sortUpdateFail:function(message){this.$el.find(".link-list").sortable("cancel");this.showHideMessage({status:"error",context:app.messages.places["sort-fail"]})},sortUpdateAlways:function(){this.is_updating=false;this.sortableSwitch("disable");this.hideLoading();_.forEach(this.items,function(item){item.bindEvents()})},appendItem:function(item){var link_item=this.generateItem(item);this.items.push(link_item);return link_item},clearItems:function(){this.items=[];this.$el.find(".link-list").empty()},setItems:function(data){this.clearItems();var self=this;_.forEach(data,function(item){self.appendItem(item)});_.forEach(this.items,function(item){self.$el.find(".link-list").append(item.$el);item.$el.on("click",function(){var id=$(this).closest("[data-id]").attr("data-id")})})},triggerFlipcard:function(){this.trigger("cta:view-more")},showLoading:function(){var loading=this.$el.find(".loading-mark");if(loading.length>0){loading.show()}else{this.setLoader()}},hideLoading:function(){this.$el.find(".loading-mark").hide()}})})();(function(){app.cogs.stock.views.Large=app.base.views.BaseView.extend({initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.data={}},template:_.template(app.templates.cogs.stock["large.html"]),render:function(){this.data=this.model.toJSON();this.$el.html(this.template(this.data));if("i18next"in window){this.$el.localize();if(awf.i18n){awf.i18n.on("apply:language",this.updateDate.bind(this))}this.updateDate()}return this},updateDate:function(){var data=this.model.toJSON();this.$el.find(".caption-1").html(moment(data.oriTime).format("H:mm MMMM D, YYYY"))}})})();(function(){app.cogs.stock.views.Medium=app.base.views.BaseView.extend({initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.data={}},template:_.template(app.templates.cogs.stock["medium.html"]),render:function(){this.data=this.model.toJSON();this.$el.html(this.template(this.data));if("i18next"in window){this.$el.localize();if(awf.i18n){awf.i18n.on("apply:language",this.updateDate.bind(this))}this.updateDate()}return this},updateDate:function(){var data=this.model.toJSON();this.$el.find(".caption-1").html(moment(data.oriTime).format("H:mm MMMM D, YYYY"))}})})();(function(){app.cogs.stock.views.Mini=app.base.views.BaseView.extend({initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments)},template:_.template(app.templates.cogs.stock["mini.html"]),render:function(){this.data=this.model.toJSON();this.$el.html(this.template(this.data));if("i18next"in window){this.$el.localize()}return this},setLoader:function(){},renderError:function(){}})})();(function(){var templates={large:app.templates.cogs.cms["large.html"],header:app.templates.cogs.cms["large-header.html"],loading:app.templates.components["loading-mark"]["loading-mark.html"]};function handleError(){var errorMessage="An <strong>ERROR</strong> has occurred. Please try again.";var template=Mustache.render(app.templates.components["card-ribbon"]["card-ribbon.html"],{error:errorMessage});return template}function handleSuccess(type){var successMessage;if(type==="saved"){successMessage="This draft has been <strong>SAVED</strong>! The draft can be viewed on preview mode."}if(type==="published"){successMessage="This draft has been <strong>PUBLISHED</strong>! The public can now view the draft that you have published."}var template=Mustache.render(app.templates.components["card-ribbon"]["card-ribbon.html"],{success:successMessage});return template}app.cogs.cms.views.Large=app.base.views.BaseView.extend({name:"admin-large",initialize:function(opts){var self=this;self.dataCollection=opts.dataCollection;self.listenTo(self.model,"change:id",function(){if(self.editingModal.hasClass("active"))self.editingModal.removeClass("active");if(self.selectedModel){self.stopListening(self.selectedModel.getSubStructure("draft"),"sync sync:cached");self.stopListening(self.selectedModel.form,"all")}self.selectedModel=self.dataCollection.models.filter(function(model){return model.get("main").id===self.model.get("id")})[0];var model=self.selectedModel.getSubStructure("draft");if(self.model.get("largeCardActive")){self.setupDraftListening(self.selectedModel);self.fetchDraft()}else{self.fetchDraft();self.model.on("change:largeCardActive",function(){if(self.model.get("largeCardActive")){self.model.off("change:largeCardActive");self.setupDraftListening(self.selectedModel);self.fetchDraft()}})}self.listenTo(model,"error error:cached",function(){var largeCard=self.model.get("largeCardActive");if(largeCard){self.trigger.apply(this,["error"].concat(arguments))}else{self.model.on("change:largeCardActive",function(){self.trigger.apply(this,["error"].concat(arguments));self.model.off("change:largeCardActive")})}})});self.buttonWithDropdown=new app.base.components.buttonDropDown({buttonClass:"reset-btn",buttonText:"Reset to",selectId:"reset-select",selectClass:"reset-select",placeholderText:"select option",selectOptions:[{id:"reset-draft",value:"draft",text:"saved draft"},{id:"reset-published",value:"published",text:"published draft"}]});self.editingModal=$('<div id="editing-modal"></div>');app.base.views.BaseView.prototype.initialize.apply(this,arguments)},renderOnSync:false,render:function(){var renderData=_.extend({loadingTemplate:templates.loading},this.selectedModel.get("main"));this.selectedModel.form.render();this.$el.html(Mustache.render(templates.large,renderData)).append(this.editingModal);this.$("#cms-edit-form").html(this.selectedModel.form.$el);this.$("#cms-dropdown-with-button").append(this.buttonWithDropdown.$el);this.buttonWithDropdown.render();return this},setupDraftListening:function(model){return this.listenTo(model.getSubStructure("draft"),"sync sync:cached",function(){this.setupForm(model);this.render()}.bind(this))},setupForm:function(model){model.form=new Backbone.Form({model:model.getSubStructure("draft"),schema:app.formSchemas[model.get("main").id]});this.setupHeaderListeners(model.form)},setupHeaderListeners:function(form){var oldHeader;form.on("modal:open",function(title){oldHeader=this.$(".header-wrapper").html();this.$(".header-wrapper").html(Mustache.render(templates.header,_.extend(title,{cog:this.selectedModel.get("main").name})))}.bind(this));form.on("modal:close",function(){this.$(".header-wrapper").html(oldHeader)}.bind(this))},fetchDraft:function(){var model=this.selectedModel.getSubStructure("draft");if(_.isEmpty(_.omit(model.toJSON(),"id")))return model.fetch({timeout:null,uncache:true});return model.fetch({timeout:null})},events:{"change select":"handleSelect","click .save-btn":"handleSave","click .reset-btn":"handleReset","click .publish-btn":"handlePublish","click #cms-edit-form":"handleEditFormClick","click .preview-btn":"handlePreview","focus #content-text-area":"handleBannerDestroy","keyup .cms-edit-form":"cacheTextData"},getEditedData:function(){return this.selectedModel.form.getValue()},handleSave:function(e){var data=this.getEditedData();var revertLoadingScreen=this.initLoadingScreen();this.$(".save-btn").prop("disabled",true);this.selectedModel.getSubStructure("draft").save(data).fail(function(){this.$el.prepend(handleError());this.$(".save-btn").prop("disabled",false)}.bind(this),revertLoadingScreen).then(function(){this.$el.prepend(handleSuccess("saved"))}.bind(this));this.handleBannerDestroy()},handlePublish:function(e){var models=this.selectedModel.subModelsMap;
var data=this.getEditedData();var revertLoadingScreen=this.initLoadingScreen();this.$(".publish-btn").prop("disabled",true);models.draft.save(data).fail(function(){this.$el.prepend(handleError());this.$(".publish-btn").prop("disabled",false)}.bind(this),revertLoadingScreen).then(function(result){models.published.save(data).fail(function(){this.$el.prepend(handleError());this.$(".publish-btn").prop("disabled",false)}.bind(this),revertLoadingScreen).then(function(){this.$el.prepend(handleSuccess("published"))}.bind(this))}.bind(this));this.handleBannerDestroy()},handleReset:function(e){var selected=this.buttonWithDropdown.getValue();if(selected==="")return;var revertLoadingScreen=this.initLoadingScreen();if(selected==="draft")this.selectedModel.getSubStructure("draft").fetch({uncache:true}).fail(function(){this.$el.prepend(handleError())}.bind(this),revertLoadingScreen);if(selected==="published")this.selectedModel.getSubStructure("published").fetch({uncache:true}).fail(function(){this.$el.prepend(handleError())}.bind(this),revertLoadingScreen).then(function(data){var model=this.selectedModel.getSubStructure("draft");model.set(data);model.trigger("sync")}.bind(this));this.handleBannerDestroy()},initLoadingScreen:function(){var $loading=this.$(".loading");$loading.removeClass("hidden");return function(){$loading.addClass("hidden")}},handleSelect:function(){var value=this.$("select option:selected").val();if(value!=="select option")this.$(".reset-btn").removeClass("outline");this.trigger("selectCog",value);this.handleBannerDestroy()},resetSelect:function(){this.$(".reset-select").val("select option");this.$(".reset-btn").addClass("outline")},handleEditFormClick:function(){this.handleBannerDestroy()},handleBannerDestroy:function(){if(this.$(".card-ribbon").length)this.$(".card-ribbon").remove()},cacheTextData:_.debounce(function(){this.selectedModel.getSubStructure("draft").set(this.getEditedData())},200),handlePreview:function(){var location=document.location;window.open(location.origin+location.pathname+"?preview=true","_blank");this.handleBannerDestroy()}})})();(function(){var templates={medium:app.templates.cogs.cms["medium.html"]};app.cogs.cms.views.Medium=app.base.views.BaseView.extend({name:"admin-medium",initialize:function(){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.on("highlightCog",function(cogId){this.$("option").filter(function(i,opt){if(opt.value===cogId)$(opt).attr("selected",true)});this.$("select").trigger("focus")})},events:{"change select":"handleSelect","click button":"handleSubmit"},render:function(){this.$el.html(Mustache.render(templates.medium,{cogs:this.collection.toJSON().filter(this.modelHasSchema)}))},handleSelect:function(){var value=this.$("select option:selected")[0].value;this.trigger("changeActiveCog",{id:value,largeCardActive:false});this.trigger("highlightCog",value)},handleSubmit:function(e){e.preventDefault();this.trigger("editCog")},modelHasSchema:function(m){return Object.keys(app.formSchemas).indexOf(m.main.id)!==-1}})})();(function(){app.cogs.headlines.adapters.cms=function(data){return data}})();(function(){app.cogs.headlines.adapters.IBMerNews=function(data){var collection=[];_.forEach(data,function(obj){content=obj.contentByLang[0];img=obj.imageByLang[0];var model={category:_.includes(content.descText,"[Profiled for all IBM]")?"News for all":"News for you",headline:content.title,desc:_.trim(content.descText).indexOf("[")>-1?_.trim(content.descText.substring(0,content.descText.lastIndexOf("["))):_.trim(content.descText),url:content.url,imgSrc:"https://"+app.utils.odwHostSwitch("articles")+img.src,imgAlt:img.alt,profiled:_.trim(_.includes(content.descText,"[Profiled")?/\[(.*?)\]/.exec(content.descText)[0]:"","[]")};collection.push(model)});return collection}})();(function(){app.cogs.headlines.adapters.json=function(data){var collection=[];_.forEach(data,function(obj){var model={category:obj.category,headline:obj.headline,desc:obj.desc,url:obj.url,imgSrc:obj.imgSrc,imgAlt:obj.imgAlt,profiled:obj.profiled};collection.push(model)});return collection}})();(function(){app.cogs.headlines.adapters.W3News=function(data){var collection=[];_.forEach(data,function(obj){content=obj.contentByLang[0];img=obj.imageByLang[0];var model={category:_.includes(content.descText,"[Profiled for all IBM]")?"News for all":"News for you",headline:content.title,desc:_.trim(content.descText).indexOf("[")>-1?_.trim(content.descText.substring(0,content.descText.lastIndexOf("["))):_.trim(content.descText),url:content.url,imgSrc:"https://"+app.utils.odwHostSwitch("articles")+img.src,imgAlt:img.alt,profiled:_.trim(_.includes(content.descText,"[Profiled")?/\[(.*?)\]/.exec(content.descText)[0]:"","[]")};collection.push(model)});return collection}})();(function(){app.cogs.media.adapters.cms=function(data){return data.map(function(obj,index){ext=obj.is_iframe!=="no"?false:obj.video_url.match(/.mp4|.mp3/).length>0?obj.video_url.match(/.mp4|.mp3/)[0].replace(".",""):"mp4";return{media_id:index+1,player_type:obj.player_type,source:obj.source,enable_mobile:obj.enable_mobile,title:obj.title,description:obj.description,start:obj.start||"03/01/2016 00:00:00 AM",end:obj.end||"03/01/2017 00:00:00 AM",poster:obj.poster,ext:ext,url:obj.url,publish_date:obj.publish_date,is_audio:obj.is_audio,fileIcon:obj.fileIcon||"icon-awf-file-text",redirection:obj.redirection,run_time:obj.run_time||"",is_enable:obj.is_enable}})}})();(function(){var is_mobile=_.contains(_.values(awf.util.info.mobile),true);function getFileClass(type){var temp="";var ppt=["ppt","pptx"];var mp3=["mp3"];var pic=["jpg","png","gif"];var video=["mp4","avi","flv","mov","ogg","wmv","wav","m4v","f4v"];var pdf=["pdf"];var word=["doc","docx"];var zip=["zip","rar"];var excel=["xls","xlsx"];var code=["xml","html","js","php","css","scss"];if(typeContainInArr(ppt,type)){temp="icon-awf-file-presentation"}else if(typeContainInArr(mp3,type)){temp="icon-awf-file-unknown"}else if(typeContainInArr(pic,type)){temp="icon-awf-file-image"}else if(typeContainInArr(video,type)){temp="icon-awf-file-unknown"}else if(typeContainInArr(pdf,type)){temp="icon-awf-file-pdf"}else if(typeContainInArr(word,type)){temp="icon-awf-file-text"}else if(typeContainInArr(zip,type)){temp="icon-awf-file-zip"}else if(typeContainInArr(excel,type)){temp="icon-awf-file-spreadsheet"}else if(typeContainInArr(code,type)){temp="icon-awf-file-html"}else{temp="icon-awf-file-unknown"}return temp}function typeContainInArr(arr,value){if(_.indexOf(arr,value)!==-1){return true}return false}function filterExpiredData(datas){var no_expired_datas=[],enable_datas=[],now=(new Date).getTime();_.forEach(datas,function(curr){var expired=false,s,e;if(curr.start){s=new Date(curr.start).getTime();if(now<s){expired=true}}if(curr.end){e=new Date(curr.end).getTime();if(now>e){expired=true}}if(!expired){if(is_mobile){if(curr.enable_mobile==="true"){no_expired_datas.push(curr)}}else{no_expired_datas.push(curr)}}});var preview_video=window.location.href.indexOf("preview_video=true");_.forEach(no_expired_datas,function(item){if(item.is_enable){enable_datas.push(item)}else{if(preview_video!==-1){enable_datas.push(item)}}});_.forEach(enable_datas,function(item,i){item.media_id=i+1});return enable_datas}app.cogs.media.adapters.ecm=function(data){var comms=[];_.forEach(data,function(comm,i){var curr=comm.contentByLang[0].additionalText;if(curr.video_url.indexOf("embed.vp?")>0&&curr.is_iframe==="no"){}else{var ext=curr.is_iframe!=="no"?false:curr.video_url.match(/.mp4|.mp3/).length>0?curr.video_url.match(/.mp4|.mp3/)[0].replace(".",""):"mp4";var id=i+1;var active_flag=true;if("w3n"in window){if(w3n.env.is_live){active_flag=curr.enable_on_prod==="no"?false:true}}comms.push({media_id:id,player_type:curr.is_iframe==="yes"?"iframe":"html5",source:"MediaHub",enable_mobile:curr.enable_mobile,title:curr.title,description:curr.description,start:curr.start,end:curr.end,poster:curr.poster.replace("http://","https://"),ext:ext,url:curr.video_url,publish_date:moment(curr.start||curr.end).format("MMM Do YYYY"),fileIcon:getFileClass(ext),redirection:curr.redirect_url,run_time:curr.run_time||"",is_enable:active_flag})}});return filterExpiredData(comms)}})();(function(){app.cogs.media.adapters.json=function(data){var activeFlag=awf.flags.isActive("odw_pilot.articles");var collection=[];_.forEach(data,function(obj,index){var model={media_id:index+1,player_type:obj.player_type,source:obj.source,enable_mobile:obj.enable_mobile,title:obj.title,description:obj.description,start:obj.start,end:obj.end,poster:obj.poster,ext:obj.ext,url:obj.url,publish_date:obj.publish_date,is_audio:obj.is_audio,fileIcon:obj.fileIcon,redirection:obj.redirection,run_time:obj.run_time||"",is_enable:obj.is_enable};if(activeFlag&&model.poster.indexOf("w3-workplace.ibm.com")>=0){var parts=model.poster.split("w3-workplace.ibm.com");model.poster=parts[0]+app.config.odw_host+parts[1]}collection.push(model)});return collection}})();(function(){app.cogs.places.adapters.cms=function(data){return data}})();(function(){app.cogs.places.adapters.json=function(data){var array=[];if(data.folders){_.forEach(data.folders,function(folder){_.forEach(folder.links,function(link){if(link.config&&link.config.tag&&awf.flags.isActive(link.config.tag)){_.merge(link,link.config.target)}array.push(_.extend(link,{defaultFeatured:link.featured,dataSource:"json",folder:folder.id,folderLabel:folder.label?folder.label:"root",ifFolder:false,type:"popular",popular_id:link.id}))})})}else{_.forEach(data,function(link){if(link.config&&link.config.tag&&awf.flags.isActive(link.config.tag)){_.merge(link,link.config.target)}array.push(_.extend(link,{defaultFeatured:link.featured,dataSource:"json",ifFolder:false,type:"popular",popular_id:link.id}))})}return array}})();(function(){app.cogs.places.adapters.userConfig=function(data){var array=[];if(data.mediumcard){_.forEach(data.mediumcard[0].links,function(link){array.push(_.extend(link,{featured:true,defaultFeatured:true,dataSource:"mediumcard",ifFolder:false,classname:app.cogs.places.icon_mapping[link.icon]?app.cogs.places.icon_mapping[link.icon]:link.icon}))})}if(data.personal){_.forEach(data.personal[0].folders,function(folder){if(_.isEmpty(folder.links)){}else{_.forEach(folder.links,function(link){array.push(_.extend(link,{dataSource:"personal",folder:folder.id,folderLabel:folder.label,ifFolder:false,classname:app.cogs.places.icon_mapping[link.icon]?app.cogs.places.icon_mapping[link.icon]:link.icon}))})}})}return array}})();(function(){app.cogs.stock.adapters.json=function(data){return{name:data.name,oriTime:data.time,quoteTime:moment(data.time).format("H:mm MMMM D, YYYY"),upDown:data.upDown,i18n_price:"[aria-label]app.cogs.stock.price."+data.upDown,price:data.price,changeDols:data.changeDols,changeInPercentage:data.changeInPercentage,prevClose:data.prevClose,openPrice:data.openPrice,dayHigh:data.dayHigh,dayLow:data.dayLow,volume:data.volume,yield:data.yield,indicator:data.indicator}}})();(function(){var priceChange=function(changeDols){switch(true){case changeDols<0:return"down";case changeDols===0:return"flat";case changeDols>0:return"up";default:return"flat"}};var priceIndicator=function(changeDols){var change=priceChange(changeDols);return"icon-awf-arrow-"+change};app.cogs.stock.adapters.odw=function(data){data=data.stockQuotes[0];return{name:"IBM Stock",oriTime:data.retrieveTime.time,quoteTime:moment(data.retrieveTime.time).format("H:mm MMMM D, YYYY"),upDown:priceChange(data.changeDols),i18n_price:"[aria-label]app.cogs.stock.price."+priceChange(data.changeDols),price:data.price.toFixed(2),changeDols:_.trim(data.changeDols.toFixed(2),"-",""),changeInPercentage:_.trim(data.changeInPercentage.toFixed(2),"-",""),prevClose:data.prevClose.toFixed(2),openPrice:data.openPrice.toFixed(2),dayHigh:data.dayHigh.toFixed(2),dayLow:data.dayLow.toFixed(2),volume:data.volume.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),yield:data.yield,indicator:priceIndicator(data.changeDols)}}})();(function(){var priceChange=function(change){switch(true){case change<0:return"down";case change===0:return"flat";case change>0:return"up";default:return"flat"}};var priceIndicator=function(change){return"icon-awf-arrow-"+change};app.cogs.stock.adapters.yahoo=function(response){var data=response.list.resources[0].resource.fields;return{name:data.symbol,oriTime:data.utctime,quoteTime:moment(data.utctime).format("H:mm MMMM D, YYYY"),upDown:priceChange(data.change),i18n_price:"[aria-label]app.cogs.stock.price."+priceChange(data.change),price:Number(data.price).toFixed(2),changeDols:_.trim(Number(data.change).toFixed(2),"-",""),changeInPercentage:_.trim(Number(data.chg_percent).toFixed(2),"-",""),prevClose:"",openPrice:"",dayHigh:Number(data.day_high).toFixed(2),dayLow:Number(data.day_low).toFixed(2),volume:data.volume.replace(/\B(?=(\d{3})+(?!\d))/g,","),yield:"",indicator:priceIndicator(priceChange(data.change))}}})();(function(){app.cogs.cms.Model=app.base.models.CompositeModel.extend({initSubmodels:function(attrs){var CmsModel=app.serviceModels.cms.Model;var DraftModel=CmsModel.extend({cmsKey:attrs.id});var PublishedModel=CmsModel.extend({cmsKey:attrs.id});this.addModel("draft",new DraftModel).addModel("published",new PublishedModel)},keyedSubModels:true});app.cogs.cms.Collection=app.base.collections.CompositeCollection.extend({comparator:function(m){return m.get("main").id},fetch:function(options){var self=this;options=_.extend(options,{timeout:null});return self.initialCollection.fetch(options).then(function(data){var models=self.initialCollection.toJSON().map(function(model,i){return new self.model(null,{attributes:model}).addModel("main",self.initialCollection.models[i],self.adapter)});self.set(models);self.trigger("sync");return data})}})})();(function(){var cogName="cms",cog=app.cogs[cogName],label="Content Management",InitialCollection=app.serviceModels.cms.Collection.extend({cmsKey:"list"}),adminCollection=new cog.Collection(null,{model:cog.Model,initialCollection:InitialCollection}),adminMedium=new cog.views.Medium({collection:adminCollection}),adminParentFriends,selectedCog=new app.base.models.BaseModel({id:null}),adminLarge=new cog.views.Large({model:selectedCog,dataCollection:adminCollection}),extension={getSelectedCogId:function(){return selectedCog.get("id")},getAdminParentFriendsStatus:function(){},changeActiveCog:function(data,opts){selectedCog.set(data,opts)},flipUpActiveCog:function(){this.changeActiveCog({largeCardActive:true})},highlightCog:function(cogId){adminMedium.trigger("highlightCog",cogId)},highlightSelectedCog:function(){var id=selectedCog.get("id");if(!id)this.defaultHighlight();this.highlightCog(id)},defaultHighlight:function(){var id=this.findDefaultCog();this.changeActiveCog({id:id,largeCardActive:false});this.highlightCog(id)},setDefaultCog:function(){this.changeActiveCog({id:this.findDefaultCog(),largeCardActive:true})},findDefaultCog:function(){return adminCollection.toJSON().filter(function(m){return Object.keys(app.formSchemas).indexOf(m.main.id)!==-1})[0].main.id},switchToLarge:function(cogId){this.flipUpActiveCog();adminParentFriends.flipCard()},destroyBanner:function(){adminLarge.handleBannerDestroy()}};awf.app.registerCog("cms",{test:true,flag:"cogs.cms",setup:function(){for(var key in extension){if(extension.hasOwnProperty(key)){this[key]=extension[key].bind(this)}}},views:{mini:{flag:"cogs.cms.mini",label:label,icon:"icon-awf-pencil-square",render:function(){adminCollection.fetch().then(this.setDefaultCog)}},medium:{label:label,flag:"cogs.cms.medium",init:function(){adminMedium.on("rendered",this.highlightSelectedCog);adminMedium.on("changeActiveCog",this.changeActiveCog);adminMedium.on("editCog",this.switchToLarge)},render:function($container,parentFriends){if(adminMedium.$el!==$container)adminMedium.setElement($container);if(adminParentFriends!==parentFriends)adminParentFriends=parentFriends;adminCollection.fetch()},destroy:function(){adminMedium.off("rendered",this.highlightSelectedCog);adminMedium.off("changeActiveCog",this.changeActiveCog);adminMedium.off("editCog",this.switchToLarge)}},large:{label:label,flag:"cogs.cms.large",render:function($container){if(adminLarge.$el!==$container)adminLarge.setElement($container);var filtered=adminCollection.filter(function(m){return m.get("main").id===selectedCog.get("id")});adminLarge.render()},destroy:function(){this.destroyBanner()}}}})})();(function(){var ItemWithArrows=Backbone.Form.editors.List.ItemWithArrows;app.formSchemas={headlines:{stories:{type:"CustomList",itemType:"Object",itemToString:function(data){return data.headline},itemClass:ItemWithArrows,subSchema:{headline:{type:"Text",title:"title"},url:"Text",profiled:{type:"Text",title:"target audience",fieldClass:"short-textbox"},desc:{type:"TextArea",title:"description"},imgSrc:{type:"Text",title:"image source"},imgAlt:{type:"Text",title:"image alternate text"},category:{type:"Text",fieldClass:"short-textbox"}}}},media:{videos:{type:"CustomList",itemType:"Object",itemToString:function(data){return data.title},itemClass:ItemWithArrows,subSchema:{title:"Text",url:"Text",description:"TextArea",redirection:"Text",publish_date:{type:"DatePicker",title:"publish date"},player_type:{type:"Select2",title:"player type",config:{minimumResultsForSearch:Infinity},options:["HTML5","iframe"]},poster:{type:"Text",title:"video thumbnail"},source:{type:"Text",title:"video source",fieldClass:"short-textbox"},run_time:{type:"Text",title:"video time",fieldClass:"short-textbox"},enable_mobile:{type:"Checkbox",title:"enable on mobile"},is_enable:{type:"Checkbox",title:"enable video"}}}},places:{places:{type:"CustomList",itemType:"Object",itemToString:function(data){return data.title},itemClass:ItemWithArrows,subSchema:{title:"Text",url:"Text",description:{type:"TextArea",fieldClass:"short-textbox"},classname:{type:"Text",title:"icon classname",fieldClass:"short-textbox"},featured:"Checkbox",tags:{type:"List",fieldClass:"add-tags"}}}},footer:{links:{type:"CustomList",itemType:"Object",itemToString:function(data){return data.text},itemClass:ItemWithArrows,subSchema:{text:{type:"Text",title:"Title"},url:"Text",target:{type:"Select2",title:"link target",config:{minimumResultsForSearch:Infinity},options:[{label:"Same Window",val:""},{label:"New Window",val:"_blank"}]}}}}}})();(function(){var cog_name="form";awf.app.registerCog(cog_name,{test:true,flag:"cogs."+cog_name,setup:function(){},views:{mini:{flag:"cogs."+cog_name+".mini",render:function($container,parent_friends){}},medium:{flag:"cogs."+cog_name+".medium",label:"Form example",render:function($container,parent_friends){var User=Backbone.Model.extend({schema:{title:{type:"durationpicker",title:"Duration",validators:["required","duration"]},category:{type:"text",title:"Event type",validators:["required"]},address:{type:"text",title:"Address",validators:["required"]}}});var instance=new User({category:"test2",address:"test3"});var form=new app.form.base({model:instance});$container.append(form.render().el)}},large:{config:"cogs."+cog_name+".large",label:"Form example",size:{width:724,height:650},render:function($container,parent_friends){this.form=new app.form.base({schema:{date:{type:"text",title:"Date",i18n_label:"app.cogs.form.date",validators:["required","number"]},title:{type:"text",title:"Item or event name",i18n_label:"app.cogs.form.title",validators:["required"],col:2},name:{type:"text",title:"Name",i18n_label:"app.cogs.form.name",validators:["required"],col:2},category:{type:"text",title:"Event url",validators:["required","url"],col:2},address:{type:"text",title:"Address",i18n_label:"app.cogs.form.address",validators:["required","email"]},country:{type:"select",title:"Country",options:["us","uk","cn"],validators:["required"],editorTrigger:function(editor,event){var options=["1","2","3"];editor.trigger("set-options",options)},editorCallback:function(editor,event){}},members:{type:"select",title:"Members",validators:["required"],editorTrigger:function(editor,event){var options=["1","2","3"];editor.trigger("set-options",options)},editorCallback:function(editor,event){}},datapicker:{type:"datepicker",title:"Date Picker",validators:["required"],plugin_options:{dateFormat:"yy/mm/dd",maxDate:10}},datepicker:{type:"datepicker",title:"Validate Date Picker",validators:["required","datepicker","presentday"]},radios:{type:"radio",options:[{label:"Yes - I'm aware of Blue Matching, but I'm not looking for a new position right now.",val:"Yes - Not looking"},{labelHTML:"Yes - But I'm planning on using <b>other</b> methods for job matching.",val:"Yes - Other"},{label:"No - I have not heard of Blue Matching.",val:"No"}]},comment:{type:"textarea",title:"Comments",validators:["required","characterCount"]}},submitButton:"Save",resetButton:"Reset",cancelButton:"Cancel"});this.form.on("submit",function(event,form){console.log("submit event",event);console.log("form.model",form.model.toJSON())});this.form.on("cancel",function(event,form){console.log("cancel event",event);console.log("form.model",form.model.toJSON())});this.form.on("reset",function(event,form,fields){console.log("reset event",event);console.log("form.model",form.model.toJSON());if(fields)console.log("form.fields",fields)});var wrap=$('<div style="width:100%; height: 100%; overflow: auto;"></div>');$container.append(wrap.append(this.form.render().el))},destroy:function(){if(this.form){this.form.remove()}}}}})})();(function(){var cog_name="headlines";awf.app.registerCog(cog_name,{test:true,flag:"cogs."+cog_name,setup:function(){var service,card;switch(awf.app.experience.id){case"manager-hub":case"manager-hub-protean":service=app.content.cards["manager-news"];card="manager-news";break;case"ibmer-hub":case"ibmer-hub-protean":service=app.content.cards["ibmer-news"];card="ibmer-news";break;default:service=app.content.cards.headlines;card="headlines";break}if(service){app.cogs.headlines.collection=new app.base.collections.CompositeCollection(null,{model:app.serviceModels.news[service.current_service],adapter:app.cogs.headlines.adapters[service.current_service]})}this.content=app.content.cards[card];this.metrics=app.utils.createMetricTag({group:awf.app.id});this.model=app.cogs.headlines.collection;this.model.params={cog_id:cog_name,redirect:this.content.redirect}},teardown:function(){},views:{mini:{flag:"cogs."+cog_name+".mini",label:"Headlines",icon:"icon-youribm-news",i18n_label:"app.cogs.headlines.label",render:function($container,mini_methods){}},medium:{flag:"cogs."+cog_name+".medium",label:"Headlines",row_span:1,i18n_label:"app.cogs.headlines.label",render:function($container,medium_methods){medium_methods.setRowSpan(this.content.row_span);var view=new app.cogs.headlines.views.medium({el:$container,collection:this.model,medium_methods:medium_methods,metrics:this.metrics});this.model.fetch()}},large:{flag:"cogs."+cog_name+".large",label:"Headlines",i18n_label:"app.cogs.headlines.label",render:function($container,large_methods){this.metrics.cardEvent("flip-up",cog_name+":large");var view=new app.cogs.headlines.views.large({el:$container,collection:this.model,large_methods:large_methods,metrics:this.metrics});this.model.fetch()}}}})})();(function(){var cog_name="media";awf.app.registerCog(cog_name,{test:true,flag:"cogs."+cog_name,setup:function(){var service=app.content.cards.media;if(service){app.cogs.media.collection=new app.base.collections.CompositeCollection(null,{model:app.serviceModels.media[service.current_service],adapter:app.cogs.media.adapters[service.current_service]})}this.content=app.content.cards[cog_name];this.metrics=app.utils.createMetricTag({group:awf.app.id});this.model=app.cogs.media.collection},views:{mini:{flag:"cogs."+cog_name+".mini",label:"Media",i18n_label:"app.cogs.media.label",icon:"icon-awf-media-audio",render:function($container,mini_methods){}},medium:{flag:"cogs."+cog_name+".medium",label:"Media",i18n_label:"app.cogs.media.label",render:function($container,medium_methods){var view=new app.cogs.media.views.medium({el:$container,collection:this.model,medium_methods:medium_methods});this.model.fetch()}},large:{flag:"cogs."+cog_name+".large",label:"Media",i18n_label:"app.cogs.media.label",render:function($container,large_methods){this.metrics.cardEvent("flip-up",cog_name+":large");var view=new app.cogs.media.views.large({el:$container,collection:this.model,large_methods:large_methods});this.model.fetch()}}}})})();(function(){var cog_name="places";awf.app.registerCog(cog_name,{test:true,flag:"cogs."+cog_name,setup:function(){var service=app.content.cards.places;if(service){var feature_flag=false;if(awf.flags.isActive("cogs.places.user-config")&&(awf.flags.isActive("cogs.places.personal-link")||awf.flags.isActive("squads.echo"))){feature_flag=true}app.serviceModels.places.compositeModel=app.base.models.CompositeModel.extend({initialize:function(attributes,options){if(!options)options={};app.base.models.CompositeModel.prototype.initialize.call(this,{},options)},initSubmodels:function(attrs){if(service.current_service instanceof Array){_.forEach(service.current_service,function(name){var instance=new app.serviceModels.places[name];if(instance instanceof app.base.collections.BaseCollection){this.addCollection(name,instance,app.cogs.places.adapters[name])}else{this.addModel(name,instance,app.cogs.places.adapters[name])}}.bind(this))}else{this.addModel(service.current_service,new app.serviceModels.places[service.current_service],app.cogs.places.adapters[service.current_service])}},fetchAll:function(options){var def=$.Deferred();this.fetchJson().done(function(){this.fetchMediumcard().done(function(){this.fetchPersonal().always(function(){this.merge();def.resolve()}.bind(this))}.bind(this)).fail(function(){this.fetchPreference().done(function(){this.fetchPersonal().always(function(){this.merge();def.resolve()}.bind(this))}.bind(this)).fail(function(){this.merge();def.resolve()}.bind(this))}.bind(this))}.bind(this)).fail(def.reject);return def},fetchLinksInMediumView:function(){var def=$.Deferred();this.fetchMediumcard().done(function(){this.fetchJson(true).done(function(){def.resolve()}.bind(this))}.bind(this)).fail(function(){this.fetchJson().done(function(){this.fetchPreference().done(function(){this.fetchPersonal().always(function(){this.merge();def.resolve()}.bind(this))}.bind(this)).fail(function(){this.merge();def.resolve()}.bind(this))}.bind(this)).fail(def.reject)}.bind(this));return def},fetchPreference:function(done){var def=$.Deferred();var preference=awf.construct.getOrCreate("featured-popular-links");preference.fetch(-1).done(function(){var data=preference.value;this.set("preference",data?data:[]);if(done){this.merge()}this.trigger("preference:fetch:done");this.trigger("sortable");def.resolve()}.bind(this));setTimeout(function(){if(def.state()=="pending"){this.trigger("_error",{type:"fetch-preference-fail"});def.reject()}}.bind(this),5e3);return def},fetchUserConfig:function(done){var def=$.Deferred();var userConfigModel=this.getSubStructure("userConfig");if(userConfigModel&&feature_flag){userConfigModel.fetch().done(function(){this.set("userConfig",new app.cogs.places.adapters.userConfig(userConfigModel.toJSON()));if(done){this.merge()}def.resolve()}.bind(this)).fail(function(){this.trigger("_error",{type:"fetch-personal-fail"})}.bind(this))}else{def.reject()}return def},fetchJson:function(done){var def=$.Deferred();var jsonModel=this.getSubStructure("json");if(jsonModel){var json=jsonModel.toJSON();if(_.isEmpty(json)){jsonModel.fetch({dataSource:"folder"}).done(function(res){this.set("json",jsonModel.toJSON());if(done){this.merge()}def.resolve(res)}.bind(this)).fail(function(){this.trigger("_error",{type:"fetch-json-fail"});def.reject()}.bind(this))}else{if(done){this.merge()}def.resolve()}}else{def.resolve()}return def},fetchMediumcard:function(done){var def=$.Deferred();var userConfigModel=this.getSubStructure("userConfig");if(userConfigModel&&feature_flag){var mediumcardModel=userConfigModel.getSubStructure("mediumcard");var json=userConfigModel.toJSON().mediumcard;if(_.isEmpty(json)){mediumcardModel.fetch().done(function(){var mediumcard_data=userConfigModel.toJSON().mediumcard;if(mediumcard_data){this.set("mediumcard",mediumcard_data[0].links);if(done){this.merge()}this.trigger("sortable");def.resolve()}else{def.reject()}}.bind(this)).fail(def.reject)}else{if(done){this.merge()}this.set("mediumcard",mediumcardModel.toJSON()[0].links);this.trigger("sortable");def.resolve()}}else{def.reject()}return def},fetchPersonal:function(done){var def=$.Deferred();var userConfigModel=this.getSubStructure("userConfig");if(userConfigModel&&feature_flag){var personalModel=userConfigModel.getSubStructure("personal");var json=personalModel.toJSON();if(_.isEmpty(json)){personalModel.fetch().done(function(){if(!_.isEmpty(personalModel.toJSON())){this.set("personal",new app.cogs.places.adapters.userConfig({personal:personalModel.toJSON()}));if(done){this.merge()}def.resolve();this.trigger("sortable")}else{def.reject()}}.bind(this)).fail(function(res){var status=res.status;switch(status){case 400:this.trigger("sortable");break;default:this.trigger("_error",{type:"fetch-personal-fail"});break}def.reject()}.bind(this))}else{if(done){this.merge()}this.set("mediumcard",personalModel.toJSON()[0].links);this.trigger("sortable");def.resolve()}}else{def.reject()}return def},merge:function(){var featured=[],json_clone,personal_clone;var json=this.get("json");var personal=this.get("personal");var mediumcard=this.get("mediumcard");var preference=this.get("preference");if(mediumcard&&!_.isEmpty(mediumcard)){json_clone=_.map(json,function(link){link.featured=false;link.defaultFeatured=false;return link});personal_clone=_.map(personal,function(link){link.featured=false;link.defaultFeatured=false;return link});_.forEach(mediumcard,function(mediumLink){var jsonLink=_.find(json_clone,{id:mediumLink.id});var extended;if(jsonLink){extended=_.extend(_.cloneDeep(mediumLink),jsonLink,{featured:true,defaultFeatured:true,root:jsonLink.folder})}if(mediumLink.title||extended){featured.push(extended?extended:mediumLink)}_.forEach(json_clone,function(link){if(parseInt(mediumLink.id)==parseInt(link.id)){link.featured=true;link.defaultFeatured=true}});_.forEach(personal_clone,function(link){if(parseInt(mediumLink.id)==parseInt(link.id)){link.featured=true;link.defaultFeatured=true}})})}else if(preference&&!_.isEmpty(preference)){json_clone=_.map(json,function(link){link.featured=false;link.defaultFeatured=false;return link});personal_clone=_.map(personal,function(link){link.featured=false;link.defaultFeatured=false;return link});_.forEach(preference.sort,function(id){_.forEach(json_clone,function(link){if(parseInt(id)==parseInt(link.id)){link.featured=true;link.defaultFeatured=true;featured.push(link)}});_.forEach(personal_clone,function(link){if(parseInt(id)==parseInt(link.id)){link.featured=true;link.defaultFeatured=true;featured.push(link)}})})}else{json_clone=json?json:[];personal_clone=personal?personal:[];featured=_.filter(json,{featured:true})}this.set("featured",featured);_.forEach(_.filter(personal_clone,{type:"popular"}),function(p){_.remove(json_clone,function(j){return p.popular_id===j.id})});this.set("all",_.sortByOrder(json_clone.concat(personal_clone),[function(o){return o.title.toLowerCase()},function(o){return o.featured}],["asc","desc"]))},savePreference:function(value,silent){var def=$.Deferred();var preference=awf.construct.getOrCreate("featured-popular-links");if(awf.construct.ready.state()!=="pending"){preference.setValue(value).save().done(function(){this.set("preference",JSON.parse(value));this.merge();if(!silent){this.trigger("preference:saved")}def.resolve()}.bind(this)).fail(function(){this.trigger("_error",{type:"sort-fail"});def.reject()}.bind(this))}else{def.reject()}return def},savePersonal:function(params){var def=$.Deferred();var personalModel=this.getSubStructure("userConfig").getSubStructure("personal");personalModel.updateLink(params).done(function(res){var mediumcard=this.get("mediumcard");if(mediumcard&&params.link.id!==0){
_.forEach(mediumcard,function(link){if(link.id===params.link.id){link.title=params.link.title;link.url=params.link.url}})}this.set("personal",new app.cogs.places.adapters.userConfig({personal:personalModel.toJSON()}));this.merge();this.trigger("personal:saved");def.resolve(res)}.bind(this)).fail(function(){def.reject()}.bind(this));return def},deletePersonal:function(params,silent){var def=$.Deferred();var userConfigModel=this.getSubStructure("userConfig");if(userConfigModel&&feature_flag){var personalModel=userConfigModel.getSubStructure("personal");personalModel.deleteLink(params).done(function(){this.set("personal",new app.cogs.places.adapters.userConfig({personal:personalModel.toJSON()}));this.merge();if(silent){this.trigger("personal:deleted")}def.resolve()}.bind(this)).fail(def.reject.bind(this))}else{def.reject({message:"inactive"})}return def},saveMediumcard:function(params){var def=$.Deferred();var userConfigModel=this.getSubStructure("userConfig");if(userConfigModel&&feature_flag){var mediumcardModel=userConfigModel.getSubStructure("mediumcard");mediumcardModel.updateLink(params).done(function(res){this.set("mediumcard",userConfigModel.toJSON().mediumcard[0].links);this.merge();this.trigger("mediumcard:saved");def.resolve()}.bind(this)).fail(function(){def.reject({message:"failed"})}.bind(this))}else{def.reject({message:"inactive"})}return def},getFeatured:function(){return _.map(this.toJOSN(),function(item){if(item.featured){return item}})},getFolders:function(datas){var folders=[];datas=datas?datas:this.get("all");_.forOwn(_.groupBy(datas,"folder"),function(value,key){var total_links=value.length;var selected_links=_.filter(value,{featured:true}).length;var top_links_classname=_.map(_.take(value,3),function(link){return link.classname});folders.push({id:key,label:value[0].folderLabel,title:value[0].folderLabel,links:value,total_links:total_links,selected_links:selected_links,top_links_classname:top_links_classname,isFolder:true})});return _.sortBy(folders,function(o){return o.label.toLowerCase()})},refresh:function(model){if(model instanceof app.serviceModels.places.userConfig){var userConfigModel=this.getSubStructure("userConfig");var personalModel=userConfigModel.getSubStructure("personal");var mediumcardModel=userConfigModel.getSubStructure("mediumcard");if(!_.isEmpty(personalModel.toJSON())){this.set("personal",personalModel.toJSON()[0].links)}if(!_.isEmpty(mediumcardModel.toJSON())){this.set("mediumcard",mediumcardModel.toJSON()[0].links)}}this.merge()},sortData:function(){},keyedSubModels:true})}this.content=app.content.cards[cog_name];this.metrics=app.utils.createMetricTag({group:awf.app.id});this.model=new app.serviceModels.places.compositeModel;this.fetchModelData=function(view){var fetch_dfr=$.Deferred();if(awf.user.is_authenticated){if(view.cardSize=="medium"){this.model.fetchLinksInMediumView().done(fetch_dfr.resolve).fail(fetch_dfr.reject)}else{this.model.fetchAll().done(fetch_dfr.resolve).fail(fetch_dfr.reject)}}else{this.model.fetchJson(true).done(fetch_dfr.resolve).fail(fetch_dfr.reject)}return fetch_dfr}},views:{mini:{flag:"cogs."+cog_name+".mini",label:"Places",icon:"icon-youribm-places",render:function($container,mini_methods){if(this.mediumView){this.mediumView.remove()}}},medium:{flag:"cogs."+cog_name+".medium",label:"Places",i18n_label:"app.cogs.places.newlabel",rowspan:2,render:function($container,medium_methods){this.mediumView=new app.cogs.places.views.medium({el:$container,model:this.model,medium_methods:medium_methods,metrics:this.metrics});if(this.mediumView.$el!==$container)this.mediumView.setElement($container);var fetch_dfr=this.fetchModelData(this.mediumView).done(this.mediumView.render.bind(this.mediumView)).always(this.mediumView.hideLoading.bind(this.mediumView));if(fetch_dfr.state()=="pending")this.mediumView.showLoading()},destroy:function(){this.mediumView.remove()}},large:{flag:"cogs."+cog_name+".large",label:"Places",i18n_label:"app.cogs.places.newlabel",render:function($container,large_methods){this.metrics.cardEvent("flip-up",cog_name+":large");this.largeView=new app.cogs.places.views.large({$container:$container,model:this.model,large_methods:large_methods,metrics:this.metrics});var fetch_dfr=this.fetchModelData(this.largeView).done(this.largeView.render.bind(this.largeView)).always(this.largeView.hideLoading.bind(this.largeView));if(fetch_dfr.state()=="pending")this.largeView.showLoading()},destroy:function(){var closedInCache=app.localCache.getData("places:coach-marks:close");if(closedInCache){var placesMedium=awf.app.experience.cogs.places._view_instances[0].$container.find("[data-component=coach-mark]");if(placesMedium){placesMedium.hide()}}this.largeView.remove()}}}})})();(function(){var cog_name="stock";awf.app.registerCog(cog_name,{test:true,flag:"cogs."+cog_name,setup:function(){var service=app.content.cards.stock;if(service){app.cogs.stock.model=new app.base.models.CompositeModel(cog_name,{initSubmodels:function(){this.addModel(null,new app.serviceModels.stock[service.current_service],app.cogs.stock.adapters[service.current_service])}})}this.content=app.content.cards[cog_name];this.metrics=app.utils.createMetricTag({group:awf.app.id});this.model=app.cogs.stock.model},views:{mini:{flag:"cogs."+cog_name+".mini",label:"Stock",i18n_label:"app.cogs.stock.label",icon:"icon-youribm-chart-line",render:function($container,mini_methods){var view=new app.cogs.stock.views.Mini({el:$container,model:this.model,mini_methods:mini_methods});this.model.fetch()}},medium:{flag:"cogs."+cog_name+".medium",label:"Stock",i18n_label:"app.cogs.stock.label",render:function($container,medium_methods){var view=new app.cogs.stock.views.Medium({el:$container,model:this.model});this.model.fetch()}},large:{flag:"cogs."+cog_name+".large",label:"Stock",i18n_label:"app.cogs.stock.label",render:function($container,large_methods){this.metrics.cardEvent("flip-up",cog_name+":large");var view=new app.cogs.stock.views.Large({el:$container,model:this.model});this.model.fetch()}}}})})();awf.registerLocalSearchChannel("awf-icons",{bucket:"awf-icons",src:"data/json/awf-icons.json",flag:"squads",limit:5,map:function(result){var title=result.replace(/-/g," "),description="icon-"+result;return{data:{title:title,description:description,image:'<em class="'+description+'" style="font-size: 25px; line-height: 32px;"></em>',url:"http://awf.w3ibm.mybluemix.net/awf/fonts/preview.html"}}}});(function(){var search_api=_.template("http://w3-03.ibm.com/search/do/search?#qt={{query}}&v=17"),url="data/json/popular-links.json",ls_key="app:command:open:tools",register_once=false,new_model=null,limit=5,list=[];function setHistory(text){var history=awf.util.getStoredObject(ls_key)||[];_.remove(history,function(url){return url==text});history.unshift(text);history=history.slice(0,3);awf.util.setStoredObject(ls_key,history)}function parseHistory(urls){var parsed=[];_.forEach(urls,function(url){parsed=parsed.concat(_.filter(list,_.matches({url:url})))});parsed=_.map(parsed,parseData);return parsed}function openUrl(url){setHistory(url);window.open(url,"_blank")}function openSearchService(text){window.open(search_api({query:text}),"_blank")}function handle(text){if(!_.isEmpty(text)){var items=collectData(text);if(items.length){openUrl(items[0].url)}else{openSearchService(text)}}}function parseData(item){return{data:{title:_.isUndefined(item.title)?"":item.title,description:_.isUndefined(item.description)?"":item.description,on_click:function(){openUrl(item.url)}}}}function limitData(filtered){var limited=_.slice(filtered,0,limit);return _.map(limited,parseData)}function fetchFail(er,dfr){dfr.reject({error:er,msg:"lookup failed"})}function collectData(term){var filtered=absoluteMatch(term);if(_.isEmpty(filtered)){filtered=aheadMatch(term)}if(_.isEmpty(filtered)){filtered=partMatch(term)}return filtered}function absoluteMatch(term){var result=_.filter(list,_.matches({title:_.capitalize(term)}));if(_.isEmpty(result)){result=_.filter(list,_.matches({title:term.toLowerCase()}))}if(_.isEmpty(result)){result=_.filter(list,_.matches({title:term.toUpperCase()}))}return result}function aheadMatch(term){result=_.filter(list,function(item){return item.title.toLowerCase().indexOf(term.toLowerCase())===0});return result}function partMatch(term){result=_.filter(list,function(item){return _.contains(item.title.toLowerCase(),term.toLowerCase())});return result}function fetchJson(dfr){$.ajax({url:url,dataType:"json"}).done(function(response){dfr.resolve(response)}).fail(function(er){fetchFail(er,dfr)})}function setResults(text){var results=[{data:{title:"Open to:",description:text,on_click:function(){handle(text)}}}];var fileterd;if(_.isEmpty(text)){var history=awf.util.getStoredObject(ls_key)||[];var parsed=parseHistory(history);fileterd=limitData(list);fileterd=parsed.concat(fileterd);fileterd=_.uniq(fileterd,"data.title")}else{fileterd=limitData(collectData(text))}results=results.concat(fileterd);return results}awf.app.on("change:experience",function(){if(awf.flags.isActive("squads.bravo")&&!register_once){register_once=true;var dfr=$.Deferred();if(_.has(awf.app.registered_cogs,"places")){var is_exist=false;_.forEach(awf.app.registered_experiences,function(val,key){if(_.contains(awf.app.registered_experiences[key].cogs,"places")&&awf.app.experience.id===key){is_exist=true}});if(is_exist){var model=awf.app.experience.cogs.places.data.model;model.on("personal:saved",function(){var resolution=model.get("all");list=resolution});awf.app.experience.cogs.places.data.fetchModelData({}).done(function(results){var resolution=model.get("all");dfr.resolve(resolution)})}else{if(new_model){var resolution=new_model.get("all");dfr.resolve(resolution)}else{if(app.serviceModels.places.compositeModel){new_model=new app.serviceModels.places.compositeModel;if(awf.user.is_authenticated){new_model.fetchAll().done(function(){var resolution=new_model.get("all");dfr.resolve(resolution)}).fail(function(er){fetchFail(er,dfr)})}else{new_model.fetchJson(true).done(function(){var resolution=new_model.get("all");dfr.resolve(resolution)}).fail(function(er){fetchFail(er,dfr)})}}else{fetchJson(dfr)}}}}else{fetchJson(dfr)}dfr.done(function(tools){list=tools;awf.registerCommandChannel("open",{trigger:"open",aliases:["o"],description:"Open tools",example:"checkpoint",results:setResults,handler:handle})})}})})();(function(){var url={query:"//w3-services1.w3-969.ibm.com/myw3/unified-profile/v1/search/user",profile:"http://w3.ibm.com/bluepages/profile.html",image:"//w3-services1.w3-969.ibm.com/myw3/unified-profile-photo/v1/image/"},image_size=24;awf.registerSearchChannel("faces",{bucket:"people",flag:"search.faces",onQuery:function(term){var dfr=$.Deferred(),email=awf.user.is_authenticated?awf.user.info.cnum:"";$.ajax({url:url.query+awf.util.urlParams({searchConfig:"optimized_search",query:term,userId:email,rows:5,timeout:2e4,threshold:0}),jsonp:"callback",dataType:"json"}).done(function(response){var resolution=_.map(response.results,function(item){var email=item.preferredIdentity?'<a href="mailto:'+item.preferredIdentity+'" title="'+item.preferredIdentity+'">'+item.preferredIdentity+"</a>":"",office=item.telephone_office?" | +"+'<a title="Click to call" href="tel:'+item.telephone_office+'">'+item.telephone_office+"</a>":"",mobile=item.telephone_mobile?" | +"+'<a title="Click to call" href="tel:'+item.telephone_mobile+'">'+item.telephone_mobile+"</a> (mobile)":"",role=item.role?item.role+"<br>":"",desc=role+email+office+mobile;return{data:{title:item.nameDisplay?item.nameDisplay:item.nameFull,email:item.preferredIdentity,description:desc,url:url.profile+awf.util.urlParams({uid:item.uid}),image:'<div class="image-circle -background-alt" style="width: '+image_size+"px; height: "+image_size+"px; background-image: url("+url.image+item.uid+awf.util.urlParams({s:image_size,def:"avatar"})+');"></div>'}}});dfr.resolve(resolution)}).fail(function(er){dfr.reject({error:er,msg:"lookup failed"})});return dfr.promise()}})})();(function(){awf.registerLocalSearchChannel("popular-links",{flag:"search.popular-links",bucket:"topsearch",src:"data/json/popular-links.json",limit:3,map:function(result){return{data:{title:_.isUndefined(result.title)?"":result.title,description:_.isUndefined(result.description)?"":result.description,image:_.isUndefined(result.classname)?"":'<em class="'+result.classname+'" style="font-size: 25px; line-height: 32px;"></em>',url:_.isUndefined(result.url)?"":result.url,tags:_.isUndefined(result.tags)?"":result.tags}}}})})();!function(a){"use strict";function b(a){this.owner=a}function c(a,b){if(Object.create)b.prototype=Object.create(a.prototype);else{var c=function(){};c.prototype=a.prototype,b.prototype=new c}return b.prototype.constructor=b,b}function d(a){var b=this.internal=new e(this);b.loadConfig(a),b.beforeInit(a),b.init(),b.afterInit(a),function c(a,b,d){Object.keys(a).forEach(function(e){b[e]=a[e].bind(d),Object.keys(a[e]).length>0&&c(a[e],b[e],d)})}(h,this,this)}function e(b){var c=this;c.d3=a.d3?a.d3:"undefined"!=typeof require?require("d3"):void 0,c.api=b,c.config=c.getDefaultConfig(),c.data={},c.cache={},c.axes={}}function f(a){b.call(this,a)}function g(a,b){function c(a,b){a.attr("transform",function(a){return"translate("+Math.ceil(b(a)+u)+", 0)"})}function d(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})}function e(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function f(a){var b,c,d=[];if(a.ticks)return a.ticks.apply(a,n);for(c=a.domain(),b=Math.ceil(c[0]);b<c[1];b++)d.push(b);return d.length>0&&d[0]>0&&d.unshift(d[0]-(d[1]-d[0])),d}function g(){var a,c=p.copy();return b.isCategory&&(a=p.domain(),c.domain([a[0],a[1]-1])),c}function h(a){var b=m?m(a):a;return"undefined"!=typeof b?b:""}function i(a){if(A)return A;var b={h:11.5,w:5.5};return a.select("text").text(h).each(function(a){var c=this.getBoundingClientRect(),d=h(a),e=c.height,f=d?c.width/d.length:void 0;e&&f&&(b.h=e,b.w=f)}).text(""),A=b,b}function j(c){return b.withoutTransition?c:a.transition(c)}function k(m){m.each(function(){function m(a,c){function d(a,b){f=void 0;for(var h=1;h<b.length;h++)if(" "===b.charAt(h)&&(f=h),e=b.substr(0,h+1),g=U.w*e.length,g>c)return d(a.concat(b.substr(0,f?f:h)),b.slice(f?f+1:h));return a.concat(b)}var e,f,g,i=h(a),j=[];return"[object Array]"===Object.prototype.toString.call(i)?i:((!c||0>=c)&&(c=X?95:b.isCategory?Math.ceil(F(G[1])-F(G[0]))-12:110),d(j,i+""))}function n(a,b){var c=U.h;return 0===b&&(c="left"===q||"right"===q?-((V[a.index]-1)*(U.h/2)-3):".71em"),c}function v(a){var b=p(a)+(o?0:u);return L[0]<b&&b<L[1]?r:0}function w(a){return a?a>0?"start":"end":"middle"}function x(a){return a?"rotate("+a+")":""}function y(a){return a?8*Math.sin(Math.PI*(a/180)):0}function z(a){return a?11.5-2.5*(a/15)*(a>0?1:-1):W}var A,B,C,D=k.g=a.select(this),E=this.__chart__||p,F=this.__chart__=g(),G=t?t:f(F),H=D.selectAll(".tick").data(G,F),I=H.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),J=H.exit().remove(),K=j(H).style("opacity",1),L=p.rangeExtent?p.rangeExtent():e(p.range()),M=D.selectAll(".domain").data([0]),N=(M.enter().append("path").attr("class","domain"),j(M));I.append("line"),I.append("text");var O=I.select("line"),P=K.select("line"),Q=I.select("text"),R=K.select("text");b.isCategory?(u=Math.ceil((F(1)-F(0))/2),B=o?0:u,C=o?u:0):u=B=0;var S,T,U=i(D.select(".tick")),V=[],W=Math.max(r,0)+s,X="left"===q||"right"===q;S=H.select("text"),T=S.selectAll("tspan").data(function(a,c){var d=b.tickMultiline?m(a,b.tickWidth):[].concat(h(a));return V[c]=d.length,d.map(function(a){return{index:c,splitted:a}})}),T.enter().append("tspan"),T.exit().remove(),T.text(function(a){return a.splitted});var Y=b.tickTextRotate;switch(q){case"bottom":A=c,O.attr("y2",r),Q.attr("y",W),P.attr("x1",B).attr("x2",B).attr("y2",v),R.attr("x",0).attr("y",z(Y)).style("text-anchor",w(Y)).attr("transform",x(Y)),T.attr("x",0).attr("dy",n).attr("dx",y(Y)),N.attr("d","M"+L[0]+","+l+"V0H"+L[1]+"V"+l);break;case"top":A=c,O.attr("y2",-r),Q.attr("y",-W),P.attr("x2",0).attr("y2",-r),R.attr("x",0).attr("y",-W),S.style("text-anchor","middle"),T.attr("x",0).attr("dy","0em"),N.attr("d","M"+L[0]+","+-l+"V0H"+L[1]+"V"+-l);break;case"left":A=d,O.attr("x2",-r),Q.attr("x",-W),P.attr("x2",-r).attr("y1",C).attr("y2",C),R.attr("x",-W).attr("y",u),S.style("text-anchor","end"),T.attr("x",-W).attr("dy",n),N.attr("d","M"+-l+","+L[0]+"H0V"+L[1]+"H"+-l);break;case"right":A=d,O.attr("x2",r),Q.attr("x",W),P.attr("x2",r).attr("y2",0),R.attr("x",W).attr("y",0),S.style("text-anchor","start"),T.attr("x",W).attr("dy",n),N.attr("d","M"+l+","+L[0]+"H0V"+L[1]+"H"+l)}if(F.rangeBand){var Z=F,$=Z.rangeBand()/2;E=F=function(a){return Z(a)+$}}else E.rangeBand?E=F:J.call(A,F);I.call(A,E),K.call(A,F)})}var l,m,n,o,p=a.scale.linear(),q="bottom",r=6,s=3,t=null,u=0,v=!0;return b=b||{},l=b.withOuterTick?6:0,k.scale=function(a){return arguments.length?(p=a,k):p},k.orient=function(a){return arguments.length?(q=a in{top:1,right:1,bottom:1,left:1}?a+"":"bottom",k):q},k.tickFormat=function(a){return arguments.length?(m=a,k):m},k.tickCentered=function(a){return arguments.length?(o=a,k):o},k.tickOffset=function(){return u},k.tickInterval=function(){var a,c;return b.isCategory?a=2*u:(c=k.g.select("path.domain").node().getTotalLength()-2*l,a=c/k.g.selectAll("line").size()),a===1/0?0:a},k.ticks=function(){return arguments.length?(n=arguments,k):n},k.tickCulling=function(a){return arguments.length?(v=a,k):v},k.tickValues=function(a){if("function"==typeof a)t=function(){return a(p.domain())};else{if(!arguments.length)return t;t=a}return k},k}var h,i,j,k={version:"0.4.11"};k.generate=function(a){return new d(a)},k.chart={fn:d.prototype,internal:{fn:e.prototype,axis:{fn:f.prototype}}},h=k.chart.fn,i=k.chart.internal.fn,j=k.chart.internal.axis.fn,i.beforeInit=function(){},i.afterInit=function(){},i.init=function(){var a=this,b=a.config;if(a.initParams(),b.data_url)a.convertUrlToData(b.data_url,b.data_mimeType,b.data_headers,b.data_keys,a.initWithData);else if(b.data_json)a.initWithData(a.convertJsonToData(b.data_json,b.data_keys));else if(b.data_rows)a.initWithData(a.convertRowsToData(b.data_rows));else{if(!b.data_columns)throw Error("url or json or rows or columns is required.");a.initWithData(a.convertColumnsToData(b.data_columns))}},i.initParams=function(){var a=this,b=a.d3,c=a.config;a.clipId="c3-"+ +new Date+"-clip",a.clipIdForXAxis=a.clipId+"-xaxis",a.clipIdForYAxis=a.clipId+"-yaxis",a.clipIdForGrid=a.clipId+"-grid",a.clipIdForSubchart=a.clipId+"-subchart",a.clipPath=a.getClipPath(a.clipId),a.clipPathForXAxis=a.getClipPath(a.clipIdForXAxis),a.clipPathForYAxis=a.getClipPath(a.clipIdForYAxis),a.clipPathForGrid=a.getClipPath(a.clipIdForGrid),a.clipPathForSubchart=a.getClipPath(a.clipIdForSubchart),a.dragStart=null,a.dragging=!1,a.flowing=!1,a.cancelClick=!1,a.mouseover=!1,a.transiting=!1,a.color=a.generateColor(),a.levelColor=a.generateLevelColor(),a.dataTimeFormat=c.data_xLocaltime?b.time.format:b.time.format.utc,a.axisTimeFormat=c.axis_x_localtime?b.time.format:b.time.format.utc,a.defaultAxisTimeFormat=a.axisTimeFormat.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%-m/%-d",function(a){return a.getDay()&&1!==a.getDate()}],["%-m/%-d",function(a){return 1!==a.getDate()}],["%-m/%-d",function(a){return a.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),a.hiddenTargetIds=[],a.hiddenLegendIds=[],a.focusedTargetIds=[],a.defocusedTargetIds=[],a.xOrient=c.axis_rotated?"left":"bottom",a.yOrient=c.axis_rotated?c.axis_y_inner?"top":"bottom":c.axis_y_inner?"right":"left",a.y2Orient=c.axis_rotated?c.axis_y2_inner?"bottom":"top":c.axis_y2_inner?"left":"right",a.subXOrient=c.axis_rotated?"left":"bottom",a.isLegendRight="right"===c.legend_position,a.isLegendInset="inset"===c.legend_position,a.isLegendTop="top-left"===c.legend_inset_anchor||"top-right"===c.legend_inset_anchor,a.isLegendLeft="top-left"===c.legend_inset_anchor||"bottom-left"===c.legend_inset_anchor,a.legendStep=0,a.legendItemWidth=0,a.legendItemHeight=0,a.currentMaxTickWidths={x:0,y:0,y2:0},a.rotated_padding_left=30,a.rotated_padding_right=c.axis_rotated&&!c.axis_x_show?0:30,a.rotated_padding_top=5,a.withoutFadeIn={},a.intervalForObserveInserted=void 0,a.axes.subx=b.selectAll([])},i.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},i.initWithData=function(a){var b,c,d=this,e=d.d3,g=d.config,h=!0;d.axis=new f(d),d.initPie&&d.initPie(),d.initBrush&&d.initBrush(),d.initZoom&&d.initZoom(),g.bindto?"function"==typeof g.bindto.node?d.selectChart=g.bindto:d.selectChart=e.select(g.bindto):d.selectChart=e.selectAll([]),d.selectChart.empty()&&(d.selectChart=e.select(document.createElement("div")).style("opacity",0),d.observeInserted(d.selectChart),h=!1),d.selectChart.html("").classed("c3",!0),d.data.xs={},d.data.targets=d.convertDataToTargets(a),g.data_filter&&(d.data.targets=d.data.targets.filter(g.data_filter)),g.data_hide&&d.addHiddenTargetIds(g.data_hide===!0?d.mapToIds(d.data.targets):g.data_hide),g.legend_hide&&d.addHiddenLegendIds(g.legend_hide===!0?d.mapToIds(d.data.targets):g.legend_hide),d.hasType("gauge")&&(g.legend_show=!1),d.updateSizes(),d.updateScales(),d.x.domain(e.extent(d.getXDomain(d.data.targets))),d.y.domain(d.getYDomain(d.data.targets,"y")),d.y2.domain(d.getYDomain(d.data.targets,"y2")),d.subX.domain(d.x.domain()),d.subY.domain(d.y.domain()),d.subY2.domain(d.y2.domain()),d.orgXDomain=d.x.domain(),d.brush&&d.brush.scale(d.subX),g.zoom_enabled&&d.zoom.scale(d.x),d.svg=d.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return g.onmouseover.call(d)}).on("mouseleave",function(){return g.onmouseout.call(d)}),d.config.svg_classname&&d.svg.attr("class",d.config.svg_classname),b=d.svg.append("defs"),d.clipChart=d.appendClip(b,d.clipId),d.clipXAxis=d.appendClip(b,d.clipIdForXAxis),d.clipYAxis=d.appendClip(b,d.clipIdForYAxis),d.clipGrid=d.appendClip(b,d.clipIdForGrid),d.clipSubchart=d.appendClip(b,d.clipIdForSubchart),d.updateSvgSize(),c=d.main=d.svg.append("g").attr("transform",d.getTranslate("main")),d.initSubchart&&d.initSubchart(),d.initTooltip&&d.initTooltip(),d.initLegend&&d.initLegend(),d.initTitle&&d.initTitle(),c.append("text").attr("class",l.text+" "+l.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),d.initRegion(),d.initGrid(),c.append("g").attr("clip-path",d.clipPath).attr("class",l.chart),g.grid_lines_front&&d.initGridLines(),d.initEventRect(),d.initChartElements(),c.insert("rect",g.zoom_privileged?null:"g."+l.regions).attr("class",l.zoomRect).attr("width",d.width).attr("height",d.height).style("opacity",0).on("dblclick.zoom",null),g.axis_x_extent&&d.brush.extent(d.getDefaultExtent()),d.axis.init(),d.updateTargets(d.data.targets),h&&(d.updateDimension(),d.config.oninit.call(d),d.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),d.bindResize(),d.api.element=d.selectChart.node()},i.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),d=a.attr("x2"),e=a.attr("y1"),f=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(d),y1:Math.ceil(e),y2:Math.ceil(f)})})},i.updateSizes=function(){var a=this,b=a.config,c=a.legend?a.getLegendHeight():0,d=a.legend?a.getLegendWidth():0,e=a.isLegendRight||a.isLegendInset?0:c,f=a.hasArcType(),g=b.axis_rotated||f?0:a.getHorizontalAxisHeight("x"),h=b.subchart_show&&!f?b.subchart_size_height+g:0;a.currentWidth=a.getCurrentWidth(),a.currentHeight=a.getCurrentHeight(),a.margin=b.axis_rotated?{top:a.getHorizontalAxisHeight("y2")+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:a.getHorizontalAxisHeight("y")+e+a.getCurrentPaddingBottom(),left:h+(f?0:a.getCurrentPaddingLeft())}:{top:4+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:g+h+e+a.getCurrentPaddingBottom(),left:f?0:a.getCurrentPaddingLeft()},a.margin2=b.axis_rotated?{top:a.margin.top,right:NaN,bottom:20+e,left:a.rotated_padding_left}:{top:a.currentHeight-h-e,right:NaN,bottom:g+e,left:a.margin.left},a.margin3={top:0,right:NaN,bottom:0,left:0},a.updateSizeForLegend&&a.updateSizeForLegend(c,d),a.width=a.currentWidth-a.margin.left-a.margin.right,a.height=a.currentHeight-a.margin.top-a.margin.bottom,a.width<0&&(a.width=0),a.height<0&&(a.height=0),a.width2=b.axis_rotated?a.margin.left-a.rotated_padding_left-a.rotated_padding_right:a.width,a.height2=b.axis_rotated?a.height:a.currentHeight-a.margin2.top-a.margin2.bottom,a.width2<0&&(a.width2=0),a.height2<0&&(a.height2=0),a.arcWidth=a.width-(a.isLegendRight?d+10:0),a.arcHeight=a.height-(a.isLegendRight?0:10),a.hasType("gauge")&&!b.gauge_fullCircle&&(a.arcHeight+=a.height-a.getGaugeLabelHeight()),a.updateRadius&&a.updateRadius(),a.isLegendRight&&f&&(a.margin3.left=a.arcWidth/2+1.1*a.radiusExpanded)},i.updateTargets=function(a){var b=this;b.updateTargetsForText(a),b.updateTargetsForBar(a),b.updateTargetsForLine(a),b.hasArcType()&&b.updateTargetsForArc&&b.updateTargetsForArc(a),b.updateTargetsForSubchart&&b.updateTargetsForSubchart(a),b.showTargets()},i.showTargets=function(){var a=this;a.svg.selectAll("."+l.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",1)},i.redraw=function(a,b){var c,d,e,f,g,h,i,j,k,m,n,o,p,q,r,s,t,u,v,x,y,z,A,B,C,D,E,F,G,H=this,I=H.main,J=H.d3,K=H.config,L=H.getShapeIndices(H.isAreaType),M=H.getShapeIndices(H.isBarType),N=H.getShapeIndices(H.isLineType),O=H.hasArcType(),P=H.filterTargetsToShow(H.data.targets),Q=H.xv.bind(H);if(a=a||{},c=w(a,"withY",!0),d=w(a,"withSubchart",!0),e=w(a,"withTransition",!0),h=w(a,"withTransform",!1),i=w(a,"withUpdateXDomain",!1),j=w(a,"withUpdateOrgXDomain",!1),k=w(a,"withTrimXDomain",!0),p=w(a,"withUpdateXAxis",i),m=w(a,"withLegend",!1),n=w(a,"withEventRect",!0),o=w(a,"withDimension",!0),f=w(a,"withTransitionForExit",e),g=w(a,"withTransitionForAxis",e),v=e?K.transition_duration:0,x=f?v:0,y=g?v:0,b=b||H.axis.generateTransitions(y),m&&K.legend_show?H.updateLegend(H.mapToIds(H.data.targets),a,b):o&&H.updateDimension(!0),H.isCategorized()&&0===P.length&&H.x.domain([0,H.axes.x.selectAll(".tick").size()]),P.length?(H.updateXDomain(P,i,j,k),K.axis_x_tick_values||(B=H.axis.updateXAxisTickValues(P))):(H.xAxis.tickValues([]),H.subXAxis.tickValues([])),K.zoom_rescale&&!a.flow&&(E=H.x.orgDomain()),H.y.domain(H.getYDomain(P,"y",E)),H.y2.domain(H.getYDomain(P,"y2",E)),!K.axis_y_tick_values&&K.axis_y_tick_count&&H.yAxis.tickValues(H.axis.generateTickValues(H.y.domain(),K.axis_y_tick_count)),!K.axis_y2_tick_values&&K.axis_y2_tick_count&&H.y2Axis.tickValues(H.axis.generateTickValues(H.y2.domain(),K.axis_y2_tick_count)),H.axis.redraw(b,O),H.axis.updateLabels(e),(i||p)&&P.length)if(K.axis_x_tick_culling&&B){for(C=1;C<B.length;C++)if(B.length/C<K.axis_x_tick_culling_max){D=C;break}H.svg.selectAll("."+l.axisX+" .tick text").each(function(a){var b=B.indexOf(a);b>=0&&J.select(this).style("display",b%D?"none":"block")})}else H.svg.selectAll("."+l.axisX+" .tick text").style("display","block");q=H.generateDrawArea?H.generateDrawArea(L,!1):void 0,r=H.generateDrawBar?H.generateDrawBar(M):void 0,s=H.generateDrawLine?H.generateDrawLine(N,!1):void 0,t=H.generateXYForText(L,M,N,!0),u=H.generateXYForText(L,M,N,!1),c&&(H.subY.domain(H.getYDomain(P,"y")),H.subY2.domain(H.getYDomain(P,"y2"))),H.updateXgridFocus(),I.select("text."+l.text+"."+l.empty).attr("x",H.width/2).attr("y",H.height/2).text(K.data_empty_label_text).transition().style("opacity",P.length?0:1),H.updateGrid(v),H.updateRegion(v),H.updateBar(x),H.updateLine(x),H.updateArea(x),H.updateCircle(),H.hasDataLabel()&&H.updateText(x),H.redrawTitle&&H.redrawTitle(),H.redrawArc&&H.redrawArc(v,x,h),H.redrawSubchart&&H.redrawSubchart(d,b,v,x,L,M,N),I.selectAll("."+l.selectedCircles).filter(H.isBarType.bind(H)).selectAll("circle").remove(),K.interaction_enabled&&!a.flow&&n&&(H.redrawEventRect(),H.updateZoom&&H.updateZoom()),H.updateCircleY(),F=(H.config.axis_rotated?H.circleY:H.circleX).bind(H),G=(H.config.axis_rotated?H.circleX:H.circleY).bind(H),a.flow&&(A=H.generateFlow({targets:P,flow:a.flow,duration:a.flow.duration,drawBar:r,drawLine:s,drawArea:q,cx:F,cy:G,xv:Q,xForText:t,yForText:u})),(v||A)&&H.isTabVisible()?J.transition().duration(v).each(function(){var b=[];[H.redrawBar(r,!0),H.redrawLine(s,!0),H.redrawArea(q,!0),H.redrawCircle(F,G,!0),H.redrawText(t,u,a.flow,!0),H.redrawRegion(!0),H.redrawGrid(!0)].forEach(function(a){a.forEach(function(a){b.push(a)})}),z=H.generateWait(),b.forEach(function(a){z.add(a)})}).call(z,function(){A&&A(),K.onrendered&&K.onrendered.call(H)}):(H.redrawBar(r),H.redrawLine(s),H.redrawArea(q),H.redrawCircle(F,G),H.redrawText(t,u,a.flow),H.redrawRegion(),H.redrawGrid(),K.onrendered&&K.onrendered.call(H)),H.mapToIds(H.data.targets).forEach(function(a){H.withoutFadeIn[a]=!0})},i.updateAndRedraw=function(a){var b,c=this,d=c.config;a=a||{},a.withTransition=w(a,"withTransition",!0),a.withTransform=w(a,"withTransform",!1),a.withLegend=w(a,"withLegend",!1),a.withUpdateXDomain=!0,a.withUpdateOrgXDomain=!0,a.withTransitionForExit=!1,a.withTransitionForTransform=w(a,"withTransitionForTransform",a.withTransition),c.updateSizes(),a.withLegend&&d.legend_show||(b=c.axis.generateTransitions(a.withTransitionForAxis?d.transition_duration:0),c.updateScales(),c.updateSvgSize(),c.transformAll(a.withTransitionForTransform,b)),c.redraw(a,b)},i.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},i.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},i.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},i.isCustomX=function(){var a=this,b=a.config;return!a.isTimeSeries()&&(b.data_x||v(b.data_xs))},i.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},i.getTranslate=function(a){var b,c,d=this,e=d.config;return"main"===a?(b=s(d.margin.left),c=s(d.margin.top)):"context"===a?(b=s(d.margin2.left),c=s(d.margin2.top)):"legend"===a?(b=d.margin3.left,c=d.margin3.top):"x"===a?(b=0,c=e.axis_rotated?0:d.height):"y"===a?(b=0,c=e.axis_rotated?d.height:0):"y2"===a?(b=e.axis_rotated?0:d.width,c=e.axis_rotated?1:0):"subx"===a?(b=0,c=e.axis_rotated?0:d.height2):"arc"===a&&(b=d.arcWidth/2,c=d.arcHeight/2),"translate("+b+","+c+")"},i.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?1:0},i.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0},i.opacityForCircle=function(a){var b=this.config.point_show?1:0;return m(a.value)?this.isScatterType(a)?.5:b:0},i.opacityForText=function(){return this.hasDataLabel()?1:0},i.xx=function(a){return a?this.x(a.x):null},i.xv=function(a){var b=this,c=a.value;return b.isTimeSeries()?c=b.parseDate(a.value):b.isCategorized()&&"string"==typeof a.value&&(c=b.config.axis_x_categories.indexOf(a.value)),Math.ceil(b.x(c))},i.yv=function(a){var b=this,c=a.axis&&"y2"===a.axis?b.y2:b.y;return Math.ceil(c(a.value))},i.subxx=function(a){return a?this.subX(a.x):null},i.transformMain=function(a,b){var c,d,e,f=this;b&&b.axisX?c=b.axisX:(c=f.main.select("."+l.axisX),a&&(c=c.transition())),b&&b.axisY?d=b.axisY:(d=f.main.select("."+l.axisY),a&&(d=d.transition())),b&&b.axisY2?e=b.axisY2:(e=f.main.select("."+l.axisY2),a&&(e=e.transition())),(a?f.main.transition():f.main).attr("transform",f.getTranslate("main")),c.attr("transform",f.getTranslate("x")),d.attr("transform",f.getTranslate("y")),e.attr("transform",f.getTranslate("y2")),f.main.select("."+l.chartArcs).attr("transform",f.getTranslate("arc"))},i.transformAll=function(a,b){var c=this;c.transformMain(a,b),c.config.subchart_show&&c.transformContext(a,b),c.legend&&c.transformLegend(a)},i.updateSvgSize=function(){
var a=this,b=a.svg.select(".c3-brush .background");a.svg.attr("width",a.currentWidth).attr("height",a.currentHeight),a.svg.selectAll(["#"+a.clipId,"#"+a.clipIdForGrid]).select("rect").attr("width",a.width).attr("height",a.height),a.svg.select("#"+a.clipIdForXAxis).select("rect").attr("x",a.getXAxisClipX.bind(a)).attr("y",a.getXAxisClipY.bind(a)).attr("width",a.getXAxisClipWidth.bind(a)).attr("height",a.getXAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForYAxis).select("rect").attr("x",a.getYAxisClipX.bind(a)).attr("y",a.getYAxisClipY.bind(a)).attr("width",a.getYAxisClipWidth.bind(a)).attr("height",a.getYAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForSubchart).select("rect").attr("width",a.width).attr("height",b.size()?b.attr("height"):0),a.svg.select("."+l.zoomRect).attr("width",a.width).attr("height",a.height),a.selectChart.style("max-height",a.currentHeight+"px")},i.updateDimension=function(a){var b=this;a||(b.config.axis_rotated?(b.axes.x.call(b.xAxis),b.axes.subx.call(b.subXAxis)):(b.axes.y.call(b.yAxis),b.axes.y2.call(b.y2Axis))),b.updateSizes(),b.updateScales(),b.updateSvgSize(),b.transformAll(!1)},i.observeInserted=function(b){var c,d=this;return"undefined"==typeof MutationObserver?void a.console.error("MutationObserver not defined."):(c=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.previousSibling&&(c.disconnect(),d.intervalForObserveInserted=a.setInterval(function(){b.node().parentNode&&(a.clearInterval(d.intervalForObserveInserted),d.updateDimension(),d.brush&&d.brush.update(),d.config.oninit.call(d),d.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),b.transition().style("opacity",1))},10))})}),void c.observe(b.node(),{attributes:!0,childList:!0,characterData:!0}))},i.bindResize=function(){var b=this,c=b.config;if(b.resizeFunction=b.generateResize(),b.resizeFunction.add(function(){c.onresize.call(b)}),c.resize_auto&&b.resizeFunction.add(function(){void 0!==b.resizeTimeout&&a.clearTimeout(b.resizeTimeout),b.resizeTimeout=a.setTimeout(function(){delete b.resizeTimeout,b.api.flush()},100)}),b.resizeFunction.add(function(){c.onresized.call(b)}),a.attachEvent)a.attachEvent("onresize",b.resizeFunction);else if(a.addEventListener)a.addEventListener("resize",b.resizeFunction,!1);else{var d=a.onresize;d?d.add&&d.remove||(d=b.generateResize(),d.add(a.onresize)):d=b.generateResize(),d.add(b.resizeFunction),a.onresize=d}},i.generateResize=function(){function a(){b.forEach(function(a){a()})}var b=[];return a.add=function(a){b.push(a)},a.remove=function(a){for(var c=0;c<b.length;c++)if(b[c]===a){b.splice(c,1);break}},a},i.endall=function(a,b){var c=0;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})},i.generateWait=function(){var a=[],b=function(b,c){var d=setInterval(function(){var b=0;a.forEach(function(a){if(a.empty())return void(b+=1);try{a.transition()}catch(c){b+=1}}),b===a.length&&(clearInterval(d),c&&c())},10)};return b.add=function(b){a.push(b)},b},i.parseDate=function(b){var c,d=this;return b instanceof Date?c=b:"string"==typeof b?c=d.dataTimeFormat(d.config.data_xFormat).parse(b):"number"!=typeof b||isNaN(b)||(c=new Date(+b)),c&&!isNaN(+c)||a.console.error("Failed to parse x '"+b+"' to Date object"),c},i.isTabVisible=function(){var a;return"undefined"!=typeof document.hidden?a="hidden":"undefined"!=typeof document.mozHidden?a="mozHidden":"undefined"!=typeof document.msHidden?a="msHidden":"undefined"!=typeof document.webkitHidden&&(a="webkitHidden"),!document[a]},i.getDefaultConfig=function(){var a={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,b,c,d){return this.getTooltipContent?this.getTooltipContent(a,b,c,d):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this),a},i.additionalConfig={},i.loadConfig=function(a){function b(){var a=d.shift();return a&&c&&"object"==typeof c&&a in c?(c=c[a],b()):a?void 0:c}var c,d,e,f=this.config;Object.keys(f).forEach(function(g){c=a,d=g.split("_"),e=b(),q(e)&&(f[g]=e)})},i.getScale=function(a,b,c){return(c?this.d3.time.scale():this.d3.scale.linear()).range([a,b])},i.getX=function(a,b,c,d){var e,f=this,g=f.getScale(a,b,f.isTimeSeries()),h=c?g.domain(c):g;f.isCategorized()?(d=d||function(){return 0},g=function(a,b){var c=h(a)+d(a);return b?c:Math.ceil(c)}):g=function(a,b){var c=h(a);return b?c:Math.ceil(c)};for(e in h)g[e]=h[e];return g.orgDomain=function(){return h.domain()},f.isCategorized()&&(g.domain=function(a){return arguments.length?(h.domain(a),g):(a=this.orgDomain(),[a[0],a[1]+1])}),g},i.getY=function(a,b,c){var d=this.getScale(a,b,this.isTimeSeriesY());return c&&d.domain(c),d},i.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y},i.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY},i.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0,a.xMax=b.axis_rotated?a.height:a.width,a.yMin=b.axis_rotated?0:a.height,a.yMax=b.axis_rotated?a.width:1,a.subXMin=a.xMin,a.subXMax=a.xMax,a.subYMin=b.axis_rotated?0:a.height2,a.subYMax=b.axis_rotated?a.width2:1,a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()}),a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain()),a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain()),a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()}),a.subY=a.getY(a.subYMin,a.subYMax,c?b.axis_y_default:a.subY.domain()),a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain()),a.xAxisTickFormat=a.axis.getXAxisTickFormat(),a.xAxisTickValues=a.axis.getXAxisTickValues(),a.yAxisTickValues=a.axis.getYAxisTickValues(),a.y2AxisTickValues=a.axis.getY2AxisTickValues(),a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.yAxis=a.axis.getYAxis(a.y,a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer),a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer),c||(a.brush&&a.brush.scale(a.subX),b.zoom_enabled&&a.zoom.scale(a.x)),a.updateArc&&a.updateArc()},i.getYDomainMin=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasNegativeValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=0>a?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&+a>0||(k[d][b]+=+a)});return h.d3.min(Object.keys(k).map(function(a){return h.d3.min(k[a])}))},i.getYDomainMax=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasPositiveValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=a>0?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&0>+a||(k[d][b]+=+a)});return h.d3.max(Object.keys(k).map(function(a){return h.d3.max(k[a])}))},i.getYDomain=function(a,b,c){var d,e,f,g,h,i,j,k,l,n,o,p=this,q=p.config,r=a.filter(function(a){return p.axis.getId(a.id)===b}),s=c?p.filterByXDomain(r,c):r,u="y2"===b?q.axis_y2_min:q.axis_y_min,w="y2"===b?q.axis_y2_max:q.axis_y_max,x=p.getYDomainMin(s),y=p.getYDomainMax(s),z="y2"===b?q.axis_y2_center:q.axis_y_center,A=p.hasType("bar",s)&&q.bar_zerobased||p.hasType("area",s)&&q.area_zerobased,B="y2"===b?q.axis_y2_inverted:q.axis_y_inverted,C=p.hasDataLabel()&&q.axis_rotated,D=p.hasDataLabel()&&!q.axis_rotated;return x=m(u)?u:m(w)?w>x?x:w-10:x,y=m(w)?w:m(u)?y>u?y:u+10:y,0===s.length?"y2"===b?p.y2.domain():p.y.domain():(isNaN(x)&&(x=0),isNaN(y)&&(y=x),x===y&&(0>x?y=0:x=0),n=x>=0&&y>=0,o=0>=x&&0>=y,(m(u)&&n||m(w)&&o)&&(A=!1),A&&(n&&(x=0),o&&(y=0)),e=Math.abs(y-x),f=g=h=.1*e,"undefined"!=typeof z&&(i=Math.max(Math.abs(x),Math.abs(y)),y=z+i,x=z-i),C?(j=p.getDataLabelLength(x,y,"width"),k=t(p.y.range()),l=[j[0]/k,j[1]/k],g+=e*(l[1]/(1-l[0]-l[1])),h+=e*(l[0]/(1-l[0]-l[1]))):D&&(j=p.getDataLabelLength(x,y,"height"),g+=p.axis.convertPixelsToAxisPadding(j[1],e),h+=p.axis.convertPixelsToAxisPadding(j[0],e)),"y"===b&&v(q.axis_y_padding)&&(g=p.axis.getPadding(q.axis_y_padding,"top",g,e),h=p.axis.getPadding(q.axis_y_padding,"bottom",h,e)),"y2"===b&&v(q.axis_y2_padding)&&(g=p.axis.getPadding(q.axis_y2_padding,"top",g,e),h=p.axis.getPadding(q.axis_y2_padding,"bottom",h,e)),A&&(n&&(h=x),o&&(g=-y)),d=[x-h,y+g],B?d.reverse():d)},i.getXDomainMin=function(a){var b=this,c=b.config;return q(c.axis_x_min)?b.isTimeSeries()?this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})},i.getXDomainMax=function(a){var b=this,c=b.config;return q(c.axis_x_max)?b.isTimeSeries()?this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})},i.getXDomainPadding=function(a){var b,c,d,e,f=this,g=f.config,h=a[1]-a[0];return f.isCategorized()?c=0:f.hasType("bar")?(b=f.getMaxDataCount(),c=b>1?h/(b-1)/2:.5):c=.01*h,"object"==typeof g.axis_x_padding&&v(g.axis_x_padding)?(d=m(g.axis_x_padding.left)?g.axis_x_padding.left:c,e=m(g.axis_x_padding.right)?g.axis_x_padding.right:c):d=e="number"==typeof g.axis_x_padding?g.axis_x_padding:c,{left:d,right:e}},i.getXDomain=function(a){var b=this,c=[b.getXDomainMin(a),b.getXDomainMax(a)],d=c[0],e=c[1],f=b.getXDomainPadding(c),g=0,h=0;return d-e!==0||b.isCategorized()||(b.isTimeSeries()?(d=new Date(.5*d.getTime()),e=new Date(1.5*e.getTime())):(d=0===d?1:.5*d,e=0===e?-1:1.5*e)),(d||0===d)&&(g=b.isTimeSeries()?new Date(d.getTime()-f.left):d-f.left),(e||0===e)&&(h=b.isTimeSeries()?new Date(e.getTime()+f.right):e+f.right),[g,h]},i.updateXDomain=function(a,b,c,d,e){var f=this,g=f.config;return c&&(f.x.domain(e?e:f.d3.extent(f.getXDomain(a))),f.orgXDomain=f.x.domain(),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent(),f.subX.domain(f.x.domain()),f.brush&&f.brush.scale(f.subX)),b&&(f.x.domain(e?e:!f.brush||f.brush.empty()?f.orgXDomain:f.brush.extent()),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent()),d&&f.x.domain(f.trimXDomain(f.x.orgDomain())),f.x.domain()},i.trimXDomain=function(a){var b=this.getZoomDomain(),c=b[0],d=b[1];return a[0]<=c&&(a[1]=+a[1]+(c-a[0]),a[0]=c),d<=a[1]&&(a[0]=+a[0]-(a[1]-d),a[1]=d),a},i.isX=function(a){var b=this,c=b.config;return c.data_x&&a===c.data_x||v(c.data_xs)&&x(c.data_xs,a)},i.isNotX=function(a){return!this.isX(a)},i.getXKey=function(a){var b=this,c=b.config;return c.data_x?c.data_x:v(c.data_xs)?c.data_xs[a]:null},i.getXValuesOfXKey=function(a,b){var c,d=this,e=b&&v(b)?d.mapToIds(b):[];return e.forEach(function(b){d.getXKey(b)===a&&(c=d.data.xs[b])}),c},i.getIndexByX=function(a){var b=this,c=b.filterByX(b.data.targets,a);return c.length?c[0].index:null},i.getXValue=function(a,b){var c=this;return a in c.data.xs&&c.data.xs[a]&&m(c.data.xs[a][b])?c.data.xs[a][b]:b},i.getOtherTargetXs=function(){var a=this,b=Object.keys(a.data.xs);return b.length?a.data.xs[b[0]]:null},i.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null},i.addXs=function(a){var b=this;Object.keys(a).forEach(function(c){b.config.data_xs[c]=a[c]})},i.hasMultipleX=function(a){return this.d3.set(Object.keys(a).map(function(b){return a[b]})).size()>1},i.isMultipleX=function(){return v(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},i.addName=function(a){var b,c=this;return a&&(b=c.config.data_names[a.id],a.name=void 0!==b?b:a.id),a},i.getValueOnIndex=function(a,b){var c=a.filter(function(a){return a.index===b});return c.length?c[0]:null},i.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(d,e){d.x=c.generateTargetX(b[e],a.id,e)}),c.data.xs[a.id]=b})},i.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&c.updateTargetX([a],b[a.id])})},i.generateTargetX=function(a,b,c){var d,e=this;return d=e.isTimeSeries()?a?e.parseDate(a):e.parseDate(e.getXValue(b,c)):e.isCustomX()&&!e.isCategorized()?m(a)?+a:e.getXValue(b,c):c},i.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}},i.updateXs=function(){var a=this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(b){a.xs[b.index]=b.x}))},i.getPrevX=function(a){var b=this.xs[a-1];return"undefined"!=typeof b?b:null},i.getNextX=function(a){var b=this.xs[a+1];return"undefined"!=typeof b?b:null},i.getMaxDataCount=function(){var a=this;return a.d3.max(a.data.targets,function(a){return a.values.length})},i.getMaxDataCountTarget=function(a){var b,c=a.length,d=0;return c>1?a.forEach(function(a){a.values.length>d&&(b=a,d=a.values.length)}):b=c?a[0]:null,b},i.getEdgeX=function(a){var b=this;return a.length?[b.d3.min(a,function(a){return a.values[0].x}),b.d3.max(a,function(a){return a.values[a.values.length-1].x})]:[0,0]},i.mapToIds=function(a){return a.map(function(a){return a.id})},i.mapToTargetIds=function(a){var b=this;return a?[].concat(a):b.mapToIds(b.data.targets)},i.hasTarget=function(a,b){var c,d=this.mapToIds(a);for(c=0;c<d.length;c++)if(d[c]===b)return!0;return!1},i.isTargetToShow=function(a){return this.hiddenTargetIds.indexOf(a)<0},i.isLegendToShow=function(a){return this.hiddenLegendIds.indexOf(a)<0},i.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})},i.mapTargetsToUniqueXs=function(a){var b=this,c=b.d3.set(b.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();return c=b.isTimeSeries()?c.map(function(a){return new Date(+a)}):c.map(function(a){return+a}),c.sort(function(a,b){return b>a?-1:a>b?1:a>=b?0:NaN})},i.addHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.concat(a)},i.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return a.indexOf(b)<0})},i.addHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.concat(a)},i.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return a.indexOf(b)<0})},i.getValuesAsIdKeyed=function(a){var b={};return a.forEach(function(a){b[a.id]=[],a.values.forEach(function(c){b[a.id].push(c.value)})}),b},i.checkValueInTargets=function(a,b){var c,d,e,f=Object.keys(a);for(c=0;c<f.length;c++)for(e=a[f[c]].values,d=0;d<e.length;d++)if(b(e[d].value))return!0;return!1},i.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0>a})},i.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return a>0})},i.isOrderDesc=function(){var a=this.config;return"string"==typeof a.data_order&&"desc"===a.data_order.toLowerCase()},i.isOrderAsc=function(){var a=this.config;return"string"==typeof a.data_order&&"asc"===a.data_order.toLowerCase()},i.orderTargets=function(a){var b=this,c=b.config,d=b.isOrderAsc(),e=b.isOrderDesc();return d||e?a.sort(function(a,b){var c=function(a,b){return a+Math.abs(b.value)},e=a.values.reduce(c,0),f=b.values.reduce(c,0);return d?f-e:e-f}):n(c.data_order)&&a.sort(c.data_order),a},i.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return a.x-b===0})},i.filterRemoveNull=function(a){return a.filter(function(a){return m(a.value)})},i.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})},i.hasDataLabel=function(){var a=this.config;return"boolean"==typeof a.data_labels&&a.data_labels?!0:!("object"!=typeof a.data_labels||!v(a.data_labels))},i.getDataLabelLength=function(a,b,c){var d=this,e=[0,0],f=1.3;return d.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return d.dataLabelFormat(a.id)(a)}).each(function(a,b){e[b]=this.getBoundingClientRect()[c]*f}).remove(),e},i.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)},i.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)},i.findSameXOfValues=function(a,b){var c,d=a[b].x,e=[];for(c=b-1;c>=0&&d===a[c].x;c--)e.push(a[c]);for(c=b;c<a.length&&d===a[c].x;c++)e.push(a[c]);return e},i.findClosestFromTargets=function(a,b){var c,d=this;return c=a.map(function(a){return d.findClosest(a.values,b)}),d.findClosest(c,b)},i.findClosest=function(a,b){var c,d=this,e=d.config.point_sensitivity;return a.filter(function(a){return a&&d.isBarType(a.id)}).forEach(function(a){var b=d.main.select("."+l.bars+d.getTargetSelectorSuffix(a.id)+" ."+l.bar+"-"+a.index).node();!c&&d.isWithinBar(b)&&(c=a)}),a.filter(function(a){return a&&!d.isBarType(a.id)}).forEach(function(a){var f=d.dist(a,b);e>f&&(e=f,c=a)}),c},i.dist=function(a,b){var c=this,d=c.config,e=d.axis_rotated?1:0,f=d.axis_rotated?0:1,g=c.circleY(a,a.index),h=c.x(a.x);return Math.sqrt(Math.pow(h-b[e],2)+Math.pow(g-b[f],2))},i.convertValuesToStep=function(a){var b,c=[].concat(a);if(!this.isCategorized())return a;for(b=a.length+1;b>0;b--)c[b]=c[b-1];return c[0]={x:c[0].x-1,value:c[0].value,id:c[0].id},c[a.length+1]={x:c[a.length].x+1,value:c[a.length].value,id:c[a.length].id},c},i.updateDataAttributes=function(a,b){var c=this,d=c.config,e=d["data_"+a];return"undefined"==typeof b?e:(Object.keys(b).forEach(function(a){e[a]=b[a]}),c.redraw({withLegend:!0}),e)},i.convertUrlToData=function(a,b,c,d,e){var f=this,g=b?b:"csv",h=f.d3.xhr(a);c&&Object.keys(c).forEach(function(a){h.header(a,c[a])}),h.get(function(a,b){var c;if(!b)throw new Error(a.responseURL+" "+a.status+" ("+a.statusText+")");c="json"===g?f.convertJsonToData(JSON.parse(b.response),d):"tsv"===g?f.convertTsvToData(b.response):f.convertCsvToData(b.response),e.call(f,c)})},i.convertXsvToData=function(a,b){var c,d=b.parseRows(a);return 1===d.length?(c=[{}],d[0].forEach(function(a){c[0][a]=null})):c=b.parse(a),c},i.convertCsvToData=function(a){return this.convertXsvToData(a,this.d3.csv)},i.convertTsvToData=function(a){return this.convertXsvToData(a,this.d3.tsv)},i.convertJsonToData=function(a,b){var c,d,e=this,f=[];return b?(b.x?(c=b.value.concat(b.x),e.config.data_x=b.x):c=b.value,f.push(c),a.forEach(function(a){var b=[];c.forEach(function(c){var d=e.findValueInJson(a,c);p(d)&&(d=null),b.push(d)}),f.push(b)}),d=e.convertRowsToData(f)):(Object.keys(a).forEach(function(b){f.push([b].concat(a[b]))}),d=e.convertColumnsToData(f)),d},i.findValueInJson=function(a,b){b=b.replace(/\[(\w+)\]/g,".$1"),b=b.replace(/^\./,"");for(var c=b.split("."),d=0;d<c.length;++d){var e=c[d];if(!(e in a))return;a=a[e]}return a},i.convertRowsToData=function(a){var b,c,d=a[0],e={},f=[];for(b=1;b<a.length;b++){for(e={},c=0;c<a[b].length;c++){if(p(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[d[c]]=a[b][c]}f.push(e)}return f},i.convertColumnsToData=function(a){var b,c,d,e=[];for(b=0;b<a.length;b++)for(d=a[b][0],c=1;c<a[b].length;c++){if(p(e[c-1])&&(e[c-1]={}),p(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[c-1][d]=a[b][c]}return e},i.convertDataToTargets=function(a,b){var c,d=this,e=d.config,f=d.d3.keys(a[0]).filter(d.isNotX,d),g=d.d3.keys(a[0]).filter(d.isX,d);return f.forEach(function(c){var f=d.getXKey(c);d.isCustomX()||d.isTimeSeries()?g.indexOf(f)>=0?d.data.xs[c]=(b&&d.data.xs[c]?d.data.xs[c]:[]).concat(a.map(function(a){return a[f]}).filter(m).map(function(a,b){return d.generateTargetX(a,c,b)})):e.data_x?d.data.xs[c]=d.getOtherTargetXs():v(e.data_xs)&&(d.data.xs[c]=d.getXValuesOfXKey(f,d.data.targets)):d.data.xs[c]=a.map(function(a,b){return b})}),f.forEach(function(a){if(!d.data.xs[a])throw new Error('x is not defined for id = "'+a+'".')}),c=f.map(function(b,c){var f=e.data_idConverter(b);return{id:f,id_org:b,values:a.map(function(a,g){var h,i=d.getXKey(b),j=a[i],k=null===a[b]||isNaN(a[b])?null:+a[b];return d.isCustomX()&&d.isCategorized()&&0===c&&!p(j)?(0===c&&0===g&&(e.axis_x_categories=[]),h=e.axis_x_categories.indexOf(j),-1===h&&(h=e.axis_x_categories.length,e.axis_x_categories.push(j))):h=d.generateTargetX(j,b,g),(p(a[b])||d.data.xs[b].length<=g)&&(h=void 0),{x:h,value:k,id:f}}).filter(function(a){return q(a.x)})}}),c.forEach(function(a){var b;e.data_xSort&&(a.values=a.values.sort(function(a,b){var c=a.x||0===a.x?a.x:1/0,d=b.x||0===b.x?b.x:1/0;return c-d})),b=0,a.values.forEach(function(a){a.index=b++}),d.data.xs[a.id].sort(function(a,b){return a-b})}),d.hasNegativeValue=d.hasNegativeValueInTargets(c),d.hasPositiveValue=d.hasPositiveValueInTargets(c),e.data_type&&d.setTargetType(d.mapToIds(c).filter(function(a){return!(a in e.data_types)}),e.data_type),c.forEach(function(a){d.addCache(a.id_org,a)}),c},i.load=function(a,b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){var d=b.types&&b.types[a.id]?b.types[a.id]:b.type;c.setTargetType(a.id,d)}),c.data.targets.forEach(function(b){for(var c=0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values,a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a)),c.updateTargets(c.data.targets),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),b.done&&b.done()},i.loadFromArgs=function(a){var b=this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.headers,a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)},i.unload=function(a,b){var c=this;return b||(b=function(){}),a=a.filter(function(a){return c.hasTarget(c.data.targets,a)}),a&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),void a.forEach(function(a){c.withoutFadeIn[a]=!1,c.legend&&c.legend.selectAll("."+l.legendItem+c.getTargetSelectorSuffix(a)).remove(),c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):void b()},i.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a},i.initEventRect=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.eventRects).style("fill-opacity",0)},i.redrawEventRect=function(){var a,b,c=this,d=c.config,e=c.isMultipleX(),f=c.main.select("."+l.eventRects).style("cursor",d.zoom_enabled?d.axis_rotated?"ns-resize":"ew-resize":null).classed(l.eventRectsMultiple,e).classed(l.eventRectsSingle,!e);f.selectAll("."+l.eventRect).remove(),c.eventRect=f.selectAll("."+l.eventRect),e?(a=c.eventRect.data([0]),c.generateEventRectsForMultipleXs(a.enter()),c.updateEventRect(a)):(b=c.getMaxDataCountTarget(c.data.targets),f.datum(b?b.values:[]),c.eventRect=f.selectAll("."+l.eventRect),a=c.eventRect.data(function(a){return a}),c.generateEventRectsForSingleX(a.enter()),c.updateEventRect(a),a.exit().remove())},i.updateEventRect=function(a){var b,c,d,e,f,g,h=this,i=h.config;a=a||h.eventRect.data(function(a){return a}),h.isMultipleX()?(b=0,c=0,d=h.width,e=h.height):(!h.isCustomX()&&!h.isTimeSeries()||h.isCategorized()?(f=h.getEventRectWidth(),g=function(a){return h.x(a.x)-f/2}):(h.updateXs(),f=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index);return null===b&&null===c?i.axis_rotated?h.height:h.width:(null===b&&(b=h.x.domain()[0]),null===c&&(c=h.x.domain()[1]),Math.max(0,(h.x(c)-h.x(b))/2))},g=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index),d=h.data.xs[a.id][a.index];return null===b&&null===c?0:(null===b&&(b=h.x.domain()[0]),(h.x(d)+h.x(b))/2)}),b=i.axis_rotated?0:g,c=i.axis_rotated?g:0,d=i.axis_rotated?h.width:f,e=i.axis_rotated?f:h.height),a.attr("class",h.classEvent.bind(h)).attr("x",b).attr("y",c).attr("width",d).attr("height",e)},i.generateEventRectsForSingleX=function(a){var b=this,c=b.d3,d=b.config;a.append("rect").attr("class",b.classEvent.bind(b)).style("cursor",d.data_selection_enabled&&d.data_selection_grouped?"pointer":null).on("mouseover",function(a){var c=a.index;b.dragging||b.flowing||b.hasArcType()||(d.point_focus_expand_enabled&&b.expandCircles(c,null,!0),b.expandBars(c,null,!0),b.main.selectAll("."+l.shape+"-"+c).each(function(a){d.data_onmouseover.call(b.api,a)}))}).on("mouseout",function(a){var c=a.index;b.config&&(b.hasArcType()||(b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars(),b.main.selectAll("."+l.shape+"-"+c).each(function(a){d.data_onmouseout.call(b.api,a)})))}).on("mousemove",function(a){var e,f=a.index,g=b.svg.select("."+l.eventRect+"-"+f);b.dragging||b.flowing||b.hasArcType()||(b.isStepType(a)&&"step-after"===b.config.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,f))&&(f-=1),e=b.filterTargetsToShow(b.data.targets).map(function(a){return b.addName(b.getValueOnIndex(a.values,f))}),d.tooltip_grouped&&(b.showTooltip(e,this),b.showXGridFocus(e)),(!d.tooltip_grouped||d.data_selection_enabled&&!d.data_selection_grouped)&&b.main.selectAll("."+l.shape+"-"+f).each(function(){c.select(this).classed(l.EXPANDED,!0),d.data_selection_enabled&&g.style("cursor",d.data_selection_grouped?"pointer":null),d.tooltip_grouped||(b.hideXGridFocus(),b.hideTooltip(),d.data_selection_grouped||(b.unexpandCircles(f),b.unexpandBars(f)))}).filter(function(a){return b.isWithinShape(this,a)}).each(function(a){d.data_selection_enabled&&(d.data_selection_grouped||d.data_selection_isselectable(a))&&g.style("cursor","pointer"),d.tooltip_grouped||(b.showTooltip([a],this),b.showXGridFocus([a]),d.point_focus_expand_enabled&&b.expandCircles(f,a.id,!0),b.expandBars(f,a.id,!0))}))}).on("click",function(a){var e=a.index;if(!b.hasArcType()&&b.toggleShape){if(b.cancelClick)return void(b.cancelClick=!1);b.isStepType(a)&&"step-after"===d.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,e))&&(e-=1),b.main.selectAll("."+l.shape+"-"+e).each(function(a){(d.data_selection_grouped||b.isWithinShape(this,a))&&(b.toggleShape(this,a,e),b.config.data_onclick.call(b.api,a,this))})}}).call(d.data_selection_draggable&&b.drag?c.behavior.drag().origin(Object).on("drag",function(){b.drag(c.mouse(this))}).on("dragstart",function(){b.dragstart(c.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})},i.generateEventRectsForMultipleXs=function(a){function b(){c.svg.select("."+l.eventRect).style("cursor",null),c.hideXGridFocus(),c.hideTooltip(),c.unexpandCircles(),c.unexpandBars()}var c=this,d=c.d3,e=c.config;a.append("rect").attr("x",0).attr("y",0).attr("width",c.width).attr("height",c.height).attr("class",l.eventRect).on("mouseout",function(){c.config&&(c.hasArcType()||b())}).on("mousemove",function(){var a,f,g,h,i=c.filterTargetsToShow(c.data.targets);if(!c.dragging&&!c.hasArcType(i)){if(a=d.mouse(this),f=c.findClosestFromTargets(i,a),!c.mouseover||f&&f.id===c.mouseover.id||(e.data_onmouseout.call(c.api,c.mouseover),c.mouseover=void 0),!f)return void b();g=c.isScatterType(f)||!e.tooltip_grouped?[f]:c.filterByX(i,f.x),h=g.map(function(a){return c.addName(a)}),c.showTooltip(h,this),e.point_focus_expand_enabled&&c.expandCircles(f.index,f.id,!0),c.expandBars(f.index,f.id,!0),c.showXGridFocus(h),(c.isBarType(f.id)||c.dist(f,a)<e.point_sensitivity)&&(c.svg.select("."+l.eventRect).style("cursor","pointer"),c.mouseover||(e.data_onmouseover.call(c.api,f),c.mouseover=f))}}).on("click",function(){var a,b,f=c.filterTargetsToShow(c.data.targets);c.hasArcType(f)||(a=d.mouse(this),b=c.findClosestFromTargets(f,a),
b&&(c.isBarType(b.id)||c.dist(b,a)<e.point_sensitivity)&&c.main.selectAll("."+l.shapes+c.getTargetSelectorSuffix(b.id)).selectAll("."+l.shape+"-"+b.index).each(function(){(e.data_selection_grouped||c.isWithinShape(this,b))&&(c.toggleShape(this,b,b.index),c.config.data_onclick.call(c.api,b,this))}))}).call(e.data_selection_draggable&&c.drag?d.behavior.drag().origin(Object).on("drag",function(){c.drag(d.mouse(this))}).on("dragstart",function(){c.dragstart(d.mouse(this))}).on("dragend",function(){c.dragend()}):function(){})},i.dispatchEvent=function(b,c,d){var e=this,f="."+l.eventRect+(e.isMultipleX()?"":"-"+c),g=e.main.select(f).node(),h=g.getBoundingClientRect(),i=h.left+(d?d[0]:0),j=h.top+(d?d[1]:0),k=document.createEvent("MouseEvents");k.initMouseEvent(b,!0,!0,a,0,i,j,i,j,!1,!1,!1,!1,0,null),g.dispatchEvent(k)},i.getCurrentWidth=function(){var a=this,b=a.config;return b.size_width?b.size_width:a.getParentWidth()},i.getCurrentHeight=function(){var a=this,b=a.config,c=b.size_height?b.size_height:a.getParentHeight();return c>0?c:320/(a.hasType("gauge")&&!b.gauge_fullCircle?2:1)},i.getCurrentPaddingTop=function(){var a=this,b=a.config,c=m(b.padding_top)?b.padding_top:0;return a.title&&a.title.node()&&(c+=a.getTitlePadding()),c},i.getCurrentPaddingBottom=function(){var a=this.config;return m(a.padding_bottom)?a.padding_bottom:0},i.getCurrentPaddingLeft=function(a){var b=this,c=b.config;return m(c.padding_left)?c.padding_left:c.axis_rotated?c.axis_x_show?Math.max(r(b.getAxisWidthByAxisId("x",a)),40):1:!c.axis_y_show||c.axis_y_inner?b.axis.getYAxisLabelPosition().isOuter?30:1:r(b.getAxisWidthByAxisId("y",a))},i.getCurrentPaddingRight=function(){var a=this,b=a.config,c=10,d=a.isLegendRight?a.getLegendWidth()+20:0;return m(b.padding_right)?b.padding_right+1:b.axis_rotated?c+d:!b.axis_y2_show||b.axis_y2_inner?2+d+(a.axis.getY2AxisLabelPosition().isOuter?20:0):r(a.getAxisWidthByAxisId("y2"))+d},i.getParentRectValue=function(a){for(var b,c=this.selectChart.node();c&&"BODY"!==c.tagName;){try{b=c.getBoundingClientRect()[a]}catch(d){"width"===a&&(b=c.offsetWidth)}if(b)break;c=c.parentNode}return b},i.getParentWidth=function(){return this.getParentRectValue("width")},i.getParentHeight=function(){var a=this.selectChart.style("height");return a.indexOf("px")>0?+a.replace("px",""):0},i.getSvgLeft=function(a){var b=this,c=b.config,d=c.axis_rotated||!c.axis_rotated&&!c.axis_y_inner,e=c.axis_rotated?l.axisX:l.axisY,f=b.main.select("."+e).node(),g=f&&d?f.getBoundingClientRect():{right:0},h=b.selectChart.node().getBoundingClientRect(),i=b.hasArcType(),j=g.right-h.left-(i?0:b.getCurrentPaddingLeft(a));return j>0?j:0},i.getAxisWidthByAxisId=function(a,b){var c=this,d=c.axis.getLabelPositionById(a);return c.axis.getMaxTickWidth(a,b)+(d.isInner?20:40)},i.getHorizontalAxisHeight=function(a){var b=this,c=b.config,d=30;return"x"!==a||c.axis_x_show?"x"===a&&c.axis_x_height?c.axis_x_height:"y"!==a||c.axis_y_show?"y2"!==a||c.axis_y2_show?("x"===a&&!c.axis_rotated&&c.axis_x_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-c.axis_x_tick_rotate)/180)),"y"===a&&c.axis_rotated&&c.axis_y_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-c.axis_y_tick_rotate)/180)),d+(b.axis.getLabelPositionById(a).isInner?0:10)+("y2"===a?-10:0)):b.rotated_padding_top:!c.legend_show||b.isLegendRight||b.isLegendInset?1:10:8},i.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},i.getShapeIndices=function(a){var b,c,d=this,e=d.config,f={},g=0;return d.filterTargetsToShow(d.data.targets.filter(a,d)).forEach(function(a){for(b=0;b<e.data_groups.length;b++)if(!(e.data_groups[b].indexOf(a.id)<0))for(c=0;c<e.data_groups[b].length;c++)if(e.data_groups[b][c]in f){f[a.id]=f[e.data_groups[b][c]];break}p(f[a.id])&&(f[a.id]=g++)}),f.__max__=g-1,f},i.getShapeX=function(a,b,c,d){var e=this,f=d?e.subX:e.x;return function(d){var e=d.id in c?c[d.id]:0;return d.x||0===d.x?f(d.x)-a*(b/2-e):0}},i.getShapeY=function(a){var b=this;return function(c){var d=a?b.getSubYScale(c.id):b.getYScale(c.id);return d(c.value)}},i.getShapeOffset=function(a,b,c){var d=this,e=d.orderTargets(d.filterTargetsToShow(d.data.targets.filter(a,d))),f=e.map(function(a){return a.id});return function(a,g){var h=c?d.getSubYScale(a.id):d.getYScale(a.id),i=h(0),j=i;return e.forEach(function(c){var e=d.isStepType(a)?d.convertValuesToStep(c.values):c.values;c.id!==a.id&&b[c.id]===b[a.id]&&f.indexOf(c.id)<f.indexOf(a.id)&&("undefined"!=typeof e[g]&&+e[g].x===+a.x||(g=-1,e.forEach(function(b,c){b.x===a.x&&(g=c)})),g in e&&e[g].value*a.value>=0&&(j+=h(e[g].value)-i))}),j}},i.isWithinShape=function(a,b){var c,d=this,e=d.d3.select(a);return d.isTargetToShow(b.id)?"circle"===a.nodeName?c=d.isStepType(b)?d.isWithinStep(a,d.getYScale(b.id)(b.value)):d.isWithinCircle(a,1.5*d.pointSelectR(b)):"path"===a.nodeName&&(c=e.classed(l.bar)?d.isWithinBar(a):!0):c=!1,c},i.getInterpolate=function(a){var b=this,c=b.isInterpolationType(b.config.spline_interpolation_type)?b.config.spline_interpolation_type:"cardinal";return b.isSplineType(a)?c:b.isStepType(a)?b.config.line_step_type:"linear"},i.initLine=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.chartLines)},i.updateTargetsForLine=function(a){var b,c,d=this,e=d.config,f=d.classChartLine.bind(d),g=d.classLines.bind(d),h=d.classAreas.bind(d),i=d.classCircles.bind(d),j=d.classFocus.bind(d);b=d.main.select("."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",function(a){return f(a)+j(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g),c.append("g").attr("class",h),c.append("g").attr("class",function(a){return d.generateClass(l.selectedCircles,a.id)}),c.append("g").attr("class",i).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null}),a.forEach(function(a){d.main.selectAll("."+l.selectedCircles+d.getTargetSelectorSuffix(a.id)).selectAll("."+l.selectedCircle).each(function(b){b.value=a.values[b.index].value})})},i.updateLine=function(a){var b=this;b.mainLine=b.main.selectAll("."+l.lines).selectAll("."+l.line).data(b.lineData.bind(b)),b.mainLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.mainLine.style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null),b.mainLine.exit().transition().duration(a).style("opacity",0).remove()},i.redrawLine=function(a,b){return[(b?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]},i.generateDrawLine=function(a,b){var c=this,d=c.config,e=c.d3.svg.line(),f=c.generateGetLinePoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x(i).y(h):e.x(h).y(i),d.line_connectNull||(e=e.defined(function(a){return null!=a.value})),function(a){var f,h=d.line_connectNull?c.filterRemoveNull(a.values):a.values,i=b?c.x:c.subX,j=g.call(c,a.id),k=0,l=0;return c.isLineType(a)?d.data_regions[a.id]?f=c.lineWithRegions(h,i,j,d.data_regions[a.id]):(c.isStepType(a)&&(h=c.convertValuesToStep(h)),f=e.interpolate(c.getInterpolate(a))(h)):(h[0]&&(k=i(h[0].x),l=j(h[0].value)),f=d.axis_rotated?"M "+l+" "+k:"M "+k+" "+l),f?f:"M 0 0"}},i.generateGetLinePoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isLineType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&e>l||a.value<0&&l>e)&&(l=e),[[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)]]}},i.lineWithRegions=function(a,b,c,d){function e(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function f(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var g,h,i,j,k,l,m,n,o,r,s,t,u=this,v=u.config,w=-1,x="M",y=u.isCategorized()?.5:0,z=[];if(q(d))for(g=0;g<d.length;g++)z[g]={},p(d[g].start)?z[g].start=a[0].x:z[g].start=u.isTimeSeries()?u.parseDate(d[g].start):d[g].start,p(d[g].end)?z[g].end=a[a.length-1].x:z[g].end=u.isTimeSeries()?u.parseDate(d[g].end):d[g].end;for(s=v.axis_rotated?function(a){return c(a.value)}:function(a){return b(a.x)},t=v.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)},i=u.isTimeSeries()?function(a,d,e,g){var h,i=a.x.getTime(),j=d.x-a.x,l=new Date(i+j*e),m=new Date(i+j*(e+g));return h=v.axis_rotated?[[c(k(e)),b(l)],[c(k(e+g)),b(m)]]:[[b(l),c(k(e))],[b(m),c(k(e+g))]],f(h)}:function(a,d,e,g){var h;return h=v.axis_rotated?[[c(k(e),!0),b(j(e))],[c(k(e+g),!0),b(j(e+g))]]:[[b(j(e),!0),c(k(e))],[b(j(e+g),!0),c(k(e+g))]],f(h)},g=0;g<a.length;g++){if(p(z)||!e(a[g].x,z))x+=" "+s(a[g])+" "+t(a[g]);else for(j=u.getScale(a[g-1].x+y,a[g].x+y,u.isTimeSeries()),k=u.getScale(a[g-1].value,a[g].value),l=b(a[g].x)-b(a[g-1].x),m=c(a[g].value)-c(a[g-1].value),n=Math.sqrt(Math.pow(l,2)+Math.pow(m,2)),o=2/n,r=2*o,h=o;1>=h;h+=r)x+=i(a[g-1],a[g],h,o);w=a[g].x}return x},i.updateArea=function(a){var b=this,c=b.d3;b.mainArea=b.main.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b)),b.mainArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.mainArea.style("opacity",b.orgAreaOpacity),b.mainArea.exit().transition().duration(a).style("opacity",0).remove()},i.redrawArea=function(a,b){return[(b?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},i.generateDrawArea=function(a,b){var c=this,d=c.config,e=c.d3.svg.area(),f=c.generateGetAreaPoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(c.getAreaBaseValue(a.id))},j=function(a,b){return d.data_groups.length>0?f(a,b)[1][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x0(i).x1(j).y(h):e.x(h).y0(d.area_above?0:i).y1(j),d.line_connectNull||(e=e.defined(function(a){return null!==a.value})),function(a){var b,f=d.line_connectNull?c.filterRemoveNull(a.values):a.values,g=0,h=0;return c.isAreaType(a)?(c.isStepType(a)&&(f=c.convertValuesToStep(f)),b=e.interpolate(c.getInterpolate(a))(f)):(f[0]&&(g=c.x(f[0].x),h=c.getYScale(a.id)(f[0].value)),b=d.axis_rotated?"M "+h+" "+g:"M "+g+" "+h),b?b:"M 0 0"}},i.getAreaBaseValue=function(){return 0},i.generateGetAreaPoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isAreaType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&e>l||a.value<0&&l>e)&&(l=e),[[k,j],[k,l-(e-j)],[k,l-(e-j)],[k,j]]}},i.updateCircle=function(){var a=this;a.mainCircle=a.main.selectAll("."+l.circles).selectAll("."+l.circle).data(a.lineOrScatterData.bind(a)),a.mainCircle.enter().append("circle").attr("class",a.classCircle.bind(a)).attr("r",a.pointR.bind(a)).style("fill",a.color),a.mainCircle.style("opacity",a.initialOpacityForCircle.bind(a)),a.mainCircle.exit().remove()},i.redrawCircle=function(a,b,c){var d=this.main.selectAll("."+l.selectedCircle);return[(c?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",a).attr("cy",b),(c?d.transition(Math.random().toString()):d).attr("cx",a).attr("cy",b)]},i.circleX=function(a){return a.x||0===a.x?this.x(a.x):null},i.updateCircleY=function(){var a,b,c=this;c.config.data_groups.length>0?(a=c.getShapeIndices(c.isLineType),b=c.generateGetLinePoints(a),c.circleY=function(a,c){return b(a,c)[0][1]}):c.circleY=function(a){return c.getYScale(a.id)(a.value)}},i.getCircles=function(a,b){var c=this;return(b?c.main.selectAll("."+l.circles+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+l.circle+(m(a)?"-"+a:""))},i.expandCircles=function(a,b,c){var d=this,e=d.pointExpandedR.bind(d);c&&d.unexpandCircles(),d.getCircles(a,b).classed(l.EXPANDED,!0).attr("r",e)},i.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(l.EXPANDED)}).classed(l.EXPANDED,!1).attr("r",c)},i.pointR=function(a){var b=this,c=b.config;return b.isStepType(a)?0:n(c.point_r)?c.point_r(a):c.point_r},i.pointExpandedR=function(a){var b=this,c=b.config;return c.point_focus_expand_enabled?c.point_focus_expand_r?c.point_focus_expand_r:1.75*b.pointR(a):b.pointR(a)},i.pointSelectR=function(a){var b=this,c=b.config;return n(c.point_select_r)?c.point_select_r(a):c.point_select_r?c.point_select_r:4*b.pointR(a)},i.isWithinCircle=function(a,b){var c=this.d3,d=c.mouse(a),e=c.select(a),f=+e.attr("cx"),g=+e.attr("cy");return Math.sqrt(Math.pow(f-d[0],2)+Math.pow(g-d[1],2))<b},i.isWithinStep=function(a,b){return Math.abs(b-this.d3.mouse(a)[1])<30},i.initBar=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.chartBars)},i.updateTargetsForBar=function(a){var b,c,d=this,e=d.config,f=d.classChartBar.bind(d),g=d.classBars.bind(d),h=d.classFocus.bind(d);b=d.main.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",function(a){return f(a)+h(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null})},i.updateBar=function(a){var b=this,c=b.barData.bind(b),d=b.classBar.bind(b),e=b.initialOpacity.bind(b),f=function(a){return b.color(a.id)};b.mainBar=b.main.selectAll("."+l.bars).selectAll("."+l.bar).data(c),b.mainBar.enter().append("path").attr("class",d).style("stroke",f).style("fill",f),b.mainBar.style("opacity",e),b.mainBar.exit().transition().duration(a).style("opacity",0).remove()},i.redrawBar=function(a,b){return[(b?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",a).style("fill",this.color).style("opacity",1)]},i.getBarW=function(a,b){var c=this,d=c.config,e="number"==typeof d.bar_width?d.bar_width:b?a.tickInterval()*d.bar_width_ratio/b:0;return d.bar_width_max&&e>d.bar_width_max?d.bar_width_max:e},i.getBars=function(a,b){var c=this;return(b?c.main.selectAll("."+l.bars+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+l.bar+(m(a)?"-"+a:""))},i.expandBars=function(a,b,c){var d=this;c&&d.unexpandBars(),d.getBars(a,b).classed(l.EXPANDED,!0)},i.unexpandBars=function(a){var b=this;b.getBars(a).classed(l.EXPANDED,!1)},i.generateDrawBar=function(a,b){var c=this,d=c.config,e=c.generateGetBarPoints(a,b);return function(a,b){var c=e(a,b),f=d.axis_rotated?1:0,g=d.axis_rotated?0:1,h="M "+c[0][f]+","+c[0][g]+" L"+c[1][f]+","+c[1][g]+" L"+c[2][f]+","+c[2][g]+" L"+c[3][f]+","+c[3][g]+" z";return h}},i.generateGetBarPoints=function(a,b){var c=this,d=b?c.subXAxis:c.xAxis,e=a.__max__+1,f=c.getBarW(d,e),g=c.getShapeX(f,e,a,!!b),h=c.getShapeY(!!b),i=c.getShapeOffset(c.isBarType,a,!!b),j=b?c.getSubYScale:c.getYScale;return function(a,b){var d=j.call(c,a.id)(0),e=i(a,b)||d,k=g(a),l=h(a);return c.config.axis_rotated&&(0<a.value&&d>l||a.value<0&&l>d)&&(l=d),[[k,e],[k,l-(d-e)],[k+f,l-(d-e)],[k+f,e]]}},i.isWithinBar=function(a){var b=this.d3.mouse(a),c=a.getBoundingClientRect(),d=a.pathSegList.getItem(0),e=a.pathSegList.getItem(1),f=Math.min(d.x,e.x),g=Math.min(d.y,e.y),h=c.width,i=c.height,j=2,k=f-j,l=f+h+j,m=g+i+j,n=g-j;return k<b[0]&&b[0]<l&&n<b[1]&&b[1]<m},i.initText=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.chartTexts),a.mainText=a.d3.selectAll([])},i.updateTargetsForText=function(a){var b,c,d=this,e=d.classChartText.bind(d),f=d.classTexts.bind(d),g=d.classFocus.bind(d);b=d.main.select("."+l.chartTexts).selectAll("."+l.chartText).data(a).attr("class",function(a){return e(a)+g(a)}),c=b.enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",f)},i.updateText=function(a){var b=this,c=b.config,d=b.barOrLineData.bind(b),e=b.classText.bind(b);b.mainText=b.main.selectAll("."+l.texts).selectAll("."+l.text).data(d),b.mainText.enter().append("text").attr("class",e).attr("text-anchor",function(a){return c.axis_rotated?a.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(a){return b.color(a)}).style("fill-opacity",0),b.mainText.text(function(a,c,d){return b.dataLabelFormat(a.id)(a.value,a.id,c,d)}),b.mainText.exit().transition().duration(a).style("fill-opacity",0).remove()},i.redrawText=function(a,b,c,d){return[(d?this.mainText.transition():this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]},i.getTextRect=function(a,b,c){var d,e=this.d3.select("body").append("div").classed("c3",!0),f=e.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),g=this.d3.select(c).style("font");return f.selectAll(".dummy").data([a]).enter().append("text").classed(b?b:"",!0).style("font",g).text(a).each(function(){d=this.getBoundingClientRect()}),e.remove(),d},i.generateXYForText=function(a,b,c,d){var e=this,f=e.generateGetAreaPoints(a,!1),g=e.generateGetBarPoints(b,!1),h=e.generateGetLinePoints(c,!1),i=d?e.getXForText:e.getYForText;return function(a,b){var c=e.isAreaType(a)?f:e.isBarType(a)?g:h;return i.call(e,c(a,b),a,this)}},i.getXForText=function(a,b,c){var d,e,f=this,g=c.getBoundingClientRect();return f.config.axis_rotated?(e=f.isBarType(b)?4:6,d=a[2][1]+e*(b.value<0?-1:1)):d=f.hasType("bar")?(a[2][0]+a[0][0])/2:a[0][0],null===b.value&&(d>f.width?d=f.width-g.width:0>d&&(d=4)),d},i.getYForText=function(a,b,c){var d,e=this,f=c.getBoundingClientRect();return e.config.axis_rotated?d=(a[0][0]+a[2][0]+.6*f.height)/2:(d=a[2][1],b.value<0||0===b.value&&!e.hasPositiveValue?(d+=f.height,e.isBarType(b)&&e.isSafari()?d-=3:!e.isBarType(b)&&e.isChrome()&&(d+=3)):d+=e.isBarType(b)?-3:-6),null!==b.value||e.config.axis_rotated||(d<f.height?d=f.height:d>this.height&&(d=this.height-4)),d},i.setTargetType=function(a,b){var c=this,d=c.config;c.mapToTargetIds(a).forEach(function(a){c.withoutFadeIn[a]=b===d.data_types[a],d.data_types[a]=b}),a||(d.data_type=b)},i.hasType=function(a,b){var c=this,d=c.config.data_types,e=!1;return b=b||c.data.targets,b&&b.length?b.forEach(function(b){var c=d[b.id];(c&&c.indexOf(a)>=0||!c&&"line"===a)&&(e=!0)}):Object.keys(d).length?Object.keys(d).forEach(function(b){d[b]===a&&(e=!0)}):e=c.config.data_type===a,e},i.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",a)},i.isLineType=function(a){var b=this.config,c=o(a)?a:a.id;return!b.data_types[c]||["line","spline","area","area-spline","step","area-step"].indexOf(b.data_types[c])>=0},i.isStepType=function(a){var b=o(a)?a:a.id;return["step","area-step"].indexOf(this.config.data_types[b])>=0},i.isSplineType=function(a){var b=o(a)?a:a.id;return["spline","area-spline"].indexOf(this.config.data_types[b])>=0},i.isAreaType=function(a){var b=o(a)?a:a.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[b])>=0},i.isBarType=function(a){var b=o(a)?a:a.id;return"bar"===this.config.data_types[b]},i.isScatterType=function(a){var b=o(a)?a:a.id;return"scatter"===this.config.data_types[b]},i.isPieType=function(a){var b=o(a)?a:a.id;return"pie"===this.config.data_types[b]},i.isGaugeType=function(a){var b=o(a)?a:a.id;return"gauge"===this.config.data_types[b]},i.isDonutType=function(a){var b=o(a)?a:a.id;return"donut"===this.config.data_types[b]},i.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)},i.lineData=function(a){return this.isLineType(a)?[a]:[]},i.arcData=function(a){return this.isArcType(a.data)?[a]:[]},i.barData=function(a){return this.isBarType(a)?a.values:[]},i.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]},i.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]},i.isInterpolationType=function(a){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(a)>=0},i.initGrid=function(){var a=this,b=a.config,c=a.d3;a.grid=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",l.grid),b.grid_x_show&&a.grid.append("g").attr("class",l.xgrids),b.grid_y_show&&a.grid.append("g").attr("class",l.ygrids),b.grid_focus_show&&a.grid.append("g").attr("class",l.xgridFocus).append("line").attr("class",l.xgridFocus),a.xgrid=c.selectAll([]),b.grid_lines_front||a.initGridLines()},i.initGridLines=function(){var a=this,b=a.d3;a.gridLines=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",l.grid+" "+l.gridLines),a.gridLines.append("g").attr("class",l.xgridLines),a.gridLines.append("g").attr("class",l.ygridLines),a.xgridLines=b.selectAll([])},i.updateXGrid=function(a){var b=this,c=b.config,d=b.d3,e=b.generateGridData(c.grid_x_type,b.x),f=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-f},y2:function(a){return b.x(a)-f}}:{x1:function(a){return b.x(a)+f},x2:function(a){return b.x(a)+f},y1:0,y2:b.height},b.xgrid=b.main.select("."+l.xgrids).selectAll("."+l.xgrid).data(e),b.xgrid.enter().append("line").attr("class",l.xgrid),a||b.xgrid.attr(b.xgridAttr).style("opacity",function(){return+d.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1}),b.xgrid.exit().remove()},i.updateYGrid=function(){var a=this,b=a.config,c=a.yAxis.tickValues()||a.y.ticks(b.grid_y_ticks);a.ygrid=a.main.select("."+l.ygrids).selectAll("."+l.ygrid).data(c),a.ygrid.enter().append("line").attr("class",l.ygrid),a.ygrid.attr("x1",b.axis_rotated?a.y:0).attr("x2",b.axis_rotated?a.y:a.width).attr("y1",b.axis_rotated?0:a.y).attr("y2",b.axis_rotated?a.height:a.y),a.ygrid.exit().remove(),a.smoothLines(a.ygrid,"grid")},i.gridTextAnchor=function(a){return a.position?a.position:"end"},i.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4},i.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0},i.yGridTextX=function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width},i.updateGrid=function(a){var b,c,d,e=this,f=e.main,g=e.config;e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),f.select("line."+l.xgridFocus).style("visibility","hidden"),g.grid_x_show&&e.updateXGrid(),e.xgridLines=f.select("."+l.xgridLines).selectAll("."+l.xgridLine).data(g.grid_x_lines),b=e.xgridLines.enter().append("g").attr("class",function(a){return l.xgridLine+(a["class"]?" "+a["class"]:"")}),b.append("line").style("opacity",0),b.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"":"rotate(-90)").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),e.xgridLines.exit().transition().duration(a).style("opacity",0).remove(),g.grid_y_show&&e.updateYGrid(),e.ygridLines=f.select("."+l.ygridLines).selectAll("."+l.ygridLine).data(g.grid_y_lines),c=e.ygridLines.enter().append("g").attr("class",function(a){return l.ygridLine+(a["class"]?" "+a["class"]:"")}),c.append("line").style("opacity",0),c.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"rotate(-90)":"").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),d=e.yv.bind(e),e.ygridLines.select("line").transition().duration(a).attr("x1",g.axis_rotated?d:0).attr("x2",g.axis_rotated?d:e.width).attr("y1",g.axis_rotated?0:d).attr("y2",g.axis_rotated?e.height:d).style("opacity",1),e.ygridLines.select("text").transition().duration(a).attr("x",g.axis_rotated?e.xGridTextX.bind(e):e.yGridTextX.bind(e)).attr("y",d).text(function(a){return a.text}).style("opacity",1),e.ygridLines.exit().transition().duration(a).style("opacity",0).remove()},i.redrawGrid=function(a){var b=this,c=b.config,d=b.xv.bind(b),e=b.xgridLines.select("line"),f=b.xgridLines.select("text");return[(a?e.transition():e).attr("x1",c.axis_rotated?0:d).attr("x2",c.axis_rotated?b.width:d).attr("y1",c.axis_rotated?d:0).attr("y2",c.axis_rotated?d:b.height).style("opacity",1),(a?f.transition():f).attr("x",c.axis_rotated?b.yGridTextX.bind(b):b.xGridTextX.bind(b)).attr("y",d).text(function(a){return a.text}).style("opacity",1)]},i.showXGridFocus=function(a){var b=this,c=b.config,d=a.filter(function(a){return a&&m(a.value)}),e=b.main.selectAll("line."+l.xgridFocus),f=b.xx.bind(b);c.tooltip_show&&(b.hasType("scatter")||b.hasArcType()||(e.style("visibility","visible").data([d[0]]).attr(c.axis_rotated?"y1":"x1",f).attr(c.axis_rotated?"y2":"x2",f),b.smoothLines(e,"grid")))},i.hideXGridFocus=function(){this.main.select("line."+l.xgridFocus).style("visibility","hidden")},i.updateXgridFocus=function(){var a=this,b=a.config;a.main.select("line."+l.xgridFocus).attr("x1",b.axis_rotated?0:-10).attr("x2",b.axis_rotated?a.width:-10).attr("y1",b.axis_rotated?-10:0).attr("y2",b.axis_rotated?-10:a.height)},i.generateGridData=function(a,b){var c,d,e,f,g=this,h=[],i=g.main.select("."+l.axisX).selectAll(".tick").size();if("year"===a)for(c=g.getXDomain(),d=c[0].getFullYear(),e=c[1].getFullYear(),f=d;e>=f;f++)h.push(new Date(f+"-01-01 00:00:00"));else h=b.ticks(10),h.length>i&&(h=h.filter(function(a){return(""+a).indexOf(".")<0}));return h},i.getGridFilterToRemove=function(a){return a?function(b){var c=!1;return[].concat(a).forEach(function(a){("value"in a&&b.value===a.value||"class"in a&&b["class"]===a["class"])&&(c=!0)}),c}:function(){return!0}},i.removeGridLines=function(a,b){var c=this,d=c.config,e=c.getGridFilterToRemove(a),f=function(a){return!e(a)},g=b?l.xgridLines:l.ygridLines,h=b?l.xgridLine:l.ygridLine;c.main.select("."+g).selectAll("."+h).filter(e).transition().duration(d.transition_duration).style("opacity",0).remove(),b?d.grid_x_lines=d.grid_x_lines.filter(f):d.grid_y_lines=d.grid_y_lines.filter(f)},i.initTooltip=function(){var a,b=this,c=b.config;if(b.tooltip=b.selectChart.style("position","relative").append("div").attr("class",l.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),c.tooltip_init_show){if(b.isTimeSeries()&&o(c.tooltip_init_x)){for(c.tooltip_init_x=b.parseDate(c.tooltip_init_x),a=0;a<b.data.targets[0].values.length&&b.data.targets[0].values[a].x-c.tooltip_init_x!==0;a++);c.tooltip_init_x=a}b.tooltip.html(c.tooltip_contents.call(b,b.data.targets.map(function(a){return b.addName(a.values[c.tooltip_init_x])}),b.axis.getXAxisTickFormat(),b.getYFormat(b.hasArcType()),b.color)),b.tooltip.style("top",c.tooltip_init_position.top).style("left",c.tooltip_init_position.left).style("display","block")}},i.getTooltipContent=function(a,b,c,d){var e,f,g,h,i,j,k=this,l=k.config,m=l.tooltip_format_title||b,n=l.tooltip_format_name||function(a){return a},o=l.tooltip_format_value||c,p=k.isOrderAsc();if(0===l.data_groups.length)a.sort(function(a,b){var c=a?a.value:null,d=b?b.value:null;return p?c-d:d-c});else{var q=k.orderTargets(k.data.targets).map(function(a){return a.id});a.sort(function(a,b){var c=a?a.value:null,d=b?b.value:null;return c>0&&d>0&&(c=a?q.indexOf(a.id):null,d=b?q.indexOf(b.id):null),p?c-d:d-c})}for(f=0;f<a.length;f++)if(a[f]&&(a[f].value||0===a[f].value)&&(e||(g=y(m?m(a[f].x):a[f].x),e="<table class='"+k.CLASS.tooltip+"'>"+(g||0===g?"<tr><th colspan='2'>"+g+"</th></tr>":"")),h=y(o(a[f].value,a[f].ratio,a[f].id,a[f].index,a)),void 0!==h)){if(null===a[f].name)continue;i=y(n(a[f].name,a[f].ratio,a[f].id,a[f].index)),j=k.levelColor?k.levelColor(a[f].value):d(a[f].id),e+="<tr class='"+k.CLASS.tooltipName+"-"+k.getTargetSelectorSuffix(a[f].id)+"'>",e+="<td class='name'><span style='background-color:"+j+"'></span>"+i+"</td>",e+="<td class='value'>"+h+"</td>",e+="</tr>"}return e+"</table>"},i.tooltipPosition=function(a,b,c,d){var e,f,g,h,i,j=this,k=j.config,l=j.d3,m=j.hasArcType(),n=l.mouse(d);return m?(f=(j.width-(j.isLegendRight?j.getLegendWidth():0))/2+n[0],h=j.height/2+n[1]+20):(e=j.getSvgLeft(!0),k.axis_rotated?(f=e+n[0]+100,g=f+b,i=j.currentWidth-j.getCurrentPaddingRight(),h=j.x(a[0].x)+20):(f=e+j.getCurrentPaddingLeft(!0)+j.x(a[0].x)+20,g=f+b,i=e+j.currentWidth-j.getCurrentPaddingRight(),h=n[1]+15),g>i&&(f-=g-i+20),h+c>j.currentHeight&&(h-=c+30)),0>h&&(h=0),{top:h,left:f}},i.showTooltip=function(a,b){var c,d,e,f=this,g=f.config,h=f.hasArcType(),j=a.filter(function(a){return a&&m(a.value)}),k=g.tooltip_position||i.tooltipPosition;0!==j.length&&g.tooltip_show&&(f.tooltip.html(g.tooltip_contents.call(f,a,f.axis.getXAxisTickFormat(),f.getYFormat(h),f.color)).style("display","block"),c=f.tooltip.property("offsetWidth"),d=f.tooltip.property("offsetHeight"),e=k.call(this,j,c,d,b),f.tooltip.style("top",e.top+"px").style("left",e.left+"px"))},i.hideTooltip=function(){this.tooltip.style("display","none")},i.initLegend=function(){var a=this;return a.legendItemTextBox={},a.legendHasRendered=!1,a.legend=a.svg.append("g").attr("transform",a.getTranslate("legend")),a.config.legend_show?void a.updateLegendWithDefaults():(a.legend.style("visibility","hidden"),void(a.hiddenLegendIds=a.mapToIds(a.data.targets)))},i.updateLegendWithDefaults=function(){var a=this;a.updateLegend(a.mapToIds(a.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},i.updateSizeForLegend=function(a,b){var c=this,d=c.config,e={top:c.isLegendTop?c.getCurrentPaddingTop()+d.legend_inset_y+5.5:c.currentHeight-a-c.getCurrentPaddingBottom()-d.legend_inset_y,left:c.isLegendLeft?c.getCurrentPaddingLeft()+d.legend_inset_x+.5:c.currentWidth-b-c.getCurrentPaddingRight()-d.legend_inset_x+.5};c.margin3={top:c.isLegendRight?0:c.isLegendInset?e.top:c.currentHeight-a,right:NaN,bottom:0,left:c.isLegendRight?c.currentWidth-b:c.isLegendInset?e.left:0}},i.transformLegend=function(a){var b=this;(a?b.legend.transition():b.legend).attr("transform",b.getTranslate("legend"))},i.updateLegendStep=function(a){this.legendStep=a},i.updateLegendItemWidth=function(a){this.legendItemWidth=a},i.updateLegendItemHeight=function(a){this.legendItemHeight=a},i.getLegendWidth=function(){var a=this;return a.config.legend_show?a.isLegendRight||a.isLegendInset?a.legendItemWidth*(a.legendStep+1):a.currentWidth:0},i.getLegendHeight=function(){var a=this,b=0;return a.config.legend_show&&(b=a.isLegendRight?a.currentHeight:Math.max(20,a.legendItemHeight)*(a.legendStep+1)),b},i.opacityForLegend=function(a){return a.classed(l.legendItemHidden)?null:1},i.opacityForUnfocusedLegend=function(a){return a.classed(l.legendItemHidden)?null:.3},i.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a),c.legend.selectAll("."+l.legendItem).filter(function(b){return a.indexOf(b)>=0}).classed(l.legendItemFocused,b).transition().duration(100).style("opacity",function(){var a=b?c.opacityForLegend:c.opacityForUnfocusedLegend;return a.call(c,c.d3.select(this))})},i.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+l.legendItem).classed(l.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})},i.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),b.legendHasRendered||b.updateLegendWithDefaults()),b.removeHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return b.opacityForLegend(b.d3.select(this))})},i.hideLegend=function(a){var b=this,c=b.config;c.legend_show&&u(a)&&(c.legend_show=!1,b.legend.style("visibility","hidden")),b.addHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("opacity",0).style("visibility","hidden")},i.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},i.updateLegend=function(a,b,c){function d(a,b){return y.legendItemTextBox[b]||(y.legendItemTextBox[b]=y.getTextRect(a.textContent,l.legendItem,a)),
y.legendItemTextBox[b]}function e(b,c,e){function f(a,b){b||(g=(o-G-n)/2,E>g&&(g=(o-n)/2,G=0,M++)),L[a]=M,K[M]=y.isLegendInset?10:g,H[a]=G,G+=n}var g,h,i=0===e,j=e===a.length-1,k=d(b,c),l=k.width+F+(!j||y.isLegendRight||y.isLegendInset?B:0)+z.legend_padding,m=k.height+A,n=y.isLegendRight||y.isLegendInset?m:l,o=y.isLegendRight||y.isLegendInset?y.getLegendHeight():y.getLegendWidth();return i&&(G=0,M=0,C=0,D=0),z.legend_show&&!y.isLegendToShow(c)?void(I[c]=J[c]=L[c]=H[c]=0):(I[c]=l,J[c]=m,(!C||l>=C)&&(C=l),(!D||m>=D)&&(D=m),h=y.isLegendRight||y.isLegendInset?D:C,void(z.legend_equally?(Object.keys(I).forEach(function(a){I[a]=C}),Object.keys(J).forEach(function(a){J[a]=D}),g=(o-h*a.length)/2,E>g?(G=0,M=0,a.forEach(function(a){f(a)})):f(c,!0)):f(c)))}var f,g,h,i,j,k,m,n,o,p,r,s,t,u,v,x,y=this,z=y.config,A=4,B=10,C=0,D=0,E=10,F=z.legend_item_tile_width+5,G=0,H={},I={},J={},K=[0],L={},M=0;a=a.filter(function(a){return!q(z.data_names[a])||null!==z.data_names[a]}),b=b||{},r=w(b,"withTransition",!0),s=w(b,"withTransitionForTransform",!0),y.isLegendInset&&(M=z.legend_inset_step?z.legend_inset_step:a.length,y.updateLegendStep(M)),y.isLegendRight?(f=function(a){return C*L[a]},i=function(a){return K[L[a]]+H[a]}):y.isLegendInset?(f=function(a){return C*L[a]+10},i=function(a){return K[L[a]]+H[a]}):(f=function(a){return K[L[a]]+H[a]},i=function(a){return D*L[a]}),g=function(a,b){return f(a,b)+4+z.legend_item_tile_width},j=function(a,b){return i(a,b)+9},h=function(a,b){return f(a,b)},k=function(a,b){return i(a,b)-5},m=function(a,b){return f(a,b)-2},n=function(a,b){return f(a,b)-2+z.legend_item_tile_width},o=function(a,b){return i(a,b)+4},p=y.legend.selectAll("."+l.legendItem).data(a).enter().append("g").attr("class",function(a){return y.generateClass(l.legendItem,a)}).style("visibility",function(a){return y.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){z.legend_item_onclick?z.legend_item_onclick.call(y,a):y.d3.event.altKey?(y.api.hide(),y.api.show(a)):(y.api.toggle(a),y.isTargetToShow(a)?y.api.focus(a):y.api.revert())}).on("mouseover",function(a){z.legend_item_onmouseover?z.legend_item_onmouseover.call(y,a):(y.d3.select(this).classed(l.legendItemFocused,!0),!y.transiting&&y.isTargetToShow(a)&&y.api.focus(a))}).on("mouseout",function(a){z.legend_item_onmouseout?z.legend_item_onmouseout.call(y,a):(y.d3.select(this).classed(l.legendItemFocused,!1),y.api.revert())}),p.append("text").text(function(a){return q(z.data_names[a])?z.data_names[a]:a}).each(function(a,b){e(this,a,b)}).style("pointer-events","none").attr("x",y.isLegendRight||y.isLegendInset?g:-200).attr("y",y.isLegendRight||y.isLegendInset?-200:j),p.append("rect").attr("class",l.legendItemEvent).style("fill-opacity",0).attr("x",y.isLegendRight||y.isLegendInset?h:-200).attr("y",y.isLegendRight||y.isLegendInset?-200:k),p.append("line").attr("class",l.legendItemTile).style("stroke",y.color).style("pointer-events","none").attr("x1",y.isLegendRight||y.isLegendInset?m:-200).attr("y1",y.isLegendRight||y.isLegendInset?-200:o).attr("x2",y.isLegendRight||y.isLegendInset?n:-200).attr("y2",y.isLegendRight||y.isLegendInset?-200:o).attr("stroke-width",z.legend_item_tile_height),x=y.legend.select("."+l.legendBackground+" rect"),y.isLegendInset&&C>0&&0===x.size()&&(x=y.legend.insert("g","."+l.legendItem).attr("class",l.legendBackground).append("rect")),t=y.legend.selectAll("text").data(a).text(function(a){return q(z.data_names[a])?z.data_names[a]:a}).each(function(a,b){e(this,a,b)}),(r?t.transition():t).attr("x",g).attr("y",j),u=y.legend.selectAll("rect."+l.legendItemEvent).data(a),(r?u.transition():u).attr("width",function(a){return I[a]}).attr("height",function(a){return J[a]}).attr("x",h).attr("y",k),v=y.legend.selectAll("line."+l.legendItemTile).data(a),(r?v.transition():v).style("stroke",y.color).attr("x1",m).attr("y1",o).attr("x2",n).attr("y2",o),x&&(r?x.transition():x).attr("height",y.getLegendHeight()-12).attr("width",C*(M+1)+10),y.legend.selectAll("."+l.legendItem).classed(l.legendItemHidden,function(a){return!y.isTargetToShow(a)}),y.updateLegendItemWidth(C),y.updateLegendItemHeight(D),y.updateLegendStep(M),y.updateSizes(),y.updateScales(),y.updateSvgSize(),y.transformAll(s,c),y.legendHasRendered=!0},i.initTitle=function(){var a=this;a.title=a.svg.append("text").text(a.config.title_text).attr("class",a.CLASS.title)},i.redrawTitle=function(){var a=this;a.title.attr("x",a.xForTitle.bind(a)).attr("y",a.yForTitle.bind(a))},i.xForTitle=function(){var a,b=this,c=b.config,d=c.title_position||"left";return a=d.indexOf("right")>=0?b.currentWidth-b.getTextRect(b.title.node().textContent,b.CLASS.title,b.title.node()).width-c.title_padding.right:d.indexOf("center")>=0?(b.currentWidth-b.getTextRect(b.title.node().textContent,b.CLASS.title,b.title.node()).width)/2:c.title_padding.left},i.yForTitle=function(){var a=this;return a.config.title_padding.top+a.getTextRect(a.title.node().textContent,a.CLASS.title,a.title.node()).height},i.getTitlePadding=function(){var a=this;return a.yForTitle()+a.config.title_padding.bottom},c(b,f),f.prototype.init=function(){var a=this.owner,b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",l.axis+" "+l.axisX).attr("clip-path",a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",b.axis_x_show?"visible":"hidden"),a.axes.x.append("text").attr("class",l.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),a.axes.y=c.append("g").attr("class",l.axis+" "+l.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden"),a.axes.y.append("text").attr("class",l.axisYLabel).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),a.axes.y2=c.append("g").attr("class",l.axis+" "+l.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden"),a.axes.y2.append("text").attr("class",l.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},f.prototype.getXAxis=function(a,b,c,d,e,f,h){var i=this.owner,j=i.config,k={isCategory:i.isCategorized(),withOuterTick:e,tickMultiline:j.axis_x_tick_multiline,tickWidth:j.axis_x_tick_width,tickTextRotate:h?0:j.axis_x_tick_rotate,withoutTransition:f},l=g(i.d3,k).scale(a).orient(b);return i.isTimeSeries()&&d&&"function"!=typeof d&&(d=d.map(function(a){return i.parseDate(a)})),l.tickFormat(c).tickValues(d),i.isCategorized()&&(l.tickCentered(j.axis_x_tick_centered),u(j.axis_x_tick_culling)&&(j.axis_x_tick_culling=!1)),l},f.prototype.updateXAxisTickValues=function(a,b){var c,d=this.owner,e=d.config;return(e.axis_x_tick_fit||e.axis_x_tick_count)&&(c=this.generateTickValues(d.mapTargetsToUniqueXs(a),e.axis_x_tick_count,d.isTimeSeries())),b?b.tickValues(c):(d.xAxis.tickValues(c),d.subXAxis.tickValues(c)),c},f.prototype.getYAxis=function(a,b,c,d,e,f,h){var i=this.owner,j=i.config,k={withOuterTick:e,withoutTransition:f,tickTextRotate:h?0:j.axis_y_tick_rotate},l=g(i.d3,k).scale(a).orient(b).tickFormat(c);return i.isTimeSeriesY()?l.ticks(i.d3.time[j.axis_y_tick_time_value],j.axis_y_tick_time_interval):l.tickValues(d),l},f.prototype.getId=function(a){var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"},f.prototype.getXAxisTickFormat=function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return 0>a?a.toFixed(0):a};return b.axis_x_tick_format&&(n(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c):""})),n(c)?function(b){return c.call(a,b)}:c},f.prototype.getTickValues=function(a,b){return a?a:b?b.tickValues():void 0},f.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},f.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},f.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},f.prototype.getLabelOptionByAxisId=function(a){var b,c=this.owner,d=c.config;return"y"===a?b=d.axis_y_label:"y2"===a?b=d.axis_y2_label:"x"===a&&(b=d.axis_x_label),b},f.prototype.getLabelText=function(a){var b=this.getLabelOptionByAxisId(a);return o(b)?b:b?b.text:null},f.prototype.setLabelText=function(a,b){var c=this.owner,d=c.config,e=this.getLabelOptionByAxisId(a);o(e)?"y"===a?d.axis_y_label=b:"y2"===a?d.axis_y2_label=b:"x"===a&&(d.axis_x_label=b):e&&(e.text=b)},f.prototype.getLabelPosition=function(a,b){var c=this.getLabelOptionByAxisId(a),d=c&&"object"==typeof c&&c.position?c.position:b;return{isInner:d.indexOf("inner")>=0,isOuter:d.indexOf("outer")>=0,isLeft:d.indexOf("left")>=0,isCenter:d.indexOf("center")>=0,isRight:d.indexOf("right")>=0,isTop:d.indexOf("top")>=0,isMiddle:d.indexOf("middle")>=0,isBottom:d.indexOf("bottom")>=0}},f.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},f.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},f.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},f.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},f.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},f.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:b.isMiddle?-c.height/2:0},f.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"0.5em":b.isRight?"-0.5em":"0":b.isTop?"-0.5em":b.isBottom?"0.5em":"0"},f.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":b.isBottom?"start":b.isMiddle?"middle":"end"},f.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.dyForXAxisLabel=function(){var a=this.owner,b=a.config,c=this.getXAxisLabelPosition();return b.axis_rotated?c.isInner?"1.2em":-25-this.getMaxTickWidth("x"):c.isInner?"-0.5em":b.axis_x_height?b.axis_x_height-10:"3em"},f.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.5em":"3em":b.isInner?"1.2em":-10-(a.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},f.prototype.dyForY2AxisLabel=function(){var a=this.owner,b=this.getY2AxisLabelPosition();return a.config.axis_rotated?b.isInner?"1.2em":"-2.2em":b.isInner?"-0.5em":15+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},f.prototype.textAnchorForXAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(!a.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.textAnchorForYAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.textAnchorForY2AxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.getMaxTickWidth=function(a,b){var c,d,e,f,g,h=this.owner,i=h.config,j=0;return b&&h.currentMaxTickWidths[a]?h.currentMaxTickWidths[a]:(h.svg&&(c=h.filterTargetsToShow(h.data.targets),"y"===a?(d=h.y.copy().domain(h.getYDomain(c,"y")),e=this.getYAxis(d,h.yOrient,i.axis_y_tick_format,h.yAxisTickValues,!1,!0,!0)):"y2"===a?(d=h.y2.copy().domain(h.getYDomain(c,"y2")),e=this.getYAxis(d,h.y2Orient,i.axis_y2_tick_format,h.y2AxisTickValues,!1,!0,!0)):(d=h.x.copy().domain(h.getXDomain(c)),e=this.getXAxis(d,h.xOrient,h.xAxisTickFormat,h.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(c,e)),f=h.d3.select("body").append("div").classed("c3",!0),g=f.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),g.append("g").call(e).each(function(){h.d3.select(this).selectAll("text").each(function(){var a=this.getBoundingClientRect();j<a.width&&(j=a.width)}),f.remove()})),h.currentMaxTickWidths[a]=0>=j?h.currentMaxTickWidths[a]:j,h.currentMaxTickWidths[a])},f.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+l.axisX+" ."+l.axisXLabel),d=b.main.select("."+l.axisY+" ."+l.axisYLabel),e=b.main.select("."+l.axisY2+" ."+l.axisY2Label);(a?c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(a?d.transition():d).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(a?e.transition():e).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},f.prototype.getPadding=function(a,b,c,d){var e="number"==typeof a?a:a[b];return m(e)?"ratio"===a.unit?a[b]*d:this.convertPixelsToAxisPadding(e,d):c},f.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner,d=c.config.axis_rotated?c.width:c.height;return b*(a/d)},f.prototype.generateTickValues=function(a,b,c){var d,e,f,g,h,i,j,k=a;if(b)if(d=n(b)?b():b,1===d)k=[a[0]];else if(2===d)k=[a[0],a[a.length-1]];else if(d>2){for(g=d-2,e=a[0],f=a[a.length-1],h=(f-e)/(g+1),k=[e],i=0;g>i;i++)j=+e+h*(i+1),k.push(c?new Date(j):j);k.push(f)}return c||(k=k.sort(function(a,b){return a-b})),k},f.prototype.generateTransitions=function(a){var b=this.owner,c=b.axes;return{axisX:a?c.x.transition().duration(a):c.x,axisY:a?c.y.transition().duration(a):c.y,axisY2:a?c.y2.transition().duration(a):c.y2,axisSubX:a?c.subx.transition().duration(a):c.subx}},f.prototype.redraw=function(a,b){var c=this.owner;c.axes.x.style("opacity",b?0:1),c.axes.y.style("opacity",b?0:1),c.axes.y2.style("opacity",b?0:1),c.axes.subx.style("opacity",b?0:1),a.axisX.call(c.xAxis),a.axisY.call(c.yAxis),a.axisY2.call(c.y2Axis),a.axisSubX.call(c.subXAxis)},i.getClipPath=function(b){var c=a.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(c?"":document.URL.split("#")[0])+"#"+b+")"},i.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")},i.getAxisClipX=function(a){var b=Math.max(30,this.margin.left);return a?-(1+b):-(b-1)},i.getAxisClipY=function(a){return a?-20:-this.margin.top},i.getXAxisClipX=function(){var a=this;return a.getAxisClipX(!a.config.axis_rotated)},i.getXAxisClipY=function(){var a=this;return a.getAxisClipY(!a.config.axis_rotated)},i.getYAxisClipX=function(){var a=this;return a.config.axis_y_inner?-1:a.getAxisClipX(a.config.axis_rotated)},i.getYAxisClipY=function(){var a=this;return a.getAxisClipY(a.config.axis_rotated)},i.getAxisClipWidth=function(a){var b=this,c=Math.max(30,b.margin.left),d=Math.max(30,b.margin.right);return a?b.width+2+c+d:b.margin.left+20},i.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20},i.getXAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(!a.config.axis_rotated)},i.getXAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(!a.config.axis_rotated)},i.getYAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(a.config.axis_rotated)+(a.config.axis_y_inner?20:0)},i.getYAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(a.config.axis_rotated)},i.initPie=function(){var a=this,b=a.d3,c=a.config;a.pie=b.layout.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)}),c.data_order||a.pie.sort(null)},i.updateRadius=function(){var a=this,b=a.config,c=b.gauge_width||b.donut_width;a.radiusExpanded=Math.min(a.arcWidth,a.arcHeight)/2,a.radius=.95*a.radiusExpanded,a.innerRadiusRatio=c?(a.radius-c)/a.radius:.6,a.innerRadius=a.hasType("donut")||a.hasType("gauge")?a.radius*a.innerRadiusRatio:0},i.updateArc=function(){var a=this;a.svgArc=a.getSvgArc(),a.svgArcExpanded=a.getSvgArcExpanded(),a.svgArcExpandedSub=a.getSvgArcExpanded(.98)},i.updateAngle=function(a){var b,c,d,e,f=this,g=f.config,h=!1,i=0;return g?(f.pie(f.filterTargetsToShow(f.data.targets)).forEach(function(b){h||b.data.id!==a.data.id||(h=!0,a=b,a.index=i),i++}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),f.isGaugeType(a.data)&&(b=g.gauge_min,c=g.gauge_max,d=Math.PI*(g.gauge_fullCircle?2:1)/(c-b),e=a.value<b?0:a.value<c?a.value-b:c-b,a.startAngle=g.gauge_startingAngle,a.endAngle=a.startAngle+d*e),h?a:null):null},i.getSvgArc=function(){var a=this,b=a.d3.svg.arc().outerRadius(a.radius).innerRadius(a.innerRadius),c=function(c,d){var e;return d?b(c):(e=a.updateAngle(c),e?b(e):"M 0 0")};return c.centroid=b.centroid,c},i.getSvgArcExpanded=function(a){var b=this,c=b.d3.svg.arc().outerRadius(b.radiusExpanded*(a?a:1)).innerRadius(b.innerRadius);return function(a){var d=b.updateAngle(a);return d?c(d):"M 0 0"}},i.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"},i.transformForArcLabel=function(a){var b,c,d,e,f,g=this,h=g.config,i=g.updateAngle(a),j="";return i&&!g.hasType("gauge")&&(b=this.svgArc.centroid(i),c=isNaN(b[0])?0:b[0],d=isNaN(b[1])?0:b[1],e=Math.sqrt(c*c+d*d),f=g.hasType("donut")&&h.donut_label_ratio?n(h.donut_label_ratio)?h.donut_label_ratio(a,g.radius,e):h.donut_label_ratio:g.hasType("pie")&&h.pie_label_ratio?n(h.pie_label_ratio)?h.pie_label_ratio(a,g.radius,e):h.pie_label_ratio:g.radius&&e?(36/g.radius>.375?1.175-36/g.radius:.8)*g.radius/e:0,j="translate("+c*f+","+d*f+")"),j},i.getArcRatio=function(a){var b=this,c=b.config,d=Math.PI*(b.hasType("gauge")&&!c.gauge_fullCircle?1:2);return a?(a.endAngle-a.startAngle)/d:null},i.convertToArcData=function(a){return this.addName({id:a.data.id,value:a.value,ratio:this.getArcRatio(a),index:a.index})},i.textForArcLabel=function(a){var b,c,d,e,f,g=this;return g.shouldShowArcLabel()?(b=g.updateAngle(a),c=b?b.value:null,d=g.getArcRatio(b),e=a.data.id,g.hasType("gauge")||g.meetsArcLabelThreshold(d)?(f=g.getArcLabelFormat(),f?f(c,d,e):g.defaultArcValueFormat(c,d)):""):""},i.expandArc=function(b){var c,d=this;return d.transiting?void(c=a.setInterval(function(){d.transiting||(a.clearInterval(c),d.legend.selectAll(".c3-legend-item-focused").size()>0&&d.expandArc(b))},10)):(b=d.mapToTargetIds(b),void d.svg.selectAll(d.selectorTargets(b,"."+l.chartArc)).each(function(a){d.shouldExpand(a.data.id)&&d.d3.select(this).selectAll("path").transition().duration(d.expandDuration(a.data.id)).attr("d",d.svgArcExpanded).transition().duration(2*d.expandDuration(a.data.id)).attr("d",d.svgArcExpandedSub).each(function(a){d.isDonutType(a.data)})}))},i.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+l.chartArc)).selectAll("path").transition().duration(function(a){return b.expandDuration(a.data.id)}).attr("d",b.svgArc),b.svg.selectAll("."+l.arc).style("opacity",1))},i.expandDuration=function(a){var b=this,c=b.config;return b.isDonutType(a)?c.donut_expand_duration:b.isGaugeType(a)?c.gauge_expand_duration:b.isPieType(a)?c.pie_expand_duration:50},i.shouldExpand=function(a){var b=this,c=b.config;return b.isDonutType(a)&&c.donut_expand||b.isGaugeType(a)&&c.gauge_expand||b.isPieType(a)&&c.pie_expand},i.shouldShowArcLabel=function(){var a=this,b=a.config,c=!0;return a.hasType("donut")?c=b.donut_label_show:a.hasType("pie")&&(c=b.pie_label_show),c},i.meetsArcLabelThreshold=function(a){var b=this,c=b.config,d=b.hasType("donut")?c.donut_label_threshold:c.pie_label_threshold;return a>=d},i.getArcLabelFormat=function(){var a=this,b=a.config,c=b.pie_label_format;return a.hasType("gauge")?c=b.gauge_label_format:a.hasType("donut")&&(c=b.donut_label_format),c},i.getArcTitle=function(){var a=this;return a.hasType("donut")?a.config.donut_title:""},i.updateTargetsForArc=function(a){var b,c,d=this,e=d.main,f=d.classChartArc.bind(d),g=d.classArcs.bind(d),h=d.classFocus.bind(d);b=e.select("."+l.chartArcs).selectAll("."+l.chartArc).data(d.pie(a)).attr("class",function(a){return f(a)+h(a.data)}),c=b.enter().append("g").attr("class",f),c.append("g").attr("class",g),c.append("text").attr("dy",d.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},i.initArc=function(){var a=this;a.arcs=a.main.select("."+l.chart).append("g").attr("class",l.chartArcs).attr("transform",a.getTranslate("arc")),a.arcs.append("text").attr("class",l.chartArcsTitle).style("text-anchor","middle").text(a.getArcTitle())},i.redrawArc=function(a,b,c){var d,e=this,f=e.d3,g=e.config,h=e.main;d=h.selectAll("."+l.arcs).selectAll("."+l.arc).data(e.arcData.bind(e)),d.enter().append("path").attr("class",e.classArc.bind(e)).style("fill",function(a){return e.color(a.data)}).style("cursor",function(a){return g.interaction_enabled&&g.data_selection_isselectable(a)?"pointer":null}).style("opacity",0).each(function(a){e.isGaugeType(a.data)&&(a.startAngle=a.endAngle=g.gauge_startingAngle),this._current=a}),d.attr("transform",function(a){return!e.isGaugeType(a.data)&&c?"scale(0)":""}).style("opacity",function(a){return a===this._current?0:1}).on("mouseover",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),b&&(c=e.convertToArcData(b),e.expandArc(b.data.id),e.api.focus(b.data.id),e.toggleFocusLegend(b.data.id,!0),e.config.data_onmouseover(c,this)))}:null).on("mousemove",g.interaction_enabled?function(a){var b,c,d=e.updateAngle(a);d&&(b=e.convertToArcData(d),c=[b],e.showTooltip(c,this))}:null).on("mouseout",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),b&&(c=e.convertToArcData(b),e.unexpandArc(b.data.id),e.api.revert(),e.revertLegend(),e.hideTooltip(),e.config.data_onmouseout(c,this)))}:null).on("click",g.interaction_enabled?function(a,b){var c,d=e.updateAngle(a);d&&(c=e.convertToArcData(d),e.toggleShape&&e.toggleShape(this,c,b),e.config.data_onclick.call(e.api,c,this))}:null).each(function(){e.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b,c=e.updateAngle(a);return c?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),b=f.interpolate(this._current,c),this._current=b(0),function(c){var d=b(c);return d.data=a.data,e.getArc(d,!0)}):function(){return"M 0 0"}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return e.levelColor?e.levelColor(a.data.values[0].value):e.color(a.data.id)}).style("opacity",1).call(e.endall,function(){e.transiting=!1}),d.exit().transition().duration(b).style("opacity",0).remove(),h.selectAll("."+l.chartArc).select("text").style("opacity",0).attr("class",function(a){return e.isGaugeType(a.data)?l.gaugeValue:""}).text(e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",function(a){return e.isGaugeType(a.data)?Math.round(e.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return e.isTargetToShow(a.data.id)&&e.isArcType(a.data)?1:0}),h.select("."+l.chartArcsTitle).style("opacity",e.hasType("donut")||e.hasType("gauge")?1:0),e.hasType("gauge")&&(e.arcs.select("."+l.chartArcsBackground).attr("d",function(){var a={data:[{value:g.gauge_max}],startAngle:g.gauge_startingAngle,endAngle:-1*g.gauge_startingAngle};return e.getArc(a,!0,!0)}),e.arcs.select("."+l.chartArcsGaugeUnit).attr("dy",".75em").text(g.gauge_label_show?g.gauge_units:""),e.arcs.select("."+l.chartArcsGaugeMin).attr("dx",-1*(e.innerRadius+(e.radius-e.innerRadius)/(g.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_min:""),e.arcs.select("."+l.chartArcsGaugeMax).attr("dx",e.innerRadius+(e.radius-e.innerRadius)/(g.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_max:""))},i.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&(a.append("path").attr("class",l.chartArcsBackground),a.append("text").attr("class",l.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},i.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},i.initRegion=function(){var a=this;a.region=a.main.append("g").attr("clip-path",a.clipPath).attr("class",l.regions)},i.updateRegion=function(a){var b=this,c=b.config;b.region.style("visibility",b.hasArcType()?"hidden":"visible"),b.mainRegion=b.main.select("."+l.regions).selectAll("."+l.region).data(c.regions),b.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),b.mainRegion.attr("class",b.classRegion.bind(b)),b.mainRegion.exit().transition().duration(a).style("opacity",0).remove()},i.redrawRegion=function(a){var b=this,c=b.mainRegion.selectAll("rect").each(function(){var a=b.d3.select(this.parentNode).datum();b.d3.select(this).datum(a)}),d=b.regionX.bind(b),e=b.regionY.bind(b),f=b.regionWidth.bind(b),g=b.regionHeight.bind(b);return[(a?c.transition():c).attr("x",d).attr("y",e).attr("width",f).attr("height",g).style("fill-opacity",function(a){return m(a.opacity)?a.opacity:.1})]},i.regionX=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"start"in a?e(a.start):0:d.axis_rotated?0:"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},i.regionY=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?0:"end"in a?e(a.end):0:d.axis_rotated&&"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},i.regionWidth=function(a){var b,c=this,d=c.config,e=c.regionX(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"end"in a?f(a.end):c.width:d.axis_rotated?c.width:"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.width,e>b?0:b-e},i.regionHeight=function(a){var b,c=this,d=c.config,e=this.regionY(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?c.height:"start"in a?f(a.start):c.height:d.axis_rotated&&"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.height,e>b?0:b-e},i.isRegionOnX=function(a){return!a.axis||"x"===a.axis},i.drag=function(a){var b,c,d,e,f,g,h,i,j=this,k=j.config,m=j.main,n=j.d3;j.hasArcType()||k.data_selection_enabled&&(k.zoom_enabled&&!j.zoom.altDomain||k.data_selection_multiple&&(b=j.dragStart[0],c=j.dragStart[1],d=a[0],e=a[1],f=Math.min(b,d),g=Math.max(b,d),h=k.data_selection_grouped?j.margin.top:Math.min(c,e),i=k.data_selection_grouped?j.height:Math.max(c,e),m.select("."+l.dragarea).attr("x",f).attr("y",h).attr("width",g-f).attr("height",i-h),m.selectAll("."+l.shapes).selectAll("."+l.shape).filter(function(a){return k.data_selection_isselectable(a)}).each(function(a,b){var c,d,e,k,m,o,p=n.select(this),q=p.classed(l.SELECTED),r=p.classed(l.INCLUDED),s=!1;if(p.classed(l.circle))c=1*p.attr("cx"),d=1*p.attr("cy"),m=j.togglePoint,s=c>f&&g>c&&d>h&&i>d;else{if(!p.classed(l.bar))return;o=z(this),c=o.x,d=o.y,e=o.width,k=o.height,m=j.togglePath,s=!(c>g||f>c+e||d>i||h>d+k)}s^r&&(p.classed(l.INCLUDED,!r),p.classed(l.SELECTED,!q),m.call(j,!q,p,a,b))})))},i.dragstart=function(a){var b=this,c=b.config;b.hasArcType()||c.data_selection_enabled&&(b.dragStart=a,b.main.select("."+l.chart).append("rect").attr("class",l.dragarea).style("opacity",.1),b.dragging=!0)},i.dragend=function(){var a=this,b=a.config;a.hasArcType()||b.data_selection_enabled&&(a.main.select("."+l.dragarea).transition().duration(100).style("opacity",0).remove(),a.main.selectAll("."+l.shape).classed(l.INCLUDED,!1),a.dragging=!1)},i.selectPoint=function(a,b,c){var d=this,e=d.config,f=(e.axis_rotated?d.circleY:d.circleX).bind(d),g=(e.axis_rotated?d.circleX:d.circleY).bind(d),h=d.pointSelectR.bind(d);e.data_onselected.call(d.api,b,a.node()),d.main.select("."+l.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(l.selectedCircle,c)}).attr("cx",f).attr("cy",g).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",h)},i.unselectPoint=function(a,b,c){var d=this;d.config.data_onunselected.call(d.api,b,a.node()),d.main.select("."+l.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()},i.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)},i.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node()),c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})},i.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node()),c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.color(b)})},i.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,c,d)},i.getToggle=function(a,b){var c,d=this;return"circle"===a.nodeName?c=d.isStepType(b)?function(){}:d.togglePoint:"path"===a.nodeName&&(c=d.togglePath),c},i.toggleShape=function(a,b,c){var d=this,e=d.d3,f=d.config,g=e.select(a),h=g.classed(l.SELECTED),i=d.getToggle(a,b).bind(d);f.data_selection_enabled&&f.data_selection_isselectable(b)&&(f.data_selection_multiple||d.main.selectAll("."+l.shapes+(f.data_selection_grouped?d.getTargetSelectorSuffix(b.id):"")).selectAll("."+l.shape).each(function(a,b){var c=e.select(this);c.classed(l.SELECTED)&&i(!1,c.classed(l.SELECTED,!1),a,b)}),g.classed(l.SELECTED,!h),i(!h,g,b,c))},i.initBrush=function(){var a=this,b=a.d3;a.brush=b.svg.brush().on("brush",function(){a.redrawForBrush()}),a.brush.update=function(){return a.context&&a.context.select("."+l.brush).call(this),this},a.brush.scale=function(b){return a.config.axis_rotated?this.y(b):this.x(b)}},i.initSubchart=function(){var a=this,b=a.config,c=a.context=a.svg.append("g").attr("transform",a.getTranslate("context")),d=b.subchart_show?"visible":"hidden";c.style("visibility",d),c.append("g").attr("clip-path",a.clipPathForSubchart).attr("class",l.chart),c.select("."+l.chart).append("g").attr("class",l.chartBars),c.select("."+l.chart).append("g").attr("class",l.chartLines),c.append("g").attr("clip-path",a.clipPath).attr("class",l.brush).call(a.brush),a.axes.subx=c.append("g").attr("class",l.axisX).attr("transform",a.getTranslate("subx")).attr("clip-path",b.axis_rotated?"":a.clipPathForXAxis).style("visibility",b.subchart_axis_x_show?d:"hidden")},i.updateTargetsForSubchart=function(a){var b,c,d,e,f=this,g=f.context,h=f.config,i=f.classChartBar.bind(f),j=f.classBars.bind(f),k=f.classChartLine.bind(f),m=f.classLines.bind(f),n=f.classAreas.bind(f);h.subchart_show&&(e=g.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",i),
d=e.enter().append("g").style("opacity",0).attr("class",i),d.append("g").attr("class",j),c=g.select("."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",k),b=c.enter().append("g").style("opacity",0).attr("class",k),b.append("g").attr("class",m),b.append("g").attr("class",n),g.selectAll("."+l.brush+" rect").attr(h.axis_rotated?"width":"height",h.axis_rotated?f.width2:f.height2))},i.updateBarForSubchart=function(a){var b=this;b.contextBar=b.context.selectAll("."+l.bars).selectAll("."+l.bar).data(b.barData.bind(b)),b.contextBar.enter().append("path").attr("class",b.classBar.bind(b)).style("stroke","none").style("fill",b.color),b.contextBar.style("opacity",b.initialOpacity.bind(b)),b.contextBar.exit().transition().duration(a).style("opacity",0).remove()},i.redrawBarForSubchart=function(a,b,c){(b?this.contextBar.transition(Math.random().toString()).duration(c):this.contextBar).attr("d",a).style("opacity",1)},i.updateLineForSubchart=function(a){var b=this;b.contextLine=b.context.selectAll("."+l.lines).selectAll("."+l.line).data(b.lineData.bind(b)),b.contextLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.contextLine.style("opacity",b.initialOpacity.bind(b)),b.contextLine.exit().transition().duration(a).style("opacity",0).remove()},i.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition(Math.random().toString()).duration(c):this.contextLine).attr("d",a).style("opacity",1)},i.updateAreaForSubchart=function(a){var b=this,c=b.d3;b.contextArea=b.context.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b)),b.contextArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.contextArea.style("opacity",0),b.contextArea.exit().transition().duration(a).style("opacity",0).remove()},i.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition(Math.random().toString()).duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)},i.redrawSubchart=function(a,b,c,d,e,f,g){var h,i,j,k=this,l=k.d3,m=k.config;k.context.style("visibility",m.subchart_show?"visible":"hidden"),m.subchart_show&&(l.event&&"zoom"===l.event.type&&k.brush.extent(k.x.orgDomain()).update(),a&&(k.brush.empty()||k.brush.extent(k.x.orgDomain()).update(),h=k.generateDrawArea(e,!0),i=k.generateDrawBar(f,!0),j=k.generateDrawLine(g,!0),k.updateBarForSubchart(c),k.updateLineForSubchart(c),k.updateAreaForSubchart(c),k.redrawBarForSubchart(i,c,c),k.redrawLineForSubchart(j,c,c),k.redrawAreaForSubchart(h,c,c)))},i.redrawForBrush=function(){var a=this,b=a.x;a.redraw({withTransition:!1,withY:a.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),a.config.subchart_onbrush.call(a.api,b.orgDomain())},i.transformContext=function(a,b){var c,d=this;b&&b.axisSubX?c=b.axisSubX:(c=d.context.select("."+l.axisX),a&&(c=c.transition())),d.context.attr("transform",d.getTranslate("context")),c.attr("transform",d.getTranslate("subx"))},i.getDefaultExtent=function(){var a=this,b=a.config,c=n(b.axis_x_extent)?b.axis_x_extent(a.getXDomain(a.data.targets)):b.axis_x_extent;return a.isTimeSeries()&&(c=[a.parseDate(c[0]),a.parseDate(c[1])]),c},i.initZoom=function(){var a,b=this,c=b.d3,d=b.config;b.zoom=c.behavior.zoom().on("zoomstart",function(){a=c.event.sourceEvent,b.zoom.altDomain=c.event.sourceEvent.altKey?b.x.orgDomain():null,d.zoom_onzoomstart.call(b.api,c.event.sourceEvent)}).on("zoom",function(){b.redrawForZoom.call(b)}).on("zoomend",function(){var e=c.event.sourceEvent;e&&a.clientX===e.clientX&&a.clientY===e.clientY||(b.redrawEventRect(),b.updateZoom(),d.zoom_onzoomend.call(b.api,b.x.orgDomain()))}),b.zoom.scale=function(a){return d.axis_rotated?this.y(a):this.x(a)},b.zoom.orgScaleExtent=function(){var a=d.zoom_extent?d.zoom_extent:[1,10];return[a[0],Math.max(b.getMaxDataCount()/a[1],a[1])]},b.zoom.updateScaleExtent=function(){var a=t(b.x.orgDomain())/t(b.getZoomDomain()),c=this.orgScaleExtent();return this.scaleExtent([c[0]*a,c[1]*a]),this}},i.getZoomDomain=function(){var a=this,b=a.config,c=a.d3,d=c.min([a.orgXDomain[0],b.zoom_x_min]),e=c.max([a.orgXDomain[1],b.zoom_x_max]);return[d,e]},i.updateZoom=function(){var a=this,b=a.config.zoom_enabled?a.zoom:function(){};a.main.select("."+l.zoomRect).call(b).on("dblclick.zoom",null),a.main.selectAll("."+l.eventRect).call(b).on("dblclick.zoom",null)},i.redrawForZoom=function(){var a=this,b=a.d3,c=a.config,d=a.zoom,e=a.x;if(c.zoom_enabled&&0!==a.filterTargetsToShow(a.data.targets).length){if("mousemove"===b.event.sourceEvent.type&&d.altDomain)return e.domain(d.altDomain),void d.scale(e).updateScaleExtent();a.isCategorized()&&e.orgDomain()[0]===a.orgXDomain[0]&&e.domain([a.orgXDomain[0]-1e-10,e.orgDomain()[1]]),a.redraw({withTransition:!1,withY:c.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===b.event.sourceEvent.type&&(a.cancelClick=!0),c.zoom_onzoom.call(a.api,e.orgDomain())}},i.generateColor=function(){var a=this,b=a.config,c=a.d3,d=b.data_colors,e=v(b.color_pattern)?b.color_pattern:c.scale.category10().range(),f=b.data_color,g=[];return function(a){var b,c=a.id||a.data&&a.data.id||a;return d[c]instanceof Function?b=d[c](a):d[c]?b=d[c]:(g.indexOf(c)<0&&g.push(c),b=e[g.indexOf(c)%e.length],d[c]=b),f instanceof Function?f(b,a):b}},i.generateLevelColor=function(){var a=this,b=a.config,c=b.color_pattern,d=b.color_threshold,e="value"===d.unit,f=d.values&&d.values.length?d.values:[],g=d.max||100;return v(b.color_threshold)?function(a){var b,d,h=c[c.length-1];for(b=0;b<f.length;b++)if(d=e?a:100*a/g,d<f[b]){h=c[b];break}return h}:null},i.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,e,f){var g="y2"===b.axis.getId(f)?d:c;return g.call(b,a,e)}},i.yFormat=function(a){var b=this,c=b.config,d=c.axis_y_tick_format?c.axis_y_tick_format:b.defaultValueFormat;return d(a)},i.y2Format=function(a){var b=this,c=b.config,d=c.axis_y2_tick_format?c.axis_y2_tick_format:b.defaultValueFormat;return d(a)},i.defaultValueFormat=function(a){return m(a)?+a:""},i.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"},i.dataLabelFormat=function(a){var b,c=this,d=c.config.data_labels,e=function(a){return m(a)?+a:""};return b="function"==typeof d.format?d.format:"object"==typeof d.format?d.format[a]?d.format[a]===!0?e:d.format[a]:function(){return""}:e},i.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0},i.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)},i.getCaches=function(a){var b,c=[];for(b=0;b<a.length;b++)a[b]in this.cache&&c.push(this.cloneTarget(this.cache[a[b]]));return c};var l=i.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};i.generateClass=function(a,b){return" "+a+" "+a+this.getTargetSelectorSuffix(b)},i.classText=function(a){return this.generateClass(l.text,a.index)},i.classTexts=function(a){return this.generateClass(l.texts,a.id)},i.classShape=function(a){return this.generateClass(l.shape,a.index)},i.classShapes=function(a){return this.generateClass(l.shapes,a.id)},i.classLine=function(a){return this.classShape(a)+this.generateClass(l.line,a.id)},i.classLines=function(a){return this.classShapes(a)+this.generateClass(l.lines,a.id)},i.classCircle=function(a){return this.classShape(a)+this.generateClass(l.circle,a.index)},i.classCircles=function(a){return this.classShapes(a)+this.generateClass(l.circles,a.id)},i.classBar=function(a){return this.classShape(a)+this.generateClass(l.bar,a.index)},i.classBars=function(a){return this.classShapes(a)+this.generateClass(l.bars,a.id)},i.classArc=function(a){return this.classShape(a.data)+this.generateClass(l.arc,a.data.id)},i.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(l.arcs,a.data.id)},i.classArea=function(a){return this.classShape(a)+this.generateClass(l.area,a.id)},i.classAreas=function(a){return this.classShapes(a)+this.generateClass(l.areas,a.id)},i.classRegion=function(a,b){return this.generateClass(l.region,b)+" "+("class"in a?a["class"]:"")},i.classEvent=function(a){return this.generateClass(l.eventRect,a.index)},i.classTarget=function(a){var b=this,c=b.config.data_classes[a],d="";return c&&(d=" "+l.target+"-"+c),b.generateClass(l.target,a)+d},i.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)},i.classFocused=function(a){return" "+(this.focusedTargetIds.indexOf(a.id)>=0?l.focused:"")},i.classDefocused=function(a){return" "+(this.defocusedTargetIds.indexOf(a.id)>=0?l.defocused:"")},i.classChartText=function(a){return l.chartText+this.classTarget(a.id)},i.classChartLine=function(a){return l.chartLine+this.classTarget(a.id)},i.classChartBar=function(a){return l.chartBar+this.classTarget(a.id)},i.classChartArc=function(a){return l.chartArc+this.classTarget(a.data.id)},i.getTargetSelectorSuffix=function(a){return a||0===a?("-"+a).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},i.selectorTarget=function(a,b){return(b||"")+"."+l.target+this.getTargetSelectorSuffix(a)},i.selectorTargets=function(a,b){var c=this;return a=a||[],a.length?a.map(function(a){return c.selectorTarget(a,b)}):null},i.selectorLegend=function(a){return"."+l.legendItem+this.getTargetSelectorSuffix(a)},i.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};var m=i.isValue=function(a){return a||0===a},n=i.isFunction=function(a){return"function"==typeof a},o=i.isString=function(a){return"string"==typeof a},p=i.isUndefined=function(a){return"undefined"==typeof a},q=i.isDefined=function(a){return"undefined"!=typeof a},r=i.ceil10=function(a){return 10*Math.ceil(a/10)},s=i.asHalfPixel=function(a){return Math.ceil(a)+.5},t=i.diffDomain=function(a){return a[1]-a[0]},u=i.isEmpty=function(a){return"undefined"==typeof a||null===a||o(a)&&0===a.length||"object"==typeof a&&0===Object.keys(a).length},v=i.notEmpty=function(a){return!i.isEmpty(a)},w=i.getOption=function(a,b,c){return q(a[b])?a[b]:c},x=i.hasValue=function(a,b){var c=!1;return Object.keys(a).forEach(function(d){a[d]===b&&(c=!0)}),c},y=i.sanitise=function(a){return"string"==typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},z=i.getPathBox=function(a){var b=a.getBoundingClientRect(),c=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)],d=c[0].x,e=Math.min(c[0].y,c[1].y);return{x:d,y:e,width:b.width,height:b.height}};h.focus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),this.revert(),this.defocus(),b.classed(l.focused,!0).classed(l.defocused,!1),c.hasArcType()&&c.expandArc(a),c.toggleFocusLegend(a,!0),c.focusedTargetIds=a,c.defocusedTargetIds=c.defocusedTargetIds.filter(function(b){return a.indexOf(b)<0})},h.defocus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),b.classed(l.focused,!1).classed(l.defocused,!0),c.hasArcType()&&c.unexpandArc(a),c.toggleFocusLegend(a,!1),c.focusedTargetIds=c.focusedTargetIds.filter(function(b){return a.indexOf(b)<0}),c.defocusedTargetIds=a},h.revert=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a)),b.classed(l.focused,!1).classed(l.defocused,!1),c.hasArcType()&&c.unexpandArc(a),c.config.legend_show&&(c.showLegend(a.filter(c.isLegendToShow.bind(c))),c.legend.selectAll(c.selectorLegends(a)).filter(function(){return c.d3.select(this).classed(l.legendItemFocused)}).classed(l.legendItemFocused,!1)),c.focusedTargetIds=[],c.defocusedTargetIds=[]},h.show=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.removeHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",1,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",1)}),b.withLegend&&d.showLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},h.hide=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.addHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",0,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",0)}),b.withLegend&&d.hideLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},h.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})},h.zoom=function(a){var b=this.internal;return a&&(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),b.brush.extent(a),b.redraw({withUpdateXDomain:!0,withY:b.config.zoom_rescale}),b.config.zoom_onzoom.call(this,b.x.orgDomain())),b.brush.extent()},h.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a,b.updateAndRedraw()},h.unzoom=function(){var a=this.internal;a.brush.clear().update(),a.redraw({withUpdateXDomain:!0})},h.zoom.max=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_max=d.max([b.orgXDomain[1],a])):c.zoom_x_max},h.zoom.min=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_min=d.min([b.orgXDomain[0],a])):c.zoom_x_min},h.zoom.range=function(a){return arguments.length?(q(a.max)&&this.domain.max(a.max),void(q(a.min)&&this.domain.min(a.min))):{max:this.domain.max(),min:this.domain.min()}},h.load=function(a){var b=this.internal,c=b.config;return a.xs&&b.addXs(a.xs),"names"in a&&h.data.names.bind(this)(a.names),"classes"in a&&Object.keys(a.classes).forEach(function(b){c.data_classes[b]=a.classes[b]}),"categories"in a&&b.isCategorized()&&(c.axis_x_categories=a.categories),"axes"in a&&Object.keys(a.axes).forEach(function(b){c.data_axes[b]=a.axes[b]}),"colors"in a&&Object.keys(a.colors).forEach(function(b){c.data_colors[b]=a.colors[b]}),"cacheIds"in a&&b.hasCaches(a.cacheIds)?void b.load(b.getCaches(a.cacheIds),a.done):void("unload"in a?b.unload(b.mapToTargetIds("boolean"==typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a))},h.unload=function(a){var b=this.internal;a=a||{},a instanceof Array?a={ids:a}:"string"==typeof a&&(a={ids:[a]}),b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()})},h.flow=function(a){var b,c,d,e,f,g,h,i,j=this.internal,k=[],l=j.getMaxDataCount(),n=0,o=0;if(a.json)c=j.convertJsonToData(a.json,a.keys);else if(a.rows)c=j.convertRowsToData(a.rows);else{if(!a.columns)return;c=j.convertColumnsToData(a.columns)}b=j.convertDataToTargets(c,!0),j.data.targets.forEach(function(a){var c,d,e=!1;for(c=0;c<b.length;c++)if(a.id===b[c].id){for(e=!0,a.values[a.values.length-1]&&(o=a.values[a.values.length-1].index+1),n=b[c].values.length,d=0;n>d;d++)b[c].values[d].index=o+d,j.isTimeSeries()||(b[c].values[d].x=o+d);a.values=a.values.concat(b[c].values),b.splice(c,1);break}e||k.push(a.id)}),j.data.targets.forEach(function(a){var b,c;for(b=0;b<k.length;b++)if(a.id===k[b])for(o=a.values[a.values.length-1].index+1,c=0;n>c;c++)a.values.push({id:a.id,index:o+c,x:j.isTimeSeries()?j.getOtherTargetX(o+c):o+c,value:null})}),j.data.targets.length&&b.forEach(function(a){var b,c=[];for(b=j.data.targets[0].values[0].index;o>b;b++)c.push({id:a.id,index:b,x:j.isTimeSeries()?j.getOtherTargetX(b):b,value:null});a.values.forEach(function(a){a.index+=o,j.isTimeSeries()||(a.x+=o)}),a.values=c.concat(a.values)}),j.data.targets=j.data.targets.concat(b),d=j.getMaxDataCount(),f=j.data.targets[0],g=f.values[0],q(a.to)?(n=0,i=j.isTimeSeries()?j.parseDate(a.to):a.to,f.values.forEach(function(a){a.x<i&&n++})):q(a.length)&&(n=a.length),l?1===l&&j.isTimeSeries()&&(h=(f.values[f.values.length-1].x-g.x)/2,e=[new Date(+g.x-h),new Date(+g.x+h)],j.updateXDomain(null,!0,!0,!1,e)):(h=j.isTimeSeries()?f.values.length>1?f.values[f.values.length-1].x-g.x:g.x-j.getXDomain(j.data.targets)[0]:1,e=[g.x-h,g.x],j.updateXDomain(null,!0,!0,!1,e)),j.updateTargets(j.data.targets),j.redraw({flow:{index:g.index,length:n,duration:m(a.duration)?a.duration:j.config.transition_duration,done:a.done,orgDataCount:l},withLegend:!0,withTransition:l>1,withTrimXDomain:!1,withUpdateXAxis:!0})},i.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var e,f,g,h=a.targets,i=a.flow,j=a.drawBar,k=a.drawLine,m=a.drawArea,n=a.cx,o=a.cy,p=a.xv,q=a.xForText,r=a.yForText,s=a.duration,u=1,v=i.index,w=i.length,x=b.getValueOnIndex(b.data.targets[0].values,v),y=b.getValueOnIndex(b.data.targets[0].values,v+w),z=b.x.domain(),A=i.duration||s,B=i.done||function(){},C=b.generateWait(),D=b.xgrid||d.selectAll([]),E=b.xgridLines||d.selectAll([]),F=b.mainRegion||d.selectAll([]),G=b.mainText||d.selectAll([]),H=b.mainBar||d.selectAll([]),I=b.mainLine||d.selectAll([]),J=b.mainArea||d.selectAll([]),K=b.mainCircle||d.selectAll([]);b.flowing=!0,b.data.targets.forEach(function(a){a.values.splice(0,w)}),g=b.updateXDomain(h,!0,!0),b.updateXGrid&&b.updateXGrid(!0),i.orgDataCount?e=1===i.orgDataCount||(x&&x.x)===(y&&y.x)?b.x(z[0])-b.x(g[0]):b.isTimeSeries()?b.x(z[0])-b.x(g[0]):b.x(x.x)-b.x(y.x):1!==b.data.targets[0].values.length?e=b.x(z[0])-b.x(g[0]):b.isTimeSeries()?(x=b.getValueOnIndex(b.data.targets[0].values,0),y=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),e=b.x(x.x)-b.x(y.x)):e=t(g)/2,u=t(z)/t(g),f="translate("+e+",0) scale("+u+",1)",b.hideXGridFocus(),d.transition().ease("linear").duration(A).each(function(){C.add(b.axes.x.transition().call(b.xAxis)),C.add(H.transition().attr("transform",f)),C.add(I.transition().attr("transform",f)),C.add(J.transition().attr("transform",f)),C.add(K.transition().attr("transform",f)),C.add(G.transition().attr("transform",f)),C.add(F.filter(b.isRegionOnX).transition().attr("transform",f)),C.add(D.transition().attr("transform",f)),C.add(E.transition().attr("transform",f))}).call(C,function(){var a,d=[],e=[],f=[];if(w){for(a=0;w>a;a++)d.push("."+l.shape+"-"+(v+a)),e.push("."+l.text+"-"+(v+a)),f.push("."+l.eventRect+"-"+(v+a));b.svg.selectAll("."+l.shapes).selectAll(d).remove(),b.svg.selectAll("."+l.texts).selectAll(e).remove(),b.svg.selectAll("."+l.eventRects).selectAll(f).remove(),b.svg.select("."+l.xgrid).remove()}D.attr("transform",null).attr(b.xgridAttr),E.attr("transform",null),E.select("line").attr("x1",c.axis_rotated?0:p).attr("x2",c.axis_rotated?b.width:p),E.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",p),H.attr("transform",null).attr("d",j),I.attr("transform",null).attr("d",k),J.attr("transform",null).attr("d",m),K.attr("transform",null).attr("cx",n).attr("cy",o),G.attr("transform",null).attr("x",q).attr("y",r).style("fill-opacity",b.opacityForText.bind(b)),F.attr("transform",null),F.select("rect").filter(b.isRegionOnX).attr("x",b.regionX.bind(b)).attr("width",b.regionWidth.bind(b)),c.interaction_enabled&&b.redrawEventRect(),B(),b.flowing=!1})}},h.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+l.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+l.shape).filter(function(){return c.select(this).classed(l.SELECTED)}).map(function(a){return a.map(function(a){var b=a.__data__;return b.data?b.data:b})}))},h.select=function(a,b,c){var d=this.internal,e=d.d3,f=d.config;f.data_selection_enabled&&d.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(g,h){var i=e.select(this),j=g.data?g.data.id:g.id,k=d.getToggle(this,g).bind(d),m=f.data_selection_grouped||!a||a.indexOf(j)>=0,n=!b||b.indexOf(h)>=0,o=i.classed(l.SELECTED);i.classed(l.line)||i.classed(l.area)||(m&&n?f.data_selection_isselectable(g)&&!o&&k(!0,i.classed(l.SELECTED,!0),g,h):q(c)&&c&&o&&k(!1,i.classed(l.SELECTED,!1),g,h))})},h.unselect=function(a,b){var c=this.internal,d=c.d3,e=c.config;e.data_selection_enabled&&c.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(f,g){var h=d.select(this),i=f.data?f.data.id:f.id,j=c.getToggle(this,f).bind(c),k=e.data_selection_grouped||!a||a.indexOf(i)>=0,m=!b||b.indexOf(g)>=0,n=h.classed(l.SELECTED);h.classed(l.line)||h.classed(l.area)||k&&m&&e.data_selection_isselectable(f)&&n&&j(!1,h.classed(l.SELECTED,!1),f,g)})},h.transform=function(a,b){var c=this.internal,d=["pie","donut"].indexOf(a)>=0?{withTransform:!0}:null;c.transformTo(b,a,d)},i.transformTo=function(a,b,c){var d=this,e=!d.hasArcType(),f=c||{withTransitionForAxis:e};f.withTransitionForTransform=!1,d.transiting=!1,d.setTargetType(a,b),d.updateTargets(d.data.targets),d.updateAndRedraw(f)},h.groups=function(a){var b=this.internal,c=b.config;return p(a)?c.data_groups:(c.data_groups=a,b.redraw(),c.data_groups)},h.xgrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_x_lines=a,b.redrawWithoutRescale(),c.grid_x_lines):c.grid_x_lines},h.xgrids.add=function(a){var b=this.internal;return this.xgrids(b.config.grid_x_lines.concat(a?a:[]))},h.xgrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!0)},h.ygrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_y_lines=a,b.redrawWithoutRescale(),c.grid_y_lines):c.grid_y_lines},h.ygrids.add=function(a){var b=this.internal;return this.ygrids(b.config.grid_y_lines.concat(a?a:[]))},h.ygrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!1)},h.regions=function(a){var b=this.internal,c=b.config;return a?(c.regions=a,b.redrawWithoutRescale(),c.regions):c.regions},h.regions.add=function(a){var b=this.internal,c=b.config;return a?(c.regions=c.regions.concat(a),b.redrawWithoutRescale(),c.regions):c.regions},h.regions.remove=function(a){var b,c,d,e=this.internal,f=e.config;return a=a||{},b=e.getOption(a,"duration",f.transition_duration),c=e.getOption(a,"classes",[l.region]),d=e.main.select("."+l.regions).selectAll(c.map(function(a){return"."+a})),(b?d.transition().duration(b):d).style("opacity",0).remove(),f.regions=f.regions.filter(function(a){var b=!1;return a["class"]?(a["class"].split(" ").forEach(function(a){c.indexOf(a)>=0&&(b=!0)}),!b):!0}),f.regions},h.data=function(a){var b=this.internal.data.targets;return"undefined"==typeof a?b:b.filter(function(b){return[].concat(a).indexOf(b.id)>=0})},h.data.shown=function(a){return this.internal.filterTargetsToShow(this.data(a))},h.data.values=function(a){var b,c=null;return a&&(b=this.data(a),c=b[0]?b[0].values.map(function(a){return a.value}):null),c},h.data.names=function(a){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",a)},h.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)},h.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)},h.category=function(a,b){var c=this.internal,d=c.config;return arguments.length>1&&(d.axis_x_categories[a]=b,c.redraw()),d.axis_x_categories[a]},h.categories=function(a){var b=this.internal,c=b.config;return arguments.length?(c.axis_x_categories=a,b.redraw(),c.axis_x_categories):c.axis_x_categories},h.color=function(a){var b=this.internal;return b.color(a)},h.x=function(a){var b=this.internal;return arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},h.xs=function(a){var b=this.internal;return arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},h.axis=function(){},h.axis.labels=function(a){var b=this.internal;arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),b.axis.updateLabels())},h.axis.max=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(m(a.x)&&(c.axis_x_max=a.x),m(a.y)&&(c.axis_y_max=a.y),m(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}},h.axis.min=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(m(a.x)&&(c.axis_x_min=a.x),m(a.y)&&(c.axis_y_min=a.y),m(a.y2)&&(c.axis_y2_min=a.y2)):c.axis_y_min=c.axis_y2_min=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}},h.axis.range=function(a){return arguments.length?(q(a.max)&&this.axis.max(a.max),void(q(a.min)&&this.axis.min(a.min))):{max:this.axis.max(),min:this.axis.min()}},h.legend=function(){},h.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},h.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},h.resize=function(a){var b=this.internal,c=b.config;c.size_width=a?a.width:null,c.size_height=a?a.height:null,this.flush()},h.flush=function(){var a=this.internal;a.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},h.destroy=function(){var b=this.internal;if(a.clearInterval(b.intervalForObserveInserted),void 0!==b.resizeTimeout&&a.clearTimeout(b.resizeTimeout),a.detachEvent)a.detachEvent("onresize",b.resizeFunction);else if(a.removeEventListener)a.removeEventListener("resize",b.resizeFunction);else{var c=a.onresize;c&&c.add&&c.remove&&c.remove(b.resizeFunction)}return b.selectChart.classed("c3",!1).html(""),Object.keys(b).forEach(function(a){b[a]=null}),null},h.tooltip=function(){},h.tooltip.show=function(a){var b,c,d=this.internal;a.mouse&&(c=a.mouse),a.data?d.isMultipleX()?(c=[d.x(a.data.x),d.getYScale(a.data.id)(a.data.value)],b=null):b=m(a.data.index)?a.data.index:d.getIndexByX(a.data.x):"undefined"!=typeof a.x?b=d.getIndexByX(a.x):"undefined"!=typeof a.index&&(b=a.index),d.dispatchEvent("mouseover",b,c),d.dispatchEvent("mousemove",b,c),d.config.tooltip_onshow.call(d,a.data)},h.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)};var A;i.isSafari=function(){var b=a.navigator.userAgent;return b.indexOf("Safari")>=0&&b.indexOf("Chrome")<0},i.isChrome=function(){var b=a.navigator.userAgent;return b.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),function(){"SVGPathSeg"in a||(a.SVGPathSeg=function(a,b,c){this.pathSegType=a,this.pathSegTypeAsLetter=b,this._owningPathSegList=c},SVGPathSeg.PATHSEG_UNKNOWN=0,SVGPathSeg.PATHSEG_CLOSEPATH=1,SVGPathSeg.PATHSEG_MOVETO_ABS=2,SVGPathSeg.PATHSEG_MOVETO_REL=3,SVGPathSeg.PATHSEG_LINETO_ABS=4,SVGPathSeg.PATHSEG_LINETO_REL=5,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,SVGPathSeg.PATHSEG_ARC_ABS=10,SVGPathSeg.PATHSEG_ARC_REL=11,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},a.SVGPathSegClosePath=function(a){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CLOSEPATH,"z",a)},SVGPathSegClosePath.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},SVGPathSegClosePath.prototype.clone=function(){return new SVGPathSegClosePath(void 0)},a.SVGPathSegMovetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_ABS,"M",a),this._x=b,this._y=c},SVGPathSegMovetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoAbs.prototype.clone=function(){return new SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegMovetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_REL,"m",a),this._x=b,this._y=c},SVGPathSegMovetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoRel.prototype.clone=function(){return new SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_ABS,"L",a),this._x=b,this._y=c},SVGPathSegLinetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoAbs.prototype.clone=function(){return new SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoAbs.prototype,"y",{
get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_REL,"l",a),this._x=b,this._y=c},SVGPathSegLinetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoRel.prototype.clone=function(){return new SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f,g){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",a),this._x=b,this._y=c,this._x1=d,this._y1=e,this._x2=f,this._y2=g},SVGPathSegCurvetoCubicAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f,g){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",a),this._x=b,this._y=c,this._x1=d,this._y1=e,this._x2=f,this._y2=g},SVGPathSegCurvetoCubicRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticAbs=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",a),this._x=b,this._y=c,this._x1=d,this._y1=e},SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticRel=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",a),this._x=b,this._y=c,this._x1=d,this._y1=e},SVGPathSegCurvetoQuadraticRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegArcAbs=function(a,b,c,d,e,f,g,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_ABS,"A",a),this._x=b,this._y=c,this._r1=d,this._r2=e,this._angle=f,this._largeArcFlag=g,this._sweepFlag=h},SVGPathSegArcAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcAbs.prototype.clone=function(){return new SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegArcRel=function(a,b,c,d,e,f,g,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_REL,"a",a),this._x=b,this._y=c,this._r1=d,this._r2=e,this._angle=f,this._largeArcFlag=g,this._sweepFlag=h},SVGPathSegArcRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcRel.prototype.clone=function(){return new SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoHorizontalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",a),this._x=b},SVGPathSegLinetoHorizontalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoHorizontalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",a),this._x=b},SVGPathSegLinetoHorizontalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoVerticalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",a),this._y=b},SVGPathSegLinetoVerticalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoVerticalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",a),this._y=b},SVGPathSegLinetoVerticalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",a),this._x=b,this._y=c,this._x2=d,this._y2=e},SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",a),this._x=b,this._y=c,this._x2=d,this._y2=e},SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticSmoothAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",a),this._x=b,this._y=c},SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticSmoothRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",a),this._x=b,this._y=c},SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new SVGPathSegClosePath(void 0)},SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(a,b){return new SVGPathSegMovetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegMovetoRel=function(a,b){return new SVGPathSegMovetoRel(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(a,b){return new SVGPathSegLinetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoRel=function(a,b){return new SVGPathSegLinetoRel(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f){return new SVGPathSegCurvetoCubicAbs(void 0,a,b,c,d,e,f)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f){return new SVGPathSegCurvetoCubicRel(void 0,a,b,c,d,e,f)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticAbs(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegArcAbs=function(a,b,c,d,e,f,g){return new SVGPathSegArcAbs(void 0,a,b,c,d,e,f,g)},SVGPathElement.prototype.createSVGPathSegArcRel=function(a,b,c,d,e,f,g){return new SVGPathSegArcRel(void 0,a,b,c,d,e,f,g)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(a){return new SVGPathSegLinetoHorizontalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(a){return new SVGPathSegLinetoHorizontalRel(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(a){return new SVGPathSegLinetoVerticalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(a){return new SVGPathSegLinetoVerticalRel(void 0,a)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(a,b){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(a,b){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,a,b)}),"SVGPathSegList"in a||(a.SVGPathSegList=function(a){this._pathElement=a,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},Object.defineProperty(SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},SVGPathSegList.prototype._updateListFromPathMutations=function(a){if(this._pathElement){var b=!1;a.forEach(function(a){"d"==a.attributeName&&(b=!0)}),b&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},SVGPathSegList.prototype.segmentChanged=function(a){this._writeListToPath()},SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(a){a._owningPathSegList=null}),this._list=[],this._writeListToPath()},SVGPathSegList.prototype.initialize=function(a){return this._checkPathSynchronizedToList(),this._list=[a],a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList.prototype._checkValidIndex=function(a){if(isNaN(a)||0>a||a>=this.numberOfItems)throw"INDEX_SIZE_ERR"},SVGPathSegList.prototype.getItem=function(a){return this._checkPathSynchronizedToList(),this._checkValidIndex(a),this._list[a]},SVGPathSegList.prototype.insertItemBefore=function(a,b){return this._checkPathSynchronizedToList(),b>this.numberOfItems&&(b=this.numberOfItems),a._owningPathSegList&&(a=a.clone()),this._list.splice(b,0,a),a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList.prototype.replaceItem=function(a,b){return this._checkPathSynchronizedToList(),a._owningPathSegList&&(a=a.clone()),this._checkValidIndex(b),this._list[b]=a,a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList.prototype.removeItem=function(a){this._checkPathSynchronizedToList(),this._checkValidIndex(a);var b=this._list[a];return this._list.splice(a,1),this._writeListToPath(),b},SVGPathSegList.prototype.appendItem=function(a){return this._checkPathSynchronizedToList(),a._owningPathSegList&&(a=a.clone()),this._list.push(a),a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList._pathSegArrayAsString=function(a){var b="",c=!0;return a.forEach(function(a){c?(c=!1,b+=a._asPathString()):b+=" "+a._asPathString()}),b},SVGPathSegList.prototype._parsePath=function(a){if(!a||0==a.length)return[];var b=this,c=function(){this.pathSegList=[]};c.prototype.appendSegment=function(a){this.pathSegList.push(a)};var d=function(a){this._string=a,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};d.prototype._isCurrentSpace=function(){var a=this._string[this._currentIndex];return" ">=a&&(" "==a||"\n"==a||"\t"==a||"\r"==a||"\f"==a)},d.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},d.prototype._skipOptionalSpacesOrDelimiter=function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex)?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},d.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},d.prototype.peekSegmentType=function(){var a=this._string[this._currentIndex];return this._pathSegTypeFromChar(a)},d.prototype._pathSegTypeFromChar=function(a){switch(a){case"Z":case"z":return SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return SVGPathSeg.PATHSEG_LINETO_REL;case"C":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return SVGPathSeg.PATHSEG_ARC_ABS;case"a":return SVGPathSeg.PATHSEG_ARC_REL;case"H":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return SVGPathSeg.PATHSEG_UNKNOWN}},d.prototype._nextCommandHelper=function(a,b){return("+"==a||"-"==a||"."==a||a>="0"&&"9">=a)&&b!=SVGPathSeg.PATHSEG_CLOSEPATH?b==SVGPathSeg.PATHSEG_MOVETO_ABS?SVGPathSeg.PATHSEG_LINETO_ABS:b==SVGPathSeg.PATHSEG_MOVETO_REL?SVGPathSeg.PATHSEG_LINETO_REL:b:SVGPathSeg.PATHSEG_UNKNOWN},d.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var a=this.peekSegmentType();return a==SVGPathSeg.PATHSEG_MOVETO_ABS||a==SVGPathSeg.PATHSEG_MOVETO_REL},d.prototype._parseNumber=function(){var a=0,b=0,c=1,d=0,e=1,f=1,g=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,e=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))){for(var h=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=h)for(var i=this._currentIndex-1,j=1;i>=h;)b+=j*(this._string.charAt(i--)-"0"),j*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)d+=(this._string.charAt(this._currentIndex++)-"0")*(c*=.1)}if(this._currentIndex!=g&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,f=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)a*=10,a+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var k=b+d;if(k*=e,a&&(k*=Math.pow(10,f*a)),g!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),k}},d.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var a=!1,b=this._string.charAt(this._currentIndex++);if("0"==b)a=!1;else{if("1"!=b)return;a=!0}return this._skipOptionalSpacesOrDelimiter(),a}},d.prototype.parseSegment=function(){var a=this._string[this._currentIndex],c=this._pathSegTypeFromChar(a);if(c==SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==SVGPathSeg.PATHSEG_UNKNOWN)return null;if(c=this._nextCommandHelper(a,this._previousCommand),c==SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=c,c){case SVGPathSeg.PATHSEG_MOVETO_REL:return new SVGPathSegMovetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_MOVETO_ABS:return new SVGPathSegMovetoAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_REL:return new SVGPathSegLinetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_ABS:return new SVGPathSegLinetoAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new SVGPathSegLinetoHorizontalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new SVGPathSegLinetoHorizontalAbs(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new SVGPathSegLinetoVerticalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new SVGPathSegLinetoVerticalAbs(b,this._parseNumber());case SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new SVGPathSegClosePath(b);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicRel(b,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var d={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicAbs(b,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothRel(b,d.x,d.y,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothAbs(b,d.x,d.y,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticRel(b,d.x,d.y,d.x1,d.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var d={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticAbs(b,d.x,d.y,d.x1,d.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new SVGPathSegCurvetoQuadraticSmoothRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new SVGPathSegCurvetoQuadraticSmoothAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_ARC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcRel(b,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);case SVGPathSeg.PATHSEG_ARC_ABS:
var d={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcAbs(b,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);default:throw"Unknown path seg type."}};var e=new c,f=new d(a);if(!f.initialCommandIsMoveTo())return[];for(;f.hasMoreData();){var g=f.parseSegment();if(!g)return[];e.appendSegment(g)}return e.pathSegList})}(),"function"==typeof define&&define.amd?define("c3",["d3"],function(){return k}):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=k:a.c3=k}(window);!function(){function n(n,t){return t>n?-1:n>t?1:n>=t?0:0/0}function t(n){return null===n?0/0:+n}function e(n){return!isNaN(n)}function r(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)>0?u=i:r=i+1}return r}}}function u(n){return n.length}function i(n){for(var t=1;n*t%1;)t*=10;return t}function o(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function a(){this._=Object.create(null)}function c(n){return(n+="")===da||n[0]===ma?ma+n:n}function l(n){return(n+="")[0]===ma?n.slice(1):n}function s(n){return c(n)in this._}function f(n){return(n=c(n))in this._&&delete this._[n]}function h(){var n=[];for(var t in this._)n.push(l(t));return n}function g(){var n=0;for(var t in this._)++n;return n}function p(){for(var n in this._)return!1;return!0}function v(){this._=Object.create(null)}function d(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function m(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=ya.length;r>e;++e){var u=ya[e]+t;if(u in n)return u}}function y(){}function M(){}function x(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new a;return t.on=function(t,u){var i,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function b(){ta.event.preventDefault()}function _(){for(var n,t=ta.event;n=t.sourceEvent;)t=n;return t}function w(n){for(var t=new M,e=0,r=arguments.length;++e<r;)t[arguments[e]]=x(t);return t.of=function(e,r){return function(u){try{var i=u.sourceEvent=ta.event;u.target=n,ta.event=u,t[u.type].apply(e,r)}finally{ta.event=i}}},t}function S(n){return xa(n,ka),n}function k(n){return"function"==typeof n?n:function(){return ba(n,this)}}function E(n){return"function"==typeof n?n:function(){return _a(n,this)}}function A(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function u(){this.setAttribute(n,t)}function i(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=ta.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?i:u}function N(n){return n.trim().replace(/\s+/g," ")}function C(n){return new RegExp("(?:^|\\s+)"+ta.requote(n)+"(?:\\s+|$)","g")}function z(n){return(n+"").trim().split(/^|\s+/)}function q(n,t){function e(){for(var e=-1;++e<u;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}n=z(n).map(L);var u=n.length;return"function"==typeof t?r:e}function L(n){var t=C(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||e.setAttribute("class",N(u+" "+n))):e.setAttribute("class",N(u.replace(t," ")))}}function T(n,t,e){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,e)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?i:u}function R(n,t){function e(){delete this[n]}function r(){this[n]=t}function u(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?u:r}function D(n){return"function"==typeof n?n:(n=ta.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,n)}}function P(){var n=this.parentNode;n&&n.removeChild(this)}function U(n){return{__data__:n}}function j(n){return function(){return Sa(this,n)}}function F(t){return arguments.length||(t=n),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function H(n,t){for(var e=0,r=n.length;r>e;e++)for(var u,i=n[e],o=0,a=i.length;a>o;o++)(u=i[o])&&t(u,o,e);return n}function O(n){return xa(n,Aa),n}function Y(n){var t,e;return function(r,u,i){var o,a=n[i].update,c=a.length;for(i!=e&&(e=i,t=0),u>=t&&(t=u+1);!(o=a[t])&&++t<c;);return o}}function I(n){var t=n.__transition__;t&&++t.active}function Z(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function u(){var u=c(t,ra(arguments));r.call(this),this.addEventListener(n,this[o]=u,u.$=e),u._=t}function i(){var t,e=new RegExp("^__on([^.]+)"+ta.requote(n)+"$");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),c=V;a>0&&(n=n.slice(0,a));var l=Ca.get(n);return l&&(n=l,c=X),a?t?u:r:t?y:i}function V(n,t){return function(e){var r=ta.event;ta.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{ta.event=r}}}function X(n,t){var e=V(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function $(){var n=".dragsuppress-"+ ++qa,t="click"+n,e=ta.select(oa).on("touchmove"+n,b).on("dragstart"+n,b).on("selectstart"+n,b);if(za){var r=ia.style,u=r[za];r[za]="none"}return function(i){if(e.on(n,null),za&&(r[za]=u),i){var o=function(){e.on(t,null)};e.on(t,function(){b(),o()},!0),setTimeout(o,0)}}}function B(n,t){t.changedTouches&&(t=t.changedTouches[0]);var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();if(0>La&&(oa.scrollX||oa.scrollY)){e=ta.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var u=e[0][0].getScreenCTM();La=!(u.f||u.e),e.remove()}return La?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}function W(){return ta.event.changedTouches[0].identifier}function J(){return ta.event.target}function G(){return oa}function K(n){return n>0?1:0>n?-1:0}function Q(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function nt(n){return n>1?0:-1>n?Da:Math.acos(n)}function tt(n){return n>1?ja:-1>n?-ja:Math.asin(n)}function et(n){return((n=Math.exp(n))-1/n)/2}function rt(n){return((n=Math.exp(n))+1/n)/2}function ut(n){return((n=Math.exp(2*n))-1)/(n+1)}function it(n){return(n=Math.sin(n/2))*n}function ot(){}function at(n,t,e){return this instanceof at?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof at?new at(n.h,n.s,n.l):bt(""+n,_t,at):new at(n,t,e)}function ct(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?i+(o-i)*n/60:180>n?o:240>n?i+(o-i)*(240-n)/60:i}function u(n){return Math.round(255*r(n))}var i,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,o=.5>=e?e*(1+t):e+t-e*t,i=2*e-o,new mt(u(n+120),u(n),u(n-120))}function lt(n,t,e){return this instanceof lt?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof lt?new lt(n.h,n.c,n.l):n instanceof ft?gt(n.l,n.a,n.b):gt((n=wt((n=ta.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new lt(n,t,e)}function st(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new ft(e,Math.cos(n*=Fa)*t,Math.sin(n)*t)}function ft(n,t,e){return this instanceof ft?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof ft?new ft(n.l,n.a,n.b):n instanceof lt?st(n.h,n.c,n.l):wt((n=mt(n)).r,n.g,n.b):new ft(n,t,e)}function ht(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return u=pt(u)*Ja,r=pt(r)*Ga,i=pt(i)*Ka,new mt(dt(3.2404542*u-1.5371385*r-.4985314*i),dt(-.969266*u+1.8760108*r+.041556*i),dt(.0556434*u-.2040259*r+1.0572252*i))}function gt(n,t,e){return n>0?new lt(Math.atan2(e,t)*Ha,Math.sqrt(t*t+e*e),n):new lt(0/0,0/0,n)}function pt(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function vt(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function dt(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function mt(n,t,e){return this instanceof mt?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof mt?new mt(n.r,n.g,n.b):bt(""+n,mt,ct):new mt(n,t,e)}function yt(n){return new mt(n>>16,255&n>>8,255&n)}function Mt(n){return yt(n)+""}function xt(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function bt(n,t,e){var r,u,i,o=0,a=0,c=0;if(r=/([a-z]+)\((.*)\)/i.exec(n))switch(u=r[2].split(","),r[1]){case"hsl":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(kt(u[0]),kt(u[1]),kt(u[2]))}return(i=tc.get(n))?t(i.r,i.g,i.b):(null==n||"#"!==n.charAt(0)||isNaN(i=parseInt(n.slice(1),16))||(4===n.length?(o=(3840&i)>>4,o=o>>4|o,a=240&i,a=a>>4|a,c=15&i,c=c<<4|c):7===n.length&&(o=(16711680&i)>>16,a=(65280&i)>>8,c=255&i)),t(o,a,c))}function _t(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-i,c=(o+i)/2;return a?(u=.5>c?a/(o+i):a/(2-o-i),r=n==o?(t-e)/a+(e>t?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=0/0,u=c>0&&1>c?0:r),new at(r,u,c)}function wt(n,t,e){n=St(n),t=St(t),e=St(e);var r=vt((.4124564*n+.3575761*t+.1804375*e)/Ja),u=vt((.2126729*n+.7151522*t+.072175*e)/Ga),i=vt((.0193339*n+.119192*t+.9503041*e)/Ka);return ft(116*u-16,500*(r-u),200*(u-i))}function St(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function kt(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function Et(n){return"function"==typeof n?n:function(){return n}}function At(n){return n}function Nt(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Ct(t,e,n,r)}}function Ct(n,t,e,r){function u(){var n,t=c.status;if(!t&&qt(c)||t>=200&&300>t||304===t){try{n=e.call(i,c)}catch(r){return o.error.call(i,r),void 0}o.load.call(i,n)}else o.error.call(i,c)}var i={},o=ta.dispatch("beforesend","progress","load","error"),a={},c=new XMLHttpRequest,l=null;return!oa.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(n)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=u:c.onreadystatechange=function(){c.readyState>3&&u()},c.onprogress=function(n){var t=ta.event;ta.event=n;try{o.progress.call(i,c)}finally{ta.event=t}},i.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",i):t},i.responseType=function(n){return arguments.length?(l=n,i):l},i.response=function(n){return e=n,i},["get","post"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(ra(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),c.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),c.setRequestHeader)for(var s in a)c.setRequestHeader(s,a[s]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=l&&(c.responseType=l),null!=u&&i.on("error",u).on("load",function(n){u(null,n)}),o.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},ta.rebind(i,o,"on"),null==r?i:i.get(zt(r))}function zt(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function qt(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function Lt(){var n=Tt(),t=Rt()-n;t>24?(isFinite(t)&&(clearTimeout(ic),ic=setTimeout(Lt,t)),uc=0):(uc=1,ac(Lt))}function Tt(){var n=Date.now();for(oc=ec;oc;)n>=oc.t&&(oc.f=oc.c(n-oc.t)),oc=oc.n;return n}function Rt(){for(var n,t=ec,e=1/0;t;)t.f?t=n?n.n=t.n:ec=t.n:(t.t<e&&(e=t.t),t=(n=t).n);return rc=n,e}function Dt(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Pt(n,t){var e=Math.pow(10,3*va(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function Ut(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r&&e?function(n,t){for(var u=n.length,i=[],o=0,a=r[0],c=0;u>0&&a>0&&(c+a+1>t&&(a=Math.max(1,t-c)),i.push(n.substring(u-=a,u+a)),!((c+=a+1)>t));)a=r[o=(o+1)%r.length];return i.reverse().join(e)}:At;return function(n){var e=lc.exec(n),r=e[1]||" ",o=e[2]||">",a=e[3]||"-",c=e[4]||"",l=e[5],s=+e[6],f=e[7],h=e[8],g=e[9],p=1,v="",d="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),g){case"n":f=!0,g="g";break;case"%":p=100,d="%",g="f";break;case"p":p=100,d="%",g="r";break;case"b":case"o":case"x":case"X":"#"===c&&(v="0"+g.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,g="r"}"$"===c&&(v=u[0],d=u[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=sc.get(g)||jt;var M=l&&f;return function(n){var e=d;if(m&&n%1)return"";var u=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===a?"":a;if(0>p){var c=ta.formatPrefix(n,h);n=c.scale(n),e=c.symbol+d}else n*=p;n=g(n,h);var x,b,_=n.lastIndexOf(".");if(0>_){var w=y?n.lastIndexOf("e"):-1;0>w?(x=n,b=""):(x=n.substring(0,w),b=n.substring(w))}else x=n.substring(0,_),b=t+n.substring(_+1);!l&&f&&(x=i(x,1/0));var S=v.length+x.length+b.length+(M?0:u.length),k=s>S?new Array(S=s-S+1).join(r):"";return M&&(x=i(k+x,k.length?s-b.length:1/0)),u+=v,n=x+b,("<"===o?u+n+k:">"===o?k+u+n:"^"===o?k.substring(0,S>>=1)+u+n+k.substring(S):u+(M?n:k+n))+e}}}function jt(n){return n+""}function Ft(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ht(n,t,e){function r(t){var e=n(t),r=i(e,1);return r-t>t-e?e:r}function u(e){return t(e=n(new hc(e-1)),1),e}function i(n,e){return t(n=new hc(+n),e),n}function o(n,r,i){var o=u(n),a=[];if(i>1)for(;r>o;)e(o)%i||a.push(new Date(+o)),t(o,1);else for(;r>o;)a.push(new Date(+o)),t(o,1);return a}function a(n,t,e){try{hc=Ft;var r=new Ft;return r._=n,o(r,t,e)}finally{hc=Date}}n.floor=n,n.round=r,n.ceil=u,n.offset=i,n.range=o;var c=n.utc=Ot(n);return c.floor=c,c.round=Ot(r),c.ceil=Ot(u),c.offset=Ot(i),c.range=a,n}function Ot(n){return function(t,e){try{hc=Ft;var r=new Ft;return r._=t,n(r,e)._}finally{hc=Date}}}function Yt(n){function t(n){function t(t){for(var e,u,i,o=[],a=-1,c=0;++a<r;)37===n.charCodeAt(a)&&(o.push(n.slice(c,a)),null!=(u=pc[e=n.charAt(++a)])&&(e=n.charAt(++a)),(i=N[e])&&(e=i(t,null==u?"e"===e?" ":"0":u)),o.push(e),c=a+1);return o.push(n.slice(c,a)),o.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},u=e(r,n,t,0);if(u!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&hc!==Ft,o=new(i?Ft:hc);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(0|r.Z/100),r.M+r.Z%100,r.S,r.L),i?o._:o},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,o,a=0,c=t.length,l=e.length;c>a;){if(r>=l)return-1;if(u=t.charCodeAt(a++),37===u){if(o=t.charAt(a++),i=C[o in pc?t.charAt(a++):o],!i||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){_.lastIndex=0;var r=_.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){x.lastIndex=0;var r=x.exec(t.slice(e));return r?(n.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){E.lastIndex=0;var r=E.exec(t.slice(e));return r?(n.m=A.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,r){return e(n,N.c.toString(),t,r)}function c(n,t,r){return e(n,N.x.toString(),t,r)}function l(n,t,r){return e(n,N.X.toString(),t,r)}function s(n,t,e){var r=M.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.utc=function(n){function e(n){try{hc=Ft;var t=new hc;return t._=n,r(t)}finally{hc=Date}}var r=t(n);return e.parse=function(n){try{hc=Ft;var t=r.parse(n);return t&&t._}finally{hc=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ce;var M=ta.map(),x=Zt(v),b=Vt(v),_=Zt(d),w=Vt(d),S=Zt(m),k=Vt(m),E=Zt(y),A=Vt(y);p.forEach(function(n,t){M.set(n.toLowerCase(),t)});var N={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return It(n.getDate(),t,2)},e:function(n,t){return It(n.getDate(),t,2)},H:function(n,t){return It(n.getHours(),t,2)},I:function(n,t){return It(n.getHours()%12||12,t,2)},j:function(n,t){return It(1+fc.dayOfYear(n),t,3)},L:function(n,t){return It(n.getMilliseconds(),t,3)},m:function(n,t){return It(n.getMonth()+1,t,2)},M:function(n,t){return It(n.getMinutes(),t,2)},p:function(n){return p[+(n.getHours()>=12)]},S:function(n,t){return It(n.getSeconds(),t,2)},U:function(n,t){return It(fc.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return It(fc.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return It(n.getFullYear()%100,t,2)},Y:function(n,t){return It(n.getFullYear()%1e4,t,4)},Z:oe,"%":function(){return"%"}},C={a:r,A:u,b:i,B:o,c:a,d:ne,e:ne,H:ee,I:ee,j:te,L:ie,m:Qt,M:re,p:s,S:ue,U:$t,w:Xt,W:Bt,x:c,X:l,y:Jt,Y:Wt,Z:Gt,"%":ae};return t}function It(n,t,e){var r=0>n?"-":"",u=(r?-n:n)+"",i=u.length;return r+(e>i?new Array(e-i+1).join(t)+u:u)}function Zt(n){return new RegExp("^(?:"+n.map(ta.requote).join("|")+")","i")}function Vt(n){for(var t=new a,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function Xt(n,t,e){vc.lastIndex=0;var r=vc.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function $t(n,t,e){vc.lastIndex=0;var r=vc.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function Bt(n,t,e){vc.lastIndex=0;var r=vc.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Wt(n,t,e){vc.lastIndex=0;var r=vc.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Jt(n,t,e){vc.lastIndex=0;var r=vc.exec(t.slice(e,e+2));return r?(n.y=Kt(+r[0]),e+r[0].length):-1}function Gt(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Kt(n){return n+(n>68?1900:2e3)}function Qt(n,t,e){vc.lastIndex=0;var r=vc.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function ne(n,t,e){vc.lastIndex=0;var r=vc.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function te(n,t,e){vc.lastIndex=0;var r=vc.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function ee(n,t,e){vc.lastIndex=0;var r=vc.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function re(n,t,e){vc.lastIndex=0;var r=vc.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function ue(n,t,e){vc.lastIndex=0;var r=vc.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ie(n,t,e){vc.lastIndex=0;var r=vc.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function oe(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=0|va(t)/60,u=va(t)%60;return e+It(r,"0",2)+It(u,"0",2)}function ae(n,t,e){dc.lastIndex=0;var r=dc.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ce(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function le(){}function se(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function fe(n,t){n&&xc.hasOwnProperty(n.type)&&xc[n.type](n,t)}function he(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function ge(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)he(n[e],t,1);t.polygonEnd()}function pe(){function n(n,t){n*=Fa,t=t*Fa/2+Da/4;var e=n-r,o=e>=0?1:-1,a=o*e,c=Math.cos(t),l=Math.sin(t),s=i*l,f=u*c+s*Math.cos(a),h=s*o*Math.sin(a);_c.add(Math.atan2(h,f)),r=n,u=c,i=l}var t,e,r,u,i;wc.point=function(o,a){wc.point=n,r=(t=o)*Fa,u=Math.cos(a=(e=a)*Fa/2+Da/4),i=Math.sin(a)},wc.lineEnd=function(){n(t,e)}}function ve(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function de(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function me(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function ye(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Me(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function xe(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function be(n){return[Math.atan2(n[1],n[0]),tt(n[2])]}function _e(n,t){return va(n[0]-t[0])<Ta&&va(n[1]-t[1])<Ta}function we(n,t){n*=Fa;var e=Math.cos(t*=Fa);Se(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function Se(n,t,e){++Sc,Ec+=(n-Ec)/Sc,Ac+=(t-Ac)/Sc,Nc+=(e-Nc)/Sc}function ke(){function n(n,u){n*=Fa;var i=Math.cos(u*=Fa),o=i*Math.cos(n),a=i*Math.sin(n),c=Math.sin(u),l=Math.atan2(Math.sqrt((l=e*c-r*a)*l+(l=r*o-t*c)*l+(l=t*a-e*o)*l),t*o+e*a+r*c);kc+=l,Cc+=l*(t+(t=o)),zc+=l*(e+(e=a)),qc+=l*(r+(r=c)),Se(t,e,r)}var t,e,r;Dc.point=function(u,i){u*=Fa;var o=Math.cos(i*=Fa);t=o*Math.cos(u),e=o*Math.sin(u),r=Math.sin(i),Dc.point=n,Se(t,e,r)}}function Ee(){Dc.point=we}function Ae(){function n(n,t){n*=Fa;var e=Math.cos(t*=Fa),o=e*Math.cos(n),a=e*Math.sin(n),c=Math.sin(t),l=u*c-i*a,s=i*o-r*c,f=r*a-u*o,h=Math.sqrt(l*l+s*s+f*f),g=r*o+u*a+i*c,p=h&&-nt(g)/h,v=Math.atan2(h,g);Lc+=p*l,Tc+=p*s,Rc+=p*f,kc+=v,Cc+=v*(r+(r=o)),zc+=v*(u+(u=a)),qc+=v*(i+(i=c)),Se(r,u,i)}var t,e,r,u,i;Dc.point=function(o,a){t=o,e=a,Dc.point=n,o*=Fa;var c=Math.cos(a*=Fa);r=c*Math.cos(o),u=c*Math.sin(o),i=Math.sin(a),Se(r,u,i)},Dc.lineEnd=function(){n(t,e),Dc.lineEnd=Ee,Dc.point=we}}function Ne(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function Ce(){return!0}function ze(n,t,e,r,u){var i=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(_e(e,r)){u.lineStart();for(var a=0;t>a;++a)u.point((e=n[a])[0],e[1]);return u.lineEnd(),void 0}var c=new Le(e,n,null,!0),l=new Le(e,null,c,!1);c.o=l,i.push(c),o.push(l),c=new Le(r,n,null,!1),l=new Le(r,null,c,!0),c.o=l,i.push(c),o.push(l)}}),o.sort(t),qe(i),qe(o),i.length){for(var a=0,c=e,l=o.length;l>a;++a)o[a].e=c=!c;for(var s,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;s=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var a=0,l=s.length;l>a;++a)u.point((f=s[a])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p){s=g.p.z;for(var a=s.length-1;a>=0;--a)u.point((f=s[a])[0],f[1])}else r(g.x,g.p.x,-1,u);g=g.p}g=g.o,s=g.z,p=!p}while(!g.v);u.lineEnd()}}}function qe(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function Le(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Te(n,t,e,r){return function(u,i){function o(t,e){var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function a(n,t){var e=u(n,t);d.point(e[0],e[1])}function c(){y.point=a,d.lineStart()}function l(){y.point=o,d.lineEnd()}function s(n,t){v.push([n,t]);var e=u(n,t);x.point(e[0],e[1])}function f(){x.lineStart(),v=[]}function h(){s(v[0][0],v[0][1]),x.lineEnd();var n,t=x.clean(),e=M.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r)if(1&t){n=e[0];var u,r=n.length-1,o=-1;if(r>0){for(b||(i.polygonStart(),b=!0),i.lineStart();++o<r;)i.point((u=n[o])[0],u[1]);i.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(Re))}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:o,lineStart:c,lineEnd:l,polygonStart:function(){y.point=s,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=c,y.lineEnd=l,g=ta.merge(g);var n=He(m,p);g.length?(b||(i.polygonStart(),b=!0),ze(g,Pe,n,e,i)):n&&(b||(i.polygonStart(),b=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),b&&(i.polygonEnd(),b=!1),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},M=De(),x=t(M),b=!1;return y}}function Re(n){return n.length>1}function De(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:y,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Pe(n,t){return((n=n.x)[0]<0?n[1]-ja-Ta:ja-n[1])-((t=t.x)[0]<0?t[1]-ja-Ta:ja-t[1])}function Ue(n){var t,e=0/0,r=0/0,u=0/0;return{lineStart:function(){n.lineStart(),t=1},point:function(i,o){var a=i>0?Da:-Da,c=va(i-e);va(c-Da)<Ta?(n.point(e,r=(r+o)/2>0?ja:-ja),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(i,r),t=0):u!==a&&c>=Da&&(va(e-u)<Ta&&(e-=u*Ta),va(i-a)<Ta&&(i-=a*Ta),r=je(e,r,i,o),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=i,r=o),u=a},lineEnd:function(){n.lineEnd(),e=r=0/0},clean:function(){return 2-t}}}function je(n,t,e,r){var u,i,o=Math.sin(n-e);return va(o)>Ta?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*o)):(t+r)/2}function Fe(n,t,e,r){var u;if(null==n)u=e*ja,r.point(-Da,u),r.point(0,u),r.point(Da,u),r.point(Da,0),r.point(Da,-u),r.point(0,-u),r.point(-Da,-u),r.point(-Da,0),r.point(-Da,u);else if(va(n[0]-t[0])>Ta){var i=n[0]<t[0]?Da:-Da;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])}function He(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,o=0;_c.reset();for(var a=0,c=t.length;c>a;++a){var l=t[a],s=l.length;if(s)for(var f=l[0],h=f[0],g=f[1]/2+Da/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===s&&(d=0),n=l[d];var m=n[0],y=n[1]/2+Da/4,M=Math.sin(y),x=Math.cos(y),b=m-h,_=b>=0?1:-1,w=_*b,S=w>Da,k=p*M;if(_c.add(Math.atan2(k*_*Math.sin(w),v*x+k*Math.cos(w))),i+=S?b+_*Pa:b,S^h>=e^m>=e){var E=me(ve(f),ve(n));xe(E);var A=me(u,E);xe(A);var N=(S^b>=0?-1:1)*tt(A[2]);(r>N||r===N&&(E[0]||E[1]))&&(o+=S^b>=0?1:-1)}if(!d++)break;h=m,p=M,v=x,f=n}}return(-Ta>i||Ta>i&&0>_c)^1&o}function Oe(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function e(n){var e,i,c,l,s;return{lineStart:function(){l=c=!1,s=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=o?v?0:u(f,h):v?u(f+(0>f?Da:-Da),h):0;if(!e&&(l=c=v)&&n.lineStart(),v!==c&&(g=r(e,p),(_e(e,g)||_e(p,g))&&(p[0]+=Ta,p[1]+=Ta,v=t(p[0],p[1]))),v!==c)s=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(a&&e&&o^v){var m;d&i||!(m=r(p,e,!0))||(s=0,o?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&_e(e,p)||n.point(p[0],p[1]),e=p,c=v,i=d},lineEnd:function(){c&&n.lineEnd(),e=null},clean:function(){return s|(l&&c)<<1}}}function r(n,t,e){var r=ve(n),u=ve(t),o=[1,0,0],a=me(r,u),c=de(a,a),l=a[0],s=c-l*l;if(!s)return!e&&n;var f=i*c/s,h=-i*l/s,g=me(o,a),p=Me(o,f),v=Me(a,h);ye(p,v);var d=g,m=de(p,d),y=de(d,d),M=m*m-y*(de(p,p)-1);if(!(0>M)){var x=Math.sqrt(M),b=Me(d,(-m-x)/y);if(ye(b,p),b=be(b),!e)return b;var _,w=n[0],S=t[0],k=n[1],E=t[1];w>S&&(_=w,w=S,S=_);var A=S-w,N=va(A-Da)<Ta,C=N||Ta>A;if(!N&&k>E&&(_=k,k=E,E=_),C?N?k+E>0^b[1]<(va(b[0]-w)<Ta?k:E):k<=b[1]&&b[1]<=E:A>Da^(w<=b[0]&&b[0]<=S)){var z=Me(d,(-m+x)/y);return ye(z,p),[b,be(z)]}}}function u(t,e){var r=o?n:Da-n,u=0;return-r>t?u|=1:t>r&&(u|=2),-r>e?u|=4:e>r&&(u|=8),u}var i=Math.cos(n),o=i>0,a=va(i)>Ta,c=pr(n,6*Fa);return Te(t,e,c,o?[0,-n]:[-Da,n-Da])}function Ye(n,t,e,r){return function(u){var i,o=u.a,a=u.b,c=o.x,l=o.y,s=a.x,f=a.y,h=0,g=1,p=s-c,v=f-l;if(i=n-c,p||!(i>0)){if(i/=p,0>p){if(h>i)return;g>i&&(g=i)}else if(p>0){if(i>g)return;i>h&&(h=i)}if(i=e-c,p||!(0>i)){if(i/=p,0>p){if(i>g)return;i>h&&(h=i)}else if(p>0){if(h>i)return;g>i&&(g=i)}if(i=t-l,v||!(i>0)){if(i/=v,0>v){if(h>i)return;g>i&&(g=i)}else if(v>0){if(i>g)return;i>h&&(h=i)}if(i=r-l,v||!(0>i)){if(i/=v,0>v){if(i>g)return;i>h&&(h=i)}else if(v>0){if(h>i)return;g>i&&(g=i)}return h>0&&(u.a={x:c+h*p,y:l+h*v}),1>g&&(u.b={x:c+g*p,y:l+g*v}),u}}}}}}function Ie(n,t,e,r){function u(r,u){return va(r[0]-n)<Ta?u>0?0:3:va(r[0]-e)<Ta?u>0?2:1:va(r[1]-t)<Ta?u>0?1:0:u>0?3:2}function i(n,t){return o(n.x,t.x)}function o(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n){for(var t=0,e=d.length,r=n[1],u=0;e>u;++u)for(var i,o=1,a=d[u],c=a.length,l=a[0];c>o;++o)i=a[o],l[1]<=r?i[1]>r&&Q(l,i,n)>0&&++t:i[1]<=r&&Q(l,i,n)<0&&--t,l=i;return 0!==t}function l(i,a,c,l){var s=0,f=0;if(null==i||(s=u(i,c))!==(f=u(a,c))||o(i,a)<0^c>0){do l.point(0===s||3===s?n:e,s>1?r:t);while((s=(s+c+4)%4)!==f)}else l.point(a[0],a[1])}function s(u,i){return u>=n&&e>=u&&i>=t&&r>=i}function f(n,t){s(n,t)&&a.point(n,t)}function h(){C.point=p,d&&d.push(m=[]),S=!0,w=!1,b=_=0/0}function g(){v&&(p(y,M),x&&w&&A.rejoin(),v.push(A.buffer())),C.point=f,w&&a.lineEnd()}function p(n,t){n=Math.max(-Uc,Math.min(Uc,n)),t=Math.max(-Uc,Math.min(Uc,t));var e=s(n,t);if(d&&m.push([n,t]),S)y=n,M=t,x=e,S=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&w)a.point(n,t);else{var r={a:{x:b,y:_},b:{x:n,y:t}};N(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),k=!1):e&&(a.lineStart(),a.point(n,t),k=!1)}b=n,_=t,w=e}var v,d,m,y,M,x,b,_,w,S,k,E=a,A=De(),N=Ye(n,t,e,r),C={point:f,lineStart:h,lineEnd:g,polygonStart:function(){a=A,v=[],d=[],k=!0},polygonEnd:function(){a=E,v=ta.merge(v);var t=c([n,r]),e=k&&t,u=v.length;(e||u)&&(a.polygonStart(),e&&(a.lineStart(),l(null,null,1,a),a.lineEnd()),u&&ze(v,i,t,l,a),a.polygonEnd()),v=d=m=null}};return C}}function Ze(n){var t=0,e=Da/3,r=or(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*Da/180,e=n[1]*Da/180):[180*(t/Da),180*(e/Da)]},u}function Ve(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),o-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),o=Math.sqrt(i)/u;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/u,tt((i-(n*n+e*e)*u*u)/(2*u))]},e}function Xe(){function n(n,t){Fc+=u*n-r*t,r=n,u=t}var t,e,r,u;Zc.point=function(i,o){Zc.point=n,t=r=i,e=u=o},Zc.lineEnd=function(){n(t,e)}}function $e(n,t){Hc>n&&(Hc=n),n>Yc&&(Yc=n),Oc>t&&(Oc=t),t>Ic&&(Ic=t)}function Be(){function n(n,t){o.push("M",n,",",t,i)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function u(){o.push("Z")}var i=We(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return i=We(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function We(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Je(n,t){Ec+=n,Ac+=t,++Nc}function Ge(){function n(n,r){var u=n-t,i=r-e,o=Math.sqrt(u*u+i*i);Cc+=o*(t+n)/2,zc+=o*(e+r)/2,qc+=o,Je(t=n,e=r)}var t,e;Xc.point=function(r,u){Xc.point=n,Je(t=r,e=u)}}function Ke(){Xc.point=Je}function Qe(){function n(n,t){var e=n-r,i=t-u,o=Math.sqrt(e*e+i*i);Cc+=o*(r+n)/2,zc+=o*(u+t)/2,qc+=o,o=u*n-r*t,Lc+=o*(r+n),Tc+=o*(u+t),Rc+=3*o,Je(r=n,u=t)}var t,e,r,u;Xc.point=function(i,o){Xc.point=n,Je(t=r=i,e=u=o)},Xc.lineEnd=function(){n(t,e)}}function nr(n){function t(t,e){n.moveTo(t+o,e),n.arc(t,e,o,0,Pa)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function u(){a.point=t}function i(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:u,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=u,a.point=t},pointRadius:function(n){return o=n,a},result:y};return a}function tr(n){function t(n){return(a?r:e)(n)}function e(t){return ur(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){
e=n(e,r),t.point(e[0],e[1])}function r(){M=0/0,S.point=i,t.lineStart()}function i(e,r){var i=ve([e,r]),o=n(e,r);u(M,x,y,b,_,w,M=o[0],x=o[1],y=e,b=i[0],_=i[1],w=i[2],a,t),t.point(M,x)}function o(){S.point=e,t.lineEnd()}function c(){r(),S.point=l,S.lineEnd=s}function l(n,t){i(f=n,h=t),g=M,p=x,v=b,d=_,m=w,S.point=i}function s(){u(M,x,y,b,_,w,g,p,f,v,d,m,a,t),S.lineEnd=o,o()}var f,h,g,p,v,d,m,y,M,x,b,_,w,S={point:e,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=c},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,a,c,l,s,f,h,g,p,v,d,m){var y=s-t,M=f-e,x=y*y+M*M;if(x>4*i&&d--){var b=a+g,_=c+p,w=l+v,S=Math.sqrt(b*b+_*_+w*w),k=Math.asin(w/=S),E=va(va(w)-1)<Ta||va(r-h)<Ta?(r+h)/2:Math.atan2(_,b),A=n(E,k),N=A[0],C=A[1],z=N-t,q=C-e,L=M*z-y*q;(L*L/x>i||va((y*z+M*q)/x-.5)>.3||o>a*g+c*p+l*v)&&(u(t,e,r,a,c,l,N,C,E,b/=S,_/=S,w,d,m),m.point(N,C),u(N,C,E,b,_,w,s,f,h,g,p,v,d,m))}}var i=.5,o=Math.cos(30*Fa),a=16;return t.precision=function(n){return arguments.length?(a=(i=n*n)>0&&16,t):Math.sqrt(i)},t}function er(n){var t=tr(function(t,e){return n([t*Ha,e*Ha])});return function(n){return ar(t(n))}}function rr(n){this.stream=n}function ur(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ir(n){return or(function(){return n})()}function or(n){function t(n){return n=a(n[0]*Fa,n[1]*Fa),[n[0]*h+c,l-n[1]*h]}function e(n){return n=a.invert((n[0]-c)/h,(l-n[1])/h),n&&[n[0]*Ha,n[1]*Ha]}function r(){a=Ne(o=sr(m,y,M),i);var n=i(v,d);return c=g-n[0]*h,l=p+n[1]*h,u()}function u(){return s&&(s.valid=!1,s=null),t}var i,o,a,c,l,s,f=tr(function(n,t){return n=i(n,t),[n[0]*h+c,l-n[1]*h]}),h=150,g=480,p=250,v=0,d=0,m=0,y=0,M=0,x=Pc,b=At,_=null,w=null;return t.stream=function(n){return s&&(s.valid=!1),s=ar(x(o,f(b(n)))),s.valid=!0,s},t.clipAngle=function(n){return arguments.length?(x=null==n?(_=n,Pc):Oe((_=+n)*Fa),u()):_},t.clipExtent=function(n){return arguments.length?(w=n,b=n?Ie(n[0][0],n[0][1],n[1][0],n[1][1]):At,u()):w},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*Fa,d=n[1]%360*Fa,r()):[v*Ha,d*Ha]},t.rotate=function(n){return arguments.length?(m=n[0]%360*Fa,y=n[1]%360*Fa,M=n.length>2?n[2]%360*Fa:0,r()):[m*Ha,y*Ha,M*Ha]},ta.rebind(t,f,"precision"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function ar(n){return ur(n,function(t,e){n.point(t*Fa,e*Fa)})}function cr(n,t){return[n,t]}function lr(n,t){return[n>Da?n-Pa:-Da>n?n+Pa:n,t]}function sr(n,t,e){return n?t||e?Ne(hr(n),gr(t,e)):hr(n):t||e?gr(t,e):lr}function fr(n){return function(t,e){return t+=n,[t>Da?t-Pa:-Da>t?t+Pa:t,e]}}function hr(n){var t=fr(n);return t.invert=fr(-n),t}function gr(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*r+a*u;return[Math.atan2(c*i-s*o,a*r-l*u),tt(s*i+c*o)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*i-c*o;return[Math.atan2(c*i+l*o,a*r+s*u),tt(s*r-a*u)]},e}function pr(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,o,a){var c=o*t;null!=u?(u=vr(e,u),i=vr(e,i),(o>0?i>u:u>i)&&(u+=o*Pa)):(u=n+o*Pa,i=n-.5*c);for(var l,s=u;o>0?s>i:i>s;s-=c)a.point((l=be([e,-r*Math.cos(s),-r*Math.sin(s)]))[0],l[1])}}function vr(n,t){var e=ve(t);e[0]-=n,xe(e);var r=nt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Ta)%(2*Math.PI)}function dr(n,t,e){var r=ta.range(n,t-Ta,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function mr(n,t,e){var r=ta.range(n,t-Ta,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function yr(n){return n.source}function Mr(n){return n.target}function xr(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),o=Math.cos(r),a=Math.sin(r),c=u*Math.cos(n),l=u*Math.sin(n),s=o*Math.cos(e),f=o*Math.sin(e),h=2*Math.asin(Math.sqrt(it(r-t)+u*o*it(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*c+t*s,u=e*l+t*f,o=e*i+t*a;return[Math.atan2(u,r)*Ha,Math.atan2(o,Math.sqrt(r*r+u*u))*Ha]}:function(){return[n*Ha,t*Ha]};return p.distance=h,p}function br(){function n(n,u){var i=Math.sin(u*=Fa),o=Math.cos(u),a=va((n*=Fa)-t),c=Math.cos(a);$c+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*i-e*o*c)*a),e*i+r*o*c),t=n,e=i,r=o}var t,e,r;Bc.point=function(u,i){t=u*Fa,e=Math.sin(i*=Fa),r=Math.cos(i),Bc.point=n},Bc.lineEnd=function(){Bc.point=Bc.lineEnd=y}}function _r(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),o=Math.cos(u);return[Math.atan2(n*i,r*o),Math.asin(r&&e*i/r)]},e}function wr(n,t){function e(n,t){o>0?-ja+Ta>t&&(t=-ja+Ta):t>ja-Ta&&(t=ja-Ta);var e=o/Math.pow(u(t),i);return[e*Math.sin(i*n),o-e*Math.cos(i*n)]}var r=Math.cos(n),u=function(n){return Math.tan(Da/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),o=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=o-t,r=K(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(o/r,1/i))-ja]},e):kr}function Sr(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return va(u)<Ta?cr:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-K(u)*Math.sqrt(n*n+e*e)]},e)}function kr(n,t){return[n,Math.log(Math.tan(Da/4+t/2))]}function Er(n){var t,e=ir(n),r=e.scale,u=e.translate,i=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=i.apply(e,arguments);if(o===e){if(t=null==n){var a=Da*r(),c=u();i([[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function Ar(n,t){return[Math.log(Math.tan(Da/4+t/2)),-n]}function Nr(n){return n[0]}function Cr(n){return n[1]}function zr(n){for(var t=n.length,e=[0,1],r=2,u=2;t>u;u++){for(;r>1&&Q(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function qr(n,t){return n[0]-t[0]||n[1]-t[1]}function Lr(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Tr(n,t,e,r){var u=n[0],i=e[0],o=t[0]-u,a=r[0]-i,c=n[1],l=e[1],s=t[1]-c,f=r[1]-l,h=(a*(c-l)-f*(u-i))/(f*o-a*s);return[u+h*o,c+h*s]}function Rr(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Dr(){eu(this),this.edge=this.site=this.circle=null}function Pr(n){var t=ol.pop()||new Dr;return t.site=n,t}function Ur(n){$r(n),rl.remove(n),ol.push(n),eu(n)}function jr(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,o=n.N,a=[n];Ur(n);for(var c=i;c.circle&&va(e-c.circle.x)<Ta&&va(r-c.circle.cy)<Ta;)i=c.P,a.unshift(c),Ur(c),c=i;a.unshift(c),$r(c);for(var l=o;l.circle&&va(e-l.circle.x)<Ta&&va(r-l.circle.cy)<Ta;)o=l.N,a.push(l),Ur(l),l=o;a.push(l),$r(l);var s,f=a.length;for(s=1;f>s;++s)l=a[s],c=a[s-1],Qr(l.edge,c.site,l.site,u);c=a[0],l=a[f-1],l.edge=Gr(c.site,l.site,null,u),Xr(c),Xr(l)}function Fr(n){for(var t,e,r,u,i=n.x,o=n.y,a=rl._;a;)if(r=Hr(a,o)-i,r>Ta)a=a.L;else{if(u=i-Or(a,o),!(u>Ta)){r>-Ta?(t=a.P,e=a):u>-Ta?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var c=Pr(n);if(rl.insert(t,c),t||e){if(t===e)return $r(t),e=Pr(t.site),rl.insert(c,e),c.edge=e.edge=Gr(t.site,c.site),Xr(t),Xr(e),void 0;if(!e)return c.edge=Gr(t.site,c.site),void 0;$r(t),$r(e);var l=t.site,s=l.x,f=l.y,h=n.x-s,g=n.y-f,p=e.site,v=p.x-s,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,M=v*v+d*d,x={x:(d*y-g*M)/m+s,y:(h*M-v*y)/m+f};Qr(e.edge,l,p,x),c.edge=Gr(l,n,null,x),e.edge=Gr(n,p,null,x),Xr(t),Xr(e)}}function Hr(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var o=n.P;if(!o)return-1/0;e=o.site;var a=e.x,c=e.y,l=c-t;if(!l)return a;var s=a-r,f=1/i-1/l,h=s/l;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*l)-c+l/2+u-i/2)))/f+r:(r+a)/2}function Or(n,t){var e=n.N;if(e)return Hr(e,t);var r=n.site;return r.y===t?r.x:1/0}function Yr(n){this.site=n,this.edges=[]}function Ir(n){for(var t,e,r,u,i,o,a,c,l,s,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=el,d=v.length;d--;)if(i=v[d],i&&i.prepare())for(a=i.edges,c=a.length,o=0;c>o;)s=a[o].end(),r=s.x,u=s.y,l=a[++o%c].start(),t=l.x,e=l.y,(va(r-t)>Ta||va(u-e)>Ta)&&(a.splice(o,0,new nu(Kr(i.site,s,va(r-f)<Ta&&p-u>Ta?{x:f,y:va(t-f)<Ta?e:p}:va(u-p)<Ta&&h-r>Ta?{x:va(e-p)<Ta?t:h,y:p}:va(r-h)<Ta&&u-g>Ta?{x:h,y:va(t-h)<Ta?e:g}:va(u-g)<Ta&&r-f>Ta?{x:va(e-g)<Ta?t:f,y:g}:null),i.site,null)),++c)}function Zr(n,t){return t.angle-n.angle}function Vr(){eu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Xr(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){var o=u.x,a=u.y,c=r.x-o,l=r.y-a,s=i.x-o,f=i.y-a,h=2*(c*f-l*s);if(!(h>=-Ra)){var g=c*c+l*l,p=s*s+f*f,v=(f*g-l*p)/h,d=(c*p-s*g)/h,f=d+a,m=al.pop()||new Vr;m.arc=n,m.site=u,m.x=v+o,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,M=il._;M;)if(m.y<M.y||m.y===M.y&&m.x<=M.x){if(!M.L){y=M.P;break}M=M.L}else{if(!M.R){y=M;break}M=M.R}il.insert(y,m),y||(ul=m)}}}}function $r(n){var t=n.circle;t&&(t.P||(ul=t.N),il.remove(t),al.push(t),eu(t),n.circle=null)}function Br(n){for(var t,e=tl,r=Ye(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)t=e[u],(!Wr(t,n)||!r(t)||va(t.a.x-t.b.x)<Ta&&va(t.a.y-t.b.y)<Ta)&&(t.a=t.b=null,e.splice(u,1))}function Wr(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,o=t[0][0],a=t[1][0],c=t[0][1],l=t[1][1],s=n.l,f=n.r,h=s.x,g=s.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(o>d||d>=a)return;if(h>p){if(i){if(i.y>=l)return}else i={x:d,y:c};e={x:d,y:l}}else{if(i){if(i.y<c)return}else i={x:d,y:l};e={x:d,y:c}}}else if(r=(h-p)/(v-g),u=m-r*d,-1>r||r>1)if(h>p){if(i){if(i.y>=l)return}else i={x:(c-u)/r,y:c};e={x:(l-u)/r,y:l}}else{if(i){if(i.y<c)return}else i={x:(l-u)/r,y:l};e={x:(c-u)/r,y:c}}else if(v>g){if(i){if(i.x>=a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}else{if(i){if(i.x<o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}return n.a=i,n.b=e,!0}function Jr(n,t){this.l=n,this.r=t,this.a=this.b=null}function Gr(n,t,e,r){var u=new Jr(n,t);return tl.push(u),e&&Qr(u,n,t,e),r&&Qr(u,t,n,r),el[n.i].edges.push(new nu(u,n,t)),el[t.i].edges.push(new nu(u,t,n)),u}function Kr(n,t,e){var r=new Jr(n,null);return r.a=t,r.b=e,tl.push(r),r}function Qr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function nu(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function tu(){this._=null}function eu(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function ru(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function uu(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function iu(n){for(;n.L;)n=n.L;return n}function ou(n,t){var e,r,u,i=n.sort(au).pop();for(tl=[],el=new Array(n.length),rl=new tu,il=new tu;;)if(u=ul,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(el[i.i]=new Yr(i),Fr(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;jr(u.arc)}t&&(Br(t),Ir(t));var o={cells:el,edges:tl};return rl=il=tl=el=null,o}function au(n,t){return t.y-n.y||t.x-n.x}function cu(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function lu(n){return n.x}function su(n){return n.y}function fu(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hu(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var o=.5*(e+u),a=.5*(r+i),c=t.nodes;c[0]&&hu(n,c[0],e,r,o,a),c[1]&&hu(n,c[1],o,r,u,a),c[2]&&hu(n,c[2],e,a,o,i),c[3]&&hu(n,c[3],o,a,u,i)}}function gu(n,t,e,r,u,i,o){var a,c=1/0;return function l(n,s,f,h,g){if(!(s>i||f>o||r>h||u>g)){if(p=n.point){var p,v=t-p[0],d=e-p[1],m=v*v+d*d;if(c>m){var y=Math.sqrt(c=m);r=t-y,u=e-y,i=t+y,o=e+y,a=p}}for(var M=n.nodes,x=.5*(s+h),b=.5*(f+g),_=t>=x,w=e>=b,S=w<<1|_,k=S+4;k>S;++S)if(n=M[3&S])switch(3&S){case 0:l(n,s,f,x,b);break;case 1:l(n,x,f,h,b);break;case 2:l(n,s,b,x,g);break;case 3:l(n,x,b,h,g)}}}(n,r,u,i,o),a}function pu(n,t){n=ta.rgb(n),t=ta.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,o=t.g-r,a=t.b-u;return function(n){return"#"+xt(Math.round(e+i*n))+xt(Math.round(r+o*n))+xt(Math.round(u+a*n))}}function vu(n,t){var e,r={},u={};for(e in n)e in t?r[e]=yu(n[e],t[e]):u[e]=n[e];for(e in t)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function du(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function mu(n,t){var e,r,u,i=ll.lastIndex=sl.lastIndex=0,o=-1,a=[],c=[];for(n+="",t+="";(e=ll.exec(n))&&(r=sl.exec(t));)(u=r.index)>i&&(u=t.slice(i,u),a[o]?a[o]+=u:a[++o]=u),(e=e[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:du(e,r)})),i=sl.lastIndex;return i<t.length&&(u=t.slice(i),a[o]?a[o]+=u:a[++o]=u),a.length<2?c[0]?(t=c[0].x,function(n){return t(n)+""}):function(){return t}:(t=c.length,function(n){for(var e,r=0;t>r;++r)a[(e=c[r]).i]=e.x(n);return a.join("")})}function yu(n,t){for(var e,r=ta.interpolators.length;--r>=0&&!(e=ta.interpolators[r](n,t)););return e}function Mu(n,t){var e,r=[],u=[],i=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;a>e;++e)r.push(yu(n[e],t[e]));for(;i>e;++e)u[e]=n[e];for(;o>e;++e)u[e]=t[e];return function(n){for(e=0;a>e;++e)u[e]=r[e](n);return u}}function xu(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function bu(n){return function(t){return 1-n(1-t)}}function _u(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function wu(n){return n*n}function Su(n){return n*n*n}function ku(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function Eu(n){return function(t){return Math.pow(t,n)}}function Au(n){return 1-Math.cos(n*ja)}function Nu(n){return Math.pow(2,10*(n-1))}function Cu(n){return 1-Math.sqrt(1-n*n)}function zu(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/Pa*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*Pa/t)}}function qu(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function Lu(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Tu(n,t){n=ta.hcl(n),t=ta.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,o=t.c-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return st(e+i*n,r+o*n,u+a*n)+""}}function Ru(n,t){n=ta.hsl(n),t=ta.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,o=t.s-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return ct(e+i*n,r+o*n,u+a*n)+""}}function Du(n,t){n=ta.lab(n),t=ta.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,o=t.a-r,a=t.b-u;return function(n){return ht(e+i*n,r+o*n,u+a*n)+""}}function Pu(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function Uu(n){var t=[n.a,n.b],e=[n.c,n.d],r=Fu(t),u=ju(t,e),i=Fu(Hu(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Ha,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Ha:0}function ju(n,t){return n[0]*t[0]+n[1]*t[1]}function Fu(n){var t=Math.sqrt(ju(n,n));return t&&(n[0]/=t,n[1]/=t),t}function Hu(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Ou(n,t){var e,r=[],u=[],i=ta.transform(n),o=ta.transform(t),a=i.translate,c=o.translate,l=i.rotate,s=o.rotate,f=i.skew,h=o.skew,g=i.scale,p=o.scale;return a[0]!=c[0]||a[1]!=c[1]?(r.push("translate(",null,",",null,")"),u.push({i:1,x:du(a[0],c[0])},{i:3,x:du(a[1],c[1])})):c[0]||c[1]?r.push("translate("+c+")"):r.push(""),l!=s?(l-s>180?s+=360:s-l>180&&(l+=360),u.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:du(l,s)})):s&&r.push(r.pop()+"rotate("+s+")"),f!=h?u.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:du(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),g[0]!=p[0]||g[1]!=p[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),u.push({i:e-4,x:du(g[0],p[0])},{i:e-2,x:du(g[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),e=u.length,function(n){for(var t,i=-1;++i<e;)r[(t=u[i]).i]=t.x(n);return r.join("")}}function Yu(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Iu(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Zu(n){for(var t=n.source,e=n.target,r=Xu(t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Vu(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Xu(n,t){if(n===t)return n;for(var e=Vu(n),r=Vu(t),u=e.pop(),i=r.pop(),o=null;u===i;)o=u,u=e.pop(),i=r.pop();return o}function $u(n){n.fixed|=2}function Bu(n){n.fixed&=-7}function Wu(n){n.fixed|=4,n.px=n.x,n.py=n.y}function Ju(n){n.fixed&=-5}function Gu(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,o=n.nodes,a=o.length,c=-1;++c<a;)i=o[c],null!=i&&(Gu(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var l=t*e[n.point.index];n.charge+=n.pointCharge=l,r+=l*n.point.x,u+=l*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}function Ku(n,t){return ta.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=ui,n}function Qu(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(u=n.children)&&(r=u.length))for(var r,u;--r>=0;)e.push(u[r])}function ni(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(i=n.children)&&(u=i.length))for(var u,i,o=-1;++o<u;)e.push(i[o]);for(;null!=(n=r.pop());)t(n)}function ti(n){return n.children}function ei(n){return n.value}function ri(n,t){return t.value-n.value}function ui(n){return ta.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function ii(n){return n.x}function oi(n){return n.y}function ai(n,t,e){n.y0=t,n.y=e}function ci(n){return ta.range(n.length)}function li(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function si(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;i>e;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function fi(n){return n.reduce(hi,0)}function hi(n,t){return n+t[1]}function gi(n,t){return pi(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function pi(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function vi(n){return[ta.min(n),ta.max(n)]}function di(n,t){return n.value-t.value}function mi(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function yi(n,t){n._pack_next=t,t._pack_prev=n}function Mi(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>e*e+r*r}function xi(n){function t(n){s=Math.min(n.x-n.r,s),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(l=e.length)){var e,r,u,i,o,a,c,l,s=1/0,f=-1/0,h=1/0,g=-1/0;if(e.forEach(bi),r=e[0],r.x=-r.r,r.y=0,t(r),l>1&&(u=e[1],u.x=u.r,u.y=0,t(u),l>2))for(i=e[2],Si(r,u,i),t(i),mi(r,i),r._pack_prev=i,mi(i,u),u=r._pack_next,o=3;l>o;o++){Si(r,u,i=e[o]);var p=0,v=1,d=1;for(a=u._pack_next;a!==u;a=a._pack_next,v++)if(Mi(a,i)){p=1;break}if(1==p)for(c=r._pack_prev;c!==a._pack_prev&&!Mi(c,i);c=c._pack_prev,d++);p?(d>v||v==d&&u.r<r.r?yi(r,u=a):yi(r=c,u),o--):(mi(r,i),u=i,t(i))}var m=(s+f)/2,y=(h+g)/2,M=0;for(o=0;l>o;o++)i=e[o],i.x-=m,i.y-=y,M=Math.max(M,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=M,e.forEach(_i)}}function bi(n){n._pack_next=n._pack_prev=n}function _i(n){delete n._pack_next,delete n._pack_prev}function wi(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,o=u.length;++i<o;)wi(u[i],t,e,r)}function Si(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var o=t.r+e.r,a=u*u+i*i;o*=o,r*=r;var c=.5+(r-o)/(2*a),l=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+c*u+l*i,e.y=n.y+c*i-l*u}else e.x=n.x+r,e.y=n.y}function ki(n,t){return n.parent==t.parent?1:2}function Ei(n){var t=n.children;return t.length?t[0]:n.t}function Ai(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ni(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Ci(n){for(var t,e=0,r=0,u=n.children,i=u.length;--i>=0;)t=u[i],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function zi(n,t,e){return n.a.parent===t.parent?n.a:e}function qi(n){return 1+ta.max(n,function(n){return n.y})}function Li(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Ti(n){var t=n.children;return t&&t.length?Ti(t[0]):n}function Ri(n){var t,e=n.children;return e&&(t=e.length)?Ri(e[t-1]):n}function Di(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Pi(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return 0>u&&(e+=u/2,u=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function Ui(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function ji(n){return n.rangeExtent?n.rangeExtent():Ui(n.range())}function Fi(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function Hi(n,t){var e,r=0,u=n.length-1,i=n[r],o=n[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),n[r]=t.floor(i),n[u]=t.ceil(o),n}function Oi(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:bl}function Yi(n,t,e,r){var u=[],i=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)u.push(e(n[o-1],n[o])),i.push(r(t[o-1],t[o]));return function(t){var e=ta.bisect(n,t,1,a)-1;return i[e](u[e](t))}}function Ii(n,t,e,r){function u(){var u=Math.min(n.length,t.length)>2?Yi:Fi,c=r?Iu:Yu;return o=u(n,t,c,e),a=u(t,n,c,yu),i}function i(n){return o(n)}var o,a;return i.invert=function(n){return a(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(Pu)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){return arguments.length?(e=n,u()):e},i.ticks=function(t){return $i(n,t)},i.tickFormat=function(t,e){return Bi(n,t,e)},i.nice=function(t){return Vi(n,t),u()},i.copy=function(){return Ii(n,t,e,r)},u()}function Zi(n,t){return ta.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Vi(n,t){return Hi(n,Oi(Xi(n,t)[2]))}function Xi(n,t){null==t&&(t=10);var e=Ui(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function $i(n,t){return ta.range.apply(ta,Xi(n,t))}function Bi(n,t,e){var r=Xi(n,t);if(e){var u=lc.exec(e);if(u.shift(),"s"===u[8]){var i=ta.formatPrefix(Math.max(va(r[0]),va(r[1])));return u[7]||(u[7]="."+Wi(i.scale(r[2]))),u[8]="f",e=ta.format(u.join("")),function(n){return e(i.scale(n))+i.symbol}}u[7]||(u[7]="."+Ji(u[8],r)),e=u.join("")}else e=",."+Wi(r[2])+"f";return ta.format(e)}function Wi(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function Ji(n,t){var e=Wi(t[2]);return n in _l?Math.abs(e-Wi(Math.max(va(t[0]),va(t[1]))))+ +("e"!==n):e-2*("%"===n)}function Gi(n,t,e,r){function u(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(u(t))}return o.invert=function(t){return i(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(u)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(u)),o):t},o.nice=function(){var t=Hi(r.map(u),e?Math:Sl);return n.domain(t),r=t.map(i),o},o.ticks=function(){var n=Ui(r),o=[],a=n[0],c=n[1],l=Math.floor(u(a)),s=Math.ceil(u(c)),f=t%1?2:t;if(isFinite(s-l)){if(e){for(;s>l;l++)for(var h=1;f>h;h++)o.push(i(l)*h);o.push(i(l))}else for(o.push(i(l));l++<s;)for(var h=f-1;h>0;h--)o.push(i(l)*h);for(l=0;o[l]<a;l++);for(s=o.length;o[s-1]>c;s--);o=o.slice(l,s)}return o},o.tickFormat=function(n,t){if(!arguments.length)return wl;arguments.length<2?t=wl:"function"!=typeof t&&(t=ta.format(t));var r,a=Math.max(.1,n/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(n){return n/i(c(u(n)+r))<=a?t(n):""}},o.copy=function(){return Gi(n.copy(),t,e,r)},Zi(o,n)}function Ki(n,t,e){function r(t){return n(u(t))}var u=Qi(t),i=Qi(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return $i(e,n)},r.tickFormat=function(n,t){return Bi(e,n,t)},r.nice=function(n){return r.domain(Vi(e,n))},r.exponent=function(o){return arguments.length?(u=Qi(t=o),i=Qi(1/t),n.domain(e.map(u)),r):t},r.copy=function(){return Ki(n.copy(),t,e)},Zi(r,n)}function Qi(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function no(n,t){function e(e){return i[((u.get(e)||("range"===t.t?u.set(e,n.push(e)):0/0))-1)%i.length]}function r(t,e){return ta.range(n.length).map(function(n){return t+e*n})}var u,i,o;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new a;for(var i,o=-1,c=r.length;++o<c;)u.has(i=r[o])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,o=0,t={t:"range",a:arguments},e):i},e.rangePoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=n.length<2?(c=(c+l)/2,0):(l-c)/(n.length-1+a);return i=r(c+s*a/2,s),o=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=n.length<2?(c=l=Math.round((c+l)/2),0):0|(l-c)/(n.length-1+a);return i=r(c+Math.round(s*a/2+(l-c-(n.length-1+a)*s)/2),s),o=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=(f-s)/(n.length-a+2*c);return i=r(s+h*c,h),l&&i.reverse(),o=h*(1-a),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=Math.floor((f-s)/(n.length-a+2*c));return i=r(s+Math.round((f-s-(n.length-a)*h)/2),h),l&&i.reverse(),o=Math.round(h*(1-a)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return o},e.rangeExtent=function(){return Ui(t.a[0])},e.copy=function(){return no(n,t)},e.domain(n)}function to(r,u){function i(){var n=0,t=u.length;for(a=[];++n<t;)a[n-1]=ta.quantile(r,n/t);return o}function o(n){return isNaN(n=+n)?void 0:u[ta.bisect(a,n)]}var a;return o.domain=function(u){return arguments.length?(r=u.map(t).filter(e).sort(n),i()):r},o.range=function(n){return arguments.length?(u=n,i()):u},o.quantiles=function(){return a},o.invertExtent=function(n){return n=u.indexOf(n),0>n?[0/0,0/0]:[n>0?a[n-1]:r[0],n<a.length?a[n]:r[r.length-1]]},o.copy=function(){return to(r,u)},i()}function eo(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),o=e.length-1,r}var i,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?0/0:t/i+n,[t,t+1/i]},r.copy=function(){return eo(n,t,e)},u()}function ro(n,t){function e(e){return e>=e?t[ta.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return ro(n,t)},e}function uo(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return $i(n,t)},t.tickFormat=function(t,e){return Bi(n,t,e)},t.copy=function(){return uo(n)},t}function io(){return 0}function oo(n){return n.innerRadius}function ao(n){return n.outerRadius}function co(n){return n.startAngle}function lo(n){return n.endAngle}function so(n){return n&&n.padAngle}function fo(n,t,e,r){return(n-e)*t-(t-r)*n>0?0:1}function ho(n,t,e,r,u){var i=n[0]-t[0],o=n[1]-t[1],a=(u?r:-r)/Math.sqrt(i*i+o*o),c=a*o,l=-a*i,s=n[0]+c,f=n[1]+l,h=t[0]+c,g=t[1]+l,p=(s+h)/2,v=(f+g)/2,d=h-s,m=g-f,y=d*d+m*m,M=e-r,x=s*g-h*f,b=(0>m?-1:1)*Math.sqrt(M*M*y-x*x),_=(x*m-d*b)/y,w=(-x*d-m*b)/y,S=(x*m+d*b)/y,k=(-x*d+m*b)/y,E=_-p,A=w-v,N=S-p,C=k-v;return E*E+A*A>N*N+C*C&&(_=S,w=k),[[_-c,w-l],[_*e/M,w*e/M]]}function go(n){function t(t){function o(){l.push("M",i(n(s),a))}for(var c,l=[],s=[],f=-1,h=t.length,g=Et(e),p=Et(r);++f<h;)u.call(this,c=t[f],f)?s.push([+g.call(this,c,f),+p.call(this,c,f)]):s.length&&(o(),s=[]);return s.length&&o(),l.length?l.join(""):null}var e=Nr,r=Cr,u=Ce,i=po,o=i.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?i=n:(i=zl.get(n)||po).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function po(n){return n.join("L")}function vo(n){return po(n)+"Z"}function mo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&u.push("H",r[0]),u.join("")}function yo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("V",(r=n[t])[1],"H",r[0]);return u.join("")}function Mo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r=n[t])[0],"V",r[1]);return u.join("")}function xo(n,t){return n.length<4?po(n):n[1]+wo(n.slice(1,-1),So(n,t))}function bo(n,t){return n.length<3?po(n):n[0]+wo((n.push(n[0]),n),So([n[n.length-2]].concat(n,[n[1]]),t))}function _o(n,t){return n.length<3?po(n):n[0]+wo(n,So(n,t))}function wo(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return po(n);var e=n.length!=t.length,r="",u=n[0],i=n[1],o=t[0],a=o,c=1;if(e&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],u=n[1],c=2),t.length>1){a=t[1],i=n[c],c++,r+="C"+(u[0]+o[0])+","+(u[1]+o[1])+","+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1];for(var l=2;l<t.length;l++,c++)i=n[c],a=t[l],r+="S"+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1]}if(e){var s=n[c];r+="Q"+(i[0]+2*a[0]/3)+","+(i[1]+2*a[1]/3)+","+s[0]+","+s[1]}return r}function So(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],o=n[1],a=1,c=n.length;++a<c;)e=i,i=o,o=n[a],r.push([u*(o[0]-e[0]),u*(o[1]-e[1])]);return r}function ko(n){if(n.length<3)return po(n);var t=1,e=n.length,r=n[0],u=r[0],i=r[1],o=[u,u,u,(r=n[1])[0]],a=[i,i,i,r[1]],c=[u,",",i,"L",Co(Tl,o),",",Co(Tl,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),zo(c,o,a);return n.pop(),c.push("L",r),c.join("")}function Eo(n){if(n.length<4)return po(n);for(var t,e=[],r=-1,u=n.length,i=[0],o=[0];++r<3;)t=n[r],i.push(t[0]),o.push(t[1]);for(e.push(Co(Tl,i)+","+Co(Tl,o)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),zo(e,i,o);return e.join("")}function Ao(n){for(var t,e,r=-1,u=n.length,i=u+4,o=[],a=[];++r<4;)e=n[r%u],o.push(e[0]),a.push(e[1]);for(t=[Co(Tl,o),",",Co(Tl,a)],--r;++r<i;)e=n[r%u],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),zo(t,o,a);return t.join("")}function No(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],o=n[0][1],a=n[e][0]-i,c=n[e][1]-o,l=-1;++l<=e;)r=n[l],u=l/e,r[0]=t*r[0]+(1-t)*(i+u*a),r[1]=t*r[1]+(1-t)*(o+u*c);return ko(n)}function Co(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function zo(n,t,e){n.push("C",Co(ql,t),",",Co(ql,e),",",Co(Ll,t),",",Co(Ll,e),",",Co(Tl,t),",",Co(Tl,e))}function qo(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Lo(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],o=r[0]=qo(u,i);++t<e;)r[t]=(o+(o=qo(u=i,i=n[t+1])))/2;return r[t]=o,r}function To(n){for(var t,e,r,u,i=[],o=Lo(n),a=-1,c=n.length-1;++a<c;)t=qo(n[a],n[a+1]),va(t)<Ta?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,u=e*e+r*r,u>9&&(u=3*t/Math.sqrt(u),o[a]=u*e,o[a+1]=u*r));for(a=-1;++a<=c;)u=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),i.push([u||0,o[a]*u||0]);return i}function Ro(n){return n.length<3?po(n):n[0]+wo(n,To(n))}function Do(n){for(var t,e,r,u=-1,i=n.length;++u<i;)t=n[u],e=t[0],r=t[1]-ja,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Po(n){function t(t){function c(){v.push("M",a(n(m),f),s,l(n(d.reverse()),f),"Z")}for(var h,g,p,v=[],d=[],m=[],y=-1,M=t.length,x=Et(e),b=Et(u),_=e===r?function(){
return g}:Et(r),w=u===i?function(){return p}:Et(i);++y<M;)o.call(this,h=t[y],y)?(d.push([g=+x.call(this,h,y),p=+b.call(this,h,y)]),m.push([+_.call(this,h,y),+w.call(this,h,y)])):d.length&&(c(),d=[],m=[]);return d.length&&c(),v.length?v.join(""):null}var e=Nr,r=Nr,u=0,i=Cr,o=Ce,a=po,c=a.key,l=a,s="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?a=n:(a=zl.get(n)||po).key,l=a.reverse||a,s=a.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(f=n,t):f},t}function Uo(n){return n.radius}function jo(n){return[n.x,n.y]}function Fo(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-ja;return[e*Math.cos(r),e*Math.sin(r)]}}function Ho(){return 64}function Oo(){return"circle"}function Yo(n){var t=Math.sqrt(n/Da);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Io(n,t,e){return xa(n,Fl),n.namespace=t,n.id=e,n}function Zo(n,t,e,r){var u=n.id,i=n.namespace;return H(n,"function"==typeof e?function(n,o,a){n[i][u].tween.set(t,r(e.call(n,n.__data__,o,a)))}:(e=r(e),function(n){n[i][u].tween.set(t,e)}))}function Vo(n){return null==n&&(n=""),function(){this.textContent=n}}function Xo(n){return null==n?"__transition__":"__transition_"+n+"__"}function $o(n,t,e,r,u){var i=n[e]||(n[e]={active:0,count:0}),o=i[r];if(!o){var c=u.time;o=i[r]={tween:new a,time:c,delay:u.delay,duration:u.duration,ease:u.ease},u=null,++i.count,ta.timer(function(u){function a(e){return i.active>r?s(!1):(i.active=r,o.event&&o.event.start.call(n,g,t),o.tween.forEach(function(e,r){(r=r.call(n,g,t))&&d.push(r)}),h=o.ease,f=o.duration,ta.timer(function(){return v.c=l(e||1)?Ce:l,1},0,c),void 0)}function l(t){if(i.active!==r)return s(!1);for(var e=t/f,u=h(e),o=d.length;o>0;)d[--o].call(n,u);return e>=1?s(!0):void 0}function s(u){return o.event&&o.event[u?"end":"interrupt"].call(n,g,t),--i.count?delete i[r]:delete n[e],1}var f,h,g=n.__data__,p=o.delay,v=oc,d=[];return v.t=p+c,u>=p?a(u-p):(v.c=a,void 0)},0,c)}}function Bo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function Wo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function Jo(n){return n.toISOString()}function Go(n,t,e){function r(t){return n(t)}function u(n,e){var r=n[1]-n[0],u=r/e,i=ta.bisect(Bl,u);return i==Bl.length?[t.year,Xi(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Bl[i-1]<Bl[i]/u?i-1:i]:[Gl,Xi(n,e)[2]]}return r.invert=function(t){return Ko(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(Ko)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,Ko(+e+1),t).length}var i=r.domain(),o=Ui(i),a=null==n?u(o,10):"number"==typeof n&&u(o,n);return a&&(n=a[0],t=a[1]),r.domain(Hi(i,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=Ko(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=Ko(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Ui(r.domain()),i=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],Ko(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Go(n.copy(),t,e)},Zi(r,n)}function Ko(n){return new Date(n)}function Qo(n){return JSON.parse(n.responseText)}function na(n){var t=ua.createRange();return t.selectNode(ua.body),t.createContextualFragment(n.responseText)}var ta={version:"3.5.0"};Date.now||(Date.now=function(){return+new Date});var ea=[].slice,ra=function(n){return ea.call(n)},ua=document,ia=ua.documentElement,oa=window;try{ra(ia.childNodes)[0].nodeType}catch(aa){ra=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}try{ua.createElement("div").style.setProperty("opacity",0,"")}catch(ca){var la=oa.Element.prototype,sa=la.setAttribute,fa=la.setAttributeNS,ha=oa.CSSStyleDeclaration.prototype,ga=ha.setProperty;la.setAttribute=function(n,t){sa.call(this,n,t+"")},la.setAttributeNS=function(n,t,e){fa.call(this,n,t,e+"")},ha.setProperty=function(n,t,e){ga.call(this,n,t+"",e)}}ta.ascending=n,ta.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:0/0},ta.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&e>r&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e>r&&(e=r)}return e},ta.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&r>e&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r>e&&(e=r)}return e},ta.extent=function(n,t){var e,r,u,i=-1,o=n.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=n[i])&&r>=r){e=u=r;break}for(;++i<o;)null!=(r=n[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<o;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=u=r;break}for(;++i<o;)null!=(r=t.call(n,n[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},ta.sum=function(n,t){var r,u=0,i=n.length,o=-1;if(1===arguments.length)for(;++o<i;)e(r=+n[o])&&(u+=r);else for(;++o<i;)e(r=+t.call(n,n[o],o))&&(u+=r);return u},ta.mean=function(n,r){var u,i=0,o=n.length,a=-1,c=o;if(1===arguments.length)for(;++a<o;)e(u=t(n[a]))?i+=u:--c;else for(;++a<o;)e(u=t(r.call(n,n[a],a)))?i+=u:--c;return c?i/c:void 0},ta.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},ta.median=function(r,u){var i,o=[],a=r.length,c=-1;if(1===arguments.length)for(;++c<a;)e(i=t(r[c]))&&o.push(i);else for(;++c<a;)e(i=t(u.call(r,r[c],c)))&&o.push(i);return o.length?ta.quantile(o.sort(n),.5):void 0};var pa=r(n);ta.bisectLeft=pa.left,ta.bisect=ta.bisectRight=pa.right,ta.bisector=function(t){return r(1===t.length?function(e,r){return n(t(e),r)}:t)},ta.shuffle=function(n,t,e){(i=arguments.length)<3&&(e=n.length,2>i&&(t=0));for(var r,u,i=e-t;i;)u=0|Math.random()*i--,r=n[i+t],n[i+t]=n[u+t],n[u+t]=r;return n},ta.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},ta.pairs=function(n){for(var t,e=0,r=n.length-1,u=n[0],i=new Array(0>r?0:r);r>e;)i[e]=[t=u,u=n[++e]];return i},ta.zip=function(){if(!(r=arguments.length))return[];for(var n=-1,t=ta.min(arguments,u),e=new Array(t);++n<t;)for(var r,i=-1,o=e[n]=new Array(r);++i<r;)o[i]=arguments[i][n];return e},ta.transpose=function(n){return ta.zip.apply(ta,n)},ta.keys=function(n){var t=[];for(var e in n)t.push(e);return t},ta.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},ta.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},ta.merge=function(n){for(var t,e,r,u=n.length,i=-1,o=0;++i<u;)o+=n[i].length;for(e=new Array(o);--u>=0;)for(r=n[u],t=r.length;--t>=0;)e[--o]=r[t];return e};var va=Math.abs;ta.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),1/0===(t-n)/e)throw new Error("infinite range");var r,u=[],o=i(va(e)),a=-1;if(n*=o,t*=o,e*=o,0>e)for(;(r=n+e*++a)>t;)u.push(r/o);else for(;(r=n+e*++a)<t;)u.push(r/o);return u},ta.map=function(n,t){var e=new a;if(n instanceof a)n.forEach(function(n,t){e.set(n,t)});else if(Array.isArray(n)){var r,u=-1,i=n.length;if(1===arguments.length)for(;++u<i;)e.set(u,n[u]);else for(;++u<i;)e.set(t.call(n,r=n[u],u),r)}else for(var o in n)e.set(o,n[o]);return e};var da="__proto__",ma="\0";o(a,{has:s,get:function(n){return this._[c(n)]},set:function(n,t){return this._[c(n)]=t},remove:f,keys:h,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:l(t),value:this._[t]});return n},size:g,empty:p,forEach:function(n){for(var t in this._)n.call(this,l(t),this._[t])}}),ta.nest=function(){function n(t,o,c){if(c>=i.length)return r?r.call(u,o):e?o.sort(e):o;for(var l,s,f,h,g=-1,p=o.length,v=i[c++],d=new a;++g<p;)(h=d.get(l=v(s=o[g])))?h.push(s):d.set(l,[s]);return t?(s=t(),f=function(e,r){s.set(e,n(t,r,c))}):(s={},f=function(e,r){s[e]=n(t,r,c)}),d.forEach(f),s}function t(n,e){if(e>=i.length)return n;var r=[],u=o[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var e,r,u={},i=[],o=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(ta.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return o[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},ta.set=function(n){var t=new v;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},o(v,{has:s,add:function(n){return this._[c(n+="")]=!0,n},remove:f,values:h,size:g,empty:p,forEach:function(n){for(var t in this._)n.call(this,l(t))}}),ta.behavior={},ta.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=d(n,t,t[e]);return n};var ya=["webkit","ms","moz","Moz","o","O"];ta.dispatch=function(){for(var n=new M,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=x(n);return n},M.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},ta.event=null,ta.requote=function(n){return n.replace(Ma,"\\$&")};var Ma=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xa={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},ba=function(n,t){return t.querySelector(n)},_a=function(n,t){return t.querySelectorAll(n)},wa=ia.matches||ia[m(ia,"matchesSelector")],Sa=function(n,t){return wa.call(n,t)};"function"==typeof Sizzle&&(ba=function(n,t){return Sizzle(n,t)[0]||null},_a=Sizzle,Sa=Sizzle.matchesSelector),ta.selection=function(){return Na};var ka=ta.selection.prototype=[];ka.select=function(n){var t,e,r,u,i=[];n=k(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var c=-1,l=r.length;++c<l;)(u=r[c])?(t.push(e=n.call(u,u.__data__,c,o)),e&&"__data__"in u&&(e.__data__=u.__data__)):t.push(null)}return S(i)},ka.selectAll=function(n){var t,e,r=[];n=E(n);for(var u=-1,i=this.length;++u<i;)for(var o=this[u],a=-1,c=o.length;++a<c;)(e=o[a])&&(r.push(t=ra(n.call(e,e.__data__,a,u))),t.parentNode=e);return S(r)};var Ea={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ta.ns={prefix:Ea,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&(e=n.slice(0,t),n=n.slice(t+1)),Ea.hasOwnProperty(e)?{space:Ea[e],local:n}:n}},ka.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=ta.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(A(t,n[t]));return this}return this.each(A(n,t))},ka.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=z(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1}else for(t=e.getAttribute("class");++u<r;)if(!C(n[u]).test(t))return!1;return!0}for(t in n)this.each(q(t,n[t]));return this}return this.each(q(n,t))},ka.style=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t="");for(e in n)this.each(T(e,n[e],t));return this}if(2>r)return oa.getComputedStyle(this.node(),null).getPropertyValue(n);e=""}return this.each(T(n,t,e))},ka.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},ka.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},ka.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},ka.append=function(n){return n=D(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},ka.insert=function(n,t){return n=D(n),t=k(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},ka.remove=function(){return this.each(P)},ka.data=function(n,t){function e(n,e){var r,u,i,o=n.length,f=e.length,h=Math.min(o,f),g=new Array(f),p=new Array(f),v=new Array(o);if(t){var d,m=new a,y=new Array(o);for(r=-1;++r<o;)m.has(d=t.call(u=n[r],u.__data__,r))?v[r]=u:m.set(d,u),y[r]=d;for(r=-1;++r<f;)(u=m.get(d=t.call(e,i=e[r],r)))?u!==!0&&(g[r]=u,u.__data__=i):p[r]=U(i),m.set(d,!0);for(r=-1;++r<o;)m.get(y[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=U(i);for(;f>r;++r)p[r]=U(e[r]);for(;o>r;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,c.push(p),l.push(g),s.push(v)}var r,u,i=-1,o=this.length;if(!arguments.length){for(n=new Array(o=(r=this[0]).length);++i<o;)(u=r[i])&&(n[i]=u.__data__);return n}var c=O([]),l=S([]),s=S([]);if("function"==typeof n)for(;++i<o;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<o;)e(r=this[i],n);return l.enter=function(){return c},l.exit=function(){return s},l},ka.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},ka.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=j(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return S(u)},ka.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];--u>=0;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},ka.sort=function(n){n=F.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},ka.each=function(n){return H(this,function(t,e,r){n.call(t,t.__data__,e,r)})},ka.call=function(n){var t=ra(arguments);return n.apply(t[0]=this,t),this},ka.empty=function(){return!this.node()},ka.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,u=e.length;u>r;r++){var i=e[r];if(i)return i}return null},ka.size=function(){var n=0;return H(this,function(){++n}),n};var Aa=[];ta.selection.enter=O,ta.selection.enter.prototype=Aa,Aa.append=ka.append,Aa.empty=ka.empty,Aa.node=ka.node,Aa.call=ka.call,Aa.size=ka.size,Aa.select=function(n){for(var t,e,r,u,i,o=[],a=-1,c=this.length;++a<c;){r=(u=this[a]).update,o.push(t=[]),t.parentNode=u.parentNode;for(var l=-1,s=u.length;++l<s;)(i=u[l])?(t.push(r[l]=e=n.call(u.parentNode,i.__data__,l,a)),e.__data__=i.__data__):t.push(null)}return S(o)},Aa.insert=function(n,t){return arguments.length<2&&(t=Y(this)),ka.insert.call(this,n,t)},ka.transition=function(n){for(var t,e,r=Dl||++Hl,u=Xo(n),i=[],o=Pl||{time:Date.now(),ease:ku,delay:0,duration:250},a=-1,c=this.length;++a<c;){i.push(t=[]);for(var l=this[a],s=-1,f=l.length;++s<f;)(e=l[s])&&$o(e,s,u,r,o),t.push(e)}return Io(i,u,r)},ka.interrupt=function(n){var t=Xo(n);return this.each(function(){var n=this[t];n&&++n.active})},ta.select=function(n){var t=["string"==typeof n?ba(n,ua):n];return t.parentNode=ia,S([t])},ta.selectAll=function(n){var t=ra("string"==typeof n?_a(n,ua):n);return t.parentNode=ia,S([t])};var Na=ta.select(ia);ka.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(Z(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(Z(n,t,e))};var Ca=ta.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ca.forEach(function(n){"on"+n in ua&&Ca.remove(n)});var za="onselectstart"in ua?null:m(ia.style,"userSelect"),qa=0;ta.mouse=function(n){return B(n,_())};var La=/WebKit/.test(oa.navigator.userAgent)?-1:0;ta.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=_().changedTouches),t)for(var r,u=0,i=t.length;i>u;++u)if((r=t[u]).identifier===e)return B(n,r)},ta.behavior.drag=function(){function n(){this.on("mousedown.drag",u).on("touchstart.drag",i)}function t(n,t,u,i,o){return function(){function a(){var n,e,r=t(h,v);r&&(n=r[0]-M[0],e=r[1]-M[1],p|=n|e,M=r,g({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:n,dy:e}))}function c(){t(h,v)&&(m.on(i+d,null).on(o+d,null),y(p&&ta.event.target===f),g({type:"dragend"}))}var l,s=this,f=ta.event.target,h=s.parentNode,g=e.of(s,arguments),p=0,v=n(),d=".drag"+(null==v?"":"-"+v),m=ta.select(u()).on(i+d,a).on(o+d,c),y=$(),M=t(h,v);r?(l=r.apply(s,arguments),l=[l.x-M[0],l.y-M[1]]):l=[0,0],g({type:"dragstart"})}}var e=w(n,"drag","dragstart","dragend"),r=null,u=t(y,ta.mouse,G,"mousemove","mouseup"),i=t(W,ta.touch,J,"touchmove","touchend");return n.origin=function(t){return arguments.length?(r=t,n):r},ta.rebind(n,e,"on")},ta.touches=function(n,t){return arguments.length<2&&(t=_().touches),t?ra(t).map(function(t){var e=B(n,t);return e.identifier=t.identifier,e}):[]};var Ta=1e-6,Ra=Ta*Ta,Da=Math.PI,Pa=2*Da,Ua=Pa-Ta,ja=Da/2,Fa=Da/180,Ha=180/Da,Oa=Math.SQRT2,Ya=2,Ia=4;ta.interpolateZoom=function(n,t){function e(n){var t=n*y;if(m){var e=rt(v),o=i/(Ya*h)*(e*ut(Oa*t+v)-et(v));return[r+o*l,u+o*s,i*e/rt(Oa*t+v)]}return[r+n*l,u+n*s,i*Math.exp(Oa*t)]}var r=n[0],u=n[1],i=n[2],o=t[0],a=t[1],c=t[2],l=o-r,s=a-u,f=l*l+s*s,h=Math.sqrt(f),g=(c*c-i*i+Ia*f)/(2*i*Ya*h),p=(c*c-i*i-Ia*f)/(2*c*Ya*h),v=Math.log(Math.sqrt(g*g+1)-g),d=Math.log(Math.sqrt(p*p+1)-p),m=d-v,y=(m||Math.log(c/i))/Oa;return e.duration=1e3*y,e},ta.behavior.zoom=function(){function n(n){n.on(z,s).on(Xa+".zoom",h).on("dblclick.zoom",g).on(T,f)}function t(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function e(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}function r(n){k.k=Math.max(A[0],Math.min(A[1],n))}function u(n,t){t=e(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function i(t,e,i,o){t.__chart__={x:k.x,y:k.y,k:k.k},r(Math.pow(2,o)),u(v=e,i),t=ta.select(t),N>0&&(t=t.transition().duration(N)),t.call(n.event)}function o(){x&&x.domain(M.range().map(function(n){return(n-k.x)/k.k}).map(M.invert)),S&&S.domain(_.range().map(function(n){return(n-k.y)/k.k}).map(_.invert))}function a(n){C++||n({type:"zoomstart"})}function c(n){o(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function l(n){--C||n({type:"zoomend"}),v=null}function s(){function n(){s=1,u(ta.mouse(r),h),c(o)}function e(){f.on(q,null).on(L,null),g(s&&ta.event.target===i),l(o)}var r=this,i=ta.event.target,o=R.of(r,arguments),s=0,f=ta.select(oa).on(q,n).on(L,e),h=t(ta.mouse(r)),g=$();I(r),a(o)}function f(){function n(){var n=ta.touches(p);return g=k.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=t(n))}),n}function e(){var t=ta.event.target;ta.select(t).on(x,o).on(_,h),w.push(t);for(var e=ta.event.changedTouches,r=0,u=e.length;u>r;++r)d[e[r].identifier]=null;var a=n(),c=Date.now();if(1===a.length){if(500>c-y){var l=a[0];i(p,l,d[l.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),b()}y=c}else if(a.length>1){var l=a[0],s=a[1],f=l[0]-s[0],g=l[1]-s[1];m=f*f+g*g}}function o(){var n,t,e,i,o=ta.touches(p);I(p);for(var a=0,l=o.length;l>a;++a,i=null)if(e=o[a],i=d[e.identifier]){if(t)break;n=e,t=i}if(i){var s=(s=e[0]-n[0])*s+(s=e[1]-n[1])*s,f=m&&Math.sqrt(s/m);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+i[0])/2,(t[1]+i[1])/2],r(f*g)}y=null,u(n,t),c(v)}function h(){if(ta.event.touches.length){for(var t=ta.event.changedTouches,e=0,r=t.length;r>e;++e)delete d[t[e].identifier];for(var u in d)return void n()}ta.selectAll(w).on(M,null),S.on(z,s).on(T,f),E(),l(v)}var g,p=this,v=R.of(p,arguments),d={},m=0,M=".zoom-"+ta.event.changedTouches[0].identifier,x="touchmove"+M,_="touchend"+M,w=[],S=ta.select(p),E=$();e(),a(v),S.on(z,null).on(T,e)}function h(){var n=R.of(this,arguments);m?clearTimeout(m):(p=t(v=d||ta.mouse(this)),I(this),a(n)),m=setTimeout(function(){m=null,l(n)},50),b(),r(Math.pow(2,.002*Za())*k.k),u(v,p),c(n)}function g(){var n=ta.mouse(this),e=Math.log(k.k)/Math.LN2;i(this,n,t(n),ta.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var p,v,d,m,y,M,x,_,S,k={x:0,y:0,k:1},E=[960,500],A=Va,N=250,C=0,z="mousedown.zoom",q="mousemove.zoom",L="mouseup.zoom",T="touchstart.zoom",R=w(n,"zoomstart","zoom","zoomend");return n.event=function(n){n.each(function(){var n=R.of(this,arguments),t=k;Dl?ta.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},a(n)}).tween("zoom:zoom",function(){var e=E[0],r=E[1],u=v?v[0]:e/2,i=v?v[1]:r/2,o=ta.interpolateZoom([(u-k.x)/k.k,(i-k.y)/k.k,e/k.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=o(t),a=e/r[2];this.__chart__=k={x:u-r[0]*a,y:i-r[1]*a,k:a},c(n)}}).each("interrupt.zoom",function(){l(n)}).each("end.zoom",function(){l(n)}):(this.__chart__=k,a(n),c(n),l(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},o(),n):[k.x,k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:+t},o(),n):k.k},n.scaleExtent=function(t){return arguments.length?(A=null==t?Va:[+t[0],+t[1]],n):A},n.center=function(t){return arguments.length?(d=t&&[+t[0],+t[1]],n):d},n.size=function(t){return arguments.length?(E=t&&[+t[0],+t[1]],n):E},n.duration=function(t){return arguments.length?(N=+t,n):N},n.x=function(t){return arguments.length?(x=t,M=t.copy(),k={x:0,y:0,k:1},n):x},n.y=function(t){return arguments.length?(S=t,_=t.copy(),k={x:0,y:0,k:1},n):S},ta.rebind(n,R,"on")};var Za,Va=[0,1/0],Xa="onwheel"in ua?(Za=function(){return-ta.event.deltaY*(ta.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ua?(Za=function(){return ta.event.wheelDelta},"mousewheel"):(Za=function(){return-ta.event.detail},"MozMousePixelScroll");ta.color=ot,ot.prototype.toString=function(){return this.rgb()+""},ta.hsl=at;var $a=at.prototype=new ot;$a.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new at(this.h,this.s,this.l/n)},$a.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new at(this.h,this.s,n*this.l)},$a.rgb=function(){return ct(this.h,this.s,this.l)},ta.hcl=lt;var Ba=lt.prototype=new ot;Ba.brighter=function(n){return new lt(this.h,this.c,Math.min(100,this.l+Wa*(arguments.length?n:1)))},Ba.darker=function(n){return new lt(this.h,this.c,Math.max(0,this.l-Wa*(arguments.length?n:1)))},Ba.rgb=function(){return st(this.h,this.c,this.l).rgb()},ta.lab=ft;var Wa=18,Ja=.95047,Ga=1,Ka=1.08883,Qa=ft.prototype=new ot;Qa.brighter=function(n){return new ft(Math.min(100,this.l+Wa*(arguments.length?n:1)),this.a,this.b)},Qa.darker=function(n){return new ft(Math.max(0,this.l-Wa*(arguments.length?n:1)),this.a,this.b)},Qa.rgb=function(){return ht(this.l,this.a,this.b)},ta.rgb=mt;var nc=mt.prototype=new ot;nc.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&u>t&&(t=u),e&&u>e&&(e=u),r&&u>r&&(r=u),new mt(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new mt(u,u,u)},nc.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new mt(n*this.r,n*this.g,n*this.b)},nc.hsl=function(){return _t(this.r,this.g,this.b)},nc.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var tc=ta.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});tc.forEach(function(n,t){tc.set(n,yt(t))}),ta.functor=Et,ta.xhr=Nt(At),ta.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var o=Ct(n,t,null==e?r:u(e),i);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:u(n)):e},o}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(o).join(n)}function o(n){return a.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var a=new RegExp('["'+n+"\n]"),c=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(s>=l)return o;if(u)return u=!1,i;var t=s;if(34===n.charCodeAt(t)){for(var e=t;e++<l;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}s=e+2;var r=n.charCodeAt(e+1);return 13===r?(u=!0,10===n.charCodeAt(e+2)&&++s):10===r&&(u=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;l>s;){var r=n.charCodeAt(s++),a=1;if(10===r)u=!0;else if(13===r)u=!0,10===n.charCodeAt(s)&&(++s,++a);else if(r!==c)continue;return n.slice(t,s-a)}return n.slice(t)}for(var r,u,i={},o={},a=[],l=n.length,s=0,f=0;(r=e())!==o;){for(var h=[];r!==i&&r!==o;)h.push(r),r=e();t&&null==(h=t(h,f++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new v,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(o).join(n)].concat(t.map(function(t){return u.map(function(n){return o(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(i).join("\n")},e},ta.csv=ta.dsv(",","text/csv"),ta.tsv=ta.dsv("\t","text/tab-separated-values");var ec,rc,uc,ic,oc,ac=oa[m(oa,"requestAnimationFrame")]||function(n){setTimeout(n,17)};ta.timer=function(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var u=e+t,i={c:n,t:u,f:!1,n:null};rc?rc.n=i:ec=i,rc=i,uc||(ic=clearTimeout(ic),uc=1,ac(Lt))},ta.timer.flush=function(){Tt(),Rt()},ta.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var cc=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(Pt);ta.formatPrefix=function(n,t){var e=0;return n&&(0>n&&(n*=-1),t&&(n=ta.round(n,Dt(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),cc[8+e/3]};var lc=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,sc=ta.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=ta.round(n,Dt(n,t))).toFixed(Math.max(0,Math.min(20,Dt(n*(1+1e-15),t))))}}),fc=ta.time={},hc=Date;Ft.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){gc.setUTCDate.apply(this._,arguments)},setDay:function(){gc.setUTCDay.apply(this._,arguments)},setFullYear:function(){gc.setUTCFullYear.apply(this._,arguments)},setHours:function(){gc.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){gc.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){gc.setUTCMinutes.apply(this._,arguments)},setMonth:function(){gc.setUTCMonth.apply(this._,arguments)},setSeconds:function(){gc.setUTCSeconds.apply(this._,arguments)},setTime:function(){gc.setTime.apply(this._,arguments)}};var gc=Date.prototype;fc.year=Ht(function(n){return n=fc.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),fc.years=fc.year.range,fc.years.utc=fc.year.utc.range,fc.day=Ht(function(n){var t=new hc(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),fc.days=fc.day.range,fc.days.utc=fc.day.utc.range,fc.dayOfYear=function(n){var t=fc.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=fc[n]=Ht(function(n){return(n=fc.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=fc.year(n).getDay();return Math.floor((fc.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});fc[n+"s"]=e.range,fc[n+"s"].utc=e.utc.range,fc[n+"OfYear"]=function(n){var e=fc.year(n).getDay();return Math.floor((fc.dayOfYear(n)+(e+t)%7)/7)}}),fc.week=fc.sunday,fc.weeks=fc.sunday.range,fc.weeks.utc=fc.sunday.utc.range,fc.weekOfYear=fc.sundayOfYear;var pc={"-":"",_:" ",0:"0"},vc=/^\s*\d+/,dc=/^%/;ta.locale=function(n){return{numberFormat:Ut(n),timeFormat:Yt(n)}};var mc=ta.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ta.format=mc.numberFormat,ta.geo={},le.prototype={s:0,t:0,add:function(n){se(n,this.t,yc),se(yc.s,this.s,this),
this.s?this.t+=yc.t:this.s=yc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var yc=new le;ta.geo.stream=function(n,t){n&&Mc.hasOwnProperty(n.type)?Mc[n.type](n,t):fe(n,t)};var Mc={Feature:function(n,t){fe(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)fe(e[r].geometry,t)}},xc={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){he(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)he(e[r],t,0)},Polygon:function(n,t){ge(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)ge(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)fe(e[r],t)}};ta.geo.area=function(n){return bc=0,ta.geo.stream(n,wc),bc};var bc,_c=new le,wc={sphere:function(){bc+=4*Da},point:y,lineStart:y,lineEnd:y,polygonStart:function(){_c.reset(),wc.lineStart=pe},polygonEnd:function(){var n=2*_c;bc+=0>n?4*Da+n:n,wc.lineStart=wc.lineEnd=wc.point=y}};ta.geo.bounds=function(){function n(n,t){M.push(x=[s=n,h=n]),f>t&&(f=t),t>g&&(g=t)}function t(t,e){var r=ve([t*Fa,e*Fa]);if(m){var u=me(m,r),i=[u[1],-u[0],0],o=me(i,u);xe(o),o=be(o);var c=t-p,l=c>0?1:-1,v=o[0]*Ha*l,d=va(c)>180;if(d^(v>l*p&&l*t>v)){var y=o[1]*Ha;y>g&&(g=y)}else if(v=(v+360)%360-180,d^(v>l*p&&l*t>v)){var y=-o[1]*Ha;f>y&&(f=y)}else f>e&&(f=e),e>g&&(g=e);d?p>t?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t):h>=s?(s>t&&(s=t),t>h&&(h=t)):t>p?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t)}else n(t,e);m=r,p=t}function e(){b.point=t}function r(){x[0]=s,x[1]=h,b.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=va(r)>180?r+(r>0?360:-360):r}else v=n,d=e;wc.point(n,e),t(n,e)}function i(){wc.lineStart()}function o(){u(v,d),wc.lineEnd(),va(y)>Ta&&(s=-(h=180)),x[0]=s,x[1]=h,m=null}function a(n,t){return(t-=n)<0?t+360:t}function c(n,t){return n[0]-t[0]}function l(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var s,f,h,g,p,v,d,m,y,M,x,b={point:n,lineStart:e,lineEnd:r,polygonStart:function(){b.point=u,b.lineStart=i,b.lineEnd=o,y=0,wc.polygonStart()},polygonEnd:function(){wc.polygonEnd(),b.point=n,b.lineStart=e,b.lineEnd=r,0>_c?(s=-(h=180),f=-(g=90)):y>Ta?g=90:-Ta>y&&(f=-90),x[0]=s,x[1]=h}};return function(n){g=h=-(s=f=1/0),M=[],ta.geo.stream(n,b);var t=M.length;if(t){M.sort(c);for(var e,r=1,u=M[0],i=[u];t>r;++r)e=M[r],l(e[0],u)||l(e[1],u)?(a(u[0],e[1])>a(u[0],u[1])&&(u[1]=e[1]),a(e[0],u[1])>a(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var o,e,p=-1/0,t=i.length-1,r=0,u=i[t];t>=r;u=e,++r)e=i[r],(o=a(u[1],e[0]))>p&&(p=o,s=e[0],h=u[1])}return M=x=null,1/0===s||1/0===f?[[0/0,0/0],[0/0,0/0]]:[[s,f],[h,g]]}}(),ta.geo.centroid=function(n){Sc=kc=Ec=Ac=Nc=Cc=zc=qc=Lc=Tc=Rc=0,ta.geo.stream(n,Dc);var t=Lc,e=Tc,r=Rc,u=t*t+e*e+r*r;return Ra>u&&(t=Cc,e=zc,r=qc,Ta>kc&&(t=Ec,e=Ac,r=Nc),u=t*t+e*e+r*r,Ra>u)?[0/0,0/0]:[Math.atan2(e,t)*Ha,tt(r/Math.sqrt(u))*Ha]};var Sc,kc,Ec,Ac,Nc,Cc,zc,qc,Lc,Tc,Rc,Dc={sphere:y,point:we,lineStart:ke,lineEnd:Ee,polygonStart:function(){Dc.lineStart=Ae},polygonEnd:function(){Dc.lineStart=ke}},Pc=Te(Ce,Ue,Fe,[-Da,-Da/2]),Uc=1e9;ta.geo.clipExtent=function(){var n,t,e,r,u,i,o={stream:function(n){return u&&(u.valid=!1),u=i(n),u.valid=!0,u},extent:function(a){return arguments.length?(i=Ie(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),u&&(u.valid=!1,u=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(ta.geo.conicEqualArea=function(){return Ze(Ve)}).raw=Ve,ta.geo.albers=function(){return ta.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ta.geo.albersUsa=function(){function n(n){var i=n[0],o=n[1];return t=null,e(i,o),t||(r(i,o),t)||u(i,o),t}var t,e,r,u,i=ta.geo.albers(),o=ta.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=ta.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(u>=.12&&.234>u&&r>=-.425&&-.214>r?o:u>=.166&&.234>u&&r>=-.214&&-.115>r?a:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),o.precision(t),a.precision(t),n):i.precision()},n.scale=function(t){return arguments.length?(i.scale(t),o.scale(.35*t),a.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var l=i.scale(),s=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[s-.455*l,f-.238*l],[s+.455*l,f+.238*l]]).stream(c).point,r=o.translate([s-.307*l,f+.201*l]).clipExtent([[s-.425*l+Ta,f+.12*l+Ta],[s-.214*l-Ta,f+.234*l-Ta]]).stream(c).point,u=a.translate([s-.205*l,f+.212*l]).clipExtent([[s-.214*l+Ta,f+.166*l+Ta],[s-.115*l-Ta,f+.234*l-Ta]]).stream(c).point,n},n.scale(1070)};var jc,Fc,Hc,Oc,Yc,Ic,Zc={point:y,lineStart:y,lineEnd:y,polygonStart:function(){Fc=0,Zc.lineStart=Xe},polygonEnd:function(){Zc.lineStart=Zc.lineEnd=Zc.point=y,jc+=va(Fc/2)}},Vc={point:$e,lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y},Xc={point:Je,lineStart:Ge,lineEnd:Ke,polygonStart:function(){Xc.lineStart=Qe},polygonEnd:function(){Xc.point=Je,Xc.lineStart=Ge,Xc.lineEnd=Ke}};ta.geo.path=function(){function n(n){return n&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=u(i)),ta.geo.stream(n,o)),i.result()}function t(){return o=null,n}var e,r,u,i,o,a=4.5;return n.area=function(n){return jc=0,ta.geo.stream(n,u(Zc)),jc},n.centroid=function(n){return Ec=Ac=Nc=Cc=zc=qc=Lc=Tc=Rc=0,ta.geo.stream(n,u(Xc)),Rc?[Lc/Rc,Tc/Rc]:qc?[Cc/qc,zc/qc]:Nc?[Ec/Nc,Ac/Nc]:[0/0,0/0]},n.bounds=function(n){return Yc=Ic=-(Hc=Oc=1/0),ta.geo.stream(n,u(Vc)),[[Hc,Oc],[Yc,Ic]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||er(n):At,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new Be:new nr(n),"function"!=typeof a&&i.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),n):a},n.projection(ta.geo.albersUsa()).context(null)},ta.geo.transform=function(n){return{stream:function(t){var e=new rr(t);for(var r in n)e[r]=n[r];return e}}},rr.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ta.geo.projection=ir,ta.geo.projectionMutator=or,(ta.geo.equirectangular=function(){return ir(cr)}).raw=cr.invert=cr,ta.geo.rotation=function(n){function t(t){return t=n(t[0]*Fa,t[1]*Fa),t[0]*=Ha,t[1]*=Ha,t}return n=sr(n[0]%360*Fa,n[1]*Fa,n.length>2?n[2]*Fa:0),t.invert=function(t){return t=n.invert(t[0]*Fa,t[1]*Fa),t[0]*=Ha,t[1]*=Ha,t},t},lr.invert=cr,ta.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=sr(-n[0]*Fa,-n[1]*Fa,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Ha,n[1]*=Ha}}),{type:"Polygon",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=pr((t=+r)*Fa,u*Fa),n):t},n.precision=function(r){return arguments.length?(e=pr(t*Fa,(u=+r)*Fa),n):u},n.angle(90)},ta.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Fa,u=n[1]*Fa,i=t[1]*Fa,o=Math.sin(r),a=Math.cos(r),c=Math.sin(u),l=Math.cos(u),s=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*o)*e+(e=l*s-c*f*a)*e),c*s+l*f*a)},ta.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return ta.range(Math.ceil(i/d)*d,u,d).map(h).concat(ta.range(Math.ceil(l/m)*m,c,m).map(g)).concat(ta.range(Math.ceil(r/p)*p,e,p).filter(function(n){return va(n%d)>Ta}).map(s)).concat(ta.range(Math.ceil(a/v)*v,o,v).filter(function(n){return va(n%m)>Ta}).map(f))}var e,r,u,i,o,a,c,l,s,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(g(c).slice(1),h(u).reverse().slice(1),g(l).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],l=+t[0][1],c=+t[1][1],i>u&&(t=i,i=u,u=t),l>c&&(t=l,l=c,c=t),n.precision(y)):[[i,l],[u,c]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(y)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,s=dr(a,o,90),f=mr(r,e,y),h=dr(l,c,90),g=mr(i,u,y),n):y},n.majorExtent([[-180,-90+Ta],[180,90-Ta]]).minorExtent([[-180,-80-Ta],[180,80+Ta]])},ta.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=yr,u=Mr;return n.distance=function(){return ta.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(u=t,e="function"==typeof t?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},ta.geo.interpolate=function(n,t){return xr(n[0]*Fa,n[1]*Fa,t[0]*Fa,t[1]*Fa)},ta.geo.length=function(n){return $c=0,ta.geo.stream(n,Bc),$c};var $c,Bc={sphere:y,point:y,lineStart:br,lineEnd:y,polygonStart:y,polygonEnd:y},Wc=_r(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(ta.geo.azimuthalEqualArea=function(){return ir(Wc)}).raw=Wc;var Jc=_r(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},At);(ta.geo.azimuthalEquidistant=function(){return ir(Jc)}).raw=Jc,(ta.geo.conicConformal=function(){return Ze(wr)}).raw=wr,(ta.geo.conicEquidistant=function(){return Ze(Sr)}).raw=Sr;var Gc=_r(function(n){return 1/n},Math.atan);(ta.geo.gnomonic=function(){return ir(Gc)}).raw=Gc,kr.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-ja]},(ta.geo.mercator=function(){return Er(kr)}).raw=kr;var Kc=_r(function(){return 1},Math.asin);(ta.geo.orthographic=function(){return ir(Kc)}).raw=Kc;var Qc=_r(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(ta.geo.stereographic=function(){return ir(Qc)}).raw=Qc,Ar.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-ja]},(ta.geo.transverseMercator=function(){var n=Er(Ar),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Ar,ta.geom={},ta.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=Et(e),i=Et(r),o=n.length,a=[],c=[];for(t=0;o>t;t++)a.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(a.sort(qr),t=0;o>t;t++)c.push([a[t][0],-a[t][1]]);var l=zr(a),s=zr(c),f=s[0]===l[0],h=s[s.length-1]===l[l.length-1],g=[];for(t=l.length-1;t>=0;--t)g.push(n[a[l[t]][2]]);for(t=+f;t<s.length-h;++t)g.push(n[a[s[t]][2]]);return g}var e=Nr,r=Cr;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},ta.geom.polygon=function(n){return xa(n,nl),n};var nl=ta.geom.polygon.prototype=[];nl.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},nl.centroid=function(n){var t,e,r=-1,u=this.length,i=0,o=0,a=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],i+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[i*n,o*n]},nl.clip=function(n){for(var t,e,r,u,i,o,a=Rr(n),c=-1,l=this.length-Rr(this),s=this[l-1];++c<l;){for(t=n.slice(),n.length=0,u=this[c],i=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],Lr(o,s,u)?(Lr(i,s,u)||n.push(Tr(i,o,s,u)),n.push(o)):Lr(i,s,u)&&n.push(Tr(i,o,s,u)),i=o;a&&n.push(n[0]),s=u}return n};var tl,el,rl,ul,il,ol=[],al=[];Yr.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Zr),t.length},nu.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},tu.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=iu(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(u=r.R,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(ru(this,e),n=e,e=n.U),e.C=!1,r.C=!0,uu(this,r))):(u=r.L,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(uu(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ru(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,o=n.R;if(e=i?o?iu(o):i:o,u?u.L===n?u.L=e:u.R=e:this._=e,i&&o?(r=e.C,e.C=n.C,e.L=i,i.U=e,e!==o?(u=e.U,e.U=n.U,n=e.R,u.L=n,e.R=o,o.U=e):(e.U=u,u=e,n=e.R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return n.C=!1,void 0;do{if(n===this._)break;if(n===u.L){if(t=u.R,t.C&&(t.C=!1,u.C=!0,ru(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,uu(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,ru(this,u),n=this._;break}}else if(t=u.L,t.C&&(t.C=!1,u.C=!0,uu(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ru(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,uu(this,u),n=this._;break}t.C=!0,n=u,u=u.U}while(!n.C);n&&(n.C=!1)}}},ta.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],u=a[0][1],i=a[1][0],o=a[1][1];return ou(e(n),a).cells.forEach(function(e,a){var c=e.edges,l=e.site,s=t[a]=c.length?c.map(function(n){var t=n.start();return[t.x,t.y]}):l.x>=r&&l.x<=i&&l.y>=u&&l.y<=o?[[r,o],[i,o],[i,u],[r,u]]:[];s.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/Ta)*Ta,y:Math.round(o(n,t)/Ta)*Ta,i:t}})}var r=Nr,u=Cr,i=r,o=u,a=cl;return n?t(n):(t.links=function(n){return ou(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return ou(e(n)).cells.forEach(function(e,r){for(var u,i,o=e.site,a=e.edges.sort(Zr),c=-1,l=a.length,s=a[l-1].edge,f=s.l===o?s.r:s.l;++c<l;)u=s,i=f,s=a[c].edge,f=s.l===o?s.r:s.l,r<i.i&&r<f.i&&cu(o,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){return arguments.length?(i=Et(r=n),t):r},t.y=function(n){return arguments.length?(o=Et(u=n),t):u},t.clipExtent=function(n){return arguments.length?(a=null==n?cl:n,t):a===cl?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===cl?null:a&&a[1]},t)};var cl=[[-1e6,-1e6],[1e6,1e6]];ta.geom.delaunay=function(n){return ta.geom.voronoi().triangles(n)},ta.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var c=n.x,s=n.y;if(null!=c)if(va(c-e)+va(s-r)<.01)l(n,t,e,r,u,i,o,a);else{var f=n.point;n.x=n.y=n.point=null,l(n,f,c,s,u,i,o,a),l(n,t,e,r,u,i,o,a)}else n.x=e,n.y=r,n.point=t}else l(n,t,e,r,u,i,o,a)}function l(n,t,e,r,u,o,a,c){var l=.5*(u+a),s=.5*(o+c),f=e>=l,h=r>=s,g=h<<1|f;n.leaf=!1,n=n.nodes[g]||(n.nodes[g]=fu()),f?u=l:a=l,h?o=s:c=s,i(n,t,e,r,u,o,a,c)}var s,f,h,g,p,v,d,m,y,M=Et(a),x=Et(c);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,o)for(g=0;p>g;++g)s=n[g],s.x<v&&(v=s.x),s.y<d&&(d=s.y),s.x>m&&(m=s.x),s.y>y&&(y=s.y),f.push(s.x),h.push(s.y);else for(g=0;p>g;++g){var b=+M(s=n[g],g),_=+x(s,g);v>b&&(v=b),d>_&&(d=_),b>m&&(m=b),_>y&&(y=_),f.push(b),h.push(_)}var w=m-v,S=y-d;w>S?y=d+w:m=v+S;var k=fu();if(k.add=function(n){i(k,n,+M(n,++g),+x(n,g),v,d,m,y)},k.visit=function(n){hu(n,k,v,d,m,y)},k.find=function(n){return gu(k,n[0],n[1],v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=s=null,k}var o,a=Nr,c=Cr;return(o=arguments.length)?(a=lu,c=su,3===o&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(a=n,i):a},i.y=function(n){return arguments.length?(c=n,i):c},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},ta.interpolateRgb=pu,ta.interpolateObject=vu,ta.interpolateNumber=du,ta.interpolateString=mu;var ll=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sl=new RegExp(ll.source,"g");ta.interpolate=yu,ta.interpolators=[function(n,t){var e=typeof t;return("string"===e?tc.has(t)||/^(#|rgb\(|hsl\()/.test(t)?pu:mu:t instanceof ot?pu:Array.isArray(t)?Mu:"object"===e&&isNaN(t)?vu:du)(n,t)}],ta.interpolateArray=Mu;var fl=function(){return At},hl=ta.map({linear:fl,poly:Eu,quad:function(){return wu},cubic:function(){return Su},sin:function(){return Au},exp:function(){return Nu},circle:function(){return Cu},elastic:zu,back:qu,bounce:function(){return Lu}}),gl=ta.map({in:At,out:bu,"in-out":_u,"out-in":function(n){return _u(bu(n))}});ta.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=hl.get(e)||fl,r=gl.get(r)||At,xu(r(e.apply(null,ea.call(arguments,1))))},ta.interpolateHcl=Tu,ta.interpolateHsl=Ru,ta.interpolateLab=Du,ta.interpolateRound=Pu,ta.transform=function(n){var t=ua.createElementNS(ta.ns.prefix.svg,"g");return(ta.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new Uu(e?e.matrix:pl)})(n)},Uu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var pl={a:1,b:0,c:0,d:1,e:0,f:0};ta.interpolateTransform=Ou,ta.layout={},ta.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Zu(n[e]));return t}},ta.layout.chord=function(){function n(){var n,l,f,h,g,p={},v=[],d=ta.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(l=0,g=-1;++g<i;)l+=u[h][g];v.push(l),m.push(ta.range(i)),n+=l}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&m.forEach(function(n,t){n.sort(function(n,e){return a(u[t][n],u[t][e])})}),n=(Pa-s*i)/n,l=0,h=-1;++h<i;){for(f=l,g=-1;++g<i;){var y=d[h],M=m[y][g],x=u[y][M],b=l,_=l+=x*n;p[y+"-"+M]={index:y,subindex:M,startAngle:b,endAngle:_,value:x}}r[y]={index:y,startAngle:f,endAngle:l,value:(l-f)/n},l+=s}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+"-"+g],S=p[g+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}c&&t()}function t(){e.sort(function(n,t){return c((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,o,a,c,l={},s=0;return l.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,e=r=null,l):u},l.padding=function(n){return arguments.length?(s=n,e=r=null,l):s},l.sortGroups=function(n){return arguments.length?(o=n,e=r=null,l):o},l.sortSubgroups=function(n){return arguments.length?(a=n,e=null,l):a},l.sortChords=function(n){return arguments.length?(c=n,e&&t(),l):c},l.chords=function(){return e||n(),e},l.groups=function(){return r||n(),r},l},ta.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,o=t.cy-n.y,a=u-e,c=i*i+o*o;if(c>a*a/d){if(p>c){var l=t.charge/c;n.px-=i*l,n.py-=o*l}return!0}if(t.point&&c&&p>c){var l=t.pointCharge/c;n.px-=i*l,n.py-=o*l}}return!t.charge}}function t(n){n.px=ta.event.x,n.py=ta.event.y,a.resume()}var e,r,u,i,o,a={},c=ta.dispatch("start","tick","end"),l=[1,1],s=.9,f=vl,h=dl,g=-30,p=ml,v=.1,d=.64,m=[],y=[];return a.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var t,e,a,f,h,p,d,M,x,b=m.length,_=y.length;for(e=0;_>e;++e)a=y[e],f=a.source,h=a.target,M=h.x-f.x,x=h.y-f.y,(p=M*M+x*x)&&(p=r*i[e]*((p=Math.sqrt(p))-u[e])/p,M*=p,x*=p,h.x-=M*(d=f.weight/(h.weight+f.weight)),h.y-=x*d,f.x+=M*(d=1-d),f.y+=x*d);if((d=r*v)&&(M=l[0]/2,x=l[1]/2,e=-1,d))for(;++e<b;)a=m[e],a.x+=(M-a.x)*d,a.y+=(x-a.y)*d;if(g)for(Gu(t=ta.geom.quadtree(m),r,o),e=-1;++e<b;)(a=m[e]).fixed||t.visit(n(a));for(e=-1;++e<b;)a=m[e],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*s,a.y-=(a.py-(a.py=a.y))*s);c.tick({type:"tick",alpha:r})},a.nodes=function(n){return arguments.length?(m=n,a):m},a.links=function(n){return arguments.length?(y=n,a):y},a.size=function(n){return arguments.length?(l=n,a):l},a.linkDistance=function(n){return arguments.length?(f="function"==typeof n?n:+n,a):f},a.distance=a.linkDistance,a.linkStrength=function(n){return arguments.length?(h="function"==typeof n?n:+n,a):h},a.friction=function(n){return arguments.length?(s=+n,a):s},a.charge=function(n){return arguments.length?(g="function"==typeof n?n:+n,a):g},a.chargeDistance=function(n){return arguments.length?(p=n*n,a):Math.sqrt(p)},a.gravity=function(n){return arguments.length?(v=+n,a):v},a.theta=function(n){return arguments.length?(d=n*n,a):Math.sqrt(d)},a.alpha=function(n){return arguments.length?(n=+n,r?r=n>0?n:0:n>0&&(c.start({type:"start",alpha:r=n}),ta.timer(a.tick)),a):r},a.start=function(){function n(n,r){if(!e){for(e=new Array(c),a=0;c>a;++a)e[a]=[];for(a=0;l>a;++a){var u=y[a];e[u.source.index].push(u.target),e[u.target.index].push(u.source)}}for(var i,o=e[t],a=-1,l=o.length;++a<l;)if(!isNaN(i=o[a][n]))return i;return Math.random()*r}var t,e,r,c=m.length,s=y.length,p=l[0],v=l[1];for(t=0;c>t;++t)(r=m[t]).index=t,r.weight=0;for(t=0;s>t;++t)r=y[t],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;c>t;++t)r=m[t],isNaN(r.x)&&(r.x=n("x",p)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],"function"==typeof f)for(t=0;s>t;++t)u[t]=+f.call(this,y[t],t);else for(t=0;s>t;++t)u[t]=f;if(i=[],"function"==typeof h)for(t=0;s>t;++t)i[t]=+h.call(this,y[t],t);else for(t=0;s>t;++t)i[t]=h;if(o=[],"function"==typeof g)for(t=0;c>t;++t)o[t]=+g.call(this,m[t],t);else for(t=0;c>t;++t)o[t]=g;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e||(e=ta.behavior.drag().origin(At).on("dragstart.force",$u).on("drag.force",t).on("dragend.force",Bu)),arguments.length?(this.on("mouseover.force",Wu).on("mouseout.force",Ju).call(e),void 0):e},ta.rebind(a,c,"on")};var vl=20,dl=1,ml=1/0;ta.layout.hierarchy=function(){function n(u){var i,o=[u],a=[];for(u.depth=0;null!=(i=o.pop());)if(a.push(i),(l=e.call(n,i,i.depth))&&(c=l.length)){for(var c,l,s;--c>=0;)o.push(s=l[c]),s.parent=i,s.depth=i.depth+1;r&&(i.value=0),i.children=l}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return ni(u,function(n){var e,u;t&&(e=n.children)&&e.sort(t),r&&(u=n.parent)&&(u.value+=n.value)}),a}var t=ri,e=ti,r=ei;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(Qu(t,function(n){n.children&&(n.value=0)}),ni(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},ta.layout.partition=function(){function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(o=i.length)){var o,a,c,l=-1;for(r=t.value?r/t.value:0;++l<o;)n(a=i[l],e,c=a.value*r,u),e+=c}}function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}function e(e,i){var o=r.call(this,e,i);return n(o[0],0,u[0],u[1]/t(o[0])),o}var r=ta.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},Ku(e,r)},ta.layout.pie=function(){function n(o){var a,c=o.length,l=o.map(function(e,r){return+t.call(n,e,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof u?u.apply(this,arguments):u)-s,h=Math.min(Math.abs(f)/c,+("function"==typeof i?i.apply(this,arguments):i)),g=h*(0>f?-1:1),p=(f-c*g)/ta.sum(l),v=ta.range(c),d=[];return null!=e&&v.sort(e===yl?function(n,t){return l[t]-l[n]}:function(n,t){return e(o[n],o[t])}),v.forEach(function(n){d[n]={data:o[n],value:a=l[n],startAngle:s,endAngle:s+=a*p+g,padAngle:h}}),d}var t=Number,e=yl,r=0,u=Pa,i=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n.padAngle=function(t){return arguments.length?(i=t,n):i},n};var yl={};ta.layout.stack=function(){function n(a,c){if(!(h=a.length))return a;var l=a.map(function(e,r){return t.call(n,e,r)}),s=l.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),o.call(n,t,e)]})}),f=e.call(n,s,c);l=ta.permute(l,f),s=ta.permute(s,f);var h,g,p,v,d=r.call(n,s,c),m=l[0].length;for(p=0;m>p;++p)for(u.call(n,l[0][p],v=d[p],s[0][p][1]),g=1;h>g;++g)u.call(n,l[g][p],v+=s[g-1][p][1],s[g][p][1]);return a}var t=At,e=ci,r=li,u=ai,i=ii,o=oi;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:Ml.get(t)||ci,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:xl.get(t)||li,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(u=t,n):u},n};var Ml=ta.map({"inside-out":function(n){var t,e,r=n.length,u=n.map(si),i=n.map(fi),o=ta.range(r).sort(function(n,t){return u[n]-u[t]}),a=0,c=0,l=[],s=[];for(t=0;r>t;++t)e=o[t],c>a?(a+=i[e],l.push(e)):(c+=i[e],s.push(e));return s.reverse().concat(l)},reverse:function(n){return ta.range(n.length).reverse()},default:ci}),xl=ta.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,o=[],a=0,c=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;i>e;++e)c[e]=(a-o[e])/2;return c},wiggle:function(n){var t,e,r,u,i,o,a,c,l,s=n.length,f=n[0],h=f.length,g=[];for(g[0]=c=l=0,e=1;h>e;++e){for(t=0,u=0;s>t;++t)u+=n[t][e][1];for(t=0,i=0,a=f[e][0]-f[e-1][0];s>t;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);t>r;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;i+=o*n[t][e][1]}g[e]=c-=u?i/u*a:0,l>c&&(l=c)}for(e=0;h>e;++e)g[e]-=l;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,o=1/u,a=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];if(r)for(t=0;u>t;t++)n[t][e][1]/=r;else for(t=0;u>t;t++)n[t][e][1]=o}for(e=0;i>e;++e)a[e]=0;return a},zero:li});ta.layout.histogram=function(){function n(n,i){for(var o,a,c=[],l=n.map(e,this),s=r.call(this,l,i),f=u.call(this,s,l,i),i=-1,h=l.length,g=f.length-1,p=t?1:1/h;++i<g;)o=c[i]=[],o.dx=f[i+1]-(o.x=f[i]),o.y=0;if(g>0)for(i=-1;++i<h;)a=l[i],a>=s[0]&&a<=s[1]&&(o=c[ta.bisect(f,a,1,g)-1],o.y+=p,o.push(n[i]));return c}var t=!0,e=Number,r=vi,u=gi;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=Et(t),n):r},n.bins=function(t){return arguments.length?(u="number"==typeof t?function(n){return pi(n,t)}:Et(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},ta.layout.pack=function(){function n(n,i){var o=e.call(this,n,i),a=o[0],c=u[0],l=u[1],s=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,ni(a,function(n){n.r=+s(n.value)}),ni(a,xi),r){var f=r*(t?1:Math.max(2*a.r/c,2*a.r/l))/2;ni(a,function(n){n.r+=f}),ni(a,xi),ni(a,function(n){n.r-=f})}return wi(a,c/2,l/2,t?1:1/Math.max(2*a.r/c,2*a.r/l)),o}var t,e=ta.layout.hierarchy().sort(di),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},Ku(n,e)},ta.layout.tree=function(){function n(n,u){var s=o.call(this,n,u),f=s[0],h=t(f);if(ni(h,e),h.parent.m=-h.z,Qu(h,r),l)Qu(f,i);else{var g=f,p=f,v=f;Qu(f,function(n){n.x<g.x&&(g=n),n.x>p.x&&(p=n),n.depth>v.depth&&(v=n)});var d=a(g,p)/2-g.x,m=c[0]/(p.x+a(p,g)/2+d),y=c[1]/(v.depth||1);Qu(f,function(n){n.x=(n.x+d)*m,n.y=n.depth*y})}return s}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var u,i=t.children,o=0,a=i.length;a>o;++o)r.push((i[o]=u={_:i[o],parent:t,children:(u=i[o].children)&&u.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=u);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Ci(n);var i=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+a(n._,r._),n.m=n.z-i):n.z=i}else r&&(n.z=r.z+a(n._,r._));n.parent.A=u(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function u(n,t,e){if(t){for(var r,u=n,i=n,o=t,c=u.parent.children[0],l=u.m,s=i.m,f=o.m,h=c.m;o=Ai(o),u=Ei(u),o&&u;)c=Ei(c),i=Ai(i),i.a=n,r=o.z+f-u.z-l+a(o._,u._),r>0&&(Ni(zi(o,n,e),n,r),l+=r,s+=r),f+=o.m,l+=u.m,h+=c.m,s+=i.m;o&&!Ai(i)&&(i.t=o,i.m+=f-s),u&&!Ei(c)&&(c.t=u,c.m+=l-h,e=n)}return e}function i(n){n.x*=c[0],n.y=n.depth*c[1]}var o=ta.layout.hierarchy().sort(null).value(null),a=ki,c=[1,1],l=null;return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(l=null==(c=t)?i:null,n):l?null:c},n.nodeSize=function(t){return arguments.length?(l=null==(c=t)?null:i,n):l?c:null},Ku(n,o)},ta.layout.cluster=function(){function n(n,i){var o,a=t.call(this,n,i),c=a[0],l=0;ni(c,function(n){var t=n.children;t&&t.length?(n.x=Li(t),n.y=qi(t)):(n.x=o?l+=e(n,o):0,n.y=0,o=n)});var s=Ti(c),f=Ri(c),h=s.x-e(s,f)/2,g=f.x+e(f,s)/2;return ni(c,u?function(n){n.x=(n.x-c.x)*r[0],n.y=(c.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(c.y?n.y/c.y:1))*r[1]}),a}var t=ta.layout.hierarchy().sort(null).value(null),e=ki,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},Ku(n,t)},ta.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var i=e.children;if(i&&i.length){var o,a,c,l=f(e),s=[],h=i.slice(),p=1/0,v="slice"===g?l.dx:"dice"===g?l.dy:"slice-dice"===g?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(n(h,l.dx*l.dy/e.value),s.area=0;(c=h.length)>0;)s.push(o=h[c-1]),s.area+=o.area,"squarify"!==g||(a=r(s,v))<=p?(h.pop(),p=a):(s.area-=s.pop().area,u(s,v,l,!1),v=Math.min(l.dx,l.dy),s.length=s.area=0,p=1/0);s.length&&(u(s,v,l,!0),s.length=s.area=0),i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,o=f(t),a=r.slice(),c=[];for(n(a,o.dx*o.dy/t.value),c.area=0;i=a.pop();)c.push(i),c.area+=i.area,null!=i.z&&(u(c,i.z?o.dx:o.dy,o,!a.length),c.length=c.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(i>e&&(i=e),e>u&&(u=e));return r*=r,t*=t,r?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,o=n.length,a=e.x,l=e.y,s=t?c(n.area/t):0;if(t==e.dx){for((r||s>e.dy)&&(s=e.dy);++i<o;)u=n[i],u.x=a,u.y=l,u.dy=s,a+=u.dx=Math.min(e.x+e.dx-a,s?c(u.area/s):0);u.z=!0,u.dx+=e.x+e.dx-a,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++i<o;)u=n[i],u.x=a,u.y=l,u.dx=s,l+=u.dy=Math.min(e.y+e.dy-l,s?c(u.area/s):0);u.z=!1,u.dy+=e.y+e.dy-l,e.x+=s,e.dx-=s}}function i(r){var u=o||a(r),i=u[0];return i.x=0,i.y=0,i.dx=l[0],i.dy=l[1],o&&a.revalue(i),n([i],i.dx*i.dy/i.value),(o?e:t)(i),
h&&(o=u),u}var o,a=ta.layout.hierarchy(),c=Math.round,l=[1,1],s=null,f=Di,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));return i.size=function(n){return arguments.length?(l=n,i):l},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?Di(t):Pi(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Pi(t,n)}if(!arguments.length)return s;var r;return f=null==(s=n)?Di:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,i},i.round=function(n){return arguments.length?(c=n?Math.round:Number,i):c!=Number},i.sticky=function(n){return arguments.length?(h=n,o=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+"",i):g},Ku(i,a)},ta.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,u;do e=2*Math.random()-1,r=2*Math.random()-1,u=e*e+r*r;while(!u||u>1);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=ta.random.normal.apply(ta,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=ta.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},ta.scale={};var bl={floor:At,ceil:At};ta.scale.linear=function(){return Ii([0,1],[0,1],yu,!1)};var _l={s:1,g:1,p:1,r:1,e:1};ta.scale.log=function(){return Gi(ta.scale.linear().domain([0,1]),10,!0,[1,10])};var wl=ta.format(".0e"),Sl={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};ta.scale.pow=function(){return Ki(ta.scale.linear(),1,[0,1])},ta.scale.sqrt=function(){return ta.scale.pow().exponent(.5)},ta.scale.ordinal=function(){return no([],{t:"range",a:[[]]})},ta.scale.category10=function(){return ta.scale.ordinal().range(kl)},ta.scale.category20=function(){return ta.scale.ordinal().range(El)},ta.scale.category20b=function(){return ta.scale.ordinal().range(Al)},ta.scale.category20c=function(){return ta.scale.ordinal().range(Nl)};var kl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Mt),El=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Mt),Al=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Mt),Nl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Mt);ta.scale.quantile=function(){return to([],[])},ta.scale.quantize=function(){return eo(0,1,[0,1])},ta.scale.threshold=function(){return ro([.5],[0,1])},ta.scale.identity=function(){return uo([0,1])},ta.svg={},ta.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),s=o.apply(this,arguments)-ja,f=a.apply(this,arguments)-ja,h=Math.abs(f-s),g=s>f?0:1;if(n>l&&(p=l,l=n,n=p),h>=Ua)return t(l,g)+(n?t(n,1-g):"")+"Z";var p,v,d,m,y,M,x,b,_,w,S,k,E=0,A=0,N=[];if((m=(+c.apply(this,arguments)||0)/2)&&(d=i===Cl?Math.sqrt(n*n+l*l):+i.apply(this,arguments),g||(A*=-1),l&&(A=tt(d/l*Math.sin(m))),n&&(E=tt(d/n*Math.sin(m)))),l){y=l*Math.cos(s+A),M=l*Math.sin(s+A),x=l*Math.cos(f-A),b=l*Math.sin(f-A);var C=Math.abs(f-s-2*A)<=Da?0:1;if(A&&fo(y,M,x,b)===g^C){var z=(s+f)/2;y=l*Math.cos(z),M=l*Math.sin(z),x=b=null}}else y=M=0;if(n){_=n*Math.cos(f-E),w=n*Math.sin(f-E),S=n*Math.cos(s+E),k=n*Math.sin(s+E);var q=Math.abs(s-f+2*E)<=Da?0:1;if(E&&fo(_,w,S,k)===1-g^q){var L=(s+f)/2;_=n*Math.cos(L),w=n*Math.sin(L),S=k=null}}else _=w=0;if((p=Math.min(Math.abs(l-n)/2,+u.apply(this,arguments)))>.001){v=l>n^g?0:1;var T=null==S?[_,w]:null==x?[y,M]:Tr([y,M],[S,k],[x,b],[_,w]),R=y-T[0],D=M-T[1],P=x-T[0],U=b-T[1],j=1/Math.sin(Math.acos((R*P+D*U)/(Math.sqrt(R*R+D*D)*Math.sqrt(P*P+U*U)))/2),F=Math.sqrt(T[0]*T[0]+T[1]*T[1]);if(null!=x){var H=Math.min(p,(l-F)/(j+1)),O=ho(null==S?[_,w]:[S,k],[y,M],l,H,g),Y=ho([x,b],[_,w],l,H,g);p===H?N.push("M",O[0],"A",H,",",H," 0 0,",v," ",O[1],"A",l,",",l," 0 ",1-g^fo(O[1][0],O[1][1],Y[1][0],Y[1][1]),",",g," ",Y[1],"A",H,",",H," 0 0,",v," ",Y[0]):N.push("M",O[0],"A",H,",",H," 0 1,",v," ",Y[0])}else N.push("M",y,",",M);if(null!=S){var I=Math.min(p,(n-F)/(j-1)),Z=ho([y,M],[S,k],n,-I,g),V=ho([_,w],null==x?[y,M]:[x,b],n,-I,g);p===I?N.push("L",V[0],"A",I,",",I," 0 0,",v," ",V[1],"A",n,",",n," 0 ",g^fo(V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-g," ",Z[1],"A",I,",",I," 0 0,",v," ",Z[0]):N.push("L",V[0],"A",I,",",I," 0 0,",v," ",Z[0])}else N.push("L",_,",",w)}else N.push("M",y,",",M),null!=x&&N.push("A",l,",",l," 0 ",C,",",g," ",x,",",b),N.push("L",_,",",w),null!=S&&N.push("A",n,",",n," 0 ",q,",",1-g," ",S,",",k);return N.push("Z"),N.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=oo,r=ao,u=io,i=Cl,o=co,a=lo,c=so;return n.innerRadius=function(t){return arguments.length?(e=Et(t),n):e},n.outerRadius=function(t){return arguments.length?(r=Et(t),n):r},n.cornerRadius=function(t){return arguments.length?(u=Et(t),n):u},n.padRadius=function(t){return arguments.length?(i=t==Cl?Cl:Et(t),n):i},n.startAngle=function(t){return arguments.length?(o=Et(t),n):o},n.endAngle=function(t){return arguments.length?(a=Et(t),n):a},n.padAngle=function(t){return arguments.length?(c=Et(t),n):c},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-ja;return[Math.cos(t)*n,Math.sin(t)*n]},n};var Cl="auto";ta.svg.line=function(){return go(At)};var zl=ta.map({linear:po,"linear-closed":vo,step:mo,"step-before":yo,"step-after":Mo,basis:ko,"basis-open":Eo,"basis-closed":Ao,bundle:No,cardinal:_o,"cardinal-open":xo,"cardinal-closed":bo,monotone:Ro});zl.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var ql=[0,2/3,1/3,0],Ll=[0,1/3,2/3,0],Tl=[0,1/6,2/3,1/6];ta.svg.line.radial=function(){var n=go(Do);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},yo.reverse=Mo,Mo.reverse=yo,ta.svg.area=function(){return Po(At)},ta.svg.area.radial=function(){var n=Po(Do);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},ta.svg.chord=function(){function n(n,a){var c=t(this,i,n,a),l=t(this,o,n,a);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,l)?u(c.r,c.p1,c.r,c.p0):u(c.r,c.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+u(l.r,l.p1,c.r,c.p0))+"Z"}function t(n,t,e,r){var u=t.call(n,e,r),i=a.call(n,u,r),o=c.call(n,u,r)-ja,s=l.call(n,u,r)-ja;return{r:i,a0:o,a1:s,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>Da)+",1 "+t}function u(n,t,e,r){return"Q 0,0 "+r}var i=yr,o=Mr,a=Uo,c=co,l=lo;return n.radius=function(t){return arguments.length?(a=Et(t),n):a},n.source=function(t){return arguments.length?(i=Et(t),n):i},n.target=function(t){return arguments.length?(o=Et(t),n):o},n.startAngle=function(t){return arguments.length?(c=Et(t),n):c},n.endAngle=function(t){return arguments.length?(l=Et(t),n):l},n},ta.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),o=e.call(this,n,u),a=(i.y+o.y)/2,c=[i,{x:i.x,y:a},{x:o.x,y:a},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var t=yr,e=Mr,r=jo;return n.source=function(e){return arguments.length?(t=Et(e),n):t},n.target=function(t){return arguments.length?(e=Et(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},ta.svg.diagonal.radial=function(){var n=ta.svg.diagonal(),t=jo,e=n.projection;return n.projection=function(n){return arguments.length?e(Fo(t=n)):t},n},ta.svg.symbol=function(){function n(n,r){return(Rl.get(t.call(this,n,r))||Yo)(e.call(this,n,r))}var t=Oo,e=Ho;return n.type=function(e){return arguments.length?(t=Et(e),n):t},n.size=function(t){return arguments.length?(e=Et(t),n):e},n};var Rl=ta.map({circle:Yo,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*jl)),e=t*jl;return"M0,"+-t+"L"+e+",0"+" 0,"+t+" "+-e+",0"+"Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/Ul),e=t*Ul/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/Ul),e=t*Ul/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});ta.svg.symbolTypes=Rl.keys();var Dl,Pl,Ul=Math.sqrt(3),jl=Math.tan(30*Fa),Fl=[],Hl=0;Fl.call=ka.call,Fl.empty=ka.empty,Fl.node=ka.node,Fl.size=ka.size,ta.transition=function(n){return arguments.length?Dl?n.transition():n:Na.transition()},ta.transition.prototype=Fl,Fl.select=function(n){var t,e,r,u=this.id,i=this.namespace,o=[];n=k(n);for(var a=-1,c=this.length;++a<c;){o.push(t=[]);for(var l=this[a],s=-1,f=l.length;++s<f;)(r=l[s])&&(e=n.call(r,r.__data__,s,a))?("__data__"in r&&(e.__data__=r.__data__),$o(e,s,i,u,r[i][u]),t.push(e)):t.push(null)}return Io(o,i,u)},Fl.selectAll=function(n){var t,e,r,u,i,o=this.id,a=this.namespace,c=[];n=E(n);for(var l=-1,s=this.length;++l<s;)for(var f=this[l],h=-1,g=f.length;++h<g;)if(r=f[h]){i=r[a][o],e=n.call(r,r.__data__,h,l),c.push(t=[]);for(var p=-1,v=e.length;++p<v;)(u=e[p])&&$o(u,p,a,o,i),t.push(u)}return Io(c,a,o)},Fl.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=j(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]);for(var e=this[i],a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return Io(u,this.namespace,this.id)},Fl.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):H(this,null==t?function(t){t[r][e].tween.remove(n)}:function(u){u[r][e].tween.set(n,t)})},Fl.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function u(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function i(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?Ou:yu,a=ta.ns.qualify(n);return Zo(this,"attr."+n,t,a.local?i:u)},Fl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}var u=ta.ns.qualify(n);return this.tween("attr."+n,u.local?r:e)},Fl.style=function(n,t,e){function r(){this.style.removeProperty(n)}function u(t){return null==t?r:(t+="",function(){var r,u=oa.getComputedStyle(this,null).getPropertyValue(n);return u!==t&&(r=yu(u,t),function(t){this.style.setProperty(n,r(t),e)})})}var i=arguments.length;if(3>i){if("string"!=typeof n){2>i&&(t="");for(e in n)this.style(e,n[e],t);return this}e=""}return Zo(this,"style."+n,t,u)},Fl.styleTween=function(n,t,e){function r(r,u){var i=t.call(this,r,u,oa.getComputedStyle(this,null).getPropertyValue(n));return i&&function(t){this.style.setProperty(n,i(t),e)}}return arguments.length<3&&(e=""),this.tween("style."+n,r)},Fl.text=function(n){return Zo(this,"text",n,Vo)},Fl.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Fl.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=ta.ease.apply(ta,arguments)),H(this,function(r){r[e][t].ease=n}))},Fl.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:H(this,"function"==typeof n?function(r,u,i){r[e][t].delay=+n.call(r,r.__data__,u,i)}:(n=+n,function(r){r[e][t].delay=n}))},Fl.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:H(this,"function"==typeof n?function(r,u,i){r[e][t].duration=Math.max(1,n.call(r,r.__data__,u,i))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Fl.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var u=Pl,i=Dl;Dl=e,H(this,function(t,u,i){Pl=t[r][e],n.call(t,t.__data__,u,i)}),Pl=u,Dl=i}else H(this,function(u){var i=u[r][e];(i.event||(i.event=ta.dispatch("start","end","interrupt"))).on(n,t)});return this},Fl.transition=function(){for(var n,t,e,r,u=this.id,i=++Hl,o=this.namespace,a=[],c=0,l=this.length;l>c;c++){a.push(n=[]);for(var t=this[c],s=0,f=t.length;f>s;s++)(e=t[s])&&(r=e[o][u],$o(e,s,o,i,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),n.push(e)}return Io(a,o,i)},ta.svg.axis=function(){function n(n){n.each(function(){var n,l=ta.select(this),s=this.__chart__||e,f=this.__chart__=e.copy(),h=null==c?f.ticks?f.ticks.apply(f,a):f.domain():c,g=null==t?f.tickFormat?f.tickFormat.apply(f,a):At:t,p=l.selectAll(".tick").data(h,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ta),d=ta.transition(p.exit()).style("opacity",Ta).remove(),m=ta.transition(p.order()).style("opacity",1),y=Math.max(u,0)+o,M=ji(f),x=l.selectAll(".domain").data([0]),b=(x.enter().append("path").attr("class","domain"),ta.transition(x));v.append("line"),v.append("text");var _,w,S,k,E=v.select("line"),A=m.select("line"),N=p.select("text").text(g),C=v.select("text"),z=m.select("text"),q="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=Bo,_="x",S="y",w="x2",k="y2",N.attr("dy",0>q?"0em":".71em").style("text-anchor","middle"),b.attr("d","M"+M[0]+","+q*i+"V0H"+M[1]+"V"+q*i)):(n=Wo,_="y",S="x",w="y2",k="x2",N.attr("dy",".32em").style("text-anchor",0>q?"end":"start"),b.attr("d","M"+q*i+","+M[0]+"H0V"+M[1]+"H"+q*i)),E.attr(k,q*u),C.attr(S,q*y),A.attr(w,0).attr(k,q*u),z.attr(_,0).attr(S,q*y),f.rangeBand){var L=f,T=L.rangeBand()/2;s=f=function(n){return L(n)+T}}else s.rangeBand?s=f:d.call(n,f,s);v.call(n,s,f),m.call(n,f,f)})}var t,e=ta.scale.linear(),r=Ol,u=6,i=6,o=3,a=[10],c=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Yl?t+"":Ol,n):r},n.ticks=function(){return arguments.length?(a=arguments,n):a},n.tickValues=function(t){return arguments.length?(c=t,n):c},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var Ol="bottom",Yl={top:1,right:1,bottom:1,left:1};ta.svg.brush=function(){function n(i){i.each(function(){var i=ta.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",u).on("touchstart.brush",u),o=i.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=i.selectAll(".resize").data(p,At);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return Il[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var s,f=ta.transition(i),h=ta.transition(o);c&&(s=ji(c),h.attr("x",s[0]).attr("width",s[1]-s[0]),e(f)),l&&(s=ji(l),h.attr("y",s[0]).attr("height",s[1]-s[0]),r(f)),t(f)})}function t(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+s[+/e$/.test(n)]+","+f[+/^s/.test(n)]+")"})}function e(n){n.select(".extent").attr("x",s[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function r(n){n.select(".extent").attr("y",f[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function u(){function u(){32==ta.event.keyCode&&(N||(y=null,z[0]-=s[1],z[1]-=f[1],N=2),b())}function p(){32==ta.event.keyCode&&2==N&&(z[0]+=s[1],z[1]+=f[1],N=0,b())}function v(){var n=ta.mouse(x),u=!1;M&&(n[0]+=M[0],n[1]+=M[1]),N||(ta.event.altKey?(y||(y=[(s[0]+s[1])/2,(f[0]+f[1])/2]),z[0]=s[+(n[0]<y[0])],z[1]=f[+(n[1]<y[1])]):y=null),E&&d(n,c,0)&&(e(S),u=!0),A&&d(n,l,1)&&(r(S),u=!0),u&&(t(S),w({type:"brush",mode:N?"move":"resize"}))}function d(n,t,e){var r,u,a=ji(t),c=a[0],l=a[1],p=z[e],v=e?f:s,d=v[1]-v[0];return N&&(c-=p,l-=d+p),r=(e?g:h)?Math.max(c,Math.min(l,n[e])):n[e],N?u=(r+=p)+d:(y&&(p=Math.max(c,Math.min(l,2*y[e]-r))),r>p?(u=r,r=p):u=p),v[0]!=r||v[1]!=u?(e?o=null:i=null,v[0]=r,v[1]=u,!0):void 0}function m(){v(),S.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),ta.select("body").style("cursor",null),q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),w({type:"brushend"})}var y,M,x=this,_=ta.select(ta.event.target),w=a.of(x,arguments),S=ta.select(x),k=_.datum(),E=!/^(n|s)$/.test(k)&&c,A=!/^(e|w)$/.test(k)&&l,N=_.classed("extent"),C=$(),z=ta.mouse(x),q=ta.select(oa).on("keydown.brush",u).on("keyup.brush",p);if(ta.event.changedTouches?q.on("touchmove.brush",v).on("touchend.brush",m):q.on("mousemove.brush",v).on("mouseup.brush",m),S.interrupt().selectAll("*").interrupt(),N)z[0]=s[0]-z[0],z[1]=f[0]-z[1];else if(k){var L=+/w$/.test(k),T=+/^n/.test(k);M=[s[1-L]-z[0],f[1-T]-z[1]],z[0]=s[L],z[1]=f[T]}else ta.event.altKey&&(y=z.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),ta.select("body").style("cursor",_.style("cursor")),w({type:"brushstart"}),v()}var i,o,a=w(n,"brushstart","brush","brushend"),c=null,l=null,s=[0,0],f=[0,0],h=!0,g=!0,p=Zl[0];return n.event=function(n){n.each(function(){var n=a.of(this,arguments),t={x:s,y:f,i:i,j:o},e=this.__chart__||t;this.__chart__=t,Dl?ta.select(this).transition().each("start.brush",function(){i=e.i,o=e.j,s=e.x,f=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=Mu(s,t.x),r=Mu(f,t.y);return i=o=null,function(u){s=t.x=e(u),f=t.y=r(u),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=t.i,o=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(c=t,p=Zl[!c<<1|!l],n):c},n.y=function(t){return arguments.length?(l=t,p=Zl[!c<<1|!l],n):l},n.clamp=function(t){return arguments.length?(c&&l?(h=!!t[0],g=!!t[1]):c?h=!!t:l&&(g=!!t),n):c&&l?[h,g]:c?h:l?g:null},n.extent=function(t){var e,r,u,a,h;return arguments.length?(c&&(e=t[0],r=t[1],l&&(e=e[0],r=r[0]),i=[e,r],c.invert&&(e=c(e),r=c(r)),e>r&&(h=e,e=r,r=h),(e!=s[0]||r!=s[1])&&(s=[e,r])),l&&(u=t[0],a=t[1],c&&(u=u[1],a=a[1]),o=[u,a],l.invert&&(u=l(u),a=l(a)),u>a&&(h=u,u=a,a=h),(u!=f[0]||a!=f[1])&&(f=[u,a])),n):(c&&(i?(e=i[0],r=i[1]):(e=s[0],r=s[1],c.invert&&(e=c.invert(e),r=c.invert(r)),e>r&&(h=e,e=r,r=h))),l&&(o?(u=o[0],a=o[1]):(u=f[0],a=f[1],l.invert&&(u=l.invert(u),a=l.invert(a)),u>a&&(h=u,u=a,a=h))),c&&l?[[e,u],[r,a]]:c?[e,r]:l&&[u,a])},n.clear=function(){return n.empty()||(s=[0,0],f=[0,0],i=o=null),n},n.empty=function(){return!!c&&s[0]==s[1]||!!l&&f[0]==f[1]},ta.rebind(n,a,"on")};var Il={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Vl=fc.format=mc.timeFormat,Xl=Vl.utc,$l=Xl("%Y-%m-%dT%H:%M:%S.%LZ");Vl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Jo:$l,Jo.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},Jo.toString=$l.toString,fc.second=Ht(function(n){return new hc(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),fc.seconds=fc.second.range,fc.seconds.utc=fc.second.utc.range,fc.minute=Ht(function(n){return new hc(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),fc.minutes=fc.minute.range,fc.minutes.utc=fc.minute.utc.range,fc.hour=Ht(function(n){var t=n.getTimezoneOffset()/60;return new hc(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),fc.hours=fc.hour.range,fc.hours.utc=fc.hour.utc.range,fc.month=Ht(function(n){return n=fc.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),fc.months=fc.month.range,fc.months.utc=fc.month.utc.range;var Bl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Wl=[[fc.second,1],[fc.second,5],[fc.second,15],[fc.second,30],[fc.minute,1],[fc.minute,5],[fc.minute,15],[fc.minute,30],[fc.hour,1],[fc.hour,3],[fc.hour,6],[fc.hour,12],[fc.day,1],[fc.day,2],[fc.week,1],[fc.month,1],[fc.month,3],[fc.year,1]],Jl=Vl.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",Ce]]),Gl={range:function(n,t,e){return ta.range(Math.ceil(n/e)*e,+t,e).map(Ko)},floor:At,ceil:At};Wl.year=fc.year,fc.scale=function(){return Go(ta.scale.linear(),Wl,Jl)};var Kl=Wl.map(function(n){return[n[0].utc,n[1]]}),Ql=Xl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",Ce]]);Kl.year=fc.year.utc,fc.scale.utc=function(){return Go(ta.scale.linear(),Kl,Ql)},ta.text=Nt(function(n){return n.responseText}),ta.json=function(n,t){return Ct(n,"application/json",Qo,t)},ta.html=function(n,t){return Ct(n,"text/html",na,t)},ta.xml=Nt(function(n){return n.responseXML}),"function"==typeof define&&define.amd?define(ta):"object"==typeof module&&module.exports&&(module.exports=ta),this.d3=ta}();!function(){function h(p){console.log("$f.fireEvent",[].slice.call(p))}function l(r){if(!r||typeof r!="object"){return r}var p=new r.constructor;for(var q in r){if(r.hasOwnProperty(q)){p[q]=l(r[q])}}return p}function n(u,r){if(!u){return}var p,q=0,s=u.length;if(s===undefined){for(p in u){if(r.call(u[p],p,u[p])===false){break}}}else{for(var t=u[0];q<s&&r.call(t,q,t)!==false;t=u[++q]){}}return u}function c(p){return document.getElementById(p)}function j(r,q,p){if(typeof q!="object"){return r}if(r&&q){n(q,function(s,t){if(!p||typeof t!="function"){r[s]=t}})}return r}function o(t){var r=t.indexOf(".");if(r!=-1){var q=t.slice(0,r)||"*";var p=t.slice(r+1,t.length);var s=[];n(document.getElementsByTagName(q),function(){if(this.className&&this.className.indexOf(p)!=-1){s.push(this)}});return s}}function g(p){p=p||window.event;if(p.preventDefault){p.stopPropagation();p.preventDefault()}else{p.returnValue=false;p.cancelBubble=true}return false}function k(r,p,q){r[p]=r[p]||[];r[p].push(q)}function e(p){return p.replace(/&amp;/g,"%26").replace(/&/g,"%26").replace(/=/g,"%3D")}function f(){return"_"+(""+Math.random()).slice(2,10)}var i=function(u,s,t){var r=this,q={},v={};r.index=s;if(typeof u=="string"){u={url:u}}j(this,u,true);n("Begin*,Start,Pause*,Resume*,Seek*,Stop*,Finish*,LastSecond,Update,BufferFull,BufferEmpty,BufferStop".split(","),function(){var w="on"+this;if(w.indexOf("*")!=-1){w=w.slice(0,w.length-1);var x="onBefore"+w.slice(2);r[x]=function(y){k(v,x,y);return r}}r[w]=function(y){k(v,w,y);return r};if(s==-1){if(r[x]){t[x]=r[x]}if(r[w]){t[w]=r[w]}}});j(this,{onCuepoint:function(y,x){if(arguments.length==1){q.embedded=[null,y];return r}if(typeof y=="number"){y=[y]}var w=f();q[w]=[y,x];if(t.isLoaded()){t._api().fp_addCuepoints(y,s,w)}return r},update:function(x){j(r,x);if(t.isLoaded()){t._api().fp_updateClip(x,s)}var w=t.getConfig();var y=s==-1?w.clip:w.playlist[s];j(y,x,true)},_fireEvent:function(w,z,x,B){if(w=="onLoad"){n(q,function(C,D){if(D[0]){t._api().fp_addCuepoints(D[0],s,C)}});return false}B=B||r;if(w=="onCuepoint"){var A=q[z];if(A){return A[1].call(t,B,x)}}if(z&&"onBeforeBegin,onMetaData,onMetaDataChange,onStart,onUpdate,onResume".indexOf(w)!=-1){j(B,z);if(z.metaData){if(!B.duration){B.duration=z.metaData.duration}else{B.fullDuration=z.metaData.duration}}}var y=true;n(v[w],function(){y=this.call(t,B,z,x)});return y}});if(u.onCuepoint){var p=u.onCuepoint;r.onCuepoint.apply(r,typeof p=="function"?[p]:p);delete u.onCuepoint}n(u,function(w,x){if(typeof x=="function"){k(v,w,x);delete u[w]}});if(s==-1){t.onCuepoint=this.onCuepoint}};var m=function(q,s,r,u){var p=this,t={},v=false;if(u){j(t,u)}n(s,function(w,x){if(typeof x=="function"){t[w]=x;delete s[w]}});j(this,{animate:function(z,A,y){if(!z){return p}if(typeof A=="function"){y=A;A=500}if(typeof z=="string"){var x=z;z={};z[x]=A;A=500}if(y){var w=f();t[w]=y}if(A===undefined){A=500}s=r._api().fp_animate(q,z,A,w);return p},css:function(x,y){if(y!==undefined){var w={};w[x]=y;x=w}s=r._api().fp_css(q,x);j(p,s);return p},show:function(){this.display="block";r._api().fp_showPlugin(q);return p},hide:function(){this.display="none";r._api().fp_hidePlugin(q);return p},toggle:function(){this.display=r._api().fp_togglePlugin(q);return p},fadeTo:function(z,y,x){if(typeof y=="function"){x=y;y=500}if(x){var w=f();t[w]=x}this.display=r._api().fp_fadeTo(q,z,y,w);this.opacity=z;return p},fadeIn:function(x,w){return p.fadeTo(1,x,w)},fadeOut:function(x,w){return p.fadeTo(0,x,w)},getName:function(){return q},getPlayer:function(){return r},_fireEvent:function(x,w,y){if(x=="onUpdate"){var A=r._api().fp_getPlugin(q);if(!A){return}j(p,A);delete p.methods;if(!v){n(A.methods,function(){var C=""+this;p[C]=function(){var D=[].slice.call(arguments);var E=r._api().fp_invoke(q,C,D);return E==="undefined"||E===undefined?p:E}});v=true}}var B=t[x];if(B){var z=B.apply(p,w);if(x.slice(0,1)=="_"){delete t[x]}return z}return p}})};function b(r,H,u){var x=this,w=null,E=false,v,t,G=[],z={},y={},F,s,q,D,p,B;j(x,{id:function(){return F},isLoaded:function(){return w!==null&&w.fp_play!==undefined&&!E},getParent:function(){return r},hide:function(I){if(I){r.style.height="0px"}if(x.isLoaded()){w.style.height="0px"}return x},show:function(){r.style.height=B+"px";if(x.isLoaded()){w.style.height=p+"px"}return x},isHidden:function(){return x.isLoaded()&&parseInt(w.style.height,10)===0},load:function(K){if(!x.isLoaded()&&x._fireEvent("onBeforeLoad")!==false){var I=function(){if(v&&!flashembed.isSupported(H.version)){r.innerHTML=""}if(K){K.cached=true;k(y,"onLoad",K)}flashembed(r,H,{config:u})};var J=0;n(a,function(){this.unload(function(L){if(++J==a.length){I()}})})}return x},unload:function(K){if(v.replace(/\s/g,"")!==""){if(x._fireEvent("onBeforeUnload")===false){if(K){K(false)}return x}E=true;try{if(w){if(w.fp_isFullscreen()){w.fp_toggleFullscreen()}w.fp_close();x._fireEvent("onUnload")}}catch(I){}var J=function(){w=null;r.innerHTML=v;E=false;if(K){K(true)}};if(/WebKit/i.test(navigator.userAgent)&&!/Chrome/i.test(navigator.userAgent)){setTimeout(J,0)}else{J()}}else{if(K){K(false)}}return x},getClip:function(I){if(I===undefined){I=D}return G[I]},getCommonClip:function(){return t},getPlaylist:function(){return G},getPlugin:function(I){var K=z[I];if(!K&&x.isLoaded()){var J=x._api().fp_getPlugin(I);if(J){K=new m(I,J,x);z[I]=K}}return K},getScreen:function(){return x.getPlugin("screen")},getControls:function(){return x.getPlugin("controls")._fireEvent("onUpdate")},getLogo:function(){try{return x.getPlugin("logo")._fireEvent("onUpdate")}catch(I){}},getPlay:function(){return x.getPlugin("play")._fireEvent("onUpdate")},getConfig:function(I){return I?l(u):u},getFlashParams:function(){return H},loadPlugin:function(L,K,N,M){if(typeof N=="function"){M=N;N={}}var J=M?f():"_";x._api().fp_loadPlugin(L,K,N,J);var I={};I[J]=M;var O=new m(L,null,x,I);z[L]=O;return O},getState:function(){return x.isLoaded()?w.fp_getState():-1},play:function(J,I){var K=function(){if(J!==undefined){x._api().fp_play(J,I)}else{x._api().fp_play()}};if(x.isLoaded()){K()}else{if(E){setTimeout(function(){x.play(J,I)},50)}else{x.load(function(){K()})}}return x},getVersion:function(){var J="flowplayer.js @VERSION";if(x.isLoaded()){var I=w.fp_getVersion();I.push(J);return I}return J},_api:function(){if(!x.isLoaded()){throw"Flowplayer "+x.id()+" not loaded when calling an API method"}return w},setClip:function(I){n(I,function(J,K){if(typeof K=="function"){k(y,J,K);delete I[J]}else{if(J=="onCuepoint"){$f(r).getCommonClip().onCuepoint(I[J][0],I[J][1])}}});x.setPlaylist([I]);return x},getIndex:function(){return q},bufferAnimate:function(I){w.fp_bufferAnimate(I===undefined||I);return x},_swfHeight:function(){return w.clientHeight}});n("Click*,Load*,Unload*,Keypress*,Volume*,Mute*,Unmute*,PlaylistReplace,ClipAdd,Fullscreen*,FullscreenExit,Error,MouseOver,MouseOut".split(","),function(){var I="on"+this;if(I.indexOf("*")!=-1){I=I.slice(0,I.length-1);var J="onBefore"+I.slice(2);x[J]=function(K){k(y,J,K);return x}}x[I]=function(K){k(y,I,K);return x}});n("pause,resume,mute,unmute,stop,toggle,seek,getStatus,getVolume,setVolume,getTime,isPaused,isPlaying,startBuffering,stopBuffering,isFullscreen,toggleFullscreen,reset,close,setPlaylist,addClip,playFeed,setKeyboardShortcutsEnabled,isKeyboardShortcutsEnabled".split(","),function(){var I=this;x[I]=function(K,J){if(!x.isLoaded()){return x}var L=null;if(K!==undefined&&J!==undefined){L=w["fp_"+I](K,J)}else{L=K===undefined?w["fp_"+I]():w["fp_"+I](K)}return L==="undefined"||L===undefined?x:L}});x._fireEvent=function(R){if(typeof R=="string"){R=[R]}var S=R[0],P=R[1],N=R[2],M=R[3],L=0;if(u.debug){h(R)}if(!x.isLoaded()&&S=="onLoad"&&P=="player"){w=w||c(s);p=x._swfHeight();n(G,function(){this._fireEvent("onLoad")});n(z,function(T,U){U._fireEvent("onUpdate")});t._fireEvent("onLoad")}if(S=="onLoad"&&P!="player"){return}if(S=="onError"){if(typeof P=="string"||typeof P=="number"&&typeof N=="number"){P=N;N=M}}if(S=="onContextMenu"){n(u.contextMenu[P],function(T,U){U.call(x)});return}if(S=="onPluginEvent"||S=="onBeforePluginEvent"){var I=P.name||P;var J=z[I];if(J){J._fireEvent("onUpdate",P);return J._fireEvent(N,R.slice(3))}return}if(S=="onPlaylistReplace"){G=[];var O=0;n(P,function(){G.push(new i(this,O++,x))})}if(S=="onClipAdd"){if(P.isInStream){return}P=new i(P,N,x);G.splice(N,0,P);for(L=N+1;L<G.length;L++){G[L].index++}}var Q=true;if(typeof P=="number"&&P<G.length){D=P;var K=G[P];if(K){Q=K._fireEvent(S,N,M)}if(!K||Q!==false){Q=t._fireEvent(S,N,M,K)}}n(y[S],function(){Q=this.call(x,P,N);if(this.cached){y[S].splice(L,1)}if(Q===false){return false}L++});return Q};function C(){if($f(r)){$f(r).getParent().innerHTML="";q=$f(r).getIndex();a[q]=x}else{a.push(x);q=a.length-1}B=parseInt(r.style.height,10)||r.clientHeight;F=r.id||"fp"+f();s=H.id||F+"_api";H.id=s;v=r.innerHTML;if(typeof u=="string"){u={clip:{url:u}}}u.playerId=F;u.clip=u.clip||{};if(r.getAttribute("href",2)&&!u.clip.url){u.clip.url=r.getAttribute("href",2)}if(u.clip.url){u.clip.url=e(u.clip.url)}t=new i(u.clip,-1,x);u.playlist=u.playlist||[u.clip];var J=0;n(u.playlist,function(){var M=this;if(typeof M=="object"&&M.length){M={url:""+M}}if(M.url){M.url=e(M.url)}n(u.clip,function(N,O){if(O!==undefined&&M[N]===undefined&&typeof O!="function"){M[N]=O}});u.playlist[J]=M;M=new i(M,J,x);G.push(M);
J++});n(u,function(M,N){if(typeof N=="function"){if(t[M]){t[M](N)}else{k(y,M,N)}delete u[M]}});n(u.plugins,function(M,N){if(N){z[M]=new m(M,N,x)}});if(!u.plugins||u.plugins.controls===undefined){z.controls=new m("controls",null,x)}z.canvas=new m("canvas",null,x);v=r.innerHTML;function L(M){if(/iPad|iPhone|iPod/i.test(navigator.userAgent)&&!/.flv$/i.test(G[0].url)&&!K()){return true}if(!x.isLoaded()&&x._fireEvent("onBeforeClick")!==false){x.load()}return g(M)}function K(){return x.hasiPadSupport&&x.hasiPadSupport()}function I(){if(v.replace(/\s/g,"")!==""){if(r.addEventListener){r.addEventListener("click",L,false)}else{if(r.attachEvent){r.attachEvent("onclick",L)}}}else{if(r.addEventListener&&!K()){r.addEventListener("click",g,false)}x.load()}}setTimeout(I,0)}if(typeof r=="string"){var A=c(r);if(!A){throw"Flowplayer cannot access element: "+r}r=A;C()}else{C()}}var a=[];function d(p){this.length=p.length;this.each=function(r){n(p,r)};this.size=function(){return p.length};var q=this;for(name in b.prototype){q[name]=function(){var r=arguments;q.each(function(){this[name].apply(this,r)})}}}window.flowplayer=window.$f=function(){var q=null;var p=arguments[0];if(!arguments.length){n(a,function(){if(this.isLoaded()){q=this;return false}});return q||a[0]}if(arguments.length==1){if(typeof p=="number"){return a[p]}else{if(p=="*"){return new d(a)}n(a,function(){if(this.id()==p.id||this.id()==p||this.getParent()==p){q=this;return false}});return q}}if(arguments.length>1){var u=arguments[1],r=arguments.length==3?arguments[2]:{};if(typeof u=="string"){u={src:u}}u=j({bgcolor:"#000000",version:[10,1],expressInstall:"http://releases.flowplayer.org/swf/expressinstall.swf",cachebusting:false},u);if(typeof p=="string"){if(p.indexOf(".")!=-1){var t=[];n(o(p),function(){t.push(new b(this,l(u),l(r)))});return new d(t)}else{var s=c(p);return new b(s!==null?s:l(p),l(u),l(r))}}else{if(p){return new b(p,l(u),l(r))}}}return null};j(window.$f,{fireEvent:function(){var q=[].slice.call(arguments);var r=$f(q[0]);return r?r._fireEvent(q.slice(1)):null},addPlugin:function(p,q){b.prototype[p]=q;return $f},each:n,extend:j});if(typeof jQuery=="function"){jQuery.fn.flowplayer=function(r,q){if(!arguments.length||typeof arguments[0]=="number"){var p=[];this.each(function(){var s=$f(this);if(s){p.push(s)}});return arguments.length?p[arguments[0]]:new d(p)}return this.each(function(){$f(this,l(r),q?l(q):{})})}}}();!function(){var h=document.all,j="http://get.adobe.com/flashplayer",c=typeof jQuery=="function",e=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,b={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:true,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:false,cachebusting:false};if(window.attachEvent){window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){}})}function i(m,l){if(l){for(var f in l){if(l.hasOwnProperty(f)){m[f]=l[f]}}}return m}function a(f,n){var m=[];for(var l in f){if(f.hasOwnProperty(l)){m[l]=n(f[l])}}return m}window.flashembed=function(f,m,l){if(typeof f=="string"){f=document.getElementById(f.replace("#",""))}if(!f){return}if(typeof m=="string"){m={src:m}}return new d(f,i(i({},b),m),l)};var g=i(window.flashembed,{conf:b,getVersion:function(){var m,f,o;try{o=navigator.plugins["Shockwave Flash"];if(o[0].enabledPlugin!=null){f=o.description.slice(16)}}catch(p){try{m=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");f=m&&m.GetVariable("$version")}catch(n){try{m=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");f=m&&m.GetVariable("$version")}catch(l){}}}f=e.exec(f);return f?[1*f[1],1*f[f[1]*1>9?2:3]*1]:[0,0]},asString:function(l){if(l===null||l===undefined){return null}var f=typeof l;if(f=="object"&&l.push){f="array"}switch(f){case"string":l=l.replace(new RegExp('(["\\\\])',"g"),"\\$1");l=l.replace(/^\s?(\d+\.?\d*)%/,"$1pct");return'"'+l+'"';case"array":return"["+a(l,function(o){return g.asString(o)}).join(",")+"]";case"function":return'"function()"';case"object":var m=[];for(var n in l){if(l.hasOwnProperty(n)){m.push('"'+n+'":'+g.asString(l[n]))}}return"{"+m.join(",")+"}"}return String(l).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(o,l){o=i({},o);var n='<object width="'+o.width+'" height="'+o.height+'" id="'+o.id+'" name="'+o.id+'"';if(o.cachebusting){o.src+=(o.src.indexOf("?")!=-1?"&":"?")+Math.random()}if(o.w3c||!h){n+=' data="'+o.src+'" type="application/x-shockwave-flash"'}else{n+=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'}n+=">";if(o.w3c||h){n+='<param name="movie" value="'+o.src+'" />'}o.width=o.height=o.id=o.w3c=o.src=null;o.onFail=o.version=o.expressInstall=null;for(var m in o){if(o[m]){n+='<param name="'+m+'" value="'+o[m]+'" />'}}var p="";if(l){for(var f in l){if(l[f]){var q=l[f];p+=f+"="+(/function|object/.test(typeof q)?g.asString(q):q)+"&"}}p=p.slice(0,-1);n+='<param name="flashvars" value=\''+p+"' />"}n+="</object>";return n},isSupported:function(f){return k[0]>f[0]||k[0]==f[0]&&k[1]>=f[1]}});var k=g.getVersion();function d(f,n,m){if(g.isSupported(n.version)){f.innerHTML=g.getHTML(n,m)}else{if(n.expressInstall&&g.isSupported([6,65])){f.innerHTML=g.getHTML(i(n,{src:n.expressInstall}),{MMredirectURL:encodeURIComponent(location.href),MMplayerType:"PlugIn",MMdoctitle:document.title})}else{if(!f.innerHTML.replace(/\s/g,"")){f.innerHTML="<h2>Flash version "+n.version+" or greater is required</h2><h3>"+(k[0]>0?"Your version is "+k:"You have no flash plugin installed")+"</h3>"+(f.tagName=="A"?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+j+"'>here</a></p>");if(f.tagName=="A"||f.tagName=="DIV"){f.onclick=function(){location.href=j}}}if(n.onFail){var l=n.onFail.call(this);if(typeof l=="string"){f.innerHTML=l}}}}if(h){window[n.id]=document.getElementById(n.id)}i(this,{getRoot:function(){return f},getOptions:function(){return n},getConf:function(){return m},getApi:function(){return f.firstChild}})}if(c){jQuery.tools=jQuery.tools||{version:"@VERSION"};jQuery.tools.flashembed={conf:b};jQuery.fn.flashembed=function(l,f){return this.each(function(){$(this).data("flashembed",flashembed(this,l,f))})}}}();(function(factory){if(typeof define==="function"&&define.amd){define(["jquery","moment"],factory)}else if(typeof exports==="object"){module.exports=factory(require("jquery"),require("moment"))}else{factory(jQuery,moment)}})(function($,moment){var FC=$.fullCalendar={version:"2.7.1",internalApiVersion:3};var fcViews=FC.views={};FC.isTouch="ontouchstart"in document;$.fn.fullCalendar=function(options){var args=Array.prototype.slice.call(arguments,1);var res=this;this.each(function(i,_element){var element=$(_element);var calendar=element.data("fullCalendar");var singleRes;if(typeof options==="string"){if(calendar&&$.isFunction(calendar[options])){singleRes=calendar[options].apply(calendar,args);if(!i){res=singleRes}if(options==="destroy"){element.removeData("fullCalendar")}}}else if(!calendar){calendar=new Calendar(element,options);element.data("fullCalendar",calendar);calendar.render()}});return res};var complexOptions=["header","buttonText","buttonIcons","themeButtonIcons"];function mergeOptions(optionObjs){return mergeProps(optionObjs,complexOptions)}function massageOverrides(input){var overrides={views:input.views||{}};var subObj;$.each(input,function(name,val){if(name!="views"){if($.isPlainObject(val)&&!/(time|duration|interval)$/i.test(name)&&$.inArray(name,complexOptions)==-1){subObj=null;$.each(val,function(subName,subVal){if(/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(subName)){if(!overrides.views[subName]){overrides.views[subName]={}}overrides.views[subName][name]=subVal}else{if(!subObj){subObj={}}subObj[subName]=subVal}});if(subObj){overrides[name]=subObj}}else{overrides[name]=val}}});return overrides}FC.intersectRanges=intersectRanges;FC.applyAll=applyAll;FC.debounce=debounce;FC.isInt=isInt;FC.htmlEscape=htmlEscape;FC.cssToStr=cssToStr;FC.proxy=proxy;FC.capitaliseFirstLetter=capitaliseFirstLetter;function compensateScroll(rowEls,scrollbarWidths){if(scrollbarWidths.left){rowEls.css({"border-left-width":1,"margin-left":scrollbarWidths.left-1})}if(scrollbarWidths.right){rowEls.css({"border-right-width":1,"margin-right":scrollbarWidths.right-1})}}function uncompensateScroll(rowEls){rowEls.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function disableCursor(){$("body").addClass("fc-not-allowed")}function enableCursor(){$("body").removeClass("fc-not-allowed")}function distributeHeight(els,availableHeight,shouldRedistribute){var minOffset1=Math.floor(availableHeight/els.length);var minOffset2=Math.floor(availableHeight-minOffset1*(els.length-1));var flexEls=[];var flexOffsets=[];var flexHeights=[];var usedHeight=0;undistributeHeight(els);els.each(function(i,el){var minOffset=i===els.length-1?minOffset2:minOffset1;var naturalOffset=$(el).outerHeight(true);if(naturalOffset<minOffset){flexEls.push(el);flexOffsets.push(naturalOffset);flexHeights.push($(el).height())}else{usedHeight+=naturalOffset}});if(shouldRedistribute){availableHeight-=usedHeight;minOffset1=Math.floor(availableHeight/flexEls.length);minOffset2=Math.floor(availableHeight-minOffset1*(flexEls.length-1))}$(flexEls).each(function(i,el){var minOffset=i===flexEls.length-1?minOffset2:minOffset1;var naturalOffset=flexOffsets[i];var naturalHeight=flexHeights[i];var newHeight=minOffset-(naturalOffset-naturalHeight);if(naturalOffset<minOffset){$(el).height(newHeight)}})}function undistributeHeight(els){els.height("")}function matchCellWidths(els){var maxInnerWidth=0;els.find("> span").each(function(i,innerEl){var innerWidth=$(innerEl).outerWidth();if(innerWidth>maxInnerWidth){maxInnerWidth=innerWidth}});maxInnerWidth++;els.width(maxInnerWidth);return maxInnerWidth}function subtractInnerElHeight(outerEl,innerEl){var both=outerEl.add(innerEl);var diff;both.css({position:"relative",left:-1});diff=outerEl.outerHeight()-innerEl.outerHeight();both.css({position:"",left:""});return diff}FC.getOuterRect=getOuterRect;FC.getClientRect=getClientRect;FC.getContentRect=getContentRect;FC.getScrollbarWidths=getScrollbarWidths;function getScrollParent(el){var position=el.css("position"),scrollParent=el.parents().filter(function(){var parent=$(this);return/(auto|scroll)/.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))}).eq(0);return position==="fixed"||!scrollParent.length?$(el[0].ownerDocument||document):scrollParent}function getOuterRect(el,origin){var offset=el.offset();var left=offset.left-(origin?origin.left:0);var top=offset.top-(origin?origin.top:0);return{left:left,right:left+el.outerWidth(),top:top,bottom:top+el.outerHeight()}}function getClientRect(el,origin){var offset=el.offset();var scrollbarWidths=getScrollbarWidths(el);var left=offset.left+getCssFloat(el,"border-left-width")+scrollbarWidths.left-(origin?origin.left:0);var top=offset.top+getCssFloat(el,"border-top-width")+scrollbarWidths.top-(origin?origin.top:0);return{left:left,right:left+el[0].clientWidth,top:top,bottom:top+el[0].clientHeight}}function getContentRect(el,origin){var offset=el.offset();var left=offset.left+getCssFloat(el,"border-left-width")+getCssFloat(el,"padding-left")-(origin?origin.left:0);var top=offset.top+getCssFloat(el,"border-top-width")+getCssFloat(el,"padding-top")-(origin?origin.top:0);return{left:left,right:left+el.width(),top:top,bottom:top+el.height()}}function getScrollbarWidths(el){var leftRightWidth=el.innerWidth()-el[0].clientWidth;var widths={left:0,right:0,top:0,bottom:el.innerHeight()-el[0].clientHeight};if(getIsLeftRtlScrollbars()&&el.css("direction")=="rtl"){widths.left=leftRightWidth}else{widths.right=leftRightWidth}return widths}var _isLeftRtlScrollbars=null;function getIsLeftRtlScrollbars(){if(_isLeftRtlScrollbars===null){_isLeftRtlScrollbars=computeIsLeftRtlScrollbars()}return _isLeftRtlScrollbars}function computeIsLeftRtlScrollbars(){var el=$("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body");var innerEl=el.children();var res=innerEl.offset().left>el.offset().left;el.remove();return res}function getCssFloat(el,prop){return parseFloat(el.css(prop))||0}FC.preventDefault=preventDefault;function isPrimaryMouseButton(ev){return ev.which==1&&!ev.ctrlKey}function getEvX(ev){if(ev.pageX!==undefined){return ev.pageX}var touches=ev.originalEvent.touches;if(touches){return touches[0].pageX}}function getEvY(ev){if(ev.pageY!==undefined){return ev.pageY}var touches=ev.originalEvent.touches;if(touches){return touches[0].pageY}}function getEvIsTouch(ev){return/^touch/.test(ev.type)}function preventSelection(el){el.addClass("fc-unselectable").on("selectstart",preventDefault)}function preventDefault(ev){ev.preventDefault()}FC.intersectRects=intersectRects;function intersectRects(rect1,rect2){var res={left:Math.max(rect1.left,rect2.left),right:Math.min(rect1.right,rect2.right),top:Math.max(rect1.top,rect2.top),bottom:Math.min(rect1.bottom,rect2.bottom)};if(res.left<res.right&&res.top<res.bottom){return res}return false}function constrainPoint(point,rect){return{left:Math.min(Math.max(point.left,rect.left),rect.right),top:Math.min(Math.max(point.top,rect.top),rect.bottom)}}function getRectCenter(rect){return{left:(rect.left+rect.right)/2,top:(rect.top+rect.bottom)/2}}function diffPoints(point1,point2){return{left:point1.left-point2.left,top:point1.top-point2.top}}FC.parseFieldSpecs=parseFieldSpecs;FC.compareByFieldSpecs=compareByFieldSpecs;FC.compareByFieldSpec=compareByFieldSpec;FC.flexibleCompare=flexibleCompare;function parseFieldSpecs(input){var specs=[];var tokens=[];var i,token;if(typeof input==="string"){tokens=input.split(/\s*,\s*/)}else if(typeof input==="function"){tokens=[input]}else if($.isArray(input)){tokens=input}for(i=0;i<tokens.length;i++){token=tokens[i];if(typeof token==="string"){specs.push(token.charAt(0)=="-"?{field:token.substring(1),order:-1}:{field:token,order:1})}else if(typeof token==="function"){specs.push({func:token})}}return specs}function compareByFieldSpecs(obj1,obj2,fieldSpecs){var i;var cmp;for(i=0;i<fieldSpecs.length;i++){cmp=compareByFieldSpec(obj1,obj2,fieldSpecs[i]);if(cmp){return cmp}}return 0}function compareByFieldSpec(obj1,obj2,fieldSpec){if(fieldSpec.func){return fieldSpec.func(obj1,obj2)}return flexibleCompare(obj1[fieldSpec.field],obj2[fieldSpec.field])*(fieldSpec.order||1)}function flexibleCompare(a,b){if(!a&&!b){return 0}if(b==null){return-1}if(a==null){return 1}if($.type(a)==="string"||$.type(b)==="string"){return String(a).localeCompare(String(b))}return a-b}function intersectRanges(subjectRange,constraintRange){var subjectStart=subjectRange.start;var subjectEnd=subjectRange.end;var constraintStart=constraintRange.start;var constraintEnd=constraintRange.end;var segStart,segEnd;var isStart,isEnd;if(subjectEnd>constraintStart&&subjectStart<constraintEnd){if(subjectStart>=constraintStart){segStart=subjectStart.clone();isStart=true}else{segStart=constraintStart.clone();isStart=false}if(subjectEnd<=constraintEnd){segEnd=subjectEnd.clone();isEnd=true}else{segEnd=constraintEnd.clone();isEnd=false}return{start:segStart,end:segEnd,isStart:isStart,isEnd:isEnd}}}FC.computeIntervalUnit=computeIntervalUnit;FC.divideRangeByDuration=divideRangeByDuration;FC.divideDurationByDuration=divideDurationByDuration;FC.multiplyDuration=multiplyDuration;FC.durationHasTime=durationHasTime;var dayIDs=["sun","mon","tue","wed","thu","fri","sat"];var intervalUnits=["year","month","week","day","hour","minute","second","millisecond"];function diffDayTime(a,b){return moment.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days"),ms:a.time()-b.time()})}function diffDay(a,b){return moment.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days")})}function diffByUnit(a,b,unit){return moment.duration(Math.round(a.diff(b,unit,true)),unit)}function computeIntervalUnit(start,end){var i,unit;var val;for(i=0;i<intervalUnits.length;i++){unit=intervalUnits[i];val=computeRangeAs(unit,start,end);if(val>=1&&isInt(val)){break}}return unit}function computeRangeAs(unit,start,end){if(end!=null){return end.diff(start,unit,true)}else if(moment.isDuration(start)){return start.as(unit)}else{return start.end.diff(start.start,unit,true)}}function divideRangeByDuration(start,end,dur){var months;if(durationHasTime(dur)){return(end-start)/dur}months=dur.asMonths();if(Math.abs(months)>=1&&isInt(months)){return end.diff(start,"months",true)/months}return end.diff(start,"days",true)/dur.asDays()}function divideDurationByDuration(dur1,dur2){var months1,months2;if(durationHasTime(dur1)||durationHasTime(dur2)){return dur1/dur2}months1=dur1.asMonths();months2=dur2.asMonths();if(Math.abs(months1)>=1&&isInt(months1)&&Math.abs(months2)>=1&&isInt(months2)){return months1/months2}return dur1.asDays()/dur2.asDays()}function multiplyDuration(dur,n){var months;if(durationHasTime(dur)){return moment.duration(dur*n)}months=dur.asMonths();if(Math.abs(months)>=1&&isInt(months)){return moment.duration({months:months*n})}return moment.duration({days:dur.asDays()*n})}function durationHasTime(dur){return Boolean(dur.hours()||dur.minutes()||dur.seconds()||dur.milliseconds())}function isNativeDate(input){return Object.prototype.toString.call(input)==="[object Date]"||input instanceof Date}function isTimeString(str){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(str)}FC.log=function(){var console=window.console;if(console&&console.log){return console.log.apply(console,arguments)}};FC.warn=function(){var console=window.console;if(console&&console.warn){return console.warn.apply(console,arguments)}else{return FC.log.apply(FC,arguments)}};var hasOwnPropMethod={}.hasOwnProperty;function mergeProps(propObjs,complexProps){var dest={};var i,name;var complexObjs;var j,val;var props;if(complexProps){for(i=0;i<complexProps.length;i++){name=complexProps[i];complexObjs=[];for(j=propObjs.length-1;j>=0;j--){val=propObjs[j][name];if(typeof val==="object"){complexObjs.unshift(val)}else if(val!==undefined){dest[name]=val;break}}if(complexObjs.length){dest[name]=mergeProps(complexObjs)}}}for(i=propObjs.length-1;i>=0;i--){props=propObjs[i];for(name in props){if(!(name in dest)){dest[name]=props[name]}}}return dest}function createObject(proto){var f=function(){};f.prototype=proto;return new f}function copyOwnProps(src,dest){for(var name in src){if(hasOwnProp(src,name)){dest[name]=src[name]}}}function copyNativeMethods(src,dest){var names=["constructor","toString","valueOf"];var i,name;for(i=0;i<names.length;i++){name=names[i];if(src[name]!==Object.prototype[name]){dest[name]=src[name]}}}function hasOwnProp(obj,name){return hasOwnPropMethod.call(obj,name)}function isAtomic(val){return/undefined|null|boolean|number|string/.test($.type(val))}function applyAll(functions,thisObj,args){if($.isFunction(functions)){functions=[functions]}if(functions){var i;var ret;for(i=0;i<functions.length;i++){ret=functions[i].apply(thisObj,args)||ret}return ret}}function firstDefined(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined){return arguments[i]}}}function htmlEscape(s){return(s+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function stripHtmlEntities(text){return text.replace(/&.*?;/g,"")}function cssToStr(cssProps){var statements=[];$.each(cssProps,function(name,val){if(val!=null){statements.push(name+":"+val)}});return statements.join(";")}function capitaliseFirstLetter(str){return str.charAt(0).toUpperCase()+str.slice(1)}function compareNumbers(a,b){return a-b}function isInt(n){return n%1===0}function proxy(obj,methodName){var method=obj[methodName];return function(){return method.apply(obj,arguments)}}function debounce(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=+new Date-timestamp;if(last<wait){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);context=args=null}}};return function(){context=this;args=arguments;timestamp=+new Date;var callNow=immediate&&!timeout;if(!timeout){timeout=setTimeout(later,wait)}if(callNow){result=func.apply(context,args);context=args=null}return result}}var ambigDateOfMonthRegex=/^\s*\d{4}-\d\d$/;var ambigTimeOrZoneRegex=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;var newMomentProto=moment.fn;var oldMomentProto=$.extend({},newMomentProto);var allowValueOptimization;var setUTCValues;var setLocalValues;FC.moment=function(){return makeMoment(arguments)};FC.moment.utc=function(){var mom=makeMoment(arguments,true);if(mom.hasTime()){mom.utc()}return mom};FC.moment.parseZone=function(){return makeMoment(arguments,true,true)};function makeMoment(args,parseAsUTC,parseZone){var input=args[0];var isSingleString=args.length==1&&typeof input==="string";var isAmbigTime;var isAmbigZone;var ambigMatch;var mom;if(moment.isMoment(input)){mom=moment.apply(null,args);transferAmbigs(input,mom)}else if(isNativeDate(input)||input===undefined){mom=moment.apply(null,args)}else{isAmbigTime=false;isAmbigZone=false;if(isSingleString){if(ambigDateOfMonthRegex.test(input)){input+="-01";args=[input];isAmbigTime=true;isAmbigZone=true}else if(ambigMatch=ambigTimeOrZoneRegex.exec(input)){isAmbigTime=!ambigMatch[5];isAmbigZone=true}}else if($.isArray(input)){isAmbigZone=true}if(parseAsUTC||isAmbigTime){mom=moment.utc.apply(moment,args)}else{mom=moment.apply(null,args)}if(isAmbigTime){mom._ambigTime=true;mom._ambigZone=true}else if(parseZone){if(isAmbigZone){mom._ambigZone=true}else if(isSingleString){if(mom.utcOffset){mom.utcOffset(input)}else{mom.zone(input)}}}}mom._fullCalendar=true;return mom}newMomentProto.clone=function(){var mom=oldMomentProto.clone.apply(this,arguments);transferAmbigs(this,mom);if(this._fullCalendar){mom._fullCalendar=true}return mom};newMomentProto.week=newMomentProto.weeks=function(input){var weekCalc=(this._locale||this._lang)._fullCalendar_weekCalc;if(input==null&&typeof weekCalc==="function"){return weekCalc(this)}else if(weekCalc==="ISO"){return oldMomentProto.isoWeek.apply(this,arguments)}return oldMomentProto.week.apply(this,arguments)};newMomentProto.time=function(time){if(!this._fullCalendar){return oldMomentProto.time.apply(this,arguments)}if(time==null){return moment.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()})}else{this._ambigTime=false;if(!moment.isDuration(time)&&!moment.isMoment(time)){time=moment.duration(time)}var dayHours=0;if(moment.isDuration(time)){dayHours=Math.floor(time.asDays())*24}return this.hours(dayHours+time.hours()).minutes(time.minutes()).seconds(time.seconds()).milliseconds(time.milliseconds())}};newMomentProto.stripTime=function(){var a;if(!this._ambigTime){a=this.toArray();this.utc();setUTCValues(this,a.slice(0,3));this._ambigTime=true;this._ambigZone=true}return this};newMomentProto.hasTime=function(){return!this._ambigTime};newMomentProto.stripZone=function(){var a,wasAmbigTime;if(!this._ambigZone){a=this.toArray();wasAmbigTime=this._ambigTime;this.utc();setUTCValues(this,a);this._ambigTime=wasAmbigTime||false;this._ambigZone=true}return this};newMomentProto.hasZone=function(){return!this._ambigZone};newMomentProto.local=function(){var a=this.toArray();var wasAmbigZone=this._ambigZone;oldMomentProto.local.apply(this,arguments);this._ambigTime=false;this._ambigZone=false;if(wasAmbigZone){setLocalValues(this,a)}return this};newMomentProto.utc=function(){oldMomentProto.utc.apply(this,arguments);this._ambigTime=false;this._ambigZone=false;return this};$.each(["zone","utcOffset"],function(i,name){if(oldMomentProto[name]){newMomentProto[name]=function(tzo){if(tzo!=null){this._ambigTime=false;this._ambigZone=false}return oldMomentProto[name].apply(this,arguments)}}});newMomentProto.format=function(){if(this._fullCalendar&&arguments[0]){return formatDate(this,arguments[0])}if(this._ambigTime){return oldMomentFormat(this,"YYYY-MM-DD")}if(this._ambigZone){return oldMomentFormat(this,"YYYY-MM-DD[T]HH:mm:ss")}return oldMomentProto.format.apply(this,arguments)};newMomentProto.toISOString=function(){if(this._ambigTime){return oldMomentFormat(this,"YYYY-MM-DD")}if(this._ambigZone){return oldMomentFormat(this,"YYYY-MM-DD[T]HH:mm:ss")}return oldMomentProto.toISOString.apply(this,arguments)};newMomentProto.isWithin=function(start,end){var a=commonlyAmbiguate([this,start,end]);return a[0]>=a[1]&&a[0]<a[2]};newMomentProto.isSame=function(input,units){var a;if(!this._fullCalendar){return oldMomentProto.isSame.apply(this,arguments)}if(units){a=commonlyAmbiguate([this,input],true);return oldMomentProto.isSame.call(a[0],a[1],units)}else{input=FC.moment.parseZone(input);return oldMomentProto.isSame.call(this,input)&&Boolean(this._ambigTime)===Boolean(input._ambigTime)&&Boolean(this._ambigZone)===Boolean(input._ambigZone)}};$.each(["isBefore","isAfter"],function(i,methodName){newMomentProto[methodName]=function(input,units){var a;if(!this._fullCalendar){return oldMomentProto[methodName].apply(this,arguments)}a=commonlyAmbiguate([this,input]);return oldMomentProto[methodName].call(a[0],a[1],units)}});function commonlyAmbiguate(inputs,preserveTime){var anyAmbigTime=false;var anyAmbigZone=false;var len=inputs.length;var moms=[];var i,mom;for(i=0;i<len;i++){mom=inputs[i];if(!moment.isMoment(mom)){mom=FC.moment.parseZone(mom)}anyAmbigTime=anyAmbigTime||mom._ambigTime;anyAmbigZone=anyAmbigZone||mom._ambigZone;moms.push(mom)}for(i=0;i<len;i++){mom=moms[i];if(!preserveTime&&anyAmbigTime&&!mom._ambigTime){moms[i]=mom.clone().stripTime()}else if(anyAmbigZone&&!mom._ambigZone){moms[i]=mom.clone().stripZone()}}return moms}function transferAmbigs(src,dest){if(src._ambigTime){dest._ambigTime=true}else if(dest._ambigTime){dest._ambigTime=false}if(src._ambigZone){dest._ambigZone=true}else if(dest._ambigZone){dest._ambigZone=false}}function setMomentValues(mom,a){mom.year(a[0]||0).month(a[1]||0).date(a[2]||0).hours(a[3]||0).minutes(a[4]||0).seconds(a[5]||0).milliseconds(a[6]||0)}allowValueOptimization="_d"in moment()&&"updateOffset"in moment;setUTCValues=allowValueOptimization?function(mom,a){mom._d.setTime(Date.UTC.apply(Date,a));moment.updateOffset(mom,false)}:setMomentValues;setLocalValues=allowValueOptimization?function(mom,a){mom._d.setTime(+new Date(a[0]||0,a[1]||0,a[2]||0,a[3]||0,a[4]||0,a[5]||0,a[6]||0));moment.updateOffset(mom,false)}:setMomentValues;function oldMomentFormat(mom,formatStr){return oldMomentProto.format.call(mom,formatStr)}function formatDate(date,formatStr){return formatDateWithChunks(date,getFormatStringChunks(formatStr))}function formatDateWithChunks(date,chunks){var s="";var i;for(i=0;i<chunks.length;i++){s+=formatDateWithChunk(date,chunks[i])}return s}var tokenOverrides={t:function(date){return oldMomentFormat(date,"a").charAt(0)},T:function(date){return oldMomentFormat(date,"A").charAt(0)}};function formatDateWithChunk(date,chunk){var token;var maybeStr;if(typeof chunk==="string"){return chunk}else if(token=chunk.token){if(tokenOverrides[token]){return tokenOverrides[token](date)}return oldMomentFormat(date,token)}else if(chunk.maybe){maybeStr=formatDateWithChunks(date,chunk.maybe);if(maybeStr.match(/[1-9]/)){return maybeStr}}return""}function formatRange(date1,date2,formatStr,separator,isRTL){var localeData;date1=FC.moment.parseZone(date1);date2=FC.moment.parseZone(date2);localeData=(date1.localeData||date1.lang).call(date1);formatStr=localeData.longDateFormat(formatStr)||formatStr;separator=separator||" - ";return formatRangeWithChunks(date1,date2,getFormatStringChunks(formatStr),separator,isRTL)}FC.formatRange=formatRange;function formatRangeWithChunks(date1,date2,chunks,separator,isRTL){var unzonedDate1=date1.clone().stripZone();var unzonedDate2=date2.clone().stripZone();var chunkStr;var leftI;var leftStr="";var rightI;var rightStr="";var middleI;var middleStr1="";var middleStr2="";var middleStr="";for(leftI=0;leftI<chunks.length;leftI++){chunkStr=formatSimilarChunk(date1,date2,unzonedDate1,unzonedDate2,chunks[leftI]);if(chunkStr===false){break}leftStr+=chunkStr}for(rightI=chunks.length-1;rightI>leftI;rightI--){chunkStr=formatSimilarChunk(date1,date2,unzonedDate1,unzonedDate2,chunks[rightI]);if(chunkStr===false){break}rightStr=chunkStr+rightStr}for(middleI=leftI;middleI<=rightI;middleI++){middleStr1+=formatDateWithChunk(date1,chunks[middleI]);middleStr2+=formatDateWithChunk(date2,chunks[middleI])}if(middleStr1||middleStr2){if(isRTL){middleStr=middleStr2+separator+middleStr1}else{middleStr=middleStr1+separator+middleStr2}}return leftStr+middleStr+rightStr}var similarUnitMap={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"};function formatSimilarChunk(date1,date2,unzonedDate1,unzonedDate2,chunk){var token;var unit;if(typeof chunk==="string"){return chunk}else if(token=chunk.token){unit=similarUnitMap[token.charAt(0)];if(unit&&unzonedDate1.isSame(unzonedDate2,unit)){return oldMomentFormat(date1,token)}}return false}var formatStringChunkCache={};function getFormatStringChunks(formatStr){if(formatStr in formatStringChunkCache){return formatStringChunkCache[formatStr]}return formatStringChunkCache[formatStr]=chunkFormatString(formatStr)}function chunkFormatString(formatStr){var chunks=[];var chunker=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;var match;while(match=chunker.exec(formatStr)){if(match[1]){chunks.push(match[1])}else if(match[2]){chunks.push({maybe:chunkFormatString(match[2])})}else if(match[3]){chunks.push({token:match[3]})}else if(match[5]){chunks.push(match[5])}}return chunks}FC.Class=Class;function Class(){}Class.extend=function(){var len=arguments.length;var i;var members;for(i=0;i<len;i++){members=arguments[i];if(i<len-1){mixIntoClass(this,members)}}return extendClass(this,members||{})};Class.mixin=function(members){mixIntoClass(this,members)};function extendClass(superClass,members){var subClass;if(hasOwnProp(members,"constructor")){subClass=members.constructor}if(typeof subClass!=="function"){subClass=members.constructor=function(){superClass.apply(this,arguments)}}subClass.prototype=createObject(superClass.prototype);copyOwnProps(members,subClass.prototype);copyNativeMethods(members,subClass.prototype);copyOwnProps(superClass,subClass);return subClass}function mixIntoClass(theClass,members){copyOwnProps(members,theClass.prototype)}var EmitterMixin=FC.EmitterMixin={callbackHash:null,on:function(name,callback){this.loopCallbacks(name,"add",[callback]);return this},off:function(name,callback){this.loopCallbacks(name,"remove",[callback]);return this},trigger:function(name){var args=Array.prototype.slice.call(arguments,1);this.triggerWith(name,this,args);return this},triggerWith:function(name,context,args){this.loopCallbacks(name,"fireWith",[context,args]);return this},loopCallbacks:function(name,methodName,args){var parts=name.split(".");var i,part;var callbackObj;for(i=0;i<parts.length;i++){part=parts[i];if(part){callbackObj=this.ensureCallbackObj((i?".":"")+part);callbackObj[methodName].apply(callbackObj,args)}}},ensureCallbackObj:function(name){if(!this.callbackHash){this.callbackHash={}}if(!this.callbackHash[name]){this.callbackHash[name]=$.Callbacks()}return this.callbackHash[name]}};var ListenerMixin=FC.ListenerMixin=function(){var guid=0;var ListenerMixin={listenerId:null,listenTo:function(other,arg,callback){if(typeof arg==="object"){for(var eventName in arg){if(arg.hasOwnProperty(eventName)){this.listenTo(other,eventName,arg[eventName])}}}else if(typeof arg==="string"){other.on(arg+"."+this.getListenerNamespace(),$.proxy(callback,this))}},stopListeningTo:function(other,eventName){other.off((eventName||"")+"."+this.getListenerNamespace())},getListenerNamespace:function(){if(this.listenerId==null){this.listenerId=guid++}return"_listener"+this.listenerId}};return ListenerMixin;
}();var Popover=Class.extend(ListenerMixin,{isHidden:true,options:null,el:null,margin:10,constructor:function(options){this.options=options||{}},show:function(){if(this.isHidden){if(!this.el){this.render()}this.el.show();this.position();this.isHidden=false;this.trigger("show")}},hide:function(){if(!this.isHidden){this.el.hide();this.isHidden=true;this.trigger("hide")}},render:function(){var _this=this;var options=this.options;this.el=$('<div class="fc-popover"/>').addClass(options.className||"").css({top:0,left:0}).append(options.content).appendTo(options.parentEl);this.el.on("click",".fc-close",function(){_this.hide()});if(options.autoHide){this.listenTo($(document),"mousedown",this.documentMousedown)}},documentMousedown:function(ev){if(this.el&&!$(ev.target).closest(this.el).length){this.hide()}},removeElement:function(){this.hide();if(this.el){this.el.remove();this.el=null}this.stopListeningTo($(document),"mousedown")},position:function(){var options=this.options;var origin=this.el.offsetParent().offset();var width=this.el.outerWidth();var height=this.el.outerHeight();var windowEl=$(window);var viewportEl=getScrollParent(this.el);var viewportTop;var viewportLeft;var viewportOffset;var top;var left;top=options.top||0;if(options.left!==undefined){left=options.left}else if(options.right!==undefined){left=options.right-width}else{left=0}if(viewportEl.is(window)||viewportEl.is(document)){viewportEl=windowEl;viewportTop=0;viewportLeft=0}else{viewportOffset=viewportEl.offset();viewportTop=viewportOffset.top;viewportLeft=viewportOffset.left}viewportTop+=windowEl.scrollTop();viewportLeft+=windowEl.scrollLeft();if(options.viewportConstrain!==false){top=Math.min(top,viewportTop+viewportEl.outerHeight()-height-this.margin);top=Math.max(top,viewportTop+this.margin);left=Math.min(left,viewportLeft+viewportEl.outerWidth()-width-this.margin);left=Math.max(left,viewportLeft+this.margin)}this.el.css({top:top-origin.top,left:left-origin.left})},trigger:function(name){if(this.options[name]){this.options[name].apply(this,Array.prototype.slice.call(arguments,1))}}});var CoordCache=FC.CoordCache=Class.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:false,isVertical:false,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(options){this.els=$(options.els);this.isHorizontal=options.isHorizontal;this.isVertical=options.isVertical;this.forcedOffsetParentEl=options.offsetParent?$(options.offsetParent):null},build:function(){var offsetParentEl=this.forcedOffsetParentEl||this.els.eq(0).offsetParent();this.origin=offsetParentEl.offset();this.boundingRect=this.queryBoundingRect();if(this.isHorizontal){this.buildElHorizontals()}if(this.isVertical){this.buildElVerticals()}},clear:function(){this.origin=null;this.boundingRect=null;this.lefts=null;this.rights=null;this.tops=null;this.bottoms=null},ensureBuilt:function(){if(!this.origin){this.build()}},queryBoundingRect:function(){var scrollParentEl=getScrollParent(this.els.eq(0));if(!scrollParentEl.is(document)){return getClientRect(scrollParentEl)}},buildElHorizontals:function(){var lefts=[];var rights=[];this.els.each(function(i,node){var el=$(node);var left=el.offset().left;var width=el.outerWidth();lefts.push(left);rights.push(left+width)});this.lefts=lefts;this.rights=rights},buildElVerticals:function(){var tops=[];var bottoms=[];this.els.each(function(i,node){var el=$(node);var top=el.offset().top;var height=el.outerHeight();tops.push(top);bottoms.push(top+height)});this.tops=tops;this.bottoms=bottoms},getHorizontalIndex:function(leftOffset){this.ensureBuilt();var boundingRect=this.boundingRect;var lefts=this.lefts;var rights=this.rights;var len=lefts.length;var i;if(!boundingRect||leftOffset>=boundingRect.left&&leftOffset<boundingRect.right){for(i=0;i<len;i++){if(leftOffset>=lefts[i]&&leftOffset<rights[i]){return i}}}},getVerticalIndex:function(topOffset){this.ensureBuilt();var boundingRect=this.boundingRect;var tops=this.tops;var bottoms=this.bottoms;var len=tops.length;var i;if(!boundingRect||topOffset>=boundingRect.top&&topOffset<boundingRect.bottom){for(i=0;i<len;i++){if(topOffset>=tops[i]&&topOffset<bottoms[i]){return i}}}},getLeftOffset:function(leftIndex){this.ensureBuilt();return this.lefts[leftIndex]},getLeftPosition:function(leftIndex){this.ensureBuilt();return this.lefts[leftIndex]-this.origin.left},getRightOffset:function(leftIndex){this.ensureBuilt();return this.rights[leftIndex]},getRightPosition:function(leftIndex){this.ensureBuilt();return this.rights[leftIndex]-this.origin.left},getWidth:function(leftIndex){this.ensureBuilt();return this.rights[leftIndex]-this.lefts[leftIndex]},getTopOffset:function(topIndex){this.ensureBuilt();return this.tops[topIndex]},getTopPosition:function(topIndex){this.ensureBuilt();return this.tops[topIndex]-this.origin.top},getBottomOffset:function(topIndex){this.ensureBuilt();return this.bottoms[topIndex]},getBottomPosition:function(topIndex){this.ensureBuilt();return this.bottoms[topIndex]-this.origin.top},getHeight:function(topIndex){this.ensureBuilt();return this.bottoms[topIndex]-this.tops[topIndex]}});var DragListener=FC.DragListener=Class.extend(ListenerMixin,{options:null,subjectEl:null,subjectHref:null,originX:null,originY:null,scrollEl:null,isInteracting:false,isDistanceSurpassed:false,isDelayEnded:false,isDragging:false,isTouch:false,delay:null,delayTimeoutId:null,minDistance:null,constructor:function(options){this.options=options||{}},startInteraction:function(ev,extraOptions){var isTouch=getEvIsTouch(ev);if(ev.type==="mousedown"){if(!isPrimaryMouseButton(ev)){return}else{ev.preventDefault()}}if(!this.isInteracting){extraOptions=extraOptions||{};this.delay=firstDefined(extraOptions.delay,this.options.delay,0);this.minDistance=firstDefined(extraOptions.distance,this.options.distance,0);this.subjectEl=this.options.subjectEl;this.isInteracting=true;this.isTouch=isTouch;this.isDelayEnded=false;this.isDistanceSurpassed=false;this.originX=getEvX(ev);this.originY=getEvY(ev);this.scrollEl=getScrollParent($(ev.target));this.bindHandlers();this.initAutoScroll();this.handleInteractionStart(ev);this.startDelay(ev);if(!this.minDistance){this.handleDistanceSurpassed(ev)}}},handleInteractionStart:function(ev){this.trigger("interactionStart",ev)},endInteraction:function(ev){if(this.isInteracting){this.endDrag(ev);if(this.delayTimeoutId){clearTimeout(this.delayTimeoutId);this.delayTimeoutId=null}this.destroyAutoScroll();this.unbindHandlers();this.isInteracting=false;this.handleInteractionEnd(ev)}},handleInteractionEnd:function(ev){this.trigger("interactionEnd",ev)},bindHandlers:function(){var _this=this;var touchStartIgnores=1;if(this.isTouch){this.listenTo($(document),{touchmove:this.handleTouchMove,touchend:this.endInteraction,touchcancel:this.endInteraction,touchstart:function(ev){if(touchStartIgnores){touchStartIgnores--}else{_this.endInteraction(ev)}}});if(this.scrollEl){this.listenTo(this.scrollEl,"scroll",this.handleTouchScroll)}}else{this.listenTo($(document),{mousemove:this.handleMouseMove,mouseup:this.endInteraction})}this.listenTo($(document),{selectstart:preventDefault,contextmenu:preventDefault})},unbindHandlers:function(){this.stopListeningTo($(document));if(this.scrollEl){this.stopListeningTo(this.scrollEl)}},startDrag:function(ev,extraOptions){this.startInteraction(ev,extraOptions);if(!this.isDragging){this.isDragging=true;this.handleDragStart(ev)}},handleDragStart:function(ev){this.trigger("dragStart",ev);this.initHrefHack()},handleMove:function(ev){var dx=getEvX(ev)-this.originX;var dy=getEvY(ev)-this.originY;var minDistance=this.minDistance;var distanceSq;if(!this.isDistanceSurpassed){distanceSq=dx*dx+dy*dy;if(distanceSq>=minDistance*minDistance){this.handleDistanceSurpassed(ev)}}if(this.isDragging){this.handleDrag(dx,dy,ev)}},handleDrag:function(dx,dy,ev){this.trigger("drag",dx,dy,ev);this.updateAutoScroll(ev)},endDrag:function(ev){if(this.isDragging){this.isDragging=false;this.handleDragEnd(ev)}},handleDragEnd:function(ev){this.trigger("dragEnd",ev);this.destroyHrefHack()},startDelay:function(initialEv){var _this=this;if(this.delay){this.delayTimeoutId=setTimeout(function(){_this.handleDelayEnd(initialEv)},this.delay)}else{this.handleDelayEnd(initialEv)}},handleDelayEnd:function(initialEv){this.isDelayEnded=true;if(this.isDistanceSurpassed){this.startDrag(initialEv)}},handleDistanceSurpassed:function(ev){this.isDistanceSurpassed=true;if(this.isDelayEnded){this.startDrag(ev)}},handleTouchMove:function(ev){if(this.isDragging){ev.preventDefault()}this.handleMove(ev)},handleMouseMove:function(ev){this.handleMove(ev)},handleTouchScroll:function(ev){if(!this.isDragging){this.endInteraction(ev)}},initHrefHack:function(){var subjectEl=this.subjectEl;if(this.subjectHref=subjectEl?subjectEl.attr("href"):null){subjectEl.removeAttr("href")}},destroyHrefHack:function(){var subjectEl=this.subjectEl;var subjectHref=this.subjectHref;setTimeout(function(){if(subjectHref){subjectEl.attr("href",subjectHref)}},0)},trigger:function(name){if(this.options[name]){this.options[name].apply(this,Array.prototype.slice.call(arguments,1))}if(this["_"+name]){this["_"+name].apply(this,Array.prototype.slice.call(arguments,1))}}});DragListener.mixin({isAutoScroll:false,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,initAutoScroll:function(){var scrollEl=this.scrollEl;this.isAutoScroll=this.options.scroll&&scrollEl&&!scrollEl.is(window)&&!scrollEl.is(document);if(this.isAutoScroll){this.listenTo(scrollEl,"scroll",debounce(this.handleDebouncedScroll,100))}},destroyAutoScroll:function(){this.endAutoScroll();if(this.isAutoScroll){this.stopListeningTo(this.scrollEl,"scroll")}},computeScrollBounds:function(){if(this.isAutoScroll){this.scrollBounds=getOuterRect(this.scrollEl)}},updateAutoScroll:function(ev){var sensitivity=this.scrollSensitivity;var bounds=this.scrollBounds;var topCloseness,bottomCloseness;var leftCloseness,rightCloseness;var topVel=0;var leftVel=0;if(bounds){topCloseness=(sensitivity-(getEvY(ev)-bounds.top))/sensitivity;bottomCloseness=(sensitivity-(bounds.bottom-getEvY(ev)))/sensitivity;leftCloseness=(sensitivity-(getEvX(ev)-bounds.left))/sensitivity;rightCloseness=(sensitivity-(bounds.right-getEvX(ev)))/sensitivity;if(topCloseness>=0&&topCloseness<=1){topVel=topCloseness*this.scrollSpeed*-1}else if(bottomCloseness>=0&&bottomCloseness<=1){topVel=bottomCloseness*this.scrollSpeed}if(leftCloseness>=0&&leftCloseness<=1){leftVel=leftCloseness*this.scrollSpeed*-1}else if(rightCloseness>=0&&rightCloseness<=1){leftVel=rightCloseness*this.scrollSpeed}}this.setScrollVel(topVel,leftVel)},setScrollVel:function(topVel,leftVel){this.scrollTopVel=topVel;this.scrollLeftVel=leftVel;this.constrainScrollVel();if((this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId){this.scrollIntervalId=setInterval(proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs)}},constrainScrollVel:function(){var el=this.scrollEl;if(this.scrollTopVel<0){if(el.scrollTop()<=0){this.scrollTopVel=0}}else if(this.scrollTopVel>0){if(el.scrollTop()+el[0].clientHeight>=el[0].scrollHeight){this.scrollTopVel=0}}if(this.scrollLeftVel<0){if(el.scrollLeft()<=0){this.scrollLeftVel=0}}else if(this.scrollLeftVel>0){if(el.scrollLeft()+el[0].clientWidth>=el[0].scrollWidth){this.scrollLeftVel=0}}},scrollIntervalFunc:function(){var el=this.scrollEl;var frac=this.scrollIntervalMs/1e3;if(this.scrollTopVel){el.scrollTop(el.scrollTop()+this.scrollTopVel*frac)}if(this.scrollLeftVel){el.scrollLeft(el.scrollLeft()+this.scrollLeftVel*frac)}this.constrainScrollVel();if(!this.scrollTopVel&&!this.scrollLeftVel){this.endAutoScroll()}},endAutoScroll:function(){if(this.scrollIntervalId){clearInterval(this.scrollIntervalId);this.scrollIntervalId=null;this.handleScrollEnd()}},handleDebouncedScroll:function(){if(!this.scrollIntervalId){this.handleScrollEnd()}},handleScrollEnd:function(){}});var HitDragListener=DragListener.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(component,options){DragListener.call(this,options);this.component=component},handleInteractionStart:function(ev){var subjectEl=this.subjectEl;var subjectRect;var origPoint;var point;this.computeCoords();if(ev){origPoint={left:getEvX(ev),top:getEvY(ev)};point=origPoint;if(subjectEl){subjectRect=getOuterRect(subjectEl);point=constrainPoint(point,subjectRect)}this.origHit=this.queryHit(point.left,point.top);if(subjectEl&&this.options.subjectCenter){if(this.origHit){subjectRect=intersectRects(this.origHit,subjectRect)||subjectRect}point=getRectCenter(subjectRect)}this.coordAdjust=diffPoints(point,origPoint)}else{this.origHit=null;this.coordAdjust=null}DragListener.prototype.handleInteractionStart.apply(this,arguments)},computeCoords:function(){this.component.prepareHits();this.computeScrollBounds()},handleDragStart:function(ev){var hit;DragListener.prototype.handleDragStart.apply(this,arguments);hit=this.queryHit(getEvX(ev),getEvY(ev));if(hit){this.handleHitOver(hit)}},handleDrag:function(dx,dy,ev){var hit;DragListener.prototype.handleDrag.apply(this,arguments);hit=this.queryHit(getEvX(ev),getEvY(ev));if(!isHitsEqual(hit,this.hit)){if(this.hit){this.handleHitOut()}if(hit){this.handleHitOver(hit)}}},handleDragEnd:function(){this.handleHitDone();DragListener.prototype.handleDragEnd.apply(this,arguments)},handleHitOver:function(hit){var isOrig=isHitsEqual(hit,this.origHit);this.hit=hit;this.trigger("hitOver",this.hit,isOrig,this.origHit)},handleHitOut:function(){if(this.hit){this.trigger("hitOut",this.hit);this.handleHitDone();this.hit=null}},handleHitDone:function(){if(this.hit){this.trigger("hitDone",this.hit)}},handleInteractionEnd:function(){DragListener.prototype.handleInteractionEnd.apply(this,arguments);this.origHit=null;this.hit=null;this.component.releaseHits()},handleScrollEnd:function(){DragListener.prototype.handleScrollEnd.apply(this,arguments);this.computeCoords()},queryHit:function(left,top){if(this.coordAdjust){left+=this.coordAdjust.left;top+=this.coordAdjust.top}return this.component.queryHit(left,top)}});function isHitsEqual(hit0,hit1){if(!hit0&&!hit1){return true}if(hit0&&hit1){return hit0.component===hit1.component&&isHitPropsWithin(hit0,hit1)&&isHitPropsWithin(hit1,hit0)}return false}function isHitPropsWithin(subHit,superHit){for(var propName in subHit){if(!/^(component|left|right|top|bottom)$/.test(propName)){if(subHit[propName]!==superHit[propName]){return false}}}return true}var MouseFollower=Class.extend(ListenerMixin,{options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,y0:null,x0:null,topDelta:null,leftDelta:null,isFollowing:false,isHidden:false,isAnimating:false,constructor:function(sourceEl,options){this.options=options=options||{};this.sourceEl=sourceEl;this.parentEl=options.parentEl?$(options.parentEl):sourceEl.parent()},start:function(ev){if(!this.isFollowing){this.isFollowing=true;this.y0=getEvY(ev);this.x0=getEvX(ev);this.topDelta=0;this.leftDelta=0;if(!this.isHidden){this.updatePosition()}if(getEvIsTouch(ev)){this.listenTo($(document),"touchmove",this.handleMove)}else{this.listenTo($(document),"mousemove",this.handleMove)}}},stop:function(shouldRevert,callback){var _this=this;var revertDuration=this.options.revertDuration;function complete(){this.isAnimating=false;_this.removeElement();this.top0=this.left0=null;if(callback){callback()}}if(this.isFollowing&&!this.isAnimating){this.isFollowing=false;this.stopListeningTo($(document));if(shouldRevert&&revertDuration&&!this.isHidden){this.isAnimating=true;this.el.animate({top:this.top0,left:this.left0},{duration:revertDuration,complete:complete})}else{complete()}}},getEl:function(){var el=this.el;if(!el){this.sourceEl.width();el=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||"").css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex});el.addClass("fc-unselectable");el.appendTo(this.parentEl)}return el},removeElement:function(){if(this.el){this.el.remove();this.el=null}},updatePosition:function(){var sourceOffset;var origin;this.getEl();if(this.top0===null){this.sourceEl.width();sourceOffset=this.sourceEl.offset();origin=this.el.offsetParent().offset();this.top0=sourceOffset.top-origin.top;this.left0=sourceOffset.left-origin.left}this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},handleMove:function(ev){this.topDelta=getEvY(ev)-this.y0;this.leftDelta=getEvX(ev)-this.x0;if(!this.isHidden){this.updatePosition()}},hide:function(){if(!this.isHidden){this.isHidden=true;if(this.el){this.el.hide()}}},show:function(){if(this.isHidden){this.isHidden=false;this.updatePosition();this.getEl().show()}}});var Grid=FC.Grid=Class.extend(ListenerMixin,{view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,dayDragListener:null,segDragListener:null,segResizeListener:null,externalDragListener:null,constructor:function(view){this.view=view;this.isRTL=view.opt("isRTL");this.elsByFill={}},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return true},computeDisplayEventEnd:function(){return true},setRange:function(range){this.start=range.start.clone();this.end=range.end.clone();this.rangeUpdated();this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var view=this.view;var displayEventTime;var displayEventEnd;this.eventTimeFormat=view.opt("eventTimeFormat")||view.opt("timeFormat")||this.computeEventTimeFormat();displayEventTime=view.opt("displayEventTime");if(displayEventTime==null){displayEventTime=this.computeDisplayEventTime()}displayEventEnd=view.opt("displayEventEnd");if(displayEventEnd==null){displayEventEnd=this.computeDisplayEventEnd()}this.displayEventTime=displayEventTime;this.displayEventEnd=displayEventEnd},spanToSegs:function(span){},diffDates:function(a,b){if(this.largeUnit){return diffByUnit(a,b,this.largeUnit)}else{return diffDayTime(a,b)}},prepareHits:function(){},releaseHits:function(){},queryHit:function(leftOffset,topOffset){},getHitSpan:function(hit){},getHitEl:function(hit){},setElement:function(el){this.el=el;preventSelection(el);if(this.view.calendar.isTouch){this.bindDayHandler("touchstart",this.dayTouchStart)}else{this.bindDayHandler("mousedown",this.dayMousedown)}this.bindSegHandlers();this.bindGlobalHandlers()},bindDayHandler:function(name,handler){var _this=this;this.el.on(name,function(ev){if(!$(ev.target).is(".fc-event-container *, .fc-more")&&!$(ev.target).closest(".fc-popover").length){return handler.call(_this,ev)}})},removeElement:function(){this.unbindGlobalHandlers();this.clearDragListeners();this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){this.listenTo($(document),{dragstart:this.externalDragStart,sortstart:this.externalDragStart})},unbindGlobalHandlers:function(){this.stopListeningTo($(document))},dayMousedown:function(ev){this.clearDragListeners();this.buildDayDragListener().startInteraction(ev,{})},dayTouchStart:function(ev){this.clearDragListeners();this.buildDayDragListener().startInteraction(ev,{delay:this.view.opt("longPressDelay")})},buildDayDragListener:function(){var _this=this;var view=this.view;var isSelectable=view.opt("selectable");var dayClickHit;var selectionSpan;var dragListener=this.dayDragListener=new HitDragListener(this,{scroll:view.opt("dragScroll"),interactionStart:function(){dayClickHit=dragListener.origHit},dragStart:function(){view.unselect()},hitOver:function(hit,isOrig,origHit){if(origHit){if(!isOrig){dayClickHit=null}if(isSelectable){selectionSpan=_this.computeSelection(_this.getHitSpan(origHit),_this.getHitSpan(hit));if(selectionSpan){_this.renderSelection(selectionSpan)}else if(selectionSpan===false){disableCursor()}}}},hitOut:function(){dayClickHit=null;selectionSpan=null;_this.unrenderSelection();enableCursor()},interactionEnd:function(ev){if(dayClickHit){view.triggerDayClick(_this.getHitSpan(dayClickHit),_this.getHitEl(dayClickHit),ev)}if(selectionSpan){view.reportSelection(selectionSpan,ev)}enableCursor();_this.dayDragListener=null}});return dragListener},clearDragListeners:function(){if(this.dayDragListener){this.dayDragListener.endInteraction()}if(this.segDragListener){this.segDragListener.endInteraction()}if(this.segResizeListener){this.segResizeListener.endInteraction()}if(this.externalDragListener){this.externalDragListener.endInteraction()}},renderEventLocationHelper:function(eventLocation,sourceSeg){var fakeEvent=this.fabricateHelperEvent(eventLocation,sourceSeg);return this.renderHelper(fakeEvent,sourceSeg)},fabricateHelperEvent:function(eventLocation,sourceSeg){var fakeEvent=sourceSeg?createObject(sourceSeg.event):{};fakeEvent.start=eventLocation.start.clone();fakeEvent.end=eventLocation.end?eventLocation.end.clone():null;fakeEvent.allDay=null;this.view.calendar.normalizeEventDates(fakeEvent);fakeEvent.className=(fakeEvent.className||[]).concat("fc-helper");if(!sourceSeg){fakeEvent.editable=false}return fakeEvent},renderHelper:function(eventLocation,sourceSeg){},unrenderHelper:function(){},renderSelection:function(span){this.renderHighlight(span)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(span0,span1){var span=this.computeSelectionSpan(span0,span1);if(span&&!this.view.calendar.isSelectionSpanAllowed(span)){return false}return span},computeSelectionSpan:function(span0,span1){var dates=[span0.start,span0.end,span1.start,span1.end];dates.sort(compareNumbers);return{start:dates[0].clone(),end:dates[3].clone()}},renderHighlight:function(span){this.renderFill("highlight",this.spanToSegs(span))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(date){},unrenderNowIndicator:function(){},renderFill:function(type,segs){},unrenderFill:function(type){var el=this.elsByFill[type];if(el){el.remove();delete this.elsByFill[type]}},renderFillSegEls:function(type,segs){var _this=this;var segElMethod=this[type+"SegEl"];var html="";var renderedSegs=[];var i;if(segs.length){for(i=0;i<segs.length;i++){html+=this.fillSegHtml(type,segs[i])}$(html).each(function(i,node){var seg=segs[i];var el=$(node);if(segElMethod){el=segElMethod.call(_this,seg,el)}if(el){el=$(el);if(el.is(_this.fillSegTag)){seg.el=el;renderedSegs.push(seg)}}})}return renderedSegs},fillSegTag:"div",fillSegHtml:function(type,seg){var classesMethod=this[type+"SegClasses"];var cssMethod=this[type+"SegCss"];var classes=classesMethod?classesMethod.call(this,seg):[];var css=cssToStr(cssMethod?cssMethod.call(this,seg):{});return"<"+this.fillSegTag+(classes.length?' class="'+classes.join(" ")+'"':"")+(css?' style="'+css+'"':"")+" />"},getDayClasses:function(date){var view=this.view;var today=view.calendar.getNow();var classes=["fc-"+dayIDs[date.day()]];if(view.intervalDuration.as("months")==1&&date.month()!=view.intervalStart.month()){classes.push("fc-other-month")}if(date.isSame(today,"day")){classes.push("fc-today",view.highlightStateClass)}else if(date<today){classes.push("fc-past")}else{classes.push("fc-future")}return classes}});Grid.mixin({mousedOverSeg:null,isDraggingSeg:false,isResizingSeg:false,isDraggingExternal:false,segs:null,renderEvents:function(events){var bgEvents=[];var fgEvents=[];var i;for(i=0;i<events.length;i++){(isBgEvent(events[i])?bgEvents:fgEvents).push(events[i])}this.segs=[].concat(this.renderBgEvents(bgEvents),this.renderFgEvents(fgEvents))},renderBgEvents:function(events){var segs=this.eventsToSegs(events);return this.renderBgSegs(segs)||segs},renderFgEvents:function(events){var segs=this.eventsToSegs(events);return this.renderFgSegs(segs)||segs},unrenderEvents:function(){this.handleSegMouseout();this.clearDragListeners();this.unrenderFgSegs();this.unrenderBgSegs();this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(segs){},unrenderFgSegs:function(){},renderFgSegEls:function(segs,disableResizing){var view=this.view;var html="";var renderedSegs=[];var i;if(segs.length){for(i=0;i<segs.length;i++){html+=this.fgSegHtml(segs[i],disableResizing)}$(html).each(function(i,node){var seg=segs[i];var el=view.resolveEventEl(seg.event,$(node));if(el){el.data("fc-seg",seg);seg.el=el;renderedSegs.push(seg)}})}return renderedSegs},fgSegHtml:function(seg,disableResizing){},renderBgSegs:function(segs){return this.renderFill("bgEvent",segs)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(seg,el){return this.view.resolveEventEl(seg.event,el)},bgEventSegClasses:function(seg){var event=seg.event;var source=event.source||{};return["fc-bgevent"].concat(event.className,source.className||[])},bgEventSegCss:function(seg){return{"background-color":this.getSegSkinCss(seg)["background-color"]}},businessHoursSegClasses:function(seg){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){if(this.view.calendar.isTouch){this.bindSegHandler("touchstart",this.handleSegTouchStart)}else{this.bindSegHandler("mouseenter",this.handleSegMouseover);this.bindSegHandler("mouseleave",this.handleSegMouseout);this.bindSegHandler("mousedown",this.handleSegMousedown)}this.bindSegHandler("click",this.handleSegClick)},bindSegHandler:function(name,handler){var _this=this;this.el.on(name,".fc-event-container > *",function(ev){var seg=$(this).data("fc-seg");if(seg&&!_this.isDraggingSeg&&!_this.isResizingSeg){return handler.call(_this,seg,ev)}})},handleSegClick:function(seg,ev){return this.view.trigger("eventClick",seg.el[0],seg.event,ev)},handleSegMouseover:function(seg,ev){if(!this.mousedOverSeg){this.mousedOverSeg=seg;this.view.trigger("eventMouseover",seg.el[0],seg.event,ev)}},handleSegMouseout:function(seg,ev){ev=ev||{};if(this.mousedOverSeg){seg=seg||this.mousedOverSeg;this.mousedOverSeg=null;this.view.trigger("eventMouseout",seg.el[0],seg.event,ev)}},handleSegTouchStart:function(seg,ev){var view=this.view;var event=seg.event;var isSelected=view.isEventSelected(event);var isDraggable=view.isEventDraggable(event);var isResizable=view.isEventResizable(event);var isResizing=false;var dragListener;if(isSelected&&isResizable){isResizing=this.startSegResize(seg,ev)}if(!isResizing&&(isDraggable||isResizable)){this.clearDragListeners();dragListener=isDraggable?this.buildSegDragListener(seg):new DragListener;dragListener._dragStart=function(){if(!isSelected){view.selectEvent(event)}};dragListener.startInteraction(ev,{delay:isSelected?0:this.view.opt("longPressDelay")})}},handleSegMousedown:function(seg,ev){var isResizing=this.startSegResize(seg,ev,{distance:5});if(!isResizing&&this.view.isEventDraggable(seg.event)){this.clearDragListeners();this.buildSegDragListener(seg).startInteraction(ev,{distance:5})}},startSegResize:function(seg,ev,dragOptions){if($(ev.target).is(".fc-resizer")){this.clearDragListeners();this.buildSegResizeListener(seg,$(ev.target).is(".fc-start-resizer")).startInteraction(ev,dragOptions);return true}return false},buildSegDragListener:function(seg){var _this=this;var view=this.view;var calendar=view.calendar;var el=seg.el;var event=seg.event;var isDragging;var mouseFollower;var dropLocation;var dragListener=this.segDragListener=new HitDragListener(view,{scroll:view.opt("dragScroll"),subjectEl:el,subjectCenter:true,interactionStart:function(ev){isDragging=false;mouseFollower=new MouseFollower(seg.el,{additionalClass:"fc-dragging",parentEl:view.el,opacity:dragListener.isTouch?null:view.opt("dragOpacity"),revertDuration:view.opt("dragRevertDuration"),zIndex:2});mouseFollower.hide();mouseFollower.start(ev)},dragStart:function(ev){isDragging=true;_this.handleSegMouseout(seg,ev);_this.segDragStart(seg,ev);view.hideEvent(event)},hitOver:function(hit,isOrig,origHit){var dragHelperEls;if(seg.hit){origHit=seg.hit}dropLocation=_this.computeEventDrop(origHit.component.getHitSpan(origHit),hit.component.getHitSpan(hit),event);if(dropLocation&&!calendar.isEventSpanAllowed(_this.eventToSpan(dropLocation),event)){disableCursor();dropLocation=null}if(dropLocation&&(dragHelperEls=view.renderDrag(dropLocation,seg))){dragHelperEls.addClass("fc-dragging");if(!dragListener.isTouch){_this.applyDragOpacity(dragHelperEls)}mouseFollower.hide()}else{mouseFollower.show()}if(isOrig){dropLocation=null}},hitOut:function(){view.unrenderDrag();mouseFollower.show();dropLocation=null},hitDone:function(){enableCursor()},interactionEnd:function(ev){mouseFollower.stop(!dropLocation,function(){if(isDragging){view.unrenderDrag();view.showEvent(event);_this.segDragStop(seg,ev)}if(dropLocation){view.reportEventDrop(event,dropLocation,this.largeUnit,el,ev)}});_this.segDragListener=null}});return dragListener},segDragStart:function(seg,ev){this.isDraggingSeg=true;this.view.trigger("eventDragStart",seg.el[0],seg.event,ev,{})},segDragStop:function(seg,ev){this.isDraggingSeg=false;this.view.trigger("eventDragStop",seg.el[0],seg.event,ev,{})},computeEventDrop:function(startSpan,endSpan,event){var calendar=this.view.calendar;var dragStart=startSpan.start;var dragEnd=endSpan.start;var delta;var dropLocation;if(dragStart.hasTime()===dragEnd.hasTime()){delta=this.diffDates(dragEnd,dragStart);if(event.allDay&&durationHasTime(delta)){dropLocation={start:event.start.clone(),end:calendar.getEventEnd(event),allDay:false};calendar.normalizeEventTimes(dropLocation)}else{dropLocation={start:event.start.clone(),end:event.end?event.end.clone():null,allDay:event.allDay}}dropLocation.start.add(delta);if(dropLocation.end){dropLocation.end.add(delta)}}else{dropLocation={start:dragEnd.clone(),end:null,allDay:!dragEnd.hasTime()}}return dropLocation},applyDragOpacity:function(els){var opacity=this.view.opt("dragOpacity");if(opacity!=null){els.each(function(i,node){node.style.opacity=opacity})}},externalDragStart:function(ev,ui){var view=this.view;var el;var accept;if(view.opt("droppable")){el=$((ui?ui.item:null)||ev.target);accept=view.opt("dropAccept");if($.isFunction(accept)?accept.call(el[0],el):el.is(accept)){if(!this.isDraggingExternal){this.listenToExternalDrag(el,ev,ui)}}}},listenToExternalDrag:function(el,ev,ui){var _this=this;var calendar=this.view.calendar;var meta=getDraggedElMeta(el);var dropLocation;var dragListener=_this.externalDragListener=new HitDragListener(this,{interactionStart:function(){_this.isDraggingExternal=true},hitOver:function(hit){dropLocation=_this.computeExternalDrop(hit.component.getHitSpan(hit),meta);if(dropLocation&&!calendar.isExternalSpanAllowed(_this.eventToSpan(dropLocation),dropLocation,meta.eventProps)){disableCursor();dropLocation=null}if(dropLocation){_this.renderDrag(dropLocation)}},hitOut:function(){dropLocation=null},hitDone:function(){enableCursor();_this.unrenderDrag()},interactionEnd:function(ev){if(dropLocation){_this.view.reportExternalDrop(meta,dropLocation,el,ev,ui)}_this.isDraggingExternal=false;_this.externalDragListener=null}});dragListener.startDrag(ev)},computeExternalDrop:function(span,meta){var calendar=this.view.calendar;var dropLocation={start:calendar.applyTimezone(span.start),end:null};if(meta.startTime&&!dropLocation.start.hasTime()){dropLocation.start.time(meta.startTime)}if(meta.duration){dropLocation.end=dropLocation.start.clone().add(meta.duration)}return dropLocation},renderDrag:function(dropLocation,seg){},unrenderDrag:function(){},buildSegResizeListener:function(seg,isStart){var _this=this;var view=this.view;var calendar=view.calendar;var el=seg.el;var event=seg.event;var eventEnd=calendar.getEventEnd(event);var isDragging;var resizeLocation;var dragListener=this.segResizeListener=new HitDragListener(this,{scroll:view.opt("dragScroll"),subjectEl:el,interactionStart:function(){isDragging=false;
},dragStart:function(ev){isDragging=true;_this.handleSegMouseout(seg,ev);_this.segResizeStart(seg,ev)},hitOver:function(hit,isOrig,origHit){var origHitSpan=_this.getHitSpan(origHit);var hitSpan=_this.getHitSpan(hit);resizeLocation=isStart?_this.computeEventStartResize(origHitSpan,hitSpan,event):_this.computeEventEndResize(origHitSpan,hitSpan,event);if(resizeLocation){if(!calendar.isEventSpanAllowed(_this.eventToSpan(resizeLocation),event)){disableCursor();resizeLocation=null}else if(resizeLocation.start.isSame(event.start)&&resizeLocation.end.isSame(eventEnd)){resizeLocation=null}}if(resizeLocation){view.hideEvent(event);_this.renderEventResize(resizeLocation,seg)}},hitOut:function(){resizeLocation=null},hitDone:function(){_this.unrenderEventResize();view.showEvent(event);enableCursor()},interactionEnd:function(ev){if(isDragging){_this.segResizeStop(seg,ev)}if(resizeLocation){view.reportEventResize(event,resizeLocation,this.largeUnit,el,ev)}_this.segResizeListener=null}});return dragListener},segResizeStart:function(seg,ev){this.isResizingSeg=true;this.view.trigger("eventResizeStart",seg.el[0],seg.event,ev,{})},segResizeStop:function(seg,ev){this.isResizingSeg=false;this.view.trigger("eventResizeStop",seg.el[0],seg.event,ev,{})},computeEventStartResize:function(startSpan,endSpan,event){return this.computeEventResize("start",startSpan,endSpan,event)},computeEventEndResize:function(startSpan,endSpan,event){return this.computeEventResize("end",startSpan,endSpan,event)},computeEventResize:function(type,startSpan,endSpan,event){var calendar=this.view.calendar;var delta=this.diffDates(endSpan[type],startSpan[type]);var resizeLocation;var defaultDuration;resizeLocation={start:event.start.clone(),end:calendar.getEventEnd(event),allDay:event.allDay};if(resizeLocation.allDay&&durationHasTime(delta)){resizeLocation.allDay=false;calendar.normalizeEventTimes(resizeLocation)}resizeLocation[type].add(delta);if(!resizeLocation.start.isBefore(resizeLocation.end)){defaultDuration=this.minResizeDuration||(event.allDay?calendar.defaultAllDayEventDuration:calendar.defaultTimedEventDuration);if(type=="start"){resizeLocation.start=resizeLocation.end.clone().subtract(defaultDuration)}else{resizeLocation.end=resizeLocation.start.clone().add(defaultDuration)}}return resizeLocation},renderEventResize:function(range,seg){},unrenderEventResize:function(){},getEventTimeText:function(range,formatStr,displayEnd){if(formatStr==null){formatStr=this.eventTimeFormat}if(displayEnd==null){displayEnd=this.displayEventEnd}if(this.displayEventTime&&range.start.hasTime()){if(displayEnd&&range.end){return this.view.formatRange(range,formatStr)}else{return range.start.format(formatStr)}}return""},getSegClasses:function(seg,isDraggable,isResizable){var view=this.view;var event=seg.event;var classes=["fc-event",seg.isStart?"fc-start":"fc-not-start",seg.isEnd?"fc-end":"fc-not-end"].concat(event.className,event.source?event.source.className:[]);if(isDraggable){classes.push("fc-draggable")}if(isResizable){classes.push("fc-resizable")}if(view.isEventSelected(event)){classes.push("fc-selected")}return classes},getSegSkinCss:function(seg){var event=seg.event;var view=this.view;var source=event.source||{};var eventColor=event.color;var sourceColor=source.color;var optionColor=view.opt("eventColor");return{"background-color":event.backgroundColor||eventColor||source.backgroundColor||sourceColor||view.opt("eventBackgroundColor")||optionColor,"border-color":event.borderColor||eventColor||source.borderColor||sourceColor||view.opt("eventBorderColor")||optionColor,color:event.textColor||source.textColor||view.opt("eventTextColor")}},eventToSegs:function(event){return this.eventsToSegs([event])},eventToSpan:function(event){return this.eventToSpans(event)[0]},eventToSpans:function(event){var range=this.eventToRange(event);return this.eventRangeToSpans(range,event)},eventsToSegs:function(allEvents,segSliceFunc){var _this=this;var eventsById=groupEventsById(allEvents);var segs=[];$.each(eventsById,function(id,events){var ranges=[];var i;for(i=0;i<events.length;i++){ranges.push(_this.eventToRange(events[i]))}if(isInverseBgEvent(events[0])){ranges=_this.invertRanges(ranges);for(i=0;i<ranges.length;i++){segs.push.apply(segs,_this.eventRangeToSegs(ranges[i],events[0],segSliceFunc))}}else{for(i=0;i<ranges.length;i++){segs.push.apply(segs,_this.eventRangeToSegs(ranges[i],events[i],segSliceFunc))}}});return segs},eventToRange:function(event){return{start:event.start.clone().stripZone(),end:(event.end?event.end.clone():this.view.calendar.getDefaultEventEnd(event.allDay!=null?event.allDay:!event.start.hasTime(),event.start)).stripZone()}},eventRangeToSegs:function(range,event,segSliceFunc){var spans=this.eventRangeToSpans(range,event);var segs=[];var i;for(i=0;i<spans.length;i++){segs.push.apply(segs,this.eventSpanToSegs(spans[i],event,segSliceFunc))}return segs},eventRangeToSpans:function(range,event){return[$.extend({},range)]},eventSpanToSegs:function(span,event,segSliceFunc){var segs=segSliceFunc?segSliceFunc(span):this.spanToSegs(span);var i,seg;for(i=0;i<segs.length;i++){seg=segs[i];seg.event=event;seg.eventStartMS=+span.start;seg.eventDurationMS=span.end-span.start}return segs},invertRanges:function(ranges){var view=this.view;var viewStart=view.start.clone();var viewEnd=view.end.clone();var inverseRanges=[];var start=viewStart;var i,range;ranges.sort(compareRanges);for(i=0;i<ranges.length;i++){range=ranges[i];if(range.start>start){inverseRanges.push({start:start,end:range.start})}start=range.end}if(start<viewEnd){inverseRanges.push({start:start,end:viewEnd})}return inverseRanges},sortEventSegs:function(segs){segs.sort(proxy(this,"compareEventSegs"))},compareEventSegs:function(seg1,seg2){return seg1.eventStartMS-seg2.eventStartMS||seg2.eventDurationMS-seg1.eventDurationMS||seg2.event.allDay-seg1.event.allDay||compareByFieldSpecs(seg1.event,seg2.event,this.view.eventOrderSpecs)}});function isBgEvent(event){var rendering=getEventRendering(event);return rendering==="background"||rendering==="inverse-background"}FC.isBgEvent=isBgEvent;function isInverseBgEvent(event){return getEventRendering(event)==="inverse-background"}function getEventRendering(event){return firstDefined((event.source||{}).rendering,event.rendering)}function groupEventsById(events){var eventsById={};var i,event;for(i=0;i<events.length;i++){event=events[i];(eventsById[event._id]||(eventsById[event._id]=[])).push(event)}return eventsById}function compareRanges(range1,range2){return range1.start-range2.start}FC.dataAttrPrefix="";function getDraggedElMeta(el){var prefix=FC.dataAttrPrefix;var eventProps;var startTime;var duration;var stick;if(prefix){prefix+="-"}eventProps=el.data(prefix+"event")||null;if(eventProps){if(typeof eventProps==="object"){eventProps=$.extend({},eventProps)}else{eventProps={}}startTime=eventProps.start;if(startTime==null){startTime=eventProps.time}duration=eventProps.duration;stick=eventProps.stick;delete eventProps.start;delete eventProps.time;delete eventProps.duration;delete eventProps.stick}if(startTime==null){startTime=el.data(prefix+"start")}if(startTime==null){startTime=el.data(prefix+"time")}if(duration==null){duration=el.data(prefix+"duration")}if(stick==null){stick=el.data(prefix+"stick")}startTime=startTime!=null?moment.duration(startTime):null;duration=duration!=null?moment.duration(duration):null;stick=Boolean(stick);return{eventProps:eventProps,startTime:startTime,duration:duration,stick:stick}}var DayTableMixin=FC.DayTableMixin={breakOnWeeks:false,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){var view=this.view;var date=this.start.clone();var dayIndex=-1;var dayIndices=[];var dayDates=[];var daysPerRow;var firstDay;var rowCnt;while(date.isBefore(this.end)){if(view.isHiddenDay(date)){dayIndices.push(dayIndex+.5)}else{dayIndex++;dayIndices.push(dayIndex);dayDates.push(date.clone())}date.add(1,"days")}if(this.breakOnWeeks){firstDay=dayDates[0].day();for(daysPerRow=1;daysPerRow<dayDates.length;daysPerRow++){if(dayDates[daysPerRow].day()==firstDay){break}}rowCnt=Math.ceil(dayDates.length/daysPerRow)}else{rowCnt=1;daysPerRow=dayDates.length}this.dayDates=dayDates;this.dayIndices=dayIndices;this.daysPerRow=daysPerRow;this.rowCnt=rowCnt;this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt();this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(row,col){return this.dayDates[this.getCellDayIndex(row,col)].clone()},getCellRange:function(row,col){var start=this.getCellDate(row,col);var end=start.clone().add(1,"days");return{start:start,end:end}},getCellDayIndex:function(row,col){return row*this.daysPerRow+this.getColDayIndex(col)},getColDayIndex:function(col){if(this.isRTL){return this.colCnt-1-col}else{return col}},getDateDayIndex:function(date){var dayIndices=this.dayIndices;var dayOffset=date.diff(this.start,"days");if(dayOffset<0){return dayIndices[0]-1}else if(dayOffset>=dayIndices.length){return dayIndices[dayIndices.length-1]+1}else{return dayIndices[dayOffset]}},computeColHeadFormat:function(){if(this.rowCnt>1||this.colCnt>10){return"ddd"}else if(this.colCnt>1){return this.view.opt("dayOfMonthFormat")}else{return"dddd"}},sliceRangeByRow:function(range){var daysPerRow=this.daysPerRow;var normalRange=this.view.computeDayRange(range);var rangeFirst=this.getDateDayIndex(normalRange.start);var rangeLast=this.getDateDayIndex(normalRange.end.clone().subtract(1,"days"));var segs=[];var row;var rowFirst,rowLast;var segFirst,segLast;for(row=0;row<this.rowCnt;row++){rowFirst=row*daysPerRow;rowLast=rowFirst+daysPerRow-1;segFirst=Math.max(rangeFirst,rowFirst);segLast=Math.min(rangeLast,rowLast);segFirst=Math.ceil(segFirst);segLast=Math.floor(segLast);if(segFirst<=segLast){segs.push({row:row,firstRowDayIndex:segFirst-rowFirst,lastRowDayIndex:segLast-rowFirst,isStart:segFirst===rangeFirst,isEnd:segLast===rangeLast})}}return segs},sliceRangeByDay:function(range){var daysPerRow=this.daysPerRow;var normalRange=this.view.computeDayRange(range);var rangeFirst=this.getDateDayIndex(normalRange.start);var rangeLast=this.getDateDayIndex(normalRange.end.clone().subtract(1,"days"));var segs=[];var row;var rowFirst,rowLast;var i;var segFirst,segLast;for(row=0;row<this.rowCnt;row++){rowFirst=row*daysPerRow;rowLast=rowFirst+daysPerRow-1;for(i=rowFirst;i<=rowLast;i++){segFirst=Math.max(rangeFirst,i);segLast=Math.min(rangeLast,i);segFirst=Math.ceil(segFirst);segLast=Math.floor(segLast);if(segFirst<=segLast){segs.push({row:row,firstRowDayIndex:segFirst-rowFirst,lastRowDayIndex:segLast-rowFirst,isStart:segFirst===rangeFirst,isEnd:segLast===rangeLast})}}}return segs},renderHeadHtml:function(){var view=this.view;return""+'<div class="fc-row '+view.widgetHeaderClass+'">'+"<table>"+"<thead>"+this.renderHeadTrHtml()+"</thead>"+"</table>"+"</div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return""+"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var htmls=[];var col,date;for(col=0;col<this.colCnt;col++){date=this.getCellDate(0,col);htmls.push(this.renderHeadDateCellHtml(date))}return htmls.join("")},renderHeadDateCellHtml:function(date,colspan,otherAttrs){var view=this.view;return""+'<th class="fc-day-header '+view.widgetHeaderClass+" fc-"+dayIDs[date.day()]+'"'+(this.rowCnt==1?' data-date="'+date.format("YYYY-MM-DD")+'"':"")+(colspan>1?' colspan="'+colspan+'"':"")+(otherAttrs?" "+otherAttrs:"")+">"+htmlEscape(date.format(this.colHeadFormat))+"</th>"},renderBgTrHtml:function(row){return""+"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(row))+this.renderBgCellsHtml(row)+(this.isRTL?this.renderBgIntroHtml(row):"")+"</tr>"},renderBgIntroHtml:function(row){return this.renderIntroHtml()},renderBgCellsHtml:function(row){var htmls=[];var col,date;for(col=0;col<this.colCnt;col++){date=this.getCellDate(row,col);htmls.push(this.renderBgCellHtml(date))}return htmls.join("")},renderBgCellHtml:function(date,otherAttrs){var view=this.view;var classes=this.getDayClasses(date);classes.unshift("fc-day",view.widgetContentClass);return'<td class="'+classes.join(" ")+'"'+' data-date="'+date.format("YYYY-MM-DD")+'"'+(otherAttrs?" "+otherAttrs:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(trEl){var introHtml=this.renderIntroHtml();if(introHtml){if(this.isRTL){trEl.append(introHtml)}else{trEl.prepend(introHtml)}}}};var DayGrid=FC.DayGrid=Grid.extend(DayTableMixin,{numbersVisible:false,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(isRigid){var view=this.view;var rowCnt=this.rowCnt;var colCnt=this.colCnt;var html="";var row;var col;for(row=0;row<rowCnt;row++){html+=this.renderDayRowHtml(row,isRigid)}this.el.html(html);this.rowEls=this.el.find(".fc-row");this.cellEls=this.el.find(".fc-day");this.rowCoordCache=new CoordCache({els:this.rowEls,isVertical:true});this.colCoordCache=new CoordCache({els:this.cellEls.slice(0,this.colCnt),isHorizontal:true});for(row=0;row<rowCnt;row++){for(col=0;col<colCnt;col++){view.trigger("dayRender",null,this.getCellDate(row,col),this.getCellEl(row,col))}}},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var events=this.view.calendar.getBusinessHoursEvents(true);var segs=this.eventsToSegs(events);this.renderFill("businessHours",segs,"bgevent")},renderDayRowHtml:function(row,isRigid){var view=this.view;var classes=["fc-row","fc-week",view.widgetContentClass];if(isRigid){classes.push("fc-rigid")}return""+'<div class="'+classes.join(" ")+'">'+'<div class="fc-bg">'+"<table>"+this.renderBgTrHtml(row)+"</table>"+"</div>"+'<div class="fc-content-skeleton">'+"<table>"+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(row)+"</thead>":"")+"</table>"+"</div>"+"</div>"},renderNumberTrHtml:function(row){return""+"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(row))+this.renderNumberCellsHtml(row)+(this.isRTL?this.renderNumberIntroHtml(row):"")+"</tr>"},renderNumberIntroHtml:function(row){return this.renderIntroHtml()},renderNumberCellsHtml:function(row){var htmls=[];var col,date;for(col=0;col<this.colCnt;col++){date=this.getCellDate(row,col);htmls.push(this.renderNumberCellHtml(date))}return htmls.join("")},renderNumberCellHtml:function(date){var classes;if(!this.view.dayNumbersVisible){return"<td/>"}classes=this.getDayClasses(date);classes.unshift("fc-day-number");return""+'<td class="'+classes.join(" ")+'" data-date="'+date.format()+'">'+date.date()+"</td>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return this.colCnt==1},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(span){var segs=this.sliceRangeByRow(span);var i,seg;for(i=0;i<segs.length;i++){seg=segs[i];if(this.isRTL){seg.leftCol=this.daysPerRow-1-seg.lastRowDayIndex;seg.rightCol=this.daysPerRow-1-seg.firstRowDayIndex}else{seg.leftCol=seg.firstRowDayIndex;seg.rightCol=seg.lastRowDayIndex}}return segs},prepareHits:function(){this.colCoordCache.build();this.rowCoordCache.build();this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear();this.rowCoordCache.clear()},queryHit:function(leftOffset,topOffset){var col=this.colCoordCache.getHorizontalIndex(leftOffset);var row=this.rowCoordCache.getVerticalIndex(topOffset);if(row!=null&&col!=null){return this.getCellHit(row,col)}},getHitSpan:function(hit){return this.getCellRange(hit.row,hit.col)},getHitEl:function(hit){return this.getCellEl(hit.row,hit.col)},getCellHit:function(row,col){return{row:row,col:col,component:this,left:this.colCoordCache.getLeftOffset(col),right:this.colCoordCache.getRightOffset(col),top:this.rowCoordCache.getTopOffset(row),bottom:this.rowCoordCache.getBottomOffset(row)}},getCellEl:function(row,col){return this.cellEls.eq(row*this.colCnt+col)},renderDrag:function(eventLocation,seg){this.renderHighlight(this.eventToSpan(eventLocation));if(seg&&!seg.el.closest(this.el).length){return this.renderEventLocationHelper(eventLocation,seg)}},unrenderDrag:function(){this.unrenderHighlight();this.unrenderHelper()},renderEventResize:function(eventLocation,seg){this.renderHighlight(this.eventToSpan(eventLocation));return this.renderEventLocationHelper(eventLocation,seg)},unrenderEventResize:function(){this.unrenderHighlight();this.unrenderHelper()},renderHelper:function(event,sourceSeg){var helperNodes=[];var segs=this.eventToSegs(event);var rowStructs;segs=this.renderFgSegEls(segs);rowStructs=this.renderSegRows(segs);this.rowEls.each(function(row,rowNode){var rowEl=$(rowNode);var skeletonEl=$('<div class="fc-helper-skeleton"><table/></div>');var skeletonTop;if(sourceSeg&&sourceSeg.row===row){skeletonTop=sourceSeg.el.position().top}else{skeletonTop=rowEl.find(".fc-content-skeleton tbody").position().top}skeletonEl.css("top",skeletonTop).find("table").append(rowStructs[row].tbodyEl);rowEl.append(skeletonEl);helperNodes.push(skeletonEl[0])});return this.helperEls=$(helperNodes)},unrenderHelper:function(){if(this.helperEls){this.helperEls.remove();this.helperEls=null}},fillSegTag:"td",renderFill:function(type,segs,className){var nodes=[];var i,seg;var skeletonEl;segs=this.renderFillSegEls(type,segs);for(i=0;i<segs.length;i++){seg=segs[i];skeletonEl=this.renderFillRow(type,seg,className);this.rowEls.eq(seg.row).append(skeletonEl);nodes.push(skeletonEl[0])}this.elsByFill[type]=$(nodes);return segs},renderFillRow:function(type,seg,className){var colCnt=this.colCnt;var startCol=seg.leftCol;var endCol=seg.rightCol+1;var skeletonEl;var trEl;className=className||type.toLowerCase();skeletonEl=$('<div class="fc-'+className+'-skeleton">'+"<table><tr/></table>"+"</div>");trEl=skeletonEl.find("tr");if(startCol>0){trEl.append('<td colspan="'+startCol+'"/>')}trEl.append(seg.el.attr("colspan",endCol-startCol));if(endCol<colCnt){trEl.append('<td colspan="'+(colCnt-endCol)+'"/>')}this.bookendCells(trEl);return skeletonEl}});DayGrid.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover();Grid.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return Grid.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(segs){var allDaySegs=$.grep(segs,function(seg){return seg.event.allDay});return Grid.prototype.renderBgSegs.call(this,allDaySegs)},renderFgSegs:function(segs){var rowStructs;segs=this.renderFgSegEls(segs);rowStructs=this.rowStructs=this.renderSegRows(segs);this.rowEls.each(function(i,rowNode){$(rowNode).find(".fc-content-skeleton > table").append(rowStructs[i].tbodyEl)});return segs},unrenderFgSegs:function(){var rowStructs=this.rowStructs||[];var rowStruct;while(rowStruct=rowStructs.pop()){rowStruct.tbodyEl.remove()}this.rowStructs=null},renderSegRows:function(segs){var rowStructs=[];var segRows;var row;segRows=this.groupSegRows(segs);for(row=0;row<segRows.length;row++){rowStructs.push(this.renderSegRow(row,segRows[row]))}return rowStructs},fgSegHtml:function(seg,disableResizing){var view=this.view;var event=seg.event;var isDraggable=view.isEventDraggable(event);var isResizableFromStart=!disableResizing&&event.allDay&&seg.isStart&&view.isEventResizableFromStart(event);var isResizableFromEnd=!disableResizing&&event.allDay&&seg.isEnd&&view.isEventResizableFromEnd(event);var classes=this.getSegClasses(seg,isDraggable,isResizableFromStart||isResizableFromEnd);var skinCss=cssToStr(this.getSegSkinCss(seg));var timeHtml="";var timeText;var titleHtml;classes.unshift("fc-day-grid-event","fc-h-event");if(seg.isStart){timeText=this.getEventTimeText(event);if(timeText){timeHtml='<span class="fc-time">'+htmlEscape(timeText)+"</span>"}}titleHtml='<span class="fc-title">'+(htmlEscape(event.title||"")||"&nbsp;")+"</span>";return'<a class="'+classes.join(" ")+'"'+(event.url?' href="'+htmlEscape(event.url)+'"':"")+(skinCss?' style="'+skinCss+'"':"")+">"+'<div class="fc-content">'+(this.isRTL?titleHtml+" "+timeHtml:timeHtml+" "+titleHtml)+"</div>"+(isResizableFromStart?'<div class="fc-resizer fc-start-resizer" />':"")+(isResizableFromEnd?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(row,rowSegs){var colCnt=this.colCnt;var segLevels=this.buildSegLevels(rowSegs);var levelCnt=Math.max(1,segLevels.length);var tbody=$("<tbody/>");var segMatrix=[];var cellMatrix=[];var loneCellMatrix=[];var i,levelSegs;var col;var tr;var j,seg;var td;function emptyCellsUntil(endCol){while(col<endCol){td=(loneCellMatrix[i-1]||[])[col];if(td){td.attr("rowspan",parseInt(td.attr("rowspan")||1,10)+1)}else{td=$("<td/>");tr.append(td)}cellMatrix[i][col]=td;loneCellMatrix[i][col]=td;col++}}for(i=0;i<levelCnt;i++){levelSegs=segLevels[i];col=0;tr=$("<tr/>");segMatrix.push([]);cellMatrix.push([]);loneCellMatrix.push([]);if(levelSegs){for(j=0;j<levelSegs.length;j++){seg=levelSegs[j];emptyCellsUntil(seg.leftCol);td=$('<td class="fc-event-container"/>').append(seg.el);if(seg.leftCol!=seg.rightCol){td.attr("colspan",seg.rightCol-seg.leftCol+1)}else{loneCellMatrix[i][col]=td}while(col<=seg.rightCol){cellMatrix[i][col]=td;segMatrix[i][col]=seg;col++}tr.append(td)}}emptyCellsUntil(colCnt);this.bookendCells(tr);tbody.append(tr)}return{row:row,tbodyEl:tbody,cellMatrix:cellMatrix,segMatrix:segMatrix,segLevels:segLevels,segs:rowSegs}},buildSegLevels:function(segs){var levels=[];var i,seg;var j;this.sortEventSegs(segs);for(i=0;i<segs.length;i++){seg=segs[i];for(j=0;j<levels.length;j++){if(!isDaySegCollision(seg,levels[j])){break}}seg.level=j;(levels[j]||(levels[j]=[])).push(seg)}for(j=0;j<levels.length;j++){levels[j].sort(compareDaySegCols)}return levels},groupSegRows:function(segs){var segRows=[];var i;for(i=0;i<this.rowCnt;i++){segRows.push([])}for(i=0;i<segs.length;i++){segRows[segs[i].row].push(segs[i])}return segRows}});function isDaySegCollision(seg,otherSegs){var i,otherSeg;for(i=0;i<otherSegs.length;i++){otherSeg=otherSegs[i];if(otherSeg.leftCol<=seg.rightCol&&otherSeg.rightCol>=seg.leftCol){return true}}return false}function compareDaySegCols(a,b){return a.leftCol-b.leftCol}DayGrid.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){if(this.segPopover){this.segPopover.hide()}},limitRows:function(levelLimit){var rowStructs=this.rowStructs||[];var row;var rowLevelLimit;for(row=0;row<rowStructs.length;row++){this.unlimitRow(row);if(!levelLimit){rowLevelLimit=false}else if(typeof levelLimit==="number"){rowLevelLimit=levelLimit}else{rowLevelLimit=this.computeRowLevelLimit(row)}if(rowLevelLimit!==false){this.limitRow(row,rowLevelLimit)}}},computeRowLevelLimit:function(row){var rowEl=this.rowEls.eq(row);var rowHeight=rowEl.height();var trEls=this.rowStructs[row].tbodyEl.children();var i,trEl;var trHeight;function iterInnerHeights(i,childNode){trHeight=Math.max(trHeight,$(childNode).outerHeight())}for(i=0;i<trEls.length;i++){trEl=trEls.eq(i).removeClass("fc-limited");trHeight=0;trEl.find("> td > :first-child").each(iterInnerHeights);if(trEl.position().top+trHeight>rowHeight){return i}}return false},limitRow:function(row,levelLimit){var _this=this;var rowStruct=this.rowStructs[row];var moreNodes=[];var col=0;var levelSegs;var cellMatrix;var limitedNodes;var i,seg;var segsBelow;var totalSegsBelow;var colSegsBelow;var td,rowspan;var segMoreNodes;var j;var moreTd,moreWrap,moreLink;function emptyCellsUntil(endCol){while(col<endCol){segsBelow=_this.getCellSegs(row,col,levelLimit);if(segsBelow.length){td=cellMatrix[levelLimit-1][col];moreLink=_this.renderMoreLink(row,col,segsBelow);moreWrap=$("<div/>").append(moreLink);td.append(moreWrap);moreNodes.push(moreWrap[0])}col++}}if(levelLimit&&levelLimit<rowStruct.segLevels.length){levelSegs=rowStruct.segLevels[levelLimit-1];cellMatrix=rowStruct.cellMatrix;limitedNodes=rowStruct.tbodyEl.children().slice(levelLimit).addClass("fc-limited").get();for(i=0;i<levelSegs.length;i++){seg=levelSegs[i];emptyCellsUntil(seg.leftCol);colSegsBelow=[];totalSegsBelow=0;while(col<=seg.rightCol){segsBelow=this.getCellSegs(row,col,levelLimit);colSegsBelow.push(segsBelow);totalSegsBelow+=segsBelow.length;col++}if(totalSegsBelow){td=cellMatrix[levelLimit-1][seg.leftCol];rowspan=td.attr("rowspan")||1;segMoreNodes=[];for(j=0;j<colSegsBelow.length;j++){moreTd=$('<td class="fc-more-cell"/>').attr("rowspan",rowspan);segsBelow=colSegsBelow[j];moreLink=this.renderMoreLink(row,seg.leftCol+j,[seg].concat(segsBelow));moreWrap=$("<div/>").append(moreLink);moreTd.append(moreWrap);segMoreNodes.push(moreTd[0]);moreNodes.push(moreTd[0])}td.addClass("fc-limited").after($(segMoreNodes));limitedNodes.push(td[0])}}emptyCellsUntil(this.colCnt);rowStruct.moreEls=$(moreNodes);rowStruct.limitedEls=$(limitedNodes)}},unlimitRow:function(row){var rowStruct=this.rowStructs[row];if(rowStruct.moreEls){rowStruct.moreEls.remove();rowStruct.moreEls=null}if(rowStruct.limitedEls){rowStruct.limitedEls.removeClass("fc-limited");rowStruct.limitedEls=null}},renderMoreLink:function(row,col,hiddenSegs){var _this=this;var view=this.view;return $('<a class="fc-more"/>').text(this.getMoreLinkText(hiddenSegs.length)).on("click",function(ev){var clickOption=view.opt("eventLimitClick");var date=_this.getCellDate(row,col);var moreEl=$(this);var dayEl=_this.getCellEl(row,col);var allSegs=_this.getCellSegs(row,col);var reslicedAllSegs=_this.resliceDaySegs(allSegs,date);var reslicedHiddenSegs=_this.resliceDaySegs(hiddenSegs,date);if(typeof clickOption==="function"){clickOption=view.trigger("eventLimitClick",null,{date:date,dayEl:dayEl,moreEl:moreEl,segs:reslicedAllSegs,hiddenSegs:reslicedHiddenSegs},ev)}if(clickOption==="popover"){_this.showSegPopover(row,col,moreEl,reslicedAllSegs)}else if(typeof clickOption==="string"){view.calendar.zoomTo(date,clickOption)}})},showSegPopover:function(row,col,moreLink,segs){var _this=this;var view=this.view;var moreWrap=moreLink.parent();var topEl;var options;if(this.rowCnt==1){topEl=view.el}else{topEl=this.rowEls.eq(row)}options={className:"fc-more-popover",content:this.renderSegPopoverContent(row,col,segs),parentEl:this.el,top:topEl.offset().top,autoHide:true,viewportConstrain:view.opt("popoverViewportConstrain"),hide:function(){_this.segPopover.removeElement();_this.segPopover=null;_this.popoverSegs=null}};if(this.isRTL){options.right=moreWrap.offset().left+moreWrap.outerWidth()+1}else{options.left=moreWrap.offset().left-1}this.segPopover=new Popover(options);this.segPopover.show()},renderSegPopoverContent:function(row,col,segs){var view=this.view;var isTheme=view.opt("theme");var title=this.getCellDate(row,col).format(view.opt("dayPopoverFormat"));var content=$('<div class="fc-header '+view.widgetHeaderClass+'">'+'<span class="fc-close '+(isTheme?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span>'+'<span class="fc-title">'+htmlEscape(title)+"</span>"+'<div class="fc-clear"/>'+"</div>"+'<div class="fc-body '+view.widgetContentClass+'">'+'<div class="fc-event-container"></div>'+"</div>");var segContainer=content.find(".fc-event-container");var i;segs=this.renderFgSegEls(segs,true);this.popoverSegs=segs;for(i=0;i<segs.length;i++){this.prepareHits();segs[i].hit=this.getCellHit(row,col);this.releaseHits();segContainer.append(segs[i].el)}return content},resliceDaySegs:function(segs,dayDate){var events=$.map(segs,function(seg){return seg.event});var dayStart=dayDate.clone();var dayEnd=dayStart.clone().add(1,"days");var dayRange={start:dayStart,end:dayEnd};segs=this.eventsToSegs(events,function(range){var seg=intersectRanges(range,dayRange);return seg?[seg]:[]});this.sortEventSegs(segs);return segs},getMoreLinkText:function(num){var opt=this.view.opt("eventLimitText");if(typeof opt==="function"){return opt(num)}else{return"+"+num+" "+opt}},getCellSegs:function(row,col,startLevel){var segMatrix=this.rowStructs[row].segMatrix;var level=startLevel||0;var segs=[];var seg;while(level<segMatrix.length){seg=segMatrix[level][col];if(seg){segs.push(seg)}level++}return segs}});var TimeGrid=FC.TimeGrid=Grid.extend(DayTableMixin,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatContainerEl:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){Grid.apply(this,arguments);this.processOptions()},renderDates:function(){this.el.html(this.renderHtml());this.colEls=this.el.find(".fc-day");this.slatContainerEl=this.el.find(".fc-slats");this.slatEls=this.slatContainerEl.find("tr");this.colCoordCache=new CoordCache({els:this.colEls,isHorizontal:true});this.slatCoordCache=new CoordCache({els:this.slatEls,isVertical:true});this.renderContentSkeleton()},renderHtml:function(){return""+'<div class="fc-bg">'+"<table>"+this.renderBgTrHtml(0)+"</table>"+"</div>"+'<div class="fc-slats">'+"<table>"+this.renderSlatRowHtml()+"</table>"+"</div>"},renderSlatRowHtml:function(){var view=this.view;var isRTL=this.isRTL;var html="";var slotTime=moment.duration(+this.minTime);var slotDate;var isLabeled;var axisHtml;while(slotTime<this.maxTime){slotDate=this.start.clone().time(slotTime);isLabeled=isInt(divideDurationByDuration(slotTime,this.labelInterval));axisHtml='<td class="fc-axis fc-time '+view.widgetContentClass+'" '+view.axisStyleAttr()+">"+(isLabeled?"<span>"+htmlEscape(slotDate.format(this.labelFormat))+"</span>":"")+"</td>";html+='<tr data-time="'+slotDate.format("HH:mm:ss")+'"'+(isLabeled?"":' class="fc-minor"')+">"+(!isRTL?axisHtml:"")+'<td class="'+view.widgetContentClass+'"/>'+(isRTL?axisHtml:"")+"</tr>";slotTime.add(this.slotDuration)}return html},processOptions:function(){var view=this.view;var slotDuration=view.opt("slotDuration");var snapDuration=view.opt("snapDuration");var input;slotDuration=moment.duration(slotDuration);snapDuration=snapDuration?moment.duration(snapDuration):slotDuration;this.slotDuration=slotDuration;this.snapDuration=snapDuration;this.snapsPerSlot=slotDuration/snapDuration;this.minResizeDuration=snapDuration;this.minTime=moment.duration(view.opt("minTime"));this.maxTime=moment.duration(view.opt("maxTime"));input=view.opt("slotLabelFormat");if($.isArray(input)){input=input[input.length-1]}this.labelFormat=input||view.opt("axisFormat")||view.opt("smallTimeFormat");input=view.opt("slotLabelInterval");this.labelInterval=input?moment.duration(input):this.computeLabelInterval(slotDuration)},computeLabelInterval:function(slotDuration){var i;var labelInterval;var slotsPerLabel;for(i=AGENDA_STOCK_SUB_DURATIONS.length-1;i>=0;i--){labelInterval=moment.duration(AGENDA_STOCK_SUB_DURATIONS[i]);slotsPerLabel=divideDurationByDuration(labelInterval,slotDuration);if(isInt(slotsPerLabel)&&slotsPerLabel>1){return labelInterval}}return moment.duration(slotDuration)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return true},prepareHits:function(){this.colCoordCache.build();this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(leftOffset,topOffset){var snapsPerSlot=this.snapsPerSlot;var colCoordCache=this.colCoordCache;var slatCoordCache=this.slatCoordCache;var colIndex=colCoordCache.getHorizontalIndex(leftOffset);var slatIndex=slatCoordCache.getVerticalIndex(topOffset);if(colIndex!=null&&slatIndex!=null){var slatTop=slatCoordCache.getTopOffset(slatIndex);var slatHeight=slatCoordCache.getHeight(slatIndex);var partial=(topOffset-slatTop)/slatHeight;var localSnapIndex=Math.floor(partial*snapsPerSlot);var snapIndex=slatIndex*snapsPerSlot+localSnapIndex;var snapTop=slatTop+localSnapIndex/snapsPerSlot*slatHeight;var snapBottom=slatTop+(localSnapIndex+1)/snapsPerSlot*slatHeight;return{col:colIndex,snap:snapIndex,component:this,left:colCoordCache.getLeftOffset(colIndex),right:colCoordCache.getRightOffset(colIndex),top:snapTop,bottom:snapBottom}}},getHitSpan:function(hit){var start=this.getCellDate(0,hit.col);
var time=this.computeSnapTime(hit.snap);var end;start.time(time);end=start.clone().add(this.snapDuration);return{start:start,end:end}},getHitEl:function(hit){return this.colEls.eq(hit.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(snapIndex){return moment.duration(this.minTime+this.snapDuration*snapIndex)},spanToSegs:function(span){var segs=this.sliceRangeByTimes(span);var i;for(i=0;i<segs.length;i++){if(this.isRTL){segs[i].col=this.daysPerRow-1-segs[i].dayIndex}else{segs[i].col=segs[i].dayIndex}}return segs},sliceRangeByTimes:function(range){var segs=[];var seg;var dayIndex;var dayDate;var dayRange;for(dayIndex=0;dayIndex<this.daysPerRow;dayIndex++){dayDate=this.dayDates[dayIndex].clone();dayRange={start:dayDate.clone().time(this.minTime),end:dayDate.clone().time(this.maxTime)};seg=intersectRanges(range,dayRange);if(seg){seg.dayIndex=dayIndex;segs.push(seg)}}return segs},updateSize:function(isResize){this.slatCoordCache.build();if(isResize){this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))}},getTotalSlatHeight:function(){return this.slatContainerEl.outerHeight()},computeDateTop:function(date,startOfDayDate){return this.computeTimeTop(moment.duration(date-startOfDayDate.clone().stripTime()))},computeTimeTop:function(time){var len=this.slatEls.length;var slatCoverage=(time-this.minTime)/this.slotDuration;var slatIndex;var slatRemainder;slatCoverage=Math.max(0,slatCoverage);slatCoverage=Math.min(len,slatCoverage);slatIndex=Math.floor(slatCoverage);slatIndex=Math.min(slatIndex,len-1);slatRemainder=slatCoverage-slatIndex;return this.slatCoordCache.getTopPosition(slatIndex)+this.slatCoordCache.getHeight(slatIndex)*slatRemainder},renderDrag:function(eventLocation,seg){if(seg){return this.renderEventLocationHelper(eventLocation,seg)}else{this.renderHighlight(this.eventToSpan(eventLocation))}},unrenderDrag:function(){this.unrenderHelper();this.unrenderHighlight()},renderEventResize:function(eventLocation,seg){return this.renderEventLocationHelper(eventLocation,seg)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(event,sourceSeg){return this.renderHelperSegs(this.eventToSegs(event),sourceSeg)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){var events=this.view.calendar.getBusinessHoursEvents();var segs=this.eventsToSegs(events);this.renderBusinessSegs(segs)},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(date){var segs=this.spanToSegs({start:date,end:date});var top=this.computeDateTop(date,date);var nodes=[];var i;for(i=0;i<segs.length;i++){nodes.push($('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",top).appendTo(this.colContainerEls.eq(segs[i].col))[0])}if(segs.length>0){nodes.push($('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",top).appendTo(this.el.find(".fc-content-skeleton"))[0])}this.nowIndicatorEls=$(nodes)},unrenderNowIndicator:function(){if(this.nowIndicatorEls){this.nowIndicatorEls.remove();this.nowIndicatorEls=null}},renderSelection:function(span){if(this.view.opt("selectHelper")){this.renderEventLocationHelper(span)}else{this.renderHighlight(span)}},unrenderSelection:function(){this.unrenderHelper();this.unrenderHighlight()},renderHighlight:function(span){this.renderHighlightSegs(this.spanToSegs(span))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});TimeGrid.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var cellHtml="";var i;var skeletonEl;for(i=0;i<this.colCnt;i++){cellHtml+="<td>"+'<div class="fc-content-col">'+'<div class="fc-event-container fc-helper-container"></div>'+'<div class="fc-event-container"></div>'+'<div class="fc-highlight-container"></div>'+'<div class="fc-bgevent-container"></div>'+'<div class="fc-business-container"></div>'+"</div>"+"</td>"}skeletonEl=$('<div class="fc-content-skeleton">'+"<table>"+"<tr>"+cellHtml+"</tr>"+"</table>"+"</div>");this.colContainerEls=skeletonEl.find(".fc-content-col");this.helperContainerEls=skeletonEl.find(".fc-helper-container");this.fgContainerEls=skeletonEl.find(".fc-event-container:not(.fc-helper-container)");this.bgContainerEls=skeletonEl.find(".fc-bgevent-container");this.highlightContainerEls=skeletonEl.find(".fc-highlight-container");this.businessContainerEls=skeletonEl.find(".fc-business-container");this.bookendCells(skeletonEl.find("tr"));this.el.append(skeletonEl)},renderFgSegs:function(segs){segs=this.renderFgSegsIntoContainers(segs,this.fgContainerEls);this.fgSegs=segs;return segs},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(segs,sourceSeg){var helperEls=[];var i,seg;var sourceEl;segs=this.renderFgSegsIntoContainers(segs,this.helperContainerEls);for(i=0;i<segs.length;i++){seg=segs[i];if(sourceSeg&&sourceSeg.col===seg.col){sourceEl=sourceSeg.el;seg.el.css({left:sourceEl.css("left"),right:sourceEl.css("right"),"margin-left":sourceEl.css("margin-left"),"margin-right":sourceEl.css("margin-right")})}helperEls.push(seg.el[0])}this.helperSegs=segs;return $(helperEls)},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(segs){segs=this.renderFillSegEls("bgEvent",segs);this.updateSegVerticals(segs);this.attachSegsByCol(this.groupSegsByCol(segs),this.bgContainerEls);this.bgSegs=segs;return segs},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(segs){segs=this.renderFillSegEls("highlight",segs);this.updateSegVerticals(segs);this.attachSegsByCol(this.groupSegsByCol(segs),this.highlightContainerEls);this.highlightSegs=segs},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(segs){segs=this.renderFillSegEls("businessHours",segs);this.updateSegVerticals(segs);this.attachSegsByCol(this.groupSegsByCol(segs),this.businessContainerEls);this.businessSegs=segs},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(segs){var segsByCol=[];var i;for(i=0;i<this.colCnt;i++){segsByCol.push([])}for(i=0;i<segs.length;i++){segsByCol[segs[i].col].push(segs[i])}return segsByCol},attachSegsByCol:function(segsByCol,containerEls){var col;var segs;var i;for(col=0;col<this.colCnt;col++){segs=segsByCol[col];for(i=0;i<segs.length;i++){containerEls.eq(col).append(segs[i].el)}}},unrenderNamedSegs:function(propName){var segs=this[propName];var i;if(segs){for(i=0;i<segs.length;i++){segs[i].el.remove()}this[propName]=null}},renderFgSegsIntoContainers:function(segs,containerEls){var segsByCol;var col;segs=this.renderFgSegEls(segs);segsByCol=this.groupSegsByCol(segs);for(col=0;col<this.colCnt;col++){this.updateFgSegCoords(segsByCol[col])}this.attachSegsByCol(segsByCol,containerEls);return segs},fgSegHtml:function(seg,disableResizing){var view=this.view;var event=seg.event;var isDraggable=view.isEventDraggable(event);var isResizableFromStart=!disableResizing&&seg.isStart&&view.isEventResizableFromStart(event);var isResizableFromEnd=!disableResizing&&seg.isEnd&&view.isEventResizableFromEnd(event);var classes=this.getSegClasses(seg,isDraggable,isResizableFromStart||isResizableFromEnd);var skinCss=cssToStr(this.getSegSkinCss(seg));var timeText;var fullTimeText;var startTimeText;classes.unshift("fc-time-grid-event","fc-v-event");if(view.isMultiDayEvent(event)){if(seg.isStart||seg.isEnd){timeText=this.getEventTimeText(seg);fullTimeText=this.getEventTimeText(seg,"LT");startTimeText=this.getEventTimeText(seg,null,false)}}else{timeText=this.getEventTimeText(event);fullTimeText=this.getEventTimeText(event,"LT");startTimeText=this.getEventTimeText(event,null,false)}return'<a class="'+classes.join(" ")+'"'+(event.url?' href="'+htmlEscape(event.url)+'"':"")+(skinCss?' style="'+skinCss+'"':"")+">"+'<div class="fc-content">'+(timeText?'<div class="fc-time"'+' data-start="'+htmlEscape(startTimeText)+'"'+' data-full="'+htmlEscape(fullTimeText)+'"'+">"+"<span>"+htmlEscape(timeText)+"</span>"+"</div>":"")+(event.title?'<div class="fc-title">'+htmlEscape(event.title)+"</div>":"")+"</div>"+'<div class="fc-bg"/>'+(isResizableFromEnd?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(segs){this.computeSegVerticals(segs);this.assignSegVerticals(segs)},computeSegVerticals:function(segs){var i,seg;for(i=0;i<segs.length;i++){seg=segs[i];seg.top=this.computeDateTop(seg.start,seg.start);seg.bottom=this.computeDateTop(seg.end,seg.start)}},assignSegVerticals:function(segs){var i,seg;for(i=0;i<segs.length;i++){seg=segs[i];seg.el.css(this.generateSegVerticalCss(seg))}},generateSegVerticalCss:function(seg){return{top:seg.top,bottom:-seg.bottom}},updateFgSegCoords:function(segs){this.computeSegVerticals(segs);this.computeFgSegHorizontals(segs);this.assignSegVerticals(segs);this.assignFgSegHorizontals(segs)},computeFgSegHorizontals:function(segs){var levels;var level0;var i;this.sortEventSegs(segs);levels=buildSlotSegLevels(segs);computeForwardSlotSegs(levels);if(level0=levels[0]){for(i=0;i<level0.length;i++){computeSlotSegPressures(level0[i])}for(i=0;i<level0.length;i++){this.computeFgSegForwardBack(level0[i],0,0)}}},computeFgSegForwardBack:function(seg,seriesBackwardPressure,seriesBackwardCoord){var forwardSegs=seg.forwardSegs;var i;if(seg.forwardCoord===undefined){if(!forwardSegs.length){seg.forwardCoord=1}else{this.sortForwardSegs(forwardSegs);this.computeFgSegForwardBack(forwardSegs[0],seriesBackwardPressure+1,seriesBackwardCoord);seg.forwardCoord=forwardSegs[0].backwardCoord}seg.backwardCoord=seg.forwardCoord-(seg.forwardCoord-seriesBackwardCoord)/(seriesBackwardPressure+1);for(i=0;i<forwardSegs.length;i++){this.computeFgSegForwardBack(forwardSegs[i],0,seg.forwardCoord)}}},sortForwardSegs:function(forwardSegs){forwardSegs.sort(proxy(this,"compareForwardSegs"))},compareForwardSegs:function(seg1,seg2){return seg2.forwardPressure-seg1.forwardPressure||(seg1.backwardCoord||0)-(seg2.backwardCoord||0)||this.compareEventSegs(seg1,seg2)},assignFgSegHorizontals:function(segs){var i,seg;for(i=0;i<segs.length;i++){seg=segs[i];seg.el.css(this.generateFgSegHorizontalCss(seg));if(seg.bottom-seg.top<30){seg.el.addClass("fc-short")}}},generateFgSegHorizontalCss:function(seg){var shouldOverlap=this.view.opt("slotEventOverlap");var backwardCoord=seg.backwardCoord;var forwardCoord=seg.forwardCoord;var props=this.generateSegVerticalCss(seg);var left;var right;if(shouldOverlap){forwardCoord=Math.min(1,backwardCoord+(forwardCoord-backwardCoord)*2)}if(this.isRTL){left=1-forwardCoord;right=backwardCoord}else{left=backwardCoord;right=1-forwardCoord}props.zIndex=seg.level+1;props.left=left*100+"%";props.right=right*100+"%";if(shouldOverlap&&seg.forwardPressure){props[this.isRTL?"marginLeft":"marginRight"]=10*2}return props}});function buildSlotSegLevels(segs){var levels=[];var i,seg;var j;for(i=0;i<segs.length;i++){seg=segs[i];for(j=0;j<levels.length;j++){if(!computeSlotSegCollisions(seg,levels[j]).length){break}}seg.level=j;(levels[j]||(levels[j]=[])).push(seg)}return levels}function computeForwardSlotSegs(levels){var i,level;var j,seg;var k;for(i=0;i<levels.length;i++){level=levels[i];for(j=0;j<level.length;j++){seg=level[j];seg.forwardSegs=[];for(k=i+1;k<levels.length;k++){computeSlotSegCollisions(seg,levels[k],seg.forwardSegs)}}}}function computeSlotSegPressures(seg){var forwardSegs=seg.forwardSegs;var forwardPressure=0;var i,forwardSeg;if(seg.forwardPressure===undefined){for(i=0;i<forwardSegs.length;i++){forwardSeg=forwardSegs[i];computeSlotSegPressures(forwardSeg);forwardPressure=Math.max(forwardPressure,1+forwardSeg.forwardPressure)}seg.forwardPressure=forwardPressure}}function computeSlotSegCollisions(seg,otherSegs,results){results=results||[];for(var i=0;i<otherSegs.length;i++){if(isSlotSegCollision(seg,otherSegs[i])){results.push(otherSegs[i])}}return results}function isSlotSegCollision(seg1,seg2){return seg1.bottom>seg2.top&&seg1.top<seg2.bottom}var View=FC.View=Class.extend(EmitterMixin,ListenerMixin,{type:null,name:null,title:null,calendar:null,options:null,el:null,displaying:null,isSkeletonRendered:false,isEventsRendered:false,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:false,isSelected:false,selectedEvent:null,eventOrderSpecs:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(calendar,type,options,intervalDuration){this.calendar=calendar;this.type=this.name=type;this.options=options;this.intervalDuration=intervalDuration||moment.duration(1,"day");this.nextDayThreshold=moment.duration(this.opt("nextDayThreshold"));this.initThemingProps();this.initHiddenDays();this.isRTL=this.opt("isRTL");this.eventOrderSpecs=parseFieldSpecs(this.opt("eventOrder"));this.initialize()},initialize:function(){},opt:function(name){return this.options[name]},trigger:function(name,thisObj){var calendar=this.calendar;return calendar.trigger.apply(calendar,[name,thisObj||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(date){this.setRange(this.computeRange(date))},setRange:function(range){$.extend(this,range);this.updateTitle()},computeRange:function(date){var intervalUnit=computeIntervalUnit(this.intervalDuration);var intervalStart=date.clone().startOf(intervalUnit);var intervalEnd=intervalStart.clone().add(this.intervalDuration);var start,end;if(/year|month|week|day/.test(intervalUnit)){intervalStart.stripTime();intervalEnd.stripTime()}else{if(!intervalStart.hasTime()){intervalStart=this.calendar.time(0)}if(!intervalEnd.hasTime()){intervalEnd=this.calendar.time(0)}}start=intervalStart.clone();start=this.skipHiddenDays(start);end=intervalEnd.clone();end=this.skipHiddenDays(end,-1,true);return{intervalUnit:intervalUnit,intervalStart:intervalStart,intervalEnd:intervalEnd,start:start,end:end}},computePrevDate:function(date){return this.massageCurrentDate(date.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(date){return this.massageCurrentDate(date.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(date,direction){if(this.intervalDuration.as("days")<=1){if(this.isHiddenDay(date)){date=this.skipHiddenDays(date,direction);date.startOf("day")}}return date},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.calendar.applyTimezone(this.intervalStart),end:this.calendar.applyTimezone(this.intervalEnd)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){if(this.intervalUnit=="year"){return"YYYY"}else if(this.intervalUnit=="month"){return this.opt("monthYearFormat")}else if(this.intervalDuration.as("days")>1){return"ll"}else{return"LL"}},formatRange:function(range,formatStr,separator){var end=range.end;if(!end.hasTime()){end=end.clone().subtract(1)}return formatRange(range.start,end,formatStr,separator,this.opt("isRTL"))},setElement:function(el){this.el=el;this.bindGlobalHandlers()},removeElement:function(){this.clear();if(this.isSkeletonRendered){this.unrenderSkeleton();this.isSkeletonRendered=false}this.unbindGlobalHandlers();this.el.remove()},display:function(date){var _this=this;var scrollState=null;if(this.displaying){scrollState=this.queryScroll()}this.calendar.freezeContentHeight();return this.clear().then(function(){return _this.displaying=$.when(_this.displayView(date)).then(function(){_this.forceScroll(_this.computeInitialScroll(scrollState));_this.calendar.unfreezeContentHeight();_this.triggerRender()})})},clear:function(){var _this=this;var displaying=this.displaying;if(displaying){return displaying.then(function(){_this.displaying=null;_this.clearEvents();return _this.clearView()})}else{return $.when()}},displayView:function(date){if(!this.isSkeletonRendered){this.renderSkeleton();this.isSkeletonRendered=true}if(date){this.setDate(date)}if(this.render){this.render()}this.renderDates();this.updateSize();this.renderBusinessHours();this.startNowIndicator()},clearView:function(){this.unselect();this.stopNowIndicator();this.triggerUnrender();this.unrenderBusinessHours();this.unrenderDates();if(this.destroy){this.destroy()}},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){this.listenTo($(document),"mousedown",this.handleDocumentMousedown);this.listenTo($(document),"touchstart",this.handleDocumentTouchStart);this.listenTo($(document),"touchend",this.handleDocumentTouchEnd)},unbindGlobalHandlers:function(){this.stopListeningTo($(document))},initThemingProps:function(){var tm=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=tm+"-widget-header";this.widgetContentClass=tm+"-widget-content";this.highlightStateClass=tm+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var _this=this;var unit;var update;var delay;if(this.opt("nowIndicator")){unit=this.getNowIndicatorUnit();if(unit){update=proxy(this,"updateNowIndicator");this.initialNowDate=this.calendar.getNow();this.initialNowQueriedMs=+new Date;this.renderNowIndicator(this.initialNowDate);this.isNowIndicatorRendered=true;delay=this.initialNowDate.clone().startOf(unit).add(1,unit)-this.initialNowDate;this.nowIndicatorTimeoutID=setTimeout(function(){_this.nowIndicatorTimeoutID=null;update();delay=+moment.duration(1,unit);delay=Math.max(100,delay);_this.nowIndicatorIntervalID=setInterval(update,delay)},delay)}}},updateNowIndicator:function(){if(this.isNowIndicatorRendered){this.unrenderNowIndicator();this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs))}},stopNowIndicator:function(){if(this.isNowIndicatorRendered){if(this.nowIndicatorTimeoutID){clearTimeout(this.nowIndicatorTimeoutID);this.nowIndicatorTimeoutID=null}if(this.nowIndicatorIntervalID){clearTimeout(this.nowIndicatorIntervalID);this.nowIndicatorIntervalID=null}this.unrenderNowIndicator();this.isNowIndicatorRendered=false}},getNowIndicatorUnit:function(){},renderNowIndicator:function(date){},unrenderNowIndicator:function(){},updateSize:function(isResize){var scrollState;if(isResize){scrollState=this.queryScroll()}this.updateHeight(isResize);this.updateWidth(isResize);this.updateNowIndicator();if(isResize){this.setScroll(scrollState)}},updateWidth:function(isResize){},updateHeight:function(isResize){var calendar=this.calendar;this.setHeight(calendar.getSuggestedViewHeight(),calendar.isHeightAuto())},setHeight:function(height,isAuto){},computeInitialScroll:function(previousScrollState){return 0},queryScroll:function(){},setScroll:function(scrollState){},forceScroll:function(scrollState){var _this=this;this.setScroll(scrollState);setTimeout(function(){_this.setScroll(scrollState)},0)},displayEvents:function(events){var scrollState=this.queryScroll();this.clearEvents();this.renderEvents(events);this.isEventsRendered=true;this.setScroll(scrollState);this.triggerEventRender()},clearEvents:function(){var scrollState;if(this.isEventsRendered){scrollState=this.queryScroll();this.triggerEventUnrender();if(this.destroyEvents){this.destroyEvents()}this.unrenderEvents();this.setScroll(scrollState);this.isEventsRendered=false}},renderEvents:function(events){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(seg){this.trigger("eventAfterRender",seg.event,seg.event,seg.el)});this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(seg){this.trigger("eventDestroy",seg.event,seg.event,seg.el)})},resolveEventEl:function(event,el){var custom=this.trigger("eventRender",event,event,el);if(custom===false){el=null}else if(custom&&custom!==true){el=$(custom)}return el},showEvent:function(event){this.renderedEventSegEach(function(seg){seg.el.css("visibility","")},event)},hideEvent:function(event){this.renderedEventSegEach(function(seg){seg.el.css("visibility","hidden")},event)},renderedEventSegEach:function(func,event){var segs=this.getEventSegs();var i;for(i=0;i<segs.length;i++){if(!event||segs[i].event._id===event._id){if(segs[i].el){func.call(this,segs[i])}}}},getEventSegs:function(){return[]},isEventDraggable:function(event){var source=event.source||{};return firstDefined(event.startEditable,source.startEditable,this.opt("eventStartEditable"),event.editable,source.editable,this.opt("editable"))},reportEventDrop:function(event,dropLocation,largeUnit,el,ev){var calendar=this.calendar;var mutateResult=calendar.mutateEvent(event,dropLocation,largeUnit);var undoFunc=function(){mutateResult.undo();calendar.reportEventChange()};this.triggerEventDrop(event,mutateResult.dateDelta,undoFunc,el,ev);calendar.reportEventChange()},triggerEventDrop:function(event,dateDelta,undoFunc,el,ev){this.trigger("eventDrop",el[0],event,dateDelta,undoFunc,ev,{})},reportExternalDrop:function(meta,dropLocation,el,ev,ui){var eventProps=meta.eventProps;var eventInput;var event;if(eventProps){eventInput=$.extend({},eventProps,dropLocation);event=this.calendar.renderEvent(eventInput,meta.stick)[0]}this.triggerExternalDrop(event,dropLocation,el,ev,ui)},triggerExternalDrop:function(event,dropLocation,el,ev,ui){this.trigger("drop",el[0],dropLocation.start,ev,ui);if(event){this.trigger("eventReceive",null,event)}},renderDrag:function(dropLocation,seg){},unrenderDrag:function(){},isEventResizableFromStart:function(event){return this.opt("eventResizableFromStart")&&this.isEventResizable(event)},isEventResizableFromEnd:function(event){return this.isEventResizable(event)},isEventResizable:function(event){var source=event.source||{};return firstDefined(event.durationEditable,source.durationEditable,this.opt("eventDurationEditable"),event.editable,source.editable,this.opt("editable"))},reportEventResize:function(event,resizeLocation,largeUnit,el,ev){var calendar=this.calendar;var mutateResult=calendar.mutateEvent(event,resizeLocation,largeUnit);var undoFunc=function(){mutateResult.undo();calendar.reportEventChange()};this.triggerEventResize(event,mutateResult.durationDelta,undoFunc,el,ev);calendar.reportEventChange()},triggerEventResize:function(event,durationDelta,undoFunc,el,ev){this.trigger("eventResize",el[0],event,durationDelta,undoFunc,ev,{})},select:function(span,ev){this.unselect(ev);this.renderSelection(span);this.reportSelection(span,ev)},renderSelection:function(span){},reportSelection:function(span,ev){this.isSelected=true;this.triggerSelect(span,ev)},triggerSelect:function(span,ev){this.trigger("select",null,this.calendar.applyTimezone(span.start),this.calendar.applyTimezone(span.end),ev)},unselect:function(ev){if(this.isSelected){this.isSelected=false;if(this.destroySelection){this.destroySelection()}this.unrenderSelection();this.trigger("unselect",null,ev)}},unrenderSelection:function(){},selectEvent:function(event){if(!this.selectedEvent||this.selectedEvent!==event){this.unselectEvent();this.renderedEventSegEach(function(seg){seg.el.addClass("fc-selected")},event);this.selectedEvent=event}},unselectEvent:function(){if(this.selectedEvent){this.renderedEventSegEach(function(seg){seg.el.removeClass("fc-selected")},this.selectedEvent);this.selectedEvent=null}},isEventSelected:function(event){return this.selectedEvent&&this.selectedEvent._id===event._id},handleDocumentMousedown:function(ev){if(!this.calendar.isTouch&&isPrimaryMouseButton(ev)){this.processRangeUnselect(ev);this.processEventUnselect(ev)}},handleDocumentTouchStart:function(ev){this.processRangeUnselect(ev)},handleDocumentTouchEnd:function(ev){this.processEventUnselect(ev)},processRangeUnselect:function(ev){var ignore;if(this.isSelected&&this.opt("unselectAuto")){ignore=this.opt("unselectCancel");if(!ignore||!$(ev.target).closest(ignore).length){this.unselect(ev)}}},processEventUnselect:function(ev){if(this.selectedEvent){if(!$(ev.target).closest(".fc-selected").length){this.unselectEvent()}}},triggerDayClick:function(span,dayEl,ev){this.trigger("dayClick",dayEl,this.calendar.applyTimezone(span.start),ev)},initHiddenDays:function(){var hiddenDays=this.opt("hiddenDays")||[];var isHiddenDayHash=[];var dayCnt=0;var i;if(this.opt("weekends")===false){hiddenDays.push(0,6)}for(i=0;i<7;i++){if(!(isHiddenDayHash[i]=$.inArray(i,hiddenDays)!==-1)){dayCnt++}}if(!dayCnt){throw"invalid hiddenDays"}this.isHiddenDayHash=isHiddenDayHash},isHiddenDay:function(day){if(moment.isMoment(day)){day=day.day()}return this.isHiddenDayHash[day]},skipHiddenDays:function(date,inc,isExclusive){var out=date.clone();inc=inc||1;while(this.isHiddenDayHash[(out.day()+(isExclusive?inc:0)+7)%7]){out.add(inc,"days")}return out},computeDayRange:function(range){var startDay=range.start.clone().stripTime();var end=range.end;var endDay=null;var endTimeMS;if(end){endDay=end.clone().stripTime();endTimeMS=+end.time();if(endTimeMS&&endTimeMS>=this.nextDayThreshold){endDay.add(1,"days")}}if(!end||endDay<=startDay){endDay=startDay.clone().add(1,"days")}return{start:startDay,end:endDay}},isMultiDayEvent:function(event){var range=this.computeDayRange(event);return range.end.diff(range.start,"days")>1}});var Scroller=FC.Scroller=Class.extend({el:null,scrollEl:null,overflowX:null,overflowY:null,constructor:function(options){options=options||{};this.overflowX=options.overflowX||options.overflow||"auto";this.overflowY=options.overflowY||options.overflow||"auto"},render:function(){this.el=this.renderEl();this.applyOverflow()},renderEl:function(){return this.scrollEl=$('<div class="fc-scroller"></div>')},clear:function(){this.setHeight("auto");this.applyOverflow()},destroy:function(){this.el.remove()},applyOverflow:function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})},lockOverflow:function(scrollbarWidths){var overflowX=this.overflowX;var overflowY=this.overflowY;scrollbarWidths=scrollbarWidths||this.getScrollbarWidths();if(overflowX==="auto"){overflowX=scrollbarWidths.top||scrollbarWidths.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?"scroll":"hidden"}if(overflowY==="auto"){overflowY=scrollbarWidths.left||scrollbarWidths.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?"scroll":"hidden"}this.scrollEl.css({"overflow-x":overflowX,"overflow-y":overflowY})},setHeight:function(height){this.scrollEl.height(height)},getScrollTop:function(){return this.scrollEl.scrollTop()},setScrollTop:function(top){this.scrollEl.scrollTop(top)},getClientWidth:function(){return this.scrollEl[0].clientWidth},getClientHeight:function(){return this.scrollEl[0].clientHeight},getScrollbarWidths:function(){return getScrollbarWidths(this.scrollEl)}});var Calendar=FC.Calendar=Class.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,isTouch:false,constructor:Calendar_constructor,initialize:function(){},initOptions:function(overrides){var lang,langDefaults;var isRTL,dirDefaults;overrides=massageOverrides(overrides);lang=overrides.lang;langDefaults=langOptionHash[lang];if(!langDefaults){lang=Calendar.defaults.lang;langDefaults=langOptionHash[lang]||{}}isRTL=firstDefined(overrides.isRTL,langDefaults.isRTL,Calendar.defaults.isRTL);dirDefaults=isRTL?Calendar.rtlDefaults:{};this.dirDefaults=dirDefaults;this.langDefaults=langDefaults;this.overrides=overrides;this.options=mergeOptions([Calendar.defaults,dirDefaults,langDefaults,overrides]);populateInstanceComputableOptions(this.options);this.isTouch=this.options.isTouch!=null?this.options.isTouch:FC.isTouch;this.viewSpecCache={}},getViewSpec:function(viewType){var cache=this.viewSpecCache;return cache[viewType]||(cache[viewType]=this.buildViewSpec(viewType))},getUnitViewSpec:function(unit){var viewTypes;var i;var spec;if($.inArray(unit,intervalUnits)!=-1){viewTypes=this.header.getViewsWithButtons();$.each(FC.views,function(viewType){viewTypes.push(viewType)});for(i=0;i<viewTypes.length;i++){spec=this.getViewSpec(viewTypes[i]);if(spec){if(spec.singleUnit==unit){return spec}}}}},buildViewSpec:function(requestedViewType){var viewOverrides=this.overrides.views||{};var specChain=[];var defaultsChain=[];var overridesChain=[];var viewType=requestedViewType;var spec;var overrides;var duration;var unit;while(viewType){spec=fcViews[viewType];overrides=viewOverrides[viewType];viewType=null;if(typeof spec==="function"){spec={class:spec}}if(spec){specChain.unshift(spec);defaultsChain.unshift(spec.defaults||{});duration=duration||spec.duration;viewType=viewType||spec.type}if(overrides){overridesChain.unshift(overrides);duration=duration||overrides.duration;viewType=viewType||overrides.type}}spec=mergeProps(specChain);spec.type=requestedViewType;if(!spec["class"]){return false}if(duration){duration=moment.duration(duration);if(duration.valueOf()){spec.duration=duration;unit=computeIntervalUnit(duration);if(duration.as(unit)===1){spec.singleUnit=unit;overridesChain.unshift(viewOverrides[unit]||{})}}}spec.defaults=mergeOptions(defaultsChain);spec.overrides=mergeOptions(overridesChain);this.buildViewSpecOptions(spec);this.buildViewSpecButtonText(spec,requestedViewType);return spec},buildViewSpecOptions:function(spec){spec.options=mergeOptions([Calendar.defaults,spec.defaults,this.dirDefaults,this.langDefaults,this.overrides,spec.overrides]);populateInstanceComputableOptions(spec.options)},buildViewSpecButtonText:function(spec,requestedViewType){function queryButtonText(options){var buttonText=options.buttonText||{};return buttonText[requestedViewType]||(spec.singleUnit?buttonText[spec.singleUnit]:null)}spec.buttonTextOverride=queryButtonText(this.overrides)||spec.overrides.buttonText;spec.buttonTextDefault=queryButtonText(this.langDefaults)||queryButtonText(this.dirDefaults)||spec.defaults.buttonText||queryButtonText(Calendar.defaults)||(spec.duration?this.humanizeDuration(spec.duration):null)||requestedViewType},instantiateView:function(viewType){var spec=this.getViewSpec(viewType);return new spec["class"](this,viewType,spec.options,spec.duration)},isValidViewType:function(viewType){return Boolean(this.getViewSpec(viewType))},pushLoading:function(){if(!this.loadingLevel++){this.trigger("loading",null,true,this.view)}},popLoading:function(){if(!--this.loadingLevel){this.trigger("loading",null,false,this.view)}},buildSelectSpan:function(zonedStartInput,zonedEndInput){var start=this.moment(zonedStartInput).stripZone();var end;if(zonedEndInput){end=this.moment(zonedEndInput).stripZone()}else if(start.hasTime()){end=start.clone().add(this.defaultTimedEventDuration)}else{end=start.clone().add(this.defaultAllDayEventDuration)}return{start:start,end:end}}});Calendar.mixin(EmitterMixin);function Calendar_constructor(element,overrides){var t=this;t.initOptions(overrides||{});var options=this.options;t.render=render;t.destroy=destroy;t.refetchEvents=refetchEvents;t.reportEvents=reportEvents;t.reportEventChange=reportEventChange;t.rerenderEvents=renderEvents;t.changeView=renderView;t.select=select;t.unselect=unselect;t.prev=prev;t.next=next;t.prevYear=prevYear;t.nextYear=nextYear;t.today=today;t.gotoDate=gotoDate;t.incrementDate=incrementDate;t.zoomTo=zoomTo;t.getDate=getDate;t.getCalendar=getCalendar;t.getView=getView;t.option=option;t.trigger=trigger;var localeData=createObject(getMomentLocaleData(options.lang));if(options.monthNames){localeData._months=options.monthNames}if(options.monthNamesShort){localeData._monthsShort=options.monthNamesShort}if(options.dayNames){
localeData._weekdays=options.dayNames}if(options.dayNamesShort){localeData._weekdaysShort=options.dayNamesShort}if(options.firstDay!=null){var _week=createObject(localeData._week);_week.dow=options.firstDay;localeData._week=_week}localeData._fullCalendar_weekCalc=function(weekCalc){if(typeof weekCalc==="function"){return weekCalc}else if(weekCalc==="local"){return weekCalc}else if(weekCalc==="iso"||weekCalc==="ISO"){return"ISO"}}(options.weekNumberCalculation);t.defaultAllDayEventDuration=moment.duration(options.defaultAllDayEventDuration);t.defaultTimedEventDuration=moment.duration(options.defaultTimedEventDuration);t.moment=function(){var mom;if(options.timezone==="local"){mom=FC.moment.apply(null,arguments);if(mom.hasTime()){mom.local()}}else if(options.timezone==="UTC"){mom=FC.moment.utc.apply(null,arguments)}else{mom=FC.moment.parseZone.apply(null,arguments)}if("_locale"in mom){mom._locale=localeData}else{mom._lang=localeData}return mom};t.getIsAmbigTimezone=function(){return options.timezone!=="local"&&options.timezone!=="UTC"};t.applyTimezone=function(date){if(!date.hasTime()){return date.clone()}var zonedDate=t.moment(date.toArray());var timeAdjust=date.time()-zonedDate.time();var adjustedZonedDate;if(timeAdjust){adjustedZonedDate=zonedDate.clone().add(timeAdjust);if(date.time()-adjustedZonedDate.time()===0){zonedDate=adjustedZonedDate}}return zonedDate};t.getNow=function(){var now=options.now;if(typeof now==="function"){now=now()}return t.moment(now).stripZone()};t.getEventEnd=function(event){if(event.end){return event.end.clone()}else{return t.getDefaultEventEnd(event.allDay,event.start)}};t.getDefaultEventEnd=function(allDay,zonedStart){var end=zonedStart.clone();if(allDay){end.stripTime().add(t.defaultAllDayEventDuration)}else{end.add(t.defaultTimedEventDuration)}if(t.getIsAmbigTimezone()){end.stripZone()}return end};t.humanizeDuration=function(duration){return(duration.locale||duration.lang).call(duration,options.lang).humanize()};EventManager.call(t,options);var isFetchNeeded=t.isFetchNeeded;var fetchEvents=t.fetchEvents;var _element=element[0];var header;var headerElement;var content;var tm;var currentView;var viewsByType={};var suggestedViewHeight;var windowResizeProxy;var ignoreWindowResize=0;var events=[];var date;if(options.defaultDate!=null){date=t.moment(options.defaultDate).stripZone()}else{date=t.getNow()}function render(){if(!content){initialRender()}else if(elementVisible()){calcSize();renderView()}}function initialRender(){tm=options.theme?"ui":"fc";element.addClass("fc");element.addClass(t.isTouch?"fc-touch":"fc-cursor");if(options.isRTL){element.addClass("fc-rtl")}else{element.addClass("fc-ltr")}if(options.theme){element.addClass("ui-widget")}else{element.addClass("fc-unthemed")}content=$("<div class='fc-view-container'/>").prependTo(element);header=t.header=new Header(t,options);headerElement=header.render();if(headerElement){element.prepend(headerElement)}renderView(options.defaultView);if(options.handleWindowResize){windowResizeProxy=debounce(windowResize,options.windowResizeDelay);$(window).resize(windowResizeProxy)}}function destroy(){if(currentView){currentView.removeElement()}header.removeElement();content.remove();element.removeClass("fc fc-touch fc-cursor fc-ltr fc-rtl fc-unthemed ui-widget");if(windowResizeProxy){$(window).unbind("resize",windowResizeProxy)}}function elementVisible(){return element.is(":visible")}function renderView(viewType){ignoreWindowResize++;if(currentView&&viewType&&currentView.type!==viewType){header.deactivateButton(currentView.type);freezeContentHeight();currentView.removeElement();currentView=t.view=null}if(!currentView&&viewType){currentView=t.view=viewsByType[viewType]||(viewsByType[viewType]=t.instantiateView(viewType));currentView.setElement($("<div class='fc-view fc-"+viewType+"-view' />").appendTo(content));header.activateButton(viewType)}if(currentView){date=currentView.massageCurrentDate(date);if(!currentView.displaying||!date.isWithin(currentView.intervalStart,currentView.intervalEnd)){if(elementVisible()){currentView.display(date);unfreezeContentHeight();updateHeaderTitle();updateTodayButton();getAndRenderEvents()}}}unfreezeContentHeight();ignoreWindowResize--}t.getSuggestedViewHeight=function(){if(suggestedViewHeight===undefined){calcSize()}return suggestedViewHeight};t.isHeightAuto=function(){return options.contentHeight==="auto"||options.height==="auto"};function updateSize(shouldRecalc){if(elementVisible()){if(shouldRecalc){_calcSize()}ignoreWindowResize++;currentView.updateSize(true);ignoreWindowResize--;return true}}function calcSize(){if(elementVisible()){_calcSize()}}function _calcSize(){if(typeof options.contentHeight==="number"){suggestedViewHeight=options.contentHeight}else if(typeof options.height==="number"){suggestedViewHeight=options.height-(headerElement?headerElement.outerHeight(true):0)}else{suggestedViewHeight=Math.round(content.width()/Math.max(options.aspectRatio,.5))}}function windowResize(ev){if(!ignoreWindowResize&&ev.target===window&&currentView.start){if(updateSize(true)){currentView.trigger("windowResize",_element)}}}function refetchEvents(){destroyEvents();fetchAndRenderEvents()}function renderEvents(){if(elementVisible()){freezeContentHeight();currentView.displayEvents(events);unfreezeContentHeight()}}function destroyEvents(){freezeContentHeight();currentView.clearEvents();unfreezeContentHeight()}function getAndRenderEvents(){if(!options.lazyFetching||isFetchNeeded(currentView.start,currentView.end)){fetchAndRenderEvents()}else{renderEvents()}}function fetchAndRenderEvents(){fetchEvents(currentView.start,currentView.end)}function reportEvents(_events){events=_events;renderEvents()}function reportEventChange(){renderEvents()}function updateHeaderTitle(){header.updateTitle(currentView.title)}function updateTodayButton(){var now=t.getNow();if(now.isWithin(currentView.intervalStart,currentView.intervalEnd)){header.disableButton("today")}else{header.enableButton("today")}}function select(zonedStartInput,zonedEndInput){currentView.select(t.buildSelectSpan.apply(t,arguments))}function unselect(){if(currentView){currentView.unselect()}}function prev(){date=currentView.computePrevDate(date);renderView()}function next(){date=currentView.computeNextDate(date);renderView()}function prevYear(){date.add(-1,"years");renderView()}function nextYear(){date.add(1,"years");renderView()}function today(){date=t.getNow();renderView()}function gotoDate(zonedDateInput){date=t.moment(zonedDateInput).stripZone();renderView()}function incrementDate(delta){date.add(moment.duration(delta));renderView()}function zoomTo(newDate,viewType){var spec;viewType=viewType||"day";spec=t.getViewSpec(viewType)||t.getUnitViewSpec(viewType);date=newDate.clone();renderView(spec?spec.type:null)}function getDate(){return t.applyTimezone(date)}t.freezeContentHeight=freezeContentHeight;t.unfreezeContentHeight=unfreezeContentHeight;function freezeContentHeight(){content.css({width:"100%",height:content.height(),overflow:"hidden"})}function unfreezeContentHeight(){content.css({width:"",height:"",overflow:""})}function getCalendar(){return t}function getView(){return currentView}function option(name,value){if(value===undefined){return options[name]}if(name=="height"||name=="contentHeight"||name=="aspectRatio"){options[name]=value;updateSize(true)}}function trigger(name,thisObj){var args=Array.prototype.slice.call(arguments,2);thisObj=thisObj||_element;this.triggerWith(name,thisObj,args);if(options[name]){return options[name].apply(thisObj,args)}}t.initialize()}Calendar.defaults={titleRangeSeparator:" â ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:false,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:true,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:false,isRTL:false,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:false,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:true,unselectAuto:true,dropAccept:"*",eventOrder:"title",eventLimit:false,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:true,windowResizeDelay:200,longPressDelay:1e3};Calendar.englishDefaults={dayPopoverFormat:"dddd, MMMM D"};Calendar.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var langOptionHash=FC.langs={};FC.datepickerLang=function(langCode,dpLangCode,dpOptions){var fcOptions=langOptionHash[langCode]||(langOptionHash[langCode]={});fcOptions.isRTL=dpOptions.isRTL;fcOptions.weekNumberTitle=dpOptions.weekHeader;$.each(dpComputableOptions,function(name,func){fcOptions[name]=func(dpOptions)});if($.datepicker){$.datepicker.regional[dpLangCode]=$.datepicker.regional[langCode]=dpOptions;$.datepicker.regional.en=$.datepicker.regional[""];$.datepicker.setDefaults(dpOptions)}};FC.lang=function(langCode,newFcOptions){var fcOptions;var momOptions;fcOptions=langOptionHash[langCode]||(langOptionHash[langCode]={});if(newFcOptions){fcOptions=langOptionHash[langCode]=mergeOptions([fcOptions,newFcOptions])}momOptions=getMomentLocaleData(langCode);$.each(momComputableOptions,function(name,func){if(fcOptions[name]==null){fcOptions[name]=func(momOptions,fcOptions)}});Calendar.defaults.lang=langCode};var dpComputableOptions={buttonText:function(dpOptions){return{prev:stripHtmlEntities(dpOptions.prevText),next:stripHtmlEntities(dpOptions.nextText),today:stripHtmlEntities(dpOptions.currentText)}},monthYearFormat:function(dpOptions){return dpOptions.showMonthAfterYear?"YYYY["+dpOptions.yearSuffix+"] MMMM":"MMMM YYYY["+dpOptions.yearSuffix+"]"}};var momComputableOptions={dayOfMonthFormat:function(momOptions,fcOptions){var format=momOptions.longDateFormat("l");format=format.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");if(fcOptions.isRTL){format+=" ddd"}else{format="ddd "+format}return format},mediumTimeFormat:function(momOptions){return momOptions.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(momOptions){return momOptions.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(momOptions){return momOptions.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(momOptions){return momOptions.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(momOptions){return momOptions.longDateFormat("LT").replace(/\s*a$/i,"")}};var instanceComputableOptions={smallDayDateFormat:function(options){return options.isRTL?"D dd":"dd D"},weekFormat:function(options){return options.isRTL?"w[ "+options.weekNumberTitle+"]":"["+options.weekNumberTitle+" ]w"},smallWeekFormat:function(options){return options.isRTL?"w["+options.weekNumberTitle+"]":"["+options.weekNumberTitle+"]w"}};function populateInstanceComputableOptions(options){$.each(instanceComputableOptions,function(name,func){if(options[name]==null){options[name]=func(options)}})}function getMomentLocaleData(langCode){var func=moment.localeData||moment.langData;return func.call(moment,langCode)||func.call(moment,"en")}FC.lang("en",Calendar.englishDefaults);function Header(calendar,options){var t=this;t.render=render;t.removeElement=removeElement;t.updateTitle=updateTitle;t.activateButton=activateButton;t.deactivateButton=deactivateButton;t.disableButton=disableButton;t.enableButton=enableButton;t.getViewsWithButtons=getViewsWithButtons;var el=$();var viewsWithButtons=[];var tm;function render(){var sections=options.header;tm=options.theme?"ui":"fc";if(sections){el=$("<div class='fc-toolbar'/>").append(renderSection("left")).append(renderSection("right")).append(renderSection("center")).append('<div class="fc-clear"/>');return el}}function removeElement(){el.remove();el=$()}function renderSection(position){var sectionEl=$('<div class="fc-'+position+'"/>');var buttonStr=options.header[position];if(buttonStr){$.each(buttonStr.split(" "),function(i){var groupChildren=$();var isOnlyButtons=true;var groupEl;$.each(this.split(","),function(j,buttonName){var customButtonProps;var viewSpec;var buttonClick;var overrideText;var defaultText;var themeIcon;var normalIcon;var innerHtml;var classes;var button;if(buttonName=="title"){groupChildren=groupChildren.add($("<h2>&nbsp;</h2>"));isOnlyButtons=false}else{if(customButtonProps=(calendar.options.customButtons||{})[buttonName]){buttonClick=function(ev){if(customButtonProps.click){customButtonProps.click.call(button[0],ev)}};overrideText="";defaultText=customButtonProps.text}else if(viewSpec=calendar.getViewSpec(buttonName)){buttonClick=function(){calendar.changeView(buttonName)};viewsWithButtons.push(buttonName);overrideText=viewSpec.buttonTextOverride;defaultText=viewSpec.buttonTextDefault}else if(calendar[buttonName]){buttonClick=function(){calendar[buttonName]()};overrideText=(calendar.overrides.buttonText||{})[buttonName];defaultText=options.buttonText[buttonName]}if(buttonClick){themeIcon=customButtonProps?customButtonProps.themeIcon:options.themeButtonIcons[buttonName];normalIcon=customButtonProps?customButtonProps.icon:options.buttonIcons[buttonName];if(overrideText){innerHtml=htmlEscape(overrideText)}else if(themeIcon&&options.theme){innerHtml="<span class='ui-icon ui-icon-"+themeIcon+"'></span>"}else if(normalIcon&&!options.theme){innerHtml="<span class='fc-icon fc-icon-"+normalIcon+"'></span>"}else{innerHtml=htmlEscape(defaultText)}classes=["fc-"+buttonName+"-button",tm+"-button",tm+"-state-default"];button=$('<button type="button" class="'+classes.join(" ")+'">'+innerHtml+"</button>").click(function(ev){if(!button.hasClass(tm+"-state-disabled")){buttonClick(ev);if(button.hasClass(tm+"-state-active")||button.hasClass(tm+"-state-disabled")){button.removeClass(tm+"-state-hover")}}}).mousedown(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-down")}).mouseup(function(){button.removeClass(tm+"-state-down")}).hover(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-hover")},function(){button.removeClass(tm+"-state-hover").removeClass(tm+"-state-down")});groupChildren=groupChildren.add(button)}}});if(isOnlyButtons){groupChildren.first().addClass(tm+"-corner-left").end().last().addClass(tm+"-corner-right").end()}if(groupChildren.length>1){groupEl=$("<div/>");if(isOnlyButtons){groupEl.addClass("fc-button-group")}groupEl.append(groupChildren);sectionEl.append(groupEl)}else{sectionEl.append(groupChildren)}})}return sectionEl}function updateTitle(text){el.find("h2").text(text)}function activateButton(buttonName){el.find(".fc-"+buttonName+"-button").addClass(tm+"-state-active")}function deactivateButton(buttonName){el.find(".fc-"+buttonName+"-button").removeClass(tm+"-state-active")}function disableButton(buttonName){el.find(".fc-"+buttonName+"-button").attr("disabled","disabled").addClass(tm+"-state-disabled")}function enableButton(buttonName){el.find(".fc-"+buttonName+"-button").removeAttr("disabled").removeClass(tm+"-state-disabled")}function getViewsWithButtons(){return viewsWithButtons}}FC.sourceNormalizers=[];FC.sourceFetchers=[];var ajaxDefaults={dataType:"json",cache:false};var eventGUID=1;function EventManager(options){var t=this;t.isFetchNeeded=isFetchNeeded;t.fetchEvents=fetchEvents;t.addEventSource=addEventSource;t.removeEventSource=removeEventSource;t.updateEvent=updateEvent;t.renderEvent=renderEvent;t.removeEvents=removeEvents;t.clientEvents=clientEvents;t.mutateEvent=mutateEvent;t.normalizeEventDates=normalizeEventDates;t.normalizeEventTimes=normalizeEventTimes;var reportEvents=t.reportEvents;var stickySource={events:[]};var sources=[stickySource];var rangeStart,rangeEnd;var currentFetchID=0;var pendingSourceCnt=0;var cache=[];$.each((options.events?[options.events]:[]).concat(options.eventSources||[]),function(i,sourceInput){var source=buildEventSource(sourceInput);if(source){sources.push(source)}});function isFetchNeeded(start,end){return!rangeStart||start<rangeStart||end>rangeEnd}function fetchEvents(start,end){rangeStart=start;rangeEnd=end;cache=[];var fetchID=++currentFetchID;var len=sources.length;pendingSourceCnt=len;for(var i=0;i<len;i++){fetchEventSource(sources[i],fetchID)}}function fetchEventSource(source,fetchID){_fetchEventSource(source,function(eventInputs){var isArraySource=$.isArray(source.events);var i,eventInput;var abstractEvent;if(fetchID==currentFetchID){if(eventInputs){for(i=0;i<eventInputs.length;i++){eventInput=eventInputs[i];if(isArraySource){abstractEvent=eventInput}else{abstractEvent=buildEventFromInput(eventInput,source)}if(abstractEvent){cache.push.apply(cache,expandEvent(abstractEvent))}}}pendingSourceCnt--;if(!pendingSourceCnt){reportEvents(cache)}}})}function _fetchEventSource(source,callback){var i;var fetchers=FC.sourceFetchers;var res;for(i=0;i<fetchers.length;i++){res=fetchers[i].call(t,source,rangeStart.clone(),rangeEnd.clone(),options.timezone,callback);if(res===true){return}else if(typeof res=="object"){_fetchEventSource(res,callback);return}}var events=source.events;if(events){if($.isFunction(events)){t.pushLoading();events.call(t,rangeStart.clone(),rangeEnd.clone(),options.timezone,function(events){callback(events);t.popLoading()})}else if($.isArray(events)){callback(events)}else{callback()}}else{var url=source.url;if(url){var success=source.success;var error=source.error;var complete=source.complete;var customData;if($.isFunction(source.data)){customData=source.data()}else{customData=source.data}var data=$.extend({},customData||{});var startParam=firstDefined(source.startParam,options.startParam);var endParam=firstDefined(source.endParam,options.endParam);var timezoneParam=firstDefined(source.timezoneParam,options.timezoneParam);if(startParam){data[startParam]=rangeStart.format()}if(endParam){data[endParam]=rangeEnd.format()}if(options.timezone&&options.timezone!="local"){data[timezoneParam]=options.timezone}t.pushLoading();$.ajax($.extend({},ajaxDefaults,source,{data:data,success:function(events){events=events||[];var res=applyAll(success,this,arguments);if($.isArray(res)){events=res}callback(events)},error:function(){applyAll(error,this,arguments);callback()},complete:function(){applyAll(complete,this,arguments);t.popLoading()}}))}else{callback()}}}function addEventSource(sourceInput){var source=buildEventSource(sourceInput);if(source){sources.push(source);pendingSourceCnt++;fetchEventSource(source,currentFetchID)}}function buildEventSource(sourceInput){var normalizers=FC.sourceNormalizers;var source;var i;if($.isFunction(sourceInput)||$.isArray(sourceInput)){source={events:sourceInput}}else if(typeof sourceInput==="string"){source={url:sourceInput}}else if(typeof sourceInput==="object"){source=$.extend({},sourceInput)}if(source){if(source.className){if(typeof source.className==="string"){source.className=source.className.split(/\s+/)}}else{source.className=[]}if($.isArray(source.events)){source.origArray=source.events;source.events=$.map(source.events,function(eventInput){return buildEventFromInput(eventInput,source)})}for(i=0;i<normalizers.length;i++){normalizers[i].call(t,source)}return source}}function removeEventSource(source){sources=$.grep(sources,function(src){return!isSourcesEqual(src,source)});cache=$.grep(cache,function(e){return!isSourcesEqual(e.source,source)});reportEvents(cache)}function isSourcesEqual(source1,source2){return source1&&source2&&getSourcePrimitive(source1)==getSourcePrimitive(source2)}function getSourcePrimitive(source){return(typeof source==="object"?source.origArray||source.googleCalendarId||source.url||source.events:null)||source}function updateEvent(event){event.start=t.moment(event.start);if(event.end){event.end=t.moment(event.end)}else{event.end=null}mutateEvent(event,getMiscEventProps(event));reportEvents(cache)}function getMiscEventProps(event){var props={};$.each(event,function(name,val){if(isMiscEventPropName(name)){if(val!==undefined&&isAtomic(val)){props[name]=val}}});return props}function isMiscEventPropName(name){return!/^_|^(id|allDay|start|end)$/.test(name)}function renderEvent(eventInput,stick){var abstractEvent=buildEventFromInput(eventInput);var events;var i,event;if(abstractEvent){events=expandEvent(abstractEvent);for(i=0;i<events.length;i++){event=events[i];if(!event.source){if(stick){stickySource.events.push(event);event.source=stickySource}cache.push(event)}}reportEvents(cache);return events}return[]}function removeEvents(filter){var eventID;var i;if(filter==null){filter=function(){return true}}else if(!$.isFunction(filter)){eventID=filter+"";filter=function(event){return event._id==eventID}}cache=$.grep(cache,filter,true);for(i=0;i<sources.length;i++){if($.isArray(sources[i].events)){sources[i].events=$.grep(sources[i].events,filter,true)}}reportEvents(cache)}function clientEvents(filter){if($.isFunction(filter)){return $.grep(cache,filter)}else if(filter!=null){filter+="";return $.grep(cache,function(e){return e._id==filter})}return cache}function buildEventFromInput(input,source){var out={};var start,end;var allDay;if(options.eventDataTransform){input=options.eventDataTransform(input)}if(source&&source.eventDataTransform){input=source.eventDataTransform(input)}$.extend(out,input);if(source){out.source=source}out._id=input._id||(input.id===undefined?"_fc"+eventGUID++:input.id+"");if(input.className){if(typeof input.className=="string"){out.className=input.className.split(/\s+/)}else{out.className=input.className}}else{out.className=[]}start=input.start||input.date;end=input.end;if(isTimeString(start)){start=moment.duration(start)}if(isTimeString(end)){end=moment.duration(end)}if(input.dow||moment.isDuration(start)||moment.isDuration(end)){out.start=start?moment.duration(start):null;out.end=end?moment.duration(end):null;out._recurring=true}else{if(start){start=t.moment(start);if(!start.isValid()){return false}}if(end){end=t.moment(end);if(!end.isValid()){end=null}}allDay=input.allDay;if(allDay===undefined){allDay=firstDefined(source?source.allDayDefault:undefined,options.allDayDefault)}assignDatesToEvent(start,end,allDay,out)}return out}function assignDatesToEvent(start,end,allDay,event){event.start=start;event.end=end;event.allDay=allDay;normalizeEventDates(event);backupEventDates(event)}function normalizeEventDates(eventProps){normalizeEventTimes(eventProps);if(eventProps.end&&!eventProps.end.isAfter(eventProps.start)){eventProps.end=null}if(!eventProps.end){if(options.forceEventDuration){eventProps.end=t.getDefaultEventEnd(eventProps.allDay,eventProps.start)}else{eventProps.end=null}}}function normalizeEventTimes(eventProps){if(eventProps.allDay==null){eventProps.allDay=!(eventProps.start.hasTime()||eventProps.end&&eventProps.end.hasTime())}if(eventProps.allDay){eventProps.start.stripTime();if(eventProps.end){eventProps.end.stripTime()}}else{if(!eventProps.start.hasTime()){eventProps.start=t.applyTimezone(eventProps.start.time(0))}if(eventProps.end&&!eventProps.end.hasTime()){eventProps.end=t.applyTimezone(eventProps.end.time(0))}}}function expandEvent(abstractEvent,_rangeStart,_rangeEnd){var events=[];var dowHash;var dow;var i;var date;var startTime,endTime;var start,end;var event;_rangeStart=_rangeStart||rangeStart;_rangeEnd=_rangeEnd||rangeEnd;if(abstractEvent){if(abstractEvent._recurring){if(dow=abstractEvent.dow){dowHash={};for(i=0;i<dow.length;i++){dowHash[dow[i]]=true}}date=_rangeStart.clone().stripTime();while(date.isBefore(_rangeEnd)){if(!dowHash||dowHash[date.day()]){startTime=abstractEvent.start;endTime=abstractEvent.end;start=date.clone();end=null;if(startTime){start=start.time(startTime)}if(endTime){end=date.clone().time(endTime)}event=$.extend({},abstractEvent);assignDatesToEvent(start,end,!startTime&&!endTime,event);events.push(event)}date.add(1,"days")}}else{events.push(abstractEvent)}}return events}function mutateEvent(event,newProps,largeUnit){var miscProps={};var oldProps;var clearEnd;var startDelta;var endDelta;var durationDelta;var undoFunc;function diffDates(date1,date0){if(largeUnit){return diffByUnit(date1,date0,largeUnit)}else if(newProps.allDay){return diffDay(date1,date0)}else{return diffDayTime(date1,date0)}}newProps=newProps||{};if(!newProps.start){newProps.start=event.start.clone()}if(newProps.end===undefined){newProps.end=event.end?event.end.clone():null}if(newProps.allDay==null){newProps.allDay=event.allDay}normalizeEventDates(newProps);oldProps={start:event._start.clone(),end:event._end?event._end.clone():t.getDefaultEventEnd(event._allDay,event._start),allDay:newProps.allDay};normalizeEventDates(oldProps);clearEnd=event._end!==null&&newProps.end===null;startDelta=diffDates(newProps.start,oldProps.start);if(newProps.end){endDelta=diffDates(newProps.end,oldProps.end);durationDelta=endDelta.subtract(startDelta)}else{durationDelta=null}$.each(newProps,function(name,val){if(isMiscEventPropName(name)){if(val!==undefined){miscProps[name]=val}}});undoFunc=mutateEvents(clientEvents(event._id),clearEnd,newProps.allDay,startDelta,durationDelta,miscProps);return{dateDelta:startDelta,durationDelta:durationDelta,undo:undoFunc}}function mutateEvents(events,clearEnd,allDay,dateDelta,durationDelta,miscProps){var isAmbigTimezone=t.getIsAmbigTimezone();var undoFunctions=[];if(dateDelta&&!dateDelta.valueOf()){dateDelta=null}if(durationDelta&&!durationDelta.valueOf()){durationDelta=null}$.each(events,function(i,event){var oldProps;var newProps;oldProps={start:event.start.clone(),end:event.end?event.end.clone():null,allDay:event.allDay};$.each(miscProps,function(name){oldProps[name]=event[name]});newProps={start:event._start,end:event._end,allDay:allDay};normalizeEventDates(newProps);if(clearEnd){newProps.end=null}else if(durationDelta&&!newProps.end){newProps.end=t.getDefaultEventEnd(newProps.allDay,newProps.start)}if(dateDelta){newProps.start.add(dateDelta);if(newProps.end){newProps.end.add(dateDelta)}}if(durationDelta){newProps.end.add(durationDelta)}if(isAmbigTimezone&&!newProps.allDay&&(dateDelta||durationDelta)){newProps.start.stripZone();if(newProps.end){newProps.end.stripZone()}}$.extend(event,miscProps,newProps);backupEventDates(event);undoFunctions.push(function(){$.extend(event,oldProps);backupEventDates(event)})});return function(){for(var i=0;i<undoFunctions.length;i++){undoFunctions[i]()}}}t.getBusinessHoursEvents=getBusinessHoursEvents;function getBusinessHoursEvents(wholeDay){var optionVal=options.businessHours;var defaultVal={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};var view=t.getView();var eventInput;if(optionVal){eventInput=$.extend({},defaultVal,typeof optionVal==="object"?optionVal:{})}if(eventInput){if(wholeDay){eventInput.start=null;eventInput.end=null}return expandEvent(buildEventFromInput(eventInput),view.start,view.end)}return[]}t.isEventSpanAllowed=isEventSpanAllowed;t.isExternalSpanAllowed=isExternalSpanAllowed;t.isSelectionSpanAllowed=isSelectionSpanAllowed;function isEventSpanAllowed(span,event){var source=event.source||{};var constraint=firstDefined(event.constraint,source.constraint,options.eventConstraint);var overlap=firstDefined(event.overlap,source.overlap,options.eventOverlap);return isSpanAllowed(span,constraint,overlap,event)}function isExternalSpanAllowed(eventSpan,eventLocation,eventProps){var eventInput;var event;if(eventProps){eventInput=$.extend({},eventProps,eventLocation);event=expandEvent(buildEventFromInput(eventInput))[0]}if(event){return isEventSpanAllowed(eventSpan,event)}else{return isSelectionSpanAllowed(eventSpan)}}function isSelectionSpanAllowed(span){return isSpanAllowed(span,options.selectConstraint,options.selectOverlap)}function isSpanAllowed(span,constraint,overlap,event){var constraintEvents;var anyContainment;var peerEvents;var i,peerEvent;var peerOverlap;if(constraint!=null){constraintEvents=constraintToEvents(constraint);anyContainment=false;for(i=0;i<constraintEvents.length;i++){if(eventContainsRange(constraintEvents[i],span)){anyContainment=true;break}}if(!anyContainment){return false}}peerEvents=t.getPeerEvents(span,event);for(i=0;i<peerEvents.length;i++){peerEvent=peerEvents[i];if(eventIntersectsRange(peerEvent,span)){if(overlap===false){return false}else if(typeof overlap==="function"&&!overlap(peerEvent,event)){return false}if(event){peerOverlap=firstDefined(peerEvent.overlap,(peerEvent.source||{}).overlap);if(peerOverlap===false){return false}if(typeof peerOverlap==="function"&&!peerOverlap(event,peerEvent)){return false}}}}return true}function constraintToEvents(constraintInput){if(constraintInput==="businessHours"){return getBusinessHoursEvents()}if(typeof constraintInput==="object"){return expandEvent(buildEventFromInput(constraintInput))}return clientEvents(constraintInput)}function eventContainsRange(event,range){var eventStart=event.start.clone().stripZone();var eventEnd=t.getEventEnd(event).stripZone();return range.start>=eventStart&&range.end<=eventEnd}function eventIntersectsRange(event,range){var eventStart=event.start.clone().stripZone();var eventEnd=t.getEventEnd(event).stripZone();return range.start<eventEnd&&range.end>eventStart}t.getEventCache=function(){return cache}}Calendar.prototype.getPeerEvents=function(span,event){var cache=this.getEventCache();var peerEvents=[];var i,otherEvent;for(i=0;i<cache.length;i++){otherEvent=cache[i];if(!event||event._id!==otherEvent._id){peerEvents.push(otherEvent)}}return peerEvents};function backupEventDates(event){event._allDay=event.allDay;event._start=event.start.clone();event._end=event.end?event.end.clone():null}var BasicView=FC.BasicView=View.extend({scroller:null,dayGridClass:DayGrid,dayGrid:null,dayNumbersVisible:false,weekNumbersVisible:false,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid();this.scroller=new Scroller({overflowX:"hidden",overflowY:"auto"})},instantiateDayGrid:function(){var subclass=this.dayGridClass.extend(basicDayGridMethods);return new subclass(this)},setRange:function(range){View.prototype.setRange.call(this,range);this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit);this.dayGrid.setRange(range)},computeRange:function(date){var range=View.prototype.computeRange.call(this,date);if(/year|month/.test(range.intervalUnit)){range.start.startOf("week");range.start=this.skipHiddenDays(range.start);if(range.end.weekday()){range.end.add(1,"week").startOf("week");range.end=this.skipHiddenDays(range.end,-1,true)}}return range},renderDates:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml());this.renderHead();this.scroller.render();var dayGridContainerEl=this.scroller.el.addClass("fc-day-grid-container");var dayGridEl=$('<div class="fc-day-grid" />').appendTo(dayGridContainerEl);this.el.find(".fc-body > tr > td").append(dayGridContainerEl);this.dayGrid.setElement(dayGridEl);this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml());this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates();
this.dayGrid.removeElement();this.scroller.destroy()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderSkeletonHtml:function(){return""+"<table>"+'<thead class="fc-head">'+"<tr>"+'<td class="fc-head-container '+this.widgetHeaderClass+'"></td>'+"</tr>"+"</thead>"+'<tbody class="fc-body">'+"<tr>"+'<td class="'+this.widgetContentClass+'"></td>'+"</tr>"+"</tbody>"+"</table>"},weekNumberStyleAttr:function(){if(this.weekNumberWidth!==null){return'style="width:'+this.weekNumberWidth+'px"'}return""},hasRigidRows:function(){var eventLimit=this.opt("eventLimit");return eventLimit&&typeof eventLimit!=="number"},updateWidth:function(){if(this.weekNumbersVisible){this.weekNumberWidth=matchCellWidths(this.el.find(".fc-week-number"))}},setHeight:function(totalHeight,isAuto){var eventLimit=this.opt("eventLimit");var scrollerHeight;var scrollbarWidths;this.scroller.clear();uncompensateScroll(this.headRowEl);this.dayGrid.removeSegPopover();if(eventLimit&&typeof eventLimit==="number"){this.dayGrid.limitRows(eventLimit)}scrollerHeight=this.computeScrollerHeight(totalHeight);this.setGridHeight(scrollerHeight,isAuto);if(eventLimit&&typeof eventLimit!=="number"){this.dayGrid.limitRows(eventLimit)}if(!isAuto){this.scroller.setHeight(scrollerHeight);scrollbarWidths=this.scroller.getScrollbarWidths();if(scrollbarWidths.left||scrollbarWidths.right){compensateScroll(this.headRowEl,scrollbarWidths);scrollerHeight=this.computeScrollerHeight(totalHeight);this.scroller.setHeight(scrollerHeight)}this.scroller.lockOverflow(scrollbarWidths)}},computeScrollerHeight:function(totalHeight){return totalHeight-subtractInnerElHeight(this.el,this.scroller.el)},setGridHeight:function(height,isAuto){if(isAuto){undistributeHeight(this.dayGrid.rowEls)}else{distributeHeight(this.dayGrid.rowEls,height,true)}},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(top){this.scroller.setScrollTop(top)},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(left,top){return this.dayGrid.queryHit(left,top)},getHitSpan:function(hit){return this.dayGrid.getHitSpan(hit)},getHitEl:function(hit){return this.dayGrid.getHitEl(hit)},renderEvents:function(events){this.dayGrid.renderEvents(events);this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(dropLocation,seg){return this.dayGrid.renderDrag(dropLocation,seg)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(span){this.dayGrid.renderSelection(span)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}});var basicDayGridMethods={renderHeadIntroHtml:function(){var view=this.view;if(view.weekNumbersVisible){return""+'<th class="fc-week-number '+view.widgetHeaderClass+'" '+view.weekNumberStyleAttr()+">"+"<span>"+htmlEscape(view.opt("weekNumberTitle"))+"</span>"+"</th>"}return""},renderNumberIntroHtml:function(row){var view=this.view;if(view.weekNumbersVisible){return""+'<td class="fc-week-number" '+view.weekNumberStyleAttr()+">"+"<span>"+this.getCellDate(row,0).format("w")+"</span>"+"</td>"}return""},renderBgIntroHtml:function(){var view=this.view;if(view.weekNumbersVisible){return'<td class="fc-week-number '+view.widgetContentClass+'" '+view.weekNumberStyleAttr()+"></td>"}return""},renderIntroHtml:function(){var view=this.view;if(view.weekNumbersVisible){return'<td class="fc-week-number" '+view.weekNumberStyleAttr()+"></td>"}return""}};var MonthView=FC.MonthView=BasicView.extend({computeRange:function(date){var range=BasicView.prototype.computeRange.call(this,date);var rowCnt;if(this.isFixedWeeks()){rowCnt=Math.ceil(range.end.diff(range.start,"weeks",true));range.end.add(6-rowCnt,"weeks")}return range},setGridHeight:function(height,isAuto){isAuto=isAuto||this.opt("weekMode")==="variable";if(isAuto){height*=this.rowCnt/6}distributeHeight(this.dayGrid.rowEls,height,!isAuto)},isFixedWeeks:function(){var weekMode=this.opt("weekMode");if(weekMode){return weekMode==="fixed"}return this.opt("fixedWeekCount")}});fcViews.basic={class:BasicView};fcViews.basicDay={type:"basic",duration:{days:1}};fcViews.basicWeek={type:"basic",duration:{weeks:1}};fcViews.month={class:MonthView,duration:{months:1},defaults:{fixedWeekCount:true}};var AgendaView=FC.AgendaView=View.extend({scroller:null,timeGridClass:TimeGrid,timeGrid:null,dayGridClass:DayGrid,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid();if(this.opt("allDaySlot")){this.dayGrid=this.instantiateDayGrid()}this.scroller=new Scroller({overflowX:"hidden",overflowY:"auto"})},instantiateTimeGrid:function(){var subclass=this.timeGridClass.extend(agendaTimeGridMethods);return new subclass(this)},instantiateDayGrid:function(){var subclass=this.dayGridClass.extend(agendaDayGridMethods);return new subclass(this)},setRange:function(range){View.prototype.setRange.call(this,range);this.timeGrid.setRange(range);if(this.dayGrid){this.dayGrid.setRange(range)}},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml());this.renderHead();this.scroller.render();var timeGridWrapEl=this.scroller.el.addClass("fc-time-grid-container");var timeGridEl=$('<div class="fc-time-grid" />').appendTo(timeGridWrapEl);this.el.find(".fc-body > tr > td").append(timeGridWrapEl);this.timeGrid.setElement(timeGridEl);this.timeGrid.renderDates();this.bottomRuleEl=$('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);if(this.dayGrid){this.dayGrid.setElement(this.el.find(".fc-day-grid"));this.dayGrid.renderDates();this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()}this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates();this.timeGrid.removeElement();if(this.dayGrid){this.dayGrid.unrenderDates();this.dayGrid.removeElement()}this.scroller.destroy()},renderSkeletonHtml:function(){return""+"<table>"+'<thead class="fc-head">'+"<tr>"+'<td class="fc-head-container '+this.widgetHeaderClass+'"></td>'+"</tr>"+"</thead>"+'<tbody class="fc-body">'+"<tr>"+'<td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/>'+'<hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+"</td>"+"</tr>"+"</tbody>"+"</table>"},axisStyleAttr:function(){if(this.axisWidth!==null){return'style="width:'+this.axisWidth+'px"'}return""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours();if(this.dayGrid){this.dayGrid.renderBusinessHours()}},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours();if(this.dayGrid){this.dayGrid.unrenderBusinessHours()}},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(date){this.timeGrid.renderNowIndicator(date)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(isResize){this.timeGrid.updateSize(isResize);View.prototype.updateSize.call(this,isResize)},updateWidth:function(){this.axisWidth=matchCellWidths(this.el.find(".fc-axis"))},setHeight:function(totalHeight,isAuto){var eventLimit;var scrollerHeight;var scrollbarWidths;this.bottomRuleEl.hide();this.scroller.clear();uncompensateScroll(this.noScrollRowEls);if(this.dayGrid){this.dayGrid.removeSegPopover();eventLimit=this.opt("eventLimit");if(eventLimit&&typeof eventLimit!=="number"){eventLimit=AGENDA_ALL_DAY_EVENT_LIMIT}if(eventLimit){this.dayGrid.limitRows(eventLimit)}}if(!isAuto){scrollerHeight=this.computeScrollerHeight(totalHeight);this.scroller.setHeight(scrollerHeight);scrollbarWidths=this.scroller.getScrollbarWidths();if(scrollbarWidths.left||scrollbarWidths.right){compensateScroll(this.noScrollRowEls,scrollbarWidths);scrollerHeight=this.computeScrollerHeight(totalHeight);this.scroller.setHeight(scrollerHeight)}this.scroller.lockOverflow(scrollbarWidths);if(this.timeGrid.getTotalSlatHeight()<scrollerHeight){this.bottomRuleEl.show()}}},computeScrollerHeight:function(totalHeight){return totalHeight-subtractInnerElHeight(this.el,this.scroller.el)},computeInitialScroll:function(){var scrollTime=moment.duration(this.opt("scrollTime"));var top=this.timeGrid.computeTimeTop(scrollTime);top=Math.ceil(top);if(top){top++}return top},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(top){this.scroller.setScrollTop(top)},prepareHits:function(){this.timeGrid.prepareHits();if(this.dayGrid){this.dayGrid.prepareHits()}},releaseHits:function(){this.timeGrid.releaseHits();if(this.dayGrid){this.dayGrid.releaseHits()}},queryHit:function(left,top){var hit=this.timeGrid.queryHit(left,top);if(!hit&&this.dayGrid){hit=this.dayGrid.queryHit(left,top)}return hit},getHitSpan:function(hit){return hit.component.getHitSpan(hit)},getHitEl:function(hit){return hit.component.getHitEl(hit)},renderEvents:function(events){var dayEvents=[];var timedEvents=[];var daySegs=[];var timedSegs;var i;for(i=0;i<events.length;i++){if(events[i].allDay){dayEvents.push(events[i])}else{timedEvents.push(events[i])}}timedSegs=this.timeGrid.renderEvents(timedEvents);if(this.dayGrid){daySegs=this.dayGrid.renderEvents(dayEvents)}this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents();if(this.dayGrid){this.dayGrid.unrenderEvents()}},renderDrag:function(dropLocation,seg){if(dropLocation.start.hasTime()){return this.timeGrid.renderDrag(dropLocation,seg)}else if(this.dayGrid){return this.dayGrid.renderDrag(dropLocation,seg)}},unrenderDrag:function(){this.timeGrid.unrenderDrag();if(this.dayGrid){this.dayGrid.unrenderDrag()}},renderSelection:function(span){if(span.start.hasTime()||span.end.hasTime()){this.timeGrid.renderSelection(span)}else if(this.dayGrid){this.dayGrid.renderSelection(span)}},unrenderSelection:function(){this.timeGrid.unrenderSelection();if(this.dayGrid){this.dayGrid.unrenderSelection()}}});var agendaTimeGridMethods={renderHeadIntroHtml:function(){var view=this.view;var weekText;if(view.opt("weekNumbers")){weekText=this.start.format(view.opt("smallWeekFormat"));return""+'<th class="fc-axis fc-week-number '+view.widgetHeaderClass+'" '+view.axisStyleAttr()+">"+"<span>"+htmlEscape(weekText)+"</span>"+"</th>"}else{return'<th class="fc-axis '+view.widgetHeaderClass+'" '+view.axisStyleAttr()+"></th>"}},renderBgIntroHtml:function(){var view=this.view;return'<td class="fc-axis '+view.widgetContentClass+'" '+view.axisStyleAttr()+"></td>"},renderIntroHtml:function(){var view=this.view;return'<td class="fc-axis" '+view.axisStyleAttr()+"></td>"}};var agendaDayGridMethods={renderBgIntroHtml:function(){var view=this.view;return""+'<td class="fc-axis '+view.widgetContentClass+'" '+view.axisStyleAttr()+">"+"<span>"+(view.opt("allDayHtml")||htmlEscape(view.opt("allDayText")))+"</span>"+"</td>"},renderIntroHtml:function(){var view=this.view;return'<td class="fc-axis" '+view.axisStyleAttr()+"></td>"}};var AGENDA_ALL_DAY_EVENT_LIMIT=5;var AGENDA_STOCK_SUB_DURATIONS=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];fcViews.agenda={class:AgendaView,defaults:{allDaySlot:true,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:true}};fcViews.agendaDay={type:"agenda",duration:{days:1}};fcViews.agendaWeek={type:"agenda",duration:{weeks:1}};return FC});(function(global){var hoverintent=function(el,over,out){var x,y,pX,pY;var h={},state=0,timer=0;var options={sensitivity:7,interval:100,timeout:0};var defaults=function(opt){options=merge(opt||{},options)};var merge=function(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i];for(var n in def){if(obj[n]===undefined)obj[n]=def[n]}}return obj};var addEvent=function(object,event,method){if(object.attachEvent){object["e"+event+method]=method;object[event+method]=function(){object["e"+event+method](window.event)};object.attachEvent("on"+event,object[event+method])}else{object.addEventListener(event,method,false)}};var removeEvent=function(object,event,method){if(object.detachEvent){object.detachEvent("on"+event,object[event+method]);object[event+method]=null}else{object.removeEventListener(event,method,false)}};var track=function(e){x=e.clientX;y=e.clientY};var delay=function(el,outEvent,e){if(timer)timer=clearTimeout(timer);state=0;return outEvent.call(el,e)};var dispatch=function(e,event,over){var tracker=function(){track(e)};if(timer)timer=clearTimeout(timer);if(over){pX=e.clientX;pY=e.clientY;addEvent(el,"mousemove",tracker);if(state!==1){timer=setTimeout(function(){compare(el,event,e)},options.interval)}}else{removeEvent(el,"mousemove",tracker);if(state===1){timer=setTimeout(function(){delay(el,event,e)},options.timeout)}}return this};var compare=function(el,overEvent,e){if(timer)timer=clearTimeout(timer);if(Math.abs(pX-x)+Math.abs(pY-y)<options.sensitivity){state=1;return overEvent.call(el,e)}else{pX=x;pY=y;timer=setTimeout(function(){compare(el,overEvent,e)},options.interval)}};h.options=function(opt){defaults(opt)};var dispatchOver=function(e){dispatch(e,over,true)};var dispatchOut=function(e){dispatch(e,out)};h.remove=function(){if(!el)return;removeEvent(el,"mouseover",dispatchOver);removeEvent(el,"mouseout",dispatchOut)};if(el){addEvent(el,"mouseover",dispatchOver);addEvent(el,"mouseout",dispatchOut)}defaults();return h};global.hoverintent=hoverintent;if(typeof module!=="undefined"&&module.exports)module.exports=hoverintent})(this);(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else if(typeof exports==="object"){factory(require("jquery"))}else{factory(jQuery)}})(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{s=decodeURIComponent(s.replace(pluses," "));return config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var config=$.cookie=function(key,value,options){if(value!==undefined&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date;t.setTime(+t+days*864e5)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}var result=key?undefined:{};var cookies=document.cookie?document.cookie.split("; "):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("=");var name=decode(parts.shift());var cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie}}return result};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined){return false}$.cookie(key,"",$.extend({},options,{expires:-1}));return!$.cookie(key)}});(function($,undef){if($.fn.dotdotdot){return}$.fn.dotdotdot=function(o){if(this.length==0){$.fn.dotdotdot.debug('No element found for "'+this.selector+'".');return this}if(this.length>1){return this.each(function(){$(this).dotdotdot(o)})}var $dot=this;if($dot.data("dotdotdot")){$dot.trigger("destroy.dot")}$dot.data("dotdotdot-style",$dot.attr("style")||"");$dot.css("word-wrap","break-word");if($dot.css("white-space")==="nowrap"){$dot.css("white-space","normal")}$dot.bind_events=function(){$dot.bind("update.dot",function(e,c){$dot.removeClass("is-truncated");e.preventDefault();e.stopPropagation();switch(typeof opts.height){case"number":opts.maxHeight=opts.height;break;case"function":opts.maxHeight=opts.height.call($dot[0]);break;default:opts.maxHeight=getTrueInnerHeight($dot);break}opts.maxHeight+=opts.tolerance;if(typeof c!="undefined"){if(typeof c=="string"||"nodeType"in c&&c.nodeType===1){c=$("<div />").append(c).contents()}if(c instanceof $){orgContent=c}}$inr=$dot.wrapInner('<div class="dotdotdot" />').children();$inr.contents().detach().end().append(orgContent.clone(true)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var after=false,trunc=false;if(conf.afterElement){after=conf.afterElement.clone(true);after.show();conf.afterElement.detach()}if(test($inr,opts)){if(opts.wrap=="children"){trunc=children($inr,opts,after)}else{trunc=ellipsis($inr,$dot,$inr,opts,after)}}$inr.replaceWith($inr.contents());$inr=null;if($.isFunction(opts.callback)){opts.callback.call($dot[0],trunc,orgContent)}conf.isTruncated=trunc;return trunc}).bind("isTruncated.dot",function(e,fn){e.preventDefault();e.stopPropagation();if(typeof fn=="function"){fn.call($dot[0],conf.isTruncated)}return conf.isTruncated}).bind("originalContent.dot",function(e,fn){e.preventDefault();e.stopPropagation();if(typeof fn=="function"){fn.call($dot[0],orgContent)}return orgContent}).bind("destroy.dot",function(e){e.preventDefault();e.stopPropagation();$dot.unwatch().unbind_events().contents().detach().end().append(orgContent).attr("style",$dot.data("dotdotdot-style")||"").data("dotdotdot",false)});return $dot};$dot.unbind_events=function(){$dot.unbind(".dot");return $dot};$dot.watch=function(){$dot.unwatch();if(opts.watch=="window"){var $window=$(window),_wWidth=$window.width(),_wHeight=$window.height();$window.bind("resize.dot"+conf.dotId,function(){if(_wWidth!=$window.width()||_wHeight!=$window.height()||!opts.windowResizeFix){_wWidth=$window.width();_wHeight=$window.height();if(watchInt){clearInterval(watchInt)}watchInt=setTimeout(function(){$dot.trigger("update.dot")},100)}})}else{watchOrg=getSizes($dot);watchInt=setInterval(function(){if($dot.is(":visible")){var watchNew=getSizes($dot);if(watchOrg.width!=watchNew.width||watchOrg.height!=watchNew.height){$dot.trigger("update.dot");watchOrg=watchNew}}},500)}return $dot};$dot.unwatch=function(){$(window).unbind("resize.dot"+conf.dotId);if(watchInt){clearInterval(watchInt)}return $dot};var orgContent=$dot.contents(),opts=$.extend(true,{},$.fn.dotdotdot.defaults,o),conf={},watchOrg={},watchInt=null,$inr=null;if(!(opts.lastCharacter.remove instanceof Array)){opts.lastCharacter.remove=$.fn.dotdotdot.defaultArrays.lastCharacter.remove}if(!(opts.lastCharacter.noEllipsis instanceof Array)){opts.lastCharacter.noEllipsis=$.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis}conf.afterElement=getElement(opts.after,$dot);conf.isTruncated=false;conf.dotId=dotId++;$dot.data("dotdotdot",true).bind_events().trigger("update.dot");if(opts.watch){$dot.watch()}return $dot};$.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:true,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:false,windowResizeFix:true};$.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","ã",",",";",".","!","?"],noEllipsis:[]}};$.fn.dotdotdot.debug=function(msg){};var dotId=1;function children($elem,o,after){var $elements=$elem.children(),isTruncated=false;$elem.empty();for(var a=0,l=$elements.length;a<l;a++){var $e=$elements.eq(a);$elem.append($e);if(after){$elem.append(after)}if(test($elem,o)){$e.remove();isTruncated=true;break}else{if(after){after.detach()}}}return isTruncated}function ellipsis($elem,$d,$i,o,after){var isTruncated=false;var notx="a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style";var noty="script, .dotdotdot-keep";$elem.contents().detach().each(function(){var e=this,$e=$(e);if(typeof e=="undefined"){return true}else if($e.is(noty)){$elem.append($e)}else if(isTruncated){return true}else{$elem.append($e);if(after&&!$e.is(o.after)&&!$e.find(o.after).length){$elem[$elem.is(notx)?"after":"append"](after)}if(test($i,o)){if(e.nodeType==3){isTruncated=ellipsisElement($e,$d,$i,o,after)}else{isTruncated=ellipsis($e,$d,$i,o,after)}}if(!isTruncated){if(after){after.detach()}}}});$d.addClass("is-truncated");return isTruncated}function ellipsisElement($e,$d,$i,o,after){var e=$e[0];if(!e){return false}var txt=getTextContent(e),space=txt.indexOf(" ")!==-1?" ":"ã",separator=o.wrap=="letter"?"":space,textArr=txt.split(separator),position=-1,midPos=-1,startPos=0,endPos=textArr.length-1;if(o.fallbackToLetter&&startPos==0&&endPos==0){separator="";textArr=txt.split(separator);endPos=textArr.length-1}while(startPos<=endPos&&!(startPos==0&&endPos==0)){var m=Math.floor((startPos+endPos)/2);if(m==midPos){break}midPos=m;setTextContent(e,textArr.slice(0,midPos+1).join(separator)+o.ellipsis);$i.children().each(function(){$(this).toggle().toggle()});if(!test($i,o)){position=midPos;startPos=midPos}else{endPos=midPos;if(o.fallbackToLetter&&startPos==0&&endPos==0){separator="";textArr=textArr[0].split(separator);position=-1;midPos=-1;startPos=0;endPos=textArr.length-1}}}if(position!=-1&&!(textArr.length==1&&textArr[0].length==0)){txt=addEllipsis(textArr.slice(0,position+1).join(separator),o);setTextContent(e,txt)}else{var $w=$e.parent();$e.detach();var afterLength=after&&after.closest($w).length?after.length:0;if($w.contents().length>afterLength){e=findLastTextNode($w.contents().eq(-1-afterLength),$d)}else{e=findLastTextNode($w,$d,true);if(!afterLength){$w.detach()}}if(e){txt=addEllipsis(getTextContent(e),o);setTextContent(e,txt);if(afterLength&&after){$(e).parent().append(after)}}}return true}function test($i,o){return $i.innerHeight()>o.maxHeight}function addEllipsis(txt,o){while($.inArray(txt.slice(-1),o.lastCharacter.remove)>-1){txt=txt.slice(0,-1)}if($.inArray(txt.slice(-1),o.lastCharacter.noEllipsis)<0){txt+=o.ellipsis}return txt}function getSizes($d){return{width:$d.innerWidth(),height:$d.innerHeight()}}function setTextContent(e,content){if(e.innerText){e.innerText=content}else if(e.nodeValue){e.nodeValue=content}else if(e.textContent){e.textContent=content}}function getTextContent(e){if(e.innerText){return e.innerText}else if(e.nodeValue){return e.nodeValue}else if(e.textContent){return e.textContent}else{return""}}function getPrevNode(n){do{n=n.previousSibling}while(n&&n.nodeType!==1&&n.nodeType!==3);return n}function findLastTextNode($el,$top,excludeCurrent){var e=$el&&$el[0],p;if(e){if(!excludeCurrent){if(e.nodeType===3){return e}if($.trim($el.text())){return findLastTextNode($el.contents().last(),$top)}}p=getPrevNode(e);while(!p){$el=$el.parent();if($el.is($top)||!$el.length){return false}p=getPrevNode($el[0])}if(p){return findLastTextNode($(p),$top)}}return false}function getElement(e,$i){if(!e){return false}if(typeof e==="string"){e=$(e,$i);return e.length?e:false}return!e.jquery?false:e}function getTrueInnerHeight($el){var h=$el.innerHeight(),a=["paddingTop","paddingBottom"];for(var z=0,l=a.length;z<l;z++){var m=parseInt($el.css(a[z]),10);if(isNaN(m)){m=0}h-=m}return h}var _orgHtml=$.fn.html;$.fn.html=function(str){if(str!=undef&&!$.isFunction(str)&&this.data("dotdotdot")){return this.trigger("update",[str])}return _orgHtml.apply(this,arguments)};var _orgText=$.fn.text;$.fn.text=function(str){if(str!=undef&&!$.isFunction(str)&&this.data("dotdotdot")){str=$("<div />").text(str).html();return this.trigger("update",[str])}return _orgText.apply(this,arguments)}})(jQuery);(function(window,document,undefined){(function(factory){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else if(jQuery&&!jQuery.fn.qtip){factory(jQuery)}})(function($){"use strict";var TRUE=true,FALSE=false,NULL=null,X="x",Y="y",WIDTH="width",HEIGHT="height",TOP="top",LEFT="left",BOTTOM="bottom",RIGHT="right",CENTER="center",FLIP="flip",FLIPINVERT="flipinvert",SHIFT="shift",QTIP,PROTOTYPE,CORNER,CHECKS,PLUGINS={},NAMESPACE="qtip",ATTR_HAS="data-hasqtip",ATTR_ID="data-qtip-id",WIDGET=["ui-widget","ui-tooltip"],SELECTOR="."+NAMESPACE,INACTIVE_EVENTS="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),CLASS_FIXED=NAMESPACE+"-fixed",CLASS_DEFAULT=NAMESPACE+"-default",CLASS_FOCUS=NAMESPACE+"-focus",CLASS_HOVER=NAMESPACE+"-hover",CLASS_DISABLED=NAMESPACE+"-disabled",replaceSuffix="_replacedByqTip",oldtitle="oldtitle",trackingBound,BROWSER={ie:function(){var v,i;for(v=4,i=document.createElement("div");(i.innerHTML="<!--[if gt IE "+v+"]><i></i><![endif]-->")&&i.getElementsByTagName("i")[0];v+=1){}return v>4?v:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||FALSE};function QTip(target,options,id,attr){this.id=id;this.target=target;this.tooltip=NULL;this.elements={target:target};this._id=NAMESPACE+"-"+id;this.timers={img:{}};this.options=options;this.plugins={};this.cache={event:{},target:$(),disabled:FALSE,attr:attr,onTooltip:FALSE,lastClass:""};this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=FALSE}PROTOTYPE=QTip.prototype;PROTOTYPE._when=function(deferreds){return $.when.apply($,deferreds)};PROTOTYPE.render=function(show){if(this.rendered||this.destroyed){return this}var self=this,options=this.options,cache=this.cache,elements=this.elements,text=options.content.text,title=options.content.title,button=options.content.button,posOptions=options.position,deferreds=[];$.attr(this.target[0],"aria-describedby",this._id);cache.posClass=this._createPosClass((this.position={my:posOptions.my,at:posOptions.at}).my);this.tooltip=elements.tooltip=$("<div/>",{id:this._id,class:[NAMESPACE,CLASS_DEFAULT,options.style.classes,cache.posClass].join(" "),width:options.style.width||"",height:options.style.height||"",tracking:posOptions.target==="mouse"&&posOptions.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":FALSE,"aria-describedby":this._id+"-content","aria-hidden":TRUE}).toggleClass(CLASS_DISABLED,this.disabled).attr(ATTR_ID,this.id).data(NAMESPACE,this).appendTo(posOptions.container).append(elements.content=$("<div />",{class:NAMESPACE+"-content",id:this._id+"-content","aria-atomic":TRUE}));this.rendered=-1;this.positioning=TRUE;if(title){this._createTitle();if(!$.isFunction(title)){deferreds.push(this._updateTitle(title,FALSE))}}if(button){this._createButton()}if(!$.isFunction(text)){deferreds.push(this._updateContent(text,FALSE))}this.rendered=TRUE;this._setWidget();$.each(PLUGINS,function(name){var instance;if(this.initialize==="render"&&(instance=this(self))){self.plugins[name]=instance}});this._unassignEvents();this._assignEvents();this._when(deferreds).then(function(){self._trigger("render");self.positioning=FALSE;if(!self.hiddenDuringWait&&(options.show.ready||show)){self.toggle(TRUE,cache.event,FALSE)}self.hiddenDuringWait=FALSE});QTIP.api[this.id]=this;return this};PROTOTYPE.destroy=function(immediate){if(this.destroyed){return this.target}function process(){if(this.destroyed){return}this.destroyed=TRUE;var target=this.target,title=target.attr(oldtitle),timer;if(this.rendered){this.tooltip.stop(1,0).find("*").remove().end().remove()}$.each(this.plugins,function(){this.destroy&&this.destroy()});for(timer in this.timers){if(this.timers.hasOwnProperty(timer)){clearTimeout(this.timers[timer])}}target.removeData(NAMESPACE).removeAttr(ATTR_ID).removeAttr(ATTR_HAS).removeAttr("aria-describedby");if(this.options.suppress&&title){target.attr("title",title).removeAttr(oldtitle)}this._unassignEvents();this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=NULL;delete QTIP.api[this.id]}if((immediate!==TRUE||this.triggering==="hide")&&this.rendered){this.tooltip.one("tooltiphidden",$.proxy(process,this));!this.triggering&&this.hide()}else{process.call(this)}return this.target};function invalidOpt(a){return a===NULL||$.type(a)!=="object"}function invalidContent(c){return!($.isFunction(c)||c&&c.attr)||c.length||$.type(c)==="object"&&(c.jquery||c.then)}function sanitizeOptions(opts){var content,text,ajax,once;if(invalidOpt(opts)){return FALSE}if(invalidOpt(opts.metadata)){opts.metadata={type:opts.metadata}}if("content"in opts){content=opts.content;if(invalidOpt(content)||content.jquery||content.done){text=invalidContent(content)?FALSE:content;content=opts.content={text:text}}else{text=content.text}if("ajax"in content){ajax=content.ajax;once=ajax&&ajax.once!==FALSE;delete content.ajax;content.text=function(event,api){var loading=text||$(this).attr(api.options.content.attr)||"Loading...",deferred=$.ajax($.extend({},ajax,{context:api})).then(ajax.success,NULL,ajax.error).then(function(newContent){if(newContent&&once){api.set("content.text",newContent)}return newContent},function(xhr,status,error){if(api.destroyed||xhr.status===0){return}api.set("content.text",status+": "+error)});return!once?(api.set("content.text",loading),deferred):loading}}if("title"in content){if($.isPlainObject(content.title)){content.button=content.title.button;content.title=content.title.text}if(invalidContent(content.title||FALSE)){content.title=FALSE}}}if("position"in opts&&invalidOpt(opts.position)){opts.position={my:opts.position,at:opts.position}}if("show"in opts&&invalidOpt(opts.show)){opts.show=opts.show.jquery?{target:opts.show}:opts.show===TRUE?{ready:TRUE}:{event:opts.show}}if("hide"in opts&&invalidOpt(opts.hide)){opts.hide=opts.hide.jquery?{target:opts.hide}:{event:opts.hide}}if("style"in opts&&invalidOpt(opts.style)){opts.style={classes:opts.style}}$.each(PLUGINS,function(){this.sanitize&&this.sanitize(opts)});return opts}CHECKS=PROTOTYPE.checks={builtin:{"^id$":function(obj,o,v,prev){var id=v===TRUE?QTIP.nextid:v,newId=NAMESPACE+"-"+id;if(id!==FALSE&&id.length>0&&!$("#"+newId).length){this._id=newId;if(this.rendered){this.tooltip[0].id=this._id;this.elements.content[0].id=this._id+"-content";this.elements.title[0].id=this._id+"-title"}}else{obj[o]=prev}},"^prerender":function(obj,o,v){v&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(obj,o,v){this._updateContent(v)},"^content.attr$":function(obj,o,v,prev){if(this.options.content.text===this.target.attr(prev)){this._updateContent(this.target.attr(v))}},"^content.title$":function(obj,o,v){if(!v){return this._removeTitle()}v&&!this.elements.title&&this._createTitle();this._updateTitle(v)},"^content.button$":function(obj,o,v){this._updateButton(v)},"^content.title.(text|button)$":function(obj,o,v){this.set("content."+o,v)},"^position.(my|at)$":function(obj,o,v){if("string"===typeof v){this.position[o]=obj[o]=new CORNER(v,o==="at")}},"^position.container$":function(obj,o,v){this.rendered&&this.tooltip.appendTo(v)},"^show.ready$":function(obj,o,v){v&&(!this.rendered&&this.render(TRUE)||this.toggle(TRUE))},"^style.classes$":function(obj,o,v,p){this.rendered&&this.tooltip.removeClass(p).addClass(v)},"^style.(width|height)":function(obj,o,v){this.rendered&&this.tooltip.css(o,v)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(obj,o,v){this.rendered&&this.tooltip.toggleClass(CLASS_DEFAULT,!!v)},"^events.(render|show|move|hide|focus|blur)$":function(obj,o,v){this.rendered&&this.tooltip[($.isFunction(v)?"":"un")+"bind"]("tooltip"+o,v)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(!this.rendered){return}var posOptions=this.options.position;this.tooltip.attr("tracking",posOptions.target==="mouse"&&posOptions.adjust.mouse);this._unassignEvents();this._assignEvents()}}};function convertNotation(options,notation){var i=0,obj,option=options,levels=notation.split(".");while(option=option[levels[i++]]){if(i<levels.length){obj=option}}return[obj||options,levels.pop()]}PROTOTYPE.get=function(notation){
if(this.destroyed){return this}var o=convertNotation(this.options,notation.toLowerCase()),result=o[0][o[1]];return result.precedance?result.string():result};function setCallback(notation,args){var category,rule,match;for(category in this.checks){if(!this.checks.hasOwnProperty(category)){continue}for(rule in this.checks[category]){if(!this.checks[category].hasOwnProperty(rule)){continue}if(match=new RegExp(rule,"i").exec(notation)){args.push(match);if(category==="builtin"||this.plugins[category]){this.checks[category][rule].apply(this.plugins[category]||this,args)}}}}}var rmove=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,rrender=/^prerender|show\.ready/i;PROTOTYPE.set=function(option,value){if(this.destroyed){return this}var rendered=this.rendered,reposition=FALSE,options=this.options,name;if("string"===typeof option){name=option;option={};option[name]=value}else{option=$.extend({},option)}$.each(option,function(notation,val){if(rendered&&rrender.test(notation)){delete option[notation];return}var obj=convertNotation(options,notation.toLowerCase()),previous;previous=obj[0][obj[1]];obj[0][obj[1]]=val&&val.nodeType?$(val):val;reposition=rmove.test(notation)||reposition;option[notation]=[obj[0],obj[1],val,previous]});sanitizeOptions(options);this.positioning=TRUE;$.each(option,$.proxy(setCallback,this));this.positioning=FALSE;if(this.rendered&&this.tooltip[0].offsetWidth>0&&reposition){this.reposition(options.position.target==="mouse"?NULL:this.cache.event)}return this};PROTOTYPE._update=function(content,element){var self=this,cache=this.cache;if(!this.rendered||!content){return FALSE}if($.isFunction(content)){content=content.call(this.elements.target,cache.event,this)||""}if($.isFunction(content.then)){cache.waiting=TRUE;return content.then(function(c){cache.waiting=FALSE;return self._update(c,element)},NULL,function(e){return self._update(e,element)})}if(content===FALSE||!content&&content!==""){return FALSE}if(content.jquery&&content.length>0){element.empty().append(content.css({display:"block",visibility:"visible"}))}else{element.html(content)}return this._waitForContent(element).then(function(images){if(self.rendered&&self.tooltip[0].offsetWidth>0){self.reposition(cache.event,!images.length)}})};PROTOTYPE._waitForContent=function(element){var cache=this.cache;cache.waiting=TRUE;return($.fn.imagesLoaded?element.imagesLoaded():(new $.Deferred).resolve([])).done(function(){cache.waiting=FALSE}).promise()};PROTOTYPE._updateContent=function(content,reposition){this._update(content,this.elements.content,reposition)};PROTOTYPE._updateTitle=function(content,reposition){if(this._update(content,this.elements.title,reposition)===FALSE){this._removeTitle(FALSE)}};PROTOTYPE._createTitle=function(){var elements=this.elements,id=this._id+"-title";if(elements.titlebar){this._removeTitle()}elements.titlebar=$("<div />",{class:NAMESPACE+"-titlebar "+(this.options.style.widget?createWidgetClass("header"):"")}).append(elements.title=$("<div />",{id:id,class:NAMESPACE+"-title","aria-atomic":TRUE})).insertBefore(elements.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(event){$(this).toggleClass("ui-state-active ui-state-focus",event.type.substr(-4)==="down")}).delegate(".qtip-close","mouseover mouseout",function(event){$(this).toggleClass("ui-state-hover",event.type==="mouseover")});if(this.options.content.button){this._createButton()}};PROTOTYPE._removeTitle=function(reposition){var elements=this.elements;if(elements.title){elements.titlebar.remove();elements.titlebar=elements.title=elements.button=NULL;if(reposition!==FALSE){this.reposition()}}};PROTOTYPE._createPosClass=function(my){return NAMESPACE+"-pos-"+(my||this.options.position.my).abbrev()};PROTOTYPE.reposition=function(event,effect){if(!this.rendered||this.positioning||this.destroyed){return this}this.positioning=TRUE;var cache=this.cache,tooltip=this.tooltip,posOptions=this.options.position,target=posOptions.target,my=posOptions.my,at=posOptions.at,viewport=posOptions.viewport,container=posOptions.container,adjust=posOptions.adjust,method=adjust.method.split(" "),tooltipWidth=tooltip.outerWidth(FALSE),tooltipHeight=tooltip.outerHeight(FALSE),targetWidth=0,targetHeight=0,type=tooltip.css("position"),position={left:0,top:0},visible=tooltip[0].offsetWidth>0,isScroll=event&&event.type==="scroll",win=$(window),doc=container[0].ownerDocument,mouse=this.mouse,pluginCalculations,offset,adjusted,newClass;if($.isArray(target)&&target.length===2){at={x:LEFT,y:TOP};position={left:target[0],top:target[1]}}else if(target==="mouse"){at={x:LEFT,y:TOP};if((!adjust.mouse||this.options.hide.distance)&&cache.origin&&cache.origin.pageX){event=cache.origin}else if(!event||event&&(event.type==="resize"||event.type==="scroll")){event=cache.event}else if(mouse&&mouse.pageX){event=mouse}if(type!=="static"){position=container.offset()}if(doc.body.offsetWidth!==(window.innerWidth||doc.documentElement.clientWidth)){offset=$(document.body).offset()}position={left:event.pageX-position.left+(offset&&offset.left||0),top:event.pageY-position.top+(offset&&offset.top||0)};if(adjust.mouse&&isScroll&&mouse){position.left-=(mouse.scrollX||0)-win.scrollLeft();position.top-=(mouse.scrollY||0)-win.scrollTop()}}else{if(target==="event"){if(event&&event.target&&event.type!=="scroll"&&event.type!=="resize"){cache.target=$(event.target)}else if(!event.target){cache.target=this.elements.target}}else if(target!=="event"){cache.target=$(target.jquery?target:this.elements.target)}target=cache.target;target=$(target).eq(0);if(target.length===0){return this}else if(target[0]===document||target[0]===window){targetWidth=BROWSER.iOS?window.innerWidth:target.width();targetHeight=BROWSER.iOS?window.innerHeight:target.height();if(target[0]===window){position={top:(viewport||target).scrollTop(),left:(viewport||target).scrollLeft()}}}else if(PLUGINS.imagemap&&target.is("area")){pluginCalculations=PLUGINS.imagemap(this,target,at,PLUGINS.viewport?method:FALSE)}else if(PLUGINS.svg&&target&&target[0].ownerSVGElement){pluginCalculations=PLUGINS.svg(this,target,at,PLUGINS.viewport?method:FALSE)}else{targetWidth=target.outerWidth(FALSE);targetHeight=target.outerHeight(FALSE);position=target.offset()}if(pluginCalculations){targetWidth=pluginCalculations.width;targetHeight=pluginCalculations.height;offset=pluginCalculations.offset;position=pluginCalculations.position}position=this.reposition.offset(target,position,container);if(BROWSER.iOS>3.1&&BROWSER.iOS<4.1||BROWSER.iOS>=4.3&&BROWSER.iOS<4.33||!BROWSER.iOS&&type==="fixed"){position.left-=win.scrollLeft();position.top-=win.scrollTop()}if(!pluginCalculations||pluginCalculations&&pluginCalculations.adjustable!==FALSE){position.left+=at.x===RIGHT?targetWidth:at.x===CENTER?targetWidth/2:0;position.top+=at.y===BOTTOM?targetHeight:at.y===CENTER?targetHeight/2:0}}position.left+=adjust.x+(my.x===RIGHT?-tooltipWidth:my.x===CENTER?-tooltipWidth/2:0);position.top+=adjust.y+(my.y===BOTTOM?-tooltipHeight:my.y===CENTER?-tooltipHeight/2:0);if(PLUGINS.viewport){adjusted=position.adjusted=PLUGINS.viewport(this,position,posOptions,targetWidth,targetHeight,tooltipWidth,tooltipHeight);if(offset&&adjusted.left){position.left+=offset.left}if(offset&&adjusted.top){position.top+=offset.top}if(adjusted.my){this.position.my=adjusted.my}}else{position.adjusted={left:0,top:0}}if(cache.posClass!==(newClass=this._createPosClass(this.position.my))){cache.posClass=newClass;tooltip.removeClass(cache.posClass).addClass(newClass)}if(!this._trigger("move",[position,viewport.elem||viewport],event)){return this}delete position.adjusted;if(effect===FALSE||!visible||isNaN(position.left)||isNaN(position.top)||target==="mouse"||!$.isFunction(posOptions.effect)){tooltip.css(position)}else if($.isFunction(posOptions.effect)){posOptions.effect.call(tooltip,this,$.extend({},position));tooltip.queue(function(next){$(this).css({opacity:"",height:""});if(BROWSER.ie){this.style.removeAttribute("filter")}next()})}this.positioning=FALSE;return this};PROTOTYPE.reposition.offset=function(elem,pos,container){if(!container[0]){return pos}var ownerDocument=$(elem[0].ownerDocument),quirks=!!BROWSER.ie&&document.compatMode!=="CSS1Compat",parent=container[0],scrolled,position,parentOffset,overflow;function scroll(e,i){pos.left+=i*e.scrollLeft();pos.top+=i*e.scrollTop()}do{if((position=$.css(parent,"position"))!=="static"){if(position==="fixed"){parentOffset=parent.getBoundingClientRect();scroll(ownerDocument,-1)}else{parentOffset=$(parent).position();parentOffset.left+=parseFloat($.css(parent,"borderLeftWidth"))||0;parentOffset.top+=parseFloat($.css(parent,"borderTopWidth"))||0}pos.left-=parentOffset.left+(parseFloat($.css(parent,"marginLeft"))||0);pos.top-=parentOffset.top+(parseFloat($.css(parent,"marginTop"))||0);if(!scrolled&&(overflow=$.css(parent,"overflow"))!=="hidden"&&overflow!=="visible"){scrolled=$(parent)}}}while(parent=parent.offsetParent);if(scrolled&&(scrolled[0]!==ownerDocument[0]||quirks)){scroll(scrolled,1)}return pos};var C=(CORNER=PROTOTYPE.reposition.Corner=function(corner,forceY){corner=(""+corner).replace(/([A-Z])/," $1").replace(/middle/gi,CENTER).toLowerCase();this.x=(corner.match(/left|right/i)||corner.match(/center/)||["inherit"])[0].toLowerCase();this.y=(corner.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();this.forceY=!!forceY;var f=corner.charAt(0);this.precedance=f==="t"||f==="b"?Y:X}).prototype;C.invert=function(z,center){this[z]=this[z]===LEFT?RIGHT:this[z]===RIGHT?LEFT:center||this[z]};C.string=function(join){var x=this.x,y=this.y;var result=x!==y?x==="center"||y!=="center"&&(this.precedance===Y||this.forceY)?[y,x]:[x,y]:[x];return join!==false?result.join(" "):result};C.abbrev=function(){var result=this.string(false);return result[0].charAt(0)+(result[1]&&result[1].charAt(0)||"")};C.clone=function(){return new CORNER(this.string(),this.forceY)};PROTOTYPE.toggle=function(state,event){var cache=this.cache,options=this.options,tooltip=this.tooltip;if(event){if(/over|enter/.test(event.type)&&cache.event&&/out|leave/.test(cache.event.type)&&options.show.target.add(event.target).length===options.show.target.length&&tooltip.has(event.relatedTarget).length){return this}cache.event=$.event.fix(event)}this.waiting&&!state&&(this.hiddenDuringWait=TRUE);if(!this.rendered){return state?this.render(1):this}else if(this.destroyed||this.disabled){return this}var type=state?"show":"hide",opts=this.options[type],posOptions=this.options.position,contentOptions=this.options.content,width=this.tooltip.css("width"),visible=this.tooltip.is(":visible"),animate=state||opts.target.length===1,sameTarget=!event||opts.target.length<2||cache.target[0]===event.target,identicalState,allow,after;if((typeof state).search("boolean|number")){state=!visible}identicalState=!tooltip.is(":animated")&&visible===state&&sameTarget;allow=!identicalState?!!this._trigger(type,[90]):NULL;if(this.destroyed){return this}if(allow!==FALSE&&state){this.focus(event)}if(!allow||identicalState){return this}$.attr(tooltip[0],"aria-hidden",!!!state);if(state){this.mouse&&(cache.origin=$.event.fix(this.mouse));if($.isFunction(contentOptions.text)){this._updateContent(contentOptions.text,FALSE)}if($.isFunction(contentOptions.title)){this._updateTitle(contentOptions.title,FALSE)}if(!trackingBound&&posOptions.target==="mouse"&&posOptions.adjust.mouse){$(document).bind("mousemove."+NAMESPACE,this._storeMouse);trackingBound=TRUE}if(!width){tooltip.css("width",tooltip.outerWidth(FALSE))}this.reposition(event,arguments[2]);if(!width){tooltip.css("width","")}if(!!opts.solo){(typeof opts.solo==="string"?$(opts.solo):$(SELECTOR,opts.solo)).not(tooltip).not(opts.target).qtip("hide",new $.Event("tooltipsolo"))}}else{clearTimeout(this.timers.show);delete cache.origin;if(trackingBound&&!$(SELECTOR+'[tracking="true"]:visible',opts.solo).not(tooltip).length){$(document).unbind("mousemove."+NAMESPACE);trackingBound=FALSE}this.blur(event)}after=$.proxy(function(){if(state){if(BROWSER.ie){tooltip[0].style.removeAttribute("filter")}tooltip.css("overflow","");if("string"===typeof opts.autofocus){$(this.options.show.autofocus,tooltip).focus()}this.options.show.target.trigger("qtip-"+this.id+"-inactive")}else{tooltip.css({display:"",visibility:"",opacity:"",left:"",top:""})}this._trigger(state?"visible":"hidden")},this);if(opts.effect===FALSE||animate===FALSE){tooltip[type]();after()}else if($.isFunction(opts.effect)){tooltip.stop(1,1);opts.effect.call(tooltip,this);tooltip.queue("fx",function(n){after();n()})}else{tooltip.fadeTo(90,state?1:0,after)}if(state){opts.target.trigger("qtip-"+this.id+"-inactive")}return this};PROTOTYPE.show=function(event){return this.toggle(TRUE,event)};PROTOTYPE.hide=function(event){return this.toggle(FALSE,event)};PROTOTYPE.focus=function(event){if(!this.rendered||this.destroyed){return this}var qtips=$(SELECTOR),tooltip=this.tooltip,curIndex=parseInt(tooltip[0].style.zIndex,10),newIndex=QTIP.zindex+qtips.length;if(!tooltip.hasClass(CLASS_FOCUS)){if(this._trigger("focus",[newIndex],event)){if(curIndex!==newIndex){qtips.each(function(){if(this.style.zIndex>curIndex){this.style.zIndex=this.style.zIndex-1}});qtips.filter("."+CLASS_FOCUS).qtip("blur",event)}tooltip.addClass(CLASS_FOCUS)[0].style.zIndex=newIndex}}return this};PROTOTYPE.blur=function(event){if(!this.rendered||this.destroyed){return this}this.tooltip.removeClass(CLASS_FOCUS);this._trigger("blur",[this.tooltip.css("zIndex")],event);return this};PROTOTYPE.disable=function(state){if(this.destroyed){return this}if(state==="toggle"){state=!(this.rendered?this.tooltip.hasClass(CLASS_DISABLED):this.disabled)}else if("boolean"!==typeof state){state=TRUE}if(this.rendered){this.tooltip.toggleClass(CLASS_DISABLED,state).attr("aria-disabled",state)}this.disabled=!!state;return this};PROTOTYPE.enable=function(){return this.disable(FALSE)};PROTOTYPE._createButton=function(){var self=this,elements=this.elements,tooltip=elements.tooltip,button=this.options.content.button,isString=typeof button==="string",close=isString?button:"Close tooltip";if(elements.button){elements.button.remove()}if(button.jquery){elements.button=button}else{elements.button=$("<a />",{class:"qtip-close "+(this.options.style.widget?"":NAMESPACE+"-icon"),title:close,"aria-label":close}).prepend($("<span />",{class:"ui-icon ui-icon-close",html:"&times;"}))}elements.button.appendTo(elements.titlebar||tooltip).attr("role","button").click(function(event){if(!tooltip.hasClass(CLASS_DISABLED)){self.hide(event)}return FALSE})};PROTOTYPE._updateButton=function(button){if(!this.rendered){return FALSE}var elem=this.elements.button;if(button){this._createButton()}else{elem.remove()}};function createWidgetClass(cls){return WIDGET.concat("").join(cls?"-"+cls+" ":" ")}PROTOTYPE._setWidget=function(){var on=this.options.style.widget,elements=this.elements,tooltip=elements.tooltip,disabled=tooltip.hasClass(CLASS_DISABLED);tooltip.removeClass(CLASS_DISABLED);CLASS_DISABLED=on?"ui-state-disabled":"qtip-disabled";tooltip.toggleClass(CLASS_DISABLED,disabled);tooltip.toggleClass("ui-helper-reset "+createWidgetClass(),on).toggleClass(CLASS_DEFAULT,this.options.style.def&&!on);if(elements.content){elements.content.toggleClass(createWidgetClass("content"),on)}if(elements.titlebar){elements.titlebar.toggleClass(createWidgetClass("header"),on)}if(elements.button){elements.button.toggleClass(NAMESPACE+"-icon",!on)}};function delay(callback,duration){if(duration>0){return setTimeout($.proxy(callback,this),duration)}else{callback.call(this)}}function showMethod(event){if(this.tooltip.hasClass(CLASS_DISABLED)){return}clearTimeout(this.timers.show);clearTimeout(this.timers.hide);this.timers.show=delay.call(this,function(){this.toggle(TRUE,event)},this.options.show.delay)}function hideMethod(event){if(this.tooltip.hasClass(CLASS_DISABLED)||this.destroyed){return}var relatedTarget=$(event.relatedTarget),ontoTooltip=relatedTarget.closest(SELECTOR)[0]===this.tooltip[0],ontoTarget=relatedTarget[0]===this.options.show.target[0];clearTimeout(this.timers.show);clearTimeout(this.timers.hide);if(this!==relatedTarget[0]&&(this.options.position.target==="mouse"&&ontoTooltip)||this.options.hide.fixed&&(/mouse(out|leave|move)/.test(event.type)&&(ontoTooltip||ontoTarget))){try{event.preventDefault();event.stopImmediatePropagation()}catch(e){}return}this.timers.hide=delay.call(this,function(){this.toggle(FALSE,event)},this.options.hide.delay,this)}function inactiveMethod(event){if(this.tooltip.hasClass(CLASS_DISABLED)||!this.options.hide.inactive){return}clearTimeout(this.timers.inactive);this.timers.inactive=delay.call(this,function(){this.hide(event)},this.options.hide.inactive)}function repositionMethod(event){if(this.rendered&&this.tooltip[0].offsetWidth>0){this.reposition(event)}}PROTOTYPE._storeMouse=function(event){(this.mouse=$.event.fix(event)).type="mousemove";return this};PROTOTYPE._bind=function(targets,events,method,suffix,context){if(!targets||!method||!events.length){return}var ns="."+this._id+(suffix?"-"+suffix:"");$(targets).bind((events.split?events:events.join(ns+" "))+ns,$.proxy(method,context||this));return this};PROTOTYPE._unbind=function(targets,suffix){targets&&$(targets).unbind("."+this._id+(suffix?"-"+suffix:""));return this};function delegate(selector,events,method){$(document.body).delegate(selector,(events.split?events:events.join("."+NAMESPACE+" "))+"."+NAMESPACE,function(){var api=QTIP.api[$.attr(this,ATTR_ID)];api&&!api.disabled&&method.apply(api,arguments)})}PROTOTYPE._trigger=function(type,args,event){var callback=new $.Event("tooltip"+type);callback.originalEvent=event&&$.extend({},event)||this.cache.event||NULL;this.triggering=type;this.tooltip.trigger(callback,[this].concat(args||[]));this.triggering=FALSE;return!callback.isDefaultPrevented()};PROTOTYPE._bindEvents=function(showEvents,hideEvents,showTargets,hideTargets,showCallback,hideCallback){var similarTargets=showTargets.filter(hideTargets).add(hideTargets.filter(showTargets)),toggleEvents=[];if(similarTargets.length){$.each(hideEvents,function(i,type){var showIndex=$.inArray(type,showEvents);showIndex>-1&&toggleEvents.push(showEvents.splice(showIndex,1)[0])});if(toggleEvents.length){this._bind(similarTargets,toggleEvents,function(event){var state=this.rendered?this.tooltip[0].offsetWidth>0:false;(state?hideCallback:showCallback).call(this,event)});showTargets=showTargets.not(similarTargets);hideTargets=hideTargets.not(similarTargets)}}this._bind(showTargets,showEvents,showCallback);this._bind(hideTargets,hideEvents,hideCallback)};PROTOTYPE._assignInitialEvents=function(event){var options=this.options,showTarget=options.show.target,hideTarget=options.hide.target,showEvents=options.show.event?$.trim(""+options.show.event).split(" "):[],hideEvents=options.hide.event?$.trim(""+options.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(true)},"destroy");if(/mouse(over|enter)/i.test(options.show.event)&&!/mouse(out|leave)/i.test(options.hide.event)){hideEvents.push("mouseleave")}this._bind(showTarget,"mousemove",function(moveEvent){this._storeMouse(moveEvent);this.cache.onTarget=TRUE});function hoverIntent(hoverEvent){if(this.disabled||this.destroyed){return FALSE}this.cache.event=hoverEvent&&$.event.fix(hoverEvent);this.cache.target=hoverEvent&&$(hoverEvent.target);clearTimeout(this.timers.show);this.timers.show=delay.call(this,function(){this.render(typeof hoverEvent==="object"||options.show.ready)},options.prerender?0:options.show.delay)}this._bindEvents(showEvents,hideEvents,showTarget,hideTarget,hoverIntent,function(){if(!this.timers){return FALSE}clearTimeout(this.timers.show)});if(options.show.ready||options.prerender){hoverIntent.call(this,event)}};PROTOTYPE._assignEvents=function(){var self=this,options=this.options,posOptions=options.position,tooltip=this.tooltip,showTarget=options.show.target,hideTarget=options.hide.target,containerTarget=posOptions.container,viewportTarget=posOptions.viewport,documentTarget=$(document),windowTarget=$(window),showEvents=options.show.event?$.trim(""+options.show.event).split(" "):[],hideEvents=options.hide.event?$.trim(""+options.hide.event).split(" "):[];$.each(options.events,function(name,callback){self._bind(tooltip,name==="toggle"?["tooltipshow","tooltiphide"]:["tooltip"+name],callback,null,tooltip)});if(/mouse(out|leave)/i.test(options.hide.event)&&options.hide.leave==="window"){this._bind(documentTarget,["mouseout","blur"],function(event){if(!/select|option/.test(event.target.nodeName)&&!event.relatedTarget){this.hide(event)}})}if(options.hide.fixed){hideTarget=hideTarget.add(tooltip.addClass(CLASS_FIXED))}else if(/mouse(over|enter)/i.test(options.show.event)){this._bind(hideTarget,"mouseleave",function(){clearTimeout(this.timers.show)})}if((""+options.hide.event).indexOf("unfocus")>-1){this._bind(containerTarget.closest("html"),["mousedown","touchstart"],function(event){var elem=$(event.target),enabled=this.rendered&&!this.tooltip.hasClass(CLASS_DISABLED)&&this.tooltip[0].offsetWidth>0,isAncestor=elem.parents(SELECTOR).filter(this.tooltip[0]).length>0;if(elem[0]!==this.target[0]&&elem[0]!==this.tooltip[0]&&!isAncestor&&!this.target.has(elem[0]).length&&enabled){this.hide(event)}})}if("number"===typeof options.hide.inactive){this._bind(showTarget,"qtip-"+this.id+"-inactive",inactiveMethod,"inactive");this._bind(hideTarget.add(tooltip),QTIP.inactiveEvents,inactiveMethod)}this._bindEvents(showEvents,hideEvents,showTarget,hideTarget,showMethod,hideMethod);this._bind(showTarget.add(tooltip),"mousemove",function(event){if("number"===typeof options.hide.distance){var origin=this.cache.origin||{},limit=this.options.hide.distance,abs=Math.abs;if(abs(event.pageX-origin.pageX)>=limit||abs(event.pageY-origin.pageY)>=limit){this.hide(event)}}this._storeMouse(event)});if(posOptions.target==="mouse"){if(posOptions.adjust.mouse){if(options.hide.event){this._bind(showTarget,["mouseenter","mouseleave"],function(event){if(!this.cache){return FALSE}this.cache.onTarget=event.type==="mouseenter"})}this._bind(documentTarget,"mousemove",function(event){if(this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(CLASS_DISABLED)&&this.tooltip[0].offsetWidth>0){this.reposition(event)}})}}if(posOptions.adjust.resize||viewportTarget.length){this._bind($.event.special.resize?viewportTarget:windowTarget,"resize",repositionMethod)}if(posOptions.adjust.scroll){this._bind(windowTarget.add(posOptions.container),"scroll",repositionMethod)}};PROTOTYPE._unassignEvents=function(){var options=this.options,showTargets=options.show.target,hideTargets=options.hide.target,targets=$.grep([this.elements.target[0],this.rendered&&this.tooltip[0],options.position.container[0],options.position.viewport[0],options.position.container.closest("html")[0],window,document],function(i){return typeof i==="object"});if(showTargets&&showTargets.toArray){targets=targets.concat(showTargets.toArray())}if(hideTargets&&hideTargets.toArray){targets=targets.concat(hideTargets.toArray())}this._unbind(targets)._unbind(targets,"destroy")._unbind(targets,"inactive")};$(function(){delegate(SELECTOR,["mouseenter","mouseleave"],function(event){var state=event.type==="mouseenter",tooltip=$(event.currentTarget),target=$(event.relatedTarget||event.target),options=this.options;if(state){this.focus(event);tooltip.hasClass(CLASS_FIXED)&&!tooltip.hasClass(CLASS_DISABLED)&&clearTimeout(this.timers.hide)}else{if(options.position.target==="mouse"&&options.position.adjust.mouse&&options.hide.event&&options.show.target&&!target.closest(options.show.target[0]).length){this.hide(event)}}tooltip.toggleClass(CLASS_HOVER,state)});delegate("["+ATTR_ID+"]",INACTIVE_EVENTS,inactiveMethod)});function init(elem,id,opts){var obj,posOptions,attr,config,title,docBody=$(document.body),newTarget=elem[0]===document?docBody:elem,metadata=elem.metadata?elem.metadata(opts.metadata):NULL,metadata5=opts.metadata.type==="html5"&&metadata?metadata[opts.metadata.name]:NULL,html5=elem.data(opts.metadata.name||"qtipopts");try{html5=typeof html5==="string"?$.parseJSON(html5):html5}catch(e){}config=$.extend(TRUE,{},QTIP.defaults,opts,typeof html5==="object"?sanitizeOptions(html5):NULL,sanitizeOptions(metadata5||metadata));posOptions=config.position;config.id=id;if("boolean"===typeof config.content.text){attr=elem.attr(config.content.attr);if(config.content.attr!==FALSE&&attr){config.content.text=attr}else{return FALSE}}if(!posOptions.container.length){posOptions.container=docBody}if(posOptions.target===FALSE){posOptions.target=newTarget}if(config.show.target===FALSE){config.show.target=newTarget}if(config.show.solo===TRUE){config.show.solo=posOptions.container.closest("body")}if(config.hide.target===FALSE){config.hide.target=newTarget}if(config.position.viewport===TRUE){config.position.viewport=posOptions.container}posOptions.container=posOptions.container.eq(0);posOptions.at=new CORNER(posOptions.at,TRUE);posOptions.my=new CORNER(posOptions.my);if(elem.data(NAMESPACE)){if(config.overwrite){elem.qtip("destroy",true)}else if(config.overwrite===FALSE){return FALSE}}elem.attr(ATTR_HAS,id);if(config.suppress&&(title=elem.attr("title"))){elem.removeAttr("title").attr(oldtitle,title).attr("title","")}obj=new QTip(elem,config,id,!!attr);elem.data(NAMESPACE,obj);return obj}QTIP=$.fn.qtip=function(options,notation,newValue){var command=(""+options).toLowerCase(),returned=NULL,args=$.makeArray(arguments).slice(1),event=args[args.length-1],opts=this[0]?$.data(this[0],NAMESPACE):NULL;if(!arguments.length&&opts||command==="api"){return opts}else if("string"===typeof options){this.each(function(){var api=$.data(this,NAMESPACE);if(!api){return TRUE}if(event&&event.timeStamp){api.cache.event=event}if(notation&&(command==="option"||command==="options")){if(newValue!==undefined||$.isPlainObject(notation)){api.set(notation,newValue)}else{returned=api.get(notation);return FALSE}}else if(api[command]){api[command].apply(api,args)}});return returned!==NULL?returned:this}else if("object"===typeof options||!arguments.length){opts=sanitizeOptions($.extend(TRUE,{},options));return this.each(function(i){var api,id;id=$.isArray(opts.id)?opts.id[i]:opts.id;id=!id||id===FALSE||id.length<1||QTIP.api[id]?QTIP.nextid++:id;api=init($(this),id,opts);if(api===FALSE){return TRUE}else{QTIP.api[id]=api}$.each(PLUGINS,function(){if(this.initialize==="initialize"){this(api)}});api._assignInitialEvents(event)})}};$.qtip=QTip;QTIP.api={};$.each({attr:function(attr,val){if(this.length){var self=this[0],title="title",api=$.data(self,"qtip");if(attr===title&&api&&api.options&&"object"===typeof api&&"object"===typeof api.options&&api.options.suppress){if(arguments.length<2){return $.attr(self,oldtitle)}if(api&&api.options.content.attr===title&&api.cache.attr){api.set("content.text",val)}return this.attr(oldtitle,val)}}return $.fn["attr"+replaceSuffix].apply(this,arguments)},clone:function(keepData){var elems=$.fn["clone"+replaceSuffix].apply(this,arguments);if(!keepData){elems.filter("["+oldtitle+"]").attr("title",function(){return $.attr(this,oldtitle)}).removeAttr(oldtitle)}return elems}},function(name,func){if(!func||$.fn[name+replaceSuffix]){return TRUE}var old=$.fn[name+replaceSuffix]=$.fn[name];$.fn[name]=function(){return func.apply(this,arguments)||old.apply(this,arguments)}});if(!$.ui){$["cleanData"+replaceSuffix]=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=$(elems[i])).length;i++){if(elem.attr(ATTR_HAS)){try{elem.triggerHandler("removeqtip")}catch(e){}}}$["cleanData"+replaceSuffix].apply(this,arguments)}}QTIP.version="3.0.2";QTIP.nextid=0;QTIP.inactiveEvents=INACTIVE_EVENTS;QTIP.zindex=15e3;QTIP.defaults={prerender:FALSE,id:FALSE,overwrite:TRUE,suppress:TRUE,content:{text:TRUE,attr:"title",title:FALSE,button:FALSE},position:{my:"top left",at:"bottom right",target:FALSE,container:FALSE,viewport:FALSE,adjust:{x:0,y:0,mouse:TRUE,scroll:TRUE,resize:TRUE,method:"flipinvert flipinvert"},effect:function(api,pos){$(this).animate(pos,{duration:200,queue:FALSE})}},show:{target:FALSE,event:"mouseenter",effect:TRUE,delay:90,solo:FALSE,ready:FALSE,autofocus:FALSE},hide:{target:FALSE,event:"mouseleave",effect:TRUE,delay:0,fixed:FALSE,inactive:FALSE,leave:"window",distance:FALSE},style:{classes:"",widget:FALSE,width:FALSE,height:FALSE,def:TRUE},events:{render:NULL,move:NULL,show:NULL,hide:NULL,toggle:NULL,visible:NULL,hidden:NULL,focus:NULL,blur:NULL}};var TIP,createVML,SCALE,PIXEL_RATIO,BACKING_STORE_RATIO,MARGIN="margin",BORDER="border",COLOR="color",BG_COLOR="background-color",TRANSPARENT="transparent",IMPORTANT=" !important",HASCANVAS=!!document.createElement("canvas").getContext,INVALID=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i;function camel(s){return s.charAt(0).toUpperCase()+s.slice(1)}var cssProps={},cssPrefixes=["Webkit","O","Moz","ms"];function vendorCss(elem,prop){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+" "+cssPrefixes.join(ucProp+" ")+ucProp).split(" "),cur,val,i=0;if(cssProps[prop]){return elem.css(cssProps[prop])}while(cur=props[i++]){if((val=elem.css(cur))!==undefined){cssProps[prop]=cur;return val}}}function intCss(elem,prop){return Math.ceil(parseFloat(vendorCss(elem,prop)))}if(!HASCANVAS){createVML=function(tag,props,style){return"<qtipvml:"+tag+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(props||"")+' style="behavior: url(#default#VML); '+(style||"")+'" />'}}else{PIXEL_RATIO=window.devicePixelRatio||1;BACKING_STORE_RATIO=function(){var context=document.createElement("canvas").getContext("2d");return context.backingStorePixelRatio||context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||1}();SCALE=PIXEL_RATIO/BACKING_STORE_RATIO}function Tip(qtip,options){this._ns="tip";this.options=options;this.offset=options.offset;this.size=[options.width,options.height];this.qtip=qtip;this.init(qtip)}$.extend(Tip.prototype,{init:function(qtip){var context,tip;tip=this.element=qtip.elements.tip=$("<div />",{class:NAMESPACE+"-tip"}).prependTo(qtip.tooltip);if(HASCANVAS){context=$("<canvas />").appendTo(this.element)[0].getContext("2d");context.lineJoin="miter";context.miterLimit=1e5;context.save()}else{context=createVML("shape",'coordorigin="0,0"',"position:absolute;");this.element.html(context+context);qtip._bind($("*",tip).add(tip),["click","mousedown"],function(event){event.stopPropagation()},this._ns)}qtip._bind(qtip.tooltip,"tooltipmove",this.reposition,this._ns,this);this.create()},_swapDimensions:function(){this.size[0]=this.options.height;this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width;this.size[1]=this.options.height},_useTitle:function(corner){var titlebar=this.qtip.elements.titlebar;return titlebar&&(corner.y===TOP||corner.y===CENTER&&this.element.position().top+this.size[1]/2+this.options.offset<titlebar.outerHeight(TRUE))},_parseCorner:function(corner){var my=this.qtip.options.position.my;if(corner===FALSE||my===FALSE){corner=FALSE}else if(corner===TRUE){corner=new CORNER(my.string())}else if(!corner.string){corner=new CORNER(corner);corner.fixed=TRUE}return corner},_parseWidth:function(corner,side,use){var elements=this.qtip.elements,prop=BORDER+camel(side)+"Width";return(use?intCss(use,prop):intCss(elements.content,prop)||intCss(this._useTitle(corner)&&elements.titlebar||elements.content,prop)||intCss(elements.tooltip,prop))||0},_parseRadius:function(corner){var elements=this.qtip.elements,prop=BORDER+camel(corner.y)+camel(corner.x)+"Radius";return BROWSER.ie<9?0:intCss(this._useTitle(corner)&&elements.titlebar||elements.content,prop)||intCss(elements.tooltip,prop)||0},_invalidColour:function(elem,prop,compare){var val=elem.css(prop);return!val||compare&&val===elem.css(compare)||INVALID.test(val)?FALSE:val},_parseColours:function(corner){var elements=this.qtip.elements,tip=this.element.css("cssText",""),borderSide=BORDER+camel(corner[corner.precedance])+camel(COLOR),colorElem=this._useTitle(corner)&&elements.titlebar||elements.content,css=this._invalidColour,color=[];
color[0]=css(tip,BG_COLOR)||css(colorElem,BG_COLOR)||css(elements.content,BG_COLOR)||css(elements.tooltip,BG_COLOR)||tip.css(BG_COLOR);color[1]=css(tip,borderSide,COLOR)||css(colorElem,borderSide,COLOR)||css(elements.content,borderSide,COLOR)||css(elements.tooltip,borderSide,COLOR)||elements.tooltip.css(borderSide);$("*",tip).add(tip).css("cssText",BG_COLOR+":"+TRANSPARENT+IMPORTANT+";"+BORDER+":0"+IMPORTANT+";");return color},_calculateSize:function(corner){var y=corner.precedance===Y,width=this.options.width,height=this.options.height,isCenter=corner.abbrev()==="c",base=(y?width:height)*(isCenter?.5:1),pow=Math.pow,round=Math.round,bigHyp,ratio,result,smallHyp=Math.sqrt(pow(base,2)+pow(height,2)),hyp=[this.border/base*smallHyp,this.border/height*smallHyp];hyp[2]=Math.sqrt(pow(hyp[0],2)-pow(this.border,2));hyp[3]=Math.sqrt(pow(hyp[1],2)-pow(this.border,2));bigHyp=smallHyp+hyp[2]+hyp[3]+(isCenter?0:hyp[0]);ratio=bigHyp/smallHyp;result=[round(ratio*width),round(ratio*height)];return y?result:result.reverse()},_calculateTip:function(corner,size,scale){scale=scale||1;size=size||this.size;var width=size[0]*scale,height=size[1]*scale,width2=Math.ceil(width/2),height2=Math.ceil(height/2),tips={br:[0,0,width,height,width,0],bl:[0,0,width,0,0,height],tr:[0,height,width,0,width,height],tl:[0,0,0,height,width,height],tc:[0,height,width2,0,width,height],bc:[0,0,width,0,width2,height],rc:[0,0,width,height2,0,height],lc:[width,0,width,height,0,height2]};tips.lt=tips.br;tips.rt=tips.bl;tips.lb=tips.tr;tips.rb=tips.tl;return tips[corner.abbrev()]},_drawCoords:function(context,coords){context.beginPath();context.moveTo(coords[0],coords[1]);context.lineTo(coords[2],coords[3]);context.lineTo(coords[4],coords[5]);context.closePath()},create:function(){var c=this.corner=(HASCANVAS||BROWSER.ie)&&this._parseCorner(this.options.corner);this.enabled=!!this.corner&&this.corner.abbrev()!=="c";if(this.enabled){this.qtip.cache.corner=c.clone();this.update()}this.element.toggle(this.enabled);return this.corner},update:function(corner,position){if(!this.enabled){return this}var elements=this.qtip.elements,tip=this.element,inner=tip.children(),options=this.options,curSize=this.size,mimic=options.mimic,round=Math.round,color,precedance,context,coords,bigCoords,translate,newSize,border;if(!corner){corner=this.qtip.cache.corner||this.corner}if(mimic===FALSE){mimic=corner}else{mimic=new CORNER(mimic);mimic.precedance=corner.precedance;if(mimic.x==="inherit"){mimic.x=corner.x}else if(mimic.y==="inherit"){mimic.y=corner.y}else if(mimic.x===mimic.y){mimic[corner.precedance]=corner[corner.precedance]}}precedance=mimic.precedance;if(corner.precedance===X){this._swapDimensions()}else{this._resetDimensions()}color=this.color=this._parseColours(corner);if(color[1]!==TRANSPARENT){border=this.border=this._parseWidth(corner,corner[corner.precedance]);if(options.border&&border<1&&!INVALID.test(color[1])){color[0]=color[1]}this.border=border=options.border!==TRUE?options.border:border}else{this.border=border=0}newSize=this.size=this._calculateSize(corner);tip.css({width:newSize[0],height:newSize[1],lineHeight:newSize[1]+"px"});if(corner.precedance===Y){translate=[round(mimic.x===LEFT?border:mimic.x===RIGHT?newSize[0]-curSize[0]-border:(newSize[0]-curSize[0])/2),round(mimic.y===TOP?newSize[1]-curSize[1]:0)]}else{translate=[round(mimic.x===LEFT?newSize[0]-curSize[0]:0),round(mimic.y===TOP?border:mimic.y===BOTTOM?newSize[1]-curSize[1]-border:(newSize[1]-curSize[1])/2)]}if(HASCANVAS){context=inner[0].getContext("2d");context.restore();context.save();context.clearRect(0,0,6e3,6e3);coords=this._calculateTip(mimic,curSize,SCALE);bigCoords=this._calculateTip(mimic,this.size,SCALE);inner.attr(WIDTH,newSize[0]*SCALE).attr(HEIGHT,newSize[1]*SCALE);inner.css(WIDTH,newSize[0]).css(HEIGHT,newSize[1]);this._drawCoords(context,bigCoords);context.fillStyle=color[1];context.fill();context.translate(translate[0]*SCALE,translate[1]*SCALE);this._drawCoords(context,coords);context.fillStyle=color[0];context.fill()}else{coords=this._calculateTip(mimic);coords="m"+coords[0]+","+coords[1]+" l"+coords[2]+","+coords[3]+" "+coords[4]+","+coords[5]+" xe";translate[2]=border&&/^(r|b)/i.test(corner.string())?BROWSER.ie===8?2:1:0;inner.css({coordsize:newSize[0]+border+" "+newSize[1]+border,antialias:""+(mimic.string().indexOf(CENTER)>-1),left:translate[0]-translate[2]*Number(precedance===X),top:translate[1]-translate[2]*Number(precedance===Y),width:newSize[0]+border,height:newSize[1]+border}).each(function(i){var $this=$(this);$this[$this.prop?"prop":"attr"]({coordsize:newSize[0]+border+" "+newSize[1]+border,path:coords,fillcolor:color[0],filled:!!i,stroked:!i}).toggle(!!(border||i));!i&&$this.html(createVML("stroke",'weight="'+border*2+'px" color="'+color[1]+'" miterlimit="1000" joinstyle="miter"'))})}window.opera&&setTimeout(function(){elements.tip.css({display:"inline-block",visibility:"visible"})},1);if(position!==FALSE){this.calculate(corner,newSize)}},calculate:function(corner,size){if(!this.enabled){return FALSE}var self=this,elements=this.qtip.elements,tip=this.element,userOffset=this.options.offset,position={},precedance,corners;corner=corner||this.corner;precedance=corner.precedance;size=size||this._calculateSize(corner);corners=[corner.x,corner.y];if(precedance===X){corners.reverse()}$.each(corners,function(i,side){var b,bc,br;if(side===CENTER){b=precedance===Y?LEFT:TOP;position[b]="50%";position[MARGIN+"-"+b]=-Math.round(size[precedance===Y?0:1]/2)+userOffset}else{b=self._parseWidth(corner,side,elements.tooltip);bc=self._parseWidth(corner,side,elements.content);br=self._parseRadius(corner);position[side]=Math.max(-self.border,i?bc:userOffset+(br>b?br:-b))}});position[corner[precedance]]-=size[precedance===X?0:1];tip.css({margin:"",top:"",bottom:"",left:"",right:""}).css(position);return position},reposition:function(event,api,pos){if(!this.enabled){return}var cache=api.cache,newCorner=this.corner.clone(),adjust=pos.adjusted,method=api.options.position.adjust.method.split(" "),horizontal=method[0],vertical=method[1]||method[0],shift={left:FALSE,top:FALSE,x:0,y:0},offset,css={},props;function shiftflip(direction,precedance,popposite,side,opposite){if(direction===SHIFT&&newCorner.precedance===precedance&&adjust[side]&&newCorner[popposite]!==CENTER){newCorner.precedance=newCorner.precedance===X?Y:X}else if(direction!==SHIFT&&adjust[side]){newCorner[precedance]=newCorner[precedance]===CENTER?adjust[side]>0?side:opposite:newCorner[precedance]===side?opposite:side}}function shiftonly(xy,side,opposite){if(newCorner[xy]===CENTER){css[MARGIN+"-"+side]=shift[xy]=offset[MARGIN+"-"+side]-adjust[side]}else{props=offset[opposite]!==undefined?[adjust[side],-offset[side]]:[-adjust[side],offset[side]];if((shift[xy]=Math.max(props[0],props[1]))>props[0]){pos[side]-=adjust[side];shift[side]=FALSE}css[offset[opposite]!==undefined?opposite:side]=shift[xy]}}if(this.corner.fixed!==TRUE){shiftflip(horizontal,X,Y,LEFT,RIGHT);shiftflip(vertical,Y,X,TOP,BOTTOM);if(newCorner.string()!==cache.corner.string()||cache.cornerTop!==adjust.top||cache.cornerLeft!==adjust.left){this.update(newCorner,FALSE)}}offset=this.calculate(newCorner);if(offset.right!==undefined){offset.left=-offset.right}if(offset.bottom!==undefined){offset.top=-offset.bottom}offset.user=this.offset;shift.left=horizontal===SHIFT&&!!adjust.left;if(shift.left){shiftonly(X,LEFT,RIGHT)}shift.top=vertical===SHIFT&&!!adjust.top;if(shift.top){shiftonly(Y,TOP,BOTTOM)}this.element.css(css).toggle(!(shift.x&&shift.y||newCorner.x===CENTER&&shift.y||newCorner.y===CENTER&&shift.x));pos.left-=offset.left.charAt?offset.user:horizontal!==SHIFT||shift.top||!shift.left&&!shift.top?offset.left+this.border:0;pos.top-=offset.top.charAt?offset.user:vertical!==SHIFT||shift.left||!shift.left&&!shift.top?offset.top+this.border:0;cache.cornerLeft=adjust.left;cache.cornerTop=adjust.top;cache.corner=newCorner.clone()},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns);if(this.qtip.elements.tip){this.qtip.elements.tip.find("*").remove().end().remove()}}});TIP=PLUGINS.tip=function(api){return new Tip(api,api.options.style.tip)};TIP.initialize="render";TIP.sanitize=function(options){if(options.style&&"tip"in options.style){var opts=options.style.tip;if(typeof opts!=="object"){opts=options.style.tip={corner:opts}}if(!/string|boolean/i.test(typeof opts.corner)){opts.corner=TRUE}}};CHECKS.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create();this.qtip.reposition()},"^style.tip.(height|width)$":function(obj){this.size=[obj.width,obj.height];this.update();this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}};$.extend(TRUE,QTIP.defaults,{style:{tip:{corner:TRUE,mimic:FALSE,width:6,height:6,border:TRUE,offset:0}}});var MODAL,OVERLAY,MODALCLASS="qtip-modal",MODALSELECTOR="."+MODALCLASS;OVERLAY=function(){var self=this,focusableElems={},current,prevState,elem;function focusable(element){if($.expr[":"].focusable){return $.expr[":"].focusable}var isTabIndexNotNaN=!isNaN($.attr(element,"tabindex")),nodeName=element.nodeName&&element.nodeName.toLowerCase(),map,mapName,img;if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false}img=$("img[usemap=#"+mapName+"]")[0];return!!img&&img.is(":visible")}return/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN}function focusInputs(blurElems){if(focusableElems.length<1&&blurElems.length){blurElems.not("body").blur()}else{focusableElems.first().focus()}}function stealFocus(event){if(!elem.is(":visible")){return}var target=$(event.target),tooltip=current.tooltip,container=target.closest(SELECTOR),targetOnTop;targetOnTop=container.length<1?FALSE:parseInt(container[0].style.zIndex,10)>parseInt(tooltip[0].style.zIndex,10);if(!targetOnTop&&target.closest(SELECTOR)[0]!==tooltip[0]){focusInputs(target)}}$.extend(self,{init:function(){elem=self.elem=$("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return FALSE}}).hide();$(document.body).bind("focusin"+MODALSELECTOR,stealFocus);$(document).bind("keydown"+MODALSELECTOR,function(event){if(current&&current.options.show.modal.escape&&event.keyCode===27){current.hide(event)}});elem.bind("click"+MODALSELECTOR,function(event){if(current&&current.options.show.modal.blur){current.hide(event)}});return self},update:function(api){current=api;if(api.options.show.modal.stealfocus!==FALSE){focusableElems=api.tooltip.find("*").filter(function(){return focusable(this)})}else{focusableElems=[]}},toggle:function(api,state,duration){var tooltip=api.tooltip,options=api.options.show.modal,effect=options.effect,type=state?"show":"hide",visible=elem.is(":visible"),visibleModals=$(MODALSELECTOR).filter(":visible:not(:animated)").not(tooltip);self.update(api);if(state&&options.stealfocus!==FALSE){focusInputs($(":focus"))}elem.toggleClass("blurs",options.blur);if(state){elem.appendTo(document.body)}if(elem.is(":animated")&&visible===state&&prevState!==FALSE||!state&&visibleModals.length){return self}elem.stop(TRUE,FALSE);if($.isFunction(effect)){effect.call(elem,state)}else if(effect===FALSE){elem[type]()}else{elem.fadeTo(parseInt(duration,10)||90,state?1:0,function(){if(!state){elem.hide()}})}if(!state){elem.queue(function(next){elem.css({left:"",top:""});if(!$(MODALSELECTOR).length){elem.detach()}next()})}prevState=state;if(current.destroyed){current=NULL}return self}});self.init()};OVERLAY=new OVERLAY;function Modal(api,options){this.options=options;this._ns="-modal";this.qtip=api;this.init(api)}$.extend(Modal.prototype,{init:function(qtip){var tooltip=qtip.tooltip;if(!this.options.on){return this}qtip.elements.overlay=OVERLAY.elem;tooltip.addClass(MODALCLASS).css("z-index",QTIP.modal_zindex+$(MODALSELECTOR).length);qtip._bind(tooltip,["tooltipshow","tooltiphide"],function(event,api,duration){var oEvent=event.originalEvent;if(event.target===tooltip[0]){if(oEvent&&event.type==="tooltiphide"&&/mouse(leave|enter)/.test(oEvent.type)&&$(oEvent.relatedTarget).closest(OVERLAY.elem[0]).length){try{event.preventDefault()}catch(e){}}else if(!oEvent||oEvent&&oEvent.type!=="tooltipsolo"){this.toggle(event,event.type==="tooltipshow",duration)}}},this._ns,this);qtip._bind(tooltip,"tooltipfocus",function(event,api){if(event.isDefaultPrevented()||event.target!==tooltip[0]){return}var qtips=$(MODALSELECTOR),newIndex=QTIP.modal_zindex+qtips.length,curIndex=parseInt(tooltip[0].style.zIndex,10);OVERLAY.elem[0].style.zIndex=newIndex-1;qtips.each(function(){if(this.style.zIndex>curIndex){this.style.zIndex-=1}});qtips.filter("."+CLASS_FOCUS).qtip("blur",event.originalEvent);tooltip.addClass(CLASS_FOCUS)[0].style.zIndex=newIndex;OVERLAY.update(api);try{event.preventDefault()}catch(e){}},this._ns,this);qtip._bind(tooltip,"tooltiphide",function(event){if(event.target===tooltip[0]){$(MODALSELECTOR).filter(":visible").not(tooltip).last().qtip("focus",event)}},this._ns,this)},toggle:function(event,state,duration){if(event&&event.isDefaultPrevented()){return this}OVERLAY.toggle(this.qtip,!!state,duration)},destroy:function(){this.qtip.tooltip.removeClass(MODALCLASS);this.qtip._unbind(this.qtip.tooltip,this._ns);OVERLAY.toggle(this.qtip,FALSE);delete this.qtip.elements.overlay}});MODAL=PLUGINS.modal=function(api){return new Modal(api,api.options.show.modal)};MODAL.sanitize=function(opts){if(opts.show){if(typeof opts.show.modal!=="object"){opts.show.modal={on:!!opts.show.modal}}else if(typeof opts.show.modal.on==="undefined"){opts.show.modal.on=TRUE}}};QTIP.modal_zindex=QTIP.zindex-200;MODAL.initialize="render";CHECKS.modal={"^show.modal.(on|blur)$":function(){this.destroy();this.init();this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}};$.extend(TRUE,QTIP.defaults,{show:{modal:{on:FALSE,effect:TRUE,blur:TRUE,stealfocus:TRUE,escape:TRUE}}});PLUGINS.viewport=function(api,position,posOptions,targetWidth,targetHeight,elemWidth,elemHeight){var target=posOptions.target,tooltip=api.elements.tooltip,my=posOptions.my,at=posOptions.at,adjust=posOptions.adjust,method=adjust.method.split(" "),methodX=method[0],methodY=method[1]||method[0],viewport=posOptions.viewport,container=posOptions.container,adjusted={left:0,top:0},fixed,newMy,containerOffset,containerStatic,viewportWidth,viewportHeight,viewportScroll,viewportOffset;if(!viewport.jquery||target[0]===window||target[0]===document.body||adjust.method==="none"){return adjusted}containerOffset=container.offset()||adjusted;containerStatic=container.css("position")==="static";fixed=tooltip.css("position")==="fixed";viewportWidth=viewport[0]===window?viewport.width():viewport.outerWidth(FALSE);viewportHeight=viewport[0]===window?viewport.height():viewport.outerHeight(FALSE);viewportScroll={left:fixed?0:viewport.scrollLeft(),top:fixed?0:viewport.scrollTop()};viewportOffset=viewport.offset()||adjusted;function calculate(side,otherSide,type,adjustment,side1,side2,lengthName,targetLength,elemLength){var initialPos=position[side1],mySide=my[side],atSide=at[side],isShift=type===SHIFT,myLength=mySide===side1?elemLength:mySide===side2?-elemLength:-elemLength/2,atLength=atSide===side1?targetLength:atSide===side2?-targetLength:-targetLength/2,sideOffset=viewportScroll[side1]+viewportOffset[side1]-(containerStatic?0:containerOffset[side1]),overflow1=sideOffset-initialPos,overflow2=initialPos+elemLength-(lengthName===WIDTH?viewportWidth:viewportHeight)-sideOffset,offset=myLength-(my.precedance===side||mySide===my[otherSide]?atLength:0)-(atSide===CENTER?targetLength/2:0);if(isShift){offset=(mySide===side1?1:-1)*myLength;position[side1]+=overflow1>0?overflow1:overflow2>0?-overflow2:0;position[side1]=Math.max(-containerOffset[side1]+viewportOffset[side1],initialPos-offset,Math.min(Math.max(-containerOffset[side1]+viewportOffset[side1]+(lengthName===WIDTH?viewportWidth:viewportHeight),initialPos+offset),position[side1],mySide==="center"?initialPos-myLength:1e9))}else{adjustment*=type===FLIPINVERT?2:0;if(overflow1>0&&(mySide!==side1||overflow2>0)){position[side1]-=offset+adjustment;newMy.invert(side,side1)}else if(overflow2>0&&(mySide!==side2||overflow1>0)){position[side1]-=(mySide===CENTER?-offset:offset)+adjustment;newMy.invert(side,side2)}if(position[side1]<viewportScroll[side1]&&-position[side1]>overflow2){position[side1]=initialPos;newMy=my.clone()}}return position[side1]-initialPos}if(methodX!=="shift"||methodY!=="shift"){newMy=my.clone()}adjusted={left:methodX!=="none"?calculate(X,Y,methodX,adjust.x,LEFT,RIGHT,WIDTH,targetWidth,elemWidth):0,top:methodY!=="none"?calculate(Y,X,methodY,adjust.y,TOP,BOTTOM,HEIGHT,targetHeight,elemHeight):0,my:newMy};return adjusted};PLUGINS.polys={polygon:function(baseCoords,corner){var result={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:FALSE},i=0,next,coords=[],compareX=1,compareY=1,realX=0,realY=0,newWidth,newHeight;i=baseCoords.length;while(i--){next=[parseInt(baseCoords[--i],10),parseInt(baseCoords[i+1],10)];if(next[0]>result.position.right){result.position.right=next[0]}if(next[0]<result.position.left){result.position.left=next[0]}if(next[1]>result.position.bottom){result.position.bottom=next[1]}if(next[1]<result.position.top){result.position.top=next[1]}coords.push(next)}newWidth=result.width=Math.abs(result.position.right-result.position.left);newHeight=result.height=Math.abs(result.position.bottom-result.position.top);if(corner.abbrev()==="c"){result.position={left:result.position.left+result.width/2,top:result.position.top+result.height/2}}else{while(newWidth>0&&newHeight>0&&compareX>0&&compareY>0){newWidth=Math.floor(newWidth/2);newHeight=Math.floor(newHeight/2);if(corner.x===LEFT){compareX=newWidth}else if(corner.x===RIGHT){compareX=result.width-newWidth}else{compareX+=Math.floor(newWidth/2)}if(corner.y===TOP){compareY=newHeight}else if(corner.y===BOTTOM){compareY=result.height-newHeight}else{compareY+=Math.floor(newHeight/2)}i=coords.length;while(i--){if(coords.length<2){break}realX=coords[i][0]-result.position.left;realY=coords[i][1]-result.position.top;if(corner.x===LEFT&&realX>=compareX||corner.x===RIGHT&&realX<=compareX||corner.x===CENTER&&(realX<compareX||realX>result.width-compareX)||corner.y===TOP&&realY>=compareY||corner.y===BOTTOM&&realY<=compareY||corner.y===CENTER&&(realY<compareY||realY>result.height-compareY)){coords.splice(i,1)}}}result.position={left:coords[0][0],top:coords[0][1]}}return result},rect:function(ax,ay,bx,by){return{width:Math.abs(bx-ax),height:Math.abs(by-ay),position:{left:Math.min(ax,bx),top:Math.min(ay,by)}}},_angles:{tc:3/2,tr:7/4,tl:5/4,bc:1/2,br:1/4,bl:3/4,rc:2,lc:1,c:0},ellipse:function(cx,cy,rx,ry,corner){var c=PLUGINS.polys._angles[corner.abbrev()],rxc=c===0?0:rx*Math.cos(c*Math.PI),rys=ry*Math.sin(c*Math.PI);return{width:rx*2-Math.abs(rxc),height:ry*2-Math.abs(rys),position:{left:cx+rxc,top:cy+rys},adjustable:FALSE}},circle:function(cx,cy,r,corner){return PLUGINS.polys.ellipse(cx,cy,r,r,corner)}};PLUGINS.svg=function(api,svg,corner){var elem=svg[0],root=$(elem.ownerSVGElement),ownerDocument=elem.ownerDocument,strokeWidth2=(parseInt(svg.css("stroke-width"),10)||0)/2,frameOffset,mtx,transformed,len,next,i,points,result,position;while(!elem.getBBox){elem=elem.parentNode}if(!elem.getBBox||!elem.parentNode){return FALSE}switch(elem.nodeName){case"ellipse":case"circle":result=PLUGINS.polys.ellipse(elem.cx.baseVal.value,elem.cy.baseVal.value,(elem.rx||elem.r).baseVal.value+strokeWidth2,(elem.ry||elem.r).baseVal.value+strokeWidth2,corner);break;case"line":case"polygon":case"polyline":points=elem.points||[{x:elem.x1.baseVal.value,y:elem.y1.baseVal.value},{x:elem.x2.baseVal.value,y:elem.y2.baseVal.value}];for(result=[],i=-1,len=points.numberOfItems||points.length;++i<len;){next=points.getItem?points.getItem(i):points[i];result.push.apply(result,[next.x,next.y])}result=PLUGINS.polys.polygon(result,corner);break;default:result=elem.getBBox();result={width:result.width,height:result.height,position:{left:result.x,top:result.y}};break}position=result.position;root=root[0];if(root.createSVGPoint){mtx=elem.getScreenCTM();points=root.createSVGPoint();points.x=position.left;points.y=position.top;transformed=points.matrixTransform(mtx);position.left=transformed.x;position.top=transformed.y}if(ownerDocument!==document&&api.position.target!=="mouse"){frameOffset=$((ownerDocument.defaultView||ownerDocument.parentWindow).frameElement).offset();if(frameOffset){position.left+=frameOffset.left;position.top+=frameOffset.top}}ownerDocument=$(ownerDocument);position.left+=ownerDocument.scrollLeft();position.top+=ownerDocument.scrollTop();return result};PLUGINS.imagemap=function(api,area,corner){if(!area.jquery){area=$(area)}var shape=(area.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),image=$('img[usemap="#'+area.parent("map").attr("name")+'"]'),coordsString=$.trim(area.attr("coords")),coordsArray=coordsString.replace(/,$/,"").split(","),imageOffset,coords,i,result,len;if(!image.length){return FALSE}if(shape==="polygon"){result=PLUGINS.polys.polygon(coordsArray,corner)}else if(PLUGINS.polys[shape]){for(i=-1,len=coordsArray.length,coords=[];++i<len;){coords.push(parseInt(coordsArray[i],10))}result=PLUGINS.polys[shape].apply(this,coords.concat(corner))}else{return FALSE}imageOffset=image.offset();imageOffset.left+=Math.ceil((image.outerWidth(FALSE)-image.width())/2);imageOffset.top+=Math.ceil((image.outerHeight(FALSE)-image.height())/2);result.position.left+=imageOffset.left;result.position.top+=imageOffset.top;return result};var IE6,BGIFRAME='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';" '+' style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); '+'-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>';function Ie6(api){this._ns="ie6";this.qtip=api;this.init(api)}$.extend(Ie6.prototype,{_scroll:function(){var overlay=this.qtip.elements.overlay;overlay&&(overlay[0].style.top=$(window).scrollTop()+"px")},init:function(qtip){var tooltip=qtip.tooltip;if($("select, object").length<1){this.bgiframe=qtip.elements.bgiframe=$(BGIFRAME).appendTo(tooltip);qtip._bind(tooltip,"tooltipmove",this.adjustBGIFrame,this._ns,this)}this.redrawContainer=$("<div/>",{id:NAMESPACE+"-rcontainer"}).appendTo(document.body);if(qtip.elements.overlay&&qtip.elements.overlay.addClass("qtipmodal-ie6fix")){qtip._bind(window,["scroll","resize"],this._scroll,this._ns,this);qtip._bind(tooltip,["tooltipshow"],this._scroll,this._ns,this)}this.redraw()},adjustBGIFrame:function(){var tooltip=this.qtip.tooltip,dimensions={height:tooltip.outerHeight(FALSE),width:tooltip.outerWidth(FALSE)},plugin=this.qtip.plugins.tip,tip=this.qtip.elements.tip,tipAdjust,offset;offset=parseInt(tooltip.css("borderLeftWidth"),10)||0;offset={left:-offset,top:-offset};if(plugin&&tip){tipAdjust=plugin.corner.precedance==="x"?[WIDTH,LEFT]:[HEIGHT,TOP];offset[tipAdjust[1]]-=tip[tipAdjust[0]]()}this.bgiframe.css(offset).css(dimensions)},redraw:function(){if(this.qtip.rendered<1||this.drawing){return this}var tooltip=this.qtip.tooltip,style=this.qtip.options.style,container=this.qtip.options.position.container,perc,width,max,min;this.qtip.drawing=1;if(style.height){tooltip.css(HEIGHT,style.height)}if(style.width){tooltip.css(WIDTH,style.width)}else{tooltip.css(WIDTH,"").appendTo(this.redrawContainer);width=tooltip.width();if(width%2<1){width+=1}max=tooltip.css("maxWidth")||"";min=tooltip.css("minWidth")||"";perc=(max+min).indexOf("%")>-1?container.width()/100:0;max=(max.indexOf("%")>-1?perc:1*parseInt(max,10))||width;min=(min.indexOf("%")>-1?perc:1*parseInt(min,10))||0;width=max+min?Math.min(Math.max(width,min),max):width;tooltip.css(WIDTH,Math.round(width)).appendTo(container)}this.drawing=0;return this},destroy:function(){this.bgiframe&&this.bgiframe.remove();this.qtip._unbind([window,this.qtip.tooltip],this._ns)}});IE6=PLUGINS.ie6=function(api){return BROWSER.ie===6?new Ie6(api):FALSE};IE6.initialize="render";CHECKS.ie6={"^content|style$":function(){this.redraw()}}})})(window,document);(function($){"use strict";var methods={init:function(options){return this.each(function(){this.self=$(this);methods.destroy.call(this.self);this.opt=$.extend(true,{},$.fn.raty.defaults,options);methods._adjustCallback.call(this);methods._adjustNumber.call(this);methods._adjustHints.call(this);this.opt.score=methods._adjustedScore.call(this,this.opt.score);if(this.opt.starType!=="img"){methods._adjustStarType.call(this)}methods._adjustPath.call(this);methods._createStars.call(this);if(this.opt.cancel){methods._createCancel.call(this)}if(this.opt.precision){methods._adjustPrecision.call(this)}methods._createScore.call(this);methods._apply.call(this,this.opt.score);methods._setTitle.call(this,this.opt.score);methods._target.call(this,this.opt.score);if(this.opt.readOnly){methods._lock.call(this)}else{this.style.cursor="pointer";methods._binds.call(this)}})},_adjustCallback:function(){var options=["number","readOnly","score","scoreName","target","path"];for(var i=0;i<options.length;i++){if(typeof this.opt[options[i]]==="function"){this.opt[options[i]]=this.opt[options[i]].call(this)}}},_adjustedScore:function(score){if(!score){return score}return methods._between(score,0,this.opt.number)},_adjustHints:function(){if(!this.opt.hints){this.opt.hints=[]}if(!this.opt.halfShow&&!this.opt.half){return}var steps=this.opt.precision?10:2;for(var i=0;i<this.opt.number;i++){var group=this.opt.hints[i];if(Object.prototype.toString.call(group)!=="[object Array]"){group=[group]}this.opt.hints[i]=[];for(var j=0;j<steps;j++){var hint=group[j],last=group[group.length-1];if(last===undefined){last=null}this.opt.hints[i][j]=hint===undefined?last:hint}}},_adjustNumber:function(){this.opt.number=methods._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"";if(this.opt.path&&this.opt.path.charAt(this.opt.path.length-1)!=="/"){this.opt.path+="/"}},_adjustPrecision:function(){this.opt.half=true},_adjustStarType:function(){var replaces=["cancelOff","cancelOn","starHalf","starOff","starOn"];this.opt.path="";for(var i=0;i<replaces.length;i++){this.opt[replaces[i]]=this.opt[replaces[i]].replace(".","-")}},_apply:function(score){methods._fill.call(this,score);if(score){if(score>0){this.score.val(score)}methods._roundStars.call(this,score)}},_between:function(value,min,max){return Math.min(Math.max(parseFloat(value),min),max)},_binds:function(){if(this.cancel){methods._bindOverCancel.call(this);methods._bindClickCancel.call(this);methods._bindOutCancel.call(this)}methods._bindOver.call(this);methods._bindClick.call(this);methods._bindOut.call(this)},_bindClick:function(){var that=this;that.stars.on("click.raty",function(evt){var execute=true,score=that.opt.half||that.opt.precision?that.self.data("score"):this.alt||$(this).data("alt");if(that.opt.click){execute=that.opt.click.call(that,+score,evt)}if(execute||execute===undefined){if(that.opt.half&&!that.opt.precision){score=methods._roundHalfScore.call(that,score)}methods._apply.call(that,score)}})},_bindClickCancel:function(){var that=this;that.cancel.on("click.raty",function(evt){that.score.removeAttr("value");if(that.opt.click){that.opt.click.call(that,null,evt)}})},_bindOut:function(){var that=this;that.self.on("mouseleave.raty",function(evt){var score=+that.score.val()||undefined;methods._apply.call(that,score);methods._target.call(that,score,evt);methods._resetTitle.call(that);if(that.opt.mouseout){that.opt.mouseout.call(that,score,evt)}})},_bindOutCancel:function(){var that=this;that.cancel.on("mouseleave.raty",function(evt){var icon=that.opt.cancelOff;if(that.opt.starType!=="img"){icon=that.opt.cancelClass+" "+icon}methods._setIcon.call(that,this,icon);if(that.opt.mouseout){var score=+that.score.val()||undefined;that.opt.mouseout.call(that,score,evt)}})},_bindOver:function(){var that=this,action=that.opt.half?"mousemove.raty":"mouseover.raty";that.stars.on(action,function(evt){var score=methods._getScoreByPosition.call(that,evt,this);methods._fill.call(that,score);if(that.opt.half){methods._roundStars.call(that,score,evt);methods._setTitle.call(that,score,evt);that.self.data("score",score)}methods._target.call(that,score,evt);if(that.opt.mouseover){that.opt.mouseover.call(that,score,evt)}})},_bindOverCancel:function(){var that=this;that.cancel.on("mouseover.raty",function(evt){var starOff=that.opt.path+that.opt.starOff,icon=that.opt.cancelOn;if(that.opt.starType==="img"){that.stars.attr("src",starOff)}else{icon=that.opt.cancelClass+" "+icon;that.stars.attr("class",starOff)}methods._setIcon.call(that,this,icon);methods._target.call(that,null,evt);if(that.opt.mouseover){that.opt.mouseover.call(that,null)}})},_buildScoreField:function(){return $("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var icon=this.opt.path+this.opt.cancelOff,cancel=$("<"+this.opt.starType+" />",{title:this.opt.cancelHint,class:this.opt.cancelClass});if(this.opt.starType==="img"){cancel.attr({src:icon,alt:"x"})}else{cancel.attr("data-alt","x").addClass(icon)}if(this.opt.cancelPlace==="left"){this.self.prepend("&#160;").prepend(cancel)}else{this.self.append("&#160;").append(cancel)}this.cancel=cancel},_createScore:function(){var score=$(this.opt.targetScore);this.score=score.length?score:methods._buildScoreField.call(this)},_createStars:function(){for(var i=1;i<=this.opt.number;i++){var name=methods._nameForIndex.call(this,i),attrs={alt:i,src:this.opt.path+this.opt[name]};if(this.opt.starType!=="img"){attrs={"data-alt":i,class:attrs.src}}attrs.title=methods._getHint.call(this,i);$("<"+this.opt.starType+" />",attrs).appendTo(this);if(this.opt.space){this.self.append(i<this.opt.number?"&#160;":"")}}this.stars=this.self.children(this.opt.starType)},_error:function(message){$(this).text(message);$.error(message)},_fill:function(score){var hash=0;for(var i=1;i<=this.stars.length;i++){var icon,star=this.stars[i-1],turnOn=methods._turnOn.call(this,i,score);if(this.opt.iconRange&&this.opt.iconRange.length>hash){var irange=this.opt.iconRange[hash];icon=methods._getRangeIcon.call(this,irange,turnOn);if(i<=irange.range){methods._setIcon.call(this,star,icon)}if(i===irange.range){hash++}}else{icon=this.opt[turnOn?"starOn":"starOff"];methods._setIcon.call(this,star,icon)}}},_getFirstDecimal:function(number){var decimal=number.toString().split(".")[1],result=0;if(decimal){result=parseInt(decimal.charAt(0),10);if(decimal.slice(1,5)==="9999"){result++}}return result},_getRangeIcon:function(irange,turnOn){return turnOn?irange.on||this.opt.starOn:irange.off||this.opt.starOff},_getScoreByPosition:function(evt,icon){var score=parseInt(icon.alt||icon.getAttribute("data-alt"),10);if(this.opt.half){var size=methods._getWidth.call(this),percent=parseFloat((evt.pageX-$(icon).offset().left)/size);score=score-1+percent}return score},_getHint:function(score,evt){if(score!==0&&!score){return this.opt.noRatedMsg}var decimal=methods._getFirstDecimal.call(this,score),integer=Math.ceil(score),group=this.opt.hints[(integer||1)-1],hint=group,set=!evt||this.move;if(this.opt.precision){if(set){decimal=decimal===0?9:decimal-1}hint=group[decimal]}else if(this.opt.halfShow||this.opt.half){decimal=set&&decimal===0?1:decimal>5?1:0;hint=group[decimal]}return hint===""?"":hint||score},_getWidth:function(){var width=this.stars[0].width||parseFloat(this.stars.eq(0).css("font-size"));if(!width){methods._error.call(this,"Could not get the icon width!")}return width},_lock:function(){var hint=methods._getHint.call(this,this.score.val());this.style.cursor="";this.title=hint;this.score.prop("readonly",true);this.stars.prop("title",hint);if(this.cancel){this.cancel.hide()}this.self.data("readonly",true)},_nameForIndex:function(i){return this.opt.score&&this.opt.score>=i?"starOn":"starOff"},_resetTitle:function(star){for(var i=0;i<this.opt.number;i++){this.stars[i].title=methods._getHint.call(this,i+1);
}},_roundHalfScore:function(score){var integer=parseInt(score,10),decimal=methods._getFirstDecimal.call(this,score);if(decimal!==0){decimal=decimal>5?1:.5}return integer+decimal},_roundStars:function(score,evt){var decimal=(score%1).toFixed(2),name;if(evt||this.move){name=decimal>.5?"starOn":"starHalf"}else if(decimal>this.opt.round.down){name="starOn";if(this.opt.halfShow&&decimal<this.opt.round.up){name="starHalf"}else if(decimal<this.opt.round.full){name="starOff"}}if(name){var icon=this.opt[name],star=this.stars[Math.ceil(score)-1];methods._setIcon.call(this,star,icon)}},_setIcon:function(star,icon){star[this.opt.starType==="img"?"src":"className"]=this.opt.path+icon},_setTarget:function(target,score){if(score){score=this.opt.targetFormat.toString().replace("{score}",score)}if(target.is(":input")){target.val(score)}else{target.html(score)}},_setTitle:function(score,evt){if(score){var integer=parseInt(Math.ceil(score),10),star=this.stars[integer-1];star.title=methods._getHint.call(this,score,evt)}},_target:function(score,evt){if(this.opt.target){var target=$(this.opt.target);if(!target.length){methods._error.call(this,"Target selector invalid or missing!")}var mouseover=evt&&evt.type==="mouseover";if(score===undefined){score=this.opt.targetText}else if(score===null){score=mouseover?this.opt.cancelHint:this.opt.targetText}else{if(this.opt.targetType==="hint"){score=methods._getHint.call(this,score,evt)}else if(this.opt.precision){score=parseFloat(score).toFixed(1)}var mousemove=evt&&evt.type==="mousemove";if(!mouseover&&!mousemove&&!this.opt.targetKeep){score=this.opt.targetText}}methods._setTarget.call(this,target,score)}},_turnOn:function(i,score){return this.opt.single?i===score:i<=score},_unlock:function(){this.style.cursor="pointer";this.removeAttribute("title");this.score.removeAttr("readonly");this.self.data("readonly",false);for(var i=0;i<this.opt.number;i++){this.stars[i].title=methods._getHint.call(this,i+1)}if(this.cancel){this.cancel.css("display","")}},cancel:function(click){return this.each(function(){var self=$(this);if(self.data("readonly")!==true){methods[click?"click":"score"].call(self,null);this.score.removeAttr("value")}})},click:function(score){return this.each(function(){if($(this).data("readonly")!==true){score=methods._adjustedScore.call(this,score);methods._apply.call(this,score);if(this.opt.click){this.opt.click.call(this,score,$.Event("click"))}methods._target.call(this,score)}})},destroy:function(){return this.each(function(){var self=$(this),raw=self.data("raw");if(raw){self.off(".raty").empty().css({cursor:raw.style.cursor}).removeData("readonly")}else{self.data("raw",self.clone()[0])}})},getScore:function(){var score=[],value;this.each(function(){value=this.score.val();score.push(value?+value:undefined)});return score.length>1?score:score[0]},move:function(score){return this.each(function(){var integer=parseInt(score,10),decimal=methods._getFirstDecimal.call(this,score);if(integer>=this.opt.number){integer=this.opt.number-1;decimal=10}var width=methods._getWidth.call(this),steps=width/10,star=$(this.stars[integer]),percent=star.offset().left+steps*decimal,evt=$.Event("mousemove",{pageX:percent});this.move=true;star.trigger(evt);this.move=false})},readOnly:function(readonly){return this.each(function(){var self=$(this);if(self.data("readonly")!==readonly){if(readonly){self.off(".raty").children("img").off(".raty");methods._lock.call(this)}else{methods._binds.call(this);methods._unlock.call(this)}self.data("readonly",readonly)}})},reload:function(){return methods.set.call(this,{})},score:function(){var self=$(this);return arguments.length?methods.setScore.apply(self,arguments):methods.getScore.call(self)},set:function(options){return this.each(function(){$(this).raty($.extend({},this.opt,options))})},setScore:function(score){return this.each(function(){if($(this).data("readonly")!==true){score=methods._adjustedScore.call(this,score);methods._apply.call(this,score);methods._target.call(this,score)}})}};$.fn.raty=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist!")}};$.fn.raty.defaults={cancel:false,cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:undefined,half:false,halfShow:true,hints:["bad","poor","regular","good","gorgeous"],iconRange:undefined,mouseout:undefined,mouseover:undefined,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:undefined,precision:false,readOnly:false,round:{down:.25,full:.6,up:.76},score:undefined,scoreName:"score",single:false,space:true,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",starType:"img",target:undefined,targetFormat:"{score}",targetKeep:false,targetScore:undefined,targetText:"",targetType:"hint"}})(jQuery);if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={}}YAHOO.namespace=function(){var b=arguments,g=null,e,c,f;for(e=0;e<b.length;e=e+1){f=(""+b[e]).split(".");g=YAHOO;for(c=f[0]=="YAHOO"?1:0;c<f.length;c=c+1){g[f[c]]=g[f[c]]||{};g=g[f[c]]}}return g};YAHOO.log=function(d,a,c){var b=YAHOO.widget.Logger;if(b&&b.log){return b.log(d,a,c)}else{return false}};YAHOO.register=function(a,f,e){var k=YAHOO.env.modules,c,j,h,g,d;if(!k[a]){k[a]={versions:[],builds:[]}}c=k[a];j=e.version;h=e.build;g=YAHOO.env.listeners;c.name=a;c.version=j;c.build=h;c.versions.push(j);c.builds.push(h);c.mainClass=f;for(d=0;d<g.length;d=d+1){g[d](c)}if(f){f.VERSION=j;f.BUILD=h}else{YAHOO.log("mainClass is undefined for module "+a,"warn")}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(a){return YAHOO.env.modules[a]||null};YAHOO.env.parseUA=function(d){var e=function(i){var j=0;return parseFloat(i.replace(/\./g,function(){return j++==1?"":"."}))},h=navigator,g={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:h&&h.cajaVersion,secure:false,os:null},c=d||navigator&&navigator.userAgent,f=window&&window.location,b=f&&f.href,a;g.secure=b&&b.toLowerCase().indexOf("https")===0;if(c){if(/windows|win32/i.test(c)){g.os="windows"}else{if(/macintosh/i.test(c)){g.os="macintosh"}else{if(/rhino/i.test(c)){g.os="rhino"}}}if(/KHTML/.test(c)){g.webkit=1}a=c.match(/AppleWebKit\/([^\s]*)/);if(a&&a[1]){g.webkit=e(a[1]);if(/ Mobile\//.test(c)){g.mobile="Apple";a=c.match(/OS ([^\s]*)/);if(a&&a[1]){a=e(a[1].replace("_","."))}g.ios=a;g.ipad=g.ipod=g.iphone=0;a=c.match(/iPad|iPod|iPhone/);if(a&&a[0]){g[a[0].toLowerCase()]=g.ios}}else{a=c.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/);if(a){g.mobile=a[0]}if(/webOS/.test(c)){g.mobile="WebOS";a=c.match(/webOS\/([^\s]*);/);if(a&&a[1]){g.webos=e(a[1])}}if(/ Android/.test(c)){g.mobile="Android";a=c.match(/Android ([^\s]*);/);if(a&&a[1]){g.android=e(a[1])}}}a=c.match(/Chrome\/([^\s]*)/);if(a&&a[1]){g.chrome=e(a[1])}else{a=c.match(/AdobeAIR\/([^\s]*)/);if(a){g.air=a[0]}}}if(!g.webkit){a=c.match(/Opera[\s\/]([^\s]*)/);if(a&&a[1]){g.opera=e(a[1]);a=c.match(/Version\/([^\s]*)/);if(a&&a[1]){g.opera=e(a[1])}a=c.match(/Opera Mini[^;]*/);if(a){g.mobile=a[0]}}else{a=c.match(/MSIE\s([^;]*)/);if(a&&a[1]){g.ie=e(a[1])}else{a=c.match(/Gecko\/([^\s]*)/);if(a){g.gecko=1;a=c.match(/rv:([^\s\)]*)/);if(a&&a[1]){g.gecko=e(a[1])}}}}}}return g};YAHOO.env.ua=YAHOO.env.parseUA();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var b=YAHOO_config.listener,a=YAHOO.env.listeners,d=true,c;if(b){for(c=0;c<a.length;c++){if(a[c]==b){d=false;break}}if(d){a.push(b)}}}})();YAHOO.lang=YAHOO.lang||{};(function(){var f=YAHOO.lang,a=Object.prototype,c="[object Array]",h="[object Function]",i="[object Object]",b=[],g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},d=["toString","valueOf"],e={isArray:function(j){return a.toString.apply(j)===c},isBoolean:function(j){return typeof j==="boolean"},isFunction:function(j){return typeof j==="function"||a.toString.apply(j)===h},isNull:function(j){return j===null},isNumber:function(j){return typeof j==="number"&&isFinite(j)},isObject:function(j){return j&&(typeof j==="object"||f.isFunction(j))||false},isString:function(j){return typeof j==="string"},isUndefined:function(j){return typeof j==="undefined"},_IEEnumFix:YAHOO.env.ua.ie?function(l,k){var j,n,m;for(j=0;j<d.length;j=j+1){n=d[j];m=k[n];if(f.isFunction(m)&&m!=a[n]){l[n]=m}}}:function(){},escapeHTML:function(j){return j.replace(/[&<>"'\/`]/g,function(k){return g[k]})},extend:function(m,n,l){if(!n||!m){throw new Error("extend failed, please check that "+"all dependencies are included.")}var k=function(){},j;k.prototype=n.prototype;m.prototype=new k;m.prototype.constructor=m;m.superclass=n.prototype;if(n.prototype.constructor==a.constructor){n.prototype.constructor=n}if(l){for(j in l){if(f.hasOwnProperty(l,j)){m.prototype[j]=l[j]}}f._IEEnumFix(m.prototype,l)}},augmentObject:function(n,m){if(!m||!n){throw new Error("Absorb failed, verify dependencies.")}var j=arguments,l,o,k=j[2];if(k&&k!==true){for(l=2;l<j.length;l=l+1){n[j[l]]=m[j[l]]}}else{for(o in m){if(k||!(o in n)){n[o]=m[o]}}f._IEEnumFix(n,m)}return n},augmentProto:function(m,l){if(!l||!m){throw new Error("Augment failed, verify dependencies.")}var j=[m.prototype,l.prototype],k;for(k=2;k<arguments.length;k=k+1){j.push(arguments[k])}f.augmentObject.apply(this,j);return m},dump:function(j,p){var l,n,r=[],t="{...}",k="f(){...}",q=", ",m=" => ";if(!f.isObject(j)){return j+""}else{if(j instanceof Date||"nodeType"in j&&"tagName"in j){return j}else{if(f.isFunction(j)){return k}}}p=f.isNumber(p)?p:3;if(f.isArray(j)){r.push("[");for(l=0,n=j.length;l<n;l=l+1){if(f.isObject(j[l])){r.push(p>0?f.dump(j[l],p-1):t)}else{r.push(j[l])}r.push(q)}if(r.length>1){r.pop()}r.push("]")}else{r.push("{");for(l in j){if(f.hasOwnProperty(j,l)){r.push(l+m);if(f.isObject(j[l])){r.push(p>0?f.dump(j[l],p-1):t)}else{r.push(j[l])}r.push(q)}}if(r.length>1){r.pop()}r.push("}")}return r.join("")},substitute:function(x,y,E,l){var D,C,B,G,t,u,F=[],p,z=x.length,A="dump",r=" ",q="{",m="}",n,w;for(;;){D=x.lastIndexOf(q,z);if(D<0){break}C=x.indexOf(m,D);if(D+1>C){break}p=x.substring(D+1,C);G=p;u=null;B=G.indexOf(r);if(B>-1){u=G.substring(B+1);G=G.substring(0,B)}t=y[G];if(E){t=E(G,t,u)}if(f.isObject(t)){if(f.isArray(t)){t=f.dump(t,parseInt(u,10))}else{u=u||"";n=u.indexOf(A);if(n>-1){u=u.substring(4)}w=t.toString();if(w===i||n>-1){t=f.dump(t,parseInt(u,10))}else{t=w}}}else{if(!f.isString(t)&&!f.isNumber(t)){t="~-"+F.length+"-~";F[F.length]=p}}x=x.substring(0,D)+t+x.substring(C+1);if(l===false){z=D-1}}for(D=F.length-1;D>=0;D=D-1){x=x.replace(new RegExp("~-"+D+"-~"),"{"+F[D]+"}","g")}return x},trim:function(j){try{return j.replace(/^\s+|\s+$/g,"")}catch(k){return j}},merge:function(){var n={},k=arguments,j=k.length,m;for(m=0;m<j;m=m+1){f.augmentObject(n,k[m],true)}return n},later:function(t,k,u,n,p){t=t||0;k=k||{};var l=u,s=n,q,j;if(f.isString(u)){l=k[u]}if(!l){throw new TypeError("method undefined")}if(!f.isUndefined(n)&&!f.isArray(s)){s=[n]}q=function(){l.apply(k,s||b)};j=p?setInterval(q,t):setTimeout(q,t);return{interval:p,cancel:function(){if(this.interval){clearInterval(j)}else{clearTimeout(j)}}}},isValue:function(j){return f.isObject(j)||f.isString(j)||f.isNumber(j)||f.isBoolean(j)}};f.hasOwnProperty=a.hasOwnProperty?function(j,k){return j&&j.hasOwnProperty&&j.hasOwnProperty(k)}:function(j,k){return!f.isUndefined(j[k])&&j.constructor.prototype[k]!==j[k]};e.augmentObject(f,e,true);YAHOO.util.Lang=f;f.augment=f.augmentProto;YAHOO.augment=f.augmentProto;YAHOO.extend=f.extend})();YAHOO.register("yahoo",YAHOO,{version:"2.9.0",build:"2800"});var CryptoJS=CryptoJS||function(e,g){var a={};var b=a.lib={};var j=b.Base=function(){function n(){}return{extend:function(p){n.prototype=this;var o=new n;if(p){o.mixIn(p)}if(!o.hasOwnProperty("init")){o.init=function(){o.$super.init.apply(this,arguments)}}o.init.prototype=o;o.$super=this;return o},create:function(){var o=this.extend();o.init.apply(o,arguments);return o},init:function(){},mixIn:function(p){for(var o in p){if(p.hasOwnProperty(o)){this[o]=p[o]}}if(p.hasOwnProperty("toString")){this.toString=p.toString}},clone:function(){return this.init.prototype.extend(this)}}}();var l=b.WordArray=j.extend({init:function(o,n){o=this.words=o||[];if(n!=g){this.sigBytes=n}else{this.sigBytes=o.length*4}},toString:function(n){return(n||h).stringify(this)},concat:function(t){var q=this.words;var p=t.words;var n=this.sigBytes;var s=t.sigBytes;this.clamp();if(n%4){for(var r=0;r<s;r++){var o=p[r>>>2]>>>24-r%4*8&255;q[n+r>>>2]|=o<<24-(n+r)%4*8}}else{for(var r=0;r<s;r+=4){q[n+r>>>2]=p[r>>>2]}}this.sigBytes+=s;return this},clamp:function(){var o=this.words;var n=this.sigBytes;o[n>>>2]&=4294967295<<32-n%4*8;o.length=e.ceil(n/4)},clone:function(){var n=j.clone.call(this);n.words=this.words.slice(0);return n},random:function(p){var o=[];for(var n=0;n<p;n+=4){o.push(e.random()*4294967296|0)}return new l.init(o,p)}});var m=a.enc={};var h=m.Hex={stringify:function(p){var r=p.words;var o=p.sigBytes;var q=[];for(var n=0;n<o;n++){var s=r[n>>>2]>>>24-n%4*8&255;q.push((s>>>4).toString(16));q.push((s&15).toString(16))}return q.join("")},parse:function(p){var n=p.length;var q=[];for(var o=0;o<n;o+=2){q[o>>>3]|=parseInt(p.substr(o,2),16)<<24-o%8*4}return new l.init(q,n/2)}};var d=m.Latin1={stringify:function(q){var r=q.words;var p=q.sigBytes;var n=[];for(var o=0;o<p;o++){var s=r[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(p){var n=p.length;var q=[];for(var o=0;o<n;o++){q[o>>>2]|=(p.charCodeAt(o)&255)<<24-o%4*8}return new l.init(q,n)}};var c=m.Utf8={stringify:function(n){try{return decodeURIComponent(escape(d.stringify(n)))}catch(o){throw new Error("Malformed UTF-8 data")}},parse:function(n){return d.parse(unescape(encodeURIComponent(n)))}};var i=b.BufferedBlockAlgorithm=j.extend({reset:function(){this._data=new l.init;this._nDataBytes=0},_append:function(n){if(typeof n=="string"){n=c.parse(n)}this._data.concat(n);this._nDataBytes+=n.sigBytes},_process:function(w){var q=this._data;var x=q.words;var n=q.sigBytes;var t=this.blockSize;var v=t*4;var u=n/v;if(w){u=e.ceil(u)}else{u=e.max((u|0)-this._minBufferSize,0)}var s=u*t;var r=e.min(s*4,n);if(s){for(var p=0;p<s;p+=t){this._doProcessBlock(x,p)}var o=x.splice(0,s);q.sigBytes-=r}return new l.init(o,r)},clone:function(){var n=j.clone.call(this);n._data=this._data.clone();return n},_minBufferSize:0});var f=b.Hasher=i.extend({cfg:j.extend(),init:function(n){this.cfg=this.cfg.extend(n);this.reset()},reset:function(){i.reset.call(this);this._doReset()},update:function(n){this._append(n);this._process();return this},finalize:function(n){if(n){this._append(n)}var o=this._doFinalize();return o},blockSize:512/32,_createHelper:function(n){return function(p,o){return new n.init(o).finalize(p)}},_createHmacHelper:function(n){return function(p,o){return new k.HMAC.init(n,o).finalize(p)}}});var k=a.algo={};return a}(Math);(function(g){var a=CryptoJS,f=a.lib,e=f.Base,h=f.WordArray,a=a.x64={};a.Word=e.extend({init:function(b,c){this.high=b;this.low=c}});a.WordArray=e.extend({init:function(b,c){b=this.words=b||[];this.sigBytes=c!=g?c:8*b.length},toX32:function(){for(var b=this.words,c=b.length,a=[],d=0;d<c;d++){var e=b[d];a.push(e.high);a.push(e.low)}return h.create(a,this.sigBytes)},clone:function(){for(var b=e.clone.call(this),c=b.words=this.words.slice(0),a=c.length,d=0;d<a;d++)c[d]=c[d].clone();return b}})})();CryptoJS.lib.Cipher||function(u){var g=CryptoJS,f=g.lib,k=f.Base,l=f.WordArray,q=f.BufferedBlockAlgorithm,r=g.enc.Base64,v=g.algo.EvpKDF,n=f.Cipher=q.extend({cfg:k.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c);this._xformMode=a;this._key=b;this.reset()},reset:function(){q.reset.call(this);this._doReset()},process:function(a){this._append(a);return this._process()},finalize:function(a){a&&this._append(a);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(a){return{encrypt:function(b,c,d){return("string"==typeof c?s:j).encrypt(a,b,c,d)},decrypt:function(b,c,d){return("string"==typeof c?s:j).decrypt(a,b,c,d)}}}});f.StreamCipher=n.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var m=g.mode={},t=function(a,b,c){var d=this._iv;d?this._iv=u:d=this._prevBlock;for(var e=0;e<c;e++)a[b+e]^=d[e]},h=(f.BlockCipherMode=k.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a;this._iv=b}})).extend();h.Encryptor=h.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize;t.call(this,a,b,d);c.encryptBlock(a,b);this._prevBlock=a.slice(b,b+d)}});h.Decryptor=h.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize,e=a.slice(b,b+d);c.decryptBlock(a,b);t.call(this,a,b,d);this._prevBlock=e}});m=m.CBC=h;h=(g.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,e=[],f=0;f<c;f+=4)e.push(d);c=l.create(e,c);a.concat(c)},unpad:function(a){a.sigBytes-=a.words[a.sigBytes-1>>>2]&255}};f.BlockCipher=n.extend({cfg:n.cfg.extend({mode:m,padding:h}),reset:function(){n.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var p=f.CipherParams=k.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),m=(g.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;a=a.salt;return(a?l.create([1398893684,1701076831]).concat(a).concat(b):b).toString(r)},parse:function(a){a=r.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=l.create(b.slice(2,4));b.splice(0,4);a.sigBytes-=16}return p.create({ciphertext:a,salt:c})}},j=f.SerializableCipher=k.extend({cfg:k.extend({format:m}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d);b=e.finalize(b);e=e.cfg;return p.create({ciphertext:b,key:c,iv:e.iv,algorithm:a,mode:e.mode,padding:e.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);return a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),g=(g.kdf={}).OpenSSL={execute:function(a,b,c,d){d||(d=l.random(8));a=v.create({keySize:b+c}).compute(a,d);c=l.create(a.words.slice(b),4*c);a.sigBytes=4*b;return p.create({key:a,iv:c,salt:d})}},s=f.PasswordBasedCipher=j.extend({cfg:j.cfg.extend({kdf:g}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);c=d.kdf.execute(c,a.keySize,a.ivSize);d.iv=c.iv;a=j.encrypt.call(this,a,b,c.key,d);a.mixIn(c);return a},decrypt:function(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);c=d.kdf.execute(c,a.keySize,a.ivSize,b.salt);d.iv=c.iv;return j.decrypt.call(this,a,b,c.key,d)}})}();(function(){for(var q=CryptoJS,x=q.lib.BlockCipher,r=q.algo,j=[],y=[],z=[],A=[],B=[],C=[],s=[],u=[],v=[],w=[],g=[],k=0;256>k;k++)g[k]=128>k?k<<1:k<<1^283;for(var n=0,l=0,k=0;256>k;k++){var f=l^l<<1^l<<2^l<<3^l<<4,f=f>>>8^f&255^99;j[n]=f;y[f]=n;var t=g[n],D=g[t],E=g[D],b=257*g[f]^16843008*f;z[n]=b<<24|b>>>8;A[n]=b<<16|b>>>16;B[n]=b<<8|b>>>24;C[n]=b;b=16843009*E^65537*D^257*t^16843008*n;s[f]=b<<24|b>>>8;u[f]=b<<16|b>>>16;v[f]=b<<8|b>>>24;w[f]=b;n?(n=t^g[g[g[E^t]]],l^=g[g[l]]):n=l=1}var F=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=x.extend({_doReset:function(){for(var c=this._key,e=c.words,a=c.sigBytes/4,c=4*((this._nRounds=a+6)+1),b=this._keySchedule=[],h=0;h<c;h++)if(h<a)b[h]=e[h];else{var d=b[h-1];h%a?6<a&&4==h%a&&(d=j[d>>>24]<<24|j[d>>>16&255]<<16|j[d>>>8&255]<<8|j[d&255]):(d=d<<8|d>>>24,d=j[d>>>24]<<24|j[d>>>16&255]<<16|j[d>>>8&255]<<8|j[d&255],d^=F[h/a|0]<<24);b[h]=b[h-a]^d}e=this._invKeySchedule=[];for(a=0;a<c;a++)h=c-a,d=a%4?b[h]:b[h-4],e[a]=4>a||4>=h?d:s[j[d>>>24]]^u[j[d>>>16&255]]^v[j[d>>>8&255]]^w[j[d&255]]},encryptBlock:function(c,e){this._doCryptBlock(c,e,this._keySchedule,z,A,B,C,j)},decryptBlock:function(c,e){var a=c[e+1];c[e+1]=c[e+3];c[e+3]=a;this._doCryptBlock(c,e,this._invKeySchedule,s,u,v,w,y);a=c[e+1];c[e+1]=c[e+3];c[e+3]=a},_doCryptBlock:function(c,e,a,b,h,d,j,m){for(var n=this._nRounds,f=c[e]^a[0],g=c[e+1]^a[1],k=c[e+2]^a[2],p=c[e+3]^a[3],l=4,t=1;t<n;t++)var q=b[f>>>24]^h[g>>>16&255]^d[k>>>8&255]^j[p&255]^a[l++],r=b[g>>>24]^h[k>>>16&255]^d[p>>>8&255]^j[f&255]^a[l++],s=b[k>>>24]^h[p>>>16&255]^d[f>>>8&255]^j[g&255]^a[l++],p=b[p>>>24]^h[f>>>16&255]^d[g>>>8&255]^j[k&255]^a[l++],f=q,g=r,k=s;q=(m[f>>>24]<<24|m[g>>>16&255]<<16|m[k>>>8&255]<<8|m[p&255])^a[l++];r=(m[g>>>24]<<24|m[k>>>16&255]<<16|m[p>>>8&255]<<8|m[f&255])^a[l++];s=(m[k>>>24]<<24|m[p>>>16&255]<<16|m[f>>>8&255]<<8|m[g&255])^a[l++];p=(m[p>>>24]<<24|m[f>>>16&255]<<16|m[g>>>8&255]<<8|m[k&255])^a[l++];c[e]=q;c[e+1]=r;c[e+2]=s;c[e+3]=p},keySize:8});q.AES=x._createHelper(r)})();(function(){function j(b,c){var a=(this._lBlock>>>b^this._rBlock)&c;this._rBlock^=a;this._lBlock^=a<<b}function l(b,c){var a=(this._rBlock>>>b^this._lBlock)&c;this._lBlock^=a;this._rBlock^=a<<b}var h=CryptoJS,e=h.lib,n=e.WordArray,e=e.BlockCipher,g=h.algo,q=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],p=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],r=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],s=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],t=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=g.DES=e.extend({_doReset:function(){for(var b=this._key.words,c=[],a=0;56>a;a++){var f=q[a]-1;c[a]=b[f>>>5]>>>31-f%32&1}b=this._subKeys=[];for(f=0;16>f;f++){for(var d=b[f]=[],e=r[f],a=0;24>a;a++)d[a/6|0]|=c[(p[a]-1+e)%28]<<31-a%6,d[4+(a/6|0)]|=c[28+(p[a+24]-1+e)%28]<<31-a%6;d[0]=d[0]<<1|d[0]>>>31;for(a=1;7>a;a++)d[a]>>>=4*(a-1)+3;d[7]=d[7]<<5|d[7]>>>27}c=this._invSubKeys=[];for(a=0;16>a;a++)c[a]=b[15-a]},encryptBlock:function(b,c){this._doCryptBlock(b,c,this._subKeys)},decryptBlock:function(b,c){this._doCryptBlock(b,c,this._invSubKeys)},_doCryptBlock:function(b,c,a){this._lBlock=b[c];this._rBlock=b[c+1];j.call(this,4,252645135);j.call(this,16,65535);l.call(this,2,858993459);l.call(this,8,16711935);j.call(this,1,1431655765);for(var f=0;16>f;f++){for(var d=a[f],e=this._lBlock,h=this._rBlock,g=0,k=0;8>k;k++)g|=s[k][((h^d[k])&t[k])>>>0];this._lBlock=h;this._rBlock=e^g}a=this._lBlock;this._lBlock=this._rBlock;this._rBlock=a;j.call(this,1,1431655765);l.call(this,8,16711935);l.call(this,2,858993459);j.call(this,16,65535);j.call(this,4,252645135);b[c]=this._lBlock;b[c+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});h.DES=e._createHelper(m);g=g.TripleDES=e.extend({_doReset:function(){var b=this._key.words;this._des1=m.createEncryptor(n.create(b.slice(0,2)));this._des2=m.createEncryptor(n.create(b.slice(2,4)));this._des3=m.createEncryptor(n.create(b.slice(4,6)))},encryptBlock:function(b,c){this._des1.encryptBlock(b,c);this._des2.decryptBlock(b,c);this._des3.encryptBlock(b,c)},decryptBlock:function(b,c){this._des3.decryptBlock(b,c);this._des2.encryptBlock(b,c);this._des1.decryptBlock(b,c)},keySize:6,ivSize:2,blockSize:2});h.TripleDES=e._createHelper(g)})();(function(){var h=CryptoJS,j=h.lib.WordArray;h.enc.Base64={stringify:function(b){var e=b.words,f=b.sigBytes,c=this._map;b.clamp();b=[];for(var a=0;a<f;a+=3)for(var d=(e[a>>>2]>>>24-8*(a%4)&255)<<16|(e[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|e[a+2>>>2]>>>24-8*((a+2)%4)&255,g=0;4>g&&a+.75*g<f;g++)b.push(c.charAt(d>>>6*(3-g)&63));if(e=c.charAt(64))for(;b.length%4;)b.push(e);return b.join("")},parse:function(b){var e=b.length,f=this._map,c=f.charAt(64);c&&(c=b.indexOf(c),-1!=c&&(e=c));for(var c=[],a=0,d=0;d<e;d++)if(d%4){var g=f.indexOf(b.charAt(d-1))<<2*(d%4),h=f.indexOf(b.charAt(d))>>>6-2*(d%4);
c[a>>>2]|=(g|h)<<24-8*(a%4);a++}return j.create(c,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(E){function h(a,f,g,j,p,h,k){a=a+(f&g|~f&j)+p+k;return(a<<h|a>>>32-h)+f}function k(a,f,g,j,p,h,k){a=a+(f&j|g&~j)+p+k;return(a<<h|a>>>32-h)+f}function l(a,f,g,j,h,k,l){a=a+(f^g^j)+h+l;return(a<<k|a>>>32-k)+f}function n(a,f,g,j,h,k,l){a=a+(g^(f|~j))+h+l;return(a<<k|a>>>32-k)+f}for(var r=CryptoJS,q=r.lib,F=q.WordArray,s=q.Hasher,q=r.algo,a=[],t=0;64>t;t++)a[t]=4294967296*E.abs(E.sin(t+1))|0;q=q.MD5=s.extend({_doReset:function(){this._hash=new F.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,f){for(var g=0;16>g;g++){var j=f+g,p=m[j];m[j]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360}var g=this._hash.words,j=m[f+0],p=m[f+1],q=m[f+2],r=m[f+3],s=m[f+4],t=m[f+5],u=m[f+6],v=m[f+7],w=m[f+8],x=m[f+9],y=m[f+10],z=m[f+11],A=m[f+12],B=m[f+13],C=m[f+14],D=m[f+15],b=g[0],c=g[1],d=g[2],e=g[3],b=h(b,c,d,e,j,7,a[0]),e=h(e,b,c,d,p,12,a[1]),d=h(d,e,b,c,q,17,a[2]),c=h(c,d,e,b,r,22,a[3]),b=h(b,c,d,e,s,7,a[4]),e=h(e,b,c,d,t,12,a[5]),d=h(d,e,b,c,u,17,a[6]),c=h(c,d,e,b,v,22,a[7]),b=h(b,c,d,e,w,7,a[8]),e=h(e,b,c,d,x,12,a[9]),d=h(d,e,b,c,y,17,a[10]),c=h(c,d,e,b,z,22,a[11]),b=h(b,c,d,e,A,7,a[12]),e=h(e,b,c,d,B,12,a[13]),d=h(d,e,b,c,C,17,a[14]),c=h(c,d,e,b,D,22,a[15]),b=k(b,c,d,e,p,5,a[16]),e=k(e,b,c,d,u,9,a[17]),d=k(d,e,b,c,z,14,a[18]),c=k(c,d,e,b,j,20,a[19]),b=k(b,c,d,e,t,5,a[20]),e=k(e,b,c,d,y,9,a[21]),d=k(d,e,b,c,D,14,a[22]),c=k(c,d,e,b,s,20,a[23]),b=k(b,c,d,e,x,5,a[24]),e=k(e,b,c,d,C,9,a[25]),d=k(d,e,b,c,r,14,a[26]),c=k(c,d,e,b,w,20,a[27]),b=k(b,c,d,e,B,5,a[28]),e=k(e,b,c,d,q,9,a[29]),d=k(d,e,b,c,v,14,a[30]),c=k(c,d,e,b,A,20,a[31]),b=l(b,c,d,e,t,4,a[32]),e=l(e,b,c,d,w,11,a[33]),d=l(d,e,b,c,z,16,a[34]),c=l(c,d,e,b,C,23,a[35]),b=l(b,c,d,e,p,4,a[36]),e=l(e,b,c,d,s,11,a[37]),d=l(d,e,b,c,v,16,a[38]),c=l(c,d,e,b,y,23,a[39]),b=l(b,c,d,e,B,4,a[40]),e=l(e,b,c,d,j,11,a[41]),d=l(d,e,b,c,r,16,a[42]),c=l(c,d,e,b,u,23,a[43]),b=l(b,c,d,e,x,4,a[44]),e=l(e,b,c,d,A,11,a[45]),d=l(d,e,b,c,D,16,a[46]),c=l(c,d,e,b,q,23,a[47]),b=n(b,c,d,e,j,6,a[48]),e=n(e,b,c,d,v,10,a[49]),d=n(d,e,b,c,C,15,a[50]),c=n(c,d,e,b,t,21,a[51]),b=n(b,c,d,e,A,6,a[52]),e=n(e,b,c,d,r,10,a[53]),d=n(d,e,b,c,y,15,a[54]),c=n(c,d,e,b,p,21,a[55]),b=n(b,c,d,e,w,6,a[56]),e=n(e,b,c,d,D,10,a[57]),d=n(d,e,b,c,u,15,a[58]),c=n(c,d,e,b,B,21,a[59]),b=n(b,c,d,e,s,6,a[60]),e=n(e,b,c,d,z,10,a[61]),d=n(d,e,b,c,q,15,a[62]),c=n(c,d,e,b,x,21,a[63]);g[0]=g[0]+b|0;g[1]=g[1]+c|0;g[2]=g[2]+d|0;g[3]=g[3]+e|0},_doFinalize:function(){var a=this._data,f=a.words,g=8*this._nDataBytes,j=8*a.sigBytes;f[j>>>5]|=128<<24-j%32;var h=E.floor(g/4294967296);f[(j+64>>>9<<4)+15]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360;f[(j+64>>>9<<4)+14]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360;a.sigBytes=4*(f.length+1);this._process();a=this._hash;f=a.words;for(g=0;4>g;g++)j=f[g],f[g]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360;return a},clone:function(){var a=s.clone.call(this);a._hash=this._hash.clone();return a}});r.MD5=s._createHelper(q);r.HmacMD5=s._createHmacHelper(q)})(Math);(function(){var k=CryptoJS,b=k.lib,m=b.WordArray,l=b.Hasher,d=[],b=k.algo.SHA1=l.extend({_doReset:function(){this._hash=new m.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(n,p){for(var a=this._hash.words,e=a[0],f=a[1],h=a[2],j=a[3],b=a[4],c=0;80>c;c++){if(16>c)d[c]=n[p+c]|0;else{var g=d[c-3]^d[c-8]^d[c-14]^d[c-16];d[c]=g<<1|g>>>31}g=(e<<5|e>>>27)+b+d[c];g=20>c?g+((f&h|~f&j)+1518500249):40>c?g+((f^h^j)+1859775393):60>c?g+((f&h|f&j|h&j)-1894007588):g+((f^h^j)-899497514);b=j;j=h;h=f<<30|f>>>2;f=e;e=g}a[0]=a[0]+e|0;a[1]=a[1]+f|0;a[2]=a[2]+h|0;a[3]=a[3]+j|0;a[4]=a[4]+b|0},_doFinalize:function(){var b=this._data,d=b.words,a=8*this._nDataBytes,e=8*b.sigBytes;d[e>>>5]|=128<<24-e%32;d[(e+64>>>9<<4)+14]=Math.floor(a/4294967296);d[(e+64>>>9<<4)+15]=a;b.sigBytes=4*d.length;this._process();return this._hash},clone:function(){var b=l.clone.call(this);b._hash=this._hash.clone();return b}});k.SHA1=l._createHelper(b);k.HmacSHA1=l._createHmacHelper(b)})();(function(k){for(var g=CryptoJS,h=g.lib,v=h.WordArray,j=h.Hasher,h=g.algo,s=[],t=[],u=function(q){return 4294967296*(q-(q|0))|0},l=2,b=0;64>b;){var d;a:{d=l;for(var w=k.sqrt(d),r=2;r<=w;r++)if(!(d%r)){d=!1;break a}d=!0}d&&(8>b&&(s[b]=u(k.pow(l,.5))),t[b]=u(k.pow(l,1/3)),b++);l++}var n=[],h=h.SHA256=j.extend({_doReset:function(){this._hash=new v.init(s.slice(0))},_doProcessBlock:function(q,h){for(var a=this._hash.words,c=a[0],d=a[1],b=a[2],k=a[3],f=a[4],g=a[5],j=a[6],l=a[7],e=0;64>e;e++){if(16>e)n[e]=q[h+e]|0;else{var m=n[e-15],p=n[e-2];n[e]=((m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3)+n[e-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+n[e-16]}m=l+((f<<26|f>>>6)^(f<<21|f>>>11)^(f<<7|f>>>25))+(f&g^~f&j)+t[e]+n[e];p=((c<<30|c>>>2)^(c<<19|c>>>13)^(c<<10|c>>>22))+(c&d^c&b^d&b);l=j;j=g;g=f;f=k+m|0;k=b;b=d;d=c;c=m+p|0}a[0]=a[0]+c|0;a[1]=a[1]+d|0;a[2]=a[2]+b|0;a[3]=a[3]+k|0;a[4]=a[4]+f|0;a[5]=a[5]+g|0;a[6]=a[6]+j|0;a[7]=a[7]+l|0},_doFinalize:function(){var d=this._data,b=d.words,a=8*this._nDataBytes,c=8*d.sigBytes;b[c>>>5]|=128<<24-c%32;b[(c+64>>>9<<4)+14]=k.floor(a/4294967296);b[(c+64>>>9<<4)+15]=a;d.sigBytes=4*b.length;this._process();return this._hash},clone:function(){var b=j.clone.call(this);b._hash=this._hash.clone();return b}});g.SHA256=j._createHelper(h);g.HmacSHA256=j._createHmacHelper(h)})(Math);(function(){var b=CryptoJS,d=b.lib.WordArray,a=b.algo,c=a.SHA256,a=a.SHA224=c.extend({_doReset:function(){this._hash=new d.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var a=c._doFinalize.call(this);a.sigBytes-=4;return a}});b.SHA224=c._createHelper(a);b.HmacSHA224=c._createHmacHelper(a)})();(function(){function a(){return d.create.apply(d,arguments)}for(var n=CryptoJS,r=n.lib.Hasher,e=n.x64,d=e.Word,T=e.WordArray,e=n.algo,ea=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],v=[],w=0;80>w;w++)v[w]=a();e=e.SHA512=r.extend({_doReset:function(){this._hash=new T.init([new d.init(1779033703,4089235720),new d.init(3144134277,2227873595),new d.init(1013904242,4271175723),new d.init(2773480762,1595750129),new d.init(1359893119,2917565137),new d.init(2600822924,725511199),new d.init(528734635,4215389547),new d.init(1541459225,327033209)])},_doProcessBlock:function(a,d){for(var f=this._hash.words,F=f[0],e=f[1],n=f[2],r=f[3],G=f[4],H=f[5],I=f[6],f=f[7],w=F.high,J=F.low,X=e.high,K=e.low,Y=n.high,L=n.low,Z=r.high,M=r.low,$=G.high,N=G.low,aa=H.high,O=H.low,ba=I.high,P=I.low,ca=f.high,Q=f.low,k=w,g=J,z=X,x=K,A=Y,y=L,U=Z,B=M,l=$,h=N,R=aa,C=O,S=ba,D=P,V=ca,E=Q,m=0;80>m;m++){var s=v[m];if(16>m)var j=s.high=a[d+2*m]|0,b=s.low=a[d+2*m+1]|0;else{var j=v[m-15],b=j.high,p=j.low,j=(b>>>1|p<<31)^(b>>>8|p<<24)^b>>>7,p=(p>>>1|b<<31)^(p>>>8|b<<24)^(p>>>7|b<<25),u=v[m-2],b=u.high,c=u.low,u=(b>>>19|c<<13)^(b<<3|c>>>29)^b>>>6,c=(c>>>19|b<<13)^(c<<3|b>>>29)^(c>>>6|b<<26),b=v[m-7],W=b.high,t=v[m-16],q=t.high,t=t.low,b=p+b.low,j=j+W+(b>>>0<p>>>0?1:0),b=b+c,j=j+u+(b>>>0<c>>>0?1:0),b=b+t,j=j+q+(b>>>0<t>>>0?1:0);s.high=j;s.low=b}var W=l&R^~l&S,t=h&C^~h&D,s=k&z^k&A^z&A,T=g&x^g&y^x&y,p=(k>>>28|g<<4)^(k<<30|g>>>2)^(k<<25|g>>>7),u=(g>>>28|k<<4)^(g<<30|k>>>2)^(g<<25|k>>>7),c=ea[m],fa=c.high,da=c.low,c=E+((h>>>14|l<<18)^(h>>>18|l<<14)^(h<<23|l>>>9)),q=V+((l>>>14|h<<18)^(l>>>18|h<<14)^(l<<23|h>>>9))+(c>>>0<E>>>0?1:0),c=c+t,q=q+W+(c>>>0<t>>>0?1:0),c=c+da,q=q+fa+(c>>>0<da>>>0?1:0),c=c+b,q=q+j+(c>>>0<b>>>0?1:0),b=u+T,s=p+s+(b>>>0<u>>>0?1:0),V=S,E=D,S=R,D=C,R=l,C=h,h=B+c|0,l=U+q+(h>>>0<B>>>0?1:0)|0,U=A,B=y,A=z,y=x,z=k,x=g,g=c+b|0,k=q+s+(g>>>0<c>>>0?1:0)|0}J=F.low=J+g;F.high=w+k+(J>>>0<g>>>0?1:0);K=e.low=K+x;e.high=X+z+(K>>>0<x>>>0?1:0);L=n.low=L+y;n.high=Y+A+(L>>>0<y>>>0?1:0);M=r.low=M+B;r.high=Z+U+(M>>>0<B>>>0?1:0);N=G.low=N+h;G.high=$+l+(N>>>0<h>>>0?1:0);O=H.low=O+C;H.high=aa+R+(O>>>0<C>>>0?1:0);P=I.low=P+D;I.high=ba+S+(P>>>0<D>>>0?1:0);Q=f.low=Q+E;f.high=ca+V+(Q>>>0<E>>>0?1:0)},_doFinalize:function(){var a=this._data,d=a.words,f=8*this._nDataBytes,e=8*a.sigBytes;d[e>>>5]|=128<<24-e%32;d[(e+128>>>10<<5)+30]=Math.floor(f/4294967296);d[(e+128>>>10<<5)+31]=f;a.sigBytes=4*d.length;this._process();return this._hash.toX32()},clone:function(){var a=r.clone.call(this);a._hash=this._hash.clone();return a},blockSize:32});n.SHA512=r._createHelper(e);n.HmacSHA512=r._createHmacHelper(e)})();(function(){var c=CryptoJS,a=c.x64,b=a.Word,e=a.WordArray,a=c.algo,d=a.SHA512,a=a.SHA384=d.extend({_doReset:function(){this._hash=new e.init([new b.init(3418070365,3238371032),new b.init(1654270250,914150663),new b.init(2438529370,812702999),new b.init(355462360,4144912697),new b.init(1731405415,4290775857),new b.init(2394180231,1750603025),new b.init(3675008525,1694076839),new b.init(1203062813,3204075428)])},_doFinalize:function(){var a=d._doFinalize.call(this);a.sigBytes-=16;return a}});c.SHA384=d._createHelper(a);c.HmacSHA384=d._createHmacHelper(a)})();(function(){var q=CryptoJS,d=q.lib,n=d.WordArray,p=d.Hasher,d=q.algo,x=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),y=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),z=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),A=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),B=n.create([0,1518500249,1859775393,2400959708,2840853838]),C=n.create([1352829926,1548603684,1836072691,2053994217,0]),d=d.RIPEMD160=p.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,v){for(var b=0;16>b;b++){var c=v+b,f=e[c];e[c]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360}var c=this._hash.words,f=B.words,d=C.words,n=x.words,q=y.words,p=z.words,w=A.words,t,g,h,j,r,u,k,l,m,s;u=t=c[0];k=g=c[1];l=h=c[2];m=j=c[3];s=r=c[4];for(var a,b=0;80>b;b+=1)a=t+e[v+n[b]]|0,a=16>b?a+((g^h^j)+f[0]):32>b?a+((g&h|~g&j)+f[1]):48>b?a+(((g|~h)^j)+f[2]):64>b?a+((g&j|h&~j)+f[3]):a+((g^(h|~j))+f[4]),a|=0,a=a<<p[b]|a>>>32-p[b],a=a+r|0,t=r,r=j,j=h<<10|h>>>22,h=g,g=a,a=u+e[v+q[b]]|0,a=16>b?a+((k^(l|~m))+d[0]):32>b?a+((k&m|l&~m)+d[1]):48>b?a+(((k|~l)^m)+d[2]):64>b?a+((k&l|~k&m)+d[3]):a+((k^l^m)+d[4]),a|=0,a=a<<w[b]|a>>>32-w[b],a=a+s|0,u=s,s=m,m=l<<10|l>>>22,l=k,k=a;a=c[1]+h+m|0;c[1]=c[2]+j+s|0;c[2]=c[3]+r+u|0;c[3]=c[4]+t+k|0;c[4]=c[0]+g+l|0;c[0]=a},_doFinalize:function(){var e=this._data,d=e.words,b=8*this._nDataBytes,c=8*e.sigBytes;d[c>>>5]|=128<<24-c%32;d[(c+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360;e.sigBytes=4*(d.length+1);this._process();e=this._hash;d=e.words;for(b=0;5>b;b++)c=d[b],d[b]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;return e},clone:function(){var d=p.clone.call(this);d._hash=this._hash.clone();return d}});q.RIPEMD160=p._createHelper(d);q.HmacRIPEMD160=p._createHmacHelper(d)})(Math);(function(){var c=CryptoJS,k=c.enc.Utf8;c.algo.HMAC=c.lib.Base.extend({init:function(a,b){a=this._hasher=new a.init;"string"==typeof b&&(b=k.parse(b));var c=a.blockSize,e=4*c;b.sigBytes>e&&(b=a.finalize(b));b.clamp();for(var f=this._oKey=b.clone(),g=this._iKey=b.clone(),h=f.words,j=g.words,d=0;d<c;d++)h[d]^=1549556828,j[d]^=909522486;f.sigBytes=g.sigBytes=e;this.reset()},reset:function(){var a=this._hasher;a.reset();a.update(this._iKey)},update:function(a){this._hasher.update(a);return this},finalize:function(a){var b=this._hasher;a=b.finalize(a);b.reset();return b.finalize(this._oKey.clone().concat(a))}})})();(function(){var b=CryptoJS,a=b.lib,d=a.Base,m=a.WordArray,a=b.algo,q=a.HMAC,l=a.PBKDF2=d.extend({cfg:d.extend({keySize:4,hasher:a.SHA1,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,f=q.create(c.hasher,a),g=m.create(),d=m.create([1]),l=g.words,r=d.words,n=c.keySize,c=c.iterations;l.length<n;){var h=f.update(b).finalize(d);f.reset();for(var j=h.words,s=j.length,k=h,p=1;p<c;p++){k=f.finalize(k);f.reset();for(var t=k.words,e=0;e<s;e++)j[e]^=t[e]}g.concat(h);r[0]++}g.sigBytes=4*n;return g}});b.PBKDF2=function(a,b,c){return l.create(c).compute(a,b)}})();var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var b64pad="=";function hex2b64(d){var b;var e;var a="";for(b=0;b+3<=d.length;b+=3){e=parseInt(d.substring(b,b+3),16);a+=b64map.charAt(e>>6)+b64map.charAt(e&63)}if(b+1==d.length){e=parseInt(d.substring(b,b+1),16);a+=b64map.charAt(e<<2)}else{if(b+2==d.length){e=parseInt(d.substring(b,b+2),16);a+=b64map.charAt(e>>2)+b64map.charAt((e&3)<<4)}}if(b64pad){while((a.length&3)>0){a+=b64pad}}return a}function b64tohex(f){var d="";var e;var b=0;var c;var a;for(e=0;e<f.length;++e){if(f.charAt(e)==b64pad){break}a=b64map.indexOf(f.charAt(e));if(a<0){continue}if(b==0){d+=int2char(a>>2);c=a&3;b=1}else{if(b==1){d+=int2char(c<<2|a>>4);c=a&15;b=2}else{if(b==2){d+=int2char(c);d+=int2char(a>>2);c=a&3;b=3}else{d+=int2char(c<<2|a>>4);d+=int2char(a&15);b=0}}}}if(b==1){d+=int2char(c<<2)}return d}function b64toBA(e){var d=b64tohex(e);var c;var b=new Array;for(c=0;2*c<d.length;++c){b[c]=parseInt(d.substring(2*c,2*c+2),16)}return b}var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&16777215)==15715070;function BigInteger(e,d,f){if(e!=null){if("number"==typeof e){this.fromNumber(e,d,f)}else{if(d==null&&"string"!=typeof e){this.fromString(e,256)}else{this.fromString(e,d)}}}}function nbi(){return new BigInteger(null)}function am1(f,a,b,e,h,g){while(--g>=0){var d=a*this[f++]+b[e]+h;h=Math.floor(d/67108864);b[e++]=d&67108863}return h}function am2(f,q,r,e,o,a){var k=q&32767,p=q>>15;while(--a>=0){var d=this[f]&32767;var g=this[f++]>>15;var b=p*d+g*k;d=k*d+((b&32767)<<15)+r[e]+(o&1073741823);o=(d>>>30)+(b>>>15)+p*g+(o>>>30);r[e++]=d&1073741823}return o}function am3(f,q,r,e,o,a){var k=q&16383,p=q>>14;while(--a>=0){var d=this[f]&16383;var g=this[f++]>>14;var b=p*d+g*k;d=k*d+((b&16383)<<14)+r[e]+o;o=(d>>28)+(b>>14)+p*g;r[e++]=d&268435455}return o}if(j_lm&&navigator.appName=="Microsoft Internet Explorer"){BigInteger.prototype.am=am2;dbits=30}else{if(j_lm&&navigator.appName!="Netscape"){BigInteger.prototype.am=am1;dbits=26}else{BigInteger.prototype.am=am3;dbits=28}}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=new Array;var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv){BI_RC[rr++]=vv}rr="a".charCodeAt(0);for(vv=10;vv<36;++vv){BI_RC[rr++]=vv}rr="A".charCodeAt(0);for(vv=10;vv<36;++vv){BI_RC[rr++]=vv}function int2char(a){return BI_RM.charAt(a)}function intAt(b,a){var d=BI_RC[b.charCodeAt(a)];return d==null?-1:d}function bnpCopyTo(b){for(var a=this.t-1;a>=0;--a){b[a]=this[a]}b.t=this.t;b.s=this.s}function bnpFromInt(a){this.t=1;this.s=a<0?-1:0;if(a>0){this[0]=a}else{if(a<-1){this[0]=a+this.DV}else{this.t=0}}}function nbv(a){var b=nbi();b.fromInt(a);return b}function bnpFromString(h,c){var e;if(c==16){e=4}else{if(c==8){e=3}else{if(c==256){e=8}else{if(c==2){e=1}else{if(c==32){e=5}else{if(c==4){e=2}else{this.fromRadix(h,c);return}}}}}}this.t=0;this.s=0;var g=h.length,d=false,f=0;while(--g>=0){var a=e==8?h[g]&255:intAt(h,g);if(a<0){if(h.charAt(g)=="-"){d=true}continue}d=false;if(f==0){this[this.t++]=a}else{if(f+e>this.DB){this[this.t-1]|=(a&(1<<this.DB-f)-1)<<f;this[this.t++]=a>>this.DB-f}else{this[this.t-1]|=a<<f}}f+=e;if(f>=this.DB){f-=this.DB}}if(e==8&&(h[0]&128)!=0){this.s=-1;if(f>0){this[this.t-1]|=(1<<this.DB-f)-1<<f}}this.clamp();if(d){BigInteger.ZERO.subTo(this,this)}}function bnpClamp(){var a=this.s&this.DM;while(this.t>0&&this[this.t-1]==a){--this.t}}function bnToString(c){if(this.s<0){return"-"+this.negate().toString(c)}var e;if(c==16){e=4}else{if(c==8){e=3}else{if(c==2){e=1}else{if(c==32){e=5}else{if(c==4){e=2}else{return this.toRadix(c)}}}}}var g=(1<<e)-1,l,a=false,h="",f=this.t;var j=this.DB-f*this.DB%e;if(f-- >0){if(j<this.DB&&(l=this[f]>>j)>0){a=true;h=int2char(l)}while(f>=0){if(j<e){l=(this[f]&(1<<j)-1)<<e-j;l|=this[--f]>>(j+=this.DB-e)}else{l=this[f]>>(j-=e)&g;if(j<=0){j+=this.DB;--f}}if(l>0){a=true}if(a){h+=int2char(l)}}}return a?h:"0"}function bnNegate(){var a=nbi();BigInteger.ZERO.subTo(this,a);return a}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(b){var d=this.s-b.s;if(d!=0){return d}var c=this.t;d=c-b.t;if(d!=0){return this.s<0?-d:d}while(--c>=0){if((d=this[c]-b[c])!=0){return d}}return 0}function nbits(a){var c=1,b;if((b=a>>>16)!=0){a=b;c+=16}if((b=a>>8)!=0){a=b;c+=8}if((b=a>>4)!=0){a=b;c+=4}if((b=a>>2)!=0){a=b;c+=2}if((b=a>>1)!=0){a=b;c+=1}return c}function bnBitLength(){if(this.t<=0){return 0}return this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(c,b){var a;for(a=this.t-1;a>=0;--a){b[a+c]=this[a]}for(a=c-1;a>=0;--a){b[a]=0}b.t=this.t+c;b.s=this.s}function bnpDRShiftTo(c,b){for(var a=c;a<this.t;++a){b[a-c]=this[a]}b.t=Math.max(this.t-c,0);b.s=this.s}function bnpLShiftTo(j,e){var b=j%this.DB;var a=this.DB-b;var g=(1<<a)-1;var f=Math.floor(j/this.DB),h=this.s<<b&this.DM,d;for(d=this.t-1;d>=0;--d){e[d+f+1]=this[d]>>a|h;h=(this[d]&g)<<b}for(d=f-1;d>=0;--d){e[d]=0}e[f]=h;e.t=this.t+f+1;e.s=this.s;e.clamp()}function bnpRShiftTo(g,d){d.s=this.s;var e=Math.floor(g/this.DB);if(e>=this.t){d.t=0;return}var b=g%this.DB;var a=this.DB-b;var f=(1<<b)-1;d[0]=this[e]>>b;for(var c=e+1;c<this.t;++c){d[c-e-1]|=(this[c]&f)<<a;d[c-e]=this[c]>>b}if(b>0){d[this.t-e-1]|=(this.s&f)<<a}d.t=this.t-e;d.clamp()}function bnpSubTo(d,f){var e=0,g=0,b=Math.min(d.t,this.t);while(e<b){g+=this[e]-d[e];f[e++]=g&this.DM;g>>=this.DB}if(d.t<this.t){g-=d.s;while(e<this.t){g+=this[e];f[e++]=g&this.DM;g>>=this.DB}g+=this.s}else{g+=this.s;while(e<d.t){g-=d[e];f[e++]=g&this.DM;g>>=this.DB}g-=d.s}f.s=g<0?-1:0;if(g<-1){f[e++]=this.DV+g}else{if(g>0){f[e++]=g}}f.t=e;f.clamp()}function bnpMultiplyTo(c,e){var b=this.abs(),f=c.abs();var d=b.t;e.t=d+f.t;while(--d>=0){e[d]=0}for(d=0;d<f.t;++d){e[d+b.t]=b.am(0,f[d],e,d,0,b.t)}e.s=0;e.clamp();if(this.s!=c.s){BigInteger.ZERO.subTo(e,e)}}function bnpSquareTo(d){var a=this.abs();var b=d.t=2*a.t;while(--b>=0){d[b]=0}for(b=0;b<a.t-1;++b){var e=a.am(b,a[b],d,2*b,0,1);if((d[b+a.t]+=a.am(b+1,2*a[b],d,2*b+1,e,a.t-b-1))>=a.DV){d[b+a.t]-=a.DV;d[b+a.t+1]=1}}if(d.t>0){d[d.t-1]+=a.am(b,a[b],d,2*b,0,1)}d.s=0;d.clamp()}function bnpDivRemTo(n,h,g){var w=n.abs();if(w.t<=0){return}var k=this.abs();if(k.t<w.t){if(h!=null){h.fromInt(0)}if(g!=null){this.copyTo(g)}return}if(g==null){g=nbi()}var d=nbi(),a=this.s,l=n.s;var v=this.DB-nbits(w[w.t-1]);if(v>0){w.lShiftTo(v,d);k.lShiftTo(v,g)}else{w.copyTo(d);k.copyTo(g)}var p=d.t;var b=d[p-1];if(b==0){return}var o=b*(1<<this.F1)+(p>1?d[p-2]>>this.F2:0);var A=this.FV/o,z=(1<<this.F1)/o,x=1<<this.F2;var u=g.t,s=u-p,f=h==null?nbi():h;d.dlShiftTo(s,f);if(g.compareTo(f)>=0){g[g.t++]=1;g.subTo(f,g)}BigInteger.ONE.dlShiftTo(p,f);f.subTo(d,d);while(d.t<p){d[d.t++]=0}while(--s>=0){var c=g[--u]==b?this.DM:Math.floor(g[u]*A+(g[u-1]+x)*z);if((g[u]+=d.am(0,c,g,s,0,p))<c){d.dlShiftTo(s,f);g.subTo(f,g);while(g[u]<--c){g.subTo(f,g)}}}if(h!=null){g.drShiftTo(p,h);if(a!=l){BigInteger.ZERO.subTo(h,h)}}g.t=p;g.clamp();if(v>0){g.rShiftTo(v,g)}if(a<0){BigInteger.ZERO.subTo(g,g)}}function bnMod(b){var c=nbi();this.abs().divRemTo(b,null,c);if(this.s<0&&c.compareTo(BigInteger.ZERO)>0){b.subTo(c,c)}return c}function Classic(a){this.m=a}function cConvert(a){if(a.s<0||a.compareTo(this.m)>=0){return a.mod(this.m)}else{return a}}function cRevert(a){return a}function cReduce(a){a.divRemTo(this.m,null,a)}function cMulTo(a,c,b){a.multiplyTo(c,b);this.reduce(b)}function cSqrTo(a,b){a.squareTo(b);this.reduce(b)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1){return 0}var a=this[0];if((a&1)==0){return 0}var b=a&3;b=b*(2-(a&15)*b)&15;b=b*(2-(a&255)*b)&255;b=b*(2-((a&65535)*b&65535))&65535;b=b*(2-a*b%this.DV)%this.DV;return b>0?this.DV-b:-b}function Montgomery(a){this.m=a;this.mp=a.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<a.DB-15)-1;this.mt2=2*a.t}function montConvert(a){var b=nbi();a.abs().dlShiftTo(this.m.t,b);b.divRemTo(this.m,null,b);if(a.s<0&&b.compareTo(BigInteger.ZERO)>0){this.m.subTo(b,b)}return b}function montRevert(a){var b=nbi();a.copyTo(b);this.reduce(b);return b}function montReduce(a){while(a.t<=this.mt2){a[a.t++]=0}for(var c=0;c<this.m.t;++c){var b=a[c]&32767;var d=b*this.mpl+((b*this.mph+(a[c]>>15)*this.mpl&this.um)<<15)&a.DM;b=c+this.m.t;a[b]+=this.m.am(0,d,a,c,0,this.m.t);while(a[b]>=a.DV){a[b]-=a.DV;a[++b]++}}a.clamp();a.drShiftTo(this.m.t,a);if(a.compareTo(this.m)>=0){a.subTo(this.m,a)}}function montSqrTo(a,b){a.squareTo(b);this.reduce(b)}function montMulTo(a,c,b){a.multiplyTo(c,b);this.reduce(b)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(h,j){if(h>4294967295||h<1){return BigInteger.ONE}var f=nbi(),a=nbi(),d=j.convert(this),c=nbits(h)-1;d.copyTo(f);while(--c>=0){j.sqrTo(f,a);if((h&1<<c)>0){j.mulTo(a,d,f)}else{var b=f;f=a;a=b}}return j.revert(f)}function bnModPowInt(b,a){var c;if(b<256||a.isEven()){c=new Classic(a)}else{c=new Montgomery(a)}return this.exp(b,c)}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var a=nbi();this.copyTo(a);return a}function bnIntValue(){if(this.s<0){if(this.t==1){return this[0]-this.DV}else{if(this.t==0){return-1}}}else{if(this.t==1){return this[0]}else{if(this.t==0){return 0}}}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16}function bnpChunkSize(a){return Math.floor(Math.LN2*this.DB/Math.log(a))}function bnSigNum(){if(this.s<0){return-1}else{if(this.t<=0||this.t==1&&this[0]<=0){return 0}else{return 1}}}function bnpToRadix(c){if(c==null){c=10}if(this.signum()==0||c<2||c>36){return"0"}var f=this.chunkSize(c);var e=Math.pow(c,f);var i=nbv(e),j=nbi(),h=nbi(),g="";this.divRemTo(i,j,h);while(j.signum()>0){g=(e+h.intValue()).toString(c).substr(1)+g;j.divRemTo(i,j,h)}return h.intValue().toString(c)+g}function bnpFromRadix(m,h){this.fromInt(0);if(h==null){h=10}var f=this.chunkSize(h);var g=Math.pow(h,f),e=false,a=0,l=0;for(var c=0;c<m.length;++c){var k=intAt(m,c);if(k<0){if(m.charAt(c)=="-"&&this.signum()==0){e=true}continue}l=h*l+k;if(++a>=f){this.dMultiply(g);this.dAddOffset(l,0);a=0;l=0}}if(a>0){this.dMultiply(Math.pow(h,a));this.dAddOffset(l,0)}if(e){BigInteger.ZERO.subTo(this,this)}}function bnpFromNumber(f,e,h){if("number"==typeof e){if(f<2){this.fromInt(1)}else{this.fromNumber(f,h);if(!this.testBit(f-1)){this.bitwiseTo(BigInteger.ONE.shiftLeft(f-1),op_or,this)}if(this.isEven()){this.dAddOffset(1,0)}while(!this.isProbablePrime(e)){this.dAddOffset(2,0);if(this.bitLength()>f){this.subTo(BigInteger.ONE.shiftLeft(f-1),this)}}}}else{var d=new Array,g=f&7;d.length=(f>>3)+1;e.nextBytes(d);if(g>0){d[0]&=(1<<g)-1}else{d[0]=0}this.fromString(d,256)}}function bnToByteArray(){var b=this.t,c=new Array;c[0]=this.s;var e=this.DB-b*this.DB%8,f,a=0;if(b-- >0){if(e<this.DB&&(f=this[b]>>e)!=(this.s&this.DM)>>e){c[a++]=f|this.s<<this.DB-e}while(b>=0){if(e<8){f=(this[b]&(1<<e)-1)<<8-e;f|=this[--b]>>(e+=this.DB-8)}else{f=this[b]>>(e-=8)&255;if(e<=0){e+=this.DB;--b}}if((f&128)!=0){f|=-256}if(a==0&&(this.s&128)!=(f&128)){++a}if(a>0||f!=this.s){c[a++]=f}}}return c}function bnEquals(b){return this.compareTo(b)==0}function bnMin(b){return this.compareTo(b)<0?this:b}function bnMax(b){return this.compareTo(b)>0?this:b}function bnpBitwiseTo(c,h,e){var d,g,b=Math.min(c.t,this.t);for(d=0;d<b;++d){e[d]=h(this[d],c[d])}if(c.t<this.t){g=c.s&this.DM;for(d=b;d<this.t;++d){e[d]=h(this[d],g)}e.t=this.t}else{g=this.s&this.DM;for(d=b;d<c.t;++d){e[d]=h(g,c[d])}e.t=c.t}e.s=h(this.s,c.s);e.clamp()}function op_and(a,b){return a&b}function bnAnd(b){var c=nbi();this.bitwiseTo(b,op_and,c);return c}function op_or(a,b){return a|b}function bnOr(b){var c=nbi();this.bitwiseTo(b,op_or,c);return c}function op_xor(a,b){return a^b}function bnXor(b){var c=nbi();this.bitwiseTo(b,op_xor,c);return c}function op_andnot(a,b){return a&~b}function bnAndNot(b){var c=nbi();this.bitwiseTo(b,op_andnot,c);return c}function bnNot(){var b=nbi();for(var a=0;a<this.t;++a){b[a]=this.DM&~this[a]}b.t=this.t;b.s=~this.s;return b}function bnShiftLeft(b){var a=nbi();if(b<0){this.rShiftTo(-b,a)}else{this.lShiftTo(b,a)}return a}function bnShiftRight(b){var a=nbi();if(b<0){this.lShiftTo(-b,a)}else{this.rShiftTo(b,a)}return a}function lbit(a){if(a==0){return-1}var b=0;if((a&65535)==0){a>>=16;b+=16}if((a&255)==0){a>>=8;b+=8}if((a&15)==0){a>>=4;b+=4}if((a&3)==0){a>>=2;b+=2}if((a&1)==0){++b}return b}function bnGetLowestSetBit(){for(var a=0;a<this.t;++a){if(this[a]!=0){return a*this.DB+lbit(this[a])}}if(this.s<0){return this.t*this.DB}return-1}function cbit(a){var b=0;while(a!=0){a&=a-1;++b}return b}function bnBitCount(){var c=0,a=this.s&this.DM;for(var b=0;b<this.t;++b){c+=cbit(this[b]^a)}return c}function bnTestBit(b){var a=Math.floor(b/this.DB);if(a>=this.t){return this.s!=0}return(this[a]&1<<b%this.DB)!=0}function bnpChangeBit(c,b){var a=BigInteger.ONE.shiftLeft(c);this.bitwiseTo(a,b,a);return a}function bnSetBit(a){return this.changeBit(a,op_or)}function bnClearBit(a){return this.changeBit(a,op_andnot)}function bnFlipBit(a){return this.changeBit(a,op_xor)}function bnpAddTo(d,f){var e=0,g=0,b=Math.min(d.t,this.t);while(e<b){g+=this[e]+d[e];f[e++]=g&this.DM;g>>=this.DB}if(d.t<this.t){g+=d.s;while(e<this.t){g+=this[e];f[e++]=g&this.DM;g>>=this.DB}g+=this.s}else{g+=this.s;while(e<d.t){g+=d[e];f[e++]=g&this.DM;g>>=this.DB}g+=d.s}f.s=g<0?-1:0;if(g>0){f[e++]=g}else{if(g<-1){f[e++]=this.DV+g}}f.t=e;f.clamp()}function bnAdd(b){var c=nbi();this.addTo(b,c);return c}function bnSubtract(b){var c=nbi();this.subTo(b,c);return c}function bnMultiply(b){var c=nbi();this.multiplyTo(b,c);return c}function bnSquare(){var a=nbi();this.squareTo(a);return a}function bnDivide(b){var c=nbi();this.divRemTo(b,c,null);return c}function bnRemainder(b){var c=nbi();this.divRemTo(b,null,c);return c}function bnDivideAndRemainder(b){var d=nbi(),c=nbi();this.divRemTo(b,d,c);return new Array(d,c)}function bnpDMultiply(a){this[this.t]=this.am(0,a-1,this,0,0,this.t);++this.t;this.clamp()}function bnpDAddOffset(b,a){if(b==0){return}while(this.t<=a){this[this.t++]=0}this[a]+=b;while(this[a]>=this.DV){this[a]-=this.DV;if(++a>=this.t){this[this.t++]=0}++this[a]}}function NullExp(){}function nNop(a){return a}function nMulTo(a,c,b){a.multiplyTo(c,b)}function nSqrTo(a,b){a.squareTo(b)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(a){return this.exp(a,new NullExp)}function bnpMultiplyLowerTo(b,f,e){var d=Math.min(this.t+b.t,f);e.s=0;e.t=d;while(d>0){e[--d]=0}var c;for(c=e.t-this.t;d<c;++d){e[d+this.t]=this.am(0,b[d],e,d,0,this.t)}for(c=Math.min(b.t,f);d<c;++d){this.am(0,b[d],e,d,0,f-d)}e.clamp()}function bnpMultiplyUpperTo(b,e,d){--e;var c=d.t=this.t+b.t-e;d.s=0;while(--c>=0){d[c]=0}for(c=Math.max(e-this.t,0);c<b.t;++c){d[this.t+c-e]=this.am(e-c,b[c],d,0,0,this.t+c-e)}d.clamp();d.drShiftTo(1,d)}function Barrett(a){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*a.t,this.r2);this.mu=this.r2.divide(a);this.m=a}function barrettConvert(a){if(a.s<0||a.t>2*this.m.t){return a.mod(this.m)}else{if(a.compareTo(this.m)<0){return a}else{var b=nbi();a.copyTo(b);this.reduce(b);return b}}}function barrettRevert(a){return a}function barrettReduce(a){a.drShiftTo(this.m.t-1,this.r2);if(a.t>this.m.t+1){a.t=this.m.t+1;a.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(a.compareTo(this.r2)<0){a.dAddOffset(1,this.m.t+1)}a.subTo(this.r2,a);while(a.compareTo(this.m)>=0){a.subTo(this.m,a)}}function barrettSqrTo(a,b){a.squareTo(b);this.reduce(b)}function barrettMulTo(a,c,b){a.multiplyTo(c,b);this.reduce(b)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(q,f){var o=q.bitLength(),h,b=nbv(1),v;if(o<=0){return b}else{if(o<18){h=1}else{if(o<48){h=3}else{if(o<144){h=4}else{if(o<768){h=5}else{h=6}}}}}if(o<8){v=new Classic(f)}else{if(f.isEven()){v=new Barrett(f)}else{v=new Montgomery(f)}}var p=new Array,d=3,s=h-1,a=(1<<h)-1;p[1]=v.convert(this);if(h>1){var A=nbi();
v.sqrTo(p[1],A);while(d<=a){p[d]=nbi();v.mulTo(A,p[d-2],p[d]);d+=2}}var l=q.t-1,x,u=true,c=nbi(),y;o=nbits(q[l])-1;while(l>=0){if(o>=s){x=q[l]>>o-s&a}else{x=(q[l]&(1<<o+1)-1)<<s-o;if(l>0){x|=q[l-1]>>this.DB+o-s}}d=h;while((x&1)==0){x>>=1;--d}if((o-=d)<0){o+=this.DB;--l}if(u){p[x].copyTo(b);u=false}else{while(d>1){v.sqrTo(b,c);v.sqrTo(c,b);d-=2}if(d>0){v.sqrTo(b,c)}else{y=b;b=c;c=y}v.mulTo(c,p[x],b)}while(l>=0&&(q[l]&1<<o)==0){v.sqrTo(b,c);y=b;b=c;c=y;if(--o<0){o=this.DB-1;--l}}}return v.revert(b)}function bnGCD(c){var b=this.s<0?this.negate():this.clone();var h=c.s<0?c.negate():c.clone();if(b.compareTo(h)<0){var e=b;b=h;h=e}var d=b.getLowestSetBit(),f=h.getLowestSetBit();if(f<0){return b}if(d<f){f=d}if(f>0){b.rShiftTo(f,b);h.rShiftTo(f,h)}while(b.signum()>0){if((d=b.getLowestSetBit())>0){b.rShiftTo(d,b)}if((d=h.getLowestSetBit())>0){h.rShiftTo(d,h)}if(b.compareTo(h)>=0){b.subTo(h,b);b.rShiftTo(1,b)}else{h.subTo(b,h);h.rShiftTo(1,h)}}if(f>0){h.lShiftTo(f,h)}return h}function bnpModInt(e){if(e<=0){return 0}var c=this.DV%e,b=this.s<0?e-1:0;if(this.t>0){if(c==0){b=this[0]%e}else{for(var a=this.t-1;a>=0;--a){b=(c*b+this[a])%e}}}return b}function bnModInverse(f){var j=f.isEven();if(this.isEven()&&j||f.signum()==0){return BigInteger.ZERO}var i=f.clone(),h=this.clone();var g=nbv(1),e=nbv(0),l=nbv(0),k=nbv(1);while(i.signum()!=0){while(i.isEven()){i.rShiftTo(1,i);if(j){if(!g.isEven()||!e.isEven()){g.addTo(this,g);e.subTo(f,e)}g.rShiftTo(1,g)}else{if(!e.isEven()){e.subTo(f,e)}}e.rShiftTo(1,e)}while(h.isEven()){h.rShiftTo(1,h);if(j){if(!l.isEven()||!k.isEven()){l.addTo(this,l);k.subTo(f,k)}l.rShiftTo(1,l)}else{if(!k.isEven()){k.subTo(f,k)}}k.rShiftTo(1,k)}if(i.compareTo(h)>=0){i.subTo(h,i);if(j){g.subTo(l,g)}e.subTo(k,e)}else{h.subTo(i,h);if(j){l.subTo(g,l)}k.subTo(e,k)}}if(h.compareTo(BigInteger.ONE)!=0){return BigInteger.ZERO}if(k.compareTo(f)>=0){return k.subtract(f)}if(k.signum()<0){k.addTo(f,k)}else{return k}if(k.signum()<0){return k.add(f)}else{return k}}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(e){var d,b=this.abs();if(b.t==1&&b[0]<=lowprimes[lowprimes.length-1]){for(d=0;d<lowprimes.length;++d){if(b[0]==lowprimes[d]){return true}}return false}if(b.isEven()){return false}d=1;while(d<lowprimes.length){var a=lowprimes[d],c=d+1;while(c<lowprimes.length&&a<lplim){a*=lowprimes[c++]}a=b.modInt(a);while(d<c){if(a%lowprimes[d++]==0){return false}}}return b.millerRabin(e)}function bnpMillerRabin(f){var g=this.subtract(BigInteger.ONE);var c=g.getLowestSetBit();if(c<=0){return false}var h=g.shiftRight(c);f=f+1>>1;if(f>lowprimes.length){f=lowprimes.length}var b=nbi();for(var e=0;e<f;++e){b.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var l=b.modPow(h,this);if(l.compareTo(BigInteger.ONE)!=0&&l.compareTo(g)!=0){var d=1;while(d++<c&&l.compareTo(g)!=0){l=l.modPowInt(2,this);if(l.compareTo(BigInteger.ONE)==0){return false}}if(l.compareTo(g)!=0){return false}}}return true}BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;BigInteger.prototype.square=bnSquare;function Arcfour(){this.i=0;this.j=0;this.S=new Array}function ARC4init(d){var c,a,b;for(c=0;c<256;++c){this.S[c]=c}a=0;for(c=0;c<256;++c){a=a+this.S[c]+d[c%d.length]&255;b=this.S[c];this.S[c]=this.S[a];this.S[a]=b}this.i=0;this.j=0}function ARC4next(){var a;this.i=this.i+1&255;this.j=this.j+this.S[this.i]&255;a=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=a;return this.S[a+this.S[this.i]&255]}Arcfour.prototype.init=ARC4init;Arcfour.prototype.next=ARC4next;function prng_newstate(){return new Arcfour}var rng_psize=256;var rng_state;var rng_pool;var rng_pptr;function rng_seed_int(a){rng_pool[rng_pptr++]^=a&255;rng_pool[rng_pptr++]^=a>>8&255;rng_pool[rng_pptr++]^=a>>16&255;rng_pool[rng_pptr++]^=a>>24&255;if(rng_pptr>=rng_psize){rng_pptr-=rng_psize}}function rng_seed_time(){rng_seed_int((new Date).getTime())}if(rng_pool==null){rng_pool=new Array;rng_pptr=0;var t;if(window.crypto&&window.crypto.getRandomValues){var ua=new Uint8Array(32);window.crypto.getRandomValues(ua);for(t=0;t<32;++t){rng_pool[rng_pptr++]=ua[t]}}if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto){var z=window.crypto.random(32);for(t=0;t<z.length;++t){rng_pool[rng_pptr++]=z.charCodeAt(t)&255}}while(rng_pptr<rng_psize){t=Math.floor(65536*Math.random());rng_pool[rng_pptr++]=t>>>8;rng_pool[rng_pptr++]=t&255}rng_pptr=0;rng_seed_time()}function rng_get_byte(){if(rng_state==null){rng_seed_time();rng_state=prng_newstate();rng_state.init(rng_pool);for(rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr){rng_pool[rng_pptr]=0}rng_pptr=0}return rng_state.next()}function rng_get_bytes(b){var a;for(a=0;a<b.length;++a){b[a]=rng_get_byte()}}function SecureRandom(){}SecureRandom.prototype.nextBytes=rng_get_bytes;function parseBigInt(b,a){return new BigInteger(b,a)}function linebrk(c,d){var a="";var b=0;while(b+d<c.length){a+=c.substring(b,b+d)+"\n";b+=d}return a+c.substring(b,c.length)}function byte2Hex(a){if(a<16){return"0"+a.toString(16)}else{return a.toString(16)}}function pkcs1pad2(e,h){if(h<e.length+11){alert("Message too long for RSA");return null}var g=new Array;var d=e.length-1;while(d>=0&&h>0){var f=e.charCodeAt(d--);if(f<128){g[--h]=f}else{if(f>127&&f<2048){g[--h]=f&63|128;g[--h]=f>>6|192}else{g[--h]=f&63|128;g[--h]=f>>6&63|128;g[--h]=f>>12|224}}}g[--h]=0;var b=new SecureRandom;var a=new Array;while(h>2){a[0]=0;while(a[0]==0){b.nextBytes(a)}g[--h]=a[0]}g[--h]=2;g[--h]=0;return new BigInteger(g)}function oaep_mgf1_arr(c,a,e){var b="",d=0;while(b.length<a){b+=e(String.fromCharCode.apply(String,c.concat([(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255])));d+=1}return b}var SHA1_SIZE=20;function oaep_pad(l,a,c){if(l.length+2*SHA1_SIZE+2>a){throw"Message too long for RSA"}var h="",d;for(d=0;d<a-l.length-2*SHA1_SIZE-2;d+=1){h+="\0"}var e=rstr_sha1("")+h+""+l;var f=new Array(SHA1_SIZE);(new SecureRandom).nextBytes(f);var g=oaep_mgf1_arr(f,e.length,c||rstr_sha1);var k=[];for(d=0;d<e.length;d+=1){k[d]=e.charCodeAt(d)^g.charCodeAt(d)}var j=oaep_mgf1_arr(k,f.length,rstr_sha1);var b=[0];for(d=0;d<f.length;d+=1){b[d+1]=f[d]^j.charCodeAt(d)}return new BigInteger(b.concat(k))}function RSAKey(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null}function RSASetPublic(b,a){this.isPublic=true;if(typeof b!=="string"){this.n=b;this.e=a}else{if(b!=null&&a!=null&&b.length>0&&a.length>0){this.n=parseBigInt(b,16);this.e=parseInt(a,16)}else{alert("Invalid RSA public key")}}}function RSADoPublic(a){return a.modPowInt(this.e,this.n)}function RSAEncrypt(d){var a=pkcs1pad2(d,this.n.bitLength()+7>>3);if(a==null){return null}var e=this.doPublic(a);if(e==null){return null}var b=e.toString(16);if((b.length&1)==0){return b}else{return"0"+b}}function RSAEncryptOAEP(e,d){var a=oaep_pad(e,this.n.bitLength()+7>>3,d);if(a==null){return null}var f=this.doPublic(a);if(f==null){return null}var b=f.toString(16);if((b.length&1)==0){return b}else{return"0"+b}}RSAKey.prototype.doPublic=RSADoPublic;RSAKey.prototype.setPublic=RSASetPublic;RSAKey.prototype.encrypt=RSAEncrypt;RSAKey.prototype.encryptOAEP=RSAEncryptOAEP;RSAKey.prototype.type="RSA";function pkcs1unpad2(g,j){var a=g.toByteArray();var f=0;while(f<a.length&&a[f]==0){++f}if(a.length-f!=j-1||a[f]!=2){return null}++f;while(a[f]!=0){if(++f>=a.length){return null}}var e="";while(++f<a.length){var h=a[f]&255;if(h<128){e+=String.fromCharCode(h)}else{if(h>191&&h<224){e+=String.fromCharCode((h&31)<<6|a[f+1]&63);++f}else{e+=String.fromCharCode((h&15)<<12|(a[f+1]&63)<<6|a[f+2]&63);f+=2}}}return e}function oaep_mgf1_str(c,a,e){var b="",d=0;while(b.length<a){b+=e(c+String.fromCharCode.apply(String,[(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255]));d+=1}return b}var SHA1_SIZE=20;function oaep_unpad(l,b,e){l=l.toByteArray();var f;for(f=0;f<l.length;f+=1){l[f]&=255}while(l.length<b){l.unshift(0)}l=String.fromCharCode.apply(String,l);if(l.length<2*SHA1_SIZE+2){throw"Cipher too short"}var c=l.substr(1,SHA1_SIZE);var o=l.substr(SHA1_SIZE+1);var m=oaep_mgf1_str(o,SHA1_SIZE,e||rstr_sha1);var h=[],f;for(f=0;f<c.length;f+=1){h[f]=c.charCodeAt(f)^m.charCodeAt(f)}var j=oaep_mgf1_str(String.fromCharCode.apply(String,h),l.length-SHA1_SIZE,rstr_sha1);var g=[];for(f=0;f<o.length;f+=1){g[f]=o.charCodeAt(f)^j.charCodeAt(f)}g=String.fromCharCode.apply(String,g);if(g.substr(0,SHA1_SIZE)!==rstr_sha1("")){throw"Hash mismatch"}g=g.substr(SHA1_SIZE);var a=g.indexOf("");var k=a!=-1?g.substr(0,a).lastIndexOf("\0"):-1;if(k+1!=a){throw"Malformed data"}return g.substr(a+1)}function RSASetPrivate(c,a,b){this.isPrivate=true;if(typeof c!=="string"){this.n=c;this.e=a;this.d=b}else{if(c!=null&&a!=null&&c.length>0&&a.length>0){this.n=parseBigInt(c,16);this.e=parseInt(a,16);this.d=parseBigInt(b,16)}else{alert("Invalid RSA private key")}}}function RSASetPrivateEx(g,d,e,c,b,a,h,f){this.isPrivate=true;if(g==null){throw"RSASetPrivateEx N == null"}if(d==null){throw"RSASetPrivateEx E == null"}if(g.length==0){throw"RSASetPrivateEx N.length == 0"}if(d.length==0){throw"RSASetPrivateEx E.length == 0"}if(g!=null&&d!=null&&g.length>0&&d.length>0){this.n=parseBigInt(g,16);this.e=parseInt(d,16);this.d=parseBigInt(e,16);this.p=parseBigInt(c,16);this.q=parseBigInt(b,16);this.dmp1=parseBigInt(a,16);this.dmq1=parseBigInt(h,16);this.coeff=parseBigInt(f,16)}else{alert("Invalid RSA private key in RSASetPrivateEx")}}function RSAGenerate(b,i){var a=new SecureRandom;var f=b>>1;this.e=parseInt(i,16);var c=new BigInteger(i,16);for(;;){for(;;){this.p=new BigInteger(b-f,1,a);if(this.p.subtract(BigInteger.ONE).gcd(c).compareTo(BigInteger.ONE)==0&&this.p.isProbablePrime(10)){break}}for(;;){this.q=new BigInteger(f,1,a);if(this.q.subtract(BigInteger.ONE).gcd(c).compareTo(BigInteger.ONE)==0&&this.q.isProbablePrime(10)){break}}if(this.p.compareTo(this.q)<=0){var h=this.p;this.p=this.q;this.q=h}var g=this.p.subtract(BigInteger.ONE);var d=this.q.subtract(BigInteger.ONE);var e=g.multiply(d);if(e.gcd(c).compareTo(BigInteger.ONE)==0){this.n=this.p.multiply(this.q);this.d=c.modInverse(e);this.dmp1=this.d.mod(g);this.dmq1=this.d.mod(d);this.coeff=this.q.modInverse(this.p);break}}}function RSADoPrivate(a){if(this.p==null||this.q==null){return a.modPow(this.d,this.n)}var c=a.mod(this.p).modPow(this.dmp1,this.p);var b=a.mod(this.q).modPow(this.dmq1,this.q);while(c.compareTo(b)<0){c=c.add(this.p)}return c.subtract(b).multiply(this.coeff).mod(this.p).multiply(this.q).add(b)}function RSADecrypt(b){var d=parseBigInt(b,16);var a=this.doPrivate(d);if(a==null){return null}return pkcs1unpad2(a,this.n.bitLength()+7>>3)}function RSADecryptOAEP(d,b){var e=parseBigInt(d,16);var a=this.doPrivate(e);if(a==null){return null}return oaep_unpad(a,this.n.bitLength()+7>>3,b)}RSAKey.prototype.doPrivate=RSADoPrivate;RSAKey.prototype.setPrivate=RSASetPrivate;RSAKey.prototype.setPrivateEx=RSASetPrivateEx;RSAKey.prototype.generate=RSAGenerate;RSAKey.prototype.decrypt=RSADecrypt;RSAKey.prototype.decryptOAEP=RSADecryptOAEP;function ECFieldElementFp(b,a){this.x=a;this.q=b}function feFpEquals(a){if(a==this){return true}return this.q.equals(a.q)&&this.x.equals(a.x)}function feFpToBigInteger(){return this.x}function feFpNegate(){return new ECFieldElementFp(this.q,this.x.negate().mod(this.q))}function feFpAdd(a){return new ECFieldElementFp(this.q,this.x.add(a.toBigInteger()).mod(this.q))}function feFpSubtract(a){return new ECFieldElementFp(this.q,this.x.subtract(a.toBigInteger()).mod(this.q))}function feFpMultiply(a){return new ECFieldElementFp(this.q,this.x.multiply(a.toBigInteger()).mod(this.q))}function feFpSquare(){return new ECFieldElementFp(this.q,this.x.square().mod(this.q))}function feFpDivide(a){return new ECFieldElementFp(this.q,this.x.multiply(a.toBigInteger().modInverse(this.q)).mod(this.q))}ECFieldElementFp.prototype.equals=feFpEquals;ECFieldElementFp.prototype.toBigInteger=feFpToBigInteger;ECFieldElementFp.prototype.negate=feFpNegate;ECFieldElementFp.prototype.add=feFpAdd;ECFieldElementFp.prototype.subtract=feFpSubtract;ECFieldElementFp.prototype.multiply=feFpMultiply;ECFieldElementFp.prototype.square=feFpSquare;ECFieldElementFp.prototype.divide=feFpDivide;function ECPointFp(c,a,d,b){this.curve=c;this.x=a;this.y=d;if(b==null){this.z=BigInteger.ONE}else{this.z=b}this.zinv=null}function pointFpGetX(){if(this.zinv==null){this.zinv=this.z.modInverse(this.curve.q)}return this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpGetY(){if(this.zinv==null){this.zinv=this.z.modInverse(this.curve.q)}return this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpEquals(a){if(a==this){return true}if(this.isInfinity()){return a.isInfinity()}if(a.isInfinity()){return this.isInfinity()}var c,b;c=a.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(a.z)).mod(this.curve.q);if(!c.equals(BigInteger.ZERO)){return false}b=a.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(a.z)).mod(this.curve.q);return b.equals(BigInteger.ZERO)}function pointFpIsInfinity(){if(this.x==null&&this.y==null){return true}return this.z.equals(BigInteger.ZERO)&&!this.y.toBigInteger().equals(BigInteger.ZERO)}function pointFpNegate(){return new ECPointFp(this.curve,this.x,this.y.negate(),this.z)}function pointFpAdd(l){if(this.isInfinity()){return l}if(l.isInfinity()){return this}var p=l.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(l.z)).mod(this.curve.q);var o=l.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(l.z)).mod(this.curve.q);if(BigInteger.ZERO.equals(o)){if(BigInteger.ZERO.equals(p)){return this.twice()}return this.curve.getInfinity()}var j=new BigInteger("3");var e=this.x.toBigInteger();var n=this.y.toBigInteger();var c=l.x.toBigInteger();var k=l.y.toBigInteger();var m=o.square();var i=m.multiply(o);var d=e.multiply(m);var g=p.square().multiply(this.z);var a=g.subtract(d.shiftLeft(1)).multiply(l.z).subtract(i).multiply(o).mod(this.curve.q);var h=d.multiply(j).multiply(p).subtract(n.multiply(i)).subtract(g.multiply(p)).multiply(l.z).add(p.multiply(i)).mod(this.curve.q);var f=i.multiply(this.z).multiply(l.z).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(h),f)}function pointFpTwice(){if(this.isInfinity()){return this}if(this.y.toBigInteger().signum()==0){return this.curve.getInfinity()}var g=new BigInteger("3");var c=this.x.toBigInteger();var h=this.y.toBigInteger();var e=h.multiply(this.z);var j=e.multiply(h).mod(this.curve.q);var i=this.curve.a.toBigInteger();var k=c.square().multiply(g);if(!BigInteger.ZERO.equals(i)){k=k.add(this.z.square().multiply(i))}k=k.mod(this.curve.q);var b=k.square().subtract(c.shiftLeft(3).multiply(j)).shiftLeft(1).multiply(e).mod(this.curve.q);var f=k.multiply(g).multiply(c).subtract(j.shiftLeft(1)).shiftLeft(2).multiply(j).subtract(k.square().multiply(k)).mod(this.curve.q);var d=e.square().multiply(e).shiftLeft(3).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(b),this.curve.fromBigInteger(f),d)}function pointFpMultiply(b){if(this.isInfinity()){return this}if(b.signum()==0){return this.curve.getInfinity()}var g=b;var f=g.multiply(new BigInteger("3"));var l=this.negate();var d=this;var c;for(c=f.bitLength()-2;c>0;--c){d=d.twice();var a=f.testBit(c);var j=g.testBit(c);if(a!=j){d=d.add(a?this:l)}}return d}function pointFpMultiplyTwo(c,a,b){var d;if(c.bitLength()>b.bitLength()){d=c.bitLength()-1}else{d=b.bitLength()-1}var f=this.curve.getInfinity();var e=this.add(a);while(d>=0){f=f.twice();if(c.testBit(d)){if(b.testBit(d)){f=f.add(e)}else{f=f.add(this)}}else{if(b.testBit(d)){f=f.add(a)}}--d}return f}ECPointFp.prototype.getX=pointFpGetX;ECPointFp.prototype.getY=pointFpGetY;ECPointFp.prototype.equals=pointFpEquals;ECPointFp.prototype.isInfinity=pointFpIsInfinity;ECPointFp.prototype.negate=pointFpNegate;ECPointFp.prototype.add=pointFpAdd;ECPointFp.prototype.twice=pointFpTwice;ECPointFp.prototype.multiply=pointFpMultiply;ECPointFp.prototype.multiplyTwo=pointFpMultiplyTwo;function ECCurveFp(e,d,c){this.q=e;this.a=this.fromBigInteger(d);this.b=this.fromBigInteger(c);this.infinity=new ECPointFp(this,null,null)}function curveFpGetQ(){return this.q}function curveFpGetA(){return this.a}function curveFpGetB(){return this.b}function curveFpEquals(a){if(a==this){return true}return this.q.equals(a.q)&&this.a.equals(a.a)&&this.b.equals(a.b)}function curveFpGetInfinity(){return this.infinity}function curveFpFromBigInteger(a){return new ECFieldElementFp(this.q,a)}function curveFpDecodePointHex(d){switch(parseInt(d.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var a=(d.length-2)/2;var c=d.substr(2,a);var b=d.substr(a+2,a);return new ECPointFp(this,this.fromBigInteger(new BigInteger(c,16)),this.fromBigInteger(new BigInteger(b,16)));default:return null}}ECCurveFp.prototype.getQ=curveFpGetQ;ECCurveFp.prototype.getA=curveFpGetA;ECCurveFp.prototype.getB=curveFpGetB;ECCurveFp.prototype.equals=curveFpEquals;ECCurveFp.prototype.getInfinity=curveFpGetInfinity;ECCurveFp.prototype.fromBigInteger=curveFpFromBigInteger;ECCurveFp.prototype.decodePointHex=curveFpDecodePointHex;ECFieldElementFp.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)};ECPointFp.prototype.getEncoded=function(c){var d=function(h,f){var g=h.toByteArrayUnsigned();if(f<g.length){g=g.slice(g.length-f)}else{while(f>g.length){g.unshift(0)}}return g};var a=this.getX().toBigInteger();var e=this.getY().toBigInteger();var b=d(a,32);if(c){if(e.isEven()){b.unshift(2)}else{b.unshift(3)}}else{b.unshift(4);b=b.concat(d(e,32))}return b};ECPointFp.decodeFrom=function(g,c){var f=c[0];var e=c.length-1;var d=c.slice(1,1+e/2);var b=c.slice(1+e/2,1+e);d.unshift(0);b.unshift(0);var a=new BigInteger(d);var h=new BigInteger(b);return new ECPointFp(g,g.fromBigInteger(a),g.fromBigInteger(h))};ECPointFp.decodeFromHex=function(g,c){var f=c.substr(0,2);var e=c.length-2;var d=c.substr(2,e/2);var b=c.substr(2+e/2,e/2);var a=new BigInteger(d,16);var h=new BigInteger(b,16);return new ECPointFp(g,g.fromBigInteger(a),g.fromBigInteger(h))};ECPointFp.prototype.add2D=function(c){if(this.isInfinity()){return c}if(c.isInfinity()){return this}if(this.x.equals(c.x)){if(this.y.equals(c.y)){return this.twice()}return this.curve.getInfinity()}var g=c.x.subtract(this.x);var e=c.y.subtract(this.y);var a=e.divide(g);var d=a.square().subtract(this.x).subtract(c.x);var f=a.multiply(this.x.subtract(d)).subtract(this.y);return new ECPointFp(this.curve,d,f)};ECPointFp.prototype.twice2D=function(){if(this.isInfinity()){return this}if(this.y.toBigInteger().signum()==0){return this.curve.getInfinity()}var b=this.curve.fromBigInteger(BigInteger.valueOf(2));var e=this.curve.fromBigInteger(BigInteger.valueOf(3));var a=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(b));var c=a.square().subtract(this.x.multiply(b));var d=a.multiply(this.x.subtract(c)).subtract(this.y);return new ECPointFp(this.curve,c,d)};ECPointFp.prototype.multiply2D=function(b){if(this.isInfinity()){return this}if(b.signum()==0){return this.curve.getInfinity()}var g=b;var f=g.multiply(new BigInteger("3"));var l=this.negate();var d=this;var c;for(c=f.bitLength()-2;c>0;--c){d=d.twice();var a=f.testBit(c);var j=g.testBit(c);if(a!=j){d=d.add2D(a?this:l)}}return d};ECPointFp.prototype.isOnCurve=function(){var d=this.getX().toBigInteger();var i=this.getY().toBigInteger();var f=this.curve.getA().toBigInteger();var c=this.curve.getB().toBigInteger();var h=this.curve.getQ();var e=i.multiply(i).mod(h);var g=d.multiply(d).multiply(d).add(f.multiply(d)).add(c).mod(h);return e.equals(g)};ECPointFp.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"};ECPointFp.prototype.validate=function(){var c=this.curve.getQ();if(this.isInfinity()){throw new Error("Point is at infinity.")}var a=this.getX().toBigInteger();var b=this.getY().toBigInteger();if(a.compareTo(BigInteger.ONE)<0||a.compareTo(c.subtract(BigInteger.ONE))>0){throw new Error("x coordinate out of bounds")}if(b.compareTo(BigInteger.ONE)<0||b.compareTo(c.subtract(BigInteger.ONE))>0){throw new Error("y coordinate out of bounds")}if(!this.isOnCurve()){throw new Error("Point is not on the curve.")}if(this.multiply(c).isInfinity()){throw new Error("Point is not a scalar multiple of G.")}return true};var jsonParse=function(){var e="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)";var j='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))';var i='(?:"'+j+'*")';var d=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+e+"|"+i+")","g");var k=new RegExp("\\\\(?:([^u])|u(.{4}))","g");var g={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function h(l,m,n){return m?g[m]:String.fromCharCode(parseInt(n,16))}var c=new String("");var a="\\";var f={"{":Object,"[":Array};var b=Object.hasOwnProperty;return function(u,q){var p=u.match(d);var x;var v=p[0];var l=false;if("{"===v){x={}}else{if("["===v){x=[]}else{x=[];l=true}}var t;var r=[x];for(var o=1-l,m=p.length;o<m;++o){v=p[o];var w;switch(v.charCodeAt(0)){default:w=r[0];w[t||w.length]=+v;t=void 0;break;case 34:v=v.substring(1,v.length-1);if(v.indexOf(a)!==-1){v=v.replace(k,h)}w=r[0];if(!t){if(w instanceof Array){t=w.length}else{t=v||c;break}}w[t]=v;t=void 0;break;case 91:w=r[0];r.unshift(w[t||w.length]=[]);t=void 0;break;case 93:r.shift();break;case 102:w=r[0];w[t||w.length]=false;t=void 0;break;case 110:w=r[0];w[t||w.length]=null;t=void 0;break;case 116:w=r[0];w[t||w.length]=true;t=void 0;break;case 123:w=r[0];r.unshift(w[t||w.length]={});t=void 0;break;case 125:r.shift();break}}if(l){if(r.length!==1){throw new Error}x=x[0]}else{if(r.length){throw new Error}}if(q){var s=function(C,B){var D=C[B];if(D&&typeof D==="object"){var n=null;for(var z in D){if(b.call(D,z)&&D!==C){var y=s(D,z);if(y!==void 0){D[z]=y}else{if(!n){n=[]}n.push(z)}}}if(n){for(var A=n.length;--A>=0;){delete D[n[A]]}}}return q.call(C,B,D)};x=s({"":x},"")}return x}}();if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.asn1=="undefined"||!KJUR.asn1){KJUR.asn1={}}KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(a){var b=a.toString(16);if(b.length%2==1){b="0"+b}return b};this.bigIntToMinTwosComplementsHex=function(j){var f=j.toString(16);if(f.substr(0,1)!="-"){if(f.length%2==1){f="0"+f}else{if(!f.match(/^[0-7]/)){f="00"+f}}}else{var a=f.substr(1);var e=a.length;if(e%2==1){e+=1}else{if(!f.match(/^[0-7]/)){e+=2}}var g="";for(var d=0;d<e;d++){g+="f"}var c=new BigInteger(g,16);var b=c.xor(j).add(BigInteger.ONE);f=b.toString(16).replace(/^-/,"")}return f};this.getPEMStringFromHex=function(a,b){var c=hextob64(a);var d=c.replace(/(.{64})/g,"$1\r\n");d=d.replace(/\r\n$/,"");return"-----BEGIN "+b+"-----\r\n"+d+"\r\n-----END "+b+"-----\r\n"};this.newObject=function(b){var g=KJUR.asn1;var k=Object.keys(b);if(k.length!=1){throw"key of param shall be only one."}var j=k[0];if(":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+j+":")==-1){throw"undefined key: "+j}if(j=="bool"){return new g.DERBoolean(b[j])}if(j=="int"){return new g.DERInteger(b[j])}if(j=="bitstr"){return new g.DERBitString(b[j])}if(j=="octstr"){return new g.DEROctetString(b[j])}if(j=="null"){return new g.DERNull(b[j])}if(j=="oid"){return new g.DERObjectIdentifier(b[j])}if(j=="enum"){return new g.DEREnumerated(b[j])}if(j=="utf8str"){return new g.DERUTF8String(b[j])}if(j=="numstr"){return new g.DERNumericString(b[j])}if(j=="prnstr"){return new g.DERPrintableString(b[j])}if(j=="telstr"){return new g.DERTeletexString(b[j])}if(j=="ia5str"){return new g.DERIA5String(b[j])}if(j=="utctime"){return new g.DERUTCTime(b[j])}if(j=="gentime"){return new g.DERGeneralizedTime(b[j])}if(j=="seq"){var m=b[j];var h=[];for(var e=0;e<m.length;e++){var l=g.ASN1Util.newObject(m[e]);h.push(l)}return new g.DERSequence({array:h})}if(j=="set"){var m=b[j];var h=[];for(var e=0;e<m.length;e++){var l=g.ASN1Util.newObject(m[e]);h.push(l)}return new g.DERSet({array:h})}if(j=="tag"){var c=b[j];if(Object.prototype.toString.call(c)==="[object Array]"&&c.length==3){var d=g.ASN1Util.newObject(c[2]);return new g.DERTaggedObject({tag:c[0],explicit:c[1],obj:d})}else{var f={};if(c.explicit!==undefined){f.explicit=c.explicit}if(c.tag!==undefined){f.tag=c.tag}if(c.obj===undefined){throw"obj shall be specified for 'tag'."}f.obj=g.ASN1Util.newObject(c.obj);return new g.DERTaggedObject(f)}}};this.jsonToASN1HEX=function(b){var a=this.newObject(b);return a.getEncodedHex()}};KJUR.asn1.ASN1Util.oidHexToInt=function(a){var j="";var k=parseInt(a.substr(0,2),16);var d=Math.floor(k/40);var c=k%40;var j=d+"."+c;var e="";for(var f=2;f<a.length;f+=2){var g=parseInt(a.substr(f,2),16);var h=("00000000"+g.toString(2)).slice(-8);e=e+h.substr(1,7);if(h.substr(0,1)=="0"){var b=new BigInteger(e,2);j=j+"."+b.toString(10);e=""}}return j};KJUR.asn1.ASN1Util.oidIntToHex=function(f){var e=function(a){var k=a.toString(16);if(k.length==1){k="0"+k}return k};var d=function(o){var n="";var k=new BigInteger(o,10);var a=k.toString(2);var l=7-a.length%7;if(l==7){l=0}var q="";for(var m=0;m<l;m++){q+="0"}a=q+a;for(var m=0;m<a.length-1;m+=7){var p=a.substr(m,7);if(m!=a.length-7){p="1"+p}n+=e(parseInt(p,2))}return n};if(!f.match(/^[0-9.]+$/)){throw"malformed oid string: "+f}var g="";var b=f.split(".");var j=parseInt(b[0])*40+parseInt(b[1]);g+=e(j);b.splice(0,2);for(var c=0;c<b.length;c++){g+=d(b[c])}return g};KJUR.asn1.ASN1Object=function(){var c=true;var b=null;var d="00";var e="00";var a="";this.getLengthHexFromValue=function(){if(typeof this.hV=="undefined"||this.hV==null){throw"this.hV is null or undefined."}if(this.hV.length%2==1){throw"value hex must be even length: n="+a.length+",v="+this.hV}var i=this.hV.length/2;var h=i.toString(16);if(h.length%2==1){h="0"+h}if(i<128){return h}else{var g=h.length/2;if(g>15){throw"ASN.1 length too long to represent by 8x: n = "+i.toString(16)}var f=128+g;return f.toString(16)+h}};this.getEncodedHex=function(){if(this.hTLV==null||this.isModified){this.hV=this.getFreshValueHex();this.hL=this.getLengthHexFromValue();this.hTLV=this.hT+this.hL+this.hV;this.isModified=false}return this.hTLV};this.getValueHex=function(){this.getEncodedHex();return this.hV};this.getFreshValueHex=function(){return""}};KJUR.asn1.DERAbstractString=function(c){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);var b=null;var a=null;this.getString=function(){return this.s};this.setString=function(d){this.hTLV=null;this.isModified=true;this.s=d;this.hV=stohex(this.s)};this.setStringHex=function(d){this.hTLV=null;this.isModified=true;this.s=null;this.hV=d};this.getFreshValueHex=function(){return this.hV};if(typeof c!="undefined"){if(typeof c=="string"){this.setString(c)}else{if(typeof c.str!="undefined"){this.setString(c.str)}else{if(typeof c.hex!="undefined"){this.setStringHex(c.hex)}}}}};YAHOO.lang.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object);KJUR.asn1.DERAbstractTime=function(c){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);var b=null;var a=null;this.localDateToUTC=function(f){utc=f.getTime()+f.getTimezoneOffset()*6e4;var e=new Date(utc);return e};this.formatDate=function(m,o,e){var g=this.zeroPadding;var n=this.localDateToUTC(m);var p=String(n.getFullYear());if(o=="utc"){p=p.substr(2,2)}var l=g(String(n.getMonth()+1),2);var q=g(String(n.getDate()),2);var h=g(String(n.getHours()),2);var i=g(String(n.getMinutes()),2);var j=g(String(n.getSeconds()),2);var r=p+l+q+h+i+j;if(e===true){var f=n.getMilliseconds();if(f!=0){var k=g(String(f),3);k=k.replace(/[0]+$/,"");r=r+"."+k}}return r+"Z"};this.zeroPadding=function(e,d){if(e.length>=d){return e}return new Array(d-e.length+1).join("0")+e};this.getString=function(){return this.s};this.setString=function(d){this.hTLV=null;this.isModified=true;this.s=d;this.hV=stohex(d)};this.setByDateValue=function(h,j,e,d,f,g){var i=new Date(Date.UTC(h,j-1,e,d,f,g,0));this.setByDate(i)};this.getFreshValueHex=function(){return this.hV}};YAHOO.lang.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object);KJUR.asn1.DERAbstractStructured=function(b){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);var a=null;this.setByASN1ObjectArray=function(c){this.hTLV=null;this.isModified=true;this.asn1Array=c};this.appendASN1Object=function(c){this.hTLV=null;this.isModified=true;this.asn1Array.push(c)};this.asn1Array=new Array;if(typeof b!="undefined"){if(typeof b.array!="undefined"){this.asn1Array=b.array}}};YAHOO.lang.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object);KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this);this.hT="01";this.hTLV="0101ff"};YAHOO.lang.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object);KJUR.asn1.DERInteger=function(a){KJUR.asn1.DERInteger.superclass.constructor.call(this);this.hT="02";this.setByBigInteger=function(b){this.hTLV=null;this.isModified=true;this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(b)};this.setByInteger=function(c){var b=new BigInteger(String(c),10);this.setByBigInteger(b)};this.setValueHex=function(b){this.hV=b};this.getFreshValueHex=function(){return this.hV};if(typeof a!="undefined"){if(typeof a.bigint!="undefined"){this.setByBigInteger(a.bigint)}else{if(typeof a["int"]!="undefined"){this.setByInteger(a["int"])}else{if(typeof a=="number"){this.setByInteger(a)}else{if(typeof a.hex!="undefined"){
this.setValueHex(a.hex)}}}}}};YAHOO.lang.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object);KJUR.asn1.DERBitString=function(b){if(b!==undefined&&typeof b.obj!=="undefined"){var a=KJUR.asn1.ASN1Util.newObject(b.obj);b.hex="00"+a.getEncodedHex()}KJUR.asn1.DERBitString.superclass.constructor.call(this);this.hT="03";this.setHexValueIncludingUnusedBits=function(c){this.hTLV=null;this.isModified=true;this.hV=c};this.setUnusedBitsAndHexValue=function(c,e){if(c<0||7<c){throw"unused bits shall be from 0 to 7: u = "+c}var d="0"+c;this.hTLV=null;this.isModified=true;this.hV=d+e};this.setByBinaryString=function(e){e=e.replace(/0+$/,"");var f=8-e.length%8;if(f==8){f=0}for(var g=0;g<=f;g++){e+="0"}var j="";for(var g=0;g<e.length-1;g+=8){var d=e.substr(g,8);var c=parseInt(d,2).toString(16);if(c.length==1){c="0"+c}j+=c}this.hTLV=null;this.isModified=true;this.hV="0"+f+j};this.setByBooleanArray=function(e){var d="";for(var c=0;c<e.length;c++){if(e[c]==true){d+="1"}else{d+="0"}}this.setByBinaryString(d)};this.newFalseArray=function(e){var c=new Array(e);for(var d=0;d<e;d++){c[d]=false}return c};this.getFreshValueHex=function(){return this.hV};if(typeof b!="undefined"){if(typeof b=="string"&&b.toLowerCase().match(/^[0-9a-f]+$/)){this.setHexValueIncludingUnusedBits(b)}else{if(typeof b.hex!="undefined"){this.setHexValueIncludingUnusedBits(b.hex)}else{if(typeof b.bin!="undefined"){this.setByBinaryString(b.bin)}else{if(typeof b.array!="undefined"){this.setByBooleanArray(b.array)}}}}}};YAHOO.lang.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object);KJUR.asn1.DEROctetString=function(b){if(b!==undefined&&typeof b.obj!=="undefined"){var a=KJUR.asn1.ASN1Util.newObject(b.obj);b.hex=a.getEncodedHex()}KJUR.asn1.DEROctetString.superclass.constructor.call(this,b);this.hT="04"};YAHOO.lang.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this);this.hT="05";this.hTLV="0500"};YAHOO.lang.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object);KJUR.asn1.DERObjectIdentifier=function(c){var b=function(d){var e=d.toString(16);if(e.length==1){e="0"+e}return e};var a=function(k){var j="";var e=new BigInteger(k,10);var d=e.toString(2);var f=7-d.length%7;if(f==7){f=0}var m="";for(var g=0;g<f;g++){m+="0"}d=m+d;for(var g=0;g<d.length-1;g+=7){var l=d.substr(g,7);if(g!=d.length-7){l="1"+l}j+=b(parseInt(l,2))}return j};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this);this.hT="06";this.setValueHex=function(d){this.hTLV=null;this.isModified=true;this.s=null;this.hV=d};this.setValueOidString=function(f){if(!f.match(/^[0-9.]+$/)){throw"malformed oid string: "+f}var g="";var d=f.split(".");var j=parseInt(d[0])*40+parseInt(d[1]);g+=b(j);d.splice(0,2);for(var e=0;e<d.length;e++){g+=a(d[e])}this.hTLV=null;this.isModified=true;this.s=null;this.hV=g};this.setValueName=function(e){if(typeof KJUR.asn1.x509.OID.name2oidList[e]!="undefined"){var d=KJUR.asn1.x509.OID.name2oidList[e];this.setValueOidString(d)}else{throw"DERObjectIdentifier oidName undefined: "+e}};this.getFreshValueHex=function(){return this.hV};if(typeof c!="undefined"){if(typeof c=="string"&&c.match(/^[0-2].[0-9.]+$/)){this.setValueOidString(c)}else{if(KJUR.asn1.x509.OID.name2oidList[c]!==undefined){this.setValueOidString(KJUR.asn1.x509.OID.name2oidList[c])}else{if(typeof c.oid!="undefined"){this.setValueOidString(c.oid)}else{if(typeof c.hex!="undefined"){this.setValueHex(c.hex)}else{if(typeof c.name!="undefined"){this.setValueName(c.name)}}}}}}};YAHOO.lang.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object);KJUR.asn1.DEREnumerated=function(a){KJUR.asn1.DEREnumerated.superclass.constructor.call(this);this.hT="0a";this.setByBigInteger=function(b){this.hTLV=null;this.isModified=true;this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(b)};this.setByInteger=function(c){var b=new BigInteger(String(c),10);this.setByBigInteger(b)};this.setValueHex=function(b){this.hV=b};this.getFreshValueHex=function(){return this.hV};if(typeof a!="undefined"){if(typeof a["int"]!="undefined"){this.setByInteger(a["int"])}else{if(typeof a=="number"){this.setByInteger(a)}else{if(typeof a.hex!="undefined"){this.setValueHex(a.hex)}}}}};YAHOO.lang.extend(KJUR.asn1.DEREnumerated,KJUR.asn1.ASN1Object);KJUR.asn1.DERUTF8String=function(a){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,a);this.hT="0c"};YAHOO.lang.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString);KJUR.asn1.DERNumericString=function(a){KJUR.asn1.DERNumericString.superclass.constructor.call(this,a);this.hT="12"};YAHOO.lang.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERPrintableString=function(a){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,a);this.hT="13"};YAHOO.lang.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERTeletexString=function(a){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,a);this.hT="14"};YAHOO.lang.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERIA5String=function(a){KJUR.asn1.DERIA5String.superclass.constructor.call(this,a);this.hT="16"};YAHOO.lang.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString);KJUR.asn1.DERUTCTime=function(a){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,a);this.hT="17";this.setByDate=function(b){this.hTLV=null;this.isModified=true;this.date=b;this.s=this.formatDate(this.date,"utc");this.hV=stohex(this.s)};this.getFreshValueHex=function(){if(typeof this.date=="undefined"&&typeof this.s=="undefined"){this.date=new Date;this.s=this.formatDate(this.date,"utc");this.hV=stohex(this.s)}return this.hV};if(a!==undefined){if(a.str!==undefined){this.setString(a.str)}else{if(typeof a=="string"&&a.match(/^[0-9]{12}Z$/)){this.setString(a)}else{if(a.hex!==undefined){this.setStringHex(a.hex)}else{if(a.date!==undefined){this.setByDate(a.date)}}}}}};YAHOO.lang.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime);KJUR.asn1.DERGeneralizedTime=function(a){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,a);this.hT="18";this.withMillis=false;this.setByDate=function(b){this.hTLV=null;this.isModified=true;this.date=b;this.s=this.formatDate(this.date,"gen",this.withMillis);this.hV=stohex(this.s)};this.getFreshValueHex=function(){if(this.date===undefined&&this.s===undefined){this.date=new Date;this.s=this.formatDate(this.date,"gen",this.withMillis);this.hV=stohex(this.s)}return this.hV};if(a!==undefined){if(a.str!==undefined){this.setString(a.str)}else{if(typeof a=="string"&&a.match(/^[0-9]{14}Z$/)){this.setString(a)}else{if(a.hex!==undefined){this.setStringHex(a.hex)}else{if(a.date!==undefined){this.setByDate(a.date)}}}}if(a.millis===true){this.withMillis=true}}};YAHOO.lang.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime);KJUR.asn1.DERSequence=function(a){KJUR.asn1.DERSequence.superclass.constructor.call(this,a);this.hT="30";this.getFreshValueHex=function(){var c="";for(var b=0;b<this.asn1Array.length;b++){var d=this.asn1Array[b];c+=d.getEncodedHex()}this.hV=c;return this.hV}};YAHOO.lang.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured);KJUR.asn1.DERSet=function(a){KJUR.asn1.DERSet.superclass.constructor.call(this,a);this.hT="31";this.sortFlag=true;this.getFreshValueHex=function(){var b=new Array;for(var c=0;c<this.asn1Array.length;c++){var d=this.asn1Array[c];b.push(d.getEncodedHex())}if(this.sortFlag==true){b.sort()}this.hV=b.join("");return this.hV};if(typeof a!="undefined"){if(typeof a.sortflag!="undefined"&&a.sortflag==false){this.sortFlag=false}}};YAHOO.lang.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured);KJUR.asn1.DERTaggedObject=function(a){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);this.hT="a0";this.hV="";this.isExplicit=true;this.asn1Object=null;this.setASN1Object=function(b,c,d){this.hT=c;this.isExplicit=b;this.asn1Object=d;if(this.isExplicit){this.hV=this.asn1Object.getEncodedHex();this.hTLV=null;this.isModified=true}else{this.hV=null;this.hTLV=d.getEncodedHex();this.hTLV=this.hTLV.replace(/^../,c);this.isModified=false}};this.getFreshValueHex=function(){return this.hV};if(typeof a!="undefined"){if(typeof a.tag!="undefined"){this.hT=a.tag}if(typeof a.explicit!="undefined"){this.isExplicit=a.explicit}if(typeof a.obj!="undefined"){this.asn1Object=a.obj;this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)}}};YAHOO.lang.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object);var ASN1HEX=new function(){this.getByteLengthOfL_AtObj=function(b,c){if(b.substring(c+2,c+3)!="8"){return 1}var a=parseInt(b.substring(c+3,c+4));if(a==0){return-1}if(0<a&&a<10){return a+1}return-2};this.getHexOfL_AtObj=function(b,c){var a=this.getByteLengthOfL_AtObj(b,c);if(a<1){return""}return b.substring(c+2,c+2+a*2)};this.getIntOfL_AtObj=function(c,d){var b=this.getHexOfL_AtObj(c,d);if(b==""){return-1}var a;if(parseInt(b.substring(0,1))<8){a=new BigInteger(b,16)}else{a=new BigInteger(b.substring(2),16)}return a.intValue()};this.getStartPosOfV_AtObj=function(b,c){var a=this.getByteLengthOfL_AtObj(b,c);if(a<0){return a}return c+(a+1)*2};this.getHexOfV_AtObj=function(c,d){var b=this.getStartPosOfV_AtObj(c,d);var a=this.getIntOfL_AtObj(c,d);return c.substring(b,b+a*2)};this.getHexOfTLV_AtObj=function(c,e){var b=c.substr(e,2);var d=this.getHexOfL_AtObj(c,e);var a=this.getHexOfV_AtObj(c,e);return b+d+a};this.getPosOfNextSibling_AtObj=function(c,d){var b=this.getStartPosOfV_AtObj(c,d);var a=this.getIntOfL_AtObj(c,d);return b+a*2};this.getPosArrayOfChildren_AtObj=function(f,j){var c=new Array;var i=this.getStartPosOfV_AtObj(f,j);c.push(i);var b=this.getIntOfL_AtObj(f,j);var g=i;var d=0;while(1){var e=this.getPosOfNextSibling_AtObj(f,g);if(e==null||e-i>=b*2){break}if(d>=200){break}c.push(e);g=e;d++}return c};this.getNthChildIndex_AtObj=function(d,b,e){var c=this.getPosArrayOfChildren_AtObj(d,b);return c[e]};this.getDecendantIndexByNthList=function(e,d,c){if(c.length==0){return d}var f=c.shift();var b=this.getPosArrayOfChildren_AtObj(e,d);return this.getDecendantIndexByNthList(e,b[f],c)};this.getDecendantHexTLVByNthList=function(d,c,b){var a=this.getDecendantIndexByNthList(d,c,b);return this.getHexOfTLV_AtObj(d,a)};this.getDecendantHexVByNthList=function(d,c,b){var a=this.getDecendantIndexByNthList(d,c,b);return this.getHexOfV_AtObj(d,a)}};ASN1HEX.getVbyList=function(d,c,b,e){var a=this.getDecendantIndexByNthList(d,c,b);if(a===undefined){throw"can't find nthList object"}if(e!==undefined){if(d.substr(a,2)!=e){throw"checking tag doesn't match: "+d.substr(a,2)+"!="+e}}return this.getHexOfV_AtObj(d,a)};ASN1HEX.hextooidstr=function(e){var h=function(b,a){if(b.length>=a){return b}return new Array(a-b.length+1).join("0")+b};var l=[];var o=e.substr(0,2);var f=parseInt(o,16);l[0]=new String(Math.floor(f/40));l[1]=new String(f%40);var m=e.substr(2);var k=[];for(var g=0;g<m.length/2;g++){k.push(parseInt(m.substr(g*2,2),16))}var j=[];var d="";for(var g=0;g<k.length;g++){if(k[g]&128){d=d+h((k[g]&127).toString(2),7)}else{d=d+h((k[g]&127).toString(2),7);j.push(new String(parseInt(d,2)));d=""}}var n=l.join(".");if(j.length>0){n=n+"."+j.join(".")}return n};ASN1HEX.dump=function(e,c,k,g){var o=function(w,i){if(w.length<=i*2){return w}else{var v=w.substr(0,i)+"..(total "+w.length/2+"bytes).."+w.substr(w.length-i,i);return v}};if(c===undefined){c={ommit_long_octet:32}}if(k===undefined){k=0}if(g===undefined){g=""}var r=c.ommit_long_octet;if(e.substr(k,2)=="01"){var h=ASN1HEX.getHexOfV_AtObj(e,k);if(h=="00"){return g+"BOOLEAN FALSE\n"}else{return g+"BOOLEAN TRUE\n"}}if(e.substr(k,2)=="02"){var h=ASN1HEX.getHexOfV_AtObj(e,k);return g+"INTEGER "+o(h,r)+"\n"}if(e.substr(k,2)=="03"){var h=ASN1HEX.getHexOfV_AtObj(e,k);return g+"BITSTRING "+o(h,r)+"\n"}if(e.substr(k,2)=="04"){var h=ASN1HEX.getHexOfV_AtObj(e,k);if(ASN1HEX.isASN1HEX(h)){var j=g+"OCTETSTRING, encapsulates\n";j=j+ASN1HEX.dump(h,c,0,g+"  ");return j}else{return g+"OCTETSTRING "+o(h,r)+"\n"}}if(e.substr(k,2)=="05"){return g+"NULL\n"}if(e.substr(k,2)=="06"){var l=ASN1HEX.getHexOfV_AtObj(e,k);var a=KJUR.asn1.ASN1Util.oidHexToInt(l);var n=KJUR.asn1.x509.OID.oid2name(a);var b=a.replace(/\./g," ");if(n!=""){return g+"ObjectIdentifier "+n+" ("+b+")\n"}else{return g+"ObjectIdentifier ("+b+")\n"}}if(e.substr(k,2)=="0c"){return g+"UTF8String '"+hextoutf8(ASN1HEX.getHexOfV_AtObj(e,k))+"'\n"}if(e.substr(k,2)=="13"){return g+"PrintableString '"+hextoutf8(ASN1HEX.getHexOfV_AtObj(e,k))+"'\n"}if(e.substr(k,2)=="14"){return g+"TeletexString '"+hextoutf8(ASN1HEX.getHexOfV_AtObj(e,k))+"'\n"}if(e.substr(k,2)=="16"){return g+"IA5String '"+hextoutf8(ASN1HEX.getHexOfV_AtObj(e,k))+"'\n"}if(e.substr(k,2)=="17"){return g+"UTCTime "+hextoutf8(ASN1HEX.getHexOfV_AtObj(e,k))+"\n"}if(e.substr(k,2)=="18"){return g+"GeneralizedTime "+hextoutf8(ASN1HEX.getHexOfV_AtObj(e,k))+"\n"}if(e.substr(k,2)=="30"){if(e.substr(k,4)=="3000"){return g+"SEQUENCE {}\n"}var j=g+"SEQUENCE\n";var d=ASN1HEX.getPosArrayOfChildren_AtObj(e,k);var f=c;if((d.length==2||d.length==3)&&e.substr(d[0],2)=="06"&&e.substr(d[d.length-1],2)=="04"){var t=ASN1HEX.getHexOfV_AtObj(e,d[0]);var a=KJUR.asn1.ASN1Util.oidHexToInt(t);var n=KJUR.asn1.x509.OID.oid2name(a);var p=JSON.parse(JSON.stringify(c));p.x509ExtName=n;f=p}for(var q=0;q<d.length;q++){j=j+ASN1HEX.dump(e,f,d[q],g+"  ")}return j}if(e.substr(k,2)=="31"){var j=g+"SET\n";var d=ASN1HEX.getPosArrayOfChildren_AtObj(e,k);for(var q=0;q<d.length;q++){j=j+ASN1HEX.dump(e,c,d[q],g+"  ")}return j}var u=parseInt(e.substr(k,2),16);if((u&128)!=0){var m=u&31;if((u&32)!=0){var j=g+"["+m+"]\n";var d=ASN1HEX.getPosArrayOfChildren_AtObj(e,k);for(var q=0;q<d.length;q++){j=j+ASN1HEX.dump(e,c,d[q],g+"  ")}return j}else{var h=ASN1HEX.getHexOfV_AtObj(e,k);if(h.substr(0,8)=="68747470"){h=hextoutf8(h)}if(c.x509ExtName==="subjectAltName"&&m==2){h=hextoutf8(h)}var j=g+"["+m+"] "+h+"\n";return j}}return g+"UNKNOWN("+e.substr(k,2)+") "+ASN1HEX.getHexOfV_AtObj(e,k)+"\n"};ASN1HEX.isASN1HEX=function(d){if(d.length%2==1){return false}var c=ASN1HEX.getIntOfL_AtObj(d,0);var b=d.substr(0,2);var e=ASN1HEX.getHexOfL_AtObj(d,0);var a=d.length-b.length-e.length;if(a==c*2){return true}return false};if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.asn1=="undefined"||!KJUR.asn1){KJUR.asn1={}}if(typeof KJUR.asn1.x509=="undefined"||!KJUR.asn1.x509){KJUR.asn1.x509={}}KJUR.asn1.x509.Certificate=function(g){KJUR.asn1.x509.Certificate.superclass.constructor.call(this);var b=null;var d=null;var f=null;var c=null;var a=null;var e=null;this.setRsaPrvKeyByPEMandPass=function(i,k){var h=PKCS5PKEY.getDecryptedKeyHex(i,k);var j=new RSAKey;j.readPrivateKeyFromASN1HexString(h);this.prvKey=j};this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;sig=new KJUR.crypto.Signature({alg:"SHA1withRSA"});sig.init(this.prvKey);sig.updateHex(this.asn1TBSCert.getEncodedHex());this.hexSig=sig.sign();this.asn1Sig=new KJUR.asn1.DERBitString({hex:"00"+this.hexSig});var h=new KJUR.asn1.DERSequence({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=h.getEncodedHex();this.isModified=false};this.setSignatureHex=function(h){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;this.hexSig=h;this.asn1Sig=new KJUR.asn1.DERBitString({hex:"00"+this.hexSig});var i=new KJUR.asn1.DERSequence({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=i.getEncodedHex();this.isModified=false};this.getEncodedHex=function(){if(this.isModified==false&&this.hTLV!=null){return this.hTLV}throw"not signed yet"};this.getPEMString=function(){var j=this.getEncodedHex();var h=CryptoJS.enc.Hex.parse(j);var i=CryptoJS.enc.Base64.stringify(h);var k=i.replace(/(.{64})/g,"$1\r\n");return"-----BEGIN CERTIFICATE-----\r\n"+k+"\r\n-----END CERTIFICATE-----\r\n"};if(typeof g!="undefined"){if(typeof g.tbscertobj!="undefined"){this.asn1TBSCert=g.tbscertobj}if(typeof g.prvkeyobj!="undefined"){this.prvKey=g.prvkeyobj}else{if(typeof g.rsaprvkey!="undefined"){this.prvKey=g.rsaprvkey}else{if(typeof g.rsaprvpem!="undefined"&&typeof g.rsaprvpas!="undefined"){this.setRsaPrvKeyByPEMandPass(g.rsaprvpem,g.rsaprvpas)}}}}};YAHOO.lang.extend(KJUR.asn1.x509.Certificate,KJUR.asn1.ASN1Object);KJUR.asn1.x509.TBSCertificate=function(a){KJUR.asn1.x509.TBSCertificate.superclass.constructor.call(this);this._initialize=function(){this.asn1Array=new Array;this.asn1Version=new KJUR.asn1.DERTaggedObject({obj:new KJUR.asn1.DERInteger({int:2})});this.asn1SerialNumber=null;this.asn1SignatureAlg=null;this.asn1Issuer=null;this.asn1NotBefore=null;this.asn1NotAfter=null;this.asn1Subject=null;this.asn1SubjPKey=null;this.extensionsArray=new Array};this.setSerialNumberByParam=function(b){this.asn1SerialNumber=new KJUR.asn1.DERInteger(b)};this.setSignatureAlgByParam=function(b){this.asn1SignatureAlg=new KJUR.asn1.x509.AlgorithmIdentifier(b)};this.setIssuerByParam=function(b){this.asn1Issuer=new KJUR.asn1.x509.X500Name(b)};this.setNotBeforeByParam=function(b){this.asn1NotBefore=new KJUR.asn1.x509.Time(b)};this.setNotAfterByParam=function(b){this.asn1NotAfter=new KJUR.asn1.x509.Time(b)};this.setSubjectByParam=function(b){this.asn1Subject=new KJUR.asn1.x509.X500Name(b)};this.setSubjectPublicKeyByParam=function(b){this.asn1SubjPKey=new KJUR.asn1.x509.SubjectPublicKeyInfo(b)};this.setSubjectPublicKeyByGetKey=function(c){var b=KEYUTIL.getKey(c);this.asn1SubjPKey=new KJUR.asn1.x509.SubjectPublicKeyInfo(b)};this.appendExtension=function(b){this.extensionsArray.push(b)};this.appendExtensionByName=function(d,b){if(d.toLowerCase()=="basicconstraints"){var c=new KJUR.asn1.x509.BasicConstraints(b);this.appendExtension(c)}else{if(d.toLowerCase()=="keyusage"){var c=new KJUR.asn1.x509.KeyUsage(b);this.appendExtension(c)}else{if(d.toLowerCase()=="crldistributionpoints"){var c=new KJUR.asn1.x509.CRLDistributionPoints(b);this.appendExtension(c)}else{if(d.toLowerCase()=="extkeyusage"){var c=new KJUR.asn1.x509.ExtKeyUsage(b);this.appendExtension(c)}else{if(d.toLowerCase()=="authoritykeyidentifier"){var c=new KJUR.asn1.x509.AuthorityKeyIdentifier(b);this.appendExtension(c)}else{throw"unsupported extension name: "+d}}}}}};this.getEncodedHex=function(){if(this.asn1NotBefore==null||this.asn1NotAfter==null){throw"notBefore and/or notAfter not set"}var c=new KJUR.asn1.DERSequence({array:[this.asn1NotBefore,this.asn1NotAfter]});this.asn1Array=new Array;this.asn1Array.push(this.asn1Version);this.asn1Array.push(this.asn1SerialNumber);this.asn1Array.push(this.asn1SignatureAlg);this.asn1Array.push(this.asn1Issuer);this.asn1Array.push(c);this.asn1Array.push(this.asn1Subject);this.asn1Array.push(this.asn1SubjPKey);if(this.extensionsArray.length>0){var d=new KJUR.asn1.DERSequence({array:this.extensionsArray});var b=new KJUR.asn1.DERTaggedObject({explicit:true,tag:"a3",obj:d});this.asn1Array.push(b)}var e=new KJUR.asn1.DERSequence({array:this.asn1Array});this.hTLV=e.getEncodedHex();this.isModified=false;return this.hTLV};this._initialize()};YAHOO.lang.extend(KJUR.asn1.x509.TBSCertificate,KJUR.asn1.ASN1Object);KJUR.asn1.x509.Extension=function(b){KJUR.asn1.x509.Extension.superclass.constructor.call(this);var a=null;this.getEncodedHex=function(){var f=new KJUR.asn1.DERObjectIdentifier({oid:this.oid});var e=new KJUR.asn1.DEROctetString({hex:this.getExtnValueHex()});var d=new Array;d.push(f);if(this.critical){d.push(new KJUR.asn1.DERBoolean)}d.push(e);var c=new KJUR.asn1.DERSequence({array:d});return c.getEncodedHex()};this.critical=false;if(typeof b!="undefined"){if(typeof b.critical!="undefined"){this.critical=b.critical}}};YAHOO.lang.extend(KJUR.asn1.x509.Extension,KJUR.asn1.ASN1Object);KJUR.asn1.x509.KeyUsage=function(a){KJUR.asn1.x509.KeyUsage.superclass.constructor.call(this,a);this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()};this.oid="2.5.29.15";if(typeof a!="undefined"){if(typeof a.bin!="undefined"){this.asn1ExtnValue=new KJUR.asn1.DERBitString(a)}}};YAHOO.lang.extend(KJUR.asn1.x509.KeyUsage,KJUR.asn1.x509.Extension);KJUR.asn1.x509.BasicConstraints=function(c){KJUR.asn1.x509.BasicConstraints.superclass.constructor.call(this,c);var a=false;var b=-1;this.getExtnValueHex=function(){var e=new Array;if(this.cA){e.push(new KJUR.asn1.DERBoolean)}if(this.pathLen>-1){e.push(new KJUR.asn1.DERInteger({int:this.pathLen}))}var d=new KJUR.asn1.DERSequence({array:e});this.asn1ExtnValue=d;return this.asn1ExtnValue.getEncodedHex()};this.oid="2.5.29.19";this.cA=false;this.pathLen=-1;if(typeof c!="undefined"){if(typeof c.cA!="undefined"){this.cA=c.cA}if(typeof c.pathLen!="undefined"){this.pathLen=c.pathLen}}};YAHOO.lang.extend(KJUR.asn1.x509.BasicConstraints,KJUR.asn1.x509.Extension);KJUR.asn1.x509.CRLDistributionPoints=function(a){KJUR.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,a);this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()};this.setByDPArray=function(b){this.asn1ExtnValue=new KJUR.asn1.DERSequence({array:b})};this.setByOneURI=function(e){var b=new KJUR.asn1.x509.GeneralNames([{uri:e}]);var d=new KJUR.asn1.x509.DistributionPointName(b);var c=new KJUR.asn1.x509.DistributionPoint({dpobj:d});this.setByDPArray([c])};this.oid="2.5.29.31";if(typeof a!="undefined"){if(typeof a.array!="undefined"){this.setByDPArray(a.array)}else{if(typeof a.uri!="undefined"){this.setByOneURI(a.uri)}}}};YAHOO.lang.extend(KJUR.asn1.x509.CRLDistributionPoints,KJUR.asn1.x509.Extension);KJUR.asn1.x509.ExtKeyUsage=function(a){KJUR.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,a);this.setPurposeArray=function(b){this.asn1ExtnValue=new KJUR.asn1.DERSequence;for(var c=0;c<b.length;c++){var d=new KJUR.asn1.DERObjectIdentifier(b[c]);this.asn1ExtnValue.appendASN1Object(d)}};this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()};this.oid="2.5.29.37";if(typeof a!="undefined"){if(typeof a.array!="undefined"){this.setPurposeArray(a.array)}}};YAHOO.lang.extend(KJUR.asn1.x509.ExtKeyUsage,KJUR.asn1.x509.Extension);KJUR.asn1.x509.AuthorityKeyIdentifier=function(a){KJUR.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,a);this.asn1KID=null;this.asn1CertIssuer=null;this.asn1CertSN=null;this.getExtnValueHex=function(){var c=new Array;if(this.asn1KID){c.push(new KJUR.asn1.DERTaggedObject({explicit:false,tag:"80",obj:this.asn1KID}))}if(this.asn1CertIssuer){c.push(new KJUR.asn1.DERTaggedObject({explicit:false,tag:"a1",obj:this.asn1CertIssuer}))}if(this.asn1CertSN){c.push(new KJUR.asn1.DERTaggedObject({explicit:false,tag:"82",obj:this.asn1CertSN}))}var b=new KJUR.asn1.DERSequence({array:c});this.asn1ExtnValue=b;return this.asn1ExtnValue.getEncodedHex()};this.setKIDByParam=function(b){this.asn1KID=new KJUR.asn1.DEROctetString(b)};this.setCertIssuerByParam=function(b){this.asn1CertIssuer=new KJUR.asn1.x509.X500Name(b)};this.setCertSNByParam=function(b){this.asn1CertSN=new KJUR.asn1.DERInteger(b)};this.oid="2.5.29.35";if(typeof a!="undefined"){if(typeof a.kid!="undefined"){this.setKIDByParam(a.kid)}if(typeof a.issuer!="undefined"){this.setCertIssuerByParam(a.issuer)}if(typeof a.sn!="undefined"){this.setCertSNByParam(a.sn)}}};YAHOO.lang.extend(KJUR.asn1.x509.AuthorityKeyIdentifier,KJUR.asn1.x509.Extension);KJUR.asn1.x509.CRL=function(f){KJUR.asn1.x509.CRL.superclass.constructor.call(this);var a=null;var c=null;var e=null;var b=null;var d=null;this.setRsaPrvKeyByPEMandPass=function(h,j){var g=PKCS5PKEY.getDecryptedKeyHex(h,j);var i=new RSAKey;i.readPrivateKeyFromASN1HexString(g);this.rsaPrvKey=i};this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg;sig=new KJUR.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"});sig.initSign(this.rsaPrvKey);sig.updateHex(this.asn1TBSCertList.getEncodedHex());this.hexSig=sig.sign();this.asn1Sig=new KJUR.asn1.DERBitString({hex:"00"+this.hexSig});var g=new KJUR.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=g.getEncodedHex();this.isModified=false};this.getEncodedHex=function(){if(this.isModified==false&&this.hTLV!=null){return this.hTLV}throw"not signed yet"};this.getPEMString=function(){var i=this.getEncodedHex();var g=CryptoJS.enc.Hex.parse(i);var h=CryptoJS.enc.Base64.stringify(g);var j=h.replace(/(.{64})/g,"$1\r\n");return"-----BEGIN X509 CRL-----\r\n"+j+"\r\n-----END X509 CRL-----\r\n"};if(typeof f!="undefined"){if(typeof f.tbsobj!="undefined"){this.asn1TBSCertList=f.tbsobj}if(typeof f.rsaprvkey!="undefined"){this.rsaPrvKey=f.rsaprvkey}if(typeof f.rsaprvpem!="undefined"&&typeof f.rsaprvpas!="undefined"){this.setRsaPrvKeyByPEMandPass(f.rsaprvpem,f.rsaprvpas)}}};YAHOO.lang.extend(KJUR.asn1.x509.CRL,KJUR.asn1.ASN1Object);KJUR.asn1.x509.TBSCertList=function(b){KJUR.asn1.x509.TBSCertList.superclass.constructor.call(this);var a=null;this.setSignatureAlgByParam=function(c){this.asn1SignatureAlg=new KJUR.asn1.x509.AlgorithmIdentifier(c)};this.setIssuerByParam=function(c){this.asn1Issuer=new KJUR.asn1.x509.X500Name(c)};this.setThisUpdateByParam=function(c){this.asn1ThisUpdate=new KJUR.asn1.x509.Time(c)};this.setNextUpdateByParam=function(c){this.asn1NextUpdate=new KJUR.asn1.x509.Time(c)};this.addRevokedCert=function(c,d){var f={};if(c!=undefined&&c!=null){f.sn=c}if(d!=undefined&&d!=null){f.time=d}var e=new KJUR.asn1.x509.CRLEntry(f);this.aRevokedCert.push(e)};this.getEncodedHex=function(){this.asn1Array=new Array;if(this.asn1Version!=null){this.asn1Array.push(this.asn1Version)}this.asn1Array.push(this.asn1SignatureAlg);this.asn1Array.push(this.asn1Issuer);this.asn1Array.push(this.asn1ThisUpdate);if(this.asn1NextUpdate!=null){this.asn1Array.push(this.asn1NextUpdate)}if(this.aRevokedCert.length>0){var c=new KJUR.asn1.DERSequence({array:this.aRevokedCert});this.asn1Array.push(c)}var d=new KJUR.asn1.DERSequence({array:this.asn1Array});this.hTLV=d.getEncodedHex();this.isModified=false;return this.hTLV};this._initialize=function(){this.asn1Version=null;this.asn1SignatureAlg=null;this.asn1Issuer=null;this.asn1ThisUpdate=null;this.asn1NextUpdate=null;this.aRevokedCert=new Array};this._initialize()};YAHOO.lang.extend(KJUR.asn1.x509.TBSCertList,KJUR.asn1.ASN1Object);KJUR.asn1.x509.CRLEntry=function(c){KJUR.asn1.x509.CRLEntry.superclass.constructor.call(this);var b=null;var a=null;this.setCertSerial=function(d){this.sn=new KJUR.asn1.DERInteger(d)};this.setRevocationDate=function(d){this.time=new KJUR.asn1.x509.Time(d)};this.getEncodedHex=function(){var d=new KJUR.asn1.DERSequence({array:[this.sn,this.time]});this.TLV=d.getEncodedHex();return this.TLV};if(typeof c!="undefined"){if(typeof c.time!="undefined"){this.setRevocationDate(c.time)}if(typeof c.sn!="undefined"){this.setCertSerial(c.sn)}}};YAHOO.lang.extend(KJUR.asn1.x509.CRLEntry,KJUR.asn1.ASN1Object);KJUR.asn1.x509.X500Name=function(b){KJUR.asn1.x509.X500Name.superclass.constructor.call(this);this.asn1Array=new Array;this.setByString=function(c){var d=c.split("/");d.shift();for(var e=0;e<d.length;e++){this.asn1Array.push(new KJUR.asn1.x509.RDN({str:d[e]}))}};this.setByObject=function(e){for(var c in e){if(e.hasOwnProperty(c)){var d=new KJUR.asn1.x509.RDN({str:c+"="+e[c]});this.asn1Array?this.asn1Array.push(d):this.asn1Array=[d]}}};this.getEncodedHex=function(){if(typeof this.hTLV=="string"){return this.hTLV}var c=new KJUR.asn1.DERSequence({array:this.asn1Array});this.hTLV=c.getEncodedHex();return this.hTLV};if(typeof b!="undefined"){if(typeof b.str!="undefined"){this.setByString(b.str)}else{if(typeof b==="object"){this.setByObject(b)}}if(typeof b.certissuer!="undefined"){var a=new X509;a.hex=X509.pemToHex(b.certissuer);this.hTLV=a.getIssuerHex()}if(typeof b.certsubject!="undefined"){var a=new X509;a.hex=X509.pemToHex(b.certsubject);this.hTLV=a.getSubjectHex()}}};YAHOO.lang.extend(KJUR.asn1.x509.X500Name,KJUR.asn1.ASN1Object);KJUR.asn1.x509.RDN=function(a){KJUR.asn1.x509.RDN.superclass.constructor.call(this);this.asn1Array=new Array;this.addByString=function(b){this.asn1Array.push(new KJUR.asn1.x509.AttributeTypeAndValue({str:b}))};this.getEncodedHex=function(){var b=new KJUR.asn1.DERSet({array:this.asn1Array});this.TLV=b.getEncodedHex();return this.TLV};if(typeof a!="undefined"){if(typeof a.str!="undefined"){this.addByString(a.str)}}};YAHOO.lang.extend(KJUR.asn1.x509.RDN,KJUR.asn1.ASN1Object);KJUR.asn1.x509.AttributeTypeAndValue=function(b){KJUR.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var d=null;var c=null;var a="utf8";this.setByString=function(e){if(e.match(/^([^=]+)=(.+)$/)){this.setByAttrTypeAndValueStr(RegExp.$1,RegExp.$2)}else{throw"malformed attrTypeAndValueStr: "+e}};this.setByAttrTypeAndValueStr=function(g,f){this.typeObj=KJUR.asn1.x509.OID.atype2obj(g);var e=a;if(g=="C"){e="prn"}this.valueObj=this.getValueObj(e,f)};this.getValueObj=function(f,e){if(f=="utf8"){return new KJUR.asn1.DERUTF8String({str:e})}if(f=="prn"){return new KJUR.asn1.DERPrintableString({str:e})}if(f=="tel"){return new KJUR.asn1.DERTeletexString({str:e})}if(f=="ia5"){return new KJUR.asn1.DERIA5String({str:e})}throw"unsupported directory string type: type="+f+" value="+e};this.getEncodedHex=function(){var e=new KJUR.asn1.DERSequence({array:[this.typeObj,this.valueObj]});this.TLV=e.getEncodedHex();return this.TLV};if(typeof b!="undefined"){if(typeof b.str!="undefined"){this.setByString(b.str)}}};YAHOO.lang.extend(KJUR.asn1.x509.AttributeTypeAndValue,KJUR.asn1.ASN1Object);KJUR.asn1.x509.SubjectPublicKeyInfo=function(d){KJUR.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var b=null;var c=null;var a=null;this.setRSAKey=function(e){if(!RSAKey.prototype.isPrototypeOf(e)){throw"argument is not RSAKey instance"}this.rsaKey=e;var g=new KJUR.asn1.DERInteger({bigint:e.n});var f=new KJUR.asn1.DERInteger({int:e.e});var i=new KJUR.asn1.DERSequence({array:[g,f]});var h=i.getEncodedHex();this.asn1AlgId=new KJUR.asn1.x509.AlgorithmIdentifier({name:"rsaEncryption"});this.asn1SubjPKey=new KJUR.asn1.DERBitString({hex:"00"+h})};this.setRSAPEM=function(g){if(g.match(/-----BEGIN PUBLIC KEY-----/)){var n=g;n=n.replace(/^-----[^-]+-----/,"");n=n.replace(/-----[^-]+-----\s*$/,"");var m=n.replace(/\s+/g,"");var f=CryptoJS.enc.Base64.parse(m);var i=CryptoJS.enc.Hex.stringify(f);var k=_rsapem_getHexValueArrayOfChildrenFromHex(i);var h=k[1];var l=h.substr(2);var e=_rsapem_getHexValueArrayOfChildrenFromHex(l);var j=new RSAKey;j.setPublic(e[0],e[1]);this.setRSAKey(j)}else{throw"key not supported"}};this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null){throw"algId and/or subjPubKey not set"}var e=new KJUR.asn1.DERSequence({array:[this.asn1AlgId,this.asn1SubjPKey]});return e};this.getEncodedHex=function(){var e=this.getASN1Object();this.hTLV=e.getEncodedHex();return this.hTLV};this._setRSAKey=function(e){var g=KJUR.asn1.ASN1Util.newObject({seq:[{int:{bigint:e.n}},{int:{int:e.e}}]});var f=g.getEncodedHex();this.asn1AlgId=new KJUR.asn1.x509.AlgorithmIdentifier({name:"rsaEncryption"});this.asn1SubjPKey=new KJUR.asn1.DERBitString({hex:"00"+f})};this._setEC=function(e){var f=new KJUR.asn1.DERObjectIdentifier({name:e.curveName});this.asn1AlgId=new KJUR.asn1.x509.AlgorithmIdentifier({name:"ecPublicKey",asn1params:f});this.asn1SubjPKey=new KJUR.asn1.DERBitString({hex:"00"+e.pubKeyHex})};this._setDSA=function(e){var f=new KJUR.asn1.ASN1Util.newObject({seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]});this.asn1AlgId=new KJUR.asn1.x509.AlgorithmIdentifier({name:"dsa",asn1params:f});var g=new KJUR.asn1.DERInteger({bigint:e.y});this.asn1SubjPKey=new KJUR.asn1.DERBitString({hex:"00"+g.getEncodedHex()})};if(typeof d!="undefined"){if(typeof RSAKey!="undefined"&&d instanceof RSAKey){this._setRSAKey(d)}else{if(typeof KJUR.crypto.ECDSA!="undefined"&&d instanceof KJUR.crypto.ECDSA){this._setEC(d)}else{if(typeof KJUR.crypto.DSA!="undefined"&&d instanceof KJUR.crypto.DSA){this._setDSA(d)}else{if(typeof d.rsakey!="undefined"){this.setRSAKey(d.rsakey)}else{if(typeof d.rsapem!="undefined"){this.setRSAPEM(d.rsapem)}}}}}}};YAHOO.lang.extend(KJUR.asn1.x509.SubjectPublicKeyInfo,KJUR.asn1.ASN1Object);KJUR.asn1.x509.Time=function(c){KJUR.asn1.x509.Time.superclass.constructor.call(this);var b=null;var a=null;this.setTimeParams=function(d){
this.timeParams=d};this.getEncodedHex=function(){var d=null;if(this.timeParams!=null){if(this.type=="utc"){d=new KJUR.asn1.DERUTCTime(this.timeParams)}else{d=new KJUR.asn1.DERGeneralizedTime(this.timeParams)}}else{if(this.type=="utc"){d=new KJUR.asn1.DERUTCTime}else{d=new KJUR.asn1.DERGeneralizedTime}}this.TLV=d.getEncodedHex();return this.TLV};this.type="utc";if(typeof c!="undefined"){if(typeof c.type!="undefined"){this.type=c.type}else{if(typeof c.str!="undefined"){if(c.str.match(/^[0-9]{12}Z$/)){this.type="utc"}if(c.str.match(/^[0-9]{14}Z$/)){this.type="gen"}}}this.timeParams=c}};YAHOO.lang.extend(KJUR.asn1.x509.Time,KJUR.asn1.ASN1Object);KJUR.asn1.x509.AlgorithmIdentifier=function(e){KJUR.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this);var a=null;var d=null;var b=null;var c=false;this.getEncodedHex=function(){if(this.nameAlg==null&&this.asn1Alg==null){throw"algorithm not specified"}if(this.nameAlg!=null&&this.asn1Alg==null){this.asn1Alg=KJUR.asn1.x509.OID.name2obj(this.nameAlg)}var f=[this.asn1Alg];if(!this.paramEmpty){f.push(this.asn1Params)}var g=new KJUR.asn1.DERSequence({array:f});this.hTLV=g.getEncodedHex();return this.hTLV};if(typeof e!="undefined"){if(typeof e.name!="undefined"){this.nameAlg=e.name}if(typeof e.asn1params!="undefined"){this.asn1Params=e.asn1params}if(typeof e.paramempty!="undefined"){this.paramEmpty=e.paramempty}}if(this.asn1Params==null){this.asn1Params=new KJUR.asn1.DERNull}};YAHOO.lang.extend(KJUR.asn1.x509.AlgorithmIdentifier,KJUR.asn1.ASN1Object);KJUR.asn1.x509.GeneralName=function(d){KJUR.asn1.x509.GeneralName.superclass.constructor.call(this);var c=null;var b=null;var a={rfc822:"81",dns:"82",dn:"a4",uri:"86"};this.explicit=false;this.setByParam=function(k){var j=null;var g=null;if(typeof k=="undefined"){return}if(typeof k.rfc822!="undefined"){this.type="rfc822";g=new KJUR.asn1.DERIA5String({str:k[this.type]})}if(typeof k.dns!="undefined"){this.type="dns";g=new KJUR.asn1.DERIA5String({str:k[this.type]})}if(typeof k.uri!="undefined"){this.type="uri";g=new KJUR.asn1.DERIA5String({str:k[this.type]})}if(typeof k.certissuer!="undefined"){this.type="dn";this.explicit=true;var h=k.certissuer;var f=null;if(h.match(/^[0-9A-Fa-f]+$/)){f==h}if(h.indexOf("-----BEGIN ")!=-1){f=X509.pemToHex(h)}if(f==null){throw"certissuer param not cert"}var e=new X509;e.hex=f;var i=e.getIssuerHex();g=new KJUR.asn1.ASN1Object;g.hTLV=i}if(typeof k.certsubj!="undefined"){this.type="dn";this.explicit=true;var h=k.certsubj;var f=null;if(h.match(/^[0-9A-Fa-f]+$/)){f==h}if(h.indexOf("-----BEGIN ")!=-1){f=X509.pemToHex(h)}if(f==null){throw"certsubj param not cert"}var e=new X509;e.hex=f;var i=e.getSubjectHex();g=new KJUR.asn1.ASN1Object;g.hTLV=i}if(this.type==null){throw"unsupported type in params="+k}this.asn1Obj=new KJUR.asn1.DERTaggedObject({explicit:this.explicit,tag:a[this.type],obj:g})};this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()};if(typeof d!="undefined"){this.setByParam(d)}};YAHOO.lang.extend(KJUR.asn1.x509.GeneralName,KJUR.asn1.ASN1Object);KJUR.asn1.x509.GeneralNames=function(b){KJUR.asn1.x509.GeneralNames.superclass.constructor.call(this);var a=null;this.setByParamArray=function(e){for(var c=0;c<e.length;c++){var d=new KJUR.asn1.x509.GeneralName(e[c]);this.asn1Array.push(d)}};this.getEncodedHex=function(){var c=new KJUR.asn1.DERSequence({array:this.asn1Array});return c.getEncodedHex()};this.asn1Array=new Array;if(typeof b!="undefined"){this.setByParamArray(b)}};YAHOO.lang.extend(KJUR.asn1.x509.GeneralNames,KJUR.asn1.ASN1Object);KJUR.asn1.x509.DistributionPointName=function(b){KJUR.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=null;var c=null;var a=null;var d=null;this.getEncodedHex=function(){if(this.type!="full"){throw"currently type shall be 'full': "+this.type}this.asn1Obj=new KJUR.asn1.DERTaggedObject({explicit:false,tag:this.tag,obj:this.asn1V});this.hTLV=this.asn1Obj.getEncodedHex();return this.hTLV};if(typeof b!="undefined"){if(KJUR.asn1.x509.GeneralNames.prototype.isPrototypeOf(b)){this.type="full";this.tag="a0";this.asn1V=b}else{throw"This class supports GeneralNames only as argument"}}};YAHOO.lang.extend(KJUR.asn1.x509.DistributionPointName,KJUR.asn1.ASN1Object);KJUR.asn1.x509.DistributionPoint=function(b){KJUR.asn1.x509.DistributionPoint.superclass.constructor.call(this);var a=null;this.getEncodedHex=function(){var c=new KJUR.asn1.DERSequence;if(this.asn1DP!=null){var d=new KJUR.asn1.DERTaggedObject({explicit:true,tag:"a0",obj:this.asn1DP});c.appendASN1Object(d)}this.hTLV=c.getEncodedHex();return this.hTLV};if(typeof b!="undefined"){if(typeof b.dpobj!="undefined"){this.asn1DP=b.dpobj}}};YAHOO.lang.extend(KJUR.asn1.x509.DistributionPoint,KJUR.asn1.ASN1Object);KJUR.asn1.x509.OID=new function(a){this.atype2oidList={C:"2.5.4.6",O:"2.5.4.10",OU:"2.5.4.11",ST:"2.5.4.8",L:"2.5.4.7",CN:"2.5.4.3",SN:"2.5.4.4",DN:"2.5.4.49",DC:"0.9.2342.19200300.100.1.25"};this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",countryName:"2.5.4.6",organization:"2.5.4.10",organizationalUnit:"2.5.4.11",stateOrProvinceName:"2.5.4.8",locality:"2.5.4.7",commonName:"2.5.4.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4"};this.objCache={};this.name2obj=function(b){if(typeof this.objCache[b]!="undefined"){return this.objCache[b]}if(typeof this.name2oidList[b]=="undefined"){throw"Name of ObjectIdentifier not defined: "+b}var c=this.name2oidList[b];var d=new KJUR.asn1.DERObjectIdentifier({oid:c});this.objCache[b]=d;return d};this.atype2obj=function(b){if(typeof this.objCache[b]!="undefined"){return this.objCache[b]}if(typeof this.atype2oidList[b]=="undefined"){throw"AttributeType name undefined: "+b}var c=this.atype2oidList[b];var d=new KJUR.asn1.DERObjectIdentifier({oid:c});this.objCache[b]=d;return d}};KJUR.asn1.x509.OID.oid2name=function(b){var c=KJUR.asn1.x509.OID.name2oidList;for(var a in c){if(c[a]==b){return a}}return""};KJUR.asn1.x509.OID.name2oid=function(a){var b=KJUR.asn1.x509.OID.name2oidList;if(b[a]===undefined){return""}return b[a]};KJUR.asn1.x509.X509Util=new function(){this.getPKCS8PubKeyPEMfromRSAKey=function(i){var h=null;var f=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(i.n);var j=KJUR.asn1.ASN1Util.integerToByteHex(i.e);var a=new KJUR.asn1.DERInteger({hex:f});var g=new KJUR.asn1.DERInteger({hex:j});var l=new KJUR.asn1.DERSequence({array:[a,g]});var c=l.getEncodedHex();var d=new KJUR.asn1.x509.AlgorithmIdentifier({name:"rsaEncryption"});var b=new KJUR.asn1.DERBitString({hex:"00"+c});var k=new KJUR.asn1.DERSequence({array:[d,b]});var e=k.getEncodedHex();var h=KJUR.asn1.ASN1Util.getPEMStringFromHex(e,"PUBLIC KEY");return h}};KJUR.asn1.x509.X509Util.newCertPEM=function(f){var c=KJUR.asn1.x509;var e=new c.TBSCertificate;if(f.serial!==undefined){e.setSerialNumberByParam(f.serial)}else{throw"serial number undefined."}if(typeof f.sigalg.name=="string"){e.setSignatureAlgByParam(f.sigalg)}else{throw"unproper signature algorithm name"}if(f.issuer!==undefined){e.setIssuerByParam(f.issuer)}else{throw"issuer name undefined."}if(f.notbefore!==undefined){e.setNotBeforeByParam(f.notbefore)}else{throw"notbefore undefined."}if(f.notafter!==undefined){e.setNotAfterByParam(f.notafter)}else{throw"notafter undefined."}if(f.subject!==undefined){e.setSubjectByParam(f.subject)}else{throw"subject name undefined."}if(f.sbjpubkey!==undefined){e.setSubjectPublicKeyByGetKey(f.sbjpubkey)}else{throw"subject public key undefined."}if(f.ext!==undefined&&f.ext.length!==undefined){for(var b=0;b<f.ext.length;b++){for(key in f.ext[b]){e.appendExtensionByName(key,f.ext[b][key])}}}if(f.cakey===undefined&&f.sighex===undefined){throw"param cakey and sighex undefined."}var d=null;var a=null;if(f.cakey){d=KEYUTIL.getKey.apply(null,f.cakey);a=new c.Certificate({tbscertobj:e,prvkeyobj:d});a.sign()}if(f.sighex){a=new c.Certificate({tbscertobj:e});a.setSignatureHex(f.sighex)}return a.getPEMString()};if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.asn1=="undefined"||!KJUR.asn1){KJUR.asn1={}}if(typeof KJUR.asn1.cms=="undefined"||!KJUR.asn1.cms){KJUR.asn1.cms={}}KJUR.asn1.cms.Attribute=function(b){KJUR.asn1.cms.Attribute.superclass.constructor.call(this);var a=[];this.getEncodedHex=function(){var f,e,c;f=new KJUR.asn1.DERObjectIdentifier({oid:this.attrTypeOid});e=new KJUR.asn1.DERSet({array:this.valueList});try{e.getEncodedHex()}catch(d){throw"fail valueSet.getEncodedHex in Attribute(1)/"+d}c=new KJUR.asn1.DERSequence({array:[f,e]});try{this.hTLV=c.getEncodedHex()}catch(d){throw"failed seq.getEncodedHex in Attribute(2)/"+d}return this.hTLV}};YAHOO.lang.extend(KJUR.asn1.cms.Attribute,KJUR.asn1.ASN1Object);KJUR.asn1.cms.ContentType=function(b){KJUR.asn1.cms.ContentType.superclass.constructor.call(this);this.attrTypeOid="1.2.840.113549.1.9.3";var a=null;if(typeof b!="undefined"){var a=new KJUR.asn1.DERObjectIdentifier(b);this.valueList=[a]}};YAHOO.lang.extend(KJUR.asn1.cms.ContentType,KJUR.asn1.cms.Attribute);KJUR.asn1.cms.MessageDigest=function(e){KJUR.asn1.cms.MessageDigest.superclass.constructor.call(this);this.attrTypeOid="1.2.840.113549.1.9.4";if(typeof e!="undefined"){if(e.eciObj instanceof KJUR.asn1.cms.EncapsulatedContentInfo&&typeof e.hashAlg=="string"){var b=e.eciObj.eContentValueHex;var a=e.hashAlg;var c=KJUR.crypto.Util.hashHex(b,a);var d=new KJUR.asn1.DEROctetString({hex:c});d.getEncodedHex();this.valueList=[d]}else{var d=new KJUR.asn1.DEROctetString(e);d.getEncodedHex();this.valueList=[d]}}};YAHOO.lang.extend(KJUR.asn1.cms.MessageDigest,KJUR.asn1.cms.Attribute);KJUR.asn1.cms.SigningTime=function(c){KJUR.asn1.cms.SigningTime.superclass.constructor.call(this);this.attrTypeOid="1.2.840.113549.1.9.5";if(typeof c!="undefined"){var a=new KJUR.asn1.x509.Time(c);try{a.getEncodedHex()}catch(b){throw"SigningTime.getEncodedHex() failed/"+b}this.valueList=[a]}};YAHOO.lang.extend(KJUR.asn1.cms.SigningTime,KJUR.asn1.cms.Attribute);KJUR.asn1.cms.SigningCertificate=function(d){KJUR.asn1.cms.SigningCertificate.superclass.constructor.call(this);this.attrTypeOid="1.2.840.113549.1.9.16.2.12";var a=KJUR.asn1;var c=KJUR.asn1.cms;var b=KJUR.crypto;this.setCerts=function(l){var j=[];for(var h=0;h<l.length;h++){var f=KEYUTIL.getHexFromPEM(l[h]);var e=b.Util.hashHex(f,"sha1");var m=new a.DEROctetString({hex:e});m.getEncodedHex();var k=new c.IssuerAndSerialNumber({cert:l[h]});k.getEncodedHex();var n=new a.DERSequence({array:[m,k]});n.getEncodedHex();j.push(n)}var g=new a.DERSequence({array:j});g.getEncodedHex();this.valueList=[g]};if(typeof d!="undefined"){if(typeof d.array=="object"){this.setCerts(d.array)}}};YAHOO.lang.extend(KJUR.asn1.cms.SigningCertificate,KJUR.asn1.cms.Attribute);KJUR.asn1.cms.SigningCertificateV2=function(e){KJUR.asn1.cms.SigningCertificateV2.superclass.constructor.call(this);this.attrTypeOid="1.2.840.113549.1.9.16.2.47";var b=KJUR.asn1;var f=KJUR.asn1.x509;var d=KJUR.asn1.cms;var c=KJUR.crypto;this.setCerts=function(p,h){var n=[];for(var l=0;l<p.length;l++){var j=KEYUTIL.getHexFromPEM(p[l]);var r=[];if(h!="sha256"){r.push(new f.AlgorithmIdentifier({name:h}))}var g=c.Util.hashHex(j,h);var q=new b.DEROctetString({hex:g});q.getEncodedHex();r.push(q);var m=new d.IssuerAndSerialNumber({cert:p[l]});m.getEncodedHex();r.push(m);var o=new b.DERSequence({array:r});o.getEncodedHex();n.push(o)}var k=new b.DERSequence({array:n});k.getEncodedHex();this.valueList=[k]};if(typeof e!="undefined"){if(typeof e.array=="object"){var a="sha256";if(typeof e.hashAlg=="string"){a=e.hashAlg}this.setCerts(e.array,a)}}};YAHOO.lang.extend(KJUR.asn1.cms.SigningCertificateV2,KJUR.asn1.cms.Attribute);KJUR.asn1.cms.IssuerAndSerialNumber=function(c){KJUR.asn1.cms.IssuerAndSerialNumber.superclass.constructor.call(this);var e=null;var b=null;var a=KJUR.asn1;var d=a.x509;this.setByCertPEM=function(i){var g=KEYUTIL.getHexFromPEM(i);var f=new X509;f.hex=g;var j=f.getIssuerHex();this.dIssuer=new d.X500Name;this.dIssuer.hTLV=j;var h=f.getSerialNumberHex();this.dSerial=new a.DERInteger({hex:h})};this.getEncodedHex=function(){var f=new KJUR.asn1.DERSequence({array:[this.dIssuer,this.dSerial]});this.hTLV=f.getEncodedHex();return this.hTLV};if(typeof c!="undefined"){if(typeof c=="string"&&c.indexOf("-----BEGIN ")!=-1){this.setByCertPEM(c)}if(c.issuer&&c.serial){if(c.issuer instanceof KJUR.asn1.x509.X500Name){this.dIssuer=c.issuer}else{this.dIssuer=new KJUR.asn1.x509.X500Name(c.issuer)}if(c.serial instanceof KJUR.asn1.DERInteger){this.dSerial=c.serial}else{this.dSerial=new KJUR.asn1.DERInteger(c.serial)}}if(typeof c.cert=="string"){this.setByCertPEM(c.cert)}}};YAHOO.lang.extend(KJUR.asn1.cms.IssuerAndSerialNumber,KJUR.asn1.ASN1Object);KJUR.asn1.cms.AttributeList=function(a){KJUR.asn1.cms.AttributeList.superclass.constructor.call(this);this.list=new Array;this.sortFlag=true;this.add=function(b){if(b instanceof KJUR.asn1.cms.Attribute){this.list.push(b)}};this.length=function(){return this.list.length};this.clear=function(){this.list=new Array;this.hTLV=null;this.hV=null};this.getEncodedHex=function(){if(typeof this.hTLV=="string"){return this.hTLV}var b=new KJUR.asn1.DERSet({array:this.list,sortflag:this.sortFlag});this.hTLV=b.getEncodedHex();return this.hTLV};if(typeof a!="undefined"){if(typeof a.sortflag!="undefined"&&a.sortflag==false){this.sortFlag=false}}};YAHOO.lang.extend(KJUR.asn1.cms.AttributeList,KJUR.asn1.ASN1Object);KJUR.asn1.cms.SignerInfo=function(c){KJUR.asn1.cms.SignerInfo.superclass.constructor.call(this);var a=KJUR.asn1;var b=KJUR.asn1.cms;var d=KJUR.asn1.x509;this.dCMSVersion=new a.DERInteger({int:1});this.dSignerIdentifier=null;this.dDigestAlgorithm=null;this.dSignedAttrs=new b.AttributeList;this.dSigAlg=null;this.dSig=null;this.dUnsignedAttrs=new b.AttributeList;this.setSignerIdentifier=function(f){if(typeof f=="string"&&f.indexOf("CERTIFICATE")!=-1&&f.indexOf("BEGIN")!=-1&&f.indexOf("END")!=-1){var e=f;this.dSignerIdentifier=new b.IssuerAndSerialNumber({cert:f})}};this.setForContentAndHash=function(e){if(typeof e!="undefined"){if(e.eciObj instanceof KJUR.asn1.cms.EncapsulatedContentInfo){this.dSignedAttrs.add(new b.ContentType({oid:"1.2.840.113549.1.7.1"}));this.dSignedAttrs.add(new b.MessageDigest({eciObj:e.eciObj,hashAlg:e.hashAlg}))}if(typeof e.sdObj!="undefined"&&e.sdObj instanceof KJUR.asn1.cms.SignedData){if(e.sdObj.digestAlgNameList.join(":").indexOf(e.hashAlg)==-1){e.sdObj.digestAlgNameList.push(e.hashAlg)}}if(typeof e.hashAlg=="string"){this.dDigestAlgorithm=new d.AlgorithmIdentifier({name:e.hashAlg})}}};this.sign=function(j,f){this.dSigAlg=new d.AlgorithmIdentifier({name:f});var g=this.dSignedAttrs.getEncodedHex();var e=KEYUTIL.getKey(j);var i=new KJUR.crypto.Signature({alg:f});i.init(e);i.updateHex(g);var h=i.sign();this.dSig=new a.DEROctetString({hex:h})};this.addUnsigned=function(e){this.hTLV=null;this.dUnsignedAttrs.hTLV=null;this.dUnsignedAttrs.add(e)};this.getEncodedHex=function(){if(this.dSignedAttrs instanceof KJUR.asn1.cms.AttributeList&&this.dSignedAttrs.length()==0){throw"SignedAttrs length = 0 (empty)"}var e=new a.DERTaggedObject({obj:this.dSignedAttrs,tag:"a0",explicit:false});var h=null;if(this.dUnsignedAttrs.length()>0){h=new a.DERTaggedObject({obj:this.dUnsignedAttrs,tag:"a1",explicit:false})}var g=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,e,this.dSigAlg,this.dSig];if(h!=null){g.push(h)}var f=new a.DERSequence({array:g});this.hTLV=f.getEncodedHex();return this.hTLV}};YAHOO.lang.extend(KJUR.asn1.cms.SignerInfo,KJUR.asn1.ASN1Object);KJUR.asn1.cms.EncapsulatedContentInfo=function(c){KJUR.asn1.cms.EncapsulatedContentInfo.superclass.constructor.call(this);var a=KJUR.asn1;var b=KJUR.asn1.cms;var d=KJUR.asn1.x509;this.dEContentType=new a.DERObjectIdentifier({name:"data"});this.dEContent=null;this.isDetached=false;this.eContentValueHex=null;this.setContentType=function(e){if(e.match(/^[0-2][.][0-9.]+$/)){this.dEContentType=new a.DERObjectIdentifier({oid:e})}else{this.dEContentType=new a.DERObjectIdentifier({name:e})}};this.setContentValue=function(e){if(typeof e!="undefined"){if(typeof e.hex=="string"){this.eContentValueHex=e.hex}else{if(typeof e.str=="string"){this.eContentValueHex=utf8tohex(e.str)}}}};this.setContentValueHex=function(e){this.eContentValueHex=e};this.setContentValueStr=function(e){this.eContentValueHex=utf8tohex(e)};this.getEncodedHex=function(){if(typeof this.eContentValueHex!="string"){throw"eContentValue not yet set"}var g=new a.DEROctetString({hex:this.eContentValueHex});this.dEContent=new a.DERTaggedObject({obj:g,tag:"a0",explicit:true});var e=[this.dEContentType];if(!this.isDetached){e.push(this.dEContent)}var f=new a.DERSequence({array:e});this.hTLV=f.getEncodedHex();return this.hTLV}};YAHOO.lang.extend(KJUR.asn1.cms.EncapsulatedContentInfo,KJUR.asn1.ASN1Object);KJUR.asn1.cms.ContentInfo=function(c){KJUR.asn1.cms.ContentInfo.superclass.constructor.call(this);var a=KJUR.asn1;var b=KJUR.asn1.cms;var d=KJUR.asn1.x509;this.dContentType=null;this.dContent=null;this.setContentType=function(e){if(typeof e=="string"){this.dContentType=d.OID.name2obj(e)}};this.getEncodedHex=function(){var f=new a.DERTaggedObject({obj:this.dContent,tag:"a0",explicit:true});var e=new a.DERSequence({array:[this.dContentType,f]});this.hTLV=e.getEncodedHex();return this.hTLV};if(typeof c!="undefined"){if(c.type){this.setContentType(c.type)}if(c.obj&&c.obj instanceof a.ASN1Object){this.dContent=c.obj}}};YAHOO.lang.extend(KJUR.asn1.cms.ContentInfo,KJUR.asn1.ASN1Object);KJUR.asn1.cms.SignedData=function(c){KJUR.asn1.cms.SignedData.superclass.constructor.call(this);var a=KJUR.asn1;var b=KJUR.asn1.cms;var d=KJUR.asn1.x509;this.dCMSVersion=new a.DERInteger({int:1});this.dDigestAlgs=null;this.digestAlgNameList=[];this.dEncapContentInfo=new b.EncapsulatedContentInfo;this.dCerts=null;this.certificateList=[];this.crlList=[];this.signerInfoList=[new b.SignerInfo];this.addCertificatesByPEM=function(e){var f=KEYUTIL.getHexFromPEM(e);var g=new a.ASN1Object;g.hTLV=f;this.certificateList.push(g)};this.getEncodedHex=function(){if(typeof this.hTLV=="string"){return this.hTLV}if(this.dDigestAlgs==null){var k=[];for(var j=0;j<this.digestAlgNameList.length;j++){var h=this.digestAlgNameList[j];var m=new d.AlgorithmIdentifier({name:h});k.push(m)}this.dDigestAlgs=new a.DERSet({array:k})}var e=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(this.dCerts==null){if(this.certificateList.length>0){var l=new a.DERSet({array:this.certificateList});this.dCerts=new a.DERTaggedObject({obj:l,tag:"a0",explicit:false})}}if(this.dCerts!=null){e.push(this.dCerts)}var g=new a.DERSet({array:this.signerInfoList});e.push(g);var f=new a.DERSequence({array:e});this.hTLV=f.getEncodedHex();return this.hTLV};this.getContentInfo=function(){this.getEncodedHex();var e=new b.ContentInfo({type:"signed-data",obj:this});return e};this.getContentInfoEncodedHex=function(){var e=this.getContentInfo();var f=e.getEncodedHex();return f};this.getPEM=function(){var e=this.getContentInfoEncodedHex();var f=a.ASN1Util.getPEMStringFromHex(e,"CMS");return f}};YAHOO.lang.extend(KJUR.asn1.cms.SignedData,KJUR.asn1.ASN1Object);KJUR.asn1.cms.CMSUtil=new function(){};KJUR.asn1.cms.CMSUtil.newSignedData=function(a){var h=KJUR.asn1.cms;var g=KJUR.asn1.cades;var f=new h.SignedData;f.dEncapContentInfo.setContentValue(a.content);if(typeof a.certs=="object"){for(var b=0;b<a.certs.length;b++){f.addCertificatesByPEM(a.certs[b])}}f.signerInfoList=[];for(var b=0;b<a.signerInfos.length;b++){var d=a.signerInfos[b];var c=new h.SignerInfo;c.setSignerIdentifier(d.signerCert);c.setForContentAndHash({sdObj:f,eciObj:f.dEncapContentInfo,hashAlg:d.hashAlg});for(attrName in d.sAttr){var j=d.sAttr[attrName];if(attrName=="SigningTime"){var e=new h.SigningTime(j);c.dSignedAttrs.add(e)}if(attrName=="SigningCertificate"){var e=new h.SigningCertificate(j);c.dSignedAttrs.add(e)}if(attrName=="SigningCertificateV2"){var e=new h.SigningCertificateV2(j);c.dSignedAttrs.add(e)}if(attrName=="SignaturePolicyIdentifier"){var e=new g.SignaturePolicyIdentifier(j);c.dSignedAttrs.add(e)}}c.sign(d.signerPrvKey,d.sigAlg);f.signerInfoList.push(c)}return f};if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.asn1=="undefined"||!KJUR.asn1){KJUR.asn1={}}if(typeof KJUR.asn1.tsp=="undefined"||!KJUR.asn1.tsp){KJUR.asn1.tsp={}}KJUR.asn1.tsp.Accuracy=function(b){KJUR.asn1.tsp.Accuracy.superclass.constructor.call(this);var a=KJUR.asn1;this.seconds=null;this.millis=null;this.micros=null;this.getEncodedHex=function(){var e=null;var g=null;var i=null;var c=[];if(this.seconds!=null){e=new a.DERInteger({int:this.seconds});c.push(e)}if(this.millis!=null){var h=new a.DERInteger({int:this.millis});g=new a.DERTaggedObject({obj:h,tag:"80",explicit:false});c.push(g)}if(this.micros!=null){var f=new a.DERInteger({int:this.micros});i=new a.DERTaggedObject({obj:f,tag:"81",explicit:false});c.push(i)}var d=new a.DERSequence({array:c});this.hTLV=d.getEncodedHex();return this.hTLV};if(typeof b!="undefined"){if(typeof b.seconds=="number"){this.seconds=b.seconds}if(typeof b.millis=="number"){this.millis=b.millis}if(typeof b.micros=="number"){this.micros=b.micros}}};YAHOO.lang.extend(KJUR.asn1.tsp.Accuracy,KJUR.asn1.ASN1Object);KJUR.asn1.tsp.MessageImprint=function(b){KJUR.asn1.tsp.MessageImprint.superclass.constructor.call(this);var a=KJUR.asn1;var c=KJUR.asn1.x509;this.dHashAlg=null;this.dHashValue=null;this.getEncodedHex=function(){if(typeof this.hTLV=="string"){return this.hTLV}var d=new a.DERSequence({array:[this.dHashAlg,this.dHashValue]});return d.getEncodedHex()};if(typeof b!="undefined"){if(typeof b.hashAlg=="string"){this.dHashAlg=new c.AlgorithmIdentifier({name:b.hashAlg})}if(typeof b.hashValue=="string"){this.dHashValue=new a.DEROctetString({hex:b.hashValue})}}};YAHOO.lang.extend(KJUR.asn1.tsp.MessageImprint,KJUR.asn1.ASN1Object);KJUR.asn1.tsp.TimeStampReq=function(c){KJUR.asn1.tsp.TimeStampReq.superclass.constructor.call(this);var a=KJUR.asn1;var b=KJUR.asn1.tsp;this.dVersion=new a.DERInteger({int:1});this.dMessageImprint=null;this.dPolicy=null;this.dNonce=null;this.certReq=true;this.setMessageImprint=function(d){if(d instanceof KJUR.asn1.tsp.MessageImprint){this.dMessageImprint=d;return}if(typeof d=="object"){this.dMessageImprint=new b.MessageImprint(d)}};this.getEncodedHex=function(){if(this.dMessageImprint==null){throw"messageImprint shall be specified"}var d=[this.dVersion,this.dMessageImprint];if(this.dPolicy!=null){d.push(this.dPolicy)}if(this.dNonce!=null){d.push(this.dNonce)}if(this.certReq){d.push(new a.DERBoolean)}var e=new a.DERSequence({array:d});this.hTLV=e.getEncodedHex();return this.hTLV};if(typeof c!="undefined"){if(typeof c.mi=="object"){this.setMessageImprint(c.mi)}if(typeof c.policy=="object"){this.dPolicy=new a.DERObjectIdentifier(c.policy)}if(typeof c.nonce=="object"){this.dNonce=new a.DERInteger(c.nonce)}if(typeof c.certreq=="boolean"){this.certReq=c.certreq}}};YAHOO.lang.extend(KJUR.asn1.tsp.TimeStampReq,KJUR.asn1.ASN1Object);KJUR.asn1.tsp.TSTInfo=function(c){KJUR.asn1.tsp.TSTInfo.superclass.constructor.call(this);var a=KJUR.asn1;var d=KJUR.asn1.x509;var b=KJUR.asn1.tsp;this.dVersion=new a.DERInteger({int:1});this.dPolicy=null;this.dMessageImprint=null;this.dSerialNumber=null;this.dGenTime=null;this.dAccuracy=null;this.dOrdering=null;this.dNonce=null;this.dTsa=null;this.getEncodedHex=function(){var e=[this.dVersion];if(this.dPolicy==null){throw"policy shall be specified."}e.push(this.dPolicy);if(this.dMessageImprint==null){throw"messageImprint shall be specified."}e.push(this.dMessageImprint);if(this.dSerialNumber==null){throw"serialNumber shall be specified."}e.push(this.dSerialNumber);if(this.dGenTime==null){throw"genTime shall be specified."}e.push(this.dGenTime);if(this.dAccuracy!=null){e.push(this.dAccuracy)}if(this.dOrdering!=null){e.push(this.dOrdering)}if(this.dNonce!=null){e.push(this.dNonce)}if(this.dTsa!=null){e.push(this.dTsa)}var f=new a.DERSequence({array:e});this.hTLV=f.getEncodedHex();return this.hTLV};if(typeof c!="undefined"){if(typeof c.policy=="string"){if(!c.policy.match(/^[0-9.]+$/)){throw"policy shall be oid like 0.1.4.134"}this.dPolicy=new a.DERObjectIdentifier({oid:c.policy})}if(typeof c.messageImprint!="undefined"){this.dMessageImprint=new b.MessageImprint(c.messageImprint)}if(typeof c.serialNumber!="undefined"){this.dSerialNumber=new a.DERInteger(c.serialNumber)}if(typeof c.genTime!="undefined"){this.dGenTime=new a.DERGeneralizedTime(c.genTime)}if(typeof c.accuracy!="undefind"){this.dAccuracy=new b.Accuracy(c.accuracy)}if(typeof c.ordering!="undefined"&&c.ordering==true){this.dOrdering=new a.DERBoolean}if(typeof c.nonce!="undefined"){this.dNonce=new a.DERInteger(c.nonce)}if(typeof c.tsa!="undefined"){this.dTsa=new d.X500Name(c.tsa)}}};YAHOO.lang.extend(KJUR.asn1.tsp.TSTInfo,KJUR.asn1.ASN1Object);KJUR.asn1.tsp.TimeStampResp=function(c){KJUR.asn1.tsp.TimeStampResp.superclass.constructor.call(this);var a=KJUR.asn1;var b=KJUR.asn1.tsp;this.dStatus=null;this.dTST=null;this.getEncodedHex=function(){if(this.dStatus==null){throw"status shall be specified"}var d=[this.dStatus];if(this.dTST!=null){d.push(this.dTST)}var e=new a.DERSequence({array:d});this.hTLV=e.getEncodedHex();return this.hTLV};if(typeof c!="undefined"){if(typeof c.status=="object"){this.dStatus=new b.PKIStatusInfo(c.status)}if(typeof c.tst!="undefined"&&c.tst instanceof KJUR.asn1.ASN1Object){this.dTST=c.tst.getContentInfo()}}};YAHOO.lang.extend(KJUR.asn1.tsp.TimeStampResp,KJUR.asn1.ASN1Object);KJUR.asn1.tsp.PKIStatusInfo=function(c){KJUR.asn1.tsp.PKIStatusInfo.superclass.constructor.call(this);var a=KJUR.asn1;var b=KJUR.asn1.tsp;this.dStatus=null;this.dStatusString=null;this.dFailureInfo=null;this.getEncodedHex=function(){if(this.dStatus==null){throw"status shall be specified"}var d=[this.dStatus];if(this.dStatusString!=null){d.push(this.dStatusString)}if(this.dFailureInfo!=null){d.push(this.dFailureInfo)}var e=new a.DERSequence({array:d});this.hTLV=e.getEncodedHex();return this.hTLV};if(typeof c!="undefined"){if(typeof c.status=="object"){this.dStatus=new b.PKIStatus(c.status)}if(typeof c.statstr=="object"){this.dStatusString=new b.PKIFreeText({array:c.statstr})}if(typeof c.failinfo=="object"){this.dFailureInfo=new b.PKIFailureInfo(c.failinfo)}}};YAHOO.lang.extend(KJUR.asn1.tsp.PKIStatusInfo,KJUR.asn1.ASN1Object);KJUR.asn1.tsp.PKIStatus=function(e){KJUR.asn1.tsp.PKIStatus.superclass.constructor.call(this);var a=KJUR.asn1;var b=KJUR.asn1.tsp;var d=null;this.getEncodedHex=function(){this.hTLV=this.dStatus.getEncodedHex();return this.hTLV};if(typeof e!="undefined"){if(typeof e.name!="undefined"){var c=b.PKIStatus.valueList;if(typeof c[e.name]=="undefined"){throw"name undefined: "+e.name}this.dStatus=new a.DERInteger({int:c[e.name]})}else{this.dStatus=new a.DERInteger(e)}}};YAHOO.lang.extend(KJUR.asn1.tsp.PKIStatus,KJUR.asn1.ASN1Object);KJUR.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};KJUR.asn1.tsp.PKIFreeText=function(b){KJUR.asn1.tsp.PKIFreeText.superclass.constructor.call(this);var a=KJUR.asn1;this.textList=[];this.getEncodedHex=function(){var c=[];for(var e=0;e<this.textList.length;e++){c.push(new a.DERUTF8String({str:this.textList[e]}))}var d=new a.DERSequence({array:c});this.hTLV=d.getEncodedHex();return this.hTLV};if(typeof b!="undefined"){if(typeof b.array=="object"){this.textList=b.array}}};YAHOO.lang.extend(KJUR.asn1.tsp.PKIFreeText,KJUR.asn1.ASN1Object);KJUR.asn1.tsp.PKIFailureInfo=function(d){KJUR.asn1.tsp.PKIFailureInfo.superclass.constructor.call(this);var a=KJUR.asn1;var b=KJUR.asn1.tsp;this.value=null;this.getEncodedHex=function(){if(this.value==null){throw"value shall be specified"}var e=new Number(this.value).toString(2);var f=new a.DERBitString;f.setByBinaryString(e);this.hTLV=f.getEncodedHex();return this.hTLV};if(typeof d!="undefined"){if(typeof d.name=="string"){var c=b.PKIFailureInfo.valueList;if(typeof c[d.name]=="undefined"){throw"name undefined: "+d.name}this.value=c[d.name]}else{if(typeof d["int"]=="number"){this.value=d["int"]}}}};YAHOO.lang.extend(KJUR.asn1.tsp.PKIFailureInfo,KJUR.asn1.ASN1Object);KJUR.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};KJUR.asn1.tsp.AbstractTSAAdapter=function(a){this.getTSTHex=function(c,b){throw"not implemented yet"}};KJUR.asn1.tsp.SimpleTSAAdapter=function(a){KJUR.asn1.tsp.SimpleTSAAdapter.superclass.constructor.call(this);this.params=null;this.serial=0;this.getTSTHex=function(c,b){var e=KJUR.crypto.Util.hashHex(c,b);this.params.tstInfo.messageImprint={hashAlg:b,hashValue:e};this.params.tstInfo.serialNumber={int:this.serial++};var d=Math.floor(Math.random()*1e9);this.params.tstInfo.nonce={int:d};var f=KJUR.asn1.tsp.TSPUtil.newTimeStampToken(this.params);return f.getContentInfoEncodedHex()};if(typeof a!="undefined"){this.params=a}};YAHOO.lang.extend(KJUR.asn1.tsp.SimpleTSAAdapter,KJUR.asn1.tsp.AbstractTSAAdapter);KJUR.asn1.tsp.FixedTSAAdapter=function(a){KJUR.asn1.tsp.FixedTSAAdapter.superclass.constructor.call(this);this.params=null;this.getTSTHex=function(c,b){var d=KJUR.crypto.Util.hashHex(c,b);this.params.tstInfo.messageImprint={hashAlg:b,hashValue:d};var e=KJUR.asn1.tsp.TSPUtil.newTimeStampToken(this.params);return e.getContentInfoEncodedHex()};if(typeof a!="undefined"){this.params=a}};YAHOO.lang.extend(KJUR.asn1.tsp.FixedTSAAdapter,KJUR.asn1.tsp.AbstractTSAAdapter);KJUR.asn1.tsp.TSPUtil=new function(){};KJUR.asn1.tsp.TSPUtil.newTimeStampToken=function(b){var j=KJUR.asn1.cms;var a=KJUR.asn1.tsp;var g=new j.SignedData;var e=new a.TSTInfo(b.tstInfo);var f=e.getEncodedHex();g.dEncapContentInfo.setContentValue({hex:f});g.dEncapContentInfo.setContentType("tstinfo");if(typeof b.certs=="object"){for(var c=0;c<b.certs.length;c++){g.addCertificatesByPEM(b.certs[c])}}var d=g.signerInfoList[0];d.setSignerIdentifier(b.signerCert);d.setForContentAndHash({sdObj:g,eciObj:g.dEncapContentInfo,hashAlg:b.hashAlg});var h=new j.SigningCertificate({array:[b.signerCert]});d.dSignedAttrs.add(h);d.sign(b.signerPrvKey,b.sigAlg);return g};KJUR.asn1.tsp.TSPUtil.parseTimeStampReq=function(d){var f={};f.certreq=false;var h=ASN1HEX.getPosArrayOfChildren_AtObj(d,0);if(h.length<2){throw"TimeStampReq must have at least 2 items";
}var c=ASN1HEX.getHexOfTLV_AtObj(d,h[1]);f.mi=KJUR.asn1.tsp.TSPUtil.parseMessageImprint(c);for(var e=2;e<h.length;e++){var b=h[e];var a=d.substr(b,2);if(a=="06"){var g=ASN1HEX.getHexOfV_AtObj(d,b);f.policy=ASN1HEX.hextooidstr(g)}if(a=="02"){f.nonce=ASN1HEX.getHexOfV_AtObj(d,b)}if(a=="01"){f.certreq=true}}return f};KJUR.asn1.tsp.TSPUtil.parseMessageImprint=function(c){var h={};if(c.substr(0,2)!="30"){throw"head of messageImprint hex shall be '30'"}var a=ASN1HEX.getPosArrayOfChildren_AtObj(c,0);var i=ASN1HEX.getDecendantIndexByNthList(c,0,[0,0]);var d=ASN1HEX.getHexOfV_AtObj(c,i);var e=ASN1HEX.hextooidstr(d);var g=KJUR.asn1.x509.OID.oid2name(e);if(g==""){throw"hashAlg name undefined: "+e}var b=g;var f=ASN1HEX.getDecendantIndexByNthList(c,0,[1]);h.hashAlg=b;h.hashValue=ASN1HEX.getHexOfV_AtObj(c,f);return h};if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.asn1=="undefined"||!KJUR.asn1){KJUR.asn1={}}if(typeof KJUR.asn1.cades=="undefined"||!KJUR.asn1.cades){KJUR.asn1.cades={}}KJUR.asn1.cades.SignaturePolicyIdentifier=function(e){KJUR.asn1.cades.SignaturePolicyIdentifier.superclass.constructor.call(this);this.attrTypeOid="1.2.840.113549.1.9.16.2.15";var b=KJUR.asn1;var d=KJUR.asn1.cades;if(typeof e!="undefined"){if(typeof e.oid=="string"&&typeof e.hash=="object"){var f=new b.DERObjectIdentifier({oid:e.oid});var a=new d.OtherHashAlgAndValue(e.hash);var c=new b.DERSequence({array:[f,a]});this.valueList=[c]}}};YAHOO.lang.extend(KJUR.asn1.cades.SignaturePolicyIdentifier,KJUR.asn1.cms.Attribute);KJUR.asn1.cades.OtherHashAlgAndValue=function(b){KJUR.asn1.cades.OtherHashAlgAndValue.superclass.constructor.call(this);var a=KJUR.asn1;var c=KJUR.asn1.x509;this.dAlg=null;this.dHash=null;this.getEncodedHex=function(){var d=new a.DERSequence({array:[this.dAlg,this.dHash]});this.hTLV=d.getEncodedHex();return this.hTLV};if(typeof b!="undefined"){if(typeof b.alg=="string"&&typeof b.hash=="string"){this.dAlg=new c.AlgorithmIdentifier({name:b.alg});this.dHash=new a.DEROctetString({hex:b.hash})}}};YAHOO.lang.extend(KJUR.asn1.cades.OtherHashAlgAndValue,KJUR.asn1.ASN1Object);KJUR.asn1.cades.SignatureTimeStamp=function(c){KJUR.asn1.cades.SignatureTimeStamp.superclass.constructor.call(this);this.attrTypeOid="1.2.840.113549.1.9.16.2.14";this.tstHex=null;var a=KJUR.asn1;if(typeof c!="undefined"){if(typeof c.res!="undefined"){if(typeof c.res=="string"&&c.res.match(/^[0-9A-Fa-f]+$/)){}else{if(c.res instanceof KJUR.asn1.ASN1Object){}else{throw"res param shall be ASN1Object or hex string"}}}if(typeof c.tst!="undefined"){if(typeof c.tst=="string"&&c.tst.match(/^[0-9A-Fa-f]+$/)){var b=new a.ASN1Object;this.tstHex=c.tst;b.hTLV=this.tstHex;b.getEncodedHex();this.valueList=[b]}else{if(c.tst instanceof KJUR.asn1.ASN1Object){}else{throw"tst param shall be ASN1Object or hex string"}}}}};YAHOO.lang.extend(KJUR.asn1.cades.SignatureTimeStamp,KJUR.asn1.cms.Attribute);KJUR.asn1.cades.CompleteCertificateRefs=function(c){KJUR.asn1.cades.CompleteCertificateRefs.superclass.constructor.call(this);this.attrTypeOid="1.2.840.113549.1.9.16.2.21";var a=KJUR.asn1;var b=KJUR.asn1.cades;this.setByArray=function(d){this.valueList=[];for(var e=0;e<d.length;e++){var f=new b.OtherCertID(d[e]);this.valueList.push(f)}};if(typeof c!="undefined"){if(typeof c=="object"&&typeof c.length=="number"){this.setByArray(c)}}};YAHOO.lang.extend(KJUR.asn1.cades.CompleteCertificateRefs,KJUR.asn1.cms.Attribute);KJUR.asn1.cades.OtherCertID=function(d){KJUR.asn1.cades.OtherCertID.superclass.constructor.call(this);var a=KJUR.asn1;var c=KJUR.asn1.cms;var b=KJUR.asn1.cades;this.hasIssuerSerial=true;this.dOtherCertHash=null;this.dIssuerSerial=null;this.setByCertPEM=function(e){this.dOtherCertHash=new b.OtherHash(e);if(this.hasIssuerSerial){this.dIssuerSerial=new c.IssuerAndSerialNumber(e)}};this.getEncodedHex=function(){if(this.hTLV!=null){return this.hTLV}if(this.dOtherCertHash==null){throw"otherCertHash not set"}var e=[this.dOtherCertHash];if(this.dIssuerSerial!=null){e.push(this.dIssuerSerial)}var f=new a.DERSequence({array:e});this.hTLV=f.getEncodedHex();return this.hTLV};if(typeof d!="undefined"){if(typeof d=="string"&&d.indexOf("-----BEGIN ")!=-1){this.setByCertPEM(d)}if(typeof d=="object"){if(d.hasis===false){this.hasIssuerSerial=false}if(typeof d.cert=="string"){this.setByCertPEM(d.cert)}}}};YAHOO.lang.extend(KJUR.asn1.cades.OtherCertID,KJUR.asn1.ASN1Object);KJUR.asn1.cades.OtherHash=function(c){KJUR.asn1.cades.OtherHash.superclass.constructor.call(this);var a=KJUR.asn1;var b=KJUR.asn1.cades;this.alg="sha256";this.dOtherHash=null;this.setByCertPEM=function(d){if(d.indexOf("-----BEGIN ")==-1){throw"certPEM not to seem PEM format"}var e=X509.pemToHex(d);var f=KJUR.crypto.Util.hashHex(e,this.alg);this.dOtherHash=new b.OtherHashAlgAndValue({alg:this.alg,hash:f})};this.getEncodedHex=function(){if(this.dOtherHash==null){throw"OtherHash not set"}return this.dOtherHash.getEncodedHex()};if(typeof c!="undefined"){if(typeof c=="string"){if(c.indexOf("-----BEGIN ")!=-1){this.setByCertPEM(c)}else{if(c.match(/^[0-9A-Fa-f]+$/)){this.dOtherHash=new a.DEROctetString({hex:c})}else{throw"unsupported string value for params"}}}else{if(typeof c=="object"){if(typeof c.cert=="string"){if(typeof c.alg=="string"){this.alg=c.alg}this.setByCertPEM(c.cert)}else{this.dOtherHash=new b.OtherHashAlgAndValue(c)}}}}};YAHOO.lang.extend(KJUR.asn1.cades.OtherHash,KJUR.asn1.ASN1Object);KJUR.asn1.cades.CAdESUtil=new function(){};KJUR.asn1.cades.CAdESUtil.addSigTS=function(c,b,a){};KJUR.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(d){var q=KJUR.asn1;var p=KJUR.asn1.cms;var c=KJUR.asn1.cades.CAdESUtil;var a={};if(ASN1HEX.getDecendantHexTLVByNthList(d,0,[0])!="06092a864886f70d010702"){throw"hex is not CMS SignedData"}var s=ASN1HEX.getDecendantIndexByNthList(d,0,[1,0]);var b=ASN1HEX.getPosArrayOfChildren_AtObj(d,s);if(b.length<4){throw"num of SignedData elem shall be 4 at least"}var f=b.shift();a.version=ASN1HEX.getHexOfTLV_AtObj(d,f);var l=b.shift();a.algs=ASN1HEX.getHexOfTLV_AtObj(d,l);var m=b.shift();a.encapcontent=ASN1HEX.getHexOfTLV_AtObj(d,m);a.certs=null;a.revs=null;a.si=[];var n=b.shift();if(d.substr(n,2)=="a0"){a.certs=ASN1HEX.getHexOfTLV_AtObj(d,n);n=b.shift()}if(d.substr(n,2)=="a1"){a.revs=ASN1HEX.getHexOfTLV_AtObj(d,n);n=b.shift()}var k=n;if(d.substr(k,2)!="31"){throw"Can't find signerInfos"}var j=ASN1HEX.getPosArrayOfChildren_AtObj(d,k);for(var h=0;h<j.length;h++){var o=j[h];var e=c.parseSignerInfoForAddingUnsigned(d,o,h);a.si[h]=e}var g=null;a.obj=new p.SignedData;g=new q.ASN1Object;g.hTLV=a.version;a.obj.dCMSVersion=g;g=new q.ASN1Object;g.hTLV=a.algs;a.obj.dDigestAlgs=g;g=new q.ASN1Object;g.hTLV=a.encapcontent;a.obj.dEncapContentInfo=g;g=new q.ASN1Object;g.hTLV=a.certs;a.obj.dCerts=g;a.obj.signerInfoList=[];for(var h=0;h<a.si.length;h++){a.obj.signerInfoList.push(a.si[h].obj)}return a};KJUR.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(d,k,a){var m=KJUR.asn1;var l=KJUR.asn1.cms;var b={};var e=ASN1HEX.getPosArrayOfChildren_AtObj(d,k);if(e.length!=6){throw"not supported items for SignerInfo (!=6)"}var f=e.shift();b.version=ASN1HEX.getHexOfTLV_AtObj(d,f);var n=e.shift();b.si=ASN1HEX.getHexOfTLV_AtObj(d,n);var h=e.shift();b.digalg=ASN1HEX.getHexOfTLV_AtObj(d,h);var c=e.shift();b.sattrs=ASN1HEX.getHexOfTLV_AtObj(d,c);var i=e.shift();b.sigalg=ASN1HEX.getHexOfTLV_AtObj(d,i);var j=e.shift();b.sig=ASN1HEX.getHexOfTLV_AtObj(d,j);b.sigval=ASN1HEX.getHexOfV_AtObj(d,j);var g=null;b.obj=new l.SignerInfo;g=new m.ASN1Object;g.hTLV=b.version;b.obj.dCMSVersion=g;g=new m.ASN1Object;g.hTLV=b.si;b.obj.dSignerIdentifier=g;g=new m.ASN1Object;g.hTLV=b.digalg;b.obj.dDigestAlgorithm=g;g=new m.ASN1Object;g.hTLV=b.sattrs;b.obj.dSignedAttrs=g;g=new m.ASN1Object;g.hTLV=b.sigalg;b.obj.dSigAlg=g;g=new m.ASN1Object;g.hTLV=b.sig;b.obj.dSig=g;b.obj.dUnsignedAttrs=new l.AttributeList;return b};if(typeof KJUR.asn1.csr=="undefined"||!KJUR.asn1.csr){KJUR.asn1.csr={}}KJUR.asn1.csr.CertificationRequest=function(f){KJUR.asn1.csr.CertificationRequest.superclass.constructor.call(this);var b=null;var d=null;var e=null;var c=null;var a=null;this.sign=function(i,h){if(this.prvKey==null){this.prvKey=h}this.asn1SignatureAlg=new KJUR.asn1.x509.AlgorithmIdentifier({name:i});sig=new KJUR.crypto.Signature({alg:i});sig.initSign(this.prvKey);sig.updateHex(this.asn1CSRInfo.getEncodedHex());this.hexSig=sig.sign();this.asn1Sig=new KJUR.asn1.DERBitString({hex:"00"+this.hexSig});var g=new KJUR.asn1.DERSequence({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=g.getEncodedHex();this.isModified=false};this.getPEMString=function(){var g=KJUR.asn1.ASN1Util.getPEMStringFromHex(this.getEncodedHex(),"CERTIFICATE REQUEST");return g};this.getEncodedHex=function(){if(this.isModified==false&&this.hTLV!=null){return this.hTLV}throw"not signed yet"};if(typeof f!="undefined"){if(typeof f.csrinfo!="undefined"){this.asn1CSRInfo=f.csrinfo}}};YAHOO.lang.extend(KJUR.asn1.csr.CertificationRequest,KJUR.asn1.ASN1Object);KJUR.asn1.csr.CertificationRequestInfo=function(a){KJUR.asn1.csr.CertificationRequestInfo.superclass.constructor.call(this);this._initialize=function(){this.asn1Array=new Array;this.asn1Version=new KJUR.asn1.DERInteger({int:0});this.asn1Subject=null;this.asn1SubjPKey=null;this.extensionsArray=new Array};this.setSubjectByParam=function(b){this.asn1Subject=new KJUR.asn1.x509.X500Name(b)};this.setSubjectPublicKeyByGetKey=function(c){var b=KEYUTIL.getKey(c);this.asn1SubjPKey=new KJUR.asn1.x509.SubjectPublicKeyInfo(b)};this.getEncodedHex=function(){this.asn1Array=new Array;this.asn1Array.push(this.asn1Version);this.asn1Array.push(this.asn1Subject);this.asn1Array.push(this.asn1SubjPKey);var c=new KJUR.asn1.DERSequence({array:this.extensionsArray});var b=new KJUR.asn1.DERTaggedObject({explicit:false,tag:"a0",obj:c});this.asn1Array.push(b);var d=new KJUR.asn1.DERSequence({array:this.asn1Array});this.hTLV=d.getEncodedHex();this.isModified=false;return this.hTLV};this._initialize()};YAHOO.lang.extend(KJUR.asn1.csr.CertificationRequestInfo,KJUR.asn1.ASN1Object);KJUR.asn1.csr.CSRUtil=new function(){};KJUR.asn1.csr.CSRUtil.newCSRPEM=function(f){var c=KJUR.asn1.csr;if(f.subject===undefined){throw"parameter subject undefined"}if(f.sbjpubkey===undefined){throw"parameter sbjpubkey undefined"}if(f.sigalg===undefined){throw"parameter sigalg undefined"}if(f.sbjprvkey===undefined){throw"parameter sbjpubkey undefined"}var b=new c.CertificationRequestInfo;b.setSubjectByParam(f.subject);b.setSubjectPublicKeyByGetKey(f.sbjpubkey);var d=new c.CertificationRequest({csrinfo:b});var a=KEYUTIL.getKey(f.sbjprvkey);d.sign(f.sigalg,a);var e=d.getPEMString();return e};if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.asn1=="undefined"||!KJUR.asn1){KJUR.asn1={}}if(typeof KJUR.asn1.ocsp=="undefined"||!KJUR.asn1.ocsp){KJUR.asn1.ocsp={}}KJUR.asn1.ocsp.DEFAULT_HASH="sha1";KJUR.asn1.ocsp.CertID=function(c){KJUR.asn1.ocsp.CertID.superclass.constructor.call(this);var a=KJUR.asn1;var e=KJUR.asn1.x509;this.dHashAlg=null;this.dIssuerNameHash=null;this.dIssuerKeyHash=null;this.dSerialNumber=null;this.setByValue=function(i,h,f,g){if(g===undefined){g=KJUR.asn1.ocsp.DEFAULT_HASH}this.dHashAlg=new e.AlgorithmIdentifier({name:g});this.dIssuerNameHash=new a.DEROctetString({hex:i});this.dIssuerKeyHash=new a.DEROctetString({hex:h});this.dSerialNumber=new a.DERInteger({hex:f})};this.setByCert=function(m,i,k){if(k===undefined){k=KJUR.asn1.ocsp.DEFAULT_HASH}var f=new X509;f.readCertPEM(i);var n=new X509;n.readCertPEM(m);var o=X509.getPublicKeyInfoPropOfCertPEM(m);var l=o.keyhex;var g=f.getSerialNumberHex();var h=KJUR.crypto.Util.hashHex(n.getSubjectHex(),k);var j=KJUR.crypto.Util.hashHex(l,k);this.setByValue(h,j,g,k);this.hoge=f.getSerialNumberHex()};this.getEncodedHex=function(){if(this.dHashAlg===null&&this.dIssuerNameHash===null&&this.dIssuerKeyHash===null&&this.dSerialNumber===null){throw"not yet set values"}var f=[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber];var g=new a.DERSequence({array:f});this.hTLV=g.getEncodedHex();return this.hTLV};if(typeof c!=="undefined"){var b=c;if(typeof b.issuerCert!=="undefined"&&typeof b.subjectCert!=="undefined"){var d=KJUR.asn1.ocsp.DEFAULT_HASH;if(typeof b.alg==="undefined"){d=undefined}this.setByCert(b.issuerCert,b.subjectCert,d)}else{if(typeof b.namehash!=="undefined"&&typeof b.keyhash!=="undefined"&&typeof b.serial!=="undefined"){var d=KJUR.asn1.ocsp.DEFAULT_HASH;if(typeof b.alg==="undefined"){d=undefined}this.setByValue(b.namehash,b.keyhash,b.serial,d)}else{throw"invalid constructor arguments"}}}};YAHOO.lang.extend(KJUR.asn1.ocsp.CertID,KJUR.asn1.ASN1Object);KJUR.asn1.ocsp.Request=function(b){KJUR.asn1.ocsp.Request.superclass.constructor.call(this);this.dReqCert=null;this.dExt=null;this.getEncodedHex=function(){var c=[];if(this.dReqCert===null){throw"reqCert not set"}c.push(this.dReqCert);var d=new KJUR.asn1.DERSequence({array:c});this.hTLV=d.getEncodedHex();return this.hTLV};if(typeof b!=="undefined"){var a=new KJUR.asn1.ocsp.CertID(b);this.dReqCert=a}};YAHOO.lang.extend(KJUR.asn1.ocsp.Request,KJUR.asn1.ASN1Object);KJUR.asn1.ocsp.TBSRequest=function(a){KJUR.asn1.ocsp.TBSRequest.superclass.constructor.call(this);this.version=0;this.dRequestorName=null;this.dRequestList=[];this.dRequestExt=null;this.setRequestListByParam=function(d){var b=[];for(var c=0;c<d.length;c++){var e=new KJUR.asn1.ocsp.Request(d[0]);b.push(e)}this.dRequestList=b};this.getEncodedHex=function(){var b=[];if(this.version!==0){throw"not supported version: "+this.version}if(this.dRequestorName!==null){throw"requestorName not supported"}var d=new KJUR.asn1.DERSequence({array:this.dRequestList});b.push(d);if(this.dRequestExt!==null){throw"requestExtensions not supported"}var c=new KJUR.asn1.DERSequence({array:b});this.hTLV=c.getEncodedHex();return this.hTLV};if(typeof a!=="undefined"){if(typeof a.reqList!=="undefined"){this.setRequestListByParam(a.reqList)}}};YAHOO.lang.extend(KJUR.asn1.ocsp.TBSRequest,KJUR.asn1.ASN1Object);KJUR.asn1.ocsp.OCSPRequest=function(b){KJUR.asn1.ocsp.OCSPRequest.superclass.constructor.call(this);this.dTbsRequest=null;this.dOptionalSignature=null;this.getEncodedHex=function(){var c=[];if(this.dTbsRequest!==null){c.push(this.dTbsRequest)}else{throw"tbsRequest not set"}if(this.dOptionalSignature!==null){throw"optionalSignature not supported"}var d=new KJUR.asn1.DERSequence({array:c});this.hTLV=d.getEncodedHex();return this.hTLV};if(typeof b!=="undefined"){if(typeof b.reqList!=="undefined"){var a=new KJUR.asn1.ocsp.TBSRequest(b);this.dTbsRequest=a}}};YAHOO.lang.extend(KJUR.asn1.ocsp.OCSPRequest,KJUR.asn1.ASN1Object);KJUR.asn1.ocsp.OCSPUtil={};KJUR.asn1.ocsp.OCSPUtil.getRequestHex=function(a,b,e){if(e===undefined){e=KJUR.asn1.ocsp.DEFAULT_HASH}var d={alg:e,issuerCert:a,subjectCert:b};var c=new KJUR.asn1.ocsp.OCSPRequest({reqList:[d]});return c.getEncodedHex()};var KJUR;if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.lang=="undefined"||!KJUR.lang){KJUR.lang={}}KJUR.lang.String=function(){};function Base64x(){}function stoBA(d){var b=new Array;for(var c=0;c<d.length;c++){b[c]=d.charCodeAt(c)}return b}function BAtos(b){var d="";for(var c=0;c<b.length;c++){d=d+String.fromCharCode(b[c])}return d}function BAtohex(b){var e="";for(var d=0;d<b.length;d++){var c=b[d].toString(16);if(c.length==1){c="0"+c}e=e+c}return e}function stohex(a){return BAtohex(stoBA(a))}function stob64(a){return hex2b64(stohex(a))}function stob64u(a){return b64tob64u(hex2b64(stohex(a)))}function b64utos(a){return BAtos(b64toBA(b64utob64(a)))}function b64tob64u(a){a=a.replace(/\=/g,"");a=a.replace(/\+/g,"-");a=a.replace(/\//g,"_");return a}function b64utob64(a){if(a.length%4==2){a=a+"=="}else{if(a.length%4==3){a=a+"="}}a=a.replace(/-/g,"+");a=a.replace(/_/g,"/");return a}function hextob64u(a){if(a.length%2==1){a="0"+a}return b64tob64u(hex2b64(a))}function b64utohex(a){return b64tohex(b64utob64(a))}var utf8tob64u,b64utoutf8;if(typeof Buffer==="function"){utf8tob64u=function(a){return b64tob64u(new Buffer(a,"utf8").toString("base64"))};b64utoutf8=function(a){return new Buffer(b64utob64(a),"base64").toString("utf8")}}else{utf8tob64u=function(a){return hextob64u(uricmptohex(encodeURIComponentAll(a)))};b64utoutf8=function(a){return decodeURIComponent(hextouricmp(b64utohex(a)))}}function utf8tob64(a){return hex2b64(uricmptohex(encodeURIComponentAll(a)))}function b64toutf8(a){return decodeURIComponent(hextouricmp(b64tohex(a)))}function utf8tohex(a){return uricmptohex(encodeURIComponentAll(a))}function hextoutf8(a){return decodeURIComponent(hextouricmp(a))}function hextorstr(c){var b="";for(var a=0;a<c.length-1;a+=2){b+=String.fromCharCode(parseInt(c.substr(a,2),16))}return b}function rstrtohex(c){var a="";for(var b=0;b<c.length;b++){a+=("0"+c.charCodeAt(b).toString(16)).slice(-2)}return a}function hextob64(a){return hex2b64(a)}function hextob64nl(b){var a=hextob64(b);var c=a.replace(/(.{64})/g,"$1\r\n");c=c.replace(/\r\n$/,"");return c}function b64nltohex(b){var a=b.replace(/[^0-9A-Za-z\/+=]*/g,"");var c=b64tohex(a);return c}function uricmptohex(a){return a.replace(/%/g,"")}function hextouricmp(a){return a.replace(/(..)/g,"%$1")}function encodeURIComponentAll(a){var d=encodeURIComponent(a);var b="";for(var c=0;c<d.length;c++){if(d[c]=="%"){b=b+d.substr(c,3);c=c+2}else{b=b+"%"+stohex(d[c])}}return b}function newline_toUnix(a){a=a.replace(/\r\n/gm,"\n");return a}function newline_toDos(a){a=a.replace(/\r\n/gm,"\n");a=a.replace(/\n/gm,"\r\n");return a}KJUR.lang.String.isInteger=function(a){if(a.match(/^[0-9]+$/)){return true}else{if(a.match(/^-[0-9]+$/)){return true}else{return false}}};KJUR.lang.String.isHex=function(a){if(a.length%2==0&&(a.match(/^[0-9a-f]+$/)||a.match(/^[0-9A-F]+$/))){return true}else{return false}};KJUR.lang.String.isBase64=function(a){a=a.replace(/\s+/g,"");if(a.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&a.length%4==0){return true}else{return false}};KJUR.lang.String.isBase64URL=function(a){if(a.match(/[+\/=]/)){return false}a=b64utob64(a);return KJUR.lang.String.isBase64(a)};KJUR.lang.String.isIntegerArray=function(a){a=a.replace(/\s+/g,"");if(a.match(/^\[[0-9,]+\]$/)){return true}else{return false}};function intarystrtohex(b){b=b.replace(/^\s*\[\s*/,"");b=b.replace(/\s*\]\s*$/,"");b=b.replace(/\s*/g,"");try{var c=b.split(/,/).map(function(g,e,h){var f=parseInt(g);if(f<0||255<f){throw"integer not in range 0-255"}var d=("00"+f.toString(16)).slice(-2);return d}).join("");return c}catch(a){throw"malformed integer array string: "+a}}var strdiffidx=function(c,a){var d=c.length;if(c.length>a.length){d=a.length}for(var b=0;b<d;b++){if(c.charCodeAt(b)!=a.charCodeAt(b)){return b}}if(c.length!=a.length){return d}return-1};if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.crypto=="undefined"||!KJUR.crypto){KJUR.crypto={}}KJUR.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"};this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"};this.CRYPTOJSMESSAGEDIGESTNAME={md5:CryptoJS.algo.MD5,sha1:CryptoJS.algo.SHA1,sha224:CryptoJS.algo.SHA224,sha256:CryptoJS.algo.SHA256,sha384:CryptoJS.algo.SHA384,sha512:CryptoJS.algo.SHA512,ripemd160:CryptoJS.algo.RIPEMD160};this.getDigestInfoHex=function(a,b){if(typeof this.DIGESTINFOHEAD[b]=="undefined"){throw"alg not supported in Util.DIGESTINFOHEAD: "+b}return this.DIGESTINFOHEAD[b]+a};this.getPaddedDigestInfoHex=function(h,a,j){var c=this.getDigestInfoHex(h,a);var d=j/4;if(c.length+22>d){throw"key is too short for SigAlg: keylen="+j+","+a}var b="0001";var k="00"+c;var g="";var l=d-b.length-k.length;for(var f=0;f<l;f+=2){g+="ff"}var e=b+g+k;return e};this.hashString=function(a,c){var b=new KJUR.crypto.MessageDigest({alg:c});return b.digestString(a)};this.hashHex=function(b,c){var a=new KJUR.crypto.MessageDigest({alg:c});return a.digestHex(b)};this.sha1=function(a){var b=new KJUR.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"});return b.digestString(a)};this.sha256=function(a){var b=new KJUR.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"});return b.digestString(a)};this.sha256Hex=function(a){var b=new KJUR.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"});return b.digestHex(a)};this.sha512=function(a){var b=new KJUR.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"});return b.digestString(a)};this.sha512Hex=function(a){var b=new KJUR.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"});return b.digestHex(a)};this.md5=function(a){var b=new KJUR.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return b.digestString(a)};this.ripemd160=function(a){var b=new KJUR.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return b.digestString(a)};this.getCryptoJSMDByName=function(a){}};KJUR.crypto.MessageDigest=function(c){var b=null;var a=null;var d=null;this.setAlgAndProvider=function(g,f){if(g!=null&&f===undefined){f=KJUR.crypto.Util.DEFAULTPROVIDER[g]}if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(g)!=-1&&f=="cryptojs"){try{this.md=KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[g].create()}catch(e){throw"setAlgAndProvider hash alg set fail alg="+g+"/"+e}this.updateString=function(h){this.md.update(h)};this.updateHex=function(h){var i=CryptoJS.enc.Hex.parse(h);this.md.update(i)};this.digest=function(){var h=this.md.finalize();return h.toString(CryptoJS.enc.Hex)};this.digestString=function(h){this.updateString(h);return this.digest()};this.digestHex=function(h){this.updateHex(h);return this.digest()}}if(":sha256:".indexOf(g)!=-1&&f=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(e){throw"setAlgAndProvider hash alg set fail alg="+g+"/"+e}this.updateString=function(h){this.md.update(h)};this.updateHex=function(i){var h=sjcl.codec.hex.toBits(i);this.md.update(h)};this.digest=function(){var h=this.md.finalize();return sjcl.codec.hex.fromBits(h)};this.digestString=function(h){this.updateString(h);return this.digest()};this.digestHex=function(h){this.updateHex(h);return this.digest()}}};this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName};this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName};this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName};this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName};this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName};if(c!==undefined){if(c.alg!==undefined){this.algName=c.alg;if(c.prov===undefined){this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]}this.setAlgAndProvider(this.algName,this.provName)}}};KJUR.crypto.Mac=function(d){var f=null;var c=null;var a=null;var e=null;var b=null;this.setAlgAndProvider=function(k,i){k=k.toLowerCase();if(k==null){k="hmacsha1"}k=k.toLowerCase();if(k.substr(0,4)!="hmac"){throw"setAlgAndProvider unsupported HMAC alg: "+k}if(i===undefined){i=KJUR.crypto.Util.DEFAULTPROVIDER[k]}this.algProv=k+"/"+i;var g=k.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(g)!=-1&&i=="cryptojs"){try{var j=KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[g];this.mac=CryptoJS.algo.HMAC.create(j,this.pass)}catch(h){throw"setAlgAndProvider hash alg set fail hashAlg="+g+"/"+h}this.updateString=function(l){this.mac.update(l)};this.updateHex=function(l){var m=CryptoJS.enc.Hex.parse(l);this.mac.update(m)};this.doFinal=function(){var l=this.mac.finalize();return l.toString(CryptoJS.enc.Hex)};this.doFinalString=function(l){this.updateString(l);return this.doFinal()};this.doFinalHex=function(l){this.updateHex(l);return this.doFinal()}}};this.updateString=function(g){throw"updateString(str) not supported for this alg/prov: "+this.algProv};this.updateHex=function(g){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv};this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv};this.doFinalString=function(g){throw"digestString(str) not supported for this alg/prov: "+this.algProv};this.doFinalHex=function(g){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv};this.setPassword=function(h){if(typeof h=="string"){var g=h;if(h.length%2==1||!h.match(/^[0-9A-Fa-f]+$/)){g=rstrtohex(h)}this.pass=CryptoJS.enc.Hex.parse(g);return}if(typeof h!="object"){throw"KJUR.crypto.Mac unsupported password type: "+h}var g=null;if(h.hex!==undefined){if(h.hex.length%2!=0||!h.hex.match(/^[0-9A-Fa-f]+$/)){throw"Mac: wrong hex password: "+h.hex}g=h.hex}if(h.utf8!==undefined){g=utf8tohex(h.utf8)}if(h.rstr!==undefined){g=rstrtohex(h.rstr)}if(h.b64!==undefined){g=b64tohex(h.b64)}if(h.b64u!==undefined){g=b64utohex(h.b64u)}if(g==null){throw"KJUR.crypto.Mac unsupported password type: "+h}this.pass=CryptoJS.enc.Hex.parse(g)};if(d!==undefined){if(d.pass!==undefined){this.setPassword(d.pass)}if(d.alg!==undefined){this.algName=d.alg;if(d.prov===undefined){this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]}this.setAlgAndProvider(this.algName,this.provName)}}};KJUR.crypto.Signature=function(o){var q=null;var n=null;var r=null;var c=null;var l=null;var d=null;var k=null;var h=null;var p=null;var e=null;var b=-1;var g=null;var j=null;var a=null;var i=null;var f=null;this._setAlgNames=function(){if(this.algName.match(/^(.+)with(.+)$/)){this.mdAlgName=RegExp.$1.toLowerCase();this.pubkeyAlgName=RegExp.$2.toLowerCase()}};this._zeroPaddingOfSignature=function(x,w){var v="";var t=w/4-x.length;for(var u=0;u<t;u++){v=v+"0"}return v+x};this.setAlgAndProvider=function(u,t){this._setAlgNames();if(t!="cryptojs/jsrsa"){throw"provider not supported: "+t}if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new KJUR.crypto.MessageDigest({alg:this.mdAlgName})}catch(s){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+s}this.init=function(w,x){var y=null;try{if(x===undefined){y=KEYUTIL.getKey(w)}else{y=KEYUTIL.getKey(w,x)}}catch(v){throw"init failed:"+v}if(y.isPrivate===true){this.prvKey=y;this.state="SIGN"}else{if(y.isPublic===true){this.pubKey=y;this.state="VERIFY"}else{throw"init failed.:"+y}}};this.initSign=function(v){if(typeof v.ecprvhex=="string"&&typeof v.eccurvename=="string"){this.ecprvhex=v.ecprvhex;this.eccurvename=v.eccurvename}else{this.prvKey=v}this.state="SIGN"};this.initVerifyByPublicKey=function(v){if(typeof v.ecpubhex=="string"&&typeof v.eccurvename=="string"){this.ecpubhex=v.ecpubhex;this.eccurvename=v.eccurvename}else{if(v instanceof KJUR.crypto.ECDSA){this.pubKey=v}else{if(v instanceof RSAKey){this.pubKey=v}}}this.state="VERIFY"};this.initVerifyByCertificatePEM=function(v){var w=new X509;w.readCertPEM(v);this.pubKey=w.subjectPublicKeyRSA;this.state="VERIFY"};this.updateString=function(v){this.md.updateString(v)};this.updateHex=function(v){this.md.updateHex(v)};this.sign=function(){this.sHashHex=this.md.digest();if(typeof this.ecprvhex!="undefined"&&typeof this.eccurvename!="undefined"){var v=new KJUR.crypto.ECDSA({curve:this.eccurvename});this.hSign=v.signHex(this.sHashHex,this.ecprvhex)}else{if(this.prvKey instanceof RSAKey&&this.pubkeyAlgName=="rsaandmgf1"){this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen)}else{if(this.prvKey instanceof RSAKey&&this.pubkeyAlgName=="rsa"){this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName)}else{if(this.prvKey instanceof KJUR.crypto.ECDSA){this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}else{if(this.prvKey instanceof KJUR.crypto.DSA){this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}else{throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}}}}return this.hSign};this.signString=function(v){this.updateString(v);return this.sign()};this.signHex=function(v){this.updateHex(v);return this.sign()};this.verify=function(v){this.sHashHex=this.md.digest();if(typeof this.ecpubhex!="undefined"&&typeof this.eccurvename!="undefined"){var w=new KJUR.crypto.ECDSA({curve:this.eccurvename});return w.verifyHex(this.sHashHex,v,this.ecpubhex)}else{if(this.pubKey instanceof RSAKey&&this.pubkeyAlgName=="rsaandmgf1"){return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,v,this.mdAlgName,this.pssSaltLen)}else{if(this.pubKey instanceof RSAKey&&this.pubkeyAlgName=="rsa"){return this.pubKey.verifyWithMessageHash(this.sHashHex,v)}else{if(this.pubKey instanceof KJUR.crypto.ECDSA){return this.pubKey.verifyWithMessageHash(this.sHashHex,v)}else{if(this.pubKey instanceof KJUR.crypto.DSA){return this.pubKey.verifyWithMessageHash(this.sHashHex,v)}else{throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}}}}}}};this.init=function(s,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName};this.initVerifyByPublicKey=function(s){throw"initVerifyByPublicKey(rsaPubKeyy) not supported for this alg:prov="+this.algProvName};this.initVerifyByCertificatePEM=function(s){throw"initVerifyByCertificatePEM(certPEM) not supported for this alg:prov="+this.algProvName};this.initSign=function(s){throw"initSign(prvKey) not supported for this alg:prov="+this.algProvName};this.updateString=function(s){throw"updateString(str) not supported for this alg:prov="+this.algProvName};this.updateHex=function(s){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName};this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName};this.signString=function(s){throw"digestString(str) not supported for this alg:prov="+this.algProvName};this.signHex=function(s){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName};this.verify=function(s){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName};this.initParams=o;if(o!==undefined){if(o.alg!==undefined){this.algName=o.alg;if(o.prov===undefined){this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]}else{this.provName=o.prov}this.algProvName=this.algName+":"+this.provName;this.setAlgAndProvider(this.algName,this.provName);this._setAlgNames()}if(o.psssaltlen!==undefined){this.pssSaltLen=o.psssaltlen}if(o.prvkeypem!==undefined){if(o.prvkeypas!==undefined){throw"both prvkeypem and prvkeypas parameters not supported"}else{try{var q=new RSAKey;q.readPrivateKeyFromPEMString(o.prvkeypem);this.initSign(q)}catch(m){throw"fatal error to load pem private key: "+m}}}}};KJUR.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"
}};if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.crypto=="undefined"||!KJUR.crypto){KJUR.crypto={}}KJUR.crypto.ECDSA=function(h){var e="secp256r1";var g=null;var b=null;var f=null;var a=new SecureRandom;var d=null;this.type="EC";function c(s,o,r,n){var j=Math.max(o.bitLength(),n.bitLength());var t=s.add2D(r);var q=s.curve.getInfinity();for(var p=j-1;p>=0;--p){q=q.twice2D();q.z=BigInteger.ONE;if(o.testBit(p)){if(n.testBit(p)){q=q.add2D(t)}else{q=q.add2D(s)}}else{if(n.testBit(p)){q=q.add2D(r)}}}return q}this.getBigRandom=function(i){return new BigInteger(i.bitLength(),a).mod(i.subtract(BigInteger.ONE)).add(BigInteger.ONE)};this.setNamedCurve=function(i){this.ecparams=KJUR.crypto.ECParameterDB.getByName(i);this.prvKeyHex=null;this.pubKeyHex=null;this.curveName=i};this.setPrivateKeyHex=function(i){this.isPrivate=true;this.prvKeyHex=i};this.setPublicKeyHex=function(i){this.isPublic=true;this.pubKeyHex=i};this.getPublicKeyXYHex=function(){var k=this.pubKeyHex;if(k.substr(0,2)!=="04"){throw"this method supports uncompressed format(04) only"}var j=this.ecparams.keylen/4;if(k.length!==2+j*2){throw"malformed public key hex length"}var i={};i.x=k.substr(2,j);i.y=k.substr(2+j);return i};this.getShortNISTPCurveName=function(){var i=this.curveName;if(i==="secp256r1"||i==="NIST P-256"||i==="P-256"||i==="prime256v1"){return"P-256"}if(i==="secp384r1"||i==="NIST P-384"||i==="P-384"){return"P-384"}return null};this.generateKeyPairHex=function(){var k=this.ecparams.n;var n=this.getBigRandom(k);var l=this.ecparams.G.multiply(n);var q=l.getX().toBigInteger();var o=l.getY().toBigInteger();var i=this.ecparams.keylen/4;var m=("0000000000"+n.toString(16)).slice(-i);var r=("0000000000"+q.toString(16)).slice(-i);var p=("0000000000"+o.toString(16)).slice(-i);var j="04"+r+p;this.setPrivateKeyHex(m);this.setPublicKeyHex(j);return{ecprvhex:m,ecpubhex:j}};this.signWithMessageHash=function(i){return this.signHex(i,this.prvKeyHex)};this.signHex=function(o,j){var t=new BigInteger(j,16);var l=this.ecparams.n;var q=new BigInteger(o,16);do{var m=this.getBigRandom(l);var u=this.ecparams.G;var p=u.multiply(m);var i=p.getX().toBigInteger().mod(l)}while(i.compareTo(BigInteger.ZERO)<=0);var v=m.modInverse(l).multiply(q.add(t.multiply(i))).mod(l);return KJUR.crypto.ECDSA.biRSSigToASN1Sig(i,v)};this.sign=function(m,u){var q=u;var j=this.ecparams.n;var p=BigInteger.fromByteArrayUnsigned(m);do{var l=this.getBigRandom(j);var t=this.ecparams.G;var o=t.multiply(l);var i=o.getX().toBigInteger().mod(j)}while(i.compareTo(BigInteger.ZERO)<=0);var v=l.modInverse(j).multiply(p.add(q.multiply(i))).mod(j);return this.serializeSig(i,v)};this.verifyWithMessageHash=function(j,i){return this.verifyHex(j,i,this.pubKeyHex)};this.verifyHex=function(m,i,p){var l,j;var o=KJUR.crypto.ECDSA.parseSigHex(i);l=o.r;j=o.s;var k;k=ECPointFp.decodeFromHex(this.ecparams.curve,p);var n=new BigInteger(m,16);return this.verifyRaw(n,l,j,k)};this.verify=function(o,p,j){var l,i;if(Bitcoin.Util.isArray(p)){var n=this.parseSig(p);l=n.r;i=n.s}else{if("object"===typeof p&&p.r&&p.s){l=p.r;i=p.s}else{throw"Invalid value for signature"}}var k;if(j instanceof ECPointFp){k=j}else{if(Bitcoin.Util.isArray(j)){k=ECPointFp.decodeFrom(this.ecparams.curve,j)}else{throw"Invalid format for pubkey value, must be byte array or ECPointFp"}}var m=BigInteger.fromByteArrayUnsigned(o);return this.verifyRaw(m,l,i,k)};this.verifyRaw=function(o,i,w,m){var l=this.ecparams.n;var u=this.ecparams.G;if(i.compareTo(BigInteger.ONE)<0||i.compareTo(l)>=0){return false}if(w.compareTo(BigInteger.ONE)<0||w.compareTo(l)>=0){return false}var p=w.modInverse(l);var k=o.multiply(p).mod(l);var j=i.multiply(p).mod(l);var q=u.multiply(k).add(m.multiply(j));var t=q.getX().toBigInteger().mod(l);return t.equals(i)};this.serializeSig=function(k,j){var l=k.toByteArraySigned();var i=j.toByteArraySigned();var m=[];m.push(2);m.push(l.length);m=m.concat(l);m.push(2);m.push(i.length);m=m.concat(i);m.unshift(m.length);m.unshift(48);return m};this.parseSig=function(n){var m;if(n[0]!=48){throw new Error("Signature not a valid DERSequence")}m=2;if(n[m]!=2){throw new Error("First element in signature must be a DERInteger")}var l=n.slice(m+2,m+2+n[m+1]);m+=2+n[m+1];if(n[m]!=2){throw new Error("Second element in signature must be a DERInteger")}var i=n.slice(m+2,m+2+n[m+1]);m+=2+n[m+1];var k=BigInteger.fromByteArrayUnsigned(l);var j=BigInteger.fromByteArrayUnsigned(i);return{r:k,s:j}};this.parseSigCompact=function(m){if(m.length!==65){throw"Signature has the wrong length"}var j=m[0]-27;if(j<0||j>7){throw"Invalid signature type"}var o=this.ecparams.n;var l=BigInteger.fromByteArrayUnsigned(m.slice(1,33)).mod(o);var k=BigInteger.fromByteArrayUnsigned(m.slice(33,65)).mod(o);return{r:l,s:k,i:j}};if(h!==undefined){if(h.curve!==undefined){this.curveName=h.curve}}if(this.curveName===undefined){this.curveName=e}this.setNamedCurve(this.curveName);if(h!==undefined){if(h.prv!==undefined){this.setPrivateKeyHex(h.prv)}if(h.pub!==undefined){this.setPublicKeyHex(h.pub)}}};KJUR.crypto.ECDSA.parseSigHex=function(a){var b=KJUR.crypto.ECDSA.parseSigHexInHexRS(a);var d=new BigInteger(b.r,16);var c=new BigInteger(b.s,16);return{r:d,s:c}};KJUR.crypto.ECDSA.parseSigHexInHexRS=function(c){if(c.substr(0,2)!="30"){throw"signature is not a ASN.1 sequence"}var b=ASN1HEX.getPosArrayOfChildren_AtObj(c,0);if(b.length!=2){throw"number of signature ASN.1 sequence elements seem wrong"}var g=b[0];var f=b[1];if(c.substr(g,2)!="02"){throw"1st item of sequene of signature is not ASN.1 integer"}if(c.substr(f,2)!="02"){throw"2nd item of sequene of signature is not ASN.1 integer"}var e=ASN1HEX.getHexOfV_AtObj(c,g);var d=ASN1HEX.getHexOfV_AtObj(c,f);return{r:e,s:d}};KJUR.crypto.ECDSA.asn1SigToConcatSig=function(c){var d=KJUR.crypto.ECDSA.parseSigHexInHexRS(c);var b=d.r;var a=d.s;if(b.substr(0,2)=="00"&&b.length/2*8%(16*8)==8){b=b.substr(2)}if(a.substr(0,2)=="00"&&a.length/2*8%(16*8)==8){a=a.substr(2)}if(b.length/2*8%(16*8)!=0){throw"unknown ECDSA sig r length error"}if(a.length/2*8%(16*8)!=0){throw"unknown ECDSA sig s length error"}return b+a};KJUR.crypto.ECDSA.concatSigToASN1Sig=function(a){if(a.length/2*8%(16*8)!=0){throw"unknown ECDSA concatinated r-s sig  length error"}var c=a.substr(0,a.length/2);var b=a.substr(a.length/2);return KJUR.crypto.ECDSA.hexRSSigToASN1Sig(c,b)};KJUR.crypto.ECDSA.hexRSSigToASN1Sig=function(b,a){var d=new BigInteger(b,16);var c=new BigInteger(a,16);return KJUR.crypto.ECDSA.biRSSigToASN1Sig(d,c)};KJUR.crypto.ECDSA.biRSSigToASN1Sig=function(e,c){var b=new KJUR.asn1.DERInteger({bigint:e});var a=new KJUR.asn1.DERInteger({bigint:c});var d=new KJUR.asn1.DERSequence({array:[b,a]});return d.getEncodedHex()};if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.crypto=="undefined"||!KJUR.crypto){KJUR.crypto={}}KJUR.crypto.ECParameterDB=new function(){var b={};var c={};function a(d){return new BigInteger(d,16)}this.getByName=function(e){var d=e;if(typeof c[d]!="undefined"){d=c[e]}if(typeof b[d]!="undefined"){return b[d]}throw"unregistered EC curve name: "+d};this.regist=function(A,l,o,g,m,e,j,f,k,u,d,x){b[A]={};var s=a(o);var z=a(g);var y=a(m);var t=a(e);var w=a(j);var r=new ECCurveFp(s,z,y);var q=r.decodePointHex("04"+f+k);b[A]["name"]=A;b[A]["keylen"]=l;b[A]["curve"]=r;b[A]["G"]=q;b[A]["n"]=t;b[A]["h"]=w;b[A]["oid"]=d;b[A]["info"]=x;for(var v=0;v<u.length;v++){c[u[v]]=A}}};KJUR.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field");KJUR.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field");KJUR.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field");KJUR.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]);KJUR.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]);KJUR.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]);KJUR.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]);KJUR.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]);KJUR.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]);KJUR.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.crypto=="undefined"||!KJUR.crypto){KJUR.crypto={}}KJUR.crypto.DSA=function(){this.p=null;this.q=null;this.g=null;this.y=null;this.x=null;this.type="DSA";this.setPrivate=function(z,w,v,A,u){this.isPrivate=true;this.p=z;this.q=w;this.g=v;this.y=A;this.x=u};this.setPublic=function(w,v,u,z){this.isPublic=true;this.p=w;this.q=v;this.g=u;this.y=z;this.x=null};this.signWithMessageHash=function(z){var v=this.p;var u=this.q;var C=this.g;var D=this.y;var E=this.x;var A=z.substr(0,u.bitLength()/4);var B=new BigInteger(z,16);var w=n(BigInteger.ONE.add(BigInteger.ONE),u.subtract(BigInteger.ONE));var G=C.modPow(w,v).mod(u);var F=w.modInverse(u).multiply(B.add(E.multiply(G))).mod(u);var H=KJUR.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:G}},{int:{bigint:F}}]});return H};this.verifyWithMessageHash=function(C,B){var z=this.p;var u=this.q;var G=this.g;var H=this.y;var E=this.parseASN1Signature(B);var K=E[0];var J=E[1];var C=C.substr(0,u.bitLength()/4);var D=new BigInteger(C,16);if(BigInteger.ZERO.compareTo(K)>0||K.compareTo(u)>0||BigInteger.ZERO.compareTo(J)>0||J.compareTo(u)>0){throw"invalid DSA signature"}var I=J.modInverse(u);var A=D.multiply(I).mod(u);var v=K.multiply(I).mod(u);var F=G.modPow(A,z).multiply(H.modPow(v,z)).mod(z).mod(u);return F.compareTo(K)==0};this.parseASN1Signature=function(u){try{var y=new BigInteger(ASN1HEX.getVbyList(u,0,[0],"02"),16);var v=new BigInteger(ASN1HEX.getVbyList(u,0,[1],"02"),16);return[y,v]}catch(w){throw"malformed DSA signature"}};function d(E,w,B,v,u,C){var z=KJUR.crypto.Util.hashString(w,E.toLowerCase());var z=z.substr(0,u.bitLength()/4);var A=new BigInteger(z,16);var y=n(BigInteger.ONE.add(BigInteger.ONE),u.subtract(BigInteger.ONE));var F=B.modPow(y,v).mod(u);var D=y.modInverse(u).multiply(A.add(C.multiply(F))).mod(u);var G=new Array;G[0]=F;G[1]=D;return G}function r(v){var u=openpgp.config.config.prefer_hash_algorithm;switch(Math.round(v.bitLength()/8)){case 20:if(u!=2&&u>11&&u!=10&&u<8){return 2}return u;case 28:if(u>11&&u<8){return 11}return u;case 32:if(u>10&&u<8){return 8}return u;default:util.print_debug("DSA select hash algorithm: returning null for an unknown length of q");return null}}this.select_hash_algorithm=r;function m(I,K,J,B,z,u,F,G){var C=KJUR.crypto.Util.hashString(B,I.toLowerCase());var C=C.substr(0,u.bitLength()/4);var D=new BigInteger(C,16);if(BigInteger.ZERO.compareTo(K)>0||K.compareTo(u)>0||BigInteger.ZERO.compareTo(J)>0||J.compareTo(u)>0){util.print_error("invalid DSA Signature");return null}var H=J.modInverse(u);var A=D.multiply(H).mod(u);var v=K.multiply(H).mod(u);var E=F.modPow(A,z).multiply(G.modPow(v,z)).mod(z).mod(u);return E.compareTo(K)==0}function a(z){var A=new BigInteger(z,primeCenterie);var y=j(q,512);var u=t(p,q,z);var v;do{v=new BigInteger(q.bitCount(),rand)}while(x.compareTo(BigInteger.ZERO)!=1&&x.compareTo(q)!=-1);var w=g.modPow(x,p);return{x:v,q:A,p:y,g:u,y:w}}function j(y,z,w){if(z%64!=0){return false}var u;var v;do{u=w(bitcount,true);v=u.subtract(BigInteger.ONE);u=u.subtract(v.remainder(y))}while(!u.isProbablePrime(primeCenterie)||u.bitLength()!=l);return u}function t(B,z,A,w){var u=B.subtract(BigInteger.ONE);var y=u.divide(z);var v;do{v=w(A)}while(v.compareTo(u)!=-1&&v.compareTo(BigInteger.ONE)!=1);return v.modPow(y,B)}function o(w,y,u){var v;do{v=u(y,false)}while(v.compareTo(w)!=-1&&v.compareTo(BigInteger.ZERO)!=1);return v}function i(v,w){k=o(v);var u=g.modPow(k,w).mod(v);return u}function h(B,w,y,v,z,u){var A=B(v);s=w.modInverse(z).multiply(A.add(u.multiply(y))).mod(z);return s}this.sign=d;this.verify=m;function n(w,u){if(u.compareTo(w)<=0){return}var v=u.subtract(w);var y=e(v.bitLength());while(y>v){y=e(v.bitLength())}return w.add(y)}function e(w){if(w<0){return null}var u=Math.floor((w+7)/8);var v=c(u);if(w%8>0){v=String.fromCharCode(Math.pow(2,w%8)-1&v.charCodeAt(0))+v.substring(1)}return new BigInteger(f(v),16)}function c(w){var u="";for(var v=0;v<w;v++){u+=String.fromCharCode(b())}return u}function b(){var u=new Uint32Array(1);window.crypto.getRandomValues(u);return u[0]&255}function f(y){if(y==null){return""}var v=[];var w=y.length;var z=0;var u;while(z<w){u=y[z++].charCodeAt().toString(16);while(u.length<2){u="0"+u}v.push(""+u)}return v.join("")}this.getRandomBigIntegerInRange=n;this.getRandomBigInteger=e;this.getRandomBytes=c};var PKCS5PKEY=function(){var c=function(n,p,o){return i(CryptoJS.AES,n,p,o)};var d=function(n,p,o){return i(CryptoJS.TripleDES,n,p,o)};var i=function(q,v,s,o){var p=CryptoJS.enc.Hex.parse(v);var u=CryptoJS.enc.Hex.parse(s);var n=CryptoJS.enc.Hex.parse(o);var r={};r.key=u;r.iv=n;r.ciphertext=p;var t=q.decrypt(r,u,{iv:n});return CryptoJS.enc.Hex.stringify(t)};var j=function(n,p,o){return e(CryptoJS.AES,n,p,o)};var m=function(n,p,o){return e(CryptoJS.TripleDES,n,p,o)};var e=function(s,x,v,p){var r=CryptoJS.enc.Hex.parse(x);var w=CryptoJS.enc.Hex.parse(v);var o=CryptoJS.enc.Hex.parse(p);var n={};var u=s.encrypt(r,w,{iv:o});var q=CryptoJS.enc.Hex.parse(u.toString());var t=CryptoJS.enc.Base64.stringify(q);return t};var g={"AES-256-CBC":{proc:c,eproc:j,keylen:32,ivlen:16},"AES-192-CBC":{proc:c,eproc:j,keylen:24,ivlen:16},"AES-128-CBC":{proc:c,eproc:j,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:d,eproc:m,keylen:24,ivlen:8}};var b=function(n){return g[n]["proc"]};var k=function(n){var p=CryptoJS.lib.WordArray.random(n);var o=CryptoJS.enc.Hex.stringify(p);return o};var l=function(q){var r={};if(q.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"))){r.cipher=RegExp.$1;r.ivsalt=RegExp.$2}if(q.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"))){r.type=RegExp.$1}var p=-1;var t=0;if(q.indexOf("\r\n\r\n")!=-1){p=q.indexOf("\r\n\r\n");t=2}if(q.indexOf("\n\n")!=-1){p=q.indexOf("\n\n");t=1}var o=q.indexOf("-----END");if(p!=-1&&o!=-1){var n=q.substring(p+t*2,o-t);n=n.replace(/\s+/g,"");r.data=n}return r};var h=function(o,w,n){var t=n.substring(0,16);var r=CryptoJS.enc.Hex.parse(t);var p=CryptoJS.enc.Utf8.parse(w);var s=g[o]["keylen"]+g[o]["ivlen"];var v="";var u=null;for(;;){var q=CryptoJS.algo.MD5.create();if(u!=null){q.update(u)}q.update(p);q.update(r);u=q.finalize();v=v+CryptoJS.enc.Hex.stringify(u);if(v.length>=s*2){break}}var x={};x.keyhex=v.substr(0,g[o]["keylen"]*2);x.ivhex=v.substr(g[o]["keylen"]*2,g[o]["ivlen"]*2);return x};var a=function(n,t,p,u){var q=CryptoJS.enc.Base64.parse(n);var o=CryptoJS.enc.Hex.stringify(q);var s=g[t]["proc"];var r=s(o,p,u);return r};var f=function(n,q,o,s){var p=g[q]["eproc"];var r=p(n,o,s);return r};return{version:"1.0.5",getHexFromPEM:function(o,r){var p=o;if(p.indexOf("BEGIN "+r)==-1){throw"can't find PEM header: "+r}p=p.replace("-----BEGIN "+r+"-----","");p=p.replace("-----END "+r+"-----","");var q=p.replace(/\s+/g,"");var n=b64tohex(q);return n},getDecryptedKeyHexByKeyIV:function(o,r,q,p){var n=b(r);return n(o,q,p)},parsePKCS5PEM:function(n){return l(n)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(o,n,p){return h(o,n,p)},decryptKeyB64:function(n,p,o,q){return a(n,p,o,q)},getDecryptedKeyHex:function(w,v){var o=l(w);var r=o.type;var p=o.cipher;var n=o.ivsalt;var q=o.data;var u=h(p,v,n);var t=u.keyhex;var s=a(q,p,t,n);return s},getRSAKeyFromEncryptedPKCS5PEM:function(p,o){var q=this.getDecryptedKeyHex(p,o);var n=new RSAKey;n.readPrivateKeyFromASN1HexString(q);return n},getEryptedPKCS5PEMFromPrvKeyHex:function(q,x,r,p){var n="";if(typeof r=="undefined"||r==null){r="AES-256-CBC"}if(typeof g[r]=="undefined"){throw"PKCS5PKEY unsupported algorithm: "+r}if(typeof p=="undefined"||p==null){var t=g[r]["ivlen"];var s=k(t);p=s.toUpperCase()}var w=h(r,x,p);var v=w.keyhex;var u=f(q,r,v,p);var o=u.replace(/(.{64})/g,"$1\r\n");var n="-----BEGIN RSA PRIVATE KEY-----\r\n";n+="Proc-Type: 4,ENCRYPTED\r\n";n+="DEK-Info: "+r+","+p+"\r\n";n+="\r\n";n+=o;n+="\r\n-----END RSA PRIVATE KEY-----\r\n";return n},getEryptedPKCS5PEMFromRSAKey:function(C,D,o,s){var A=new KJUR.asn1.DERInteger({int:0});var v=new KJUR.asn1.DERInteger({bigint:C.n});var z=new KJUR.asn1.DERInteger({int:C.e});var B=new KJUR.asn1.DERInteger({bigint:C.d});var t=new KJUR.asn1.DERInteger({bigint:C.p});var r=new KJUR.asn1.DERInteger({bigint:C.q});var y=new KJUR.asn1.DERInteger({bigint:C.dmp1});var u=new KJUR.asn1.DERInteger({bigint:C.dmq1});var x=new KJUR.asn1.DERInteger({bigint:C.coeff});var E=new KJUR.asn1.DERSequence({array:[A,v,z,B,t,r,y,u,x]});var w=E.getEncodedHex();return this.getEryptedPKCS5PEMFromPrvKeyHex(w,D,o,s)},newEncryptedPKCS5PEM:function(n,o,r,s){if(typeof o=="undefined"||o==null){o=1024}if(typeof r=="undefined"||r==null){r="10001"}var p=new RSAKey;p.generate(o,r);var q=null;if(typeof s=="undefined"||s==null){q=this.getEncryptedPKCS5PEMFromRSAKey(pkey,n)}else{q=this.getEncryptedPKCS5PEMFromRSAKey(pkey,n,s)}return q},getRSAKeyFromPlainPKCS8PEM:function(p){if(p.match(/ENCRYPTED/)){throw"pem shall be not ENCRYPTED"}var o=this.getHexFromPEM(p,"PRIVATE KEY");var n=this.getRSAKeyFromPlainPKCS8Hex(o);return n},getRSAKeyFromPlainPKCS8Hex:function(q){var p=ASN1HEX.getPosArrayOfChildren_AtObj(q,0);if(p.length!=3){throw"outer DERSequence shall have 3 elements: "+p.length}var o=ASN1HEX.getHexOfTLV_AtObj(q,p[1]);if(o!="300d06092a864886f70d0101010500"){throw"PKCS8 AlgorithmIdentifier is not rsaEnc: "+o}var o=ASN1HEX.getHexOfTLV_AtObj(q,p[1]);var r=ASN1HEX.getHexOfTLV_AtObj(q,p[2]);var s=ASN1HEX.getHexOfV_AtObj(r,0);var n=new RSAKey;n.readPrivateKeyFromASN1HexString(s);return n},parseHexOfEncryptedPKCS8:function(u){var q={};var p=ASN1HEX.getPosArrayOfChildren_AtObj(u,0);if(p.length!=2){throw"malformed format: SEQUENCE(0).items != 2: "+p.length}q.ciphertext=ASN1HEX.getHexOfV_AtObj(u,p[1]);var w=ASN1HEX.getPosArrayOfChildren_AtObj(u,p[0]);if(w.length!=2){throw"malformed format: SEQUENCE(0.0).items != 2: "+w.length}if(ASN1HEX.getHexOfV_AtObj(u,w[0])!="2a864886f70d01050d"){throw"this only supports pkcs5PBES2"}var n=ASN1HEX.getPosArrayOfChildren_AtObj(u,w[1]);if(w.length!=2){throw"malformed format: SEQUENCE(0.0.1).items != 2: "+n.length}var o=ASN1HEX.getPosArrayOfChildren_AtObj(u,n[1]);if(o.length!=2){throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+o.length}if(ASN1HEX.getHexOfV_AtObj(u,o[0])!="2a864886f70d0307"){throw"this only supports TripleDES"}q.encryptionSchemeAlg="TripleDES";q.encryptionSchemeIV=ASN1HEX.getHexOfV_AtObj(u,o[1]);var r=ASN1HEX.getPosArrayOfChildren_AtObj(u,n[0]);if(r.length!=2){throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+r.length}if(ASN1HEX.getHexOfV_AtObj(u,r[0])!="2a864886f70d01050c"){throw"this only supports pkcs5PBKDF2"}var v=ASN1HEX.getPosArrayOfChildren_AtObj(u,r[1]);if(v.length<2){throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+v.length}q.pbkdf2Salt=ASN1HEX.getHexOfV_AtObj(u,v[0]);var s=ASN1HEX.getHexOfV_AtObj(u,v[1]);try{q.pbkdf2Iter=parseInt(s,16)}catch(t){throw"malformed format pbkdf2Iter: "+s}return q},getPBKDF2KeyHexFromParam:function(s,n){var r=CryptoJS.enc.Hex.parse(s.pbkdf2Salt);var o=s.pbkdf2Iter;var q=CryptoJS.PBKDF2(n,r,{keySize:192/32,iterations:o});var p=CryptoJS.enc.Hex.stringify(q);return p},getPlainPKCS8HexFromEncryptedPKCS8PEM:function(v,w){var p=this.getHexFromPEM(v,"ENCRYPTED PRIVATE KEY");var n=this.parseHexOfEncryptedPKCS8(p);var s=PKCS5PKEY.getPBKDF2KeyHexFromParam(n,w);var t={};t.ciphertext=CryptoJS.enc.Hex.parse(n.ciphertext);var r=CryptoJS.enc.Hex.parse(s);var q=CryptoJS.enc.Hex.parse(n.encryptionSchemeIV);var u=CryptoJS.TripleDES.decrypt(t,r,{iv:q});var o=CryptoJS.enc.Hex.stringify(u);return o},getRSAKeyFromEncryptedPKCS8PEM:function(q,p){var o=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(q,p);var n=this.getRSAKeyFromPlainPKCS8Hex(o);return n},getKeyFromEncryptedPKCS8PEM:function(q,o){var n=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(q,o);var p=this.getKeyFromPlainPrivatePKCS8Hex(n);return p},parsePlainPrivatePKCS8Hex:function(q){var o={};o.algparam=null;if(q.substr(0,2)!="30"){throw"malformed plain PKCS8 private key(code:001)"}var p=ASN1HEX.getPosArrayOfChildren_AtObj(q,0);if(p.length!=3){throw"malformed plain PKCS8 private key(code:002)"}if(q.substr(p[1],2)!="30"){throw"malformed PKCS8 private key(code:003)"}var n=ASN1HEX.getPosArrayOfChildren_AtObj(q,p[1]);if(n.length!=2){throw"malformed PKCS8 private key(code:004)"}if(q.substr(n[0],2)!="06"){throw"malformed PKCS8 private key(code:005)"}o.algoid=ASN1HEX.getHexOfV_AtObj(q,n[0]);if(q.substr(n[1],2)=="06"){o.algparam=ASN1HEX.getHexOfV_AtObj(q,n[1])}if(q.substr(p[2],2)!="04"){throw"malformed PKCS8 private key(code:006)"}o.keyidx=ASN1HEX.getStartPosOfV_AtObj(q,p[2]);return o},getKeyFromPlainPrivatePKCS8PEM:function(o){var n=this.getHexFromPEM(o,"PRIVATE KEY");var p=this.getKeyFromPlainPrivatePKCS8Hex(n);return p},getKeyFromPlainPrivatePKCS8Hex:function(n){var p=this.parsePlainPrivatePKCS8Hex(n);if(p.algoid=="2a864886f70d010101"){this.parsePrivateRawRSAKeyHexAtObj(n,p);var o=p.key;var q=new RSAKey;q.setPrivateEx(o.n,o.e,o.d,o.p,o.q,o.dp,o.dq,o.co);return q}else{if(p.algoid=="2a8648ce3d0201"){this.parsePrivateRawECKeyHexAtObj(n,p);if(KJUR.crypto.OID.oidhex2name[p.algparam]===undefined){throw"KJUR.crypto.OID.oidhex2name undefined: "+p.algparam}var r=KJUR.crypto.OID.oidhex2name[p.algparam];var q=new KJUR.crypto.ECDSA({curve:r,prv:p.key});return q}else{throw"unsupported private key algorithm"}}},getRSAKeyFromPublicPKCS8PEM:function(o){var p=this.getHexFromPEM(o,"PUBLIC KEY");var n=this.getRSAKeyFromPublicPKCS8Hex(p);return n},getKeyFromPublicPKCS8PEM:function(o){var p=this.getHexFromPEM(o,"PUBLIC KEY");var n=this.getKeyFromPublicPKCS8Hex(p);return n},getKeyFromPublicPKCS8Hex:function(o){var n=this.parsePublicPKCS8Hex(o);if(n.algoid=="2a864886f70d010101"){var r=this.parsePublicRawRSAKeyHex(n.key);var p=new RSAKey;p.setPublic(r.n,r.e);return p}else{if(n.algoid=="2a8648ce3d0201"){if(KJUR.crypto.OID.oidhex2name[n.algparam]===undefined){throw"KJUR.crypto.OID.oidhex2name undefined: "+n.algparam}var q=KJUR.crypto.OID.oidhex2name[n.algparam];var p=new KJUR.crypto.ECDSA({curve:q,pub:n.key});return p}else{throw"unsupported public key algorithm"}}},parsePublicRawRSAKeyHex:function(p){var n={};if(p.substr(0,2)!="30"){throw"malformed RSA key(code:001)"}var o=ASN1HEX.getPosArrayOfChildren_AtObj(p,0);if(o.length!=2){throw"malformed RSA key(code:002)"}if(p.substr(o[0],2)!="02"){throw"malformed RSA key(code:003)"}n.n=ASN1HEX.getHexOfV_AtObj(p,o[0]);if(p.substr(o[1],2)!="02"){throw"malformed RSA key(code:004)"}n.e=ASN1HEX.getHexOfV_AtObj(p,o[1]);return n},parsePrivateRawRSAKeyHexAtObj:function(o,q){var p=q.keyidx;if(o.substr(p,2)!="30"){throw"malformed RSA private key(code:001)"}var n=ASN1HEX.getPosArrayOfChildren_AtObj(o,p);if(n.length!=9){throw"malformed RSA private key(code:002)"}q.key={};q.key.n=ASN1HEX.getHexOfV_AtObj(o,n[1]);q.key.e=ASN1HEX.getHexOfV_AtObj(o,n[2]);q.key.d=ASN1HEX.getHexOfV_AtObj(o,n[3]);q.key.p=ASN1HEX.getHexOfV_AtObj(o,n[4]);q.key.q=ASN1HEX.getHexOfV_AtObj(o,n[5]);q.key.dp=ASN1HEX.getHexOfV_AtObj(o,n[6]);q.key.dq=ASN1HEX.getHexOfV_AtObj(o,n[7]);q.key.co=ASN1HEX.getHexOfV_AtObj(o,n[8])},parsePrivateRawECKeyHexAtObj:function(o,q){var p=q.keyidx;if(o.substr(p,2)!="30"){throw"malformed ECC private key(code:001)"}var n=ASN1HEX.getPosArrayOfChildren_AtObj(o,p);if(n.length!=3){throw"malformed ECC private key(code:002)"}if(o.substr(n[1],2)!="04"){throw"malformed ECC private key(code:003)"}q.key=ASN1HEX.getHexOfV_AtObj(o,n[1])},parsePublicPKCS8Hex:function(q){var o={};o.algparam=null;var p=ASN1HEX.getPosArrayOfChildren_AtObj(q,0);if(p.length!=2){throw"outer DERSequence shall have 2 elements: "+p.length}var r=p[0];if(q.substr(r,2)!="30"){throw"malformed PKCS8 public key(code:001)"}var n=ASN1HEX.getPosArrayOfChildren_AtObj(q,r);if(n.length!=2){throw"malformed PKCS8 public key(code:002)"}if(q.substr(n[0],2)!="06"){throw"malformed PKCS8 public key(code:003)"}o.algoid=ASN1HEX.getHexOfV_AtObj(q,n[0]);if(q.substr(n[1],2)=="06"){o.algparam=ASN1HEX.getHexOfV_AtObj(q,n[1])}if(q.substr(p[1],2)!="03"){throw"malformed PKCS8 public key(code:004)"}o.key=ASN1HEX.getHexOfV_AtObj(q,p[1]).substr(2);return o},getRSAKeyFromPublicPKCS8Hex:function(r){var q=ASN1HEX.getPosArrayOfChildren_AtObj(r,0);if(q.length!=2){throw"outer DERSequence shall have 2 elements: "+q.length}var p=ASN1HEX.getHexOfTLV_AtObj(r,q[0]);if(p!="300d06092a864886f70d0101010500"){throw"PKCS8 AlgorithmId is not rsaEncryption"}if(r.substr(q[1],2)!="03"){throw"PKCS8 Public Key is not BITSTRING encapslated."}var t=ASN1HEX.getStartPosOfV_AtObj(r,q[1])+2;if(r.substr(t,2)!="30"){throw"PKCS8 Public Key is not SEQUENCE."}var n=ASN1HEX.getPosArrayOfChildren_AtObj(r,t);if(n.length!=2){throw"inner DERSequence shall have 2 elements: "+n.length}if(r.substr(n[0],2)!="02"){throw"N is not ASN.1 INTEGER"}if(r.substr(n[1],2)!="02"){throw"E is not ASN.1 INTEGER"}var u=ASN1HEX.getHexOfV_AtObj(r,n[0]);var s=ASN1HEX.getHexOfV_AtObj(r,n[1]);var o=new RSAKey;o.setPublic(u,s);return o}}}();var KEYUTIL=function(){var d=function(p,r,q){return k(CryptoJS.AES,p,r,q)};var e=function(p,r,q){return k(CryptoJS.TripleDES,p,r,q)};var a=function(p,r,q){return k(CryptoJS.DES,p,r,q)};var k=function(s,x,u,q){var r=CryptoJS.enc.Hex.parse(x);var w=CryptoJS.enc.Hex.parse(u);var p=CryptoJS.enc.Hex.parse(q);var t={};t.key=w;t.iv=p;t.ciphertext=r;var v=s.decrypt(t,w,{iv:p});return CryptoJS.enc.Hex.stringify(v)};var l=function(p,r,q){return g(CryptoJS.AES,p,r,q)};var o=function(p,r,q){return g(CryptoJS.TripleDES,p,r,q)};var f=function(p,r,q){return g(CryptoJS.DES,p,r,q)};var g=function(t,y,v,q){var s=CryptoJS.enc.Hex.parse(y);var x=CryptoJS.enc.Hex.parse(v);var p=CryptoJS.enc.Hex.parse(q);var w=t.encrypt(s,x,{iv:p});var r=CryptoJS.enc.Hex.parse(w.toString());var u=CryptoJS.enc.Base64.stringify(r);return u};var i={"AES-256-CBC":{proc:d,eproc:l,keylen:32,ivlen:16},"AES-192-CBC":{proc:d,eproc:l,keylen:24,ivlen:16},"AES-128-CBC":{proc:d,eproc:l,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:e,eproc:o,keylen:24,ivlen:8},"DES-CBC":{proc:a,eproc:f,keylen:8,ivlen:8}};var c=function(p){return i[p]["proc"]};var m=function(p){var r=CryptoJS.lib.WordArray.random(p);var q=CryptoJS.enc.Hex.stringify(r);return q};var n=function(t){var u={};if(t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"))){u.cipher=RegExp.$1;u.ivsalt=RegExp.$2}if(t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"))){u.type=RegExp.$1}var r=-1;var v=0;if(t.indexOf("\r\n\r\n")!=-1){r=t.indexOf("\r\n\r\n");v=2}if(t.indexOf("\n\n")!=-1){r=t.indexOf("\n\n");v=1}var q=t.indexOf("-----END");if(r!=-1&&q!=-1){var p=t.substring(r+v*2,q-v);p=p.replace(/\s+/g,"");u.data=p}return u};var j=function(q,y,p){var v=p.substring(0,16);var t=CryptoJS.enc.Hex.parse(v);var r=CryptoJS.enc.Utf8.parse(y);var u=i[q]["keylen"]+i[q]["ivlen"];var x="";var w=null;for(;;){var s=CryptoJS.algo.MD5.create();if(w!=null){s.update(w)}s.update(r);s.update(t);w=s.finalize();x=x+CryptoJS.enc.Hex.stringify(w);if(x.length>=u*2){break}}var z={};z.keyhex=x.substr(0,i[q]["keylen"]*2);z.ivhex=x.substr(i[q]["keylen"]*2,i[q]["ivlen"]*2);return z};var b=function(p,v,r,w){var s=CryptoJS.enc.Base64.parse(p);var q=CryptoJS.enc.Hex.stringify(s);var u=i[v]["proc"];var t=u(q,r,w);return t};var h=function(p,s,q,u){var r=i[s]["eproc"];var t=r(p,q,u);return t};return{version:"1.0.0",getHexFromPEM:function(q,u){var r=q;if(r.indexOf("-----BEGIN ")==-1){throw"can't find PEM header: "+u}if(typeof u=="string"&&u!=""){r=r.replace("-----BEGIN "+u+"-----","");r=r.replace("-----END "+u+"-----","")}else{r=r.replace(/-----BEGIN [^-]+-----/,"");r=r.replace(/-----END [^-]+-----/,"")}var t=r.replace(/\s+/g,"");var p=b64tohex(t);return p},getDecryptedKeyHexByKeyIV:function(q,t,s,r){var p=c(t);return p(q,s,r)},parsePKCS5PEM:function(p){return n(p)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(q,p,r){return j(q,p,r)},decryptKeyB64:function(p,r,q,s){return b(p,r,q,s)},getDecryptedKeyHex:function(y,x){var q=n(y);var t=q.type;var r=q.cipher;var p=q.ivsalt;var s=q.data;var w=j(r,x,p);var v=w.keyhex;var u=b(s,r,v,p);return u},getRSAKeyFromEncryptedPKCS5PEM:function(r,q){var s=this.getDecryptedKeyHex(r,q);var p=new RSAKey;p.readPrivateKeyFromASN1HexString(s);return p},getEncryptedPKCS5PEMFromPrvKeyHex:function(x,s,A,t,r){var p="";if(typeof t=="undefined"||t==null){t="AES-256-CBC"}if(typeof i[t]=="undefined"){throw"KEYUTIL unsupported algorithm: "+t}if(typeof r=="undefined"||r==null){var v=i[t]["ivlen"];var u=m(v);
r=u.toUpperCase()}var z=j(t,A,r);var y=z.keyhex;var w=h(s,t,y,r);var q=w.replace(/(.{64})/g,"$1\r\n");var p="-----BEGIN "+x+" PRIVATE KEY-----\r\n";p+="Proc-Type: 4,ENCRYPTED\r\n";p+="DEK-Info: "+t+","+r+"\r\n";p+="\r\n";p+=q;p+="\r\n-----END "+x+" PRIVATE KEY-----\r\n";return p},getEncryptedPKCS5PEMFromRSAKey:function(D,E,r,t){var B=new KJUR.asn1.DERInteger({int:0});var w=new KJUR.asn1.DERInteger({bigint:D.n});var A=new KJUR.asn1.DERInteger({int:D.e});var C=new KJUR.asn1.DERInteger({bigint:D.d});var u=new KJUR.asn1.DERInteger({bigint:D.p});var s=new KJUR.asn1.DERInteger({bigint:D.q});var z=new KJUR.asn1.DERInteger({bigint:D.dmp1});var v=new KJUR.asn1.DERInteger({bigint:D.dmq1});var y=new KJUR.asn1.DERInteger({bigint:D.coeff});var F=new KJUR.asn1.DERSequence({array:[B,w,A,C,u,s,z,v,y]});var x=F.getEncodedHex();return this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",x,E,r,t)},newEncryptedPKCS5PEM:function(p,q,t,u){if(typeof q=="undefined"||q==null){q=1024}if(typeof t=="undefined"||t==null){t="10001"}var r=new RSAKey;r.generate(q,t);var s=null;if(typeof u=="undefined"||u==null){s=this.getEncryptedPKCS5PEMFromRSAKey(r,p)}else{s=this.getEncryptedPKCS5PEMFromRSAKey(r,p,u)}return s},getRSAKeyFromPlainPKCS8PEM:function(r){if(r.match(/ENCRYPTED/)){throw"pem shall be not ENCRYPTED"}var q=this.getHexFromPEM(r,"PRIVATE KEY");var p=this.getRSAKeyFromPlainPKCS8Hex(q);return p},getRSAKeyFromPlainPKCS8Hex:function(s){var r=ASN1HEX.getPosArrayOfChildren_AtObj(s,0);if(r.length!=3){throw"outer DERSequence shall have 3 elements: "+r.length}var q=ASN1HEX.getHexOfTLV_AtObj(s,r[1]);if(q!="300d06092a864886f70d0101010500"){throw"PKCS8 AlgorithmIdentifier is not rsaEnc: "+q}var q=ASN1HEX.getHexOfTLV_AtObj(s,r[1]);var t=ASN1HEX.getHexOfTLV_AtObj(s,r[2]);var u=ASN1HEX.getHexOfV_AtObj(t,0);var p=new RSAKey;p.readPrivateKeyFromASN1HexString(u);return p},parseHexOfEncryptedPKCS8:function(w){var s={};var r=ASN1HEX.getPosArrayOfChildren_AtObj(w,0);if(r.length!=2){throw"malformed format: SEQUENCE(0).items != 2: "+r.length}s.ciphertext=ASN1HEX.getHexOfV_AtObj(w,r[1]);var y=ASN1HEX.getPosArrayOfChildren_AtObj(w,r[0]);if(y.length!=2){throw"malformed format: SEQUENCE(0.0).items != 2: "+y.length}if(ASN1HEX.getHexOfV_AtObj(w,y[0])!="2a864886f70d01050d"){throw"this only supports pkcs5PBES2"}var p=ASN1HEX.getPosArrayOfChildren_AtObj(w,y[1]);if(y.length!=2){throw"malformed format: SEQUENCE(0.0.1).items != 2: "+p.length}var q=ASN1HEX.getPosArrayOfChildren_AtObj(w,p[1]);if(q.length!=2){throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+q.length}if(ASN1HEX.getHexOfV_AtObj(w,q[0])!="2a864886f70d0307"){throw"this only supports TripleDES"}s.encryptionSchemeAlg="TripleDES";s.encryptionSchemeIV=ASN1HEX.getHexOfV_AtObj(w,q[1]);var t=ASN1HEX.getPosArrayOfChildren_AtObj(w,p[0]);if(t.length!=2){throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+t.length}if(ASN1HEX.getHexOfV_AtObj(w,t[0])!="2a864886f70d01050c"){throw"this only supports pkcs5PBKDF2"}var x=ASN1HEX.getPosArrayOfChildren_AtObj(w,t[1]);if(x.length<2){throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+x.length}s.pbkdf2Salt=ASN1HEX.getHexOfV_AtObj(w,x[0]);var u=ASN1HEX.getHexOfV_AtObj(w,x[1]);try{s.pbkdf2Iter=parseInt(u,16)}catch(v){throw"malformed format pbkdf2Iter: "+u}return s},getPBKDF2KeyHexFromParam:function(u,p){var t=CryptoJS.enc.Hex.parse(u.pbkdf2Salt);var q=u.pbkdf2Iter;var s=CryptoJS.PBKDF2(p,t,{keySize:192/32,iterations:q});var r=CryptoJS.enc.Hex.stringify(s);return r},getPlainPKCS8HexFromEncryptedPKCS8PEM:function(x,y){var r=this.getHexFromPEM(x,"ENCRYPTED PRIVATE KEY");var p=this.parseHexOfEncryptedPKCS8(r);var u=KEYUTIL.getPBKDF2KeyHexFromParam(p,y);var v={};v.ciphertext=CryptoJS.enc.Hex.parse(p.ciphertext);var t=CryptoJS.enc.Hex.parse(u);var s=CryptoJS.enc.Hex.parse(p.encryptionSchemeIV);var w=CryptoJS.TripleDES.decrypt(v,t,{iv:s});var q=CryptoJS.enc.Hex.stringify(w);return q},getRSAKeyFromEncryptedPKCS8PEM:function(s,r){var q=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(s,r);var p=this.getRSAKeyFromPlainPKCS8Hex(q);return p},getKeyFromEncryptedPKCS8PEM:function(s,q){var p=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(s,q);var r=this.getKeyFromPlainPrivatePKCS8Hex(p);return r},parsePlainPrivatePKCS8Hex:function(s){var q={};q.algparam=null;if(s.substr(0,2)!="30"){throw"malformed plain PKCS8 private key(code:001)"}var r=ASN1HEX.getPosArrayOfChildren_AtObj(s,0);if(r.length!=3){throw"malformed plain PKCS8 private key(code:002)"}if(s.substr(r[1],2)!="30"){throw"malformed PKCS8 private key(code:003)"}var p=ASN1HEX.getPosArrayOfChildren_AtObj(s,r[1]);if(p.length!=2){throw"malformed PKCS8 private key(code:004)"}if(s.substr(p[0],2)!="06"){throw"malformed PKCS8 private key(code:005)"}q.algoid=ASN1HEX.getHexOfV_AtObj(s,p[0]);if(s.substr(p[1],2)=="06"){q.algparam=ASN1HEX.getHexOfV_AtObj(s,p[1])}if(s.substr(r[2],2)!="04"){throw"malformed PKCS8 private key(code:006)"}q.keyidx=ASN1HEX.getStartPosOfV_AtObj(s,r[2]);return q},getKeyFromPlainPrivatePKCS8PEM:function(q){var p=this.getHexFromPEM(q,"PRIVATE KEY");var r=this.getKeyFromPlainPrivatePKCS8Hex(p);return r},getKeyFromPlainPrivatePKCS8Hex:function(p){var w=this.parsePlainPrivatePKCS8Hex(p);if(w.algoid=="2a864886f70d010101"){this.parsePrivateRawRSAKeyHexAtObj(p,w);var u=w.key;var z=new RSAKey;z.setPrivateEx(u.n,u.e,u.d,u.p,u.q,u.dp,u.dq,u.co);return z}else{if(w.algoid=="2a8648ce3d0201"){this.parsePrivateRawECKeyHexAtObj(p,w);if(KJUR.crypto.OID.oidhex2name[w.algparam]===undefined){throw"KJUR.crypto.OID.oidhex2name undefined: "+w.algparam}var v=KJUR.crypto.OID.oidhex2name[w.algparam];var z=new KJUR.crypto.ECDSA({curve:v});z.setPublicKeyHex(w.pubkey);z.setPrivateKeyHex(w.key);z.isPublic=false;return z}else{if(w.algoid=="2a8648ce380401"){var t=ASN1HEX.getVbyList(p,0,[1,1,0],"02");var s=ASN1HEX.getVbyList(p,0,[1,1,1],"02");var y=ASN1HEX.getVbyList(p,0,[1,1,2],"02");var B=ASN1HEX.getVbyList(p,0,[2,0],"02");var r=new BigInteger(t,16);var q=new BigInteger(s,16);var x=new BigInteger(y,16);var A=new BigInteger(B,16);var z=new KJUR.crypto.DSA;z.setPrivate(r,q,x,null,A);return z}else{throw"unsupported private key algorithm"}}}},getRSAKeyFromPublicPKCS8PEM:function(q){var r=this.getHexFromPEM(q,"PUBLIC KEY");var p=this.getRSAKeyFromPublicPKCS8Hex(r);return p},getKeyFromPublicPKCS8PEM:function(q){var r=this.getHexFromPEM(q,"PUBLIC KEY");var p=this.getKeyFromPublicPKCS8Hex(r);return p},getKeyFromPublicPKCS8Hex:function(q){var p=this.parsePublicPKCS8Hex(q);if(p.algoid=="2a864886f70d010101"){var u=this.parsePublicRawRSAKeyHex(p.key);var r=new RSAKey;r.setPublic(u.n,u.e);return r}else{if(p.algoid=="2a8648ce3d0201"){if(KJUR.crypto.OID.oidhex2name[p.algparam]===undefined){throw"KJUR.crypto.OID.oidhex2name undefined: "+p.algparam}var s=KJUR.crypto.OID.oidhex2name[p.algparam];var r=new KJUR.crypto.ECDSA({curve:s,pub:p.key});return r}else{if(p.algoid=="2a8648ce380401"){var t=p.algparam;var v=ASN1HEX.getHexOfV_AtObj(p.key,0);var r=new KJUR.crypto.DSA;r.setPublic(new BigInteger(t.p,16),new BigInteger(t.q,16),new BigInteger(t.g,16),new BigInteger(v,16));return r}else{throw"unsupported public key algorithm"}}}},parsePublicRawRSAKeyHex:function(r){var p={};if(r.substr(0,2)!="30"){throw"malformed RSA key(code:001)"}var q=ASN1HEX.getPosArrayOfChildren_AtObj(r,0);if(q.length!=2){throw"malformed RSA key(code:002)"}if(r.substr(q[0],2)!="02"){throw"malformed RSA key(code:003)"}p.n=ASN1HEX.getHexOfV_AtObj(r,q[0]);if(r.substr(q[1],2)!="02"){throw"malformed RSA key(code:004)"}p.e=ASN1HEX.getHexOfV_AtObj(r,q[1]);return p},parsePrivateRawRSAKeyHexAtObj:function(q,s){var r=s.keyidx;if(q.substr(r,2)!="30"){throw"malformed RSA private key(code:001)"}var p=ASN1HEX.getPosArrayOfChildren_AtObj(q,r);if(p.length!=9){throw"malformed RSA private key(code:002)"}s.key={};s.key.n=ASN1HEX.getHexOfV_AtObj(q,p[1]);s.key.e=ASN1HEX.getHexOfV_AtObj(q,p[2]);s.key.d=ASN1HEX.getHexOfV_AtObj(q,p[3]);s.key.p=ASN1HEX.getHexOfV_AtObj(q,p[4]);s.key.q=ASN1HEX.getHexOfV_AtObj(q,p[5]);s.key.dp=ASN1HEX.getHexOfV_AtObj(q,p[6]);s.key.dq=ASN1HEX.getHexOfV_AtObj(q,p[7]);s.key.co=ASN1HEX.getHexOfV_AtObj(q,p[8])},parsePrivateRawECKeyHexAtObj:function(p,t){var q=t.keyidx;var r=ASN1HEX.getVbyList(p,q,[1],"04");var s=ASN1HEX.getVbyList(p,q,[2,0],"03").substr(2);t.key=r;t.pubkey=s},parsePublicPKCS8Hex:function(s){var q={};q.algparam=null;var r=ASN1HEX.getPosArrayOfChildren_AtObj(s,0);if(r.length!=2){throw"outer DERSequence shall have 2 elements: "+r.length}var t=r[0];if(s.substr(t,2)!="30"){throw"malformed PKCS8 public key(code:001)"}var p=ASN1HEX.getPosArrayOfChildren_AtObj(s,t);if(p.length!=2){throw"malformed PKCS8 public key(code:002)"}if(s.substr(p[0],2)!="06"){throw"malformed PKCS8 public key(code:003)"}q.algoid=ASN1HEX.getHexOfV_AtObj(s,p[0]);if(s.substr(p[1],2)=="06"){q.algparam=ASN1HEX.getHexOfV_AtObj(s,p[1])}else{if(s.substr(p[1],2)=="30"){q.algparam={};q.algparam.p=ASN1HEX.getVbyList(s,p[1],[0],"02");q.algparam.q=ASN1HEX.getVbyList(s,p[1],[1],"02");q.algparam.g=ASN1HEX.getVbyList(s,p[1],[2],"02")}}if(s.substr(r[1],2)!="03"){throw"malformed PKCS8 public key(code:004)"}q.key=ASN1HEX.getHexOfV_AtObj(s,r[1]).substr(2);return q},getRSAKeyFromPublicPKCS8Hex:function(t){var s=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(s.length!=2){throw"outer DERSequence shall have 2 elements: "+s.length}var r=ASN1HEX.getHexOfTLV_AtObj(t,s[0]);if(r!="300d06092a864886f70d0101010500"){throw"PKCS8 AlgorithmId is not rsaEncryption"}if(t.substr(s[1],2)!="03"){throw"PKCS8 Public Key is not BITSTRING encapslated."}var v=ASN1HEX.getStartPosOfV_AtObj(t,s[1])+2;if(t.substr(v,2)!="30"){throw"PKCS8 Public Key is not SEQUENCE."}var p=ASN1HEX.getPosArrayOfChildren_AtObj(t,v);if(p.length!=2){throw"inner DERSequence shall have 2 elements: "+p.length}if(t.substr(p[0],2)!="02"){throw"N is not ASN.1 INTEGER"}if(t.substr(p[1],2)!="02"){throw"E is not ASN.1 INTEGER"}var w=ASN1HEX.getHexOfV_AtObj(t,p[0]);var u=ASN1HEX.getHexOfV_AtObj(t,p[1]);var q=new RSAKey;q.setPublic(w,u);return q}}}();KEYUTIL.getKey=function(f,e,h){if(typeof RSAKey!="undefined"&&f instanceof RSAKey){return f}if(typeof KJUR.crypto.ECDSA!="undefined"&&f instanceof KJUR.crypto.ECDSA){return f}if(typeof KJUR.crypto.DSA!="undefined"&&f instanceof KJUR.crypto.DSA){return f}if(f.curve!==undefined&&f.xy!==undefined&&f.d===undefined){return new KJUR.crypto.ECDSA({pub:f.xy,curve:f.curve})}if(f.curve!==undefined&&f.d!==undefined){return new KJUR.crypto.ECDSA({prv:f.d,curve:f.curve})}if(f.kty===undefined&&f.n!==undefined&&f.e!==undefined&&f.d===undefined){var w=new RSAKey;w.setPublic(f.n,f.e);return w}if(f.kty===undefined&&f.n!==undefined&&f.e!==undefined&&f.d!==undefined&&f.p!==undefined&&f.q!==undefined&&f.dp!==undefined&&f.dq!==undefined&&f.co!==undefined&&f.qi===undefined){var w=new RSAKey;w.setPrivateEx(f.n,f.e,f.d,f.p,f.q,f.dp,f.dq,f.co);return w}if(f.kty===undefined&&f.n!==undefined&&f.e!==undefined&&f.d!==undefined&&f.p===undefined){var w=new RSAKey;w.setPrivate(f.n,f.e,f.d);return w}if(f.p!==undefined&&f.q!==undefined&&f.g!==undefined&&f.y!==undefined&&f.x===undefined){var w=new KJUR.crypto.DSA;w.setPublic(f.p,f.q,f.g,f.y);return w}if(f.p!==undefined&&f.q!==undefined&&f.g!==undefined&&f.y!==undefined&&f.x!==undefined){var w=new KJUR.crypto.DSA;w.setPrivate(f.p,f.q,f.g,f.y,f.x);return w}if(f.kty==="RSA"&&f.n!==undefined&&f.e!==undefined&&f.d===undefined){var w=new RSAKey;w.setPublic(b64utohex(f.n),b64utohex(f.e));return w}if(f.kty==="RSA"&&f.n!==undefined&&f.e!==undefined&&f.d!==undefined&&f.p!==undefined&&f.q!==undefined&&f.dp!==undefined&&f.dq!==undefined&&f.qi!==undefined){var w=new RSAKey;w.setPrivateEx(b64utohex(f.n),b64utohex(f.e),b64utohex(f.d),b64utohex(f.p),b64utohex(f.q),b64utohex(f.dp),b64utohex(f.dq),b64utohex(f.qi));return w}if(f.kty==="RSA"&&f.n!==undefined&&f.e!==undefined&&f.d!==undefined){var w=new RSAKey;w.setPrivate(b64utohex(f.n),b64utohex(f.e),b64utohex(f.d));return w}if(f.kty==="EC"&&f.crv!==undefined&&f.x!==undefined&&f.y!==undefined&&f.d===undefined){var d=new KJUR.crypto.ECDSA({curve:f.crv});var l=d.ecparams.keylen/4;var r=("0000000000"+b64utohex(f.x)).slice(-l);var n=("0000000000"+b64utohex(f.y)).slice(-l);var m="04"+r+n;d.setPublicKeyHex(m);return d}if(f.kty==="EC"&&f.crv!==undefined&&f.x!==undefined&&f.y!==undefined&&f.d!==undefined){var d=new KJUR.crypto.ECDSA({curve:f.crv});var l=d.ecparams.keylen/4;var r=("0000000000"+b64utohex(f.x)).slice(-l);var n=("0000000000"+b64utohex(f.y)).slice(-l);var m="04"+r+n;var a=("0000000000"+b64utohex(f.d)).slice(-l);d.setPublicKeyHex(m);d.setPrivateKeyHex(a);return d}if(f.indexOf("-END CERTIFICATE-",0)!=-1||f.indexOf("-END X509 CERTIFICATE-",0)!=-1||f.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1){return X509.getPublicKeyFromCertPEM(f)}if(h==="pkcs8pub"){return KEYUTIL.getKeyFromPublicPKCS8Hex(f)}if(f.indexOf("-END PUBLIC KEY-")!=-1){return KEYUTIL.getKeyFromPublicPKCS8PEM(f)}if(h==="pkcs5prv"){var w=new RSAKey;w.readPrivateKeyFromASN1HexString(f);return w}if(h==="pkcs5prv"){var w=new RSAKey;w.readPrivateKeyFromASN1HexString(f);return w}if(f.indexOf("-END RSA PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")==-1){var i=KEYUTIL.getHexFromPEM(f,"RSA PRIVATE KEY");return KEYUTIL.getKey(i,null,"pkcs5prv")}if(f.indexOf("-END DSA PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")==-1){var u=this.getHexFromPEM(f,"DSA PRIVATE KEY");var t=ASN1HEX.getVbyList(u,0,[1],"02");var s=ASN1HEX.getVbyList(u,0,[2],"02");var v=ASN1HEX.getVbyList(u,0,[3],"02");var j=ASN1HEX.getVbyList(u,0,[4],"02");var k=ASN1HEX.getVbyList(u,0,[5],"02");var w=new KJUR.crypto.DSA;w.setPrivate(new BigInteger(t,16),new BigInteger(s,16),new BigInteger(v,16),new BigInteger(j,16),new BigInteger(k,16));return w}if(f.indexOf("-END PRIVATE KEY-")!=-1){return KEYUTIL.getKeyFromPlainPrivatePKCS8PEM(f)}if(f.indexOf("-END RSA PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")!=-1){return KEYUTIL.getRSAKeyFromEncryptedPKCS5PEM(f,e)}if(f.indexOf("-END EC PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")!=-1){var u=KEYUTIL.getDecryptedKeyHex(f,e);var w=ASN1HEX.getVbyList(u,0,[1],"04");var c=ASN1HEX.getVbyList(u,0,[2,0],"06");var o=ASN1HEX.getVbyList(u,0,[3,0],"03").substr(2);var b="";if(KJUR.crypto.OID.oidhex2name[c]!==undefined){b=KJUR.crypto.OID.oidhex2name[c]}else{throw"undefined OID(hex) in KJUR.crypto.OID: "+c}var d=new KJUR.crypto.ECDSA({name:b});d.setPublicKeyHex(o);d.setPrivateKeyHex(w);d.isPublic=false;return d}if(f.indexOf("-END DSA PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")!=-1){var u=KEYUTIL.getDecryptedKeyHex(f,e);var t=ASN1HEX.getVbyList(u,0,[1],"02");var s=ASN1HEX.getVbyList(u,0,[2],"02");var v=ASN1HEX.getVbyList(u,0,[3],"02");var j=ASN1HEX.getVbyList(u,0,[4],"02");var k=ASN1HEX.getVbyList(u,0,[5],"02");var w=new KJUR.crypto.DSA;w.setPrivate(new BigInteger(t,16),new BigInteger(s,16),new BigInteger(v,16),new BigInteger(j,16),new BigInteger(k,16));return w}if(f.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1){return KEYUTIL.getKeyFromEncryptedPKCS8PEM(f,e)}throw"not supported argument"};KEYUTIL.generateKeypair=function(a,c){if(a=="RSA"){var b=c;var h=new RSAKey;h.generate(b,"10001");h.isPrivate=true;h.isPublic=true;var f=new RSAKey;var e=h.n.toString(16);var i=h.e.toString(16);f.setPublic(e,i);f.isPrivate=false;f.isPublic=true;var k={};k.prvKeyObj=h;k.pubKeyObj=f;return k}else{if(a=="EC"){var d=c;var g=new KJUR.crypto.ECDSA({curve:d});var j=g.generateKeyPairHex();var h=new KJUR.crypto.ECDSA({curve:d});h.setPublicKeyHex(j.ecpubhex);h.setPrivateKeyHex(j.ecprvhex);h.isPrivate=true;h.isPublic=false;var f=new KJUR.crypto.ECDSA({curve:d});f.setPublicKeyHex(j.ecpubhex);f.isPrivate=false;f.isPublic=true;var k={};k.prvKeyObj=h;k.pubKeyObj=f;return k}else{throw"unknown algorithm: "+a}}};KEYUTIL.getPEM=function(a,r,o,g,j){var v=KJUR.asn1;var u=KJUR.crypto;function p(s){var w=KJUR.asn1.ASN1Util.newObject({seq:[{int:0},{int:{bigint:s.n}},{int:s.e},{int:{bigint:s.d}},{int:{bigint:s.p}},{int:{bigint:s.q}},{int:{bigint:s.dmp1}},{int:{bigint:s.dmq1}},{int:{bigint:s.coeff}}]});return w}function q(w){var s=KJUR.asn1.ASN1Util.newObject({seq:[{int:1},{octstr:{hex:w.prvKeyHex}},{tag:["a0",true,{oid:{name:w.curveName}}]},{tag:["a1",true,{bitstr:{hex:"00"+w.pubKeyHex}}]}]});return s}function n(s){var w=KJUR.asn1.ASN1Util.newObject({seq:[{int:0},{int:{bigint:s.p}},{int:{bigint:s.q}},{int:{bigint:s.g}},{int:{bigint:s.y}},{int:{bigint:s.x}}]});return w}if((typeof RSAKey!="undefined"&&a instanceof RSAKey||typeof u.DSA!="undefined"&&a instanceof u.DSA||typeof u.ECDSA!="undefined"&&a instanceof u.ECDSA)&&a.isPublic==true&&(r===undefined||r=="PKCS8PUB")){var t=new KJUR.asn1.x509.SubjectPublicKeyInfo(a);var m=t.getEncodedHex();return v.ASN1Util.getPEMStringFromHex(m,"PUBLIC KEY")}if(r=="PKCS1PRV"&&typeof RSAKey!="undefined"&&a instanceof RSAKey&&(o===undefined||o==null)&&a.isPrivate==true){var t=p(a);var m=t.getEncodedHex();return v.ASN1Util.getPEMStringFromHex(m,"RSA PRIVATE KEY")}if(r=="PKCS1PRV"&&typeof RSAKey!="undefined"&&a instanceof KJUR.crypto.ECDSA&&(o===undefined||o==null)&&a.isPrivate==true){var f=new KJUR.asn1.DERObjectIdentifier({name:a.curveName});var l=f.getEncodedHex();var e=q(a);var k=e.getEncodedHex();var i="";i+=v.ASN1Util.getPEMStringFromHex(l,"EC PARAMETERS");i+=v.ASN1Util.getPEMStringFromHex(k,"EC PRIVATE KEY");return i}if(r=="PKCS1PRV"&&typeof KJUR.crypto.DSA!="undefined"&&a instanceof KJUR.crypto.DSA&&(o===undefined||o==null)&&a.isPrivate==true){var t=n(a);var m=t.getEncodedHex();return v.ASN1Util.getPEMStringFromHex(m,"DSA PRIVATE KEY")}if(r=="PKCS5PRV"&&typeof RSAKey!="undefined"&&a instanceof RSAKey&&(o!==undefined&&o!=null)&&a.isPrivate==true){var t=p(a);var m=t.getEncodedHex();if(g===undefined){g="DES-EDE3-CBC"}return this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",m,o,g)}if(r=="PKCS5PRV"&&typeof KJUR.crypto.ECDSA!="undefined"&&a instanceof KJUR.crypto.ECDSA&&(o!==undefined&&o!=null)&&a.isPrivate==true){var t=q(a);var m=t.getEncodedHex();if(g===undefined){g="DES-EDE3-CBC"}return this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",m,o,g)}if(r=="PKCS5PRV"&&typeof KJUR.crypto.DSA!="undefined"&&a instanceof KJUR.crypto.DSA&&(o!==undefined&&o!=null)&&a.isPrivate==true){var t=n(a);var m=t.getEncodedHex();if(g===undefined){g="DES-EDE3-CBC"}return this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",m,o,g)}var h=function(w,s){var y=b(w,s);var x=new KJUR.asn1.ASN1Util.newObject({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:y.pbkdf2Salt}},{int:y.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:y.encryptionSchemeIV}}]}]}]},{octstr:{hex:y.ciphertext}}]});return x.getEncodedHex()};var b=function(D,E){var x=100;var C=CryptoJS.lib.WordArray.random(8);var B="DES-EDE3-CBC";var s=CryptoJS.lib.WordArray.random(8);var y=CryptoJS.PBKDF2(E,C,{keySize:192/32,iterations:x});var z=CryptoJS.enc.Hex.parse(D);var A=CryptoJS.TripleDES.encrypt(z,y,{iv:s})+"";var w={};w.ciphertext=A;w.pbkdf2Salt=CryptoJS.enc.Hex.stringify(C);w.pbkdf2Iter=x;w.encryptionSchemeAlg=B;w.encryptionSchemeIV=CryptoJS.enc.Hex.stringify(s);return w};if(r=="PKCS8PRV"&&typeof RSAKey!="undefined"&&a instanceof RSAKey&&a.isPrivate==true){var d=p(a);var c=d.getEncodedHex();var t=KJUR.asn1.ASN1Util.newObject({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:true}]},{octstr:{hex:c}}]});var m=t.getEncodedHex();if(o===undefined||o==null){return v.ASN1Util.getPEMStringFromHex(m,"PRIVATE KEY")}else{var k=h(m,o);return v.ASN1Util.getPEMStringFromHex(k,"ENCRYPTED PRIVATE KEY")}}if(r=="PKCS8PRV"&&typeof KJUR.crypto.ECDSA!="undefined"&&a instanceof KJUR.crypto.ECDSA&&a.isPrivate==true){var d=new KJUR.asn1.ASN1Util.newObject({seq:[{int:1},{octstr:{hex:a.prvKeyHex}},{tag:["a1",true,{bitstr:{hex:"00"+a.pubKeyHex}}]}]});var c=d.getEncodedHex();var t=KJUR.asn1.ASN1Util.newObject({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:a.curveName}}]},{octstr:{hex:c}}]});var m=t.getEncodedHex();if(o===undefined||o==null){return v.ASN1Util.getPEMStringFromHex(m,"PRIVATE KEY")}else{var k=h(m,o);return v.ASN1Util.getPEMStringFromHex(k,"ENCRYPTED PRIVATE KEY")}}if(r=="PKCS8PRV"&&typeof KJUR.crypto.DSA!="undefined"&&a instanceof KJUR.crypto.DSA&&a.isPrivate==true){var d=new KJUR.asn1.DERInteger({bigint:a.x});var c=d.getEncodedHex();var t=KJUR.asn1.ASN1Util.newObject({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:a.p}},{int:{bigint:a.q}},{int:{bigint:a.g}}]}]},{octstr:{hex:c}}]});var m=t.getEncodedHex();if(o===undefined||o==null){return v.ASN1Util.getPEMStringFromHex(m,"PRIVATE KEY")}else{var k=h(m,o);return v.ASN1Util.getPEMStringFromHex(k,"ENCRYPTED PRIVATE KEY")}}throw"unsupported object nor format"};KEYUTIL.getKeyFromCSRPEM=function(b){var a=KEYUTIL.getHexFromPEM(b,"CERTIFICATE REQUEST");var c=KEYUTIL.getKeyFromCSRHex(a);return c};KEYUTIL.getKeyFromCSRHex=function(a){var c=KEYUTIL.parseCSRHex(a);var b=KEYUTIL.getKey(c.p8pubkeyhex,null,"pkcs8pub");return b};KEYUTIL.parseCSRHex=function(c){var b={};var e=c;if(e.substr(0,2)!="30"){throw"malformed CSR(code:001)"}var d=ASN1HEX.getPosArrayOfChildren_AtObj(e,0);if(d.length<1){throw"malformed CSR(code:002)"}if(e.substr(d[0],2)!="30"){throw"malformed CSR(code:003)"}var a=ASN1HEX.getPosArrayOfChildren_AtObj(e,d[0]);if(a.length<3){throw"malformed CSR(code:004)"}b.p8pubkeyhex=ASN1HEX.getHexOfTLV_AtObj(e,a[2]);return b};KEYUTIL.getJWKFromKey=function(d){var b={};if(d instanceof RSAKey&&d.isPrivate){b.kty="RSA";b.n=hextob64u(d.n.toString(16));b.e=hextob64u(d.e.toString(16));b.d=hextob64u(d.d.toString(16));b.p=hextob64u(d.p.toString(16));b.q=hextob64u(d.q.toString(16));b.dp=hextob64u(d.dmp1.toString(16));b.dq=hextob64u(d.dmq1.toString(16));b.qi=hextob64u(d.coeff.toString(16));return b}else{if(d instanceof RSAKey&&d.isPublic){b.kty="RSA";b.n=hextob64u(d.n.toString(16));b.e=hextob64u(d.e.toString(16));return b}else{if(d instanceof KJUR.crypto.ECDSA&&d.isPrivate){var a=d.getShortNISTPCurveName();if(a!=="P-256"&&a!=="P-384"){throw"unsupported curve name for JWT: "+a}var c=d.getPublicKeyXYHex();b.kty="EC";b.crv=a;b.x=hextob64u(c.x);b.y=hextob64u(c.y);b.d=hextob64u(d.prvKeyHex);return b}else{if(d instanceof KJUR.crypto.ECDSA&&d.isPublic){var a=d.getShortNISTPCurveName();if(a!=="P-256"&&a!=="P-384"){throw"unsupported curve name for JWT: "+a}var c=d.getPublicKeyXYHex();b.kty="EC";b.crv=a;b.x=hextob64u(c.x);b.y=hextob64u(c.y);return b}}}}throw"not supported key object"};function _rsapem_pemToBase64(b){var a=b;a=a.replace("-----BEGIN RSA PRIVATE KEY-----","");a=a.replace("-----END RSA PRIVATE KEY-----","");a=a.replace(/[ \n]+/g,"");return a}function _rsapem_getPosArrayOfChildrenFromHex(d){var j=new Array;var k=ASN1HEX.getStartPosOfV_AtObj(d,0);var f=ASN1HEX.getPosOfNextSibling_AtObj(d,k);var h=ASN1HEX.getPosOfNextSibling_AtObj(d,f);var b=ASN1HEX.getPosOfNextSibling_AtObj(d,h);var l=ASN1HEX.getPosOfNextSibling_AtObj(d,b);var e=ASN1HEX.getPosOfNextSibling_AtObj(d,l);var g=ASN1HEX.getPosOfNextSibling_AtObj(d,e);var c=ASN1HEX.getPosOfNextSibling_AtObj(d,g);var i=ASN1HEX.getPosOfNextSibling_AtObj(d,c);j.push(k,f,h,b,l,e,g,c,i);return j}function _rsapem_getHexValueArrayOfChildrenFromHex(i){var o=_rsapem_getPosArrayOfChildrenFromHex(i);var r=ASN1HEX.getHexOfV_AtObj(i,o[0]);var f=ASN1HEX.getHexOfV_AtObj(i,o[1]);var j=ASN1HEX.getHexOfV_AtObj(i,o[2]);var k=ASN1HEX.getHexOfV_AtObj(i,o[3]);var c=ASN1HEX.getHexOfV_AtObj(i,o[4]);var b=ASN1HEX.getHexOfV_AtObj(i,o[5]);var h=ASN1HEX.getHexOfV_AtObj(i,o[6]);var g=ASN1HEX.getHexOfV_AtObj(i,o[7]);var l=ASN1HEX.getHexOfV_AtObj(i,o[8]);var m=new Array;m.push(r,f,j,k,c,b,h,g,l);return m}function _rsapem_readPrivateKeyFromASN1HexString(c){var b=_rsapem_getHexValueArrayOfChildrenFromHex(c);this.setPrivateEx(b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])}function _rsapem_readPrivateKeyFromPEMString(e){var c=_rsapem_pemToBase64(e);var d=b64tohex(c);var b=_rsapem_getHexValueArrayOfChildrenFromHex(d);this.setPrivateEx(b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])}RSAKey.prototype.readPrivateKeyFromPEMString=_rsapem_readPrivateKeyFromPEMString;RSAKey.prototype.readPrivateKeyFromASN1HexString=_rsapem_readPrivateKeyFromASN1HexString;var _RE_HEXDECONLY=new RegExp("");_RE_HEXDECONLY.compile("[^0-9a-f]","gi");function _rsasign_getHexPaddedDigestInfoForString(d,e,a){var b=function(f){return KJUR.crypto.Util.hashString(f,a)};var c=b(d);return KJUR.crypto.Util.getPaddedDigestInfoHex(c,a,e)}function _zeroPaddingOfSignature(e,d){var c="";var a=d/4-e.length;for(var b=0;b<a;b++){c=c+"0"}return c+e}function _rsasign_signString(d,a){var b=function(e){return KJUR.crypto.Util.hashString(e,a)};var c=b(d);return this.signWithMessageHash(c,a)}function _rsasign_signWithMessageHash(e,c){var f=KJUR.crypto.Util.getPaddedDigestInfoHex(e,c,this.n.bitLength());var b=parseBigInt(f,16);var d=this.doPrivate(b);var a=d.toString(16);return _zeroPaddingOfSignature(a,this.n.bitLength())}function _rsasign_signStringWithSHA1(a){return _rsasign_signString.call(this,a,"sha1")}function _rsasign_signStringWithSHA256(a){return _rsasign_signString.call(this,a,"sha256")}function pss_mgf1_str(c,a,e){var b="",d=0;while(b.length<a){b+=hextorstr(e(rstrtohex(c+String.fromCharCode.apply(String,[(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255]))));d+=1}return b}function _rsasign_signStringPSS(e,a,d){var c=function(f){return KJUR.crypto.Util.hashHex(f,a)};var b=c(rstrtohex(e));if(d===undefined){d=-1}return this.signWithMessageHashPSS(b,a,d)}function _rsasign_signWithMessageHashPSS(l,a,k){var b=hextorstr(l);var g=b.length;var m=this.n.bitLength()-1;var c=Math.ceil(m/8);var d;var o=function(i){return KJUR.crypto.Util.hashHex(i,a)};if(k===-1||k===undefined){k=g}else{if(k===-2){k=c-g-2}else{if(k<-2){throw"invalid salt length"}}}if(c<g+k+2){throw"data too long"}var f="";if(k>0){f=new Array(k);(new SecureRandom).nextBytes(f);f=String.fromCharCode.apply(String,f)}var n=hextorstr(o(rstrtohex("\0\0\0\0\0\0\0\0"+b+f)));var j=[];for(d=0;d<c-k-g-2;d+=1){j[d]=0}var e=String.fromCharCode.apply(String,j)+""+f;var h=pss_mgf1_str(n,e.length,o);var q=[];for(d=0;d<e.length;d+=1){q[d]=e.charCodeAt(d)^h.charCodeAt(d)}var p=65280>>8*c-m&255;q[0]&=~p;for(d=0;d<g;d++){q.push(n.charCodeAt(d))}q.push(188);return _zeroPaddingOfSignature(this.doPrivate(new BigInteger(q)).toString(16),this.n.bitLength())}function _rsasign_getDecryptSignatureBI(a,d,c){var b=new RSAKey;b.setPublic(d,c);var e=b.doPublic(a);return e}function _rsasign_getHexDigestInfoFromSig(a,c,b){var e=_rsasign_getDecryptSignatureBI(a,c,b);var d=e.toString(16).replace(/^1f+00/,"");return d}function _rsasign_getAlgNameAndHashFromHexDisgestInfo(f){for(var e in KJUR.crypto.Util.DIGESTINFOHEAD){var d=KJUR.crypto.Util.DIGESTINFOHEAD[e];var b=d.length;if(f.substring(0,b)==d){var c=[e,f.substring(b)];return c}}return[]}function _rsasign_verifySignatureWithArgs(f,b,g,j){var e=_rsasign_getHexDigestInfoFromSig(b,g,j);var h=_rsasign_getAlgNameAndHashFromHexDisgestInfo(e);if(h.length==0){return false}var d=h[0];var i=h[1];var a=function(k){return KJUR.crypto.Util.hashString(k,d)};var c=a(f);return i==c}function _rsasign_verifyHexSignatureForMessage(c,b){var d=parseBigInt(c,16);var a=_rsasign_verifySignatureWithArgs(b,d,this.n.toString(16),this.e.toString(16));return a}function _rsasign_verifyString(f,j){j=j.replace(_RE_HEXDECONLY,"");j=j.replace(/[ \n]+/g,"");var b=parseBigInt(j,16);if(b.bitLength()>this.n.bitLength()){return 0}var i=this.doPublic(b);var e=i.toString(16).replace(/^1f+00/,"");var g=_rsasign_getAlgNameAndHashFromHexDisgestInfo(e);if(g.length==0){return false}var d=g[0];var h=g[1];var a=function(k){return KJUR.crypto.Util.hashString(k,d)};var c=a(f);return h==c}function _rsasign_verifyWithMessageHash(e,a){a=a.replace(_RE_HEXDECONLY,"");a=a.replace(/[ \n]+/g,"");var b=parseBigInt(a,16);if(b.bitLength()>this.n.bitLength()){return 0}var h=this.doPublic(b);var g=h.toString(16).replace(/^1f+00/,"");var c=_rsasign_getAlgNameAndHashFromHexDisgestInfo(g);if(c.length==0){return false}var d=c[0];var f=c[1];return f==e}function _rsasign_verifyStringPSS(c,b,a,f){var e=function(g){return KJUR.crypto.Util.hashHex(g,a)};var d=e(rstrtohex(c));if(f===undefined){f=-1}return this.verifyWithMessageHashPSS(d,b,a,f)}function _rsasign_verifyWithMessageHashPSS(f,s,l,c){var k=new BigInteger(s,16);if(k.bitLength()>this.n.bitLength()){return false}var r=function(i){return KJUR.crypto.Util.hashHex(i,l)};var j=hextorstr(f);var h=j.length;var g=this.n.bitLength()-1;var m=Math.ceil(g/8);var q;if(c===-1||c===undefined){c=h}else{if(c===-2){c=m-h-2}else{if(c<-2){throw"invalid salt length"}}}if(m<h+c+2){throw"data too long"}var a=this.doPublic(k).toByteArray();for(q=0;q<a.length;q+=1){a[q]&=255}while(a.length<m){a.unshift(0)}if(a[m-1]!==188){throw"encoded message does not end in 0xbc"}a=String.fromCharCode.apply(String,a);var d=a.substr(0,m-h-1);var e=a.substr(d.length,h);var p=65280>>8*m-g&255;if((d.charCodeAt(0)&p)!==0){throw"bits beyond keysize not zero"}var n=pss_mgf1_str(e,d.length,r);var o=[];for(q=0;q<d.length;q+=1){o[q]=d.charCodeAt(q)^n.charCodeAt(q)}o[0]&=~p;var b=m-h-c-2;for(q=0;q<b;q+=1){if(o[q]!==0){throw"leftmost octets not zero"}}if(o[b]!==1){throw"0x01 marker not found"}return e===hextorstr(r(rstrtohex("\0\0\0\0\0\0\0\0"+j+String.fromCharCode.apply(String,o.slice(-c)))))}RSAKey.prototype.signWithMessageHash=_rsasign_signWithMessageHash;RSAKey.prototype.signString=_rsasign_signString;RSAKey.prototype.signStringWithSHA1=_rsasign_signStringWithSHA1;RSAKey.prototype.signStringWithSHA256=_rsasign_signStringWithSHA256;RSAKey.prototype.sign=_rsasign_signString;RSAKey.prototype.signWithSHA1=_rsasign_signStringWithSHA1;RSAKey.prototype.signWithSHA256=_rsasign_signStringWithSHA256;RSAKey.prototype.signWithMessageHashPSS=_rsasign_signWithMessageHashPSS;RSAKey.prototype.signStringPSS=_rsasign_signStringPSS;RSAKey.prototype.signPSS=_rsasign_signStringPSS;RSAKey.SALT_LEN_HLEN=-1;RSAKey.SALT_LEN_MAX=-2;RSAKey.prototype.verifyWithMessageHash=_rsasign_verifyWithMessageHash;RSAKey.prototype.verifyString=_rsasign_verifyString;RSAKey.prototype.verifyHexSignatureForMessage=_rsasign_verifyHexSignatureForMessage;RSAKey.prototype.verify=_rsasign_verifyString;RSAKey.prototype.verifyHexSignatureForByteArrayMessage=_rsasign_verifyHexSignatureForMessage;RSAKey.prototype.verifyWithMessageHashPSS=_rsasign_verifyWithMessageHashPSS;RSAKey.prototype.verifyStringPSS=_rsasign_verifyStringPSS;RSAKey.prototype.verifyPSS=_rsasign_verifyStringPSS;RSAKey.SALT_LEN_RECOVER=-2;function X509(){this.subjectPublicKeyRSA=null;this.subjectPublicKeyRSA_hN=null;this.subjectPublicKeyRSA_hE=null;this.hex=null;this.getSerialNumberHex=function(){return ASN1HEX.getDecendantHexVByNthList(this.hex,0,[0,1])};this.getSignatureAlgorithmField=function(){var b=ASN1HEX.getDecendantHexVByNthList(this.hex,0,[0,2,0]);var a=KJUR.asn1.ASN1Util.oidHexToInt(b);var c=KJUR.asn1.x509.OID.oid2name(a);return c};this.getIssuerHex=function(){return ASN1HEX.getDecendantHexTLVByNthList(this.hex,0,[0,3])};this.getIssuerString=function(){return X509.hex2dn(ASN1HEX.getDecendantHexTLVByNthList(this.hex,0,[0,3]))};this.getSubjectHex=function(){return ASN1HEX.getDecendantHexTLVByNthList(this.hex,0,[0,5])};this.getSubjectString=function(){return X509.hex2dn(ASN1HEX.getDecendantHexTLVByNthList(this.hex,0,[0,5]))};this.getNotBefore=function(){var a=ASN1HEX.getDecendantHexVByNthList(this.hex,0,[0,4,0]);a=a.replace(/(..)/g,"%$1");a=decodeURIComponent(a);return a};this.getNotAfter=function(){var a=ASN1HEX.getDecendantHexVByNthList(this.hex,0,[0,4,1]);a=a.replace(/(..)/g,"%$1");a=decodeURIComponent(a);return a};this.readCertPEM=function(c){var e=X509.pemToHex(c);var b=X509.getPublicKeyHexArrayFromCertHex(e);var d=new RSAKey;d.setPublic(b[0],b[1]);this.subjectPublicKeyRSA=d;this.subjectPublicKeyRSA_hN=b[0];this.subjectPublicKeyRSA_hE=b[1];this.hex=e};this.readCertPEMWithoutRSAInit=function(c){var d=X509.pemToHex(c);var b=X509.getPublicKeyHexArrayFromCertHex(d);this.subjectPublicKeyRSA.setPublic(b[0],b[1]);this.subjectPublicKeyRSA_hN=b[0];this.subjectPublicKeyRSA_hE=b[1];this.hex=d};this.getInfo=function(){var p="Basic Fields\n";p+="  serial number: "+this.getSerialNumberHex()+"\n";p+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n";p+="  issuer: "+this.getIssuerString()+"\n";
p+="  notBefore: "+this.getNotBefore()+"\n";p+="  notAfter: "+this.getNotAfter()+"\n";p+="  subject: "+this.getSubjectString()+"\n";p+="  subject public key info: \n";var j=X509.getSubjectPublicKeyInfoPosFromCertHex(this.hex);var d=ASN1HEX.getHexOfTLV_AtObj(this.hex,j);var n=KEYUTIL.getKey(d,null,"pkcs8pub");if(n instanceof RSAKey){p+="    key algorithm: RSA\n";p+="    n="+n.n.toString(16).substr(0,16)+"...\n";p+="    e="+n.e.toString(16)+"\n"}p+="X509v3 Extensions:\n";var m=X509.getV3ExtInfoListOfCertHex(this.hex);for(var e=0;e<m.length;e++){var b=m[e];var o=KJUR.asn1.x509.OID.oid2name(b.oid);if(o===""){o=b.oid}var k="";if(b.critical===true){k="CRITICAL"}p+="  "+o+" "+k+":\n";if(o==="basicConstraints"){var g=X509.getExtBasicConstraints(this.hex);if(g.cA===undefined){p+="    {}\n"}else{p+="    cA=true";if(g.pathLen!==undefined){p+=", pathLen="+g.pathLen}p+="\n"}}else{if(o==="keyUsage"){p+="    "+X509.getExtKeyUsageString(this.hex)+"\n"}else{if(o==="subjectKeyIdentifier"){p+="    "+X509.getExtSubjectKeyIdentifier(this.hex)+"\n"}else{if(o==="authorityKeyIdentifier"){var a=X509.getExtAuthorityKeyIdentifier(this.hex);if(a.kid!==undefined){p+="    kid="+a.kid+"\n"}}else{if(o==="extKeyUsage"){var h=X509.getExtExtKeyUsageName(this.hex);p+="    "+h.join(", ")+"\n"}else{if(o==="subjectAltName"){var f=X509.getExtSubjectAltName(this.hex);p+="    "+f.join(", ")+"\n"}else{if(o==="cRLDistributionPoints"){var l=X509.getExtCRLDistributionPointsURI(this.hex);p+="    "+l+"\n"}else{if(o==="authorityInfoAccess"){var c=X509.getExtAIAInfo(this.hex);if(c.ocsp!==undefined){p+="    ocsp: "+c.ocsp.join(",")+"\n"}if(c.caissuer!==undefined){p+="    caissuer: "+c.caissuer.join(",")+"\n"}}}}}}}}}}p+="signature algorithm: "+X509.getSignatureAlgorithmName(this.hex)+"\n";p+="signature: "+X509.getSignatureValueHex(this.hex).substr(0,16)+"...\n";return p}}X509.pemToBase64=function(a){var b=a;b=b.replace("-----BEGIN CERTIFICATE-----","");b=b.replace("-----END CERTIFICATE-----","");b=b.replace(/[ \n]+/g,"");return b};X509.pemToHex=function(a){var c=X509.pemToBase64(a);var b=b64tohex(c);return b};X509.getSubjectPublicKeyPosFromCertHex=function(f){var e=X509.getSubjectPublicKeyInfoPosFromCertHex(f);if(e==-1){return-1}var b=ASN1HEX.getPosArrayOfChildren_AtObj(f,e);if(b.length!=2){return-1}var d=b[1];if(f.substring(d,d+2)!="03"){return-1}var c=ASN1HEX.getStartPosOfV_AtObj(f,d);if(f.substring(c,c+2)!="00"){return-1}return c+2};X509.getSubjectPublicKeyInfoPosFromCertHex=function(d){var c=ASN1HEX.getStartPosOfV_AtObj(d,0);var b=ASN1HEX.getPosArrayOfChildren_AtObj(d,c);if(b.length<1){return-1}if(d.substring(b[0],b[0]+10)=="a003020102"){if(b.length<6){return-1}return b[6]}else{if(b.length<5){return-1}return b[5]}};X509.getPublicKeyHexArrayFromCertHex=function(f){var e=X509.getSubjectPublicKeyPosFromCertHex(f);var b=ASN1HEX.getPosArrayOfChildren_AtObj(f,e);if(b.length!=2){return[]}var d=ASN1HEX.getHexOfV_AtObj(f,b[0]);var c=ASN1HEX.getHexOfV_AtObj(f,b[1]);if(d!=null&&c!=null){return[d,c]}else{return[]}};X509.getHexTbsCertificateFromCert=function(b){var a=ASN1HEX.getStartPosOfV_AtObj(b,0);return a};X509.getPublicKeyHexArrayFromCertPEM=function(c){var d=X509.pemToHex(c);var b=X509.getPublicKeyHexArrayFromCertHex(d);return b};X509.hex2dn=function(e){var f="";var c=ASN1HEX.getPosArrayOfChildren_AtObj(e,0);for(var d=0;d<c.length;d++){var b=ASN1HEX.getHexOfTLV_AtObj(e,c[d]);f=f+"/"+X509.hex2rdn(b)}return f};X509.hex2rdn=function(a){var f=ASN1HEX.getDecendantHexTLVByNthList(a,0,[0,0]);var e=ASN1HEX.getDecendantHexVByNthList(a,0,[0,1]);var c="";try{c=X509.DN_ATTRHEX[f]}catch(b){c=f}e=e.replace(/(..)/g,"%$1");var d=decodeURIComponent(e);return c+"="+d};X509.DN_ATTRHEX={"0603550406":"C","060355040a":"O","060355040b":"OU","0603550403":"CN","0603550405":"SN","0603550408":"ST","0603550407":"L","0603550409":"streetAddress","060355040f":"businessCategory","0603550411":"postalCode","060b2b0601040182373c020102":"jurisdictionOfIncorporationSP","060b2b0601040182373c020103":"jurisdictionOfIncorporationC"};X509.getPublicKeyFromCertPEM=function(f){var c=X509.getPublicKeyInfoPropOfCertPEM(f);if(c.algoid=="2a864886f70d010101"){var i=KEYUTIL.parsePublicRawRSAKeyHex(c.keyhex);var j=new RSAKey;j.setPublic(i.n,i.e);return j}else{if(c.algoid=="2a8648ce3d0201"){var e=KJUR.crypto.OID.oidhex2name[c.algparam];var j=new KJUR.crypto.ECDSA({curve:e,info:c.keyhex});j.setPublicKeyHex(c.keyhex);return j}else{if(c.algoid=="2a8648ce380401"){var b=ASN1HEX.getVbyList(c.algparam,0,[0],"02");var a=ASN1HEX.getVbyList(c.algparam,0,[1],"02");var d=ASN1HEX.getVbyList(c.algparam,0,[2],"02");var h=ASN1HEX.getHexOfV_AtObj(c.keyhex,0);h=h.substr(2);var j=new KJUR.crypto.DSA;j.setPublic(new BigInteger(b,16),new BigInteger(a,16),new BigInteger(d,16),new BigInteger(h,16));return j}else{throw"unsupported key"}}}};X509.getPublicKeyInfoPropOfCertPEM=function(e){var i={};i.algparam=null;var f=X509.pemToHex(e);var d=ASN1HEX.getPosArrayOfChildren_AtObj(f,0);if(d.length!=3){throw"malformed X.509 certificate PEM (code:001)"}if(f.substr(d[0],2)!="30"){throw"malformed X.509 certificate PEM (code:002)"}var c=ASN1HEX.getPosArrayOfChildren_AtObj(f,d[0]);var g=6;if(f.substr(c[0],2)!=="a0"){g=5}if(c.length<g+1){throw"malformed X.509 certificate PEM (code:003)"}var a=ASN1HEX.getPosArrayOfChildren_AtObj(f,c[g]);if(a.length!=2){throw"malformed X.509 certificate PEM (code:004)"}var h=ASN1HEX.getPosArrayOfChildren_AtObj(f,a[0]);if(h.length!=2){throw"malformed X.509 certificate PEM (code:005)"}i.algoid=ASN1HEX.getHexOfV_AtObj(f,h[0]);if(f.substr(h[1],2)=="06"){i.algparam=ASN1HEX.getHexOfV_AtObj(f,h[1])}else{if(f.substr(h[1],2)=="30"){i.algparam=ASN1HEX.getHexOfTLV_AtObj(f,h[1])}}if(f.substr(a[1],2)!="03"){throw"malformed X.509 certificate PEM (code:006)"}var b=ASN1HEX.getHexOfV_AtObj(f,a[1]);i.keyhex=b.substr(2);return i};X509.getPublicKeyInfoPosOfCertHEX=function(c){var b=ASN1HEX.getPosArrayOfChildren_AtObj(c,0);if(b.length!=3){throw"malformed X.509 certificate PEM (code:001)"}if(c.substr(b[0],2)!="30"){throw"malformed X.509 certificate PEM (code:002)"}var a=ASN1HEX.getPosArrayOfChildren_AtObj(c,b[0]);if(a.length<7){throw"malformed X.509 certificate PEM (code:003)"}return a[6]};X509.getV3ExtInfoListOfCertHex=function(g){var b=ASN1HEX.getPosArrayOfChildren_AtObj(g,0);if(b.length!=3){throw"malformed X.509 certificate PEM (code:001)"}if(g.substr(b[0],2)!="30"){throw"malformed X.509 certificate PEM (code:002)"}var a=ASN1HEX.getPosArrayOfChildren_AtObj(g,b[0]);if(a.length<8){throw"malformed X.509 certificate PEM (code:003)"}if(g.substr(a[7],2)!="a3"){throw"malformed X.509 certificate PEM (code:004)"}var h=ASN1HEX.getPosArrayOfChildren_AtObj(g,a[7]);if(h.length!=1){throw"malformed X.509 certificate PEM (code:005)"}if(g.substr(h[0],2)!="30"){throw"malformed X.509 certificate PEM (code:006)"}var f=ASN1HEX.getPosArrayOfChildren_AtObj(g,h[0]);var e=f.length;var d=new Array(e);for(var c=0;c<e;c++){d[c]=X509.getV3ExtItemInfo_AtObj(g,f[c])}return d};X509.getV3ExtItemInfo_AtObj=function(f,g){var e={};e.posTLV=g;var b=ASN1HEX.getPosArrayOfChildren_AtObj(f,g);if(b.length!=2&&b.length!=3){throw"malformed X.509v3 Ext (code:001)"}if(f.substr(b[0],2)!="06"){throw"malformed X.509v3 Ext (code:002)"}var d=ASN1HEX.getHexOfV_AtObj(f,b[0]);e.oid=ASN1HEX.hextooidstr(d);e.critical=false;if(b.length==3){e.critical=true}var c=b[b.length-1];if(f.substr(c,2)!="04"){throw"malformed X.509v3 Ext (code:003)"}e.posV=ASN1HEX.getStartPosOfV_AtObj(f,c);return e};X509.getHexOfTLV_V3ExtValue=function(b,a){var c=X509.getPosOfTLV_V3ExtValue(b,a);if(c==-1){return null}return ASN1HEX.getHexOfTLV_AtObj(b,c)};X509.getHexOfV_V3ExtValue=function(b,a){var c=X509.getPosOfTLV_V3ExtValue(b,a);if(c==-1){return null}return ASN1HEX.getHexOfV_AtObj(b,c)};X509.getPosOfTLV_V3ExtValue=function(f,b){var d=b;if(!b.match(/^[0-9.]+$/)){d=KJUR.asn1.x509.OID.name2oid(b)}if(d==""){return-1}var c=X509.getV3ExtInfoListOfCertHex(f);for(var a=0;a<c.length;a++){var e=c[a];if(e.oid==d){return e.posV}}return-1};X509.getExtBasicConstraints=function(d){var a=X509.getHexOfV_V3ExtValue(d,"basicConstraints");if(a===null){return null}if(a===""){return{}}if(a==="0101ff"){return{cA:true}}if(a.substr(0,8)==="0101ff02"){var c=ASN1HEX.getHexOfV_AtObj(a,6);var b=parseInt(c,16);return{cA:true,pathLen:b}}throw"unknown error"};X509.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];X509.getExtKeyUsageBin=function(d){var b=X509.getHexOfV_V3ExtValue(d,"keyUsage");if(b==""){return""}if(b.length%2!=0||b.length<=2){throw"malformed key usage value"}var a=parseInt(b.substr(0,2));var c=parseInt(b.substr(2),16).toString(2);return c.substr(0,c.length-a)};X509.getExtKeyUsageString=function(e){var d=X509.getExtKeyUsageBin(e);var b=new Array;for(var c=0;c<d.length;c++){if(d.substr(c,1)=="1"){b.push(X509.KEYUSAGE_NAME[c])}}return b.join(",")};X509.getExtSubjectKeyIdentifier=function(b){var a=X509.getHexOfV_V3ExtValue(b,"subjectKeyIdentifier");return a};X509.getExtAuthorityKeyIdentifier=function(f){var b={};var e=X509.getHexOfTLV_V3ExtValue(f,"authorityKeyIdentifier");if(e===null){return null}var c=ASN1HEX.getPosArrayOfChildren_AtObj(e,0);for(var d=0;d<c.length;d++){if(e.substr(c[d],2)==="80"){b.kid=ASN1HEX.getHexOfV_AtObj(e,c[d])}}return b};X509.getExtExtKeyUsageName=function(k){var b=new Array;var f=X509.getHexOfTLV_V3ExtValue(k,"extKeyUsage");if(f===null){return null}var c=ASN1HEX.getPosArrayOfChildren_AtObj(f,0);for(var e=0;e<c.length;e++){var j=ASN1HEX.getHexOfV_AtObj(f,c[e]);var g=KJUR.asn1.ASN1Util.oidHexToInt(j);var d=KJUR.asn1.x509.OID.oid2name(g);b.push(d)}return b};X509.getExtSubjectAltName=function(g){var b=new Array;var f=X509.getHexOfTLV_V3ExtValue(g,"subjectAltName");var c=ASN1HEX.getPosArrayOfChildren_AtObj(f,0);for(var e=0;e<c.length;e++){if(f.substr(c[e],2)==="82"){var d=hextoutf8(ASN1HEX.getHexOfV_AtObj(f,c[e]));b.push(d)}}return b};X509.getExtCRLDistributionPointsURI=function(n){var p=new Array;var k=X509.getHexOfTLV_V3ExtValue(n,"cRLDistributionPoints");var o=ASN1HEX.getPosArrayOfChildren_AtObj(k,0);for(var g=0;g<o.length;g++){var l=ASN1HEX.getHexOfTLV_AtObj(k,o[g]);var b=ASN1HEX.getPosArrayOfChildren_AtObj(l,0);for(var e=0;e<b.length;e++){if(l.substr(b[e],2)==="a0"){var f=ASN1HEX.getHexOfV_AtObj(l,b[e]);if(f.substr(0,2)==="a0"){var c=ASN1HEX.getHexOfV_AtObj(f,0);if(c.substr(0,2)==="86"){var m=ASN1HEX.getHexOfV_AtObj(c,0);var d=hextoutf8(m);p.push(d)}}}}}return p};X509.getExtAIAInfo=function(g){var j={};j.ocsp=[];j.caissuer=[];var h=X509.getPosOfTLV_V3ExtValue(g,"authorityInfoAccess");if(h==-1){return null}if(g.substr(h,2)!="30"){throw"malformed AIA Extn Value"}var d=ASN1HEX.getPosArrayOfChildren_AtObj(g,h);for(var c=0;c<d.length;c++){var a=d[c];var b=ASN1HEX.getPosArrayOfChildren_AtObj(g,a);if(b.length!=2){throw"malformed AccessDescription of AIA Extn"}var e=b[0];var f=b[1];if(ASN1HEX.getHexOfV_AtObj(g,e)=="2b06010505073001"){if(g.substr(f,2)=="86"){j.ocsp.push(hextoutf8(ASN1HEX.getHexOfV_AtObj(g,f)))}}if(ASN1HEX.getHexOfV_AtObj(g,e)=="2b06010505073002"){if(g.substr(f,2)=="86"){j.caissuer.push(hextoutf8(ASN1HEX.getHexOfV_AtObj(g,f)))}}}return j};X509.getSignatureAlgorithmName=function(d){var b=ASN1HEX.getDecendantHexVByNthList(d,0,[1,0]);var a=KJUR.asn1.ASN1Util.oidHexToInt(b);var c=KJUR.asn1.x509.OID.oid2name(a);return c};X509.getSignatureValueHex=function(b){var a=ASN1HEX.getDecendantHexVByNthList(b,0,[2]);if(a.substr(0,2)!=="00"){throw"can't get signature value"}return a.substr(2)};X509.getSerialNumberHex=function(a){return ASN1HEX.getDecendantHexVByNthList(a,0,[0,1])};if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.jws=="undefined"||!KJUR.jws){KJUR.jws={}}KJUR.jws.JWS=function(){var a=KJUR.jws.JWS;this.parseJWS=function(e,g){if(this.parsedJWS!==undefined&&(g||this.parsedJWS.sigvalH!==undefined)){return}if(e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/)==null){throw"JWS signature is not a form of 'Head.Payload.SigValue'."}var h=RegExp.$1;var c=RegExp.$2;var i=RegExp.$3;var k=h+"."+c;this.parsedJWS={};this.parsedJWS.headB64U=h;this.parsedJWS.payloadB64U=c;this.parsedJWS.sigvalB64U=i;this.parsedJWS.si=k;if(!g){var f=b64utohex(i);var d=parseBigInt(f,16);this.parsedJWS.sigvalH=f;this.parsedJWS.sigvalBI=d}var b=b64utoutf8(h);var j=b64utoutf8(c);this.parsedJWS.headS=b;this.parsedJWS.payloadS=j;if(!a.isSafeJSONString(b,this.parsedJWS,"headP")){throw"malformed JSON string for JWS Head: "+b}}};KJUR.jws.JWS.sign=function(a,i,c,m,l){var k=KJUR.jws.JWS;var q,e,j;if(typeof i!="string"&&typeof i!="object"){throw"spHeader must be JSON string or object: "+i}if(typeof i=="object"){e=i;q=JSON.stringify(e)}if(typeof i=="string"){q=i;if(!k.isSafeJSONString(q)){throw"JWS Head is not safe JSON string: "+q}e=k.readSafeJSONString(q)}j=c;if(typeof c=="object"){j=JSON.stringify(c)}if((a==""||a==null)&&e.alg!==undefined){a=e.alg}if(a!=""&&a!=null&&e.alg===undefined){e.alg=a;q=JSON.stringify(e)}if(a!==e.alg){throw"alg and sHeader.alg doesn't match: "+a+"!="+e.alg}var d=null;if(k.jwsalg2sigalg[a]===undefined){throw"unsupported alg name: "+a}else{d=k.jwsalg2sigalg[a]}var b=utf8tob64u(q);var g=utf8tob64u(j);var o=b+"."+g;var n="";if(d.substr(0,4)=="Hmac"){if(m===undefined){throw"mac key shall be specified for HS* alg"}var h=new KJUR.crypto.Mac({alg:d,prov:"cryptojs",pass:m});h.updateString(o);n=h.doFinal()}else{if(d.indexOf("withECDSA")!=-1){var p=new KJUR.crypto.Signature({alg:d});p.init(m,l);p.updateString(o);hASN1Sig=p.sign();n=KJUR.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)}else{if(d!="none"){var p=new KJUR.crypto.Signature({alg:d});p.init(m,l);p.updateString(o);n=p.sign()}}}var f=hextob64u(n);return o+"."+f};KJUR.jws.JWS.verify=function(p,t,j){var m=KJUR.jws.JWS;var q=p.split(".");var d=q[0];var l=q[1];var b=d+"."+l;var r=b64utohex(q[2]);var i=m.readSafeJSONString(b64utoutf8(q[0]));var h=null;var s=null;if(i.alg===undefined){throw"algorithm not specified in header"}else{h=i.alg;s=h.substr(0,2)}if(j!=null&&Object.prototype.toString.call(j)==="[object Array]"&&j.length>0){var c=":"+j.join(":")+":";if(c.indexOf(":"+h+":")==-1){throw"algorithm '"+h+"' not accepted in the list"}}if(h!="none"&&t===null){throw"key shall be specified to verify."}if(typeof t=="string"&&t.indexOf("-----BEGIN ")!=-1){t=KEYUTIL.getKey(t)}if(s=="RS"||s=="PS"){if(!(t instanceof RSAKey)){throw"key shall be a RSAKey obj for RS* and PS* algs"}}if(s=="ES"){if(!(t instanceof KJUR.crypto.ECDSA)){throw"key shall be a ECDSA obj for ES* algs"}}if(h=="none"){}var n=null;if(m.jwsalg2sigalg[i.alg]===undefined){throw"unsupported alg name: "+h}else{n=m.jwsalg2sigalg[h]}if(n=="none"){throw"not supported"}else{if(n.substr(0,4)=="Hmac"){var k=null;if(t===undefined){throw"hexadecimal key shall be specified for HMAC"}var g=new KJUR.crypto.Mac({alg:n,pass:t});g.updateString(b);k=g.doFinal();return r==k}else{if(n.indexOf("withECDSA")!=-1){var f=null;try{f=KJUR.crypto.ECDSA.concatSigToASN1Sig(r)}catch(o){return false}var e=new KJUR.crypto.Signature({alg:n});e.init(t);e.updateString(b);return e.verify(f)}else{var e=new KJUR.crypto.Signature({alg:n});e.init(t);e.updateString(b);return e.verify(r)}}}};KJUR.jws.JWS.parse=function(g){var c=g.split(".");var b={};var f,e,d;if(c.length!=2&&c.length!=3){throw"malformed sJWS: wrong number of '.' splitted elements"}f=c[0];e=c[1];if(c.length==3){d=c[2]}b.headerObj=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(f));b.payloadObj=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(e));b.headerPP=JSON.stringify(b.headerObj,null,"  ");if(b.payloadObj==null){b.payloadPP=b64utoutf8(e)}else{b.payloadPP=JSON.stringify(b.payloadObj,null,"  ")}if(d!==undefined){b.sigHex=b64utohex(d)}return b};KJUR.jws.JWS.verifyJWT=function(d,j,l){var h=KJUR.jws.JWS;var i=d.split(".");var c=i[0];var g=i[1];var m=c+"."+g;var k=b64utohex(i[2]);var f=h.readSafeJSONString(b64utoutf8(c));var e=h.readSafeJSONString(b64utoutf8(g));if(f.alg===undefined){return false}if(l.alg===undefined){throw"acceptField.alg shall be specified"}if(!h.inArray(f.alg,l.alg)){return false}if(e.iss!==undefined&&typeof l.iss==="object"){if(!h.inArray(e.iss,l.iss)){return false}}if(e.sub!==undefined&&typeof l.sub==="object"){if(!h.inArray(e.sub,l.sub)){return false}}if(e.aud!==undefined&&typeof l.aud==="object"){if(typeof e.aud=="string"){if(!h.inArray(e.aud,l.aud)){return false}}else{if(typeof e.aud=="object"){if(!h.includedArray(e.aud,l.aud)){return false}}}}var b=KJUR.jws.IntDate.getNow();if(l.verifyAt!==undefined&&typeof l.verifyAt==="number"){b=l.verifyAt}if(l.gracePeriod===undefined||typeof l.gracePeriod!=="number"){l.gracePeriod=0}if(e.exp!==undefined&&typeof e.exp=="number"){if(e.exp+l.gracePeriod<b){return false}}if(e.nbf!==undefined&&typeof e.nbf=="number"){if(b<e.nbf-l.gracePeriod){return false}}if(e.iat!==undefined&&typeof e.iat=="number"){if(b<e.iat-l.gracePeriod){return false}}if(e.jti!==undefined&&l.jti!==undefined){if(e.jti!==l.jti){return false}}if(!KJUR.jws.JWS.verify(d,j,l.alg)){return false}return true};KJUR.jws.JWS.includedArray=function(b,a){var d=KJUR.jws.JWS.inArray;if(b===null){return false}if(typeof b!=="object"){return false}if(typeof b.length!=="number"){return false}for(var c=0;c<b.length;c++){if(!d(b[c],a)){return false}}return true};KJUR.jws.JWS.inArray=function(d,b){if(b===null){return false}if(typeof b!=="object"){return false}if(typeof b.length!=="number"){return false}for(var c=0;c<b.length;c++){if(b[c]==d){return true}}return false};KJUR.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"};KJUR.jws.JWS.isSafeJSONString=function(c,b,d){var e=null;try{e=jsonParse(c);if(typeof e!="object"){return 0}if(e.constructor===Array){return 0}if(b){b[d]=e}return 1}catch(a){return 0}};KJUR.jws.JWS.readSafeJSONString=function(b){var c=null;try{c=jsonParse(b);if(typeof c!="object"){return null}if(c.constructor===Array){return null}return c}catch(a){return null}};KJUR.jws.JWS.getEncodedSignatureValueFromJWS=function(a){if(a.match(/^[^.]+\.[^.]+\.([^.]+)$/)==null){throw"JWS signature is not a form of 'Head.Payload.SigValue'."}return RegExp.$1};KJUR.jws.JWS.getJWKthumbprint=function(d){if(d.kty!=="RSA"&&d.kty!=="EC"&&d.kty!=="oct"){throw"unsupported algorithm for JWK Thumprint"}var a="{";if(d.kty==="RSA"){if(typeof d.n!="string"||typeof d.e!="string"){throw"wrong n and e value for RSA key"}a+='"e":"'+d.e+'",';a+='"kty":"'+d.kty+'",';a+='"n":"'+d.n+'"}'}else{if(d.kty==="EC"){if(typeof d.crv!="string"||typeof d.x!="string"||typeof d.y!="string"){throw"wrong crv, x and y value for EC key"}a+='"crv":"'+d.crv+'",';a+='"kty":"'+d.kty+'",';a+='"x":"'+d.x+'",';a+='"y":"'+d.y+'"}'}else{if(d.kty==="oct"){if(typeof d.k!="string"){throw"wrong k value for oct(symmetric) key"}a+='"kty":"'+d.kty+'",';a+='"k":"'+d.k+'"}'}}}var b=rstrtohex(a);var c=KJUR.crypto.Util.hashHex(b,"sha256");var e=hextob64u(c);return e};KJUR.jws.IntDate={};KJUR.jws.IntDate.get=function(a){if(a=="now"){return KJUR.jws.IntDate.getNow()}else{if(a=="now + 1hour"){return KJUR.jws.IntDate.getNow()+60*60}else{if(a=="now + 1day"){return KJUR.jws.IntDate.getNow()+60*60*24}else{if(a=="now + 1month"){return KJUR.jws.IntDate.getNow()+60*60*24*30}else{if(a=="now + 1year"){return KJUR.jws.IntDate.getNow()+60*60*24*365}else{if(a.match(/Z$/)){return KJUR.jws.IntDate.getZulu(a)}else{if(a.match(/^[0-9]+$/)){return parseInt(a)}}}}}}}throw"unsupported format: "+a};KJUR.jws.IntDate.getZulu=function(l){var k;if(k=l.match(/(\d+)(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)Z/)){var b=RegExp.$1;var i=parseInt(b);if(b.length==4){}else{if(b.length==2){if(50<=i&&i<100){i=1900+i}else{if(0<=i&&i<50){i=2e3+i}else{throw"malformed year string for UTCTime"}}}else{throw"malformed year string"}}var g=parseInt(RegExp.$2)-1;var j=parseInt(RegExp.$3);var c=parseInt(RegExp.$4);var e=parseInt(RegExp.$5);var f=parseInt(RegExp.$6);var h=new Date(Date.UTC(i,g,j,c,e,f));return~~(h/1e3)}throw"unsupported format: "+l};KJUR.jws.IntDate.getNow=function(){var a=~~(new Date/1e3);return a};KJUR.jws.IntDate.intDate2UTCString=function(a){var b=new Date(a*1e3);return b.toUTCString()};KJUR.jws.IntDate.intDate2Zulu=function(e){var i=new Date(e*1e3);var h=("0000"+i.getUTCFullYear()).slice(-4);var g=("00"+(i.getUTCMonth()+1)).slice(-2);var b=("00"+i.getUTCDate()).slice(-2);var a=("00"+i.getUTCHours()).slice(-2);var c=("00"+i.getUTCMinutes()).slice(-2);var f=("00"+i.getUTCSeconds()).slice(-2);return h+g+b+a+c+f+"Z"};if(typeof KJUR=="undefined"||!KJUR){KJUR={}}if(typeof KJUR.jws=="undefined"||!KJUR.jws){KJUR.jws={}}KJUR.jws.JWSJS=function(){var b=KJUR.jws.JWS;var a=KJUR.jws.JWS;this.aHeader=[];this.sPayload="";this.aSignature=[];this.init=function(){this.aHeader=[];this.sPayload=undefined;this.aSignature=[]};this.initWithJWS=function(d){this.init();var c=d.split(".");if(c.length!=3){throw"malformed input JWS"}this.aHeader.push(c[0]);this.sPayload=c[1];this.aSignature.push(c[2])};this.addSignature=function(c,f,k,i){if(this.sPayload===undefined||this.sPayload===null){throw"there's no JSON-JS signature to add."}var j=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length){throw"aHeader.length != aSignature.length"}try{var d=KJUR.jws.JWS.sign(c,f,this.sPayload,k,i);var h=d.split(".");var l=h[0];var e=h[2];this.aHeader.push(h[0]);this.aSignature.push(h[2])}catch(g){if(this.aHeader.length>j){this.aHeader.pop()}if(this.aSignature.length>j){this.aSignature.pop()}throw"addSignature failed: "+g}};this.addSignatureByHeaderKey=function(f,c){var e=b64utoutf8(this.sPayload);var d=new KJUR.jws.JWS;var g=d.generateJWSByP1PrvKey(f,e,c);this.aHeader.push(d.parsedJWS.headB64U);this.aSignature.push(d.parsedJWS.sigvalB64U)};this.addSignatureByHeaderPayloadKey=function(f,e,c){var d=new KJUR.jws.JWS;var g=d.generateJWSByP1PrvKey(f,e,c);this.aHeader.push(d.parsedJWS.headB64U);this.sPayload=d.parsedJWS.payloadB64U;this.aSignature.push(d.parsedJWS.sigvalB64U)};this.verifyAll=function(f){if(this.aHeader.length!==f.length||this.aSignature.length!==f.length){return false}for(var e=0;e<f.length;e++){var d=f[e];if(d.length!==2){return false}var c=this.verifyNth(e,d[0],d[1]);if(c===false){return false}}return true};this.verifyNth=function(d,h,e){if(this.aHeader.length<=d||this.aSignature.length<=d){return false}var f=this.aHeader[d];var i=this.aSignature[d];var j=f+"."+this.sPayload+"."+i;var c=false;try{c=a.verify(j,h,e)}catch(g){return false}return c};this.verifyWithCerts=function(d){if(this.aHeader.length!=d.length){throw"num headers does not match with num certs"}if(this.aSignature.length!=d.length){throw"num signatures does not match with num certs"}var l=this.sPayload;var h="";for(var e=0;e<d.length;e++){var f=d[e];var g=this.aHeader[e];var n=this.aSignature[e];var c=g+"."+l+"."+n;var k=new KJUR.jws.JWS;try{var m=k.verifyJWSByPemX509Cert(c,f);if(m!=1){h+=e+1+"th signature unmatch. "}}catch(j){h+=e+1+"th signature fail("+j+"). "}}if(h==""){return 1}else{throw h}};this.readJWSJS=function(e){if(typeof e==="string"){var d=b.readSafeJSONString(e);if(d==null){throw"argument is not safe JSON object string"}this.aHeader=d.headers;this.sPayload=d.payload;this.aSignature=d.signatures}else{try{if(e.headers.length>0){this.aHeader=e.headers}else{throw"malformed header"}if(typeof e.payload==="string"){this.sPayload=e.payload}else{throw"malformed signatures"}if(e.signatures.length>0){this.signatures=e.signatures}else{throw"malformed signatures"}}catch(c){throw"malformed JWS-JS JSON object: "+c}}};this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}};this.isEmpty=function(){if(this.aHeader.length==0){return 1}return 0}};Object.defineProperty(window,"w3n",{value:{},enumerable:true});Object.defineProperty(w3n,"models",{value:{},enumerable:true});Object.defineProperty(w3n,"components",{value:{},enumerable:true});Object.defineProperty(w3n,"services",{value:{},enumerable:true});Object.defineProperty(w3n,"cogs",{value:{},enumerable:true});Object.defineProperty(w3n,"requesters",{value:{},enumerable:true});Object.defineProperty(w3n,"adapters",{value:{},enumerable:true});Object.defineProperty(w3n,"dropdowns",{value:[],enumerable:true});Object.defineProperty(w3n,"forms",{value:[],enumerable:true});Object.defineProperty(w3n,"tabs",{value:[],enumerable:true});Object.defineProperty(w3n,"carousels",{value:[],enumerable:true});Object.defineProperty(w3n,"coach_mark",{value:[],enumerable:true});(function(){w3n.env={};var keys=["live","stage","dev"],env="dev";if(awf.util.url_params.live=="true"){env="live"}else if(awf.util.url_params.stage=="true"){env="stage"}else{var domain=window.location.host;switch(domain.toLowerCase()){case"w3.ibm.com":env="live";break;case"w3-pre.ibm.com":env="stage";break}}_.forEach(keys,function(key){w3n.env["is_"+key]=key===env});_.extend(awf.__.FeatureToggler.handlers,{environment:{check:function(label){if(typeof label=="string"){label=[label]}return _.contains(label,_.findKey(w3n.env).substring(3))}}})})();(function($){$.event.special.destroyed={remove:function(o){if(o.handler){o.handler()}}}})(jQuery);(function(){w3n.browser={chrome:false,safari:false,firefox:false,ie:false};w3n.browser.version=null;var ua=navigator.userAgent;function between(haystack,needle1,needle2){var ret=haystack.substring(haystack.indexOf(needle1)+needle1.length);return ret.substring(0,ret.indexOf(needle2))}if(ua.indexOf("Safari")>-1){if(ua.indexOf("Chrome")>-1){w3n.browser.chrome=true;w3n.browser.version=parseInt(between(ua,"Chrome/","."),10)}else{w3n.browser.safari=true;w3n.browser.version=parseInt(between(ua,"Version/","."),10)}}if(ua.indexOf("Firefox")>-1){w3n.browser.firefox=true;w3n.browser.version=parseInt(between(ua,"Firefox/","."),10)}var ind=navigator.appVersion.indexOf("MSIE ");if(ind>-1){w3n.browser.ie=true;w3n.browser.version=parseInt(between(navigator.appVersion," MSIE ","."),10)}var ind_ie11=navigator.appVersion.indexOf("Trident");if(ind_ie11>-1){w3n.browser.ie=true;w3n.browser.version=parseInt(between(navigator.appVersion," Trident/","."),10)}})();(function(){w3n.base=w3n.base||{};w3n.base.defineHtmlAccessors=function(obj,data,primitives){var keys_obj={};_.keys(data,function(key){if(_.find(primitives,function(p){return p==key})){keys_obj[key]={value:data[key]||"",onset:function(new_value){primitives[key].html(new_value)}}}});awf.mixinGetSet(obj,keys_obj)};w3n.base.viewHelpers={};w3n.base.viewHelpers.message="";w3n.base.viewHelpers.render=function(localRenderFunction){if(this.authRequired()){this.showLogin()}if(this.request.error()){this.showErrorMessage()}if(!this.model.loaded){this.showLoading()}localRenderFunction.call(this);this.broadcast("rendered")};w3n.base.viewHelpers.showLoading=function($container){if(!this.$loading){this.$loading=w3n.base.loaderElement}$container.prepend(this.$loading);this.$loading.show()};w3n.base.viewHelpers.hideLoading=function(){this.$loading.hide()};w3n.base.viewHelpers.showError=function($container){if(!this.$error){this.$error=w3n.base.errorElement("")}$container.prepend($error)};w3n.base.viewHelpers.hideError=function(){this.$error.hide()};w3n.base.viewHelpers.showLogin=function($container){};w3n.base.viewHelpers.hideLogin=function($container){if(this.$login){this.$login.hide()}};w3n.login_mode="automatic"})();(function(){var megaMenuProc={experience:"ibmer-hub",setup:function($container,dfr){this.spinner=new awf.ui.Spinner({parent:$container});var ecmMegaMenus=new app.serviceModels.megaMenus.ECMih;ecmMegaMenus.fetch().done(function(response){var testmegamenuih=app.utils.urlParam("testmegamenuih");var srvmegamenuih=app.utils.urlParam("srvmegamenuih");var useStaticDataIh=awf.flags.isActive("experiences.ibmer-hub.megamenu_static_data");var jsonResult;var jsonParser;if(response!==null&&typeof response==="object"){if(testmegamenuih||srvmegamenuih){if(testmegamenuih){jsonResult=JSON.stringify(response)}else{jsonResult=parseECMihResponseToMegaMenuFormat(response)}}else if(useStaticDataIh){jsonResult=JSON.stringify(response)}else{jsonResult=parseECMihResponseToMegaMenuFormat(response)}jsonParser=JSON.parse(jsonResult)}dfr.resolve(jsonParser)}.bind(this)).fail(function(er){console.warn("Fetch MegaMenu ibmer hub data failed.");dfr.reject(er)}.bind(this))},render:function($container,data){if(this.spinner){this.spinner.destroy()}this.megamenu=new awf.ui.Megamenu({parent:$container,label:"Ibmer Hub Megamenu",icon:"icon-awf-chevron-down-heavy",i18n:{label:"app.megamenu"},json:data})},destroy:function($container){if(this.megamenu){this.megamenu.destroy()}},error:function($container,er){if(this.spinner){this.spinner.destroy()}$container.append("<div class='-background-base' style='padding: 10px'><h2>Ibmer Hub Menu</h2><p>Oops ... the data is not available at this time. Please try again soon.</p>");console.error("Can't load MegaMenu ibmer hub: ",er)}};w3n.getMegaMenuExperiencesIh=function(){return megaMenuProc}})();(function(){var megaMenuProc={experience:"manager-hub",setup:function($container,dfr){this.spinner=new awf.ui.Spinner({parent:$container});var ecmMegaMenus=new app.serviceModels.megaMenus.ECMmh;ecmMegaMenus.fetch().done(function(response){var jsonResult;var jsonParser;if(response!==null&&typeof response==="object"){if(!app.utils.urlParam("testmegamenumh")){jsonResult=parseECMmhResponseToMegaMenuFormat(response)}else{jsonResult=JSON.stringify(response)}jsonParser=JSON.parse(jsonResult)}dfr.resolve(jsonParser)}.bind(this)).fail(function(er){console.warn("Fetch MegaMenus manager hub data failed.");dfr.reject(er)}.bind(this))},render:function($container,data){if(this.spinner){this.spinner.destroy()}this.megamenu=new awf.ui.Megamenu({parent:$container,label:"Manager Hub Megamenu",icon:"icon-awf-chevron-down-heavy",i18n:{label:"app.megamenu"},json:data})},destroy:function($container){if(this.megamenu){this.megamenu.destroy()}},error:function($container,er){if(this.spinner){this.spinner.destroy()}$container.append("<div class='-background-base' style='padding: 10px'><h2>Manager Hub Menu</h2><p>Oops ... the data is not available at this time. Please try again soon.</p>");console.error("Can't load MegaMenu manager hub: ",er)}};w3n.getMegaMenuExperiencesMh=function(){return megaMenuProc};function isJSON(str){try{JSON.parse(str)}catch(e){return false}return true}})();(function(){var megaMenuProc={experience:"manager-hub-protean",setup:function($container,dfr){this.spinner=new awf.ui.Spinner({parent:$container});var ecmMegaMenus=new app.serviceModels.megaMenus.ecm;ecmMegaMenus.fetch().done(function(response){var jsonResult;var jsonParser;if(response!==null&&typeof response==="object"){jsonResult=parseECMResponseToMegaMenuFormat(response);jsonParser=JSON.parse(jsonResult)}dfr.resolve(jsonParser)}.bind(this)).fail(function(er){console.warn("Fetch MegaMenus data failed.");dfr.reject(er)}.bind(this))},render:function($container,data){if(this.spinner){this.spinner.destroy()}this.megamenu=new awf.ui.Megamenu({parent:$container,label:"Manager Hub Megamenu",icon:"icon-awf-chevron-down-heavy",i18n:{label:"app.megamenu"},json:data})},destroy:function($container){if(this.megamenu){this.megamenu.destroy()}},error:function($container,er){if(this.spinner){this.spinner.destroy()}$container.append("<div class='-background-base' style='padding: 10px'><h2>Manager Hub Menu</h2><p>Oops ... the data is not available at this time. Please try again soon.</p>");console.error("Can't load megamenu: ",er)}};w3n.getMegaMenuExperiences=function(){return megaMenuProc}})();(function(){w3n.utils={browser:{},data:{},date:{},metrics:{},redirect:{}};var utils={};utils.urlParams=function(){var querystring=window.location.search.substr(1);return querystring.split("&").map(function(query){return query.indexOf("=")!==-1?{param:query.split("=")[0],value:query.split("=")[1]}:{param:query,value:true}})};utils.urlParam=function(param){return utils.urlParams().filter(function(query){return query.param===param})[0].value};utils.outerHtml=function($el){
return $("<div/>").append($el).html()};utils.compileTemplate=function($el,data){var htmlString=utils.outerHtml($el);var compiled=_.template(htmlString);return $(compiled(data))};utils.sametimeStatus={available:{text:"Available"},away:{text:"Away"},meeting:{text:"Meeting"},dnd:{text:"Do not disturb"},availableMobile:{text:"Available",type:"mobile"},awayMobile:{text:"Away",type:"mobile"},meetingMobile:{text:"Meeting",type:"mobile"},dndMobile:{text:"Do not disturb",type:"mobile"},offline:{text:"Offline"}};utils.toProperCase=function(txt){return txt.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})};utils.parseCallupName=function(name){if(!name){return false}var delimiter=name.indexOf(",")>=0?",":" ";var lastNameIndex=name.indexOf(",")>=0?0:1;var firstNameIndex=name.indexOf(",")>=0?1:0;var arrName=name.split(delimiter);if(arrName.length===1)return name;var lastname=arrName[lastNameIndex]?arrName[lastNameIndex].trim():"",firstname=arrName[firstNameIndex]?arrName[firstNameIndex].trim():"";var toProperCase=utils.toProperCase;firstname=firstname.indexOf(" ")>=0?firstname.split(" ")[0]:firstname;lastname=lastname.indexOf(" ")>=0?lastname.split(" ")[0]:lastname;return(firstname.length>3?toProperCase(firstname):firstname)+" "+toProperCase(lastname)};utils.showLoading=function($el){if($el.find(".loading").length===0){$el.append(w3n.base.loaderString)}$el.find(".loading").show()};utils.hideLoading=function($el){$el.find(".loading").hide()};utils.sametimeDomain=function(){return window.location.protocol==="https:"?"http://localhost:59449":"http://localhost:59449"};utils.loadIframe=function(url,params,successCallback,failureCallback){if(!url){console.error("url param is required for this function.");return false}var defaults={debug:false,timeout:15,removeIframeAfterSuccess:false};var $iframe,timer,onload,$deferred=$.Deferred(),options=_.extend({},defaults,typeof params==="object"&&params);options.timeout=options.timeout*1e3;params=params||{};onload=params.onload||null;if(options.debug){console.log("utils.js -> loadIframe url",url);console.log("utils.js -> loadIframe options",options)}$iframe=$('<iframe src="'+url+'" style="position: absolute; left: -99999px; top:-99999px; z-index:1; height: 1px; width: 1px;">');var timeoutFailure=function(){clearTimeout(timer);if(options.debug){console.log("utils.js -> timeoutFailure failureCallback")}if(typeof failureCallback==="function"){failureCallback()}$deferred.reject()};timer=setTimeout(function(){timeoutFailure()},options.timeout);if(onload){var onload_timer=0;$iframe[0].onload=function(){if(!timer||timer>=options.timeout){return false}if(options.debug){console.log("utils.js -> $iframe.load timer",timer);console.log("utils.js -> $iframe.load successCallback")}if(onload_timer){clearTimeout(onload_timer)}onload_timer=setTimeout(function(){if(options.debug){console.log("onload_timer -> iframe.onload call successCallback")}clearTimeout(timer);successCallback();if(options.removeIframeAfterSuccess){$iframe.remove()}},2e3);$deferred.resolve($iframe)}}else{$iframe.load(function(){if(!timer||timer>=options.timeout){return false}clearTimeout(timer);if(options.removeIframeAfterSuccess){$iframe.remove()}if(options.debug){console.log("utils.js -> $iframe.load timer",timer);console.log("utils.js -> $iframe.load successCallback")}if(typeof successCallback==="function"){successCallback()}$deferred.resolve($iframe)})}$("body").append($iframe);return $deferred.promise()};utils.isMobile=function(){return _.find(_.toArray(awf.util.info.mobile),function(val){return val===true})||false};utils.noDataResponse=function(response){return response.status===404&&response.statusText==="Not Found"||response.status===400};utils.flipCard=function(id){var flipcard=null;if(awf.main_grid.hasItem(id))flipcard=awf.main_grid.getItem(id).getComponentsWithinContainer("content")[0];else if(awf.mini_grid.hasItem(id))flipcard=awf.mini_grid.getItem(id).getComponentsWithinContainer("content")[0];if(flipcard){flipcard.setFlipped(true);return flipcard}return false};utils.getErrorType=function(response){var noDataError="service-error:no-data";var ssoError="service-error:sso-error";var apiError="service-error:api-error";if(response.readyState===4&&(response.statusText==="error"||response.statusText==="Not Found")){if(response.status>=400&&response.status<500){return noDataError}if(response.status>=500&&response.status<600){return apiError}}if(response.status===0&&response.source==="SSO Service"){return ssoError}else{return apiError}};utils.categories=[{key:"EMAIL_ONLY",id:"0",description:"e-Mail Only",icon:""},{key:"ALL",id:"1",description:"All categories",icon:"icon-awf-lock-key-thin"},{key:"AWARDS",id:"2",description:"Awards & Recognition",icon:"icon-youribm-award-ribbons"},{key:"BCG",id:"3",description:"BCG + Values",icon:"icon-awf-w3-certificate-thin"},{key:"BTL",id:"4",description:"Leadership",icon:"icon-youribm-avatar-star"},{key:"COMPENSATION",id:"5",description:"Compensation",icon:"icon-youribm-compensation-circle"},{key:"PBC",id:"6",description:"Performance",icon:"icon-youribm-chart-bar"},{key:"SECURITY",id:"7",description:"Security & Passwords",icon:"icon-awf-lock-key-thin"},{key:"EXPENSES",id:"8",description:"Expenses",icon:"icon-youribm-expenses"},{key:"YOUR-TEAM",id:"9",description:"Your Team",icon:"icon-awf-team"},{key:"EXPERTISE",id:"10",description:"Expertise & Learning",icon:"icon-youribm-graduation-cap"},{key:"LEARNING",id:"11",description:"Unused",icon:""},{key:"BENEFITS",id:"12",description:"Benefits, Health & Safety",icon:"icon-youribm-box-closed-glow"},{key:"ASSETS",id:"13",description:"Assets & Devices",icon:"icon-awf-devices-thin"},{key:"DATES",id:"14",description:"Dates",icon:"icon-youribm-calendar-check"},{key:"DIVERSITY",id:"15",description:"Diversity & Community",icon:"icon-youribm-diversity"},{key:"EMERGENCY",id:"16",description:"Emergency",icon:"icon-youribm-emergency"},{key:"MOBILITY",id:"17",description:"Global Mobility",icon:"icon-awf-international-thin"},{key:"JOBS",id:"18",description:"Jobs & On/Off-Boarding",icon:"icon-youribm-avatar-briefcase"},{key:"TIME-HERE-AWAY",id:"19",description:"Time Here & Away",icon:"icon-youribm-clock-inbox"},{key:"TRAVEL",id:"20",description:"Travel",icon:"icon-youribm-airplane"}];utils.addParams=function(params){var skipArray=[],urlString="";_.each(params,function(value,key){if(skipArray.indexOf(key)!==-1||typeof value==="undefined"||typeof value==="function"){return}if(typeof value==="object"){value=JSON.stringify(value)}urlString+=key+"="+value+"&"});return"?"+urlString.substring(0,urlString.length-1)};utils.hasKeys=function(obj,keys){return keys.every(function(key){return Object.keys(obj).indexOf(key)!==-1})};utils.getInitials=function(name){return name.split(" ").map(function(s){return s.charAt(0)}).join("").substring(0,2)};utils.hasI18nTag=function(path){return"i18next"in window&&awf&&awf.i18n&&awf.i18n.languages.length&&i18next.t(path)!=path};utils.getCurrentI18nLngNs=function(){if(awf.i18n.languages.length){return awf.i18n.lng+"-"+awf.i18n.ns}return false};utils.filterBy=function(data,options){options=options||{};var fields=options.fields,chars=options.chars;if(fields&&fields.length>0){_.forEach(fields,function(key){var temp='(?:^|[,;])"'+key+'":"([^";]+)',regex=new RegExp(temp,"g"),matches=[],results=[];while((matches=regex.exec(data))!==null){results.push(matches[1])}_.forEach(results,function(item){if(chars&&chars.length>0){_.forEach(chars,function(value){var regex=new RegExp(value,"g"),str=item.replace(regex,"");data=data.replace(item,str)})}})})}return data};utils.JSONToCSVConvertor=function(JSONData,ReportTitle,ShowLabel,message){var arrData=typeof JSONData!="object"?JSON.parse(JSONData):JSONData;var fileName=ReportTitle;var currentTime=new Date;var d=currentTime.getDate();var m=currentTime.getMonth()+1;var y=currentTime.getFullYear();m=m>9?m:"0"+m;d=d>9?d:"0"+d;fileName+="_"+y+"-"+m+"-"+d;var CSV="sep=,\r\n";CSV+=fileName+".csv ("+message+")\r\n\n";if(ShowLabel){var row="";var selectedIndex=0;for(var x=0;x<arrData.length;x++){var indexPropLength=Object.keys(arrData[x]).length;if(indexPropLength>Object.keys(arrData[selectedIndex]).length)selectedIndex=x}for(var index in arrData[selectedIndex]){row+=index+","}row=row.slice(0,-1);CSV+=row+"\r\n"}for(var i=0;i<arrData.length;i++){var rowtwo="=";for(var indextwo in arrData[i]){rowtwo+='"'+arrData[i][indextwo]+'",'}rowtwo.slice(0,rowtwo.length-1);CSV+=rowtwo+"\r\n"}if(CSV===""){alert("Invalid data");return}var uri="data:application/csv;charset=utf-8,"+encodeURIComponent(CSV);if(awf.flags.isActive("cogs.talentplaybook.csv-new-download")){var GetIEVersion=function(){var sAgent=window.navigator.userAgent;var Idx=sAgent.indexOf("MSIE");if(Idx>0)return parseInt(sAgent.substring(Idx+5,sAgent.indexOf(".",Idx)));else if(!!navigator.userAgent.match(/Trident\/7\./))return 11;else return 0};if(GetIEVersion()>0){var IEwindow=window.open();IEwindow.document.write(CSV);IEwindow.document.close();IEwindow.document.execCommand("SaveAs",true,fileName+".csv");IEwindow.close()}else{var link_href=uri;var link_style="visibility:hidden";var link_download=fileName+".csv";$("body").append('<a id="csv_hidden_link" href="'+link_href+'" download="'+link_download+'" style="'+link_style+'">&nbsp;</a>');document.getElementById("csv_hidden_link").click();$("#csv_hidden_link").remove()}}else{var link=document.createElement("a");link.href=uri;link.style="visibility:hidden";link.download=fileName+".csv";document.body.appendChild(link);link.click();document.body.removeChild(link)}};_.extend(w3n.utils,utils)})();(function(){w3n.utils.browser.userAgent={chrome:false,safari:false,firefox:false,ie:false,version:null};var ua=navigator.userAgent;function between(haystack,needle1,needle2){var ret=haystack.substring(haystack.indexOf(needle1)+needle1.length);return ret.substring(0,ret.indexOf(needle2))}if(ua.indexOf("Safari")>-1){if(ua.indexOf("Chrome")>-1){w3n.utils.browser.userAgent.chrome=true;w3n.utils.browser.userAgent.version=parseInt(between(ua,"Chrome/","."),10)}else{w3n.utils.browser.userAgent.safari=true;w3n.utils.browser.userAgent.version=parseInt(between(ua,"Version/","."),10)}}if(ua.indexOf("Firefox")>-1){w3n.utils.browser.userAgent.firefox=true;w3n.utils.browser.userAgent.version=parseInt(between(ua,"Firefox/","."),10)}var ind=navigator.appVersion.indexOf("MSIE ");if(ind>-1){w3n.utils.browser.userAgent.ie=true;w3n.utils.browser.userAgent.version=parseInt(between(navigator.appVersion," MSIE ","."),10)}var ind_ie11=navigator.appVersion.indexOf("Trident");if(ind_ie11>-1){w3n.utils.browser.userAgent.ie=true;w3n.utils.browser.userAgent.version=parseInt(between(navigator.appVersion," Trident/","."),10)}w3n.utils.browser.supportsActiveX=function(){return"ActiveXObject"in window};if(!window.requestAnimationFrame){window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(callback){return window.setTimeout(callback,17)}}if(!window.cancelRequestAnimationFrame){window.cancelRequestAnimationFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout}})();(function(){var utils={};utils.getDn=function(dn){if(dn){var dnObject={},segs=dn.split(",");$.each(segs,function(){var s=this.split("=");dnObject[s[0]]=s[1]});return dnObject}};utils.getDnKey=function(dn){var dnObject=utils.getDn(dn);for(var key in dnObject){if(key!=="c"&&key!=="ou"&&key!=="o")return{key:key,value:dnObject[key]}}return false};utils.stringifyDn=function(dnObject){if(dnObject){var template=_.template("uid={{uid}},c={{c}},ou={{ou}},o={{o}}");return template(dnObject)}};utils.parseAttributeArray=function(attributes){var data={};$.each(attributes,function(){data[this.name.toLowerCase()]=this.value.length>1?this.value:this.value[0]});return data};utils.parseSlapHapiProfile=function(ibmPerson){var personAttributes={};$.each(ibmPerson.search.entry,function(){var attributes=utils.parseAttributeArray(this.attribute);personAttributes[utils.getDnKey(this.dn).value]={dn:this.dn,attributes:attributes}});personAttributes=_.map(personAttributes,"attributes");return personAttributes};utils.mixinManagerCNum=function(person,cnum){if(w3n.services.profile){w3n.services.profile.load(cnum).then(function(ibmPerson){var attributes=utils.parseSlapHapiProfile(ibmPerson);if(attributes[0]&&attributes[0].manager){var mgrDn=utils.getDn(attributes[0].manager);person.ManagerCnum=mgrDn.uid}})}};utils.scrubHTML=function(html_data,options){var parsedHTML=html_data;if(parsedHTML.indexOf("<![CDATA[")>=0){parsedHTML=parsedHTML.split("<![CDATA[")[1].split("]]>")[0]}if(parsedHTML.indexOf('<wm:mime_part charset="UTF-8">')>=0){parsedHTML=parsedHTML.split('<wm:mime_part charset="UTF-8">')[1].split("</wm:mime_part>")[0]}parsedHTML=$("<div/>").html(parsedHTML);var allowedTags=["p","div","a","ul","ol","li","table","tr","th","td","tbody","caption","h1","h2","h3","h4","h5","h6","font","span","b","br"];var allowedAttrs=["title","alt","href","target"];options=options||{includeTags:allowedTags,includeAttrs:allowedAttrs};var tags=_.intersection(options.includeTags,allowedTags).join(", ");var attrs=_.intersection(options.includeAttrs,allowedAttrs);$(parsedHTML).find(":not("+tags+")").remove();removeAllAttr($(parsedHTML).find("*"),attrs);parsedHTML=$(parsedHTML).prop("outerHTML");return parsedHTML};var removeAllAttr=function(elem,whitelist){elem.each(function(index,value){for(var i=value.attributes.length-1;i>=0;i--){if(whitelist.indexOf(value.attributes[i].name)===-1){$(value).removeAttr(value.attributes[i].name)}}});return elem};utils.talentplaybook={};utils.talentplaybook.supplementalFieldNames={cnum:"CNUM",firstName:" First Name",lastName:"Last Name",band:"Band",yearsInBand:"Years in Band",pbcYear1:"Date of PBC (current)",pbcYear2:"Date of PBC (previous)",pbcYear3:"Date of PBC (next previous)",careerFramework:"Career Framework",tldrType:"Leadership Chain",btl:"BTL",subBand:"Sub-Band",think40:"Think40",sexCode:"Gender",pmr:"PMR",lk:"Prescribed Learning Taken?",jobCategory:"Job Category",mppLevel:"Manages Projects & Programs",piiLevel:"Provides Industry Insight",iot:"IOT",promoEligible:"Promotion Eligible",pa:"Project Assessment",ptlrisk:"Potential to Leave Risk",country:"Country",email:"e-mail",currentPBC:"PBC (2015)",previousPBC:"PBC (2014)",priorPrevPBC:"PBC (2013)",rcnum:"CNUM",fundGroup:"Funding Group",level:"PDI Level",consIselling:"Consultative/Insight Selling",relaBuilding:"Relationship Building",busiDevelopt:"Business Development",salePerform:"Sales Performance",payFyseat:"Pay For Your Seat",devTalent:"Develop Talent",teamFirst:"Team First",contLearning:"Continous Learning",innAgility:"Innovation Agility",indExpertise:"Industry Expertise",domTpexpert:"Domain, Technical & Portfolio Expertise",segment:"Industry Segment",roleSpecialty:"Role Specialty",roleLevel:"Role Specialty Level"};_.extend(w3n.utils.data,utils)})();(function(){var utils={};utils.nextDay=function(date,dayOfWeek){var d=new Date(date);return new Date(d.setDate(d.getDate()+(7+dayOfWeek-d.getDay())%7))};utils.dateTimeReviver=function(key,value){var reISO=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/;if(typeof value==="string"){var a=reISO.exec(value);if(a)return new Date(value)}return value};utils.getMonth=function(month){month=parseInt(month);var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];return monthNames[month]};_.extend(w3n.utils.date,utils)})();(function(){var utils={};utils.tagCogEvent=function(eventType,action,section,module,name,target){var parameters;if(typeof eventType==="object")parameters=eventType;else parameters={ev:eventType,action:action,section:section,module:module,name:name,target:target,group:"YourIBM"};console.log("tagEvent: ",parameters);awf.tagMetric(parameters)};_.extend(w3n.utils.metrics,utils)})();(function(){var ignore_key="ignore-youribm-redirect";w3n.utils.redirect.ignoreRedirectToYourIBM=function(){localStorage.setItem(ignore_key,true);console.log("Redirect to the current home page will now be ignored.")};w3n.utils.redirect.allowRedirectToYourIBM=function(){localStorage.removeItem(ignore_key);console.log("Redirect to the current home page is no longer ignored. The logic will re-run on page load.")};w3n.utils.redirect.isRedirectToYourIBMIgnored=function(){return!!localStorage.getItem(ignore_key)};w3n.is_live=window.location.href.indexOf("live=true")>0||window.location.hostname=="w3.ibm.com"||window.location.hostname=="w3b.ibm.com"||window.location.hostname=="w3b-stage.ibm.com"||window.location.hostname=="w3-pre.ibm.com"})();(function(){w3n.base=w3n.base||{};var base_mark_function=function(){var self=this,show_effect=null,hide_effect=null,new_show_callback=null,new_hide_callback=null,animation_duration=null;self.def_duration="300";self.def_show_effect="fadeIn";self.def_hide_effect="fadeOut";self.showed_once=false;function isNotEmptyData(){if(!self.domain){console.log("isNotEmptyData - this domain is undefined.",self);return false}return app.localCache.getData(self.domain)}function setData(){if(!self.domain){console.log("setData - this domain is undefined.",self);return false}app.localCache.setData(self.domain,true);return true}function commonEffect(effect,duration,callback){animation_duration=duration||self.def_duration;return self.$el[effect](animation_duration,function(){if(callback){callback()}})}function show(effect,duration,callback){show_effect=effect||self.def_show_effect;if(callback||self.show_callback){new_show_callback=function(){if(callback){callback(self)}if(self.show_callback){self.show_callback(self)}}}self.showed_once=true;return commonEffect(show_effect,duration,new_show_callback)}function showOnce(effect,duration,callback){if(self.showed_once){console.log("show - the loading mark has been showed once.",self.$el);return false}if(isNotEmptyData()){console.log("show - the loading mark has been saved in local cache.",self.$el);return false}return show(effect,duration,callback)}function hide(effect,duration,callback){hide_effect=effect||self.def_hide_effect;if(callback||self.hide_callback){new_hide_callback=function(){if(callback){callback(self)}if(self.hide_callback_once&&self.hidden_callback_once){return false}if(self.hide_callback){self.hide_callback(self);if(!self.hidden_callback_once){self.hidden_callback_once=true}}}}if(self.showed_once&&!isNotEmptyData()){setData()}return commonEffect(hide_effect,duration,new_hide_callback)}function appendTo(wrap){self.$el.appendTo(wrap)}self.show=show;self.hide=hide;self.showOnce=showOnce;self.appendTo=appendTo;self.isNotEmptyData=isNotEmptyData};w3n.base.getBaseMark=function(){return base_mark_function};w3n.base.extendMark=function(component_function){return _.flowRight(w3n.base.getBaseMark(),component_function)}})();(function(){w3n.ajaxErrors=0;w3n.errorHandler=function(response){var self=this;var noDataError="service-error:no-data";var ssoError="service-error:sso-error";var apiError="service-error:api-error";self.is_error=false;if(app.config.check("component:error-handler")){if(response){response.always(function(){if(response.readyState===4&&(response.statusText==="error"||response.statusText==="Not Found")){self.is_error=true;console.log("got ready state 4 from error handler");if(response.status>=400&&response.status<500){if(self.broadcast)self.broadcast(noDataError)}if(response.status>=500&&response.status<600){if(self.broadcast)self.broadcast(apiError)}}if(response.status===0&&response.source==="SSO Service"){if(self.broadcast)self.broadcast(ssoError)}else{if(self.broadcast)self.broadcast(apiError)}})}}};w3n.base=w3n.base||{};w3n.base.errorTemplate=_.template('<div class="msg_error"> <i class="icon-awf-alert-triangle-fill"></i> <span>Error:</span> Oops, the service {{title}} is currently not available. Please refresh the page and try it later.</div>');w3n.base.errorElement=function(title){if(this.title){title=this.title}if(title.toString().length<1){title=""}return $(this.errorTemplate({title:title}))};var base_model_function=function(params){params=params||{};var self=this;self.data={};self.urlParams={};self.serviceName="";self.requested=false;self.loaded=false;self.name="";self.errorHandler=w3n.errorHandler;self.load=function(){self.requested=true;self.urlParams.callback=awf.createCallback(self.callback);var response=w3n.services[self.serviceName].load(self.urlParams);self.errorHandler(response);return response};self.normalize=function(data){return data};self.loadOnce=function(){if(!self.requested){self.load()}self.broadcast("change")};self.callback=function(data){console.log(data);if(_.isEmpty(data)){self.broadcast(noDataError)}self.data=self.normalize(data);self.loaded=true;self.broadcast("change");self.broadcast("loaded")};self.changeStatus=function(status){if(self.status===status){return false}if(self.attributes.debug){console.log(self.name+"-model.js -> changeStatus status:",status)}self.status=status;self.broadcast("status:change",self.status);self.broadcast("change")};self.notAuthenticated=function(){self.changeStatus("notAuthenticated")};self.loaderString=w3n.base.loaderString;self.loaderElement=w3n.base.loaderElement;self.errorMessage=w3n.base.errorTemplate({title:self.name});self.useCachedData=function(uid,skipBroadcast){self.info=JSON.parse(localStorage.getItem(uid),w3n.utils.date.dateTimeReviver);if(self.info&&self.info.length>0){_.delay(function(){self.info.hasLoaded=true;if(!skipBroadcast)self.broadcast("load-cache")},1)}}};w3n.base.getBaseModel=function(){return base_model_function};w3n.base.extendModel=function(model_function){return _.flow(w3n.base.getBaseModel(),model_function)}})();(function(){var proxy={dev:"/test/proxy-test",prod:"/proxy"};w3n.connections={user_id:null,user_email:null,is_authenticated:false,proxy:w3n.env.is_live||w3n.env.is_stage?proxy.prod:proxy.dev,apis:{status:{def:"/common/opensocial/rest/activitystreams/@me/@all/@status?rollup=true&count=50",getAll:"/common/opensocial/rest/activitystreams/@me/@all/@status?rollup=true&count=50",getMyNetworkAndPeopleIFollow:"/common/opensocial/rest/activitystreams/@me/@following&@friends/@status?rollup=true&count=50",getMyNetwork:"/common/opensocial/rest/activitystreams/@me/@friends/@status?rollup=true&count=50",getPeopleIFollow:"/common/opensocial/rest/activitystreams/@me/@following/@status?rollup=true&count=50",getMyUpdates:"/common/opensocial/rest/activitystreams/@me/@self/@status?rollup=true&count=50",getCommunities:"/common/opensocial/rest/activitystreams/@me/@all/communities?rollup=true&broadcast=true",getComments:"/common/opensocial/rest/ublog/@all/@all/{{entryID}}/comments?sortBy=published&sortOrder=descending&startIndex=1&count=50",getLikes:"/common/opensocial/rest/ublog/@all/@all/urn:lsid:lconn.ibm.com:profiles.note:{{entryID}}/likes?count=25",postToEveryone:"/common/opensocial/rest/ublog/@me/@all",postToACommunity:"/common/opensocial/rest/ublog/urn:lsid:lconn.ibm.com:communities.community:{{communityID}}/@all",postToPerson:"/common/opensocial/rest/ublog/{{personID}}/@all",postAComment:"/common/opensocial/rest/ublog/@all/@all/urn:lsid:lconn.ibm.com:profiles.note:{{entryID}}/comments",likeThis:"/common/opensocial/rest/ublog/@all/@all/urn:lsid:lconn.ibm.com:profiles.note:{{entryID}}/likes/urn:lsid:lconn.ibm.com:profiles.person:{{userid}}",unLikeThis:"/common/opensocial/rest/ublog/@all/@all/urn:lsid:lconn.ibm.com:profiles.note:{{entryID}}/likes/urn:lsid:lconn.ibm.com:profiles.person:{{userid}}",likeComment:"/common/opensocial/rest/ublog/@all/@all/{{commentID}}/likes/urn:lsid:lconn.ibm.com:profiles.person:{{userid}}",unlikeComment:"/common/opensocial/rest/ublog/@all/@all/{{commentID}}/likes/urn:lsid:lconn.ibm.com:profiles.person:{{userid}}",delComment:"/common/opensocial/rest/ublog/@me/@all/urn:lsid:lconn.ibm.com:profiles.note:{{entryID}}/comments/{{commentID}}"},login:"",def:""},message:{400:"Sorry, the {{card}} is not functional since the service is not available or network disconnected. Please refresh the page and try it later.",401:"Oops, your login request has been cancelled or not authenticated successfully. Please sign in again",500:"The {{card}} is not functional since the connections service is down or disconnected.",404:"Oops, the {{card}} service is not available. Please refresh the page and try it later.",100:"Oops, the {{card}} service is not available. Please refresh the page and try it later."},authentication:new setAuthentication({name:"w3.connections",url:(w3n.env.is_live||w3n.env.is_stage?proxy.prod:proxy.dev)+"/profiles/atom/search.do?email=",success:function(data){var contributor=$(data).find("contributor").eq(0);w3n.connections.user_id=contributor.children().eq(1).text();w3n.connections.user_email=awf.user.info.email;w3n.connections.user_name=contributor.find("name").text();w3n.connections.is_authenticated=true},fail:function(err){switch(err.status){case 400:console.log("Sorry, the connections service is not functional since during a bad request.");break;case 401:console.log("Oops, your login request was cancelled or not authenticated successfully. Please sign in again");break;case 500:console.log("Sorry, the connections service is not available.");break;default:console.log("Oops, the service connections is not available. Please refresh the page and try it later.");break}}})};function setAuthentication(config){var me=this,testing_me=awf.is_phantomjs?this:{},has_local_storage=true,auth_name=null,auth_ajax={params:null,callback:null,fail:null},auth_local_data=false,call_back_array=[],error_call_back_array=[],request_once=false;testing_me.auth_config=config;testing_me.auth_name=config.name;testing_me.auth_ajax=auth_ajax;testing_me.auth_ajax.params={url:config.url,type:config.type?config.type:"GET",dataType:config.data_type?config.data_type:"text"};testing_me.auth_ajax.callback=config.success;me.auth_is_set=false;me.enable_backup=false;function init(){me.isSupportLocalStorage();testing_me.auth_ajax.fail=testing_me.auth_config.fail||testing_me.fail}function check(value){var condition=value&&auth_local_data;if(condition){return true}else{console.log("------ connections auth request_once",request_once);if(!request_once){testing_me.requestAuth()}}}function hasRequestOnce(){return request_once}function resetRequestOnce(){request_once=false}function requestAuth(){request_once=true;testing_me.auth_ajax.params.url+=awf.user.info.email;if(w3n.login_mode!=="manual-basic-auth"&&!me.enable_backup){awf.user.identity_manager.ajax(awf.user.identity_manager.SupportedServices.CONNECTIONS,{url:testing_me.auth_ajax.params.url,success:function(data){testing_me.success(data);testing_me.auth_ajax.callback(data);auth_local_data=true}.bind(this),error:function(err){console.log("------ first connection sso request failed ------");if(err.status===404||err.status===0){me.enable_backup=true}testing_me.fail(err);testing_me.auth_ajax.fail(err);auth_local_data=false;me.resetRequestOnce()}})}else{console.log("------ Enabled basic-auth request for connections -------");me.enable_backup=true;$.ajax(testing_me.auth_ajax.params).done(function(data){testing_me.success(data);testing_me.auth_ajax.callback(data);auth_local_data=true}).fail(function(err){testing_me.fail(err);testing_me.auth_ajax.fail(err);auth_local_data=false;me.resetRequestOnce()})}}function success(data){me.setLocalData(data);runCallBack()}function runCallBack(){_.forEach(call_back_array,function(obj){obj.func(obj.param)})}function fail(err){console.log("auth error",err);runErrorCallBack(err)}function runErrorCallBack(err){_.forEach(error_call_back_array,function(obj){obj.func(err)})}function getLocalData(type){if(has_local_storage){if(type=="string"){return localStorage.getItem(testing_me.auth_name)}else{return $.parseJSON(localStorage.getItem(testing_me.auth_name))}}else{if(type=="string"){return $.cookie(testing_me.auth_name)}else{return $.parseJSON(parseJSON.cookie(testing_me.auth_name))}}}function setLocalData(value){var stringVal;if(typeof value!=="string"){stringVal=JSON.stringify(value)}else{stringVal=value}if(has_local_storage){localStorage.setItem(testing_me.auth_name,stringVal)}else{$.cookie(testing_me.auth_name,stringVal)}}function isSupportLocalStorage(){if(typeof Storage!=="undefined"){has_local_storage=true;return true}else{has_local_storage=false;return false}}function addCallback(func,param){call_back_array.push({func:func,param:param})}function addErrorCallback(func,param){error_call_back_array.push({func:func,param:param})}testing_me.init=init;testing_me.requestAuth=requestAuth;me.requestAuth=requestAuth;testing_me.success=success;testing_me.fail=fail;me.check=check;me.hasRequestOnce=hasRequestOnce;me.resetRequestOnce=resetRequestOnce;me.getLocalData=getLocalData;me.setLocalData=setLocalData;me.isSupportLocalStorage=isSupportLocalStorage;me.addCallback=addCallback;me.addErrorCallback=addErrorCallback;testing_me.init()}var currently_open=null;w3n.sso_window=new SSO_Window;function SSO_Window(){var me=this;me.the_window=function(){return sso_window};me.show=show;function show(){var width=340,height=550,src="https://w3.ibm.com/w3login.html?returnUrl="+window.location.href+"?sso-complete",params={width:width,height:height,top:(screen.availHeight-height)/2,left:(screen.availWidth-width)/2,scrollbars:"1",menubar:"no"},param_string=[];for(var key in params)param_string.push(key+"="+params[key]);param_string=param_string.join(",");sso_window=window.open(src,"ssowindow",param_string);currently_open="general";return me}me.hide=hide;function hide(){if(sso_window){sso_window.close()}sso_window=null;currently_open=null;return me}var orig_focus=window.onfocus||function(){};window.onfocus=function(ev){orig_focus.call(window,ev);if(currently_open)hide()};var orig_blur=window.onblur||function(){};window.onblur=function(ev){orig_blur.call(window,ev)}}function showSSOComplete(){w3n.applyProfile=function(data){if(data.DN=="unauthenticated"){window.opener.console.log("sso data: ",data.DN)}else{window.opener.w3n.connections.user_email=data.Email;window.opener.w3n.sso_window.hide()}};w3n.load_profile_information=function(){var startingHTML='<div style="margin: 180px auto 0; line-height: 24px; color: #777; padding: 0; width: 90%; -webkit-box-sizing: border-box;text-align: center;">Identifying you with IBM<br> Single Sign On (SSO)...</div>';if(document.body){document.body.innerHTML=startingHTML}var sso_script=document.createElement("script");sso_script.type="text/javascript";sso_script.src="https://w3-workplace.ibm.com/workplace/services/w3cookie/callback/w3n.applyProfile";sso_script.onload=function(){console.log("ONLOAD WAS FIRED")};sso_script.onerror=function(){var html='<div style="margin: 130px auto 0; line-height: 18px; color: #777; padding: 0; width: 90%; -webkit-box-sizing: border-box;"><span style="float:  left; display: inline; width: 40px; height: 40px; background: #ccc; margin: 2px 10px 0 0;"></span><h2 style="font-weight: 400; line-height: 18px; font-size: 14px;">The Single Sign On (SSO) service failed to identify you or is taking too long to respond.</h2><div style="text-align:center;margin:  20px 0 0;"><button type="button" onclick="w3.load_profile_information();">Try again</button></div><p>If you continue to have this problem after several attempts, please go to the <a href="{{login-url}}" target="_blank">sign in</a> directly.</p><p>After submitting your ID and password on that page, come back to the home page and refresh.</p></div>';html=html.replace("{{login-url}}","https://w3.ibm.com/w3login.html");document.body.innerHTML=html};try{document.head.appendChild(sso_script)}catch(er){document.getElementsByTagName("head")[0].appendChild(sso_script)}};w3n.load_profile_information()}if(window.location.href.indexOf("?sso-complete")>0){showSSOComplete()}})();var feature_flag_handlers={identified_manager:{
check:function(bool){if(awf.user.is_authenticated){return false}else{return bool==(localStorage.getItem("w3n.user.is_manager")==="true")}},finalize:function(dfr){awf.user.authentication.always(dfr.resolve)},setupChangeHandler:function(ping){awf.user.authentication.always(ping)}},identified_employee:{check:function(bool){if(awf.user.is_authenticated){return false}else{return bool==(localStorage.getItem("w3n.user.is_employee")==="true")}},finalize:function(dfr){awf.user.authentication.always(dfr.resolve)},setupChangeHandler:function(ping){awf.user.authentication.always(ping)}},managerEmployeeType:{check:function(bool){if(awf.user.data.odw_info){return bool==(awf.user.data.odw_info.Profile.EmployeeType["@id"]==="1")}return false},finalize:function(dfr){awf.user.authentication.done(function(is_authenticated){if(is_authenticated){awf.user.services.odw_info.lazyFetch().always(dfr.resolve)}else{dfr.resolve()}}).fail(dfr.resolve)},setupChangeHandler:function(ping){if(awf.user.services.odw_info&&awf.user.services.odw_info.lazyFetch().state()=="pending"){awf.user.services.odw_info.lazyFetch().done(ping)}return function(){var holds=[];if(awf.user.services.odw_info){var odw_info_hold=$.Deferred();holds.push(odw_info_hold);awf.user.services.odw_info.lazyFetch().always(odw_info_hold.resolve)}return $.when.apply($,holds).promise()}()}}};_.extend(awf.__.FeatureToggler.handlers,feature_flag_handlers);console.info("awf.flags now includes the yourIBM user handlers: ",awf.util.list(_.keys(feature_flag_handlers)));(function(){var backbone_ajax=Backbone.ajax;function getService(services,index){index=index||"connections";return services[index]}Backbone.ajax=function(params){var self=this;var services={connections:awf.user.identity_manager.SupportedServices.CONNECTIONS,careersmart:awf.user.identity_manager.SupportedServices.CAREERSMART_TALENT,wsf:awf.user.identity_manager.SupportedServices.WSF,wsf_uat:awf.user.identity_manager.SupportedServices.WSF_UAT,tp:awf.user.identity_manager.SupportedServices.TP};if(params.identity_service){console.log("---------------------- running identity service ----------------------");var deferred=$.Deferred(),success=params.success,error=params.fail||params.error,ignoreErrors=params.ignoreErrors;awf.user.identity_manager.ajax(getService(services,params.service_index),_.extend(params,{dataType:params.dataType||"json",headers:_.extend({Accept:"application/json"},params.headers),success:function(data){if(success){success(data)}deferred.resolve(data)},error:function(err){if(error&&!ignoreErrors){error(err)}else if(!ignoreErrors){self.trigger("error",self,_.extend(err,{source:"SSO Service"}),opts)}deferred.reject(err)}}));return deferred}else{return backbone_ajax(params)}}})();w3n.templates={base:{fonts:{"preview.html":'<!DOCTYPE html>\n<html>\n  <head>\n    <title>icon-youribm glyphs preview</title>\n    <style>\n      /* Page Styles */\n      html {\n        text-rendering: optimizeLegibility;\n        -moz-osx-font-smoothing: grayscale;\n         -webkit-font-smoothing: antialiased;\n                 font-smoothing: antialiased;\n      }\n      * {\n        -moz-box-sizing: border-box;\n        -webkit-box-sizing: border-box;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n      }\n      body {\n        background: #fff;\n        color: #444;\n        font: 16px/1.5 "Helvetica Neue", Helvetica, Arial, sans-serif;\n      }\n      a,\n      a:visited {\n        color: #888;\n        text-decoration: underline;\n      }\n      a:hover,\n      a:focus { color: #000; }\n      header {\n        border-bottom: 2px solid #ddd;\n        margin-bottom: 20px;\n        overflow: hidden;\n        padding: 20px 0;\n      }\n      header h1 {\n        color: #888;\n        float: left;\n        font-size: 36px;\n        font-weight: 300;\n      }\n      header a {\n        float: right;\n        font-size: 14px;\n      }\n      .container {\n        margin: 0 auto;\n        max-width: 1200px;\n        min-width: 960px;\n        padding: 0 40px;\n        width: 90%;\n      }\n      .glyph {\n        border-bottom: 1px dotted #ccc;\n        padding: 10px 0 20px;\n        margin-bottom: 20px;\n      }\n      .preview-glyphs { vertical-align: bottom; }\n      .preview-scale {\n        color: #888;\n        font-size: 12px;\n        margin-top: 5px;\n      }\n      .step {\n        display: inline-block;\n        line-height: 1;\n        position: relative;\n        width: 10%;\n      }\n      .step .letters,\n      .step i {\n        -webkit-transition: opacity .3s;\n        -moz-transition: opacity .3s;\n        -ms-transition: opacity .3s;\n        -o-transition: opacity .3s;\n        transition: opacity .3s;\n      }\n      .step:hover .letters { opacity: 1; }\n      .step:hover i { opacity: .3; }\n      .letters {\n        opacity: .3;\n        position: absolute;\n      }\n      .characters-off .letters { display: none; }\n      .characters-off .step:hover i { opacity: 1; }\n      \n      .size-12 { font-size: 12px; }\n      \n      .size-14 { font-size: 14px; }\n      \n      .size-16 { font-size: 16px; }\n      \n      .size-18 { font-size: 18px; }\n      \n      .size-21 { font-size: 21px; }\n      \n      .size-24 { font-size: 24px; }\n      \n      .size-36 { font-size: 36px; }\n      \n      .size-48 { font-size: 48px; }\n      \n      .size-60 { font-size: 60px; }\n      \n      .size-72 { font-size: 72px; }\n      \n      .usage { margin-top: 10px; }\n      .usage input {\n        font-family: monospace;\n        margin-right: 3px;\n        padding: 2px 5px;\n        text-align: center;\n      }\n      .usage .point { width: 150px; }\n      .usage .class { width: 250px; }\n      footer {\n        color: #888;\n        font-size: 12px;\n        padding: 20px 0;\n      }\n      /* Icon Font: icon-youribm */\n      @font-face {\n  font-family: "icon-youribm";\n  src: url("./icon-youribm_0991032c2a3c59115f252a32b9733196.eot");\n  src: url("./icon-youribm_0991032c2a3c59115f252a32b9733196.eot?#iefix") format("embedded-opentype"),\n       url("./icon-youribm_0991032c2a3c59115f252a32b9733196.woff") format("woff"),\n       url("./icon-youribm_0991032c2a3c59115f252a32b9733196.ttf") format("truetype"),\n       url("./icon-youribm_0991032c2a3c59115f252a32b9733196.svg#icon-youribm") format("svg");\n  font-weight: normal;\n  font-style: normal;\n}\n\n@media screen and (-webkit-min-device-pixel-ratio:0) {\n  @font-face {\n    font-family: "icon-youribm";\n    src: url("./icon-youribm_0991032c2a3c59115f252a32b9733196.svg#icon-youribm") format("svg");\n  }\n}\n      [class^="icon-youribm-"], [class*=" icon-youribm-"]  {\n        display: inline-block;\n        font-family: "icon-youribm";\n        speak: none;\n        font-style: normal;\n        font-weight: normal;\n        font-variant: normal;\n        text-transform: none;\n        line-height: 1;\n      }\n      /* spin */\n        .icon-youribm-spin {\n          -webkit-animation: icon-youribm-spin 2s infinite linear;\n          animation: icon-youribm-spin 2s infinite linear;\n        }\n        .icon-youribm-spin-slow {\n          -webkit-animation: icon-youribm-spin 3s infinite linear;\n          animation: icon-youribm-spin 3s infinite linear;\n        }\n        .icon-youribm-spin-fast {\n          -webkit-animation: icon-youribm-spin 1s infinite linear;\n          animation: icon-youribm-spin 1s infinite linear;\n        }\n        /* Chrome, Safari, Opera */\n        @-webkit-keyframes icon-youribm-spin {\n          0% {\n            -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n          }\n          100% {\n            -webkit-transform: rotate(359deg);\n            transform: rotate(359deg);\n          }\n        }\n        /* Standard syntax */\n        @keyframes icon-youribm-spin {\n          0% {\n            -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n          }\n          100% {\n            -webkit-transform: rotate(359deg);\n            transform: rotate(359deg);\n          }\n        }\n    /* reverse-spin */\n      .icon-youribm-reverse-spin {\n        -webkit-animation: icon-youribm-reverse-spin 2s infinite linear;\n        animation: icon-youribm-reverse-spin 2s infinite linear;\n      }\n      .icon-youribm-reverse-spin-slow {\n        -webkit-animation: icon-youribm-reverse-spin 3s infinite linear;\n        animation: icon-youribm-reverse-spin 3s infinite linear;\n      }\n      .icon-youribm-reverse-spin-fast {\n        -webkit-animation: icon-youribm-reverse-spin 1s infinite linear;\n        animation: icon-youribm-reverse-spin 1s infinite linear;\n      }\n      /* Chrome, Safari, Opera */\n      @-webkit-keyframes icon-youribm-reverse-spin {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(-359deg);\n          transform: rotate(-359deg);\n        }\n      }\n      /* Standard syntax */\n      @keyframes icon-youribm-reverse-spin {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(-359deg);\n          transform: rotate(-359deg);\n        }\n      }\n      .icon-youribm-airplane:before { content: "\\f102"; }\n.icon-youribm-avatar-briefcase:before { content: "\\f105"; }\n.icon-youribm-avatar-square:before { content: "\\f108"; }\n.icon-youribm-avatar-star:before { content: "\\f109"; }\n.icon-youribm-avatar-star-circle-fill:before { content: "\\f10a"; }\n.icon-youribm-award-ribbons:before { content: "\\f10c"; }\n.icon-youribm-award-ribbons-circle-fill:before { content: "\\f10d"; }\n.icon-youribm-box-closed-glow:before { content: "\\f10f"; }\n.icon-youribm-calendar-check:before { content: "\\f111"; }\n.icon-youribm-calendar-task:before { content: "\\f113"; }\n.icon-youribm-chart-bar:before { content: "\\f114"; }\n.icon-youribm-chart-line:before { content: "\\f117"; }\n.icon-youribm-chart-pie:before { content: "\\f118"; }\n.icon-youribm-clock:before { content: "\\f11e"; }\n.icon-youribm-clock-inbox:before { content: "\\f14f"; }\n.icon-youribm-communities:before { content: "\\f156"; }\n.icon-youribm-compass:before { content: "\\f122"; }\n.icon-youribm-compensation-circle:before { content: "\\f155"; }\n.icon-youribm-compensation-circle-fill:before { content: "\\f154"; }\n.icon-youribm-component-circle:before { content: "\\f127"; }\n.icon-youribm-component-circle-fill:before { content: "\\f128"; }\n.icon-youribm-diversity:before { content: "\\f129"; }\n.icon-youribm-emergency:before { content: "\\f12b"; }\n.icon-youribm-expenses:before { content: "\\f12d"; }\n.icon-youribm-eyeball-slash:before { content: "\\f157"; }\n.icon-youribm-file-collaborator-manage:before { content: "\\f130"; }\n.icon-youribm-graduation-cap:before { content: "\\f150"; }\n.icon-youribm-headphones:before { content: "\\f132"; }\n.icon-youribm-headset:before { content: "\\f134"; }\n.icon-youribm-iconography-circle:before { content: "\\f136"; }\n.icon-youribm-iconography-circle-fill:before { content: "\\f137"; }\n.icon-youribm-intro-circle:before { content: "\\f13b"; }\n.icon-youribm-intro-circle-fill:before { content: "\\f13c"; }\n.icon-youribm-lightbulb:before { content: "\\f151"; }\n.icon-youribm-logo-adminhub-circle:before { content: "\\f152"; }\n.icon-youribm-logo-adminhub-circle-fill:before { content: "\\f153"; }\n.icon-youribm-logo-ibmerhub-circle:before { content: "\\f141"; }\n.icon-youribm-logo-ibmerhub-circle-fill:before { content: "\\f142"; }\n.icon-youribm-logo-managerhub-circle:before { content: "\\f143"; }\n.icon-youribm-logo-managerhub-circle-fill:before { content: "\\f144"; }\n.icon-youribm-monitor-chart-line:before { content: "\\f146"; }\n.icon-youribm-news:before { content: "\\f148"; }\n.icon-youribm-notecard:before { content: "\\f149"; }\n.icon-youribm-palette-circle:before { content: "\\f14a"; }\n.icon-youribm-palette-circle-fill:before { content: "\\f14b"; }\n.icon-youribm-places:before { content: "\\f14c"; }\n.icon-youribm-typography-circle:before { content: "\\f14d"; }\n.icon-youribm-typography-circle-fill:before { content: "\\f14e"; }\n    </style>\n    <!--[if lte IE 8]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->\n    <script>\n      function toggleCharacters() {\n        var body = document.getElementsByTagName(\'body\')[0];\n        body.className = body.className === \'characters-off\' ? \'\' : \'characters-off\';\n      }\n    </script>\n  </head>\n  <body class="characters-off">\n    <div id="page" class="container">\n      <header>\n        <h1>icon-youribm contains 48 glyphs:</h1>\n        <a onclick="toggleCharacters(); return false;" href="#">Toggle Preview Characters</a>\n      </header>\n      \n      <div class="glyph">\n        <h2>airplane</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-airplane" class="icon-youribm-airplane"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-airplane" class="icon-youribm-airplane"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-airplane" class="icon-youribm-airplane"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-airplane" class="icon-youribm-airplane"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-airplane" class="icon-youribm-airplane"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-airplane" class="icon-youribm-airplane"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-airplane" class="icon-youribm-airplane"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-airplane" class="icon-youribm-airplane"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-airplane" class="icon-youribm-airplane"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-airplane" class="icon-youribm-airplane"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-airplane" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf102;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>avatar-briefcase</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-avatar-briefcase" class="icon-youribm-avatar-briefcase"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-avatar-briefcase" class="icon-youribm-avatar-briefcase"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-avatar-briefcase" class="icon-youribm-avatar-briefcase"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-avatar-briefcase" class="icon-youribm-avatar-briefcase"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-avatar-briefcase" class="icon-youribm-avatar-briefcase"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-avatar-briefcase" class="icon-youribm-avatar-briefcase"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-avatar-briefcase" class="icon-youribm-avatar-briefcase"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-avatar-briefcase" class="icon-youribm-avatar-briefcase"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-avatar-briefcase" class="icon-youribm-avatar-briefcase"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-avatar-briefcase" class="icon-youribm-avatar-briefcase"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-avatar-briefcase" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf105;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>avatar-square</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-avatar-square" class="icon-youribm-avatar-square"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-avatar-square" class="icon-youribm-avatar-square"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-avatar-square" class="icon-youribm-avatar-square"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-avatar-square" class="icon-youribm-avatar-square"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-avatar-square" class="icon-youribm-avatar-square"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-avatar-square" class="icon-youribm-avatar-square"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-avatar-square" class="icon-youribm-avatar-square"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-avatar-square" class="icon-youribm-avatar-square"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-avatar-square" class="icon-youribm-avatar-square"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-avatar-square" class="icon-youribm-avatar-square"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-avatar-square" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf108;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>avatar-star</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-avatar-star" class="icon-youribm-avatar-star"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-avatar-star" class="icon-youribm-avatar-star"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-avatar-star" class="icon-youribm-avatar-star"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-avatar-star" class="icon-youribm-avatar-star"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-avatar-star" class="icon-youribm-avatar-star"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-avatar-star" class="icon-youribm-avatar-star"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-avatar-star" class="icon-youribm-avatar-star"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-avatar-star" class="icon-youribm-avatar-star"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-avatar-star" class="icon-youribm-avatar-star"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-avatar-star" class="icon-youribm-avatar-star"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-avatar-star" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf109;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>avatar-star-circle-fill</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-avatar-star-circle-fill" class="icon-youribm-avatar-star-circle-fill"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-avatar-star-circle-fill" class="icon-youribm-avatar-star-circle-fill"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-avatar-star-circle-fill" class="icon-youribm-avatar-star-circle-fill"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-avatar-star-circle-fill" class="icon-youribm-avatar-star-circle-fill"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-avatar-star-circle-fill" class="icon-youribm-avatar-star-circle-fill"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-avatar-star-circle-fill" class="icon-youribm-avatar-star-circle-fill"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-avatar-star-circle-fill" class="icon-youribm-avatar-star-circle-fill"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-avatar-star-circle-fill" class="icon-youribm-avatar-star-circle-fill"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-avatar-star-circle-fill" class="icon-youribm-avatar-star-circle-fill"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-avatar-star-circle-fill" class="icon-youribm-avatar-star-circle-fill"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-avatar-star-circle-fill" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf10a;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>award-ribbons</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons" class="icon-youribm-award-ribbons"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons" class="icon-youribm-award-ribbons"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons" class="icon-youribm-award-ribbons"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons" class="icon-youribm-award-ribbons"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons" class="icon-youribm-award-ribbons"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons" class="icon-youribm-award-ribbons"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons" class="icon-youribm-award-ribbons"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons" class="icon-youribm-award-ribbons"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons" class="icon-youribm-award-ribbons"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons" class="icon-youribm-award-ribbons"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-award-ribbons" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf10c;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>award-ribbons-circle-fill</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons-circle-fill" class="icon-youribm-award-ribbons-circle-fill"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons-circle-fill" class="icon-youribm-award-ribbons-circle-fill"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons-circle-fill" class="icon-youribm-award-ribbons-circle-fill"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons-circle-fill" class="icon-youribm-award-ribbons-circle-fill"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons-circle-fill" class="icon-youribm-award-ribbons-circle-fill"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons-circle-fill" class="icon-youribm-award-ribbons-circle-fill"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons-circle-fill" class="icon-youribm-award-ribbons-circle-fill"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons-circle-fill" class="icon-youribm-award-ribbons-circle-fill"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons-circle-fill" class="icon-youribm-award-ribbons-circle-fill"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-award-ribbons-circle-fill" class="icon-youribm-award-ribbons-circle-fill"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-award-ribbons-circle-fill" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf10d;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>box-closed-glow</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-box-closed-glow" class="icon-youribm-box-closed-glow"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-box-closed-glow" class="icon-youribm-box-closed-glow"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-box-closed-glow" class="icon-youribm-box-closed-glow"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-box-closed-glow" class="icon-youribm-box-closed-glow"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-box-closed-glow" class="icon-youribm-box-closed-glow"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-box-closed-glow" class="icon-youribm-box-closed-glow"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-box-closed-glow" class="icon-youribm-box-closed-glow"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-box-closed-glow" class="icon-youribm-box-closed-glow"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-box-closed-glow" class="icon-youribm-box-closed-glow"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-box-closed-glow" class="icon-youribm-box-closed-glow"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-box-closed-glow" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf10f;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>calendar-check</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-calendar-check" class="icon-youribm-calendar-check"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-calendar-check" class="icon-youribm-calendar-check"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-calendar-check" class="icon-youribm-calendar-check"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-calendar-check" class="icon-youribm-calendar-check"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-calendar-check" class="icon-youribm-calendar-check"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-calendar-check" class="icon-youribm-calendar-check"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-calendar-check" class="icon-youribm-calendar-check"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-calendar-check" class="icon-youribm-calendar-check"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-calendar-check" class="icon-youribm-calendar-check"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-calendar-check" class="icon-youribm-calendar-check"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-calendar-check" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf111;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>calendar-task</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-calendar-task" class="icon-youribm-calendar-task"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-calendar-task" class="icon-youribm-calendar-task"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-calendar-task" class="icon-youribm-calendar-task"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-calendar-task" class="icon-youribm-calendar-task"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-calendar-task" class="icon-youribm-calendar-task"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-calendar-task" class="icon-youribm-calendar-task"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-calendar-task" class="icon-youribm-calendar-task"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-calendar-task" class="icon-youribm-calendar-task"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-calendar-task" class="icon-youribm-calendar-task"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-calendar-task" class="icon-youribm-calendar-task"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-calendar-task" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf113;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>chart-bar</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-chart-bar" class="icon-youribm-chart-bar"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-chart-bar" class="icon-youribm-chart-bar"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-chart-bar" class="icon-youribm-chart-bar"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-chart-bar" class="icon-youribm-chart-bar"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-chart-bar" class="icon-youribm-chart-bar"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-chart-bar" class="icon-youribm-chart-bar"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-chart-bar" class="icon-youribm-chart-bar"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-chart-bar" class="icon-youribm-chart-bar"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-chart-bar" class="icon-youribm-chart-bar"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-chart-bar" class="icon-youribm-chart-bar"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-chart-bar" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf114;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>chart-line</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-chart-line" class="icon-youribm-chart-line"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-chart-line" class="icon-youribm-chart-line"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-chart-line" class="icon-youribm-chart-line"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-chart-line" class="icon-youribm-chart-line"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-chart-line" class="icon-youribm-chart-line"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-chart-line" class="icon-youribm-chart-line"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-chart-line" class="icon-youribm-chart-line"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-chart-line" class="icon-youribm-chart-line"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-chart-line" class="icon-youribm-chart-line"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-chart-line" class="icon-youribm-chart-line"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-chart-line" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf117;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>chart-pie</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-chart-pie" class="icon-youribm-chart-pie"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-chart-pie" class="icon-youribm-chart-pie"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-chart-pie" class="icon-youribm-chart-pie"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-chart-pie" class="icon-youribm-chart-pie"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-chart-pie" class="icon-youribm-chart-pie"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-chart-pie" class="icon-youribm-chart-pie"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-chart-pie" class="icon-youribm-chart-pie"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-chart-pie" class="icon-youribm-chart-pie"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-chart-pie" class="icon-youribm-chart-pie"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-chart-pie" class="icon-youribm-chart-pie"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-chart-pie" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf118;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>clock</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-clock" class="icon-youribm-clock"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-clock" class="icon-youribm-clock"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-clock" class="icon-youribm-clock"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-clock" class="icon-youribm-clock"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-clock" class="icon-youribm-clock"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-clock" class="icon-youribm-clock"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-clock" class="icon-youribm-clock"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-clock" class="icon-youribm-clock"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-clock" class="icon-youribm-clock"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-clock" class="icon-youribm-clock"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-clock" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf11e;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>clock-inbox</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-clock-inbox" class="icon-youribm-clock-inbox"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-clock-inbox" class="icon-youribm-clock-inbox"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-clock-inbox" class="icon-youribm-clock-inbox"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-clock-inbox" class="icon-youribm-clock-inbox"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-clock-inbox" class="icon-youribm-clock-inbox"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-clock-inbox" class="icon-youribm-clock-inbox"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-clock-inbox" class="icon-youribm-clock-inbox"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-clock-inbox" class="icon-youribm-clock-inbox"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-clock-inbox" class="icon-youribm-clock-inbox"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-clock-inbox" class="icon-youribm-clock-inbox"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-clock-inbox" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf14f;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>communities</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-communities" class="icon-youribm-communities"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-communities" class="icon-youribm-communities"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-communities" class="icon-youribm-communities"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-communities" class="icon-youribm-communities"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-communities" class="icon-youribm-communities"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-communities" class="icon-youribm-communities"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-communities" class="icon-youribm-communities"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-communities" class="icon-youribm-communities"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-communities" class="icon-youribm-communities"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-communities" class="icon-youribm-communities"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-communities" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf156;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>compass</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-compass" class="icon-youribm-compass"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-compass" class="icon-youribm-compass"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-compass" class="icon-youribm-compass"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-compass" class="icon-youribm-compass"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-compass" class="icon-youribm-compass"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-compass" class="icon-youribm-compass"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-compass" class="icon-youribm-compass"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-compass" class="icon-youribm-compass"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-compass" class="icon-youribm-compass"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-compass" class="icon-youribm-compass"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-compass" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf122;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>compensation-circle</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle" class="icon-youribm-compensation-circle"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle" class="icon-youribm-compensation-circle"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle" class="icon-youribm-compensation-circle"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle" class="icon-youribm-compensation-circle"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle" class="icon-youribm-compensation-circle"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle" class="icon-youribm-compensation-circle"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle" class="icon-youribm-compensation-circle"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle" class="icon-youribm-compensation-circle"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle" class="icon-youribm-compensation-circle"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle" class="icon-youribm-compensation-circle"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-compensation-circle" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf155;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>compensation-circle-fill</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle-fill" class="icon-youribm-compensation-circle-fill"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle-fill" class="icon-youribm-compensation-circle-fill"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle-fill" class="icon-youribm-compensation-circle-fill"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle-fill" class="icon-youribm-compensation-circle-fill"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle-fill" class="icon-youribm-compensation-circle-fill"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle-fill" class="icon-youribm-compensation-circle-fill"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle-fill" class="icon-youribm-compensation-circle-fill"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle-fill" class="icon-youribm-compensation-circle-fill"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle-fill" class="icon-youribm-compensation-circle-fill"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-compensation-circle-fill" class="icon-youribm-compensation-circle-fill"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-compensation-circle-fill" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf154;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>component-circle</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-component-circle" class="icon-youribm-component-circle"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-component-circle" class="icon-youribm-component-circle"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-component-circle" class="icon-youribm-component-circle"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-component-circle" class="icon-youribm-component-circle"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-component-circle" class="icon-youribm-component-circle"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-component-circle" class="icon-youribm-component-circle"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-component-circle" class="icon-youribm-component-circle"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-component-circle" class="icon-youribm-component-circle"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-component-circle" class="icon-youribm-component-circle"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-component-circle" class="icon-youribm-component-circle"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-component-circle" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf127;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>component-circle-fill</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-component-circle-fill" class="icon-youribm-component-circle-fill"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-component-circle-fill" class="icon-youribm-component-circle-fill"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-component-circle-fill" class="icon-youribm-component-circle-fill"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-component-circle-fill" class="icon-youribm-component-circle-fill"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-component-circle-fill" class="icon-youribm-component-circle-fill"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-component-circle-fill" class="icon-youribm-component-circle-fill"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-component-circle-fill" class="icon-youribm-component-circle-fill"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-component-circle-fill" class="icon-youribm-component-circle-fill"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-component-circle-fill" class="icon-youribm-component-circle-fill"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-component-circle-fill" class="icon-youribm-component-circle-fill"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-component-circle-fill" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf128;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>diversity</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-diversity" class="icon-youribm-diversity"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-diversity" class="icon-youribm-diversity"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-diversity" class="icon-youribm-diversity"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-diversity" class="icon-youribm-diversity"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-diversity" class="icon-youribm-diversity"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-diversity" class="icon-youribm-diversity"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-diversity" class="icon-youribm-diversity"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-diversity" class="icon-youribm-diversity"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-diversity" class="icon-youribm-diversity"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-diversity" class="icon-youribm-diversity"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-diversity" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf129;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>emergency</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-emergency" class="icon-youribm-emergency"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-emergency" class="icon-youribm-emergency"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-emergency" class="icon-youribm-emergency"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-emergency" class="icon-youribm-emergency"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-emergency" class="icon-youribm-emergency"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-emergency" class="icon-youribm-emergency"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-emergency" class="icon-youribm-emergency"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-emergency" class="icon-youribm-emergency"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-emergency" class="icon-youribm-emergency"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-emergency" class="icon-youribm-emergency"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-emergency" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf12b;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>expenses</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-expenses" class="icon-youribm-expenses"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-expenses" class="icon-youribm-expenses"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-expenses" class="icon-youribm-expenses"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-expenses" class="icon-youribm-expenses"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-expenses" class="icon-youribm-expenses"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-expenses" class="icon-youribm-expenses"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-expenses" class="icon-youribm-expenses"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-expenses" class="icon-youribm-expenses"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-expenses" class="icon-youribm-expenses"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-expenses" class="icon-youribm-expenses"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-expenses" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf12d;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>eyeball-slash</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-eyeball-slash" class="icon-youribm-eyeball-slash"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-eyeball-slash" class="icon-youribm-eyeball-slash"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-eyeball-slash" class="icon-youribm-eyeball-slash"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-eyeball-slash" class="icon-youribm-eyeball-slash"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-eyeball-slash" class="icon-youribm-eyeball-slash"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-eyeball-slash" class="icon-youribm-eyeball-slash"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-eyeball-slash" class="icon-youribm-eyeball-slash"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-eyeball-slash" class="icon-youribm-eyeball-slash"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-eyeball-slash" class="icon-youribm-eyeball-slash"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-eyeball-slash" class="icon-youribm-eyeball-slash"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-eyeball-slash" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf157;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>file-collaborator-manage</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-file-collaborator-manage" class="icon-youribm-file-collaborator-manage"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-file-collaborator-manage" class="icon-youribm-file-collaborator-manage"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-file-collaborator-manage" class="icon-youribm-file-collaborator-manage"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-file-collaborator-manage" class="icon-youribm-file-collaborator-manage"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-file-collaborator-manage" class="icon-youribm-file-collaborator-manage"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-file-collaborator-manage" class="icon-youribm-file-collaborator-manage"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-file-collaborator-manage" class="icon-youribm-file-collaborator-manage"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-file-collaborator-manage" class="icon-youribm-file-collaborator-manage"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-file-collaborator-manage" class="icon-youribm-file-collaborator-manage"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-file-collaborator-manage" class="icon-youribm-file-collaborator-manage"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-file-collaborator-manage" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf130;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>graduation-cap</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-graduation-cap" class="icon-youribm-graduation-cap"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-graduation-cap" class="icon-youribm-graduation-cap"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-graduation-cap" class="icon-youribm-graduation-cap"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-graduation-cap" class="icon-youribm-graduation-cap"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-graduation-cap" class="icon-youribm-graduation-cap"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-graduation-cap" class="icon-youribm-graduation-cap"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-graduation-cap" class="icon-youribm-graduation-cap"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-graduation-cap" class="icon-youribm-graduation-cap"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-graduation-cap" class="icon-youribm-graduation-cap"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-graduation-cap" class="icon-youribm-graduation-cap"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-graduation-cap" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf150;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>headphones</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-headphones" class="icon-youribm-headphones"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-headphones" class="icon-youribm-headphones"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-headphones" class="icon-youribm-headphones"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-headphones" class="icon-youribm-headphones"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-headphones" class="icon-youribm-headphones"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-headphones" class="icon-youribm-headphones"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-headphones" class="icon-youribm-headphones"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-headphones" class="icon-youribm-headphones"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-headphones" class="icon-youribm-headphones"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-headphones" class="icon-youribm-headphones"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-headphones" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf132;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>headset</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-headset" class="icon-youribm-headset"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-headset" class="icon-youribm-headset"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-headset" class="icon-youribm-headset"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-headset" class="icon-youribm-headset"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-headset" class="icon-youribm-headset"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-headset" class="icon-youribm-headset"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-headset" class="icon-youribm-headset"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-headset" class="icon-youribm-headset"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-headset" class="icon-youribm-headset"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-headset" class="icon-youribm-headset"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-headset" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf134;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>iconography-circle</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle" class="icon-youribm-iconography-circle"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle" class="icon-youribm-iconography-circle"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle" class="icon-youribm-iconography-circle"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle" class="icon-youribm-iconography-circle"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle" class="icon-youribm-iconography-circle"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle" class="icon-youribm-iconography-circle"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle" class="icon-youribm-iconography-circle"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle" class="icon-youribm-iconography-circle"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle" class="icon-youribm-iconography-circle"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle" class="icon-youribm-iconography-circle"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-iconography-circle" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf136;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>iconography-circle-fill</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle-fill" class="icon-youribm-iconography-circle-fill"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle-fill" class="icon-youribm-iconography-circle-fill"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle-fill" class="icon-youribm-iconography-circle-fill"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle-fill" class="icon-youribm-iconography-circle-fill"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle-fill" class="icon-youribm-iconography-circle-fill"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle-fill" class="icon-youribm-iconography-circle-fill"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle-fill" class="icon-youribm-iconography-circle-fill"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle-fill" class="icon-youribm-iconography-circle-fill"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle-fill" class="icon-youribm-iconography-circle-fill"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-iconography-circle-fill" class="icon-youribm-iconography-circle-fill"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-iconography-circle-fill" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf137;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>intro-circle</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-intro-circle" class="icon-youribm-intro-circle"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-intro-circle" class="icon-youribm-intro-circle"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-intro-circle" class="icon-youribm-intro-circle"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-intro-circle" class="icon-youribm-intro-circle"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-intro-circle" class="icon-youribm-intro-circle"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-intro-circle" class="icon-youribm-intro-circle"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-intro-circle" class="icon-youribm-intro-circle"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-intro-circle" class="icon-youribm-intro-circle"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-intro-circle" class="icon-youribm-intro-circle"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-intro-circle" class="icon-youribm-intro-circle"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-intro-circle" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf13b;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>intro-circle-fill</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-intro-circle-fill" class="icon-youribm-intro-circle-fill"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-intro-circle-fill" class="icon-youribm-intro-circle-fill"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-intro-circle-fill" class="icon-youribm-intro-circle-fill"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-intro-circle-fill" class="icon-youribm-intro-circle-fill"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-intro-circle-fill" class="icon-youribm-intro-circle-fill"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-intro-circle-fill" class="icon-youribm-intro-circle-fill"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-intro-circle-fill" class="icon-youribm-intro-circle-fill"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-intro-circle-fill" class="icon-youribm-intro-circle-fill"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-intro-circle-fill" class="icon-youribm-intro-circle-fill"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-intro-circle-fill" class="icon-youribm-intro-circle-fill"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-intro-circle-fill" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf13c;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>lightbulb</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-lightbulb" class="icon-youribm-lightbulb"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-lightbulb" class="icon-youribm-lightbulb"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-lightbulb" class="icon-youribm-lightbulb"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-lightbulb" class="icon-youribm-lightbulb"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-lightbulb" class="icon-youribm-lightbulb"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-lightbulb" class="icon-youribm-lightbulb"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-lightbulb" class="icon-youribm-lightbulb"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-lightbulb" class="icon-youribm-lightbulb"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-lightbulb" class="icon-youribm-lightbulb"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-lightbulb" class="icon-youribm-lightbulb"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-lightbulb" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf151;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>logo-adminhub-circle</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle" class="icon-youribm-logo-adminhub-circle"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle" class="icon-youribm-logo-adminhub-circle"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle" class="icon-youribm-logo-adminhub-circle"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle" class="icon-youribm-logo-adminhub-circle"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle" class="icon-youribm-logo-adminhub-circle"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle" class="icon-youribm-logo-adminhub-circle"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle" class="icon-youribm-logo-adminhub-circle"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle" class="icon-youribm-logo-adminhub-circle"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle" class="icon-youribm-logo-adminhub-circle"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle" class="icon-youribm-logo-adminhub-circle"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-logo-adminhub-circle" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf152;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>logo-adminhub-circle-fill</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle-fill" class="icon-youribm-logo-adminhub-circle-fill"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle-fill" class="icon-youribm-logo-adminhub-circle-fill"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle-fill" class="icon-youribm-logo-adminhub-circle-fill"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle-fill" class="icon-youribm-logo-adminhub-circle-fill"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle-fill" class="icon-youribm-logo-adminhub-circle-fill"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle-fill" class="icon-youribm-logo-adminhub-circle-fill"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle-fill" class="icon-youribm-logo-adminhub-circle-fill"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle-fill" class="icon-youribm-logo-adminhub-circle-fill"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle-fill" class="icon-youribm-logo-adminhub-circle-fill"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-logo-adminhub-circle-fill" class="icon-youribm-logo-adminhub-circle-fill"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-logo-adminhub-circle-fill" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf153;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>logo-ibmerhub-circle</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle" class="icon-youribm-logo-ibmerhub-circle"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle" class="icon-youribm-logo-ibmerhub-circle"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle" class="icon-youribm-logo-ibmerhub-circle"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle" class="icon-youribm-logo-ibmerhub-circle"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle" class="icon-youribm-logo-ibmerhub-circle"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle" class="icon-youribm-logo-ibmerhub-circle"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle" class="icon-youribm-logo-ibmerhub-circle"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle" class="icon-youribm-logo-ibmerhub-circle"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle" class="icon-youribm-logo-ibmerhub-circle"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle" class="icon-youribm-logo-ibmerhub-circle"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-logo-ibmerhub-circle" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf141;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>logo-ibmerhub-circle-fill</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle-fill" class="icon-youribm-logo-ibmerhub-circle-fill"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle-fill" class="icon-youribm-logo-ibmerhub-circle-fill"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle-fill" class="icon-youribm-logo-ibmerhub-circle-fill"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle-fill" class="icon-youribm-logo-ibmerhub-circle-fill"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle-fill" class="icon-youribm-logo-ibmerhub-circle-fill"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle-fill" class="icon-youribm-logo-ibmerhub-circle-fill"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle-fill" class="icon-youribm-logo-ibmerhub-circle-fill"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle-fill" class="icon-youribm-logo-ibmerhub-circle-fill"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle-fill" class="icon-youribm-logo-ibmerhub-circle-fill"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-logo-ibmerhub-circle-fill" class="icon-youribm-logo-ibmerhub-circle-fill"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-logo-ibmerhub-circle-fill" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf142;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>logo-managerhub-circle</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle" class="icon-youribm-logo-managerhub-circle"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle" class="icon-youribm-logo-managerhub-circle"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle" class="icon-youribm-logo-managerhub-circle"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle" class="icon-youribm-logo-managerhub-circle"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle" class="icon-youribm-logo-managerhub-circle"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle" class="icon-youribm-logo-managerhub-circle"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle" class="icon-youribm-logo-managerhub-circle"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle" class="icon-youribm-logo-managerhub-circle"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle" class="icon-youribm-logo-managerhub-circle"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle" class="icon-youribm-logo-managerhub-circle"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-logo-managerhub-circle" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf143;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>logo-managerhub-circle-fill</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle-fill" class="icon-youribm-logo-managerhub-circle-fill"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle-fill" class="icon-youribm-logo-managerhub-circle-fill"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle-fill" class="icon-youribm-logo-managerhub-circle-fill"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle-fill" class="icon-youribm-logo-managerhub-circle-fill"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle-fill" class="icon-youribm-logo-managerhub-circle-fill"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle-fill" class="icon-youribm-logo-managerhub-circle-fill"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle-fill" class="icon-youribm-logo-managerhub-circle-fill"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle-fill" class="icon-youribm-logo-managerhub-circle-fill"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle-fill" class="icon-youribm-logo-managerhub-circle-fill"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-logo-managerhub-circle-fill" class="icon-youribm-logo-managerhub-circle-fill"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-logo-managerhub-circle-fill" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf144;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>monitor-chart-line</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-monitor-chart-line" class="icon-youribm-monitor-chart-line"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-monitor-chart-line" class="icon-youribm-monitor-chart-line"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-monitor-chart-line" class="icon-youribm-monitor-chart-line"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-monitor-chart-line" class="icon-youribm-monitor-chart-line"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-monitor-chart-line" class="icon-youribm-monitor-chart-line"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-monitor-chart-line" class="icon-youribm-monitor-chart-line"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-monitor-chart-line" class="icon-youribm-monitor-chart-line"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-monitor-chart-line" class="icon-youribm-monitor-chart-line"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-monitor-chart-line" class="icon-youribm-monitor-chart-line"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-monitor-chart-line" class="icon-youribm-monitor-chart-line"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-monitor-chart-line" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf146;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>news</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-news" class="icon-youribm-news"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-news" class="icon-youribm-news"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-news" class="icon-youribm-news"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-news" class="icon-youribm-news"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-news" class="icon-youribm-news"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-news" class="icon-youribm-news"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-news" class="icon-youribm-news"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-news" class="icon-youribm-news"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-news" class="icon-youribm-news"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-news" class="icon-youribm-news"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-news" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf148;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>notecard</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-notecard" class="icon-youribm-notecard"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-notecard" class="icon-youribm-notecard"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-notecard" class="icon-youribm-notecard"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-notecard" class="icon-youribm-notecard"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-notecard" class="icon-youribm-notecard"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-notecard" class="icon-youribm-notecard"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-notecard" class="icon-youribm-notecard"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-notecard" class="icon-youribm-notecard"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-notecard" class="icon-youribm-notecard"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-notecard" class="icon-youribm-notecard"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-notecard" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf149;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>palette-circle</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-palette-circle" class="icon-youribm-palette-circle"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-palette-circle" class="icon-youribm-palette-circle"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-palette-circle" class="icon-youribm-palette-circle"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-palette-circle" class="icon-youribm-palette-circle"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-palette-circle" class="icon-youribm-palette-circle"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-palette-circle" class="icon-youribm-palette-circle"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-palette-circle" class="icon-youribm-palette-circle"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-palette-circle" class="icon-youribm-palette-circle"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-palette-circle" class="icon-youribm-palette-circle"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-palette-circle" class="icon-youribm-palette-circle"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-palette-circle" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf14a;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>palette-circle-fill</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-palette-circle-fill" class="icon-youribm-palette-circle-fill"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-palette-circle-fill" class="icon-youribm-palette-circle-fill"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-palette-circle-fill" class="icon-youribm-palette-circle-fill"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-palette-circle-fill" class="icon-youribm-palette-circle-fill"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-palette-circle-fill" class="icon-youribm-palette-circle-fill"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-palette-circle-fill" class="icon-youribm-palette-circle-fill"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-palette-circle-fill" class="icon-youribm-palette-circle-fill"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-palette-circle-fill" class="icon-youribm-palette-circle-fill"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-palette-circle-fill" class="icon-youribm-palette-circle-fill"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-palette-circle-fill" class="icon-youribm-palette-circle-fill"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-palette-circle-fill" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf14b;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>places</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-places" class="icon-youribm-places"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-places" class="icon-youribm-places"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-places" class="icon-youribm-places"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-places" class="icon-youribm-places"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-places" class="icon-youribm-places"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-places" class="icon-youribm-places"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-places" class="icon-youribm-places"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-places" class="icon-youribm-places"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-places" class="icon-youribm-places"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-places" class="icon-youribm-places"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-places" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf14c;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>typography-circle</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-typography-circle" class="icon-youribm-typography-circle"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-typography-circle" class="icon-youribm-typography-circle"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-typography-circle" class="icon-youribm-typography-circle"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-typography-circle" class="icon-youribm-typography-circle"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-typography-circle" class="icon-youribm-typography-circle"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-typography-circle" class="icon-youribm-typography-circle"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-typography-circle" class="icon-youribm-typography-circle"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-typography-circle" class="icon-youribm-typography-circle"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-typography-circle" class="icon-youribm-typography-circle"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-typography-circle" class="icon-youribm-typography-circle"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-typography-circle" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf14d;" />\n        </div>\n      </div>\n      \n      <div class="glyph">\n        <h2>typography-circle-fill</h2>\n        <div class="preview-glyphs">\n          <span class="step size-12"><span class="letters">Pp</span><i id="icon-youribm-typography-circle-fill" class="icon-youribm-typography-circle-fill"></i></span><span class="step size-14"><span class="letters">Pp</span><i id="icon-youribm-typography-circle-fill" class="icon-youribm-typography-circle-fill"></i></span><span class="step size-16"><span class="letters">Pp</span><i id="icon-youribm-typography-circle-fill" class="icon-youribm-typography-circle-fill"></i></span><span class="step size-18"><span class="letters">Pp</span><i id="icon-youribm-typography-circle-fill" class="icon-youribm-typography-circle-fill"></i></span><span class="step size-21"><span class="letters">Pp</span><i id="icon-youribm-typography-circle-fill" class="icon-youribm-typography-circle-fill"></i></span><span class="step size-24"><span class="letters">Pp</span><i id="icon-youribm-typography-circle-fill" class="icon-youribm-typography-circle-fill"></i></span><span class="step size-36"><span class="letters">Pp</span><i id="icon-youribm-typography-circle-fill" class="icon-youribm-typography-circle-fill"></i></span><span class="step size-48"><span class="letters">Pp</span><i id="icon-youribm-typography-circle-fill" class="icon-youribm-typography-circle-fill"></i></span><span class="step size-60"><span class="letters">Pp</span><i id="icon-youribm-typography-circle-fill" class="icon-youribm-typography-circle-fill"></i></span><span class="step size-72"><span class="letters">Pp</span><i id="icon-youribm-typography-circle-fill" class="icon-youribm-typography-circle-fill"></i></span>\n        </div>\n        <div class="preview-scale">\n          <span class="step">12</span><span class="step">14</span><span class="step">16</span><span class="step">18</span><span class="step">21</span><span class="step">24</span><span class="step">36</span><span class="step">48</span><span class="step">60</span><span class="step">72</span>\n        </div>\n        <div class="usage">\n          <input class="class" type="text" readonly="readonly" onClick="this.select();" value=".icon-youribm-typography-circle-fill" />\n          <input class="point" type="text" readonly="readonly" onClick="this.select();" value="&amp;#xf14e;" />\n        </div>\n      </div>\n      \n      <footer>\n        Made with love using <a href="https://github.com/FontCustom/fontcustom">Font Custom</a>.\n      </footer>\n    </div>\n  </body>\n</html>',
"preview_grid.html":'<!DOCTYPE html>\n<html>\n  <head>\n    <title>icon-youribm glyphs preview</title>\n    <style>\n      /* Page Styles */\n      html {\n        text-rendering: optimizeLegibility;\n        -moz-osx-font-smoothing: grayscale;\n         -webkit-font-smoothing: antialiased;\n                 font-smoothing: antialiased;\n      }\n      * {\n        -moz-box-sizing: border-box;\n        -webkit-box-sizing: border-box;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n      }\n      body {\n        background: #fff;\n        color: #444;\n        font: 16px/1.5 "Helvetica Neue", Helvetica, Arial, sans-serif;\n      }\n      a,\n      a:visited {\n        color: #888;\n        text-decoration: underline;\n      }\n      a:hover,\n      a:focus { color: #000; }\n      header {\n        border-bottom: 2px solid #ddd;\n        margin-bottom: 20px;\n        overflow: hidden;\n        padding: 20px 0;\n      }\n      header h1 {\n        color: #888;\n        float: left;\n        font-size: 36px;\n        font-weight: 300;\n      }\n      header a {\n        float: right;\n        font-size: 14px;\n      }\n      .container {\n        margin: 0 auto;\n        max-width: 1200px;\n        min-width: 960px;\n        padding: 0 40px;\n        width: 90%;\n      }\n      .glyph {\n        border-bottom: 1px dotted #ccc;\n        padding: 10px 0 20px;\n        margin-bottom: 20px;\n      }\n      .preview-glyphs { vertical-align: bottom; }\n      .preview-scale {\n        color: #888;\n        font-size: 32px;\n        margin-top: 5px;\n      }\n      .step {\n        display: inline-block;\n        line-height: 1;\n        position: relative;\n        width: 10%;\n      }\n      .step .letters,\n      .step i {\n        -webkit-transition: opacity .3s;\n        -moz-transition: opacity .3s;\n        -ms-transition: opacity .3s;\n        -o-transition: opacity .3s;\n        transition: opacity .3s;\n      }\n      .step:hover .letters { opacity: 1; }\n      .step:hover i { opacity: .3; }\n      .letters {\n        opacity: .3;\n        position: absolute;\n      }\n      .characters-off .letters { display: none; }\n      .characters-off .step:hover i { opacity: 1; }\n\n      .usage { margin-top: 10px; }\n      .usage input {\n        font-family: monospace;\n        margin-right: 3px;\n        padding: 2px 5px;\n        text-align: center;\n      }\n      .usage .point { width: 150px; }\n      .usage .class { width: 250px; }\n      footer {\n        color: #888;\n        font-size: 12px;\n        padding: 20px 0;\n      }\n      /* Icon Font: icon-youribm */\n      @font-face {\n  font-family: "icon-youribm";\n  src: url("./icon-youribm_0991032c2a3c59115f252a32b9733196.eot");\n  src: url("./icon-youribm_0991032c2a3c59115f252a32b9733196.eot?#iefix") format("embedded-opentype"),\n       url("./icon-youribm_0991032c2a3c59115f252a32b9733196.woff") format("woff"),\n       url("./icon-youribm_0991032c2a3c59115f252a32b9733196.ttf") format("truetype"),\n       url("./icon-youribm_0991032c2a3c59115f252a32b9733196.svg#icon-youribm") format("svg");\n  font-weight: normal;\n  font-style: normal;\n}\n\n@media screen and (-webkit-min-device-pixel-ratio:0) {\n  @font-face {\n    font-family: "icon-youribm";\n    src: url("./icon-youribm_0991032c2a3c59115f252a32b9733196.svg#icon-youribm") format("svg");\n  }\n}\n      [class^="icon-youribm-"], [class*=" icon-youribm-"]  {\n        display: inline-block;\n        font-family: "icon-youribm";\n        speak: none;\n        font-style: normal;\n        font-weight: normal;\n        font-variant: normal;\n        text-transform: none;\n        line-height: 1;\n        font-size: 32px;\n      }\n      .name {\n        display: inline-block;\n        line-height: 32px;\n        transform: translateY(-7px);\n        margin-left: 10px;\n      }\n      .group {\n        padding: 10px 0;\n        break-inside: avoid;\n      }\n      #content {\n        columns: 275px;\n\t\tcolumn-count: 3;\n\t\t-moz-column-count: 3;\n\t\t-ms-column-count: 3;\n\t\t-webkit-column-count: 3;\n\t\t-o-column-count: 3;\n      }\n\t\t-moz-column-count: 3;\n      /* spin */\n        .icon-youribm-spin {\n          -webkit-animation: icon-youribm-spin 2s infinite linear;\n          animation: icon-youribm-spin 2s infinite linear;\n        }\n        .icon-youribm-spin-slow {\n          -webkit-animation: icon-youribm-spin 3s infinite linear;\n          animation: icon-youribm-spin 3s infinite linear;\n        }\n        .icon-youribm-spin-fast {\n          -webkit-animation: icon-youribm-spin 1s infinite linear;\n          animation: icon-youribm-spin 1s infinite linear;\n        }\n        /* Chrome, Safari, Opera */\n        @-webkit-keyframes icon-youribm-spin {\n          0% {\n            -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n          }\n          100% {\n            -webkit-transform: rotate(359deg);\n            transform: rotate(359deg);\n          }\n        }\n        /* Standard syntax */\n        @keyframes icon-youribm-spin {\n          0% {\n            -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n          }\n          100% {\n            -webkit-transform: rotate(359deg);\n            transform: rotate(359deg);\n          }\n        }\n    /* reverse-spin */\n      .icon-youribm-reverse-spin {\n        -webkit-animation: icon-youribm-reverse-spin 2s infinite linear;\n        animation: icon-youribm-reverse-spin 2s infinite linear;\n      }\n      .icon-youribm-reverse-spin-slow {\n        -webkit-animation: icon-youribm-reverse-spin 3s infinite linear;\n        animation: icon-youribm-reverse-spin 3s infinite linear;\n      }\n      .icon-youribm-reverse-spin-fast {\n        -webkit-animation: icon-youribm-reverse-spin 1s infinite linear;\n        animation: icon-youribm-reverse-spin 1s infinite linear;\n      }\n      /* Chrome, Safari, Opera */\n      @-webkit-keyframes icon-youribm-reverse-spin {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(-359deg);\n          transform: rotate(-359deg);\n        }\n      }\n      /* Standard syntax */\n      @keyframes icon-youribm-reverse-spin {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(-359deg);\n          transform: rotate(-359deg);\n        }\n      }\n      .icon-youribm-airplane:before { content: "\\f102"; }\n.icon-youribm-avatar-briefcase:before { content: "\\f105"; }\n.icon-youribm-avatar-square:before { content: "\\f108"; }\n.icon-youribm-avatar-star:before { content: "\\f109"; }\n.icon-youribm-avatar-star-circle-fill:before { content: "\\f10a"; }\n.icon-youribm-award-ribbons:before { content: "\\f10c"; }\n.icon-youribm-award-ribbons-circle-fill:before { content: "\\f10d"; }\n.icon-youribm-box-closed-glow:before { content: "\\f10f"; }\n.icon-youribm-calendar-check:before { content: "\\f111"; }\n.icon-youribm-calendar-task:before { content: "\\f113"; }\n.icon-youribm-chart-bar:before { content: "\\f114"; }\n.icon-youribm-chart-line:before { content: "\\f117"; }\n.icon-youribm-chart-pie:before { content: "\\f118"; }\n.icon-youribm-clock:before { content: "\\f11e"; }\n.icon-youribm-clock-inbox:before { content: "\\f14f"; }\n.icon-youribm-communities:before { content: "\\f156"; }\n.icon-youribm-compass:before { content: "\\f122"; }\n.icon-youribm-compensation-circle:before { content: "\\f155"; }\n.icon-youribm-compensation-circle-fill:before { content: "\\f154"; }\n.icon-youribm-component-circle:before { content: "\\f127"; }\n.icon-youribm-component-circle-fill:before { content: "\\f128"; }\n.icon-youribm-diversity:before { content: "\\f129"; }\n.icon-youribm-emergency:before { content: "\\f12b"; }\n.icon-youribm-expenses:before { content: "\\f12d"; }\n.icon-youribm-eyeball-slash:before { content: "\\f157"; }\n.icon-youribm-file-collaborator-manage:before { content: "\\f130"; }\n.icon-youribm-graduation-cap:before { content: "\\f150"; }\n.icon-youribm-headphones:before { content: "\\f132"; }\n.icon-youribm-headset:before { content: "\\f134"; }\n.icon-youribm-iconography-circle:before { content: "\\f136"; }\n.icon-youribm-iconography-circle-fill:before { content: "\\f137"; }\n.icon-youribm-intro-circle:before { content: "\\f13b"; }\n.icon-youribm-intro-circle-fill:before { content: "\\f13c"; }\n.icon-youribm-lightbulb:before { content: "\\f151"; }\n.icon-youribm-logo-adminhub-circle:before { content: "\\f152"; }\n.icon-youribm-logo-adminhub-circle-fill:before { content: "\\f153"; }\n.icon-youribm-logo-ibmerhub-circle:before { content: "\\f141"; }\n.icon-youribm-logo-ibmerhub-circle-fill:before { content: "\\f142"; }\n.icon-youribm-logo-managerhub-circle:before { content: "\\f143"; }\n.icon-youribm-logo-managerhub-circle-fill:before { content: "\\f144"; }\n.icon-youribm-monitor-chart-line:before { content: "\\f146"; }\n.icon-youribm-news:before { content: "\\f148"; }\n.icon-youribm-notecard:before { content: "\\f149"; }\n.icon-youribm-palette-circle:before { content: "\\f14a"; }\n.icon-youribm-palette-circle-fill:before { content: "\\f14b"; }\n.icon-youribm-places:before { content: "\\f14c"; }\n.icon-youribm-typography-circle:before { content: "\\f14d"; }\n.icon-youribm-typography-circle-fill:before { content: "\\f14e"; }\n    </style>\n    <!--[if lte IE 8]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->\n    <script>\n      function toggleCharacters() {\n        var body = document.getElementsByTagName(\'body\')[0];\n        body.className = body.className === \'characters-off\' ? \'\' : \'characters-off\';\n      }\n    </script>\n  </head>\n  <body class="characters-off">\n    <div id="page" class="container">\n      <header>\n        <h1>icon-youribm contains 48 glyphs:</h1>\n        <a onclick="toggleCharacters(); return false;" href="#">Toggle Preview Characters</a>\n      </header>\n      <div id="content">\n      \n        <div class="group">\n          <i id="icon-youribm-airplane" class="icon-youribm-airplane"></i>\n          <div class="name">airplane</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-avatar-briefcase" class="icon-youribm-avatar-briefcase"></i>\n          <div class="name">avatar-briefcase</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-avatar-square" class="icon-youribm-avatar-square"></i>\n          <div class="name">avatar-square</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-avatar-star" class="icon-youribm-avatar-star"></i>\n          <div class="name">avatar-star</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-avatar-star-circle-fill" class="icon-youribm-avatar-star-circle-fill"></i>\n          <div class="name">avatar-star-circle-fill</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-award-ribbons" class="icon-youribm-award-ribbons"></i>\n          <div class="name">award-ribbons</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-award-ribbons-circle-fill" class="icon-youribm-award-ribbons-circle-fill"></i>\n          <div class="name">award-ribbons-circle-fill</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-box-closed-glow" class="icon-youribm-box-closed-glow"></i>\n          <div class="name">box-closed-glow</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-calendar-check" class="icon-youribm-calendar-check"></i>\n          <div class="name">calendar-check</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-calendar-task" class="icon-youribm-calendar-task"></i>\n          <div class="name">calendar-task</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-chart-bar" class="icon-youribm-chart-bar"></i>\n          <div class="name">chart-bar</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-chart-line" class="icon-youribm-chart-line"></i>\n          <div class="name">chart-line</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-chart-pie" class="icon-youribm-chart-pie"></i>\n          <div class="name">chart-pie</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-clock" class="icon-youribm-clock"></i>\n          <div class="name">clock</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-clock-inbox" class="icon-youribm-clock-inbox"></i>\n          <div class="name">clock-inbox</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-communities" class="icon-youribm-communities"></i>\n          <div class="name">communities</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-compass" class="icon-youribm-compass"></i>\n          <div class="name">compass</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-compensation-circle" class="icon-youribm-compensation-circle"></i>\n          <div class="name">compensation-circle</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-compensation-circle-fill" class="icon-youribm-compensation-circle-fill"></i>\n          <div class="name">compensation-circle-fill</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-component-circle" class="icon-youribm-component-circle"></i>\n          <div class="name">component-circle</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-component-circle-fill" class="icon-youribm-component-circle-fill"></i>\n          <div class="name">component-circle-fill</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-diversity" class="icon-youribm-diversity"></i>\n          <div class="name">diversity</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-emergency" class="icon-youribm-emergency"></i>\n          <div class="name">emergency</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-expenses" class="icon-youribm-expenses"></i>\n          <div class="name">expenses</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-eyeball-slash" class="icon-youribm-eyeball-slash"></i>\n          <div class="name">eyeball-slash</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-file-collaborator-manage" class="icon-youribm-file-collaborator-manage"></i>\n          <div class="name">file-collaborator-manage</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-graduation-cap" class="icon-youribm-graduation-cap"></i>\n          <div class="name">graduation-cap</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-headphones" class="icon-youribm-headphones"></i>\n          <div class="name">headphones</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-headset" class="icon-youribm-headset"></i>\n          <div class="name">headset</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-iconography-circle" class="icon-youribm-iconography-circle"></i>\n          <div class="name">iconography-circle</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-iconography-circle-fill" class="icon-youribm-iconography-circle-fill"></i>\n          <div class="name">iconography-circle-fill</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-intro-circle" class="icon-youribm-intro-circle"></i>\n          <div class="name">intro-circle</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-intro-circle-fill" class="icon-youribm-intro-circle-fill"></i>\n          <div class="name">intro-circle-fill</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-lightbulb" class="icon-youribm-lightbulb"></i>\n          <div class="name">lightbulb</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-logo-adminhub-circle" class="icon-youribm-logo-adminhub-circle"></i>\n          <div class="name">logo-adminhub-circle</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-logo-adminhub-circle-fill" class="icon-youribm-logo-adminhub-circle-fill"></i>\n          <div class="name">logo-adminhub-circle-fill</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-logo-ibmerhub-circle" class="icon-youribm-logo-ibmerhub-circle"></i>\n          <div class="name">logo-ibmerhub-circle</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-logo-ibmerhub-circle-fill" class="icon-youribm-logo-ibmerhub-circle-fill"></i>\n          <div class="name">logo-ibmerhub-circle-fill</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-logo-managerhub-circle" class="icon-youribm-logo-managerhub-circle"></i>\n          <div class="name">logo-managerhub-circle</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-logo-managerhub-circle-fill" class="icon-youribm-logo-managerhub-circle-fill"></i>\n          <div class="name">logo-managerhub-circle-fill</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-monitor-chart-line" class="icon-youribm-monitor-chart-line"></i>\n          <div class="name">monitor-chart-line</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-news" class="icon-youribm-news"></i>\n          <div class="name">news</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-notecard" class="icon-youribm-notecard"></i>\n          <div class="name">notecard</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-palette-circle" class="icon-youribm-palette-circle"></i>\n          <div class="name">palette-circle</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-palette-circle-fill" class="icon-youribm-palette-circle-fill"></i>\n          <div class="name">palette-circle-fill</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-places" class="icon-youribm-places"></i>\n          <div class="name">places</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-typography-circle" class="icon-youribm-typography-circle"></i>\n          <div class="name">typography-circle</div>\n        </div>\n      \n        <div class="group">\n          <i id="icon-youribm-typography-circle-fill" class="icon-youribm-typography-circle-fill"></i>\n          <div class="name">typography-circle-fill</div>\n        </div>\n      \n      </div>\n      <footer>\n        Made with love using <a href="http://fontcustom.com">Font Custom</a>.\n      </footer>\n    </div>\n  </body>\n</html>'}},cogs:{"about-tray":{"about-tray.html":'<div class="help-tray">\n\t<h2 class="title-1" data-i18n="app.cogs.about-tray.label">About yourIBM</h2>\n\t<p data-i18n="[html]app.cogs.about-tray.main-text">Please visit the <a target="_blank" href="https://w3-connections.ibm.com/communities/service/html/communitystart?communityUuid=6dd64b47-6463-4cf4-8f10-c18d63bf00b3" >yourIBM Community</a> for support:</p>\n\t<ul>\n\t\t<li><a target="_blank" href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/Wf49a0f070e65_41de_bb0a_ff81f7eb3319/page/yourIBM%20%27How%20to%27%20videos" data-i18n="app.cogs.about-tray.link.view-videos">View tutorial videos</a></li>\n        <li><a target="_blank" href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/Wf49a0f070e65_41de_bb0a_ff81f7eb3319/page/yourIBM%20Tips" data-i18n="app.cogs.about-tray.link.tips">Tips</a></li>\n\t\t<li><a target="_blank" href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/Wf49a0f070e65_41de_bb0a_ff81f7eb3319/page/yourIBM%20FAQ" data-i18n="app.cogs.about-tray.link.faq">Frequently asked questions (FAQs)</a></li>\n\t\t<li><a target="_blank" href="https://w3-connections.ibm.com/blogs/6dd64b47-6463-4cf4-8f10-c18d63bf00b3?lang=en_us" data-i18n="app.cogs.about-tray.link.latest-news">Latest news</a></li>\n\t\t<li><a target="_blank" href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/Wf49a0f070e65_41de_bb0a_ff81f7eb3319/page/Known%20issues%2C%20user%20requests%20and%20ideas" data-i18n="app.cogs.about-tray.link.known-issues">Known issues</a></li>\n\t\t<li><a target="_blank" href="https://w3-connections.ibm.com/forums/html/forum?id=02938aef-43dc-431a-aa3e-d33310744675" data-i18n="app.cogs.about-tray.link.report-defect">Report a defect</a></li>\n\t\t<li><a target="_blank" href="https://w3-connections.ibm.com/communities/service/html/communityoverview?communityUuid=6dd64b47-6463-4cf4-8f10-c18d63bf00b3#fullpageWidgetId=W5c1e02244e5b_47af_925a_51422d9fc0cb" data-i18n="app.cogs.about-tray.link.submit-vote">Submit and vote on ideas</a></li>\n\t\t<li><a target="_blank" href="https://w3-connections.ibm.com/forums/html/forum?id=1acd60be-217f-4858-8144-f10dc105e0f9" data-i18n="app.cogs.about-tray.link.feedback">Review feedback</a></li>\n\t</ul>\n</div>\n'},awards:{"awards-large.html":'<div data-component="private-profile-large">\n\t<div class="button-wrap">\n\t\t<button class="primary-form-btn awards-privacy-button button_title" style="display:none;">\n\t\t\tPrivate data, visible to you and your management.\n\t\t</button>\n\t</div>\n\t<div class="awards-tab-container"></div>\n\t<div class="awards-large"></div>\n\t<div class="privacy-msg" style="display:none;">\n\t\tPrivate data, visible to you and your management.\n\t</div>\n</div>\n',"awards-medium.html":'<div class="card" data-component="private-profile-medium">\n\t<div class="awards">\t\t\n\t\t<div class="content">\n\t\t\t<i class="icon icon-youribm-award-ribbons-circle-fill"></i>\n\t\t\t<div class="copy-container">\n\t\t\t\t<span class="copy">Give IBMers recognition, and see awards you have received.</span>\n\t\t\t</div>\n\t\t\t<button class="flip-1"><span>View more about your awards?</span></button>\n\t\t</div>\n\t</div>\n</div>\n',"give-tab.html":'<!-- Give Recognition -->\n<div class="tab content give active">\n\n\t<div class="section">\n\t\t<h1 class="tab-header" role="heading">IBMer Recognition</h1>\n\t\t<div class="section intro">\n\t\t\t<p>\n\t\t\t\tIBMer Recognition is a suite of branded online tools that enable IBMers\n\t\t\t\tto share thanks and appreciation with colleagues anywhere at anytime.\n\t\t\t\tMost are available to all IBMers, other to IBM managers. Done right,\n\t\t\t\tIBMer Recognition reinforces the values of IBMers\' contributions and\n\t\t\t\tresults, improves morale, and motivates future high performance.\n\t\t\t</p>\n\t\t\t<br/>\n\t\t\t<a href="https://w3-03.sso.ibm.com/FIM/sps/IBM_W3_SAML20_EXTERNAL_SIGN_REQUIRED/saml20/logininitial?PartnerId=ibmrr&Target=https://ibmrr.performnet.com/ibmrr/seamlessLogon.do" target="_blank">\n\t\t\t\tLearn more about recognition at IBM\n\t\t\t\t<i class="icon-awf-chevron-right"/>\n\t\t\t</a>\n\t\t</div>\n\n\t\t<div class="section recognition-types">\n\t\t\t<h2 class="table-section-header" role="heading">Types of recognition</h2>\n\t\t\t<ul role="list">\n\t\t\t\t<li id="bluethx" class="recognition-type" role="listitem">\n\t\t\t\t\t<div class="details">\n\t\t\t\t\t\t<h3 role="heading">BlueThxAward</h3>\n\t\t\t\t\t\t<p>BlueThx is a Connections widget for sharing thank you\n\t\t\t\t\t\t\tmessages that display on IBMer\'s Connections profiles. Other\n\t\t\t\t\t\t\tusers can see who thanked which IBMer and why, and add their\n\t\t\t\t\t\t\tcomments. BlueThx is the most social IBMer Recognition tool.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="actions">\n\t\t\t\t\t\t<a href="http://cv01a046.w3cloud.grpc.ibm.com/hr/bluethx/" target="_blank" class="button outline">Go to application <i class="icon-awf-chevron-right"/></a>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\t<li id="ibmer-appreciation" class="recognition-type" role="listitem">\n\t\t\t\t\t<div class="details">\n\t\t\t\t\t\t<h3 role="heading">IBMer Appreciation Cards</h3>\n\t\t\t\t\t\t<p>Appreciation Cards, with fun, animated graphics takes from\n\t\t\t\t\t\t\tIBM\'s design heritage, enable you to share your thanks and\n\t\t\t\t\t\t\tappreication directly with one or more colleagues.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="actions">\n\t\t\t\t\t\t<a href="https://ibmrr.performnet.com/ibmrr/recognitionWizard/startRecognitionWizard.do?method=display&selectedNode=1075097&clientState=SfCG3PaEvBn6lnt8oP373kK5tx14Rz%2FYgvjCdiMHXLhNQufiIIw5sVppVHnU8w3PnCs7exBMSX70%0AsyGp5nEz4fSoyQPGpkFNRRJYa3yLbPE6%2BSkHQipDE2d0SlRYf1FKeLoggEa%2BBm0DWX%2FdAuskUeCX%0AGsgB%2Fr1a%2BQrIeLSvloruiLQP&cryptoPass=1&claimableNodes=1" target="_blank" class="button outline">Go to application <i class="icon-awf-chevron-right"/></a>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\t<li id="sametime" class="recognition-type" role="listitem">\n\t\t\t\t\t<div class="details">\n\t\t\t\t\t\t<h3 role="heading">Sametime Emoticons</h3>\n\t\t\t\t\t\t<p>Add eight animated and IBM branded emoticons to your Sametime\n\t\t\t\t\t\t\temoticon palette to share with IBM colleagues during chats.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="actions">\n\t\t\t\t\t\t<a href="https://ibmrr.performnet.com/ibmrr/emoticon.do" target="_blank" class="button outline">Go to application <i class="icon-awf-chevron-right"/></a>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div class="section recognition-types">\n\t\t\t<h2 class="table-section-header" role="heading">IBM Managers</h2>\n\t\t\t<ul role="list">\n\t\t\t\t<li id="purl" class="recognition-type" role="listitem">\n\t\t\t\t\t<div class="details">\n\t\t\t\t\t\t<h3 role="heading">PURL - Personal URL</h3>\n\t\t\t\t\t\t<p>Achieving the honor of certain enterprise recognition programs,\n\t\t\t\t\t\t\tsuch as Best of IBM, the Hundred Percent Club, and the Sales\n\t\t\t\t\t\t\tEminence Award, as well as IBM service anniversaries, gives the\n\t\t\t\t\t\t\tadded reward of a PURL - or personal recognition web page.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="actions">\n\t\t\t\t\t\t<a href="https://w3-03.sso.ibm.com/FIM/sps/IBM_W3_SAML20_EXTERNAL_SIGN_REQUIRED/saml20/logininitial?PartnerId=ibmrr&Target=https://ibmrr.performnet.com/ibmrr/seamlessLogon.do?optparm=dlink:rec" target="_blank" class="button outline">Go to application <i class="icon-awf-chevron-right"/></a>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\t<li id="mgr-choice" class="recognition-type" role="listitem">\n\t\t\t\t\t<div class="details">\n\t\t\t\t\t\t<h3 role="heading">Manager\'s Choice Award</h3>\n\t\t\t\t\t\t<p>Now in pilot, the Manager\'s Choice Award is a new program in\n\t\t\t\t\t\t\tIBM\'s Eminence and Excellence Recognition tier. Managers in\n\t\t\t\t\t\t\tparticipating units and geographies receive an allocation of\n\t\t\t\t\t\t\tpoints participating units and geographies receive an\n\t\t\t\t\t\t\tallocation of points that can be awarded to employees who\n\t\t\t\t\t\t\tdemonstrate our purpose, values and practices, and are\n\t\t\t\t\t\t\tessential to our clients and company. Points are redeemable\n\t\t\t\t\t\t\tthrough an online catalog for exciting trips and valuable\n\t\t\t\t\t\t\tmerchandise, including IBM logoed merchandise.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="actions">\n\t\t\t\t\t\t<a href="https://w3-03.sso.ibm.com/FIM/sps/IBM_W3_SAML20_EXTERNAL_SIGN_REQUIRED/saml20/logininitial?PartnerId=ibmrr&Target=https://ibmrr.performnet.com/ibmrr/seamlessLogon.do" target="_blank" class="button outline">Go to application <i class="icon-awf-chevron-right"/></a>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>',"history-tab.html":'<div class="content history-tab">\n\t<h1 class="tab-header" role="heading">Awards History</h1>\n\t<div class="table-container">\n\t\t<table>\n\t\t\t<thead>\n\t\t\t\t<th>Award title</th>\n\t\t\t\t<th>Date</th>\n\t\t\t\t<th>Amount</th>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{{#a}}\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>{{TAWARD}}</td>\n\t\t\t\t\t\t<td>{{DAWARD}}</td>\n\t\t\t\t\t\t<td>{{BAWARD}} {{CCURISO}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t{{/a}}\n\t\t\t</tbody>\n\t\t</table>\n\t</div>\n</div>'},bluepages:{"business-card.html":'<div class="business-card">\n\t<div class="left-panel">\n\t{{#avatar}}\n\t\t{{#image}}\n\t\t<a>\n\t\t\t<img class=\'popup-avatar\' src=\'{{image}}\' alt=\'{{name}}\' width="115" height="115"/>\n\t\t</a>\n\t\t{{/image}}\n\t{{/avatar}} \n    {{^avatar}}\n    \t<span class=\'avatar initials profile-img-80\'>{{initials}}</span>\n    {{/avatar}}\n\t</div>\n\t<div class="right-panel">\n\t\t<h1><a class="name-link" href="http://w3.ibm.com/bluepages/profile.html?email={{ email }}" target=\'_blank\'>{{ name }}</a></h1>\n\t\t{{#role}}\n\t\t<h2 class="ellipsis">{{ role }}</h2>\n\t\t{{/role}}\n\n\t\t<div class="contact-block mobile-view">\n\t\t\t{{#org }}\n\t\t\t<div class="dept">{{ org }}</div>\n\t\t\t{{/org}} \n\t\t\t{{#address }}\n\t\t\t<div class="city">{{ address }}</div>\n\t\t\t{{/address}} \n\t\t</div>\n\t\t{{#assistant}}\n\t\t<p class="assistant">\n\t\t\t<span data-i18n="app.cogs.bluepages.result.assistant">Assistant</span>: <a href="{{assistant_url}}" target="_blank" title="{{assistant}}" class="js-bluepages-result-assistant-name">{{assistant}}</a>\n\t\t</p>\n\t\t{{/assistant}}\n\t\t<div class="contact-block">\n\t\t\t{{#tel_office }}\n\t\t\t<div class="phone">\n\t\t\t\t<a data-i18n="[title]app.cogs.bluepages.cta.click-to-call" href="tel:{{ tel_office }}">{{ tel_office }}</a> (<span data-i18n="app.cogs.bluepages.result.office">Office</span>)\n\t\t\t</div>\n\t\t\t{{/tel_office}} \n\t\t\t{{#tel_mobile }}\n\t\t\t<div class="phone">\n\t\t\t\t<a data-i18n="[title]app.cogs.bluepages.cta.click-to-call" href="tel:{{ tel_mobile }}">{{ tel_mobile }}</a> (<span data-i18n="app.cogs.bluepages.result.mobile">Mobile</span>)\n\t\t\t</div>\n\t\t\t{{/tel_mobile}}\n\t\t\t{{#tel_tieline }}\n\t\t\t<div class="phone">\n\t\t\t\t{{ tel_tieline }} (<span data-i18n="app.cogs.bluepages.result.tieline">Tieline</span>)\n\t\t\t</div>\n\t\t\t{{/tel_tieline}}\n\n\t\t\t{{#email}}\n\t\t\t<div class="email">\n\t\t\t\t<a title="{{ email }}" href="mailto:{{ email }}">{{ email }}</a> \n\t\t\t</div>\n\t\t\t{{/email}}\n\t\t\t<div class="notes-id">{{ notes }}</div>\n\t\t</div>\n\t</div>\n</div>',"grid-item.html":'<!--BluePages Grid Item-->\n<div class="bluepages-search__result__views__grid__item__header">\n    <p class="profile-img">\n        {{#avatar}}<img class="js-bluepages-result-item-img profile-img-64" src="{{image}}" data-i18n="[alt]app.cogs.bluepages.result.profile-img-alt">{{/avatar}} {{^avatar}}\n        <span class=\'avatar initials profile-img-64\'>{{initials}}</span>{{/avatar}}\n    </p>\n    <p class="profile-info">\n        <a href="javascript:;" class="js-bluepages-result-item-name title-4">{{name}}</a>\n        <span class="js-bluepages-result-item-role">{{role}}</span>\n    </p>\n</div>\n<div class="bluepages-search__result__views__grid__item__body">\n\t{{#org}}<p>{{org}}</p>{{/org}} \n\t{{#address}}<p>{{address}}</p>{{/address}}\n    {{#assistant}}\n    <p class="assistant">\n        <span data-i18n="app.cogs.bluepages.result.assistant">Assistant</span>: <a href="{{assistant_url}}" target="_blank" title="{{assistant}}" class="js-bluepages-result-assistant-name">{{assistant}}</a>\n    </p>\n    {{/assistant}}\n\t<div class="contact">\n\t\t{{#tel_office}}<p><a data-i18n="[title]app.cogs.bluepages.cta.click-to-call" href="tel:{{ tel_office }}" class="js-bluepages-result-item-tel-office">{{ tel_office }}</a> (<span data-i18n="app.cogs.bluepages.result.office">Office</span>)</p>{{/tel_office}} \n\t\t{{#tel_mobile}}<p><a data-i18n="[title]app.cogs.bluepages.cta.click-to-call" href="tel:{{ tel_mobile }}" class="js-bluepages-result-item-tel-mobile">{{ tel_mobile }}</a> (<span data-i18n="app.cogs.bluepages.result.mobile">Mobile</span>)</p>{{/tel_mobile}} \n\t\t{{#email}}<p><a href="mailto:{{email}}" title="{{email}}" class="js-bluepages-result-item-email">{{email}}</a></p>{{/email}} \n\t\t{{#notes}}<p>{{notes}}</p>{{/notes}}\n\t</div>\n</div>\n',
"list-item.html":'<p class="js-bluepages-result-item-img profile-img">\n    {{#avatar}}<img class="profile-img-32" src="{{image}}" data-i18n="[alt]app.cogs.bluepages.result.profile-img-alt">{{/avatar}} \n    {{^avatar}}\n    <span class=\'avatar initials profile-img-32\'>{{initials}}</span>{{/avatar}}\n</p>\n<p class="profile-info">\n    <a href="javascript:;" class="js-bluepages-result-item-name title-4">{{name}}</a>\n    <span class="js-bluepages-result-item-role role">{{role}}</span>\n    <span class="contact">\n    \t<a href="mailto:{{email}}" title="{{email}}" class="js-bluepages-result-item-email">{{email}}</a>\n\t\t{{#tel_office}} | <a data-i18n="[title]app.cogs.bluepages.cta.click-to-call" href="tel:{{ tel_office }}" class="js-bluepages-result-item-tel-office">{{ tel_office }}</a> (<span data-i18n="app.cogs.bluepages.result.office">Office</span>) {{/tel_office}} \n\t\t{{#tel_mobile}} | <a data-i18n="[title]app.cogs.bluepages.cta.click-to-call" href="tel:{{ tel_mobile }}" class="js-bluepages-result-item-tel-mobile">{{ tel_mobile }}</a> (<span data-i18n="app.cogs.bluepages.result.mobile">Mobile</span>) {{/tel_mobile}} \n\t</span>\n    <button class="js-bluepages-copy-icon icon-awf-copy" data-i18n="app.cogs.bluepages.cta.click-to-copy" data-i18n-target=".awf-access">\n        <label class="awf-access">Click to copy</label>\n    </button>\n</p>\n',"search.html":'<!--BluePages Search View -->\n<div class="js-bluepages-search bluepages-search">\n\t<div class="js-bluepages-search-logo bluepages-search__logo">\n\t\t<p>\n\t\t\t<i class="icon-awf-w3-logo-bluepages-text"><span class="awf-access" data-i18n="app.cogs.bluepages.label"></span></i>\n\t\t</p>\n\t</div>\n\t<!--BluePages Result View-->\n\t<!--Search input-->\n\t<div class="js-bluepages-search-result-input bluepages-search__result__input">\n\t\t<button type="submit" class="js-bluepages-result-submit awf-search__submit icon-awf-search -awf-link -text-decoration-none" data-i18n="[title]app.search.label" title="Search"><span data-i18n="app.search.label" class="awf-access">Search</span></button>\n\t\t<label class="awf-access js-bluepages-result-input-label" data-i18n="app.cogs.bluepages.search.placeholder">Seach by name, city, job title, etc...</label>\n\t\t<input data-i18n="[placeholder]app.cogs.bluepages.search.placeholder" placeholder="Seach by name, city, job title, etc..." class="js-bluepages-result-input awf-search__input -awf-focus -border-color-link" autocomplete="off" type="search">\n\t\t<button type="clear" class="js-bluepages-result-clear awf-search__clear icon-awf-op-times-bold -color-alt" tabindex="0" data-i18n="[title]awf.common.clear" title="Clear"><span data-i18n="awf.common.clear" class="awf-access">Clear</span></button>\n\t</div>\n\t<!-- Result Action Bar -->\n\t<div class="js-bluepages-search-result-bar bluepages-search__result__bar">\n\t\t<p class="js-bluepages-search-result-bar-info bluepages-search__result__bar__info"></p>\n\t\t<ul class="js-bluepages-search-result-bar-controller bluepages-search__result__bar__controller"><li>temp icon</li></ul>\n\t</div>\n\t<!-- Result List -->\n\t<div class="js-bluepages-search-results bluepages-search__result__views" tabindex="-1">\n\t\t<ul class="bluepages-search__result__views__list" role="list"></ul>\n\t</div>\n\t<!-- Result footer -->\n\t<div class="js-bluepages-search-result-footer bluepages-search__result__footer">\n\t\t<button class="flip-1">View more people</button>\n\t</div>\n</div>'},"comment-form":{"comment-form.html":'<div class="feedback-tray-content">\n\t<p class="feedback-header">Feedback</p>\n\t<p class="feedback-content">Due to a vendor change, we need to update this section to enable you to enter feedback here</p>\n\t<p class="feedback-content">In the meantime, you can visit our <a href="https://w3-connections.ibm.com/communities/service/html/communityoverview?communityUuid=6dd64b47-6463-4cf4-8f10-c18d63bf00b3" class="awf-focus" target="_blank">Community</a> to provide feedback, or use the <a href="http://w3.ibm.com/feedback/" class="awf-focus" target="_blank">w3 Intranet Feedback system</a></p>\n</div>'},community:{"large-view-item.html":'<li>\n    <div data-primitive="img" class="item-img">\n        <a target="_blank" href="#" data-primitive="community_url" class="related_links_holder">\n            <img src="" width="60" height="60" data-primitive="community_thumb">\n        </a>\n    </div>\n    <div data-primitive="content" class="item-content">\n        <ul data-primitive="invite" class="invites">\n            <li data-primitive="invited"><span class="badging yellow" data-i18n="app.cogs.community.result.invited">Invited</span></li>\n            <li data-primitive="accept"><a href="javascript:;" title="" data-i18n="app.cogs.community.result.accept;[title]app.cogs.community.result.accept">Accept</a></li>\n            <li data-primitive="reject"><a href="javascript:;" title="" data-i18n="app.cogs.community.result.decline;[title]app.cogs.community.result.decline">Decline</a></li>\n        </ul>\n        <h3 class="feed-title"><a target="_blank" href="#" data-primitive="short_title_url" class="related_links_holder"><span data-primitive="short_title"></span></a></h3>\n        <time data-primitive="pub_date" class="caption"></time>\n        <ul class="social-actions" data-primitive="social_actions">\n            <li>\n                <a data-primitive="pin" role="button" title="Pin this community" href="javascript:;" data-i18n="[title]app.common.social-actions.pin" >\n                    <i class="icon-awf-thumbtack"></i><span class="access"  data-i18n="app.common.social-actions.pin">Pin this community</span>\n                </a>\n            </li>\n        </ul>\n    </div>\n</li>\n',"large-view.html":'<div class="card">\n    <ul class="menu-bar" data-primitive="menu_bar">\n        <li data-i18n="app.cogs.community.sort.label">Sort by:</li>\n        <li data-primitive="sort_by"></li>\n        <li>\n            <label for="communities_filter_by_title_input" class="access" data-i18n="app.cogs.community.search.placehoder">Search your communities</label>\n            <input id="communities_filter_by_title_input" type="text"  placeholder="Search your communities" data-i18n="[placeholder]app.cogs.community.search.placehoder" class="filter-by" data-primitive="filter_by" >\n        </li>\n    </ul>\n    <ul class="source-bar" data-primitive="source_by_wrap">\n        <li><a href="javascript:;" data-i18n="[title]app.cogs.community.views.member" data-primitive="source_by"><span data-i18n="app.cogs.community.views.member">I\'m a member</span><i class="icon-awf-chevron-down"></i></a></li>\n    </ul>\n    <div data-primitive="feed_list" class="feed-list">\n        <ul class="content community-list" data-container="content"></ul>\n        <!--<div class="view_all" data-primitive="view_all">-->\n        <!--<p><i class="icon-youribm-communities"></i></p>-->\n        <!--<p data-primitive="more_btn"><a role="button" class="button solid-btn" target="_blank" href="https://w3-connections.ibm.com/communities/service/html/ownedcommunities">More communities</a></p>-->\n        <!--</div>-->\n    </div>\n    <p class="cta-btn">\n        <button class="flip-1" id="community_large_view_more" data-i18n="app.cogs.community.cta.view-more">View more Communities</button>\n    </p>\n</div>\n',"medium-view-item.html":'<article >\n    <div data-primitive="img" class="item-img">\n        <a target="_blank" name="commImg" href="#">\n            <img height="45" width="45" src="">\n        </a>\n    </div>\n    <div data-primitive="content" class="item-content">\n        <h4><a data-primitive="title"  href="" target="_blank"  ></a></h4>\n        <time data-primitive="pub_date" class="caption"></time>\n    </div>\n</article>',"medium-view.html":'<div class="card community-medium" >\n    <div class="content">\n        <div class="feed-wrap">\n            <article role=\'article\' data-component=\'view-more-flip\' aria-label="app.cogs.community.cta.start-pin">\n                <p class=\'pin-word\'>\n                    <span data-i18n="app.cogs.community.message.no-favorites">You haven\'t pinned any favorites yet, pin some now.</span> <span class=\'icon-awf-thumbtack\'></span>\n                </p>\n                <div class=\'view-more-slide\' data-primitive=\'content\'> \n                    <p class=\'view-more-slide__icon\' data-primitive=\'desc\'> <i data-primitive=\'img\' class=\'icon-youribm-communities\'></i>  \n                    </p>\n                </div>\n            </article>\n            <div data-primitive="feed_list" class="communities-feed">\n\n                <button data-primitive="login" type="button" class="primary-form-btn" style="display:none" data-i18n="app.common.sign-in">Sign in</button>\n                <div data-primitive="pinned_list"></div>\n            </div>\n        </div>\n        <p data-primitive="view_more" class="cta-btn">\n            <button class="flip-1" data-i18n="app.cogs.community.cta.view-more">View more communities</button>\n        </p>\n    </div>\n</div>\n'},compensation:{"current-tab.html":'<div class="col two-of-three">\n\t\t<div class="current-salary-container">\n\t\t\t<h2 class="title-1" role="header">\n\t\t\t\t<span class="grey block">Your current approximate Annual Salary is:</span>\n\t\t\t\t<span class="extra-large-font-size">\n\t\t\t\t\t{{#compensation.approxAnnualSalary.value}}\n\t\t\t\t\t\t{{compensation.approxAnnualSalary.value}}\n\t\t\t\t\t\t{{compensation.approxAnnualSalaryCurr.value}}\n\t\t\t\t\t{{/compensation.approxAnnualSalary.value}}\n\t\t\t\t\t{{^compensation.approxAnnualSalary.value}}\n\t\t\t\t\t\t<p>Not found.</p>\n\t\t\t\t\t{{/compensation.approxAnnualSalary.value}}\n\t\t\t\t</span>\n\t\t\t</h2>\n\t\t</div>\n</div>\n<span class="vertical-divider" style="height: 340px;"></span>\n<div class="col one-of-four">\n\t<div class="current-compensation-container">\n\t\t<ul class="label-list vertical" role="list">\n\t\t\t\t<li><span class="label compensation" role="listitem">Bonus Pay</span>\n\t\t\t\t\t{{#compensation.bonusPay.value}}\n\t\t\t\t\t\t{{compensation.bonusPay.value}} {{compensation.bonusPayCurr.value}}\n\t\t\t\t\t{{/compensation.bonusPay.value}}\n\t\t\t\t\t{{^compensation.bonusPay.value}}\n\t\t\t\t\t\t<p>Not found.</p>\n\t\t\t\t\t{{/compensation.bonusPay.value}}\n\t\t\t\t</li>\n\t\t\t<!--<li><span class="label compensation">Unvested Equity</span>\n\t\t\t\t{{holdingPower.value}} {{holdingPowerCurr.value}}\n\t\t\t</li>-->\n\t\t\t<li><span class="label compensation" role="listitem">Awards</span>\n\t\t\t\t{{#compensation.awards3Year.value}}\n\t\t\t\t\t{{compensation.awards3Year.value}} {{compensation.awards3YearCurr.value}}\n\t\t\t\t{{/compensation.awards3Year.value}}\n\t\t\t\t{{^compensation.awards3Year.value}}\n\t\t\t\t\t<p>Not found.</p>\n\t\t\t\t{{/compensation.awards3Year.value}}\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>',"equity-tab.html":'{{#e.length}}\n<h2 class="tab-header title-1" role="header">Equity Grants</h2>\n<div class="table-container">\n\t<table>\n\t\t<thead>\n\t\t\t<th>Equity grant type</th>\n\t\t\t<th>Grant date</th>\n\t\t\t<th>Units granted</th>\n\t\t\t<th>Unvested units</th>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t{{#e}}\n\t\t\t\t<tr>\n\t\t\t\t\t<td>{{TAWARD}}</td>\n\t\t\t\t\t<td>{{DAWARD}}</td>\n\t\t\t\t\t<td>{{QGRANT}}</td>\n\t\t\t\t\t<td>{{QUNVEST}}</td>\n\t\t\t\t</tr>\n\t\t\t{{/e}}\n\t\t</tbody>\n\t</table>\n</div>\n{{/e.length}}\n\n{{^e}}\n\t<h3 class="title-3">No equity found.</h3>\n{{/e}}\n\n\n\n<div class="disclaimer">\n\t<!--{{#quarterlyPlanningPrice}}<span class="bold">Quarterly Planning Price: {{quarterlyPlanningPrice}}</span>{{/quarterlyPlanningPrice}}-->\n\t<!--<span class="right">*Acquisition grants not included</span>-->\n</div>',"history-tab.html":'{{#compensation.history.length}}\n<h2 class="tab-header title-1" role="header">Compensation History*</h2>\n{{/compensation.history.length}}\n{{#compensation.history}}\n<div class="section year-container">\n\t<h3 class="table-section-header title-3" role="header">{{year}}</h3>\n\t{{#changes}}\n\t<div class="inner-section">\n\t\t<div class="col one-of-two">\n\t\t\t<ul class="label-list vertical" role="list">\n\t\t\t\t<li><span class="label" role="listitem">Salary Change</span> {{amount}} {{curr}}\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div class="col one-of-two">\n\t\t\t<ul class="label-list vertical" role="list">\n\t\t\t\t<li><span class="label" role="listitem">Change Date</span> {{date}}\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t{{/changes}}\n</div>\n{{/compensation.history}} \n{{#compensation.history.length}}\n<div class="disclaimer">\n\t\t<span class="right">*This chart only shows the last three compensation history changes</span>\n</div>\n{{/compensation.history.length}}\n{{^compensation.history}}\n<h3 class="title-3">No compensation history found.</h3>\n{{/compensation.history}}',"large.html":'<div data-component="private-profile-large">\n\t{{#blackout}}\n\t\t<p class="blackout">Compensation information is being refreshed and is not available at this time.<br/>\n\t\t\tPlease check back after {{blackoutEndDate}}.<br/><br/>\n\t\t\tWe apologize for any inconvenience.\n\t\t</p>\n\t{{/blackout}}\n\t{{^blackout}}\n\t<div class="button-wrap">\n\t\t<button class="primary-form-btn compensation-privacy-button" style="display:none;">Private data, visible to you and your management.</button>\n\t</div>\n\t<div class="compensation">\n\t\t<div class="tabs-container"></div>\n\t\t<div class="tabs-content content"></div>\n\t</div>\n\t{{/blackout}}\n\t<div class="privacy-msg" style="display:none;">Private data, visible to you and your management.</div>\n</div>\n',"medium.html":'<div class="card" data-component="private-profile-medium">\n\t<div class="compensation">\t\t\n\t\t<div class="content">\n\t\t\t<i class="icon icon-youribm-compensation-circle-fill"></i>\n\t\t\t<div class="copy-container">\n\t\t\t\t<span class="copy">Private information about your current compensation and latest history.</span>\n\t\t\t</div>\n\t\t\t<button class="flip-1" data-hover="View full compensation profile"><span>View more about compensation?</span></button>\t\t\t\n\t\t</div>\n\t</div>\n</div>\n'},learning:{"add-learning-view.html":'<div>\n    <div data-primitive="message"></div>\n</div>',"large-course-item-view.html":'<div class="learning-content course-item">\n    <img src="{{icon_url}}" alt="{{title}}" class="course-item__thumbnail" width="60" height="60">\n\t<div class="course-item__info">\n\t\t<p class="course-item__info__feature">\n\t\t\t<span class="badging label-2 js-course-type">{{type}}</span>\n\t\t\t<span>{{source}}</span>\n\t\t\t<span class="caption due-date">{{due_date}}</span>\n\t\t\t<span class="caption js-duration">{{duration}}</span>\n        </p>\n\t\t<h4 class="course-item__info__title title-2">\n\t\t\t<a href="{{url}}" target="_blank"><span data-primitive="headline">{{title}}</span></a>\n\t\t</h4>\n\t\t<button title="Learn more" class="flip-2" href="{{url}}" data-i18n="{{i18n_featured_learn_more}}">Learn more </button>\n\t</div>\n</div>\n',"large-hero-item-view.html":'<div class="learning-content">\n    <div class="headline">\n        <img src="{{icon_url}}" alt="{{title}}" class="left" width="190" height="190">\n        <div class="right-content">\n            <p class="learning-overview">\n                <span class="badging label-2">{{type}}</span><span class="caption due-date">{{due_date}}</span><span class="caption">{{duration}}</span>\n            </p>\n            <h4><a href="{{url}}" target="_blank">From <span data-primitive="source">{{source}}</span>:\n\t\t\t\t<br/>\n\t\t\t\t<span>{{title}}</span></a></h4>\n            <time class="caption">{{date}}</time>\n            <p >{{abstract}}</p>\n            <button title="Learn more" class="flip-2" href="{{url}}" data-i18n="{{i18n_featured_learn_more}}">Learn more </button>\n        </div>\n    </div>\n</div>',"large-view.html":'<div class="card js-learning-large" data-component="learning-large">\n    <div class="toogle-bar"></div>\n    <div class="content" data-primitive="main_content" tabindex="0">\n        <div class="recommended section"></div>\n        <div class="your-learning"></div>\n        <div class="section add-learning">\n            <p class="title label-1" data-i18n="{{i18n_t40_add_cta}}">Add Learning Hours</p>\n        </div>\n        <div data-primitive="add_success" class="add-success">\n            <p><i class="icon icon-youribm-graduation-cap"></i></p>\n            <p class="title-2" data-i18n="{{i18n_t40_thx_add_learning}}">Thank you for adding hours</p>\n            <p class="back-to-btn">\n                <button class="tertiary-form-btn" data-i18n="{{i18n_t40_back_scorecard}}">Back to scorecard</button>\n            </p>\n        </div>\n        <div style="display:none">\n            <button class="primary-form-btn" data-i18n="{{i18n_t40_connect_learning}}">Connect to Your Learning</button>\n        </div>\n        <div class="section recommended-list">\n            <p class="title label-1" data-i18n="{{i18n_featured_view_more}}">View more courses</p>\n            <div class="course-list"></div>\n        </div>\n        <div class="section your-learning-list">\n            <p class="title label-1" data-i18n="{{i18n_t40_list_heading}}">Your courses and activities</p>\n            <div class="course-list"></div>\n        </div>\n    </div>\n</div>\n',"medium-item-view.html":'<section class="learning-overview" role="region"><span class="badging label-2">{{type}}</span><span class="caption due-date">{{due_date}}</span><span class="caption">{{duration}}</span></section>\n<div class="learning-content">\n    <div class="headline">\n        <img src="{{icon_url}}" alt="{{title}}" class="right" width="75" height="75">\n        <h4 class="title-2" aria-label="{{title}}"><a href="{{url}}" target="_blank">{{title}}</a></h4>\n        <p data-primitive="desc" class="desc">{{abstract}}</p>\n    </div>\n</div>',"medium-view.html":'<div class="card js-learning-medium" data-component="learning-medium">\n    <div class="toogle-bar"></div>\n    <div class="content">\n        <div class="recommended" aria-labelledby="learning-tab-1" role="tabpanel"></div>\n        <div class="your-learning" aria-labelledby="learning-tab-2" role="tabpanel"></div>\n        <div class="your-learning-website" aria-labelledby="learning-tab-3" role="tabpanel">\n                <p >\n                    <img alt="Your Learning Logo" src="images/learning/yourlearning.png"/>\n                </p>\n                <p data-i18n="app.cogs.learning.yours-website.message">\n                    Access Your Learning, a personalized learning environment that helps each IBMer easily find, consume, and track learning content.\n                </p>\n                <p>\n                    <button class="flip-2" data-i18n="app.cogs.learning.yours-website.cta">Visit the Your Learning Site</button>\n                </p>\n        </div>\n    </div>\n</div>\n',"think-view.html":'<div class="think40 {{Accomplished}}">\n    <p class="think40__title title-2" data-i18n="{{i18n_t40_total}}">Total Learning Hours to Date</p>\n    <p class="think40__hours"><em data-i18n="[html]{{i18n_t40_accomplished}}">{{currentYearAccomplishment}}</em><span>{{currentYearPercentage}}</span>{{currentYearHours}} <em data-i18n="{{i18n_t40_hours_completed}}">hours completed</em></p>\n    <div class="progress__wrap progress" data-progress-percent="{{currentYear}}">\n        <div class="progress__wrap__bar progress"></div>\n    </div>\n    <ul class="progress__wrap__scales">\n        <li class="progress__wrap__scales__unit"><span>0</span></li>\n        <li class="progress__wrap__scales__unit"><span>10</span></li>\n        <li class="progress__wrap__scales__unit"><span>20</span></li>\n        <li class="progress__wrap__scales__unit"><span>30</span></li>  \n        <li class="progress__wrap__scales__unit"><span>40</span></li>\n    </ul>\n    <p class="think40__add">\n        <button class="primary-form-btn" data-i18n="{{i18n_t40_add_cta}}">Add Learning Hours</button>\n    </p>\n</div>'},"masthead-dropdown":{"masthead-dropdown.html":'<div class="ginni-jan-2017">\n\t<img class="ginni-jan-2017__image" alt="Ginni" src="images/masthead-dropdown/2017-01-19-ginny-round-img.png" />\n\t<h2 class="ginni-jan-2017__copy">Transparency and trust in the Cognitive era: <a target="_blank" href="https://w3-connections.ibm.com/blogs/30f982c3-616f-4b5b-9978-3b711e1fda79/entry/Principles_for_the_Cognitive_Era">Ginni shares our principles.</a></h2>\n</div>\n'},"mgrhub-header":{"mgrhub-header.html":'<div class="mgrhub-temp-header">\n\t<div class="mgrhub-temp-icon"></div>\n\t<div class="mgrhub-temp-content">\n\t\t<h3>Welcome to the New Manager Hub</h3>\n\t\t<p>We are working hard to put information at your fingertips, allow you to act, and get back to higher value work â¦ for your team, and your clients. Please let us know how we are doing, and where we can improve. Also, check out the <span class="bold">Manager Hub Mobile app</span> in the App Catalog.</p>\n\t\t<button class="primary-form-btn" onclick=\'window.open("http://w3-workplace.ibm.com/feedback/","_blank")\' role="link">Feedback</button>\n\t\t<button class="primary-form-btn left" onclick=\'window.open("https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff","_blank")\' role="link">Community</button>\n\t\t<button class="primary-form-btn left" onclick=\'window.open("https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager%20Hub%20Mobile%20FAQ","_blank")\' role="link">Mobile App</button>\n\t</div>\n</div>\n'},minipulse:{"card.html":'<div class="card card-minipulse">\n    <div class="content" card-content></div>\n</div>\n',"empty.html":'<div class="poll-message message-empty"><p data-i18n="app.cogs.minipulse.message.no-poll-found">Sorry we didn\'t find any polls.</p></div>',"poll-form.html":'<div class="poll-form">\n</div>',"poll-item.html":'<article role="article" class="poll-item">\n\t<div class="poll-content" poll-content>\n\t\t{{#hasBadges}}\n\t\t<div class="poll-badges">\n\t\t\t{{#badges}}<span class="poll-badge badging label-2 {{color}}">{{title}}</span>{{/badges}}\n\t\t</div>\n\t\t{{/hasBadges}}\n\t\t<div class="poll-overview-div">\n\t\t\t{{^isLargeCard}}\n\t\t\t<p class="poll-overview-medium">\n\t\t\t{{/isLargeCard}}\n\t\t\t{{#isLargeCard}}\n\t\t\t<p class="poll-overview-large">\n\t\t\t{{/isLargeCard}}\n\t\t\t\t<span data-primitive="type" class="badging label-2" data-i18n="{{badgeType}}">{{badge}}</span>\n\t\t\t</p>\n\t\t\t<ul class="poll-icons">\n\t\t\t\t<!-- <li class="poll-btn poll-btn-responses">\n\t\t\t\t\t<i class="icon icon-avatar"></i>\n\t\t\t\t\t<span class="poll-btn-num poll-num-responses" data-bind="responses">{{responses}}</span>\n\t\t\t\t</li> -->\n\t\t\t\t{{#isShareEnabled}}\t\n\t\t\t\t<li class="poll-btn poll-btn-share">\t\t\t\t\n\t\t\t\t\t<a data-i18n="[title]app.common.social-actions.share-on-w3c" href="#" title="Share on connections" poll-share>\t\t\t\t\n\t\t\t\t\t\t<i class="icon icon-awf-share"></i>\n                        <span data-i18n="app.common.social-actions.share-on-w3c" class="awf-access">Share on connections</span>\n\t\t\t\t\t</a>\t\t\t\t\n\t\t\t\t</li>\n\t\t\t\t{{/isShareEnabled}}\n\t\t\t\t{{#isDiscussEnabled}}\n\t\t\t\t<li class="poll-btn poll-btn-discuss">\n\t\t\t\t\t<a href="{{forumlink}}" data-i18n="[title]app.common.social-actions.discuss" title="Discuss" target="_blank" poll-discuss>\n\t\t\t\t\t\t<i class="icon icon-awf-comment"></i>\n\t\t\t\t\t\t<span class="awf-access" data-i18n="app.common.social-actions.discuss">discuss</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\t{{/isDiscussEnabled}}\t\t\t\t\t\t\n\t\t\t\t<li class="poll-btn poll-btn-likes{{#liked}} poll-user-has-liked{{/liked}}">\n\t\t\t\t\t{{#isLikeEnabled}}\n\t\t\t\t\t\t<a href="#" data-i18n="[title]app.common.social-actions.like" title="Like" poll-like>\n\t\t\t\t\t{{/isLikeEnabled}}\n\t\t\t\t\t\t<i class="icon icon-awf-heart"></i>\n\t\t\t\t\t\t<span class="awf-access" data-i18n="app.common.social-actions.like">like</span>\n\t\t\t\t\t{{#isLikeEnabled}}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t{{/isLikeEnabled}}\t\t\t\t\n\t\t\t\t</li>\n\t\t\t\t<li class="poll-btn poll-num-likes">\n\t\t\t\t\t<span class="poll-btn-num" data-bind="likes">{{likes}}</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="poll-title-div">\n\t\t\t<h3 class="poll-title"><a href="{{url}}" target="_blank">{{title}}</a></h3>\n\t\t</div>\n\t\t{{#isLargeCard}}\n\t\t<div class="poll-meta">\n\t\t\t<ul>\n\t\t\t\t{{#tag}}<li class="poll-caption">#<span class="poll-tag">{{tag}}</span></li>{{/tag}}\n\t\t\t\t{{#sponsor}}<li class="poll-sponsor"><span data-i18n="app.cogs.minipulse.sponsor">Sponsor</span>: {{sponsor}}</li>{{/sponsor}}\n\t\t\t</ul>\n\t\t</div>\n\t\t{{/isLargeCard}}\n\t\t<div class="poll-description">\n\t\t\t{{#question}}<p class="desc poll-question" style="line-height: 16px;"><span>{{{question}}}</span></p>{{/question}}\n\t\t\t<!-- {{#instruction}}<p class="desc poll-instruction" style="line-height: 16px;">{{{instruction}}}</p>{{/instruction}} -->\n\t\t</div>\n\t</div>\n\t<div class="poll-btns">\n\t\t<div class="poll-cta cta-provide-opinion">\n\t\t\t<button type="button" class="flip-2" data-i18n="app.cogs.minipulse.cta.provide-opinion" go-to-poll>Please provide your opinion</button>\n\t\t</div>\n\t\t<div class="poll-cta cta-view-results">\n\t\t\t<button type="button" class="flip-2" data-i18n="app.cogs.minipulse.cta.view-results" go-to-poll>View the results</button>\n\t\t</div>\n\t</div>\n</article>',"poll-result-rankOrder.html":'<div class="poll-result">\n\t<div class="votes">\n\t\t<span class="votes-number">{{responses}}</span> \n\t\t<span class="votes-text" data-i18n="app.cogs.minipulse.poll-result.votes"> votes</span>\n\t</div>\n\t<div class="order-result">\n\t\t\n\t</div>\n</div>',"poll-result.html":'<div class="poll-result">\n\t<div class="chart">Default Poll Chart - {{typetext}}</div>\n</div>',"sso-signin.html":'<div class="js-minipulse-sso-signin-card-wrap minipulse-sso-signin-card-wrap">\n\t<div class="sso-signin-popup">\n\t\t<h2 class="sso-signin-popup__header title-2" data-i18n="app.cogs.minipulse.sso-signin.your-opinion-matters">Your Opinion Matters</h2>\n\t\t<div class="sso-signin-popup__body">\n\t\t\t<p class="sso-signin-popup__body__logo">\n\t\t\t\t<i class="icon-awf-w3-logo-minipulse"></i>\n\t\t\t</p>\n\t\t\t<p class="sso-signin-popup__body__content" data-i18n="app.cogs.minipulse.sso-signin.comments">Please sign in to check the polls for you. Your vote is very valuable for us!</p>\n\t\t\t<p class="sso-signin-popup__body__actions">\n\t\t\t\t<button class="js-sso-sigin-popup-submit primary-form-btn" data-i18n="awf.common.sign_in">Sign in</button>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n</div>',"status-failed.html":'<div class="msg_error"> <i class="icon-awf-alert-triangle-fill"></i> <span data-i18n="app.common.message.error">Error:</span> <span data-i18n="app.common.message.service-unavailable">Oops, the Minipulse service is currently not available. Please refresh the page and try it later.</span></div>',"status-unauthenticated.html":'<button type="button" id="login" class="primary-form-btn" data-i18n="awf.common.sign_in" card-login>sign in</button>',"thank-you-message.html":'<div class="thankyou-message">\n    <p class="thankyou-message__icon"><i class="icon-awf-checkmark-circle-fill"></i></p>\n    <p class="thankyou-message__headline title-2" data-i18n="app.cogs.minipulse.message.thankyou-message"></p>\n    <p class="thankyou-message__desc">{{&thankyoumessage}}</p>\n    <p class="thankyou-message__btn">\n        <button class="secondary-form-btn close" data-i18n="awf.common.close">Close</button>\n    </p>\n</div>'},"profile-info":{"profile-business-address.html":'{{#businessAddress}}\n<div id="business-address">\n\t<h4 class="section-header" role="heading">Business Address</h3>\n\t<ul class="label-list" role="list">\n\t\t<li role="listitem">\n\t\t\t{{#isLargeCard}}<div class="label">Address</div>{{/isLargeCard}}\n\t\t\t{{businessAddress.address1}}\n\t\t</li>\n\t\t{{#businessAddress.address2}}\n\t\t<li role="listitem">\n\t\t\t{{#isLargeCard}}<div class="label">&nbsp;</div>{{/isLargeCard}}\n\t\t\t{{businessAddress.address2}}\n\t\t</li>\n\t\t{{/businessAddress.address2}}\n\t\t<li role="listitem" class="inline">\n\t\t\t{{#isLargeCard}}<div class="label">&nbsp;</div>{{/isLargeCard}}\n\t\t\t{{businessAddress.city}}\n\t\t\t{{#businessAddress.city}}<span class="comma">,</span>{{/businessAddress.city}}\n\t\t</li>\n\t\t<li role="listitem" class="inline">\n\t\t\t{{#isLargeCard}}<div class="label">&nbsp;</div>{{/isLargeCard}}\n\t\t\t{{businessAddress.state}}\n\t\t</li>\n\t\t<li role="listitem" class="inline">\n\t\t\t{{#isLargeCard}}<div class="label">&nbsp;</div>{{/isLargeCard}}\n\t\t\t{{businessAddress.zip}}\n\t\t</li>\n\t</ul>\n</div>\n{{/businessAddress}}',"profile-contact.html":'{{#contact}}\n<div id="contact-info">\n\t<h4 class="section-header" role="heading">Contact Info</h3>\n\t<ul class="label-list" role="list">\n\t\t<li class="profile" role="listitem">{{telephonenumber}}</li>\n\t\t<li class="profile email" role="listitem">{{mail}}</li>\n\t</ul>\n</div>\t\t\t\t\n{{/contact}}',"profile-emergency.html":'<div class="col">\n\t<h4 class="section-header" role="heading">Emergency Contacts</h4>\n</div>\n{{#collection}}\n<ul class="label-list col one-of-two" role="list">\n\t{{#TECNAMFUL}}<li class="profile" role="listitem"><div class="label">Full Name</div>{{TECNAMFUL}}</li>{{/TECNAMFUL}}\n\t{{#TERCREL}}<li class="profile" role="listitem"><div class="label">Relationship</div>{{TERCREL}}</li>{{/TERCREL}}\n\t{{#TTELNR}}<li class="profile" role="listitem"><div class="label">Phone</div>{{TTELNR}}</li>{{/TTELNR}}\n\t{{#TLDRTYPE}}<li class="profile" role="listitem"><div class="label">Phone Type</div>{{TLDRTYPE}}</li>{{/TLDRTYPE}}\n</ul>\n{{/collection}}\n',"profile-home-address.html":'{{#homeAddress}}\n<div id="preferred-address">\n\t<h4 class="section-header" role="heading">Home Address</h4>\n\t<ul class="label-list" role="list">\n\t\t<li class="profile" role="listitem"><div class="label">Address</div>{{homeAddress.address1.value}}</li>\n\t\t{{#homeAddress.address2.value}}\n\t\t<li class="profile" role="listitem"><div class="label">&nbsp;</div>{{homeAddress.address2.value}}</li>\n\t\t{{/homeAddress.address2.value}}\n\t\t<li class="profile" role="listitem"><div class="label">&nbsp;</div>{{homeAddress.city.value}}</li>\n\t\t<li class="profile" role="listitem"><div class="label">&nbsp;</div>{{homeAddress.stateProvidence.value}}</li>\n\t\t<li class="profile" role="listitem"><div class="label">&nbsp;</div>{{homeAddress.postal.value}}</li>\n\t\t<li class="profile" role="listitem"><div class="label">Phone</div>{{homeAddress.phone.value}}</li>\n\t</ul>\n</div>\n{{/homeAddress}}',"profile-info-large.html":'<div data-component="private-profile-large">\n\t<div class="button-wrap">\n\t\t<button class="primary-form-btn personal-info-privacy-button">Private data, visible to you and your management.</button>\n\t</div>\n\t<div class="personal-info blurred">\n\t\t<div class="tab-nav hidden"></div>\n\t\t<div class="content">\n\t\t\t<!-- About you tab-->\n\t\t\t<div class="tab about-you active">\n\t\t\t\t<div class="section header">\n\t\t\t\t\t<div class="details">\n\t\t\t\t\t\t<h3 id=\'name\' role="heading">{{name}}</h3>\n\t\t\t\t\t\t<h4 id=\'responsibilities\' role="heading">{{jobresponsibilities}}</h4>\n\t\t\t\t\t\t<div>{{employeetype}}</div>\n\t\t\t\t\t\t<div>Serial+PSN: {{uid}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="section address-list">\n\t\t\t\t\t<div class="home-address-section col one-of-two"></div>\n\t\t\t\t\t<div class="business-address-section col two-of-two"></div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="section emergency-contacts">\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Links tab-->\n\t\t\t<div class="tab links">Links</div>\n\t\t</div>\n\t</div>\n\t<div class="privacy-msg">Private data, visible to you and your management.\n\t\t<a href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/Wf49a0f070e65_41de_bb0a_ff81f7eb3319/page/IBMer%20Hub%20-%20Private%20Data" target="_blank">Update your data</a>\n\t</div>\n</div>\n',
"profile-info-medium.html":'<div class="card" data-component="private-profile-medium">\n\t<div class="personal-info">\n\t\t<div class="content">\n\t\t\t<div class="left-panel">\n\t\t\t\t<div class="med-avatar"></div>\n\t\t\t\t<h3 id=\'name\' role="heading">{{name}}</h3>\n\t\t\t\t{{#jobresponsibilities}}\n\t\t\t\t<h4 id=\'responsibilities\' role="heading">{{jobresponsibilities}}</h4>\n\t\t\t\t{{/jobresponsibilities}}\n\t\t\t</div>\n\t\t\t<div class="right-panel">\n\t\t\t\t<div class="section business-address"></div>\n\t\t\t\t<div class="section contact-info"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<button class="flip-1" data-hover="View full personal info" role="button">\n\t\t\t<span>View more about you?</span>\n\t\t</button>\n\t</div>\n</div>\n\n'},"status-updates":{"comment-item-view.html":'<div class="item-content">\n    <p class="js-status-comment-item-feed-content feed-content"><a href="//w3-connections.ibm.com/profiles/html/profileView.do?userid={{user_id}}" target="_blank" data-i18n="[title]{{i18n_open_profile}}"><strong>{{user_name}}</strong></a> <span>{{content}}</span></p>\n    <ul class="like-time">\n        <li><a href="javascript:;" class="js-status-comment-item-like like caption" title="{{like_action}}">{{like_action}}</a></li>\n        <li>\n            <time class="js-status-comment-item-time caption">{{updated}}</time>\n        </li>\n    </ul>\n</div>\n<a class="js-status-comment-item-close close icon-awf-op-times" href="javascript:;"><img class="access" alt="Delete this comment" src="https://w3-connections.ibm.com/profiles/photo.do?userid={{user_id}}" width="1" height="1" data-i18n="[alt]{{i18n_del_comment}}"></a>',"comments-view.html":'<ul class="comments-wrap" role="list">\n    <li class="temp-li" role="listitem">comments list</li>\n</ul>\n<div class="comment-form">\n    <div class="form-content">\n        <div class="item-content"></div>\n    </div>\n    <div class="confirm-content">\n        <div class="confirm-text">\n            <div class="text">\n                <p data-i18n="{{i18n_del_comment_confirmation}}">Are you sure you want to delete this comment?</p>\n            </div>\n            <div class="actions"><a href="javascript:;" class="cancel" title="Cancel" data-i18n="[title]{{i18n_cancel}};{{i18n_cancel}}">Cancel</a> <a href="javascript:;" class="delete" title="Delete this comment" data-i18n="[title]{{i18n_del_comment}};{{i18n_del}}">Delete</a></div>\n        </div>\n    </div>\n</div>',"item-view.html":'<div data-primitive="img" class="js-status-item-img item-img">\n</div>\n<div data-primitive="content" class="js-status-item-content item-content">\n    <time data-primitive="pub_date" class="caption">{{update_date}}</time>\n    <h3>\n            <a data-primitive="author" title="Open the profile of {{name}}" href="https://w3-connections.ibm.com/profiles/html/profileView.do?userid={{user_id}}" target="_blank" data-i18n="[title]{{i18n_open_profile}}">{{name}}</a>\n        </h3>\n    <p class="js-status-item-feed-content feed-content"><span data-primitive="description" class="js-status-item-description">{{event_title}}</span></p>\n</div>',"large-item-view.html":'<div data-primitive="img" class="js-status-item-img item-img">\n</div>\n<div data-primitive="content" class="js-status-item-content item-content">\n    <time data-primitive="pub_date" class="caption">{{update_date}}</time>\n    <p class="feed-title"><span data-primitive="short_title">{{short_title}}</span></p>\n    <p class="js-status-item-feed-content feed-content"><span data-primitive="description" class="js-status-item-description">{{content}}</span></p>\n</div>',"large-view.html":'<div class="card double-height status-updates-large">\n    <div class="content">\n        <div data-primitive="input_wrap" class="status-updates-input"></div>\n        <div class="feed-wrap">\n        \t<div data-primitive="feed_list" class="status-updates-feed slide">\n                <div data-container="feeds" class="items-list"></div>\n            </div>\n        </div>\n        <p class="cta-btn" style="display: block;">\n\t\t\t<button class="flip-1" data-i18n="{{i18n_view_more}}">View more updates</button>\n\t\t</p>  \n    </div>\n</div>',"list-view.html":'<li style="display:none">\n    <a class="mentions-btn" href="javascript:;">Mentions</a>\n</li>\n<li>\n    <a class="feeds-selector active" href="javascript:;"><span data-i18n="{{i18n_all}}">All</span> <i class="icon-awf-chevron-down"></i></a>\n</li>',"medium-view.html":'<div class="card double-height status-updates-medium">\n    <div class="content">\n        <div data-primitive="input_wrap" class="status-updates-input"></div>\n        <div class="feed-wrap">\n        \t<div data-primitive="feed_list" class="status-updates-feed slide">\n                <div data-container="feeds" class="items-list"></div> \n            </div>\n        </div>\n        <p class="cta-btn" style="display: block;">\n\t\t\t<button class="flip-1" data-i18n="{{i18n_view_more}}">View more updates</button>\n\t\t</p> \n    </div>\n</div>',"post-view.html":'<form action="" name="status-updates-form">\n    <label class="access" data-i18n="{{i18n_placeholder}}">what are you working on?</label>\n    <textarea placeholder="what are you working on?" data-i18n="[placeholder]{{i18n_placeholder}}"></textarea>\n    <div class="counter-wrap"><span class="caption"></span></div>\n    <div class="input-buttons">\n        <a href="javascript:;" class="post outline"><em data-i18n="{{i18n_label}}">Post to: </em> <span data-i18n="{{i18n_everyone}}">All</span> <i class="icon-awf-chevron-down"></i></a>\n        <button type="submit" class="primary-form-btn" disabled="disabled" data-i18n="{{i18n_cta}}">Post</button>\n    </div>\n</form>'},talentplaybook:{dashboards:{"dash-assets.html":"","dash-awards.html":"","dash-bcg.html":'<div class="teamToggleHolder">\n\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button>\n\t<button href="#" class="team-toggle incountry-toggle" data-team="incountry">In-Country</button>\n\t<button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n</div>\n<div class="manager-drilldown-holder" tabindex="0">\n\t<!-- manager drilldown button goes here -->\n</div>\n<table class=\'talent-table\'>\n\t<thead>\n\t\t<th class=\'person-link-header\'></th>\n\t\t<th class=\'name-header\' sort="fullname">Name</th>\n\t\t<th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n\t\t<th class=\'header-BCGCompletion\' sort="bcgCompletionDate">BCG\n\t\t\t<br />Completion</th>\n\t\t<th class=\'header-BCGCertificateCompletion\' sort="bcgCertificateDate">Certificate\n\t\t\t<br />Completion</th>\n\t\t<th class=\'header-BCGCourseCompletion\' sort="bcgCourseCompletionDate">Course\n\t\t\t<br />Completion</th>\n\t\t<th class=\'header-Band band\' sort="band">Band\n\t\t\t<br />(Time)</th>\n\t\t<th class=\'header-Country country\' sort="country">Country\n\t\t\t<br />(Dept)</th>\n\t</thead>\n\t{{#main}}\n\t<tbody class="dashboard-tbody" id="{{id}}"></tbody>\n\t{{/main}}\n</table>',"dash-benefits.html":"","dash-compensation.html":'<div class="teamToggleHolder">\n\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button>\n\t<button href="#" class="team-toggle incountry-toggle" data-team="incountry">In-Country</button>\n\t<button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n</div>\n<div class="manager-drilldown-holder" tabindex="0">\n\t<!-- manager drilldown button goes here -->\n</div>\n<table class=\'talent-table\'>\n\t<thead>\n\t\t<th class=\'person-link-header\'></th>\n\t\t<th class=\'name-header\' sort="fullname">Name</th>\n\t\t<th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n\t\t<!--<th class=\'header-Alert\'></br>Alert</th>-->\n\t\t<th class=\'header-AproximateAnnualSalary\' sort="appAnnualSalary">Approximate\n\t\t\t<br />Annual Salary</th>\n\t\t<th class=\'header-LastSalaryChange\' sort="lastSalaryChangeAmount">Last Salary\n\t\t\t<br />Change</th>\n\t\t<th class=\'header-PRM\' sort="pmrPercent">\n\t\t\t</br>PMR</th>\n\t\t<th class=\'header-Band band\' sort="band">Band\n\t\t\t<br />(Time)</th>\n\t\t<th class=\'header-Country country\' sort="country">Country\n\t\t\t<br />(Dept)</th>\n\t</thead>\n\t{{#main}}\n\t<tbody class="dashboard-tbody" id="{{id}}"></tbody>\n\t{{/main}}\n</table>',"dash-dates.html":'<div class="teamToggleHolder" tabindex="0">\n\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button>\n\t<button href="#" class="team-toggle incountry-toggle" data-team="incountry">In-Country</button>\n\t<button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</a>\n</div>\n<div class="manager-drilldown-holder" tabindex="0">\n\t<!-- manager drilldown button goes here -->\n</div>\n<table class=\'talent-table\'>\n\t<thead>\n\t\t<th class=\'person-link-header\' aria-label="Team member picture"></th>\n\t\t<th class=\'name-header\' sort="fullname" aria-label="Team member name">Name</th>\n\t\t<th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n\t\t<th class=\'birthday-header\' sort="dateOfBirth">Birthday</th>\n\t\t<th class=\'service-reference-header\' sort="serviceReference">Service Reference\n\t\t\t<br />(Length)</th>\n\t\t<th class=\'date-of-hire-header\' sort="dateOfHire">Date of Hire</th>\n\t\t<th class=\'band\' sort="band">Band\n\t\t\t<br />(Time)</th>\n\t\t<th class=\'country\' sort="country">Country\n\t\t\t<br />(Dept)</th>\n\t</thead>\n\t{{#main}}\n\t<tbody class="dashboard-tbody" id="{{id}}"></tbody>\n\t{{/main}}\n</table>\n',"dash-diversity.html":"","dash-emergency.html":'<div class="teamToggleHolder">\n\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button>\n\t<button href="#" class="team-toggle incountry-toggle" data-team="incountry">In-Country</button>\n\t<button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n</div>\n<div class="manager-drilldown-holder" tabindex="0">\n\t<!-- manager drilldown button goes here -->\n</div>\n<table class="talent-table">\n\t<thead>\n\t\t<th class="person-link-header" aria-label="Team member picture"></th>\n\t\t<th class="name-header" sort="fullname" aria-label="Team member name">Name</th>\n\t\t<th class="reports-header" aria-label="Team member view direct reports" sort="isManager"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n\t\t<th class="position-header emergency-name-header">Current\n\t\t\t<br />Emergencies</th>\n\t\t<!-- TODO : implement sort -->\n\t\t<th class="status-header" sort="emergencies.length">Contacts</th>\n\t\t<th class="header-Band band" sort="band">Band\n\t\t\t<br />(Time)</th>\n\t\t<th class="header-Country country" sort="country">Country\n\t\t\t<br />(Dept)</th>\n\t</thead>\n\t{{#main}}\n\t<tbody class="dashboard-tbody" id="{{id}}"></tbody>\n\t{{/main}}\n</table>',"dash-expenses.html":'<div class="month-year-holder" tabindex="0">\n\t<button class="month-year"><span>{{currentPeriod.text}}</span></button>\n\t<div class="icon arrow-icon icon-awf-chevron-down"></div>\n\t<ul class="month-year-list">\n\t\t{{#monthYearList}}\n\t\t<li class=\'month-year-list-item\'>\n\t\t\t<button data-uid="{{value}}">{{text}}</button>\n\t\t</li>\n\t\t{{/monthYearList}}\n\t</ul>\n</div>\n<table class=\'talent-table\'>\n\t<thead>\n\t\t<th class=\'person-link-header\' aria-label="Team member picture"></th>\n\t\t<th class=\'name-header\' sort="fullname" aria-label="Team member name">Name</th>\n\t\t<!--<th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>-->\n\t\t<th class=\'header-one align-right\' sort="wwer2.chargedDefault">Expense Reimbursement:\n\t\t\t<br/>Default Account</th>\n\t\t<th class=\'header-twho align-right\' sort="wwer2.chargedOther">Expense Reimbursement:\n\t\t\t<br/>Other Account</th>\n\t\t<th class=\'header-three align-right\' sort="otherExpenses">Other Expenses (CB+LDV)</th>\n\t\t<th class=\'header-Band band\' sort="band">Band\n\t\t\t<br />(Time)</th>\n\t\t<th class=\'header-Country country\' sort="country">Country\n\t\t\t<br />(Dept)</th>\n\t</thead>\n\t{{#main}}\n\t<tbody class="dashboard-tbody" id="{{id}}"></tbody>\n\t{{/main}}\n</table>',"dash-expertise.html":'<div class="teamToggleHolder">\n\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button>\n\t<button href="#" class="team-toggle incountry-toggle" data-team="incountry">In-Country</button>\n\t<button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n</div>\n<div class="manager-drilldown-holder" tabindex="0">\n\t<!-- manager drilldown button goes here -->\n</div>\n<table class=\'talent-table\'>\n\t<thead>\n\t\t<th class=\'person-link-header\' aria-label="Team member picture"></th>\n\t\t<th class=\'name-header\' sort="fullname" aria-label="Team member name">Name</th>\n\t\t<th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n\t\t<th class=\'header-Think40Hours\' sort="supplemental.think40">Think40 Hours</th>\n\t\t<th class=\'header-IndustryInsight\' sort="supplemental.piiLevel">Provides Industry Insight</th>\n\t\t<th class=\'header-ManagesProjectsPrograms\' sort="supplemental.mppLevel">Manages Projects &amp; Programs</th>\n\t\t<th class=\'header-PrescribedLearningTaken\' sort="supplemental.lk">Prescribed Learning Taken?</th>\n\t\t<th class=\'header-Band band\' sort="band">Band\n\t\t\t<br />(Time)</th>\n\t\t<th class=\'header-Country country\' sort="country">Country\n\t\t\t<br />(Dept)</th>\n\t</thead>\n\t{{#main}}\n\t<tbody class="dashboard-tbody" id="{{id}}"></tbody>\n\t{{/main}}\n</table>',"dash-global.html":"","dash-jobs.html":"","dash-leadership.html":'<div class="teamToggleHolder">\n\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button>\n\t<button href="#" class="team-toggle incountry-toggle" data-team="incountry">In-Country</button>\n\t<button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n</div>\n<div class="manager-drilldown-holder" tabindex="0">\n\t<!-- manager drilldown button goes here -->\n</div>\n<table class=\'talent-table\'>\n\t<thead>\n\t\t<th class=\'person-link-header\'></th>\n\t\t<th class=\'name-header\' sort="fullname">Name</th>\n\t\t<th class=\'header-Position\' sort="extLeadPot">Extraordinary\n\t\t\t<br>Leadership\n\t\t\t<br>Potential</th>\n\t\t<th class=\'header-BTLTalent2014\' sort="btlExecPot">BTL\n\t\t\t<br>Executive\n\t\t\t<br>Potential</th>\n\t\t<th class=\'header-BTLTalent2016\' sort="timeframe">BTL First\n\t\t\t<br>Executive\n\t\t\t<br>Appointment</th>\n\t\t<th class=\'header-ServiceLength\' sort="btlSenExecPot">BTL Senior\n\t\t\t<br>Executive\n\t\t\t<br>Potential</th>\n\t\t<th class=\'header-Band band\' sort="band">Band\n\t\t\t<br />(Time)</th>\n\t\t<th class=\'header-Country country\' sort="country">Country\n\t\t\t<br />(Dept)</th>\n\t\t<th class=\'header-expand\'></th>\n\t</thead>\n\t{{#main}}\n\t<tbody class="dashboard-tbody" id="{{id}}"></tbody>\n\t{{/main}}\n</table>',"dash-performance.html":'<div class="teamToggleHolder">\n\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button>\n\t<button href="#" class="team-toggle incountry-toggle" data-team="incountry">In-Country</button>\n\t<button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n</div>\n<div class="manager-drilldown-holder" tabindex="0">\n\t<!-- manager drilldown button goes here -->\n</div>\n<table class=\'talent-table\'>\n\t<thead>\n\t\t<th class=\'person-link-header\' aria-label="Team member picture"></th>\n\t\t<th class=\'name-header\' sort="fullname" aria-label="Team member name">Name</th>\n\t\t<th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n\t\t{{#dashboardProperties.enableCheckpoint}}\n\t\t<th class=\'business-results\' sort="businessResults">Business Results</th>\n\t\t<th class=\'client-success\' sort="clientSuccess">Client Success</th>\n\t\t<th class=\'innovation\' sort="innovation">Innovation</th>\n\t\t<th class=\'responsibility-to-others\' sort="responsibilityToOthers">Responsibility to Others</th>\n\t\t<th class=\'skills\' sort="skills">Skills</th>\n\t\t{{/dashboardProperties.enableCheckpoint}} {{^dashboardProperties.enableCheckpoint}}\n\t\t<th class=\'pbc\' sort="pbcYear1">PBC 2015</th>\n\t\t<th class=\'pbc\' sort="pbcYear2">PBC 2014</th>\n\t\t<th class=\'pbc\' sort="pbcYear3">PBC 2013</th>\n\t\t{{#paActive}}\n\t\t<th class=\'pa\' sort="supplemental.pa">PAs</th>\n\t\t{{/paActive}} {{/dashboardProperties.enableCheckpoint}}\n\n\t\t<th class=\'band\' sort="band">Band\n\t\t\t<br />(Time)</th>\n\t\t<th class=\'country\' sort="country">Country\n\t\t\t<br />(Dept)</th>\n\t</thead>\n\t{{#main}}\n\t<tbody class="dashboard-tbody" id="{{id}}"></tbody>\n\t{{/main}}\n</table>',"dash-security.html":"","dash-time.html":"","dash-travel.html":"","dash-yourteam.html":'<div class="teamToggleHolder" tabindex="0">\n\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button>\n\t<button href="#" class="team-toggle incountry-toggle" data-team="incountry">In-Country</button>\n\t<button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</a>\n</div>\n<div class="manager-drilldown-holder" tabindex="0">\n\t<!-- manager drilldown button goes here -->\n</div>\n<table class=\'talent-table\' data-tablename="yourteam">\n\t<thead>\n\t\t<!-- <th class=\'\'>&nbsp;</th> -->\n\t\t<th class=\'person-link-header\' aria-label="Team member picture"></th>\n\t\t<th class=\'name-header\' sort="fullname" aria-label="Team member name">Name</th>\n\t\t<th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n\t\t<th class=\'position-header\' sort="position">Position</th>\n\t\t<th class=\'status-header\' sort="status">Status</th>\n\t\t<th class=\'employee-type\' sort="employeeType">Employee Type\n\t\t\t<br />(WPI)\n\t\t\t<a href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/GBS%20Managers%20only%20-%20Manager%20Talent%20Playbook%20definitions" target="_blank" class="definition icon-awf-info-circle-fill" data-definition="Work Place Indicator"></a>\n\t\t</th>\n\t\t<th class=\'band\' sort="band">Band\n\t\t\t<br />(Time)</th>\n\t\t<th class=\'country\' sort="country">Country\n\t\t\t<br />(Dept)</th>\n\t</thead>\n\t{{#main}}\n\t<tbody class="dashboard-tbody" id="{{id}}"></tbody>\n\t{{/main}}\n</table>',"download-spreadsheet.html":'<button href="javascript:;" class="csv-button off" data-dashboard="{{dashName}}">Download Spreadsheet &nbsp;<span class="icon icon-awf-download"></span></button>',items:{"dash-item-assets.html":"","dash-item-awards.html":"","dash-item-bcg.html":'<tr class=\'talent-row {{uid}}-bcg {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\'\n\tdata-cnum=\'{{uid}}\' id="{{uid}}-bcg">\n\t<td class=\'person-link {{uid}}\' rowspan="2">\n\t\t<div class=\'avatar\'>{{avatar}}</div>\n\t\t<div class="count-badge item-badge {{uid}}-bcg-count {{off}}" data-component="badge" data-uid="{{uid}}-bcg">{{alertCount}}</div>\n\t\t<!-- <div class="count-badge animate-flicker {{uid}}-bcg-count" data-component="badge">&nbsp;</div> -->\n\t</td>\n\t<td class=\'name\'>\n\t\t{{{fullname}}}\n\t\t<p class="showhide cnum">SN: {{{uid}}}</p>\n\t</td>\n\t<td class="reports">\n\t\t{{#isManager}}\n\t\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></i>\n\t\t{{/isManager}}\n\t</td>\n\t<td>\n\t\t<span id=\'{{uid}}-block1\' style="display: {{#displayBlock1}}{{displayBlock1}}{{/displayBlock1}}{{^displayBlock1}} none {{/displayBlock1}};">\n\t\t<a  href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a></span>\n\t\t<span id=\'{{uid}}-checkmark1\' style="display: {{#displayCheckMark1}}{{displayCheckMark1}}{{/displayCheckMark1}}{{^displayCheckMark1}} none {{/displayCheckMark1}};"><i class="icon icon-awf-checkmark"></i></span><span style="display: {{#displayNoText1}}{{displayNoText1}}{{/displayNoText1}}{{^displayNoText1}} none {{/displayNoText1}}; margin-left: 16px;"> No</span>\n\t\t<span class="bcg-exempt">{{exempt}}</span>\n\t\t<p class="showhide bcgCompletionDate">{{bcgCompletionDate}}</p>\n\t</td>\n\t<td>\n\t\t<span id=\'{{uid}}-block2\' style="display: {{#displayBlock2}}{{displayBlock2}}{{/displayBlock2}}{{^displayBlock2}} none {{/displayBlock2}};">\n\t\t<a  href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a></span>\n\t\t<span id=\'{{uid}}-checkmark2\' style="display: {{#displayCheckMark2}}{{displayCheckMark2}}{{/displayCheckMark2}}{{^displayCheckMark2}} none {{/displayCheckMark2}};"><i class="icon icon-awf-checkmark"></i></span><span style="display: {{#displayNoText2}}{{displayNoText2}}{{/displayNoText2}}{{^displayNoText2}} none {{/displayNoText2}}; margin-left: 16px;"> No</span>\n\t\t<span class="bcg-exempt">{{exempt}}</span>\n\t\t<p class="showhide bcgCertificateDate">{{bcgCertificateDate}}</p>\n\t</td>\n\t<td>\n\t\t<span id=\'{{uid}}-block3\' style="display: {{#displayBlock3}}{{displayBlock3}}{{/displayBlock3}}{{^displayBlock3}} none {{/displayBlock3}};">\n\t\t<a  href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a></span>\n\t\t<span id=\'{{uid}}-checkmark3\' style="display: {{#displayCheckMark3}}{{displayCheckMark3}}{{/displayCheckMark3}}{{^displayCheckMark3}} none {{/displayCheckMark3}};"><i class="icon icon-awf-checkmark"></i></span><span style="display: {{#displayNoText3}}{{displayNoText3}}{{/displayNoText3}}{{^displayNoText3}} none {{/displayNoText3}}; margin-left: 16px;"> No</span>\n\t\t<span class="bcg-exempt">{{exempt}}</span>\n\t\t<p class="showhide bcgCourseCompletionDate">{{bcgCourseCompletionDate}}</p>\n\t</td>\n\n\t<td class=\'band\'>\n\t\t<span>{{{band}}}</span>\n\t\t</br>\n\t\t<p class="showhide"> <span>{{{timeInBand}}}</span>\n\t\t</p>\n\t</td>\n\n\t<td class=\'country\'>\n\t\t<span>{{{country}}}</span>\n\t\t</br>\n\t\t<p class="showhide"> <span>{{{dept}}}</span>\n\t\t</p>\n\t</td>\n\n\n\t<td class=\'expand\'>\n\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-bcg"></button>\n\t</td>\n\n\t<td class="table-spacer">&nbsp;</td>\n</tr>\n\n<tr class="talent-row alert-section-row {{uid}}-bcg"   data-currTab="{{uid}}-bcg">\n\t<!-- <td colspan="1"></td> -->\n\t<td colspan="99" class="alert-data-cell loading-alerts">\n\t\t<div class="loading"><i class="icon-ibm-bee"></i></div>\n\t</td>\n</tr>\n',"dash-item-benefits.html":"","dash-item-compensation.html":'<tr class=\'talent-row {{uid}}-compensation {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\' data-cnum=\'{{uid}}\' id="{{uid}}-compensation">\n\t<td class=\'person-link {{uid}}\' rowspan="2">\n\t\t<div class=\'avatar {{uid}}\'>{{avatar}}</div>\n\t\t<div class="count-badge item-badge {{uid}}-compensation-count {{off}}" data-component="badge" data-uid="{{uid}}-compensation">{{alertCount}}</div>\n\t</td>\n\t<td class=\'name\'>\n\t\t{{{fullname}}}\n\t\t<p class="showhide cnum">SN: {{{uid}}}</p>\n\t</td>\n\t<td class="reports">\n\t\t{{#isManager}}\n\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></i>\n\t\t{{/isManager}}\n\t</td>\n\t<td class=\'appAnnualSalary align-right\'>\n\t\t<span>{{{appAnnualSalary}}} {{{appAnnualSalaryCurrency}}}</span>\n\t</td>\n\t<td class=\'lastSalaryChange align-right\'>\n\t\t<span>{{{lastSalaryChangeAmount}}} {{{lastSalaryChangeAmountCurrency}}}</span>\n\t\t</br>\n\t\t<p class="showhide"> <span>{{{lastSalaryChangeDate}}}</span>\n\t\t</p>\n\t</td>\n\t<td class=\'pmr align-right\'>\n\t\t<span>{{{pmrPercent}}}</span>\n\t</td>\n\t<td class=\'band\'>\n\t\t<span>{{{band}}}</span>\n\t\t</br>\n\t\t<p class="showhide"> <span>{{{timeInBand}}}</span>\n\t\t</p>\n\t</td>\n\t<td class=\'country\'>\n\t\t<span>{{{country}}}</span>\n\t\t</br>\n\t\t<p class="showhide"> <span>{{{dept}}}</span>\n\t\t</p>\n\t</td>\n\t<td class=\'expand\'>\n\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-compensation"></button>\n\t</td>\n\t<td class="table-spacer">&nbsp;</td>\n</tr>\n\n<!-- Addtional information -->\n<tr class="talent-row additional-section-row {{uid}}-compensation">\n\t<!-- <td colspan="1"></td> -->\n\t<td colspan="99" class="alert-data-cell loading-alerts">\n\t\t<div class="table-additional-info-div">\n\t\t\t<table border="1" class="table-additional-info" cellspacing="0" cellpadding="0">\n\t\t\t\t<tr>\n\t\t\t\t\t<td colspan="6">\n\t\t\t\t\t\t<strong>Additional Information</strong>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><span>&nbsp;</span></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\tBonus<br>Pay<br><br>\n\t\t\t\t\t\t<span>{{{bonusPay}}}</span><span> </span><span>{{currency}}</span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\tHolding<br>Power<br><br>\n\t\t\t\t\t\t<span>{{{holdingPower}}}</span><span> </span><span>{{currency}}</span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\tAwards<br>(3 yr)<br><br>\n\t\t\t\t\t\t<span>{{{awards}}}</span><span> </span><span>{{currency}}</span>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><span>&nbsp;</span></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t</td>\n</tr>\n\n\n<tr class="talent-row alert-section-row {{uid}}-compensation" data-currTab="{{uid}}-compensation">\n\t<td colspan="1"></td>\n\t<td colspan="99" class="alert-data-cell loading-alerts">\n\t\t<div class="loading"><i class="icon-ibm-bee"></i></div>\n\t</td>\n</tr>\n',"dash-item-dates.html":'<tr class=\'talent-row {{uid}}-dates {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\' data-cnum=\'{{uid}}\' id="{{uid}}-dates">\n\t<td class=\'person-link {{uid}}\' rowspan="2">\n\t\t<div class=\'avatar\'>{{avatar}}</div>\n\t\t<div class="count-badge item-badge {{uid}}-dates-count {{off}}" data-component="badge" data-uid="{{uid}}-dates">{{alertCount}}</div>\n<!-- <div class="count-badge animate-flicker  {{uid}}-dates-count" data-component="badge" data-uid="{{uid}}-dates">&nbsp;</div> -->\n</td>\n<td class=\'name\'>\n{{{fullname}}}\n<p class="showhide cnum">SN: {{{uid}}}</p>\n</td>\n<td class="reports">\n{{#isManager}}\n<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager"\n\tdata-uid="{{uid}}" data-name="{{ fullname }}"></i> {{/isManager}}\n</td>\n<td class=\'birthday\'>{{{dateOfBirth}}}</td>\n<td class=\'service-reference\'>\n{{{serviceReference}}}\n<p class="showhide timeInBand">{{{serviceLength}}}</p>\n</td>\n<td class=\'date-of-hire\'>{{{dateOfHire}}}</td>\n<td class=\'band\'>\n<p>{{{band}}}</p>\n<p class="showhide timeInBand">{{{timeInBand}}}</p>\n</td>\n<td class=\'country\'>\n<p>{{{country}}}</p>\n<p class="showhide">{{{dept}}}</p>\n</td>\n<td class=\'expand\'>\n<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-dates"></button>\n</td>\n</tr>\n<tr class="talent-row alert-section-row {{uid}}-dates" data-currCnum="{{uid}}"  data-currTab="{{uid}}-dates">\n<!-- <td colspan="1"></td> -->\n<td colspan="99" class="alert-data-cell loading-alerts">\n\t<div class="loading"><i class="icon-ibm-bee"></i></div>\n</td>\n</tr>\n',"dash-item-diversity.html":"","dash-item-emergency.html":'<tr class="talent-row {{uid}}-emergency {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}" data-cnum="{{uid}}" id="{{uid}}-emergency">\n\n\t<td class="person-link {{uid}}" rowspan="2">\n\t\t<div class=\'avatar\'>{{avatar}}</div>\n\t\t<div class="count-badge item-badge {{uid}}-emergency-count {{off}}" data-component="badge" data-uid="{{uid}}-emergency">{{alertCount}}</div>\n\t\t<!-- <div class="count-badge" data-component="badge">\n\t\t\t{{#alerts}}\n\t\t\t\t{{notices.length}}\n\t\t\t{{/alerts}}\n\t\t</div> -->\n\t</td>\n\t<td class="name"> {{{fullname}}}\n\t\t<p class="showhide cnum">SN: {{{uid}}}</p>\n\t</td>\n\t<td class="reports">\n\t\t{{#isManager}}\n\t\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></i>\n\t\t{{/isManager}}\n\t</td>\n\t<!-- following fields kept here to match with -vars so the card renders -->\n\t<td class="position emergency-name">\n\t\t<p>&nbsp;</p>\n\t<!-- <p><b>{{{position}}}</b></p> -->\n\t</td>\n\t<td class="status contacts">\n<p>\n\t<span class="dataField" id="NUMCONTACTS">{{{emergencies.length}}}</span>\n</p>\n\t</td>\n\t<!-- remains unchanged for now -->\n\t<td class="band">\n\t\t<p>{{{band}}}</p>\n<p class="showhide timeInBand">{{{timeInBand}}}</p>\n\t</td>\n\t<td class="country">\n\t\t<p>{{{country}}}</p>\n\t\t<p class="showhide">{{{dept}}}</p>\n\t</td>\n\t<td class="expand">\n\t\t<button class="expand-btn icon-awf-op-plus" href="#" data-uid="{{uid}}-emergency"></button>\n\t</td>\n\n</tr>\n\n<!-- show hide new tr for emergency name new alert service -->\n<!-- show hine new tr with 2 td or div for contact details -->\n<tr class="talent-row additional-section-row {{uid}}-emergency">\n\t<!-- <td colspan="1">&nbsp;</td> -->\n\t<td colspan="10" class="alert-data-cell loading-alerts">\n\t\t<div class="dashboard-additional-info additional-info">\n\t\t\t<div class="flex-container">\n\t\t\t\t\t<div class="additional-info-box-small">\n\t\t\t\t\t\t<div class="additional-boxed-title">{{^emergencies}}No {{/emergencies}}Emergency Contacts</div>\n\t\t\t\t\t\t<div class="emergency-list-row">\n\t\t\t\t\t\t\t{{#emergencies}}\n\t\t\t\t\t\t\t\t<div class="emergency-contact-container">\n\t\t\t\t\t\t\t\t\t<span class="info-box-row-label">Name:&nbsp;</span><span class="value contact-name">{{{emergencyContactName}}}</span><br />\n\t\t\t\t\t\t\t\t\t<span class="info-box-row-label">Relationship:&nbsp;</span><span class="value relationship">{{{relationship}}}</span><br />\n\t\t\t\t\t\t\t\t\t<span class="info-box-row-label">Phone Number:&nbsp;</span><span class="value phone">{{{phone}}}</span><br />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{{/emergencies}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</td>\n</tr>\n\n<tr class="talent-row alert-section-row {{uid}}-emergency" data-currTab="{{uid}}-emergency">\n\t<!-- <td colspan="1"></td> -->\n\t<td colspan="99" class="alert-data-cell loading-alerts">\n\t\t<div class="loading"><i class="icon-ibm-bee"></i></div>\n\t</td>\n</tr>\n',
"dash-item-expenses.html":'<tr class=\'talent-row {{uid}}-expenses {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\' data-cnum=\'{{cnum}}\' id="{{uid}}-expenses">\n\t<td class=\'person-link {{uid}}\' rowspan="2">\n\t\t<div class=\'avatar\'>{{avatar}}</div>\n\t\t<div class="count-badge item-badge {{uid}}-expenses-count {{off}}" data-component="badge" data-uid="{{uid}}-expenses">{{alertCount}}</div>\n\t\t<!-- <div class="count-badge animate-flicker {{uid}}-expenses-count" data-component="badge">&nbsp;</div> -->\n\t</td>\n\t<td class=\'name\'> {{{fullname}}}\n\t</td>\n\t<!--\n\t<td class="reports">\n\t\t{{#isManager}}\n\t\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></i>\n\t\t{{/isManager}}\n\t</td>\n\t-->\n\t<td class=\'default-account align-right\'>\n\t\t<span class=\'amount\'>\n\t\t\t{{#wwer2.chargedDefaultMask}}\n\t\t\t\t<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data"\n\t\t\t\ttarget="_blank"\n\t\t\t\ttitle="Data is not available or restricted. Click to learn more."\n\t\t\t\tclass="blocked ibm-external-link">\n\t\t\t\t\t<i class="icon icon-awf-slash-circle"></i>\n\t\t\t\t</a>\n\t\t\t{{/wwer2.chargedDefaultMask}}\n\t\t\t{{^wwer2.chargedDefaultMask}}\n\t\t\t\t{{wwer2.chargedDefault}}\n\t\t\t\t{{^wwer2.chargedDefaultCurrencyMask}}\n\t\t\t\t<span class=\'currency\'>{{wwer2.chargedDefaultCurrency}}</span>\n\t\t\t\t{{/wwer2.chargedDefaultCurrencyMask}}\n\t\t\t{{/wwer2.chargedDefaultMask}}\n\t\t</span>\n\t</td>\n\t<td class=\'other-account align-right\'>\n\t\t<span class=\'amount\'>\n\t\t\t{{#wwer2.chargedOtherMask}}\n\t\t\t\t<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data"\n\t\t\t\ttarget="_blank"\n\t\t\t\ttitle="Data is not available or restricted. Click to learn more."\n\t\t\t\tclass="blocked ibm-external-link">\n\t\t\t\t\t<i class="icon icon-awf-slash-circle"></i>\n\t\t\t\t</a>\n\t\t\t{{/wwer2.chargedOtherMask}}\n\t\t\t{{^wwer2.chargedOtherMask}}\n\t\t\t\t{{wwer2.chargedOther}}\n\t\t\t\t{{^wwer2.chargedOtherCurrencyMask}}\n\t\t\t\t<span class=\'currency\'>{{wwer2.chargedOtherCurrency}}</span>\n\t\t\t\t{{/wwer2.chargedOtherCurrencyMask}}\n\t\t\t{{/wwer2.chargedOtherMask}}\n\t\t</span>\n\t</td>\n\t<td class=\'other-expenses align-right\'>\n\t\t<span class=\'amount\'>\n\t\t\t{{#otherExpensesMask}}\n\t\t\t\t<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data"\n\t\t\t\ttarget="_blank"\n\t\t\t\ttitle="Data is not available or restricted. Click to learn more."\n\t\t\t\tclass="blocked ibm-external-link">\n\t\t\t\t\t<i class="icon icon-awf-slash-circle"></i>\n\t\t\t\t</a>\n\t\t\t{{/otherExpensesMask}}\n\t\t\t{{^otherExpensesMask}}\n\t\t\t\t{{otherExpenses}}\n\t\t\t\t{{^otherExpensesCurrencyMask}}\n\t\t\t\t<span class=\'currency\'>{{otherExpensesCurrency}}</span>\n\t\t\t\t{{/otherExpensesCurrencyMask}}\n\t\t\t{{/otherExpensesMask}}\n\t\t</span>\n\t</td>\n\t<td class=\'band\'>\n\t\t<p>{{{band}}}</p>\n\t\t<p class="showhide timeInBand">{{{timeInBand}}}</p>\n\t</td>\n\t<td class=\'country\'>\n\t\t<p>{{{country}}}</p>\n\t\t<p class="showhide">{{{dept}}}</p>\n\t</td>\n\t<td class=\'expand\'>\n\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{cnum}}-expenses"></button>\n\t</td>\n</tr>\n{{#hasReports}}\n<tr class="talent-row alert-section-row {{uid}}-expenses expenses-alert-row" data-uid="{{uid}}" data-currTab="{{uid}}-expenses">\t\t\n\t<td colspan="99" class="alert-detail" id={{uid}}></td>\n</tr>\n{{/hasReports}}\n\t\n{{^hasReports}}\n<tr class="talent-row alert-section-row expenses-alert-row {{uid}}-expenses">\t\t\n\t<td colspan="99" class="alert-detail">\n\t\t<span class="no-tasks">No Expense Reports for this month.</span>\n\t</td>\n</tr>\n{{/hasReports}}\n\n',"dash-item-expertise.html":'<tr class=\'talent-row {{uid}}-expertise {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\' data-cnum=\'{{uid}}\' id="{{uid}}-expertise">\n\t<td class=\'person-link {{uid}}\' rowspan="2">\n\t\t<div class=\'avatar\'>{{avatar}}</div>\n\t\t<div class="count-badge item-badge {{uid}}-expertise-count {{off}}" data-component="badge" data-uid="{{uid}}-expertise">{{alertCount}}</div>\n\t</td>\n\t<td class=\'name\'>\n\t\t{{{fullname}}}\n\t\t<p class="showhide cnum">SN: {{{uid}}}</p>\n\t</td>\n\t<td class="reports">\n\t\t{{#isManager}}\n\t\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></i>\n\t\t{{/isManager}}\n\t</td>\n\t<td class=\'think40\'>\n\t\t<p>{{{supplemental.think40}}}</p>\n\t</td>\n\t<td class=\'piiLevel\'>\n\t\t<p>{{{supplemental.piiLevel}}}</p>\n\t</td>\n\t<td class=\'mppLevel\'>\n\t\t<p>{{{supplemental.mppLevel}}}</p>\n\t</td>\n\t<td class=\'lk\'>\n\t\t<p>{{{supplemental.lk}}}</p>\n\t</td>\n\t<td class=\'band\'>\n\t\t<p>{{{band}}}</p>\n\t\t<p class="showhide timeInBand">{{{timeInBand}}}</p>\n\t</td>\n\t<td class=\'country\'>\n\t\t<p>{{{country}}}</p>\n\t\t<p class="showhide">{{{dept}}}</p>\n\t</td>\n\t<td class=\'expand\'>\n\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-expertise"></button>\n\t</td>\n</tr>\n\n{{#displayedNotices}}\n<tr class="talent-row alert-section-row {{uid}}-expertise" data-currCnum="{{uid}}" data-currTab="{{uid}}-expertise">\t\n\t<td colspan="99" class="alert-detail" id={{noticeId}}></td>\n</tr>\n{{/displayedNotices}}\n',"dash-item-global.html":"","dash-item-jobs.html":"","dash-item-leadership.html":'<tr class=\'talent-row leadership {{uid}}-leadership {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\'\n\tdata-cnum=\'{{uid}}\' id="{{uid}}-leadership">\n\t<td class=\'person-link {{uid}}\' rowspan="2">\n\t\t<div class=\'avatar\'>{{avatar}}</div>\n\t\t<div class="count-badge item-badge {{uid}}-leadership-count {{off}}" data-component="badge" data-uid="{{uid}}-leadership">{{alertCount}}</div>\n\t\t<!-- <div class="count-badge animate-flicker  {{uid}}-leadership-count" data-component="badge">&nbsp;</div> -->\n\t</td>\n\t<td class=\'name\'>\n\t\t{{{fullname}}}<br>\n\t\t<p class="showhide uid">SN: {{{uid}}}</p>\n\t</td>\n\t<td class=\'checkmark\'>\n\t\t{{#extLeadPotMask}}\n\t\t\t{{{extLeadPotMask}}}\n\t\t{{/extLeadPotMask}}\n\t\t{{^extLeadPotMask}}\n\t\t\t{{#extLeadPot}}\n\t\t\t\t<i class="icon-awf-checkmark"></i>\n\t\t\t{{/extLeadPot}}\n\t\t{{/extLeadPotMask}}\n\t</td>\n\n\t<td class=\'\'>\n\t\t{{#btlExecPotMask}}\n\t\t\t{{{btlExecPotMask}}}\n\t\t{{/btlExecPotMask}}\n\t\t{{^btlExecPotMask}}\n\t\t\t{{{btlExecPot}}}\n\t\t{{/btlExecPotMask}}\n\t</td>\n\n\t<td class=\'\'>\n\t\t{{{timeframe}}}\n\t</td>\n\n\t<td class=\'checkmark\'>\n\t\t{{#btlSenExecPotMask}}\n\t\t\t{{{btlSenExecPotMask}}}\n\t\t{{/btlSenExecPotMask}}\n\t\t{{^btlSenExecPotMask}}\n\t\t\t{{#btlSenExecPot}}\n\t\t\t\t<i class="icon-awf-checkmark"></i>\n\t\t\t{{/btlSenExecPot}}\n\t\t{{/btlSenExecPotMask}}\n\t</td>\n\n\t<td class=\'band\'>\n\t\t<p>{{{band}}}</p>\n\t\t<p class="showhide timeInBand">{{{timeInBand}}}</p>\n\t</td>\n\n\t<td class=\'country\'>\n\t\t<p>{{{country}}}</p>\n\t\t<p class="showhide">{{{dept}}}</p>\n\t</td>\n\n\t<td class=\'expand\'>\n\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-leadership"></button>\n\t</td>\n</tr>\n\n<tr class="talent-row leadership alert-section-row {{uid}}-leadership" data-currTab="{{uid}}-leadership">\n\t<td colspan="1"></td>\n\t<td colspan="99">\n\t\t<div class="leadership-drawer-container">\n\t\t\t<span class="title">Position</span><span>{{{position}}}</span>\n\t\t</div>\n\t\t<div class="leadership-drawer-container">\n\t\t\t<span class="title">Service Reference Date</span><span>{{{serviceReference}}}</span>\n\t\t</div>\n\t\t<div class="leadership-drawer-container">\n\t\t\t<span class="title">Service Length</span><span>{{{serviceLength}}}</span>\n\t\t</div>\n\t\t<br />\n\t</td>\n</tr>\n\n<tr class="talent-row alert-section-row {{uid}}-leadership"  data-currTab="{{uid}}-leadership">\n\t<!-- <td colspan="1"></td> -->\n\t<td colspan="99" class="alert-data-cell loading-alerts">\n\t\t<div class="loading"><i class="icon-ibm-bee"></i></div>\n\t</td>\n</tr>\n',"dash-item-performance.html":'<tr class=\'talent-row {{uid}}-performance {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\' data-cnum=\'{{uid}}\' id="{{uid}}-performance">\n\t<td class=\'person-link {{uid}}\' rowspan="2">\n\t\t<div class=\'avatar\'>{{avatar}}</div>\n\t\t<div class="count-badge item-badge {{uid}}-performance-count {{off}}" data-component="badge" data-uid="{{uid}}-performance">{{alertCount}}</div>\n\t</td>\n\t<td class=\'name\'>\n\t\t{{{fullname}}}\n\t\t<p class="showhide cnum">SN: {{{uid}}}</p>\n\t</td>\n\t<td class="reports">\n\t\t{{#isManager}}\n\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></i> {{/isManager}}\n\t</td>\n\n\t{{#dashboardProperties.enableCheckpoint}}\n\n\t<td class=\'business-results-row\'>{{{businessResults}}} </td>\n\t<td class=\'client-success-row\' data-definition="Work Place Indicator">{{{clientSuccess}}}</td>\n\t<td class=\'innovation-row\' data-definition="Work Place Indicator">{{{innovation}}}</td>\n\t<td class=\'responsibility-to-others-row\' data-definition="Work Place Indicator">{{{responsibilityToOthers}}}</td>\n\t<td class=\'skills-row\' data-definition="Work Place Indicator">{{{skills}}}</td>\n\n\t{{/dashboardProperties.enableCheckpoint}} {{^dashboardProperties.enableCheckpoint}}\n\n\t<td class=\'pbcYear1\'>\n\t\t<p>{{{pbcYear1}}}</p>\n\t</td>\n\t<td class=\'pbcYear2\'>\n\t\t<p>{{{pbcYear2}}}</p>\n\t</td>\n\t<td class=\'pbcYear3\'>\n\t\t<p>{{{pbcYear3}}}</p>\n\t</td>\n\n\t{{#paActive}}\n\t<td class=\'pa\'>\n\t\t{{{supplemental.pa}}}\n\t</td>\n\t{{/paActive}} {{/dashboardProperties.enableCheckpoint}}\n\t<td class=\'band\'>\n\t\t<p>{{{band}}}</p>\n\t\t<p class="showhide timeInBand">{{{timeInBand}}}</p>\n\t</td>\n\n\t<td class=\'country\'>\n\t\t<p>{{{country}}}</p>\n\t\t<p class="showhide">{{{dept}}}</p>\n\t</td>\n\t<td class=\'expand\'>\n\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-performance"></button>\n\t</td>\n</tr>\n{{#dashboardProperties.enableCheckpoint}}\n<tr class="talent-row additional-section-row {{uid}}-performance">\n\t<td colspan="20">\n\t\t<div class="addtional-section">\n\t\t\t<div class="additional-boxed-title">Checkpoint Assessment</div>\n\t\t\t<br/>\n\t\t\t<span class="additional-section-field value">{{{checkpointAssessmentDate}}}</span>\n\t\t\t<br/>\n\t\t</div>\n\t</td>\n</tr>\n<tr class="talent-row additional-section-row {{uid}}-performance">\n\t<td colspan="20">\n\t\t<div class="addtional-section">\n\t\t\t<div class="additional-section-container">\n\t\t\t\t<div class="additional-boxed-title">PBC History</div>\n\t\t\t\t<span class="additional-section-field">PBC 2015:   </span><span class="additional-section-field value">{{{pbcYear1}}}</span>\n\t\t\t\t<br/>\n\t\t\t\t<span class="additional-section-field">PBC 2014:   </span><span class="additional-section-field value">{{{pbcYear2}}}</span>\n\t\t\t\t<br/>\n\t\t\t\t<span class="additional-section-field">PBC 2013:   </span><span class="additional-section-field value">{{{pbcYear3}}}</span>\n\t\t\t\t<br/>\n\t\t\t</div>\n\t\t\t<div class="additional-section-container">\n\t\t\t\t{{#paActive}}\n\t\t\t\t<div class="additional-boxed-title">Project Assessments</div>\n\t\t\t\t<span class="additional-section-field">Number of PAs:   </span><span class="additional-section-field value">{{{supplemental.pa}}}</span>\n\t\t\t\t<br/> {{/paActive}}\n\t\t\t</div>\n\t\t</div>\n\n\t</td>\n</tr>\n<tr class="talent-row additional-section-row {{uid}}-performance">\n\t<td colspan="20">\n\t\t<div class="addtional-section">\n\t\t\t<div class="additional-boxed-title">Checkpoint Questions</div>\n\t\t\t<span class="additional-section-field">Job Availability</span>\n\t\t\t<br/>\n\t\t\t<span class="additional-section-field value">{{{checkpointQuestionJobAvailability}}}</span>\n\t\t\t<br/>\n\t\t\t<br/>\n\t\t\t<span class="additional-section-field">Manager Assessment Certification</span>\n\t\t\t<br/>\n\t\t\t<span class="additional-section-field value">{{{checkpointQuestionManagerCertification}}}</span>\n\t\t</div>\n\t</td>\n</tr>\n{{/dashboardProperties.enableCheckpoint}} {{#displayedNotices}}\n<tr class="talent-row alert-section-row {{uid}}-performance" data-currCnum="{{uid}}" data-currTab="{{uid}}-performance">\n\t<td colspan="99" class="alert-detail" id={{noticeId}}></td>\n</tr>\n{{/displayedNotices}}',"dash-item-security.html":"","dash-item-time.html":"","dash-item-travel.html":"","dash-item-yourteam.html":'<tr class=\'talent-row {{uid}}-yourteam {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\' data-cnum=\'{{uid}}\' id="{{uid}}-yourteam">\n\t<td class=\'person-link {{uid}}\' rowspan="2">\n\t\t<div class=\'avatar\'>{{avatar}}</div>\n\t\t<div class="count-badge item-badge {{uid}}-yourteam-count {{off}}" data-component="badge" data-uid="{{uid}}-yourteam">{{alertCount}}</div>\n\t</td>\n\t<td class=\'name\'>\n\t\t{{{fullname}}}\n\t\t<p class="showhide cnum">SN: {{{uid}}}</p>\n\t</td>\n\t<td class="reports">\n\t\t{{#isManager}}\n\t\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></i>\n\t\t{{/isManager}}\n\t</td>\n\t<td class=\'position\'>\n\t\t<p>{{{position}}}</p>\n\t</td>\n\t<td class=\'status\'>\n\t\t<p>{{{status}}}</p>\n\t</td>\n\t<td class=\'employeeType\'>\n\t\t<p>{{{employeeType}}}</p>\n\t\t<p class="showhide wpi">{{{wpi}}}</p>\n\t</td>\n\t<td class=\'band\'>\n\t\t<p>{{{band}}}</p>\n\t\t<p class="showhide timeInBand">{{{timeInBand}}}</p>\n\t</td>\n\t<td class=\'country\'>\n\t\t<p>{{{country}}}</p>\n\t\t<p class="showhide">{{{dept}}}</p>\n\t</td>\n\t<td class=\'expand\'>\n\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-yourteam"></button>\n\t</td>\n</tr>\n\n{{#displayedNotices}}\n<tr class="talent-row alert-section-row {{uid}}-yourteam" data-currCnum="{{uid}}" data-currTab="{{uid}}-yourteam">\t\n\t<td colspan="99" class="alert-detail" id={{noticeId}}></td>\n</tr>\n{{/displayedNotices}}\n',details:{"expense-item-detail.html":'<div class="expenses-list-row">\n\t<span class="expenses-list-title">Expense Summary</span>\n\t<ul>\t\t\n\t\t<li>Outstanding Advances <span>{{outstandingAdvances}} {{outstandingAdvancesCur}}</span></li>\n\t\t<li>Outstanding Card Charges <span>{{outstandingCardCharges}} {{outstandingCardChargesCur}}</span></li>\t\t\n\t</ul>\n\n\t<table class="expenses-table">\n\t\t<thead>\n\t\t\t<th class="expenses-heading"></th>\n\t\t\t<th class="expenses-heading">Description</th>\n\t\t\t<th class="expenses-heading">Amount Paid</th>\n\t\t\t<th class="expenses-heading"></th>\n\t\t</thead>\n\t\t<tbody>\t\t\t\n\t\t\t{{#wwer}}\n\t\t\t{{#hasDate}}\n\t\t\t<tr class="wwer-row" data-id="{{id}}">\n\t\t\t\t<td>{{#hasAlerts}}<div class="count-badge expenses-count-badge alert" data-component="badge" data-id="{{id}}">{{alerts}}</div>{{/hasAlerts}}</td>\n\t\t\t\t<td class="expenses-desc">{{description}}</td>\n\t\t\t\t<td class="expenses-amount">{{amount}} {{currency}}</td>\n\t\t\t\t<td><i class="detail-link wwer-takeover icon-awf-arrow-right-thin"></i></td>\n\t\t\t</tr>\n\t\t\t{{/hasDate}}\n\t\t\t{{/wwer}}\n\t\t\t{{#cb}}\n\t\t\t{{#hasDate}}\n\t\t\t<tr class="cb-row" data-id="{{id}}">\n\t\t\t\t<td data-id="{{id}}">{{#hasAlerts}}<div class="count-badge expenses-count-badge alert" data-component="badge" data-id="{{id}}">{{alerts}}</div>{{/hasAlerts}}</td>\n\t\t\t\t<td class="expenses-desc" data-id="{{id}}">{{description}}</td>\n\t\t\t\t<td class="expenses-amount" data-id="{{id}}">{{amount}} {{currency}}</td>\n\t\t\t\t<td><i class="detail-link cb-takeover icon-awf-arrow-right-thin" data-id="{{id}}"></i></td>\n\t\t\t</tr>\n\t\t\t{{/hasDate}}\n\t\t\t{{/cb}}\n\t\t\t{{#ldv}}\n\t\t\t{{#hasDate}}\n\t\t\t<tr class="ldv-row" data-id="{{id}}">\n\t\t\t\t<td data-id="{{id}}">{{#hasAlerts}}<div class="count-badge expenses-count-badge alert" data-component="badge" data-id="{{id}}">{{alerts}}</div>{{/hasAlerts}}</td>\n\t\t\t\t<td class="expenses-desc" data-id="{{id}}">{{description}}</td>\n\t\t\t\t<td class="expenses-amount" data-id="{{id}}">{{amount}} {{currency}}</td>\n\t\t\t\t<td><i class="detail-link ldv-takeover icon-awf-arrow-right-thin" data-id="{{id}}"></i></td>\n\t\t\t</tr>\n\t\t\t{{/hasDate}}\n\t\t\t{{/ldv}}\t\t\t\n\t\t</tbody>\n\t</table>\n</div>\n'}},"manager-drilldown-item.html":'<!--parent level (current user) -->\n<li class="manager-list-item">\n    <button tabindex="0" data-uid="{{userid}}">{{username}}</button>\n    <ul class="manager-drilldown-level-2">\n        {{#collection}}\n        <li class="manager-list-item">\n            <button tabindex="0" data-uid="{{uid}}">{{name.first}} {{name.last}}</button>\n            <ul class="manager-drilldown-level-3">\n                {{#reports}}\n                <li class="manager-list-item">\n                    <button tabindex="0" data-uid="{{uid}}">{{name.first}} {{name.last}}</button>\n                </li>\n                {{/reports}}\n            </ul>\n        </li>\n        {{/collection}}\n    </ul>\n</li>',"manager-drilldown.html":'<button class="manager-drilldown"><span>Managers</span></button>\n<div class="icon arrow-icon icon-awf-chevron-down"></div>\n<ul class="manager-drilldown-level-1"></ul>'},"header.html":'\n<ul id="dashboardTabs" class="nav nav-tabs tab-actions dropdown-tabs" role="tablist">\n\n\t<div class="gridmenu closed"></div>\n\n\t<li role="presentation" class="dropdown-outer">\n\n\t\t<button href="#" id="dropdown_1" class="dropdown-toggle" data-toggle="dropdown" aria-controls="dropdown_1-contents" tabindex="0" aria-expanded="false">\n\t\t\t<span id="{{dashName}}-tab-title">{{dashTitle}}\n\t\t\t\t<div id="{{dashName}}-header-badge" class="count-badge header-badge {{dashName}}-header-badge {{off}}" data-component="badge">{{topicCount}}</div>\n\t\t\t</span>\n\t\t\t<div id="{{dashName}}-tab-awf-header-badge" class="header-badge-container"></div>\n\t\t</button>\n\n\t\t<div id="{{dashName}}-tab-header" class="header-icon">\n\t\t\t<div id="{{dashName}}-tab-icon" class="icon {{categoryIcon}}"></div>\n\t\t</div>\n\n\t\t<div class="menuicon icon arrow-icon icon-awf-chevron-down">\n\t\t\t{{#overallCount}}\n\t\t\t<span class=\'totalAlertsCount\'>{{overallCount}}<span>\n\t\t\t{{/overallCount}}\n\t\t</div>\n\n\t\t<div id="focusMenu"></div>\n\n\t\t<div class="mini-alerts">\n\t\t\t<button href="#" class="mini-alert off" id="{{dashName}}-mini-alert" tabindex="-1" title="{{dashTitle}}" data-toggletarget="{{dashName}}"><span class="icon section-icon {{categoryIcon}}"></span> <span class="mini-alert-count"></span></button>\n\t\t</div>\n\n\t</li>\n\n</ul>\n',"help.html":'<h2 class="section-header">Welcome to Manager Hub with Talent Playbook alerts</h2>\n<p style="margin-bottom: 10px;">Apprenticing and providing feedback to your people every day is vital to a strong team and healthy business.\n\tIt takes specific knowledge and insight, but don\'t worry, the dashboards below can help! Click below\n\tand you\'ll see specific observations and recommendations about your employees, aimed at helping your\n\tpeople get the skills and career development opportunities they need. For more information, <a href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/GBS%20Managers%20only%20-%20Manager%20Talent%20Playbook%20Help" target="_blank" class="ibm-external-link">visit our Help Center</a>\n</p>\n<p><span style="font-weight: 600;">Note:</span> Due to Data Privacy restrictions some data elements might\n\tbe unavailable for specific employees.<br />Please see details: <a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager%20Hub%20-%20Blocked%20Data" target="_blank">Manager Hub - Blocked Data</a>\n</p>\n<h2 class="section-header">Proactive Retention</h2>\n<p style="margin-bottom: 10px;">Slow career progression is one of several risk factors that put valuable IBMers at risk of leaving IBM.\n\tUsing the table below, you can now leverage predictive analytics to retain high value IBMers who are\n\tat risk. Each employee\'s Propensity to Leave (PTL) is the predicted risk that he or she will leave IBM\n\twithin the next 12 months. The Observations column predicts why each IBMer may be at risk, and the Actions\n\tfor Managers recommends what you can do to retain that IBMer.\n</p>\n<p><span style="font-weight: 600;">Disclaimer:</span> the Propensity to Leave (PTL) Risk is calculated twice\n\ta year (Spring and Fall). The information here is as of April 2016.\n</p>\n\n<h2 class="section-header">Drive Band Promotion</h2>\n<p>Band velocity â how quickly an IBMer moves through bands â is an important signal to individuals about\n\ttheir career opportunities with IBM. Our talent model is based on the foundation that people progress\n\tevery 2 â 4 years, assuming there are open roles at the next band. As a manager, it is your responsibility\n\tto ensure your people expand their capabilities and become promotion eligible, positioning them for opportunities\n\tat the next band level. And the first step is knowing how to progress a career in GBS. Orient your employees\n\tto use the <a href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W902e03401bb8_45f4_a050_d23ab8ed019a/page/GBS-Peaks-Career-Model" target="_blank" class="ibm-external-link">Global GBS Career Wiki</a> as the first \'career stop\' for client\n\tfacing practitioners.\n</p>\n\n<h2 class="section-header">Broaden Capabilities</h2>\n<p>The most effective IBMers are those who combine deep expertise with broad capabilities â they have a âT-shapedâ\n\ttalent profile. Helping IBMers to become T-shaped will get them ready for promotion while helping our\n\tclients succeed. All IBMers are encouraged to complete 40 hours of professional development each year.\n\tYour employees will need your guidance and support to identify and complete the most appropriate learning.\n\tThe tracking of Think40 is done on an annual basis.\n</p>\n\n<h2 class="section-header">Assess Performance and Potential</h2>\n<p style="margin-bottom: 10px;">Active performance management by managers is critical to ensuring we have culture of high performance,\n\ta high performing culture and we are effectively managing low performers. Managers should identify and\n\tactively manage GBS Top Talent, specifically ensuring these IBMers understand our interest in having\n\tthem advance their careers, take stretch assignments, and receive appropriate learning. In addition to\n\tinspiring your top performers and coaching average performers, low performers should be actively managed\n\tthrough our Performance Management process. Contact your HR Partner with any process questions.</p>\n\n<p style="margin-bottom: 32px;">All practitioners are expected to have at least one project assessment (PA) on file in a 12 month period.\n\tThis feedback helps you provide fact-based development and performance feedback. For any questions related\n\tto the Performance Management process, reach out to your HR Partner.\n</p>\n',"overview.html":'<p class="overview-text overview-{{dashName}}">{{{overviewText}}} <span class="bold">{{{overviewTextHighlight}}}</span> <a href="{{helpURL}}" target="_blank" class="ibm-external-link">Visit our Help Center.</a></p>\n{{#additionalCopy}}\n\t<p class="overview-text overview-{{dashName}}">{{{additionalCopy}}}</p>\n{{/additionalCopy}}\n<button class="confidential-link ibm-external-link" onclick=\'window.open("http://w3-03.ibm.com/ibm/privacy/practices_guidance.html","_blank")\'>IBM CONFIDENTIAL</button>\n',"related-links-buttons.html":'{{#list}}\n\t<button class="flip-2" onclick="window.open(\'{{url}}\',\'_blank\');" role="link">{{title}}</button>\n{{/list}}\n',"related-links.html":"<ul>\n\t{{#list}}\n\t\t<li class='related-link'><a href='{{url}}' target='_blank'>{{title}}</a></li>\n\t{{/list}}\n</ul>\n","report-cb.html":'<div class="cb-header report-header">\n\t<em class="icon-youribm-expenses"></em>\n\t<div class="title-container">\n\t\t<h2>Commodity Billing Report</h2>\n\t\t<span>{{month}} {{year}}</span>\n\t</div>\n\t{{> avatarPartial}}\n\t<div class="user-name">{{model.fullname}}</div>\n</div>\n<div class="report-total-expenses">\n\t<span class="total-expenses">Total Expenses: </span><span class="total">{{total}}</span> <span class="curr">{{curr}}</span>\n\t<div class="csv-holder">\n\t\t<button href="#" class="csv-button-report" data-report="commodoty-billing">Download Spreadsheet &nbsp;<span class="icon icon-awf-download"></span></button>\n\t</div>\n</div>\n<div class="table-wrapper">\n\t<table class="cb-table">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th colspan="2">Supplier</th>\n\t\t\t\t<th colspan="3">Description</th>\n\t\t\t\t<th colspan="2">Transaction<br>Date</th>\n\t\t\t\t<th>Division<br>Charged</th>\n\t\t\t\t<th>Dept<br>Charged</th>\n\t\t\t\t<th>Project<br>Charged</th>\n\t\t\t\t<th>Major</th>\n\t\t\t\t<th>(Minor)</th>\n\t\t\t\t<th colspan="2" class="amount-centered">Gross<br>Amount</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t{{#collection}}\n\t\t\t\t<tr class="first-row">\n\t\t\t\t\t<td class="supplier" colspan="2">{{supplier}}</td>\n\t\t\t\t\t<td colspan="12"></td>\n\t\t\t\t</tr>\n\t\t\t\t{{#models}}\n\t\t\t\t<tr>\n\t\t\t\t\t<td colspan="2"></td>\n\t\t\t\t\t<td colspan="3" class="desc">\n\t\t\t\t\t\t{{FREFERENCE1}}<br>\n\t\t\t\t\t\t{{FREFERENCE2}}<br>\n\t\t\t\t\t\t{{FREFERENCE3}}<br>\n\t\t\t\t\t\t{{FREFERENCE4}}<br>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td colspan="2" class="date">{{DATETRANS}}</td>\n\t\t\t\t\t<td class="division">{{DIVISION}}</td>\n\t\t\t\t\t<td class="dept">{{DPTC}}</td>\n\t\t\t\t\t<td class="project">{{PROJ}}</td>\n\t\t\t\t\t<td class="major">{{MAJOR}}</td>\n\t\t\t\t\t<td class="minor">{{MINOR}}</td>\n\t\t\t\t\t<td colspan="2" class="amount-centered">\n\t\t\t\t\t\t<span class="amount"></span>{{AMOUNTPAID}}<br>\n\t\t\t\t\t\t<span class="tax"> ({{TAX}})</span>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t{{/models}}\n\t\t\t\t<tr class="total-row">\n\t\t\t\t\t<td colspan="5"></td>\n\t\t\t\t\t<td colspan="6" class="border-top"></td>\n\t\t\t\t\t<td class="border-top right">Total</td>\n\t\t\t\t\t<td colspan="2" class="border-top center"><span class="amount">{{total}}</span><span class="curr"> {{curr}}</span></td>\n\t\t\t\t</tr>\n\t\t\t{{/collection}}\n\t\t</tbody>\n\t</table>\n\t\n</div>',"report-ldv.html":'<div class="ldv-header report-header">\n\t<em class="icon-youribm-expenses"></em>\n\t<div class="title-container">\n\t\t<h2>Low Dollar Value Autopay Report</h2>\n\t\t<span>{{month}} {{year}}</span>\n\t</div>\n\t{{> avatarPartial}}\n\t<div class="user-name">{{model.fullname}}</div>\n</div>\n<div class="report-total-expenses">\n\t<span class="total-expenses">Total Expenses: </span><span class="total">{{total}}</span> <span class="curr">{{curr}}</span>\n\t<div class="csv-holder">\n\t\t<button href="#" class="csv-button-report" data-report="low-dollar-value">Download Spreadsheet &nbsp;<span class="icon icon-awf-download"></span></button>\n\t</div>\n</div>\n<div class="table-wrapper">\n\t<table class="ldv-table">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>Source</th>\n\t\t\t\t<th>Department</th>\n\t\t\t\t<th colspan="3">Description</th>\n\t\t\t\t<th>Expense<br>Date</th>\n\t\t\t\t<th>Quantity</th>\n\t\t\t\t<th>Amount</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t{{#collection}}\n\t\t\t\t<tr class="first-row">\n\t\t\t\t\t<td class="source">{{source}}</td>\n\t\t\t\t\t<td class="dept"></td>\n\t\t\t\t\t<td colspan="3" class="desc">Buy On Demand - Low Value</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t{{#models}}\n\t\t\t\t<tr>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td colspan="3" class="desc">{{DESCRIPTION}}</td>\n\t\t\t\t\t<td class="date">{{DATEPAID}}</td>\n\t\t\t\t\t<td class="quantity">{{QUANTITY}}</td>\n\t\t\t\t\t<td><span class="amount">{{AMOUNTPAID}}</span><span class="currency"> {{CCURRISO}}</span></td>\n\t\t\t\t</tr>\n\t\t\t\t{{/models}}\n\t\t\t\t<tr class="total-row">\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td colspan="3"></td>\n\t\t\t\t\t<td class="border-top"></td>\n\t\t\t\t\t<td class="border-top right">Total</td>\n\t\t\t\t\t<td class="border-top center"><span class="amount">{{total}}</span><span class="currency"> {{curr}}</span></td>\n\t\t\t\t</tr>\n\t\t\t{{/collection}}\n\t\t</tbody>\n\t</table>\n</div>',"report-wwer.html":'<div class="wwer-header report-header">\n\t<em class="icon-youribm-expenses"></em>\n\t<div class="title-container">\n\t\t<h2>WWER Expense Report</h2>\n\t\t<span>{{model.date}}</span>\n\t</div>\n\t{{> avatarPartial}}\n\t<div class="user-name">{{model.fullname}}</div>\n</div>\n<div class="wwer-desc">WWER: {{model.description}}</div>\n<div class="report-total-expenses">\n\t<span class="total-expenses">Total Expenses: </span><span class="total">{{total}}</span> <span class="curr">{{curr}}</span>\n\t<hr class="wwer-hr">\n</div>\n<div class="table-wrapper alerts">\n\t<h3 class="section-heading">Expense Alerts</h3>\n\t{{#hasExceptions}}\t\n\t\t<div class="csv-holder">\n\t\t\t<button href="#" class="csv-button-report" data-report="wwer-expense-alerts">Download Spreadsheet &nbsp;<span class="icon icon-awf-download"></span></button>\n\t\t</div>\t\n\t\t<table class="wwer-alerts-table">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Item</th>\n\t\t\t\t\t<th colspan="2">Comment</th>\n\t\t\t\t\t<th colspan="2">Policy</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\t\t\t\t\n\t\t\t\t{{#exceptions}}\n\t\t\t\t\t<tr class="content-row">\n\t\t\t\t\t\t<td class="item">{{attributes.CATEGORY}}</td>\n\t\t\t\t\t\t<td colspan="2" class="comment">{{attributes.QUESTION}}</td>\n\t\t\t\t\t\t<td colspan="2" class="policy">{{attributes.ANSWER}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t{{/exceptions}}\n\t\t\t</tbody>\n\t\t</table>\n\t{{/hasExceptions}}\n\t{{^hasExceptions}}\n\t\t<div class="no-alerts">There are no expense alerts to show.</div>\n\t{{/hasExceptions}}\t\n</div>\n<hr>\n<div class="table-wrapper details">\n\t<h3 class="section-heading">Expense Details</h3>\n\t<div class="csv-holder">\n\t\t<button href="#" class="csv-button-report-2" data-report="wwer-expense-details">Download Spreadsheet &nbsp;<span class="icon icon-awf-download"></span></button>\n\t</div>\n\t<div class="details-expenses">\n\t\t<span class="total-expenses">Total Expenses: </span><span class="total">{{total}}</span> <span class="curr">{{curr}}</span>\n\t</div>\n\t<table class="wwer-details-table">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th colspan="3">Description</th>\n\t\t\t\t<th colspan="2">Expense<br>Date</th>\n\t\t\t\t<th colspan="2">Amount<br>Home</th>\n\t\t\t\t<th colspan="2">Amount<br>Local</th>\n\t\t\t\t<th colspan="2">Charged to</th>\n\t\t\t\t<th colspan="2">Payment<br>Type</th>\n\t\t\t\t<th colspan="2">#Attendees<br>Recipients</th>\n\t\t\t\t<th colspan="2">Vendor/<br>Merchant</th>\n\t\t\t\t<th colspan="2">Purpose or<br>Category</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t{{#expenses}}\n\t\t\t\t<tr class="content-row">\n\t\t\t\t\t<td colspan="3" class="desc">{{DESCRIPTION}}</td>\n\t\t\t\t\t<td colspan="2" class="date">{{EXPENSE_DATE}}</td>\n\t\t\t\t\t<td colspan="2"><span class="amount">{{HOME_AMT}}</span> <span class="curr">{{HOME_CURRENCY_ISOCHAR}}</span></td>\n\t\t\t\t\t<td colspan="2"><span class="amount">{{LOCAL_AMT}}</span> <span class="curr">{{LOCAL_CURRENCY_ISOCHAR}}</span></td>\n\t\t\t\t\t<td colspan="2" class="charged">{{CHARGED_TO}}</td>\n\t\t\t\t\t<td colspan="2" class="type">{{PAYMENT_TYPE}}</td>\n\t\t\t\t\t<td colspan="2" class="recipients">{{ATTENDEES}}</td>\n\t\t\t\t\t<td colspan="2" class="vend-merch">{{VENDOR}}</td>\n\t\t\t\t\t<td colspan="2" class="purpose">{{PURPOSE}}</td>\n\t\t\t\t</tr>\n\t\t\t{{/expenses}}\n\t\t</tbody>\n\t</table>\n</div>',
"table-assets.html":"\n","table-awards.html":"","table-bcg.html":'<div>\n\t<div class="teamToggleHolder">\n\t\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button>\n\t\t<button href="#" class="team-toggle incountry-toggle"\n\t\t\tdata-team="incountry">In-Country</button>\n\t\t<button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n\t</div>\n\t<div class="manager-drilldown-holder" tabindex="0">\n\t\t<button class="manager-drilldown"><span>Managers</span></button>\n\t\t<div class="icon arrow-icon icon-awf-chevron-down"></div>\n\t\t<ul class="manager-drilldown-level-1"></ul>\n\t</div>\n\t<table class=\'talent-table\' data-tablename="bcg">\n\t\t<thead>\n\t\t\t<th class=\'person-link-header\'></th>\n\t\t\t<th class=\'name-header\' sort="fullname">Name</th>\n\t\t\t<th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n\t\t\t<th class=\'header-BCGCompletion\' sort="bcgCompletionDate">BCG<br />Completion</th>\n\t\t\t<th class=\'header-BCGCertificateCompletion\' sort="bcgCertificateDate">Certificate<br />Completion</th>\n\t\t\t<th class=\'header-BCGCourseCompletion\' sort="bcgCourseCompletionDate">Course<br />Completion</th>\n\t\t\t<th class=\'header-Band band\' sort="band">Band<br />(Time)</th>\n\t\t\t<th class=\'header-Country country\' sort="country">Country<br />(Dept)</th>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t{{#collection}}\n\t\t\t<tr class=\'talent-row {{uid}}-bcg {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\'\n\t\t\t\tdata-cnum=\'{{uid}}\' id="{{uid}}-bcg">\n\t\t\t\t<td class=\'person-link\' rowspan="2">\n\t\t\t\t\t<!-- <div class="count-badge animate-flicker {{uid}}-bcg-count" data-component="badge">&nbsp;</div> -->\n\t\t\t\t</td>\n\t\t\t\t<td class=\'name\'>\n\t\t\t\t\t{{{fullname}}}\n\t\t\t\t\t<p class="showhide cnum">SN: {{{uid}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class="reports">\n\t\t\t\t\t{{#isManager}}\n\t\t\t\t\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></i>\n\t\t\t\t\t{{/isManager}}\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<span id=\'{{uid}}-block1\' style="display: {{#displayBlock1}}{{displayBlock1}}{{/displayBlock1}}{{^displayBlock1}} none {{/displayBlock1}};">\n\t\t\t\t\t<a  href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a></span>\n\t\t\t\t\t<span id=\'{{uid}}-checkmark1\' style="display: {{#displayCheckMark1}}{{displayCheckMark1}}{{/displayCheckMark1}}{{^displayCheckMark1}} none {{/displayCheckMark1}};"><i class="icon icon-awf-checkmark"></i></span><span style="display: {{#displayNoText1}}{{displayNoText1}}{{/displayNoText1}}{{^displayNoText1}} none {{/displayNoText1}}; margin-left: 16px;"> No</span>\n\t\t\t\t\t<span class="bcg-exempt">{{exempt}}</span>\n\t\t\t\t\t<p class="showhide bcgCompletionDate">{{bcgCompletionDate}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<span id=\'{{uid}}-block2\' style="display: {{#displayBlock2}}{{displayBlock2}}{{/displayBlock2}}{{^displayBlock2}} none {{/displayBlock2}};">\n\t\t\t\t\t<a  href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a></span>\n\t\t\t\t\t<span id=\'{{uid}}-checkmark2\' style="display: {{#displayCheckMark2}}{{displayCheckMark2}}{{/displayCheckMark2}}{{^displayCheckMark2}} none {{/displayCheckMark2}};"><i class="icon icon-awf-checkmark"></i></span><span style="display: {{#displayNoText2}}{{displayNoText2}}{{/displayNoText2}}{{^displayNoText2}} none {{/displayNoText2}}; margin-left: 16px;"> No</span>\n\t\t\t\t\t<span class="bcg-exempt">{{exempt}}</span>\n\t\t\t\t\t<p class="showhide bcgCertificateDate">{{bcgCertificateDate}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<span id=\'{{uid}}-block3\' style="display: {{#displayBlock3}}{{displayBlock3}}{{/displayBlock3}}{{^displayBlock3}} none {{/displayBlock3}};">\n\t\t\t\t\t<a  href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a></span>\n\t\t\t\t\t<span id=\'{{uid}}-checkmark3\' style="display: {{#displayCheckMark3}}{{displayCheckMark3}}{{/displayCheckMark3}}{{^displayCheckMark3}} none {{/displayCheckMark3}};"><i class="icon icon-awf-checkmark"></i></span><span style="display: {{#displayNoText3}}{{displayNoText3}}{{/displayNoText3}}{{^displayNoText3}} none {{/displayNoText3}}; margin-left: 16px;"> No</span>\n\t\t\t\t\t<span class="bcg-exempt">{{exempt}}</span>\n\t\t\t\t\t<p class="showhide bcgCourseCompletionDate">{{bcgCourseCompletionDate}}</p>\n\t\t\t\t</td>\n\n\t\t\t\t<td class=\'band\'>\n\t\t\t\t\t<span>{{{band}}}</span>\n\t\t\t\t\t</br>\n\t\t\t\t\t<p class="showhide"> <span>{{{timeInBand}}}</span>\n\t\t\t\t\t</p>\n\t\t\t\t</td>\n\n\t\t\t\t<td class=\'country\'>\n\t\t\t\t\t<span>{{{country}}}</span>\n\t\t\t\t\t</br>\n\t\t\t\t\t<p class="showhide"> <span>{{{dept}}}</span>\n\t\t\t\t\t</p>\n\t\t\t\t</td>\n\n\n\t\t\t\t<td class=\'expand\'>\n\t\t\t\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-bcg"></button>\n\t\t\t\t</td>\n\t\t\t\t\n\t\t\t\t<td class="table-spacer">&nbsp;</td>\n\t\t\t</tr>\n\n\t\t\t<tr class="talent-row alert-section-row {{uid}}-bcg" data-currTab="{{uid}}-bcg" data-currCnum="{{uid}}">\n\t\t\t\t<!-- <td colspan="1"></td> -->\n\t\t\t\t<td colspan="99" class="alert-data-cell loading-alerts">\n\t\t\t\t\t<div class="loading"><i class="icon-ibm-bee"></i></div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t{{/collection}}\n\t\t</tbody>\n\t</table>\n</div>\n',"table-benefits.html":"\n","table-compensation.html":'<div>\n    <div class="teamToggleHolder">\n        <button href="#" class="team-toggle global-toggle current" data-team="global">Global</button><button href="#" class="team-toggle incountry-toggle"\n            data-team="incountry">In-Country</button><button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n    </div>\n    <div class="manager-drilldown-holder" tabindex="0">\n\t\t<button class="manager-drilldown"><span>Managers</span></button>\n\t\t<div class="icon arrow-icon icon-awf-chevron-down"></div>\n\t\t<ul class="manager-drilldown-level-1"></ul>\n\t</div>\n    <table class=\'talent-table\' data-tablename="compensation">\n        <thead>\n            <th class=\'person-link-header\'></th>\n            <th class=\'name-header\' sort="fullname">Name</th>\n            <th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n            <!--<th class=\'header-Alert\'></br>Alert</th>-->\n            <th class=\'header-AproximateAnnualSalary\' sort="appAnnualSalary">Approximate<br />Annual Salary</th>\n            <th class=\'header-LastSalaryChange\' sort="lastSalaryChangeAmount">Last Salary<br />Change</th>\n            <th class=\'header-PRM\' sort="pmrPercent">\n                </br>PMR</th>\n            <th class=\'header-Band band\' sort="band">Band<br />(Time)</th>\n            <th class=\'header-Country country\' sort="country">Country<br />(Dept)</th>\n        </thead>\n        <tbody>\n            {{#collection}}\n            <tr class=\'talent-row {{uid}}-compensation {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\'\n                data-cnum=\'{{uid}}\' id="{{uid}}-compensation">\n                <td class=\'person-link\' rowspan="2">                \n                    <!-- <div class="count-badge animate-flicker  {{uid}}-compensation-count" data-component="badge">&nbsp;</div> -->\n                </td>\n                <td class=\'name\'>\n                    {{{fullname}}}\n                    <p class="showhide cnum">SN: {{{uid}}}</p>\n                </td>\n                <td class="reports">\n\t\t\t\t\t{{#isManager}}\n\t\t\t\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></i>\n                    {{/isManager}}\n\t\t\t\t</td>\n                <!--\n            <td class=\'alert\'>\n\t\t\t\t<p></p>\n\t\t\t</td>\n            -->\n\n                <td class=\'appAnnualSalary align-right\'>\n                    <span>{{{appAnnualSalary}}} {{{appAnnualSalaryCurrency}}}</span>\n                </td>\n\n                <td class=\'lastSalaryChange align-right\'>\n                    <span>{{{lastSalaryChangeAmount}}} {{{lastSalaryChangeAmountCurrency}}}</span>\n                    </br>\n                    <p class="showhide"> <span>{{{lastSalaryChangeDate}}}</span>\n                    </p>\n                </td>\n\n                <td class=\'pmr align-right\'>\n                    <span>{{{pmrPercent}}}</span>\n                </td>\n\n                <td class=\'band\'>\n                    <span>{{{band}}}</span>\n                    </br>\n                    <p class="showhide"> <span>{{{timeInBand}}}</span>\n                    </p>\n                </td>\n\n                <td class=\'country\'>\n                    <span>{{{country}}}</span>\n                    </br>\n                    <p class="showhide"> <span>{{{dept}}}</span>\n                    </p>\n                </td>\n\n                <td class=\'expand\'>\n                    <button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-compensation"></button>\n                </td>\n                \n                <td class="table-spacer">&nbsp;</td>\n            </tr>\n\n            <!-- Addtional information -->\n            <tr class="talent-row additional-section-row {{uid}}-compensation">\n                <!-- <td colspan="1"></td> -->\n                <td colspan="99" class="alert-data-cell loading-alerts">\n                    <div class="table-additional-info-div">\n                        <table border="1" class="table-additional-info" cellspacing="0" cellpadding="0">\n                            <tr>\n                                <td colspan="6">\n                                    <strong>Additional Information</strong>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td><span>&nbsp;</span></td>\n                                <td>\n                                    Bonus<br>Pay<br><br>\n                                    <span>{{{bonusPay}}}</span><span> </span><span>{{currency}}</span>\n                                </td>\n                                <td>\n                                    Holding<br>Power<br><br>\n                                    <span>{{{holdingPower}}}</span><span> </span><span>{{currency}}</span>\n                                </td>\n                                <td>\n                                    Awards<br>(3 yr)<br><br>\n                                    <span>{{{awards}}}</span><span> </span><span>{{currency}}</span>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td><span>&nbsp;</span></td>\n                            </tr>\n                        </table>\n                    </div>\n                </td>\n            </tr>\n\n\n        <tr class="talent-row alert-section-row {{uid}}-compensation" data-currTab="{{uid}}-compensation" data-currCnum="{{uid}}">\n            <td colspan="1"></td>\n            <td colspan="99" class="alert-data-cell loading-alerts">\n                <div class="loading"><i class="icon-ibm-bee"></i></div>\n            </td>\n        </tr>\n\n            {{/collection}}\n        </tbody>\n    </table>\n</div>\n<!--\n<script>\n$( document ).ready(function() {\n $(".talent-row:even:visible").each(function(){\nsubChild =$(this).next().find(".alert-data-cell");\nchild=$(this).children()\n\nh= subChild.find("table tr:not(:first-child)").children();\ncount = 2;\n  h.parent().addClass("alignText");\nh.each(function(index,obj){\n\n  countW = count+index;\n  wdithTd= child.eq(countW).width();\n  if(wdithTd < 60)\n    wdithTd =60\n\n$(this).width(wdithTd)\n})\n}) })\n</script>\n-->\n',"table-dates.html":'<div>\n\t<div class="teamToggleHolder" tabindex="0">\n\t\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button>\n\t\t<button href="#" class="team-toggle incountry-toggle" data-team="incountry">In-Country</button>\n\t\t<button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</a>\n\t</div>\n\t<div class="manager-drilldown-holder" tabindex="0">\n\t\t<button class="manager-drilldown"><span>Managers</span></button>\n\t\t<div class="icon arrow-icon icon-awf-chevron-down"></div>\n\t\t<ul class="manager-drilldown-level-1"></ul>\n\t</div>\n<table class=\'talent-table\' data-tablename="dates">\n\t<thead>\n\t\t<th class=\'person-link-header\' aria-label="Team member picture"></th>\n\t\t<th class=\'name-header\' sort="fullname" aria-label="Team member name">Name</th>\n\t\t<th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n\t\t<th class=\'birthday-header\' sort="dateOfBirth">Birthday</th>\n\t\t<th class=\'service-reference-header\' sort="serviceReference">Service Reference <br />(Length)</th>\n\t\t<th class=\'date-of-hire-header\' sort="dateOfHire">Date of Hire</th>\n\t\t<th class=\'band\' sort="band">Band<br />(Time)</th>\n\t\t<th class=\'country\' sort="country">Country<br />(Dept)</th>\n\t</thead>\n\t<tbody>\n\t\t{{#collection}}\n\t\t\t<tr class=\'talent-row {{uid}}-dates {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\' data-cnum=\'{{uid}}\' id="{{uid}}-dates">\n\t\t\t\t<td class=\'person-link\' rowspan="2">\n\t\t\t<!-- <div class="count-badge animate-flicker  {{uid}}-dates-count" data-component="badge" data-uid="{{uid}}-dates">&nbsp;</div> -->\n\t\t</td>\n\t\t<td class=\'name\'>\n\t\t\t{{{fullname}}}\n\t\t\t<p class="showhide cnum">SN: {{{uid}}}</p>\n\t\t</td>\n\t\t<td class="reports">\n\t\t\t{{#isManager}}\n\t\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager"\n\t\t\t\tdata-uid="{{uid}}" data-name="{{ fullname }}"></i> {{/isManager}}\n\t\t</td>\n\t\t<td class=\'birthday\'>{{{dateOfBirth}}}</td>\n\t\t<td class=\'service-reference\'>\n\t\t\t{{{serviceReference}}}\n\t\t\t<p class="showhide timeInBand">{{{serviceLength}}}</p>\n\t\t</td>\n\t\t<td class=\'date-of-hire\'>{{{dateOfHire}}}</td>\n\t\t<td class=\'band\'>\n\t\t\t<p>{{{band}}}</p>\n\t\t\t<p class="showhide timeInBand">{{{timeInBand}}}</p>\n\t\t</td>\n\t\t<td class=\'country\'>\n\t\t\t<p>{{{country}}}</p>\n\t\t\t<p class="showhide">{{{dept}}}</p>\n\t\t</td>\n\t\t<td class=\'expand\'>\n\t\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-dates"></button>\n\t\t</td>\n\t\t</tr>\n\t\t<tr class="talent-row alert-section-row {{uid}}-dates" data-currCnum="{{uid}}"  data-currTab="{{uid}}-dates">\n\t\t\t<!-- <td colspan="1"></td> -->\n\t\t\t<td colspan="99" class="alert-data-cell loading-alerts">\n\t\t\t\t<div class="loading"><i class="icon-ibm-bee"></i></div>\n\t\t\t</td>\n\t\t</tr>\n\t\t{{/collection}}\n\t\t</tbody>\n\t\t</table>\n\t</div>\n',"table-diversity.html":"\n","table-emergency.html":'<div>\n    <div class="teamToggleHolder">\n        <button href="#" class="team-toggle global-toggle current" data-team="global">Global</button>\n        <button href="#" class="team-toggle incountry-toggle" data-team="incountry">In-Country</button>\n        <button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n    </div>\n\t<div class="manager-drilldown-holder" tabindex="0">\n\t\t<button class="manager-drilldown"><span>Managers</span></button>\n\t\t<div class="icon arrow-icon icon-awf-chevron-down"></div>\n\t\t<ul class="manager-drilldown-level-1"></ul>\n\t</div>\n    <table class="talent-table" data-tablename="emergency">\n        <thead>\n            <th class="person-link-header" aria-label="Team member picture"></th>\n            <th class="name-header" sort="fullname" aria-label="Team member name">Name</th>\n\t\t\t<th class="reports-header" aria-label="Team member view direct reports" sort="isManager"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n\t\t\t<th class="position-header emergency-name-header">Current<br />Emergencies</th> <!-- TODO : implement sort -->\n            <th class="status-header" sort="emergencies.length">Contacts</th>\n            <th class="header-Band band" sort="band">Band<br />(Time)</th>\n            <th class="header-Country country" sort="country">Country<br />(Dept)</th>\n        </thead>\n        <tbody>\n        {{#collection}}\n            <tr class="talent-row {{uid}}-emergency {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}" data-cnum="{{uid}}" id="{{uid}}-emergency">\n                \n                <td class="person-link" rowspan="2">\n                    <!-- <div class="count-badge" data-component="badge">\n                    \t{{#alerts}}\n                    \t\t{{notices.length}}\n                    \t{{/alerts}}\n                    </div> -->\n                </td>\n                <td class="name"> {{{fullname}}}\n                    <p class="showhide cnum">SN: {{{uid}}}</p>\n                </td>\n\t\t\t\t<td class="reports">\n\t\t\t\t\t{{#isManager}}\n\t\t\t\t\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></i>\n\t\t\t\t\t{{/isManager}}\n\t\t\t\t</td>\n                <!-- following fields kept here to match with -vars so the card renders -->\n                <td class="position emergency-name">\n                    <p>&nbsp;</p>\n\t\t\t\t<!-- <p><b>{{{position}}}</b></p> -->\n                </td>\n                <td class="status contacts">\n\t\t\t<p>\n\t\t\t\t<span class="dataField" id="NUMCONTACTS">{{{emergencies.length}}}</span>\n\t\t\t</p>\n                </td>\n                <!-- remains unchanged for now -->\n                <td class="band">\n                    <p>{{{band}}}</p>\n\t\t\t<p class="showhide timeInBand">{{{timeInBand}}}</p>\n                </td>\n                <td class="country">\n                    <p>{{{country}}}</p>\n                    <p class="showhide">{{{dept}}}</p>\n                </td>\n                <td class="expand">\n                    <button class="expand-btn icon-awf-op-plus" href="#" data-uid="{{uid}}-emergency"></button>\n                </td>\n                \n            </tr>\n\n            <!-- show hide new tr for emergency name new alert service -->\n            <!-- show hine new tr with 2 td or div for contact details -->\n            <tr class="talent-row additional-section-row {{uid}}-emergency">\n                <!-- <td colspan="1">&nbsp;</td> -->\n                <td colspan="10" class="alert-data-cell loading-alerts">\n                    <div class="dashboard-additional-info additional-info">\n\t\t\t\t\t\t<div class="flex-container">\n\t\t\t\t\t\t\t\t<div class="additional-info-box-small">\n\t\t\t\t\t\t\t\t\t<div class="additional-boxed-title">{{^emergencies}}No {{/emergencies}}Emergency Contacts</div>\n\t\t\t\t\t\t\t\t\t<div class="emergency-list-row">\n\t\t\t\t\t\t\t\t\t\t{{#emergencies}}\n\t\t\t\t\t\t\t\t\t\t\t<div class="emergency-contact-container">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="info-box-row-label">Name:&nbsp;</span><span class="value contact-name">{{{emergencyContactName}}}</span><br />\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="info-box-row-label">Relationship:&nbsp;</span><span class="value relationship">{{{relationship}}}</span><br />\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="info-box-row-label">Phone Number:&nbsp;</span><span class="value phone">{{{phone}}}</span><br />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{{/emergencies}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n            \t</td>\n        \t</tr>\n\n\t\t\t<tr class="talent-row alert-section-row {{uid}}-emergency" data-currTab="{{uid}}-emergency" data-currCnum="{{uid}}">\n\t\t\t\t<!-- <td colspan="1"></td> -->\n\t\t\t\t<td colspan="99" class="alert-data-cell loading-alerts">\n\t\t\t\t\t<div class="loading"><i class="icon-ibm-bee"></i></div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t{{/collection}}\n\t\t</tbody>\n    </table>\n</div>\n',"table-expenses.html":'<div>\n\t<div class="month-year-holder" tabindex="0">\n\t\t<button class="month-year"><span>{{currentPeriod.text}}</span></button>\n\t\t<div class="icon arrow-icon icon-awf-chevron-down"></div>\n\t\t<ul class="month-year-list">\n\t\t\t{{#monthYearList}}\n\t\t\t<li class=\'month-year-list-item\'><button data-uid="{{value}}">{{text}}</button></li>\n\t\t\t{{/monthYearList}}\n\t\t</ul>\n\t</div>\n\t<table class=\'talent-table\'>\n\t\t<thead>\n\t\t\t<th class=\'person-link-header\' aria-label="Team member picture"></th>\n\t\t\t<th class=\'name-header\' sort="fullname" aria-label="Team member name">Name</th>\n\t\t\t<!--<th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>-->\n\t\t\t<th class=\'header-one align-right\' sort="wwer2.chargedDefault">Expense Reimbursement:<br/>Default Account</th>\n\t\t\t<th class=\'header-twho align-right\' sort="wwer2.chargedOther">Expense Reimbursement:<br/>Other Account</th>\n\t\t\t<th class=\'header-three align-right\' sort="otherExpenses">Other Expenses (CB+LDV)</th>\n\t\t\t<th class=\'header-Band band\' sort="band">Band<br />(Time)</th>\n\t\t\t<th class=\'header-Country country\' sort="country">Country<br />(Dept)</th>\n\t\t</thead>\n\t\t<tbody> {{#collection}}\n\t\t\t<tr class=\'talent-row {{uid}}-expenses {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\' data-cnum=\'{{cnum}}\' id="{{uid}}-expenses">\n\t\t\t\t<td class=\'person-link\' rowspan="2">\n\t\t\t\t\t<!-- <div class="count-badge animate-flicker {{uid}}-expenses-count" data-component="badge">&nbsp;</div> -->\n\t\t\t\t</td>\n\t\t\t\t<td class=\'name\'> {{{fullname}}}\n\t\t\t\t</td>\n\t\t\t\t<!--\n\t\t\t\t<td class="reports">\n\t\t\t\t\t{{#isManager}}\n\t\t\t\t\t\t<span class="icon-youribm-logo-managerhub-circle-fill is-manager"  aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></span>\n\t\t\t\t\t{{/isManager}}\n\t\t\t\t</td>-->\n\t\t\t\t<td class=\'default-account align-right\'>\n\t\t\t\t\t<span class=\'amount\'>\n\t\t\t\t\t\t{{#wwer2.chargedDefaultMask}}\n\t\t\t\t\t\t\t<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data"\n\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\ttitle="Data is not available or restricted. Click to learn more."\n\t\t\t\t\t\t\tclass="blocked ibm-external-link">\n\t\t\t\t\t\t\t\t<i class="icon icon-awf-slash-circle"></i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t{{/wwer2.chargedDefaultMask}}\n\t\t\t\t\t\t{{^wwer2.chargedDefaultMask}}\n\t\t\t\t\t\t\t{{wwer2.chargedDefault}}\n\t\t\t\t\t\t\t{{^wwer2.chargedDefaultCurrencyMask}}\n\t\t\t\t\t\t\t<span class=\'currency\'>{{wwer2.chargedDefaultCurrency}}</span>\n\t\t\t\t\t\t\t{{/wwer2.chargedDefaultCurrencyMask}}\n\t\t\t\t\t\t{{/wwer2.chargedDefaultMask}}\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'other-account align-right\'>\n\t\t\t\t\t<span class=\'amount\'>\n\t\t\t\t\t\t{{#wwer2.chargedOtherMask}}\n\t\t\t\t\t\t\t<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data"\n\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\ttitle="Data is not available or restricted. Click to learn more."\n\t\t\t\t\t\t\tclass="blocked ibm-external-link">\n\t\t\t\t\t\t\t\t<i class="icon icon-awf-slash-circle"></i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t{{/wwer2.chargedOtherMask}}\n\t\t\t\t\t\t{{^wwer2.chargedOtherMask}}\n\t\t\t\t\t\t\t{{wwer2.chargedOther}}\n\t\t\t\t\t\t\t{{^wwer2.chargedOtherCurrencyMask}}\n\t\t\t\t\t\t\t<span class=\'currency\'>{{wwer2.chargedOtherCurrency}}</span>\n\t\t\t\t\t\t\t{{/wwer2.chargedOtherCurrencyMask}}\n\t\t\t\t\t\t{{/wwer2.chargedOtherMask}}\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'other-expenses align-right\'>\n\t\t\t\t\t<span class=\'amount\'>\n\t\t\t\t\t\t{{#otherExpensesMask}}\n\t\t\t\t\t\t\t<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data"\n\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\ttitle="Data is not available or restricted. Click to learn more."\n\t\t\t\t\t\t\tclass="blocked ibm-external-link">\n\t\t\t\t\t\t\t\t<i class="icon icon-awf-slash-circle"></i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t{{/otherExpensesMask}}\n\t\t\t\t\t\t{{^otherExpensesMask}}\n\t\t\t\t\t\t\t{{otherExpenses}}\n\t\t\t\t\t\t\t{{^otherExpensesCurrencyMask}}\n\t\t\t\t\t\t\t<span class=\'currency\'>{{otherExpensesCurrency}}</span>\n\t\t\t\t\t\t\t{{/otherExpensesCurrencyMask}}\n\t\t\t\t\t\t{{/otherExpensesMask}}\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'band\'>\n\t\t\t\t\t<p>{{{band}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'country\'>\n\t\t\t\t\t<p>{{{country}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'expand\'>\n\t\t\t\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{cnum}}-expenses"></button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr class="talent-row alert-section-row {{cnum}}-expenses expenses-alert-row" data-uid="{{cnum}}" data-currTab="{{uid}}-expenses" data-currCnum="{{uid}}">\n\t\t\t\t<!-- <td colspan="1"></td> -->\n\t\t\t\t<td colspan="99" class="alert-data-cell loading-alerts">\n\t\t\t\t\t<div class="loading">\n\t\t\t\t\t\t<i class="icon-ibm-bee"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t</tr> {{/collection}}\n\t\t</tbody>\n\t</table>\n</div>\n',"table-expertise.html":'<div>\n\t<div class="teamToggleHolder">\n\t\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button><button href="#" class="team-toggle incountry-toggle"\n\t\t\tdata-team="incountry">In-Country</button><button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n\t</div>\n\t<div class="manager-drilldown-holder" tabindex="0">\n\t\t<button class="manager-drilldown"><span>Managers</span></button>\n\t\t<div class="icon arrow-icon icon-awf-chevron-down"></div>\n\t\t<ul class="manager-drilldown-level-1"></ul>\n\t</div>\n\t<table class=\'talent-table\' data-tablename="expertise">\n\t\t<thead>\n\t\t\t<th class=\'person-link-header\' aria-label="Team member picture"></th>\n\t\t\t<th class=\'name-header\' sort="fullname" aria-label="Team member name">Name</th>\n\t\t\t<th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n\t\t\t<th class=\'header-Think40Hours\' sort="supplemental.think40">Think40 Hours</th>\n\t\t\t<th class=\'header-IndustryInsight\' sort="supplemental.piiLevel">Provides Industry Insight</th>\n\t\t\t<th class=\'header-ManagesProjectsPrograms\' sort="supplemental.mppLevel">Manages Projects &amp; Programs</th>\n\t\t\t<th class=\'header-PrescribedLearningTaken\' sort="supplemental.lk">Prescribed Learning Taken?</th>\n\t\t\t<th class=\'header-Band band\' sort="band">Band<br />(Time)</th>\n\t\t\t<th class=\'header-Country country\' sort="country">Country<br />(Dept)</th>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t{{#collection}}\n\t\t\t<tr class=\'talent-row {{uid}}-expertise {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\'\n\t\t\t\tdata-cnum=\'{{uid}}\' id="{{uid}}-expertise">\n\t\t\t\t<td class=\'person-link\' rowspan="2">\n\t\t\t\t\t<div class="count-badge animate-flicker  {{uid}}-expertise-count off" data-component="badge">&nbsp;</div>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'name\'>\n\t\t\t\t\t{{{fullname}}}\n\t\t\t\t\t<p class="showhide cnum">SN: {{{uid}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class="reports">\n\t\t\t\t\t{{#isManager}}\n\t\t\t\t\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></i>\n\t\t\t\t\t{{/isManager}}\n\t\t\t\t</td>\n\t\t\t\t<td class=\'think40\'>\n\t\t\t\t\t<p>{{{supplemental.think40}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'piiLevel\'>\n\t\t\t\t\t<p>{{{supplemental.piiLevel}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'mppLevel\'>\n\t\t\t\t\t<p>{{{supplemental.mppLevel}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'lk\'>\n\t\t\t\t\t<p>{{{supplemental.lk}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'band\'>\n\t\t\t\t\t<p>{{{band}}}</p>\n\t\t\t\t\t<p class="showhide timeInBand">{{{timeInBand}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'country\'>\n\t\t\t\t\t<p>{{{country}}}</p>\n\t\t\t\t\t<p class="showhide">{{{dept}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'expand\'>\n\t\t\t\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-expertise"></button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\n\n\t\t\t<tr class="talent-row alert-section-row {{uid}}-expertise" data-currTab="{{uid}}-expertise" data-currCnum="{{uid}}">\n\t\t\t\t<!-- <td colspan="1"></td> -->\n\t\t\t\t<td colspan="99" class="alert-data-cell loading-alerts">\n\t\t\t\t\t<div class="loading"><i class="icon-ibm-bee"></i></div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t{{/collection}}\n\t\t</tbody>\n\t</table>\n</div>\n',"table-global.html":"\n","table-jobs.html":"","table-leadership.html":'<div>\n\t<div class="teamToggleHolder">\n\t\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button><button href="#" class="team-toggle incountry-toggle"\n\t\t\tdata-team="incountry">In-Country</button><button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n\t</div>\n\t<div class="manager-drilldown-holder" tabindex="0">\n\t\t<button class="manager-drilldown"><span>Managers</span></button>\n\t\t<div class="icon arrow-icon icon-awf-chevron-down"></div>\n\t\t<ul class="manager-drilldown-level-1"></ul>\n\t</div>\n\t<table class=\'talent-table\' data-tablename="leadership">\n\t\t<thead>\n\t\t\t<th class=\'person-link-header\'></th>\n\t\t\t<th class=\'name-header\' sort="fullname">Name</th>\n\t\t\t<th class=\'header-Position\' sort="extLeadPot">Extraordinary<br>Leadership<br>Potential</th>\n\t\t\t<th class=\'header-BTLTalent2014\' sort="btlExecPot">BTL<br>Executive<br>Potential</th>\n\t\t\t<th class=\'header-BTLTalent2016\' sort="timeframe">BTL First<br>Executive<br>Appointment</th>\n\t\t\t<th class=\'header-ServiceLength\' sort="btlSenExecPot">BTL Senior<br>Executive<br>Potential</th>\n\t\t\t<th class=\'header-Band band\' sort="band">Band<br />(Time)</th>\n\t\t\t<th class=\'header-Country country\' sort="country">Country<br />(Dept)</th>\n\t\t\t<th class=\'header-expand\'></th>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t{{#collection}}\n\t\t\t<tr class=\'talent-row leadership {{uid}}-leadership {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\'\n\t\t\t\tdata-cnum=\'{{uid}}\' id="{{uid}}-leadership">\n\t\t\t\t<td class=\'person-link\' rowspan="2">\n\t\t\t\t\t<!-- <div class="count-badge animate-flicker  {{uid}}-leadership-count" data-component="badge">&nbsp;</div> -->\n\t\t\t\t</td>\n\t\t\t\t<td class=\'name\'>\n\t\t\t\t\t{{{fullname}}}<br>\n\t\t\t\t\t<p class="showhide uid">SN: {{{uid}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'checkmark\'>\n\t\t\t\t\t{{#extLeadPotMask}}\n\t\t\t\t\t\t{{{extLeadPotMask}}}\n\t\t\t\t\t{{/extLeadPotMask}}\n\t\t\t\t\t{{^extLeadPotMask}}\n\t\t\t\t\t\t{{#extLeadPot}}\n\t\t\t\t\t\t\t<i class="icon-awf-checkmark"></i>\n\t\t\t\t\t\t{{/extLeadPot}}\n\t\t\t\t\t{{/extLeadPotMask}}\n\t\t\t\t</td>\n\n\t\t\t\t<td class=\'\'>\n\t\t\t\t\t{{#btlExecPotMask}}\n\t\t\t\t\t\t{{{btlExecPotMask}}}\n\t\t\t\t\t{{/btlExecPotMask}}\n\t\t\t\t\t{{^btlExecPotMask}}\n\t\t\t\t\t\t{{{btlExecPot}}}\n\t\t\t\t\t{{/btlExecPotMask}}\n\t\t\t\t</td>\n\n\t\t\t\t<td class=\'\'>\n\t\t\t\t\t{{{timeframe}}}\n\t\t\t\t</td>\n\n\t\t\t\t<td class=\'checkmark\'>\n\t\t\t\t\t{{#btlSenExecPotMask}}\n\t\t\t\t\t\t{{{btlSenExecPotMask}}}\n\t\t\t\t\t{{/btlSenExecPotMask}}\n\t\t\t\t\t{{^btlSenExecPotMask}}\n\t\t\t\t\t\t{{#btlSenExecPot}}\n\t\t\t\t\t\t\t<i class="icon-awf-checkmark"></i>\n\t\t\t\t\t\t{{/btlSenExecPot}}\n\t\t\t\t\t{{/btlSenExecPotMask}}\n\t\t\t\t</td>\n\n\t\t\t\t<td class=\'band\'>\n\t\t\t\t\t<p>{{{band}}}</p>\n\t\t\t\t\t<p class="showhide timeInBand">{{{timeInBand}}}</p>\n\t\t\t\t</td>\n\n\t\t\t\t<td class=\'country\'>\n\t\t\t\t\t<p>{{{country}}}</p>\n\t\t\t\t\t<p class="showhide">{{{dept}}}</p>\n\t\t\t\t</td>\n\n\t\t\t\t<td class=\'expand\'>\n\t\t\t\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-leadership"></button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\n\t\t\t<tr class="talent-row leadership alert-section-row {{uid}}-leadership" data-currTab="{{uid}}-leadership" data-currCnum="{{uid}}">\n\t\t\t\t<td colspan="1"></td>\n\t\t\t\t<td colspan="99">\n\t\t\t\t\t<div class="leadership-drawer-container">\n\t\t\t\t\t\t<span class="title">Position</span><span>{{{position}}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="leadership-drawer-container">\n\t\t\t\t\t\t<span class="title">Service Reference Date</span><span>{{{serviceReference}}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="leadership-drawer-container">\n\t\t\t\t\t\t<span class="title">Service Length</span><span>{{{serviceLength}}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<br />\n\t\t\t\t</td>\n\t\t\t</tr>\n\n\t\t\t<tr class="talent-row alert-section-row {{uid}}-leadership"  data-currTab="{{uid}}-leadership" data-currCnum="{{uid}}">\n\t\t\t\t<!-- <td colspan="1"></td> -->\n\t\t\t\t<td colspan="99" class="alert-data-cell loading-alerts">\n\t\t\t\t\t<div class="loading"><i class="icon-ibm-bee"></i></div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\n\t\t\t{{/collection}}\n\t\t</tbody>\n\t</table>\n\n</div>\n',
"table-performance.html":'<div>\n\t<div class="teamToggleHolder">\n\t\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button><button href="#" class="team-toggle incountry-toggle"\n\t\t\tdata-team="incountry">In-Country</button><button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n\t</div>\n\t<div class="manager-drilldown-holder" tabindex="0">\n\t\t<button class="manager-drilldown"><span>Managers</span></button>\n\t\t<div class="icon arrow-icon icon-awf-chevron-down"></div>\n\t\t<ul class="manager-drilldown-level-1"></ul>\n\t</div>\n\t<table class=\'talent-table\' data-tablename="performance">\n\t\t<thead>\n\t\t\t<th class=\'person-link-header\' aria-label="Team member picture"></th>\n\t\t\t<th class=\'name-header\' sort="fullname" aria-label="Team member name">Name</th>\n\t\t\t<th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n\t\t\t\n\t\t\t{{#isCheckpointActive}}\n\t\t\t<th class=\'business-results\' sort="businessResults">Business Results</th>\n\t\t\t<th class=\'client-success\' sort="clientSuccess">Client Success</th>\n\t\t\t<th class=\'innovation\' sort="innovation">Innovation</th>\n\t\t\t<th class=\'responsibility-to-others\' sort="responsibilityToOthers">Responsibility to Others</th>\n\t\t\t<th class=\'skills\' sort="skills">Skills</th>\n\t\t\t{{/isCheckpointActive}}\n\t\t\t{{^isCheckpointActive}}\n\t\t\t<th class=\'pbc\' sort="pbcYear1">PBC 2015</th>\n\t\t\t<th class=\'pbc\' sort="pbcYear2">PBC 2014</th>\n\t\t\t<th class=\'pbc\' sort="pbcYear3">PBC 2013</th>\n\t\t\t{{#paActive}}\n\t\t\t<th class=\'pa\' sort="supplemental.pa">PAs</th>\n\t  \t{{/paActive}}\n\t\t\t{{/isCheckpointActive}}\n\t\t\t\n\t\t\t<th class=\'band\' sort="band">Band<br />(Time)</th>\n\t\t\t<th class=\'country\' sort="country">Country<br />(Dept)</th>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t{{#collection}}\n\t\t\t<tr class=\'talent-row {{uid}}-performance {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\'\n\t\t\t\tdata-cnum=\'{{uid}}\' id="{{uid}}-performance">\n\t\t\t\t<td class=\'person-link\' rowspan="2">\n\t\t\t\t\t<div class="count-badge animate-flicker {{uid}}-performance-count off" data-component="badge">&nbsp;</div>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'name\'>\n\t\t\t\t\t{{{fullname}}}\n\t\t\t\t\t<p class="showhide cnum">SN: {{{uid}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class="reports">\n\t\t\t\t\t{{#isManager}}\n\t\t\t\t\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></i>\n\t\t\t\t\t{{/isManager}}\n\t\t\t\t</td>\n\n\t\t\t\t{{#isCheckpointActive}}\n\n\t\t\t\t<td class=\'business-results-row\'>{{{businessResults}}} </td>\n\t\t\t\t<td class=\'client-success-row\'data-definition="Work Place Indicator">{{{clientSuccess}}}</td>\n\t\t\t\t<td class=\'innovation-row\' data-definition="Work Place Indicator">{{{innovation}}}</td>\n\t\t\t\t<td class=\'responsibility-to-others-row\' data-definition="Work Place Indicator">{{{responsibilityToOthers}}}</td>\n\t\t\t\t<td class=\'skills-row\' data-definition="Work Place Indicator">{{{skills}}}</td>\n\n\t\t\t\t{{/isCheckpointActive}}\n\t\t\t\t{{^isCheckpointActive}}\n\n\t\t\t\t<td class=\'pbcYear1\'><p>{{{pbcYear1}}}</p></td>\n\t\t\t\t<td class=\'pbcYear2\'><p>{{{pbcYear2}}}</p></td>\n\t\t\t\t<td class=\'pbcYear3\'><p>{{{pbcYear3}}}</p></td>\n\n    \t\t{{#paActive}}\n\t\t\t\t\t<td class=\'pa\'>\n\t\t\t\t\t\t{{{supplemental.pa}}}\n\t\t\t\t\t</td>\n\t\t\t\t{{/paActive}}\n\t\t\t\t{{/isCheckpointActive}}\n\t\t\t\t<td class=\'band\'>\n\t\t\t\t\t<p>{{{band}}}</p>\n\t\t\t\t\t<p class="showhide timeInBand">{{{timeInBand}}}</p>\n\t\t\t\t</td>\n\n\t\t\t\t<td class=\'country\'>\n\t\t\t\t\t<p>{{{country}}}</p>\n\t\t\t\t\t<p class="showhide">{{{dept}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'expand\'>\n\t\t\t\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-performance"></button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t{{#isCheckpointActive}}\n\t\t\t<tr class="talent-row additional-section-row {{uid}}-performance">\n      \t<td colspan="20">\n            <div class="addtional-section">\n\t\t\t\t\t\t\t<div class="additional-boxed-title">Checkpoint Assessment</div><br/>\n\t\t\t\t\t\t\t<span class="additional-section-field value">{{{checkpointAssessmentDate}}}</span><br/>\n\t\t\t\t\t\t</div>\n        </td>\n      </tr>\n\t\t\t<tr class="talent-row additional-section-row {{uid}}-performance">\n      \t<td colspan="20">\n            <div class="addtional-section">\n\t\t\t\t\t\t\t<div class="additional-section-container">\n\t\t\t\t\t\t\t\t<div class="additional-boxed-title">PBC History</div>\n\t\t\t\t\t\t\t\t<span class="additional-section-field">PBC 2015:   </span><span class="additional-section-field value">{{{pbcYear1}}}</span><br/>\n\t\t\t\t\t\t\t\t<span class="additional-section-field">PBC 2014:   </span><span class="additional-section-field value">{{{pbcYear2}}}</span><br/>\n\t\t\t\t\t\t\t\t<span class="additional-section-field">PBC 2013:   </span><span class="additional-section-field value">{{{pbcYear3}}}</span><br/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="additional-section-container">\n\t\t\t\t\t\t\t\t{{#paActive}}\n\t\t\t\t\t\t\t\t<div class="additional-boxed-title">Project Assessments</div>\n\t\t\t\t\t\t\t\t<span class="additional-section-field">Number of PAs:   </span><span class="additional-section-field value">{{{supplemental.pa}}}</span><br/>\n\t\t\t\t\t\t\t\t{{/paActive}}\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\n        </td>\n      </tr>\n\t\t\t<tr class="talent-row additional-section-row {{uid}}-performance">\n      \t<td colspan="20">\n            <div class="addtional-section">\n\t\t\t\t\t\t\t<div class="additional-boxed-title">Checkpoint Questions</div>\n\t\t\t\t\t\t\t<span class="additional-section-field">Job Availability</span><br/>\n\t\t\t\t\t\t\t<span class="additional-section-field value">{{{checkpointQuestionJobAvailability}}}</span>\t\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<span class="additional-section-field">Manager Assessment Certification</span><br/>\n\t\t\t\t\t\t\t<span class="additional-section-field value">{{{checkpointQuestionManagerCertification}}}</span>\n\t\t\t\t\t\t</div>\n        </td>\n      </tr>\n\t\t\t{{/isCheckpointActive}}\n\t\t\t<tr class="talent-row alert-section-row {{uid}}-performance"  data-currTab="{{uid}}-performance" data-currCnum="{{uid}}">\n\t\t\t\t<!-- <td colspan="1"></td> -->\n\t\t\t\t<td colspan="99" class="alert-data-cell loading-alerts">\n\t\t\t\t\t<div class="loading"><i class="icon-ibm-bee"></i></div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t{{/collection}}\n\t\t</tbody>\n\t</table>\n\n</div>\n',"table-security.html":"","table-tasks.html":'{{^collection.isEmpty}}\n<table class=\'tasks-table\'>\n\t<thead class="task-header">\n        <th class=\'group-header task-header-heading\' aria-label="Team member picture"></th>\n\t\t<th  aria-label="Team member name"></th>\n\t\t<th class=\'name-header task-name-header\' aria-label="Team member picture"></th>\n\t\t<th></th>\n\t</thead>\n\t<tbody class="task-body">\n\t\t\t{{#collection}}\n\t\t\t<tr class=\'task-row {{TASK_ID}}-tasks\' data-cnum=\'{{TASK_ID}}\' id="{{TASK_ID}}-tasks">\n\t\t\t\t<td class=\'person-link\'>\n\t\t\t\t\t<i class="icon task-icon {{icon}}" data-uid="{{TASK_ID}}-tasks"></i>\n\t\t\t\t\t<div class="{{TASK_ID}}-tasks-alert count-badge task-alert" data-component="badge" data-uid="{{TASK_ID}}-tasks"><i class="icon-awf-w3-sametime-do-not-disturb"></i></div>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'name task-name\'>\n\t\t\t\t\t<div class="app_name">{{APP_NAME}}</div>\n\t\t\t\t\t<div class="title">{{TITLE}}</div>\n\t\t\t\t</td>\n\t\t\t\t<td class="person-link task-person">\n\n\t\t\t\t</td>\n\t\t\t\t<td class=\'expand task-expand\'>\n\t\t\t\t\t<button class=\'{{TASK_ID}}-tasks-expand-btn task-expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{TASK_ID}}-tasks"></button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr class="{{TASK_ID}}-tasks-showhide task-showhide tasks-row" data-cnum=\'{{TASK_ID}}\'>\n\t\t\t\t<td colspan="90">\n\t\t\t\t\t<div class="{{TASK_ID}}-task-desc task-desc">\n\t\t\t\t\t\t<div class="{{TASK_ID}}-task-actions task-actions">\n\t\t\t\t\t\t\t<div class="{{TASK_ID}}-task-dropdown task-dropdown">More\n\t\t\t\t\t\t\t\t<ul class="dropdown">\n\t\t\t\t\t\t\t\t\t<li><a href="#" class="{{TASK_ID}}-markAs-btn markAs-btn">\n\t\t\t\t\t\t\t\t\t\t{{#read}}\n\t\t\t\t\t\t\t\t\t\t\tMark as Unread\n\t\t\t\t\t\t\t\t\t\t{{/read}}\n\t\t\t\t\t\t\t\t\t\t{{^read}}\n\t\t\t\t\t\t\t\t\t\t\tMark as Read\n\t\t\t\t\t\t\t\t\t\t{{/read}}\n\t\t\t\t\t\t\t\t\t</a></li>\n\t\t\t\t\t\t\t\t\t<!-- <li><a href="#">Send as Email</a></li>\n\t\t\t\t\t\t\t\t\t<li><a href="#">Send as Meeting</a></li>\n\t\t\t\t\t\t\t\t\t<li><a href="#">Get Wiki</a></li> -->\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t{{/collection}}\n\t</tbody>\n</table>\n{{/collection.isEmpty}}\n\n{{#collection.isEmpty}}\n<table class=\'tasks-table\'>\n\t<thead class="task-header">\n\t\t<th class=\'group-header\' aria-label="Team member picture"></th>\n\t</thead>\n\t<tbody>\n\t\t<tr class="task-row">\n\t\t\t<td class="no-tasks">\n\t\t\t\t<i class="icon-awf-checkmark"></i> You have no {{collection.section_name}} tasks at this time.\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n{{/collection.isEmpty}}\n',"table-time.html":"\n","table-travel.html":"","table-yourteam.html":'<div>\n\t<div class="teamToggleHolder" tabindex="0">\n\t\t<button href="#" class="team-toggle global-toggle current" data-team="global">Global</button>\n\t\t<button href="#" class="team-toggle incountry-toggle" data-team="incountry">In-Country</button>\n\t\t<button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</a>\n</div>\n<div class="manager-drilldown-holder" tabindex="0">\n\t<button class="manager-drilldown"><span>Managers</span></button>\n\t<div class="icon arrow-icon icon-awf-chevron-down"></div>\n\t<ul class="manager-drilldown-level-1"></ul>\n</div>\n<table class=\'talent-table\' data-tablename="yourteam">\n\t<thead>\n\t\t<!-- <th class=\'\'>&nbsp;</th> -->\n\t\t<th class=\'person-link-header\' aria-label="Team member picture"></th>\n\t\t<th class=\'name-header\' sort="fullname" aria-label="Team member name">Name</th>\n\t\t<th class=\'reports-header\' sort="isManager" aria-label="Team member view direct reports"><i class="icon-youribm-logo-managerhub-circle-fill"></i></th>\n\t\t<th class=\'position-header\' sort="position">Position</th>\n\t\t<th class=\'status-header\' sort="status">Status</th>\n\t\t<th class=\'employee-type\' sort="employeeType">Employee Type<br />(WPI) <a href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/GBS%20Managers%20only%20-%20Manager%20Talent%20Playbook%20definitions" target="_blank" class="definition icon-awf-info-circle-fill" data-definition="Work Place Indicator"></a></th>\n\t\t<th class=\'band\' sort="band">Band<br />(Time)</th>\n\t\t<th class=\'country\' sort="country">Country<br />(Dept)</th>\n\t</thead>\n\t<tbody>\n\t\t{{#collection}}\n\t\t\t<tr class=\'talent-row {{uid}}-yourteam {{uid}}{{#globalteam}} team-global on{{/globalteam}}{{#incountryteam}} team-incountry{{/incountryteam}}\' data-cnum=\'{{uid}}\' id="{{uid}}-yourteam">\n\t\t\t\t<!-- <td class="table-spacer">&nbsp;</td> -->\n\t\t\t\t<td class=\'person-link\' rowspan="2">\n\t\t\t\t\t<div class="count-badge {{uid}}-yourteam-count off" data-component="badge" data-uid="{{uid}}-yourteam">&nbsp;</div>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'name\'>\n\t\t\t\t\t{{{fullname}}}\n\t\t\t\t\t<p class="showhide cnum">SN: {{{uid}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class="reports">\n\t\t\t\t\t{{#isManager}}\n\t\t\t\t\t\t<i class="icon-youribm-logo-managerhub-circle-fill is-manager" title="View direct reports for this manager" aria-label="View direct reports for this manager" data-uid="{{uid}}" data-name="{{ fullname }}"></i>\n\t\t\t\t\t{{/isManager}}\n\t\t\t\t</td>\n\t\t\t\t<td class=\'position\'>\n\t\t\t\t\t<p>{{{position}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'status\'>\n\t\t\t\t\t<p>{{{status}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'employeeType\'>\n\t\t\t\t\t<p>{{{employeeType}}}</p>\n\t\t\t\t\t<p class="showhide wpi">{{{wpi}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'band\'>\n\t\t\t\t\t<p>{{{band}}}</p>\n\t\t\t\t\t<p class="showhide timeInBand">{{{timeInBand}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'country\'>\n\t\t\t\t\t<p>{{{country}}}</p>\n\t\t\t\t\t<p class="showhide">{{{dept}}}</p>\n\t\t\t\t</td>\n\t\t\t\t<td class=\'expand\'>\n\t\t\t\t\t<button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-yourteam"></button>\n\t\t\t\t</td>\n\t\t\t\t<!-- <td class="table-spacer">&nbsp;</td> -->\n\t\t\t</tr>\n\n\n\t\t<tr class="talent-row alert-section-row {{uid}}-yourteam" data-currCnum="{{uid}}" data-currTab="{{uid}}-yourteam">\n\t\t\t<!-- <td colspan="1"></td> -->\n\t\t\t<td colspan="99" class="alert-data-cell loading-alerts">\n\t\t\t\t<div class="loading"><i class="icon-ibm-bee"></i></div>\n\t\t\t</td>\n\t\t</tr>\n\t\t{{/collection}}\n\t\t</tbody>\n\t\t</table>\n\n\t</div>\n',"talentplaybook-large-new.html":'<div class="card" role="region" aria-label="Manager Team Topics large card">\n\n\t<div class="talentplaybook-large new">\n\n\t\t<div class="headerContainer">\n\t\t\t<div class="navigation-Tab"></div>\n\t\t\t<div class="dashboard-header">\n\t\t\t\t<table class="stickyTable talent-table"></table>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="mgrhub-dropdown">\n\n\t\t\t<div id="header"></div>\n\n\t\t\t<div id="dashboardTabsContent" class="tab-content scroll-card">\n\n\t\t\t\t<div role="tabpanel" class="tab-pane parent-tab fade" aria-label="tab panels" aria-selected="false">\n\t\t\t\t\t<div class="mgrhub-dropdown">\n\n\t\t\t\t\t\t<div class="tab-content sub-tab-content">\n\n\t\t\t\t\t\t\t<div class="tab-section" id="overview">\n\t\t\t\t\t\t\t\t<h1 class="tab-header" data-navigation-name="Overview" data-navigation="overview" role="header">Overview</h1>\n\t\t\t\t\t\t\t\t<hr class="header-line">\n\t\t\t\t\t\t\t\t<div class="overview-content"></div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class="tab-section tasks-section" id="tasks">\n\t\t\t\t\t\t\t\t<h1 data-navigation-name="Task" data-navigation="tasks" class="tab-header tasks-header" role="header">Tasks</h1>\n\t\t\t\t\t\t\t\t<div class=\'table-container\'>\n\t\t\t\t\t\t\t\t\t<div id="talentplaybook_tasks">\n\t\t\t\t\t\t\t\t\t\t<div class="tab-tasks tasks-content">\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class="tab-section intro-block" id=\'teamataglance\'>\n\t\t\t\t\t\t\t\t<h1 data-navigation-name="Team at a Glance" data-navigation="teamAtAGlance" class="tab-header" role="header">Team at a Glance</h1>\n\t\t\t\t\t\t\t\t<hr class="header-line">\n\t\t\t\t\t\t\t\t<button href="#" class="intro-toggle-btn icon-awf-op-plus" aria-expanded="false" aria-controls="intro-content">\n\t\t\t\t\t\t\t\t\t<span class=\'access\'>expand button</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<div class="ataglance-content intro-content" id="ataglance-content">\n\t\t\t\t\t\t\t\t\t<div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class="tab-section {{#hasAlerts}} hasAlerts{{/hasAlerts}}" id="dashboard">\n\t\t\t\t\t\t\t\t<h1 data-navigation-name="Dashboard" data-navigation="dashboard" class="tab-header" role="header">Dashboard</h1>\n\t\t\t\t\t\t\t\t<hr class="header-line">\n\t\t\t\t\t\t\t\t<div class=\'dashboard table-container\'>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class="tab-section sub-tab-content relatedLinks-block" id="talentplaybook_related_links">\n\t\t\t\t\t\t\t\t<h1 id="relatedLinksHeader" data-navigation-name="Related Links" data-navigation="relatedLinks" class="tab-header" role="header">Related Links</h1>\n\t\t\t\t\t\t\t\t<hr class="header-line">\n\t\t\t\t\t\t\t\t<div class="related-links-content">\n\t\t\t\t\t\t\t\t\t<div class="related_buttons"></div>\n\t\t\t\t\t\t\t\t\t<div class="related_links"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class="tab-section sub-tab-content intro-block intro-guide" id="help">\n\t\t\t\t\t\t\t\t<h1 id="helpHeader" data-navigation-name="Help" data-navigation="help" class="tab-header" role="header">Help</h1>\n\t\t\t\t\t\t\t\t<hr class="header-line">\n\t\t\t\t\t\t\t\t<button href="#" class="intro-toggle-btn icon-awf-op-plus" aria-expanded="false" aria-controls="intro-content">\n\t\t\t\t\t\t\t\t\t<span class=\'access\'>expand button</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<div class="intro-content help-content" id="help-content">\n\t\t\t\t\t\t\t\t\t<div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<br />\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',"talentplaybook-large.html":'<div class="card" role="region" aria-label="Manager Team Topics large card">\n    <div class="talentplaybook-large">\n        <div class="headerContainer">\n            <div class="navigation-Tab"></div>\n            <div class="dashboard-header"><table class="stickyTable talent-table"></table></div>\n        </div>\n        <div class="mgrhub-dropdown">\n            <ul id="dashboardTabs" class="nav nav-tabs tab-actions dropdown-tabs" role="tablist">\n                <div class="gridmenu closed"></div>\n                <li role="presentation" class="dropdown-outer">\n                    <button href="#" id="dropdown_1" class="dropdown-toggle" data-toggle="dropdown" aria-controls="dropdown_1-contents" tabindex="0" aria-expanded="false">\n                        {{#dashboards}}\n                        <span id="{{dashName}}-tab-title">{{dashTitle}} <div id="{{dashName}}-header-badge" class="count-badge header-badge off" data-component="badge">&nbsp;</div></span>\n                        <div id="{{dashName}}-tab-awf-header-badge" class="header-badge-container"></div>\n                        {{/dashboards}}\n                    </button>\n                    {{#dashboards}}\n                    <div id="{{dashName}}-tab-header" class="header-icon">\n                        <div id="{{dashName}}-tab-icon" class="icon {{categoryIcon}}"></div>\n                    </div>\n                    {{/dashboards}}\n                    <div class="menuicon icon arrow-icon icon-awf-chevron-down">\n                        <span class=\'totalAlertsCount\'><span>\n                    </div>\n                    <ul class="dropdown-holder" aria-labelledby="dropdown_1" id="dropdown_1-contents" role="tablist">\n                        {{#dashboards}}\n                        <li class="dropdown-badge-holder {{dashName}}-badge" data-title="{{dashName}}">\n                            <button href="#{{dashName}}" id="{{dashName}}" class="tab-dropdown" role="tab" data-toggle="tab-dropdown" aria-expanded="true" aria-controls="{{dashName}}" data-toggletarget="{{dashName}}" tabindex="0">\n                                <span class="icon section-icon {{categoryIcon}}"></span> {{dashTitle}} <span class="count-badge dropdown-badge off" data-component="badge"></span>\n                            </button>\n                        </li>\n                        {{/dashboards}}\n                    </ul>\n                    <div class="mini-alerts">\n                        {{#dashboards}}\n                        <button href="#" class="mini-alert off" id="{{dashName}}-mini-alert" tabindex="-1" title="{{dashTitle}}" data-toggletarget="{{dashName}}"><span class="icon section-icon {{categoryIcon}}"></span> <span class="mini-alert-count"></span></button>\n                        {{/dashboards}}\n                    </div>\n                </li>\n            </ul>\n\n            <div id="dashboardTabsContent" class="tab-content scroll-card">\n                {{#dashboards}}\n                <div role="tabpanel" class="tab-pane parent-tab fade" id="{{dashName}}-panel" aria-labelledby="{{dashName}}-tab" aria-selected="false">\n                    <div class="mgrhub-dropdown">\n\n                        <div id="{{dashName}}TabsContent" class="tab-content sub-tab-content">\n                            <div class="tab-section" id="overview">\n\n                                <h1 class="tab-header" data-navigation-name="Overview" data-navigation="Overview" role="header">Overview</h1>\n                                <hr class="header-line">\n\n                                <p class="overview-text overview-{{dashName}}">{{{overviewText}}} <span class="bold">{{{overviewTextHighlight}}}</span> <a href="{{helpURL}}" target="_blank" class="ibm-external-link">Visit our Help Center.</a></p>\n                                {{#additionalCopy}}\n                                    <p class="overview-text overview-{{dashName}}">{{{additionalCopy}}}</p>\n                                {{/additionalCopy}}\n                                <button class="confidential-link ibm-external-link" onclick=\'window.open("http://w3-03.ibm.com/ibm/privacy/practices_guidance.html","_blank")\'>IBM CONFIDENTIAL</button>\n                            </div>\n\n                \t\t\t<div class="tab-section dash-name tasks-section">\n                \t\t\t\t<div class=\'table-container\'>\n                \t\t\t\t  \t<div>\n                \t\t\t\t\t\t<div id="talentplaybook_tasks">\n\t\t\t\t\t\t\t\t\t\t\t<h1 data-navigation-name="Tasks" data-navigation="Tasks" class="tab-header tasks-header" role="header">Tasks</h1>\n                \t\t\t\t\t\t  \t<div class="{{dashName}}-tab-tasks tasks-content">\n                \t\t\t\t\t\t\t</div>\n                \t\t\t\t\t\t</div>\n                \t\t\t\t  \t</div>\n                \t\t\t\t</div>\n                \t\t  \t</div>\n\n\t\t\t\t\t\t\t{{#isperformance}}\n                            <div class="tab-section" id="ataglance">\n\t\t\t\t\t\t\t\t<div class="tab-content sub-tab-content intro-block ataglance-block">\n\t\t\t\t\t\t\t\t\t<button href="#" class="intro-toggle-btn ataglance-button" aria-expanded="false" aria-controls="intro-content">\n\t\t\t\t\t\t\t\t\t\t<h1 data-navigation-name="Team at a Glance" data-navigation="TeamataGlance" class="tab-header" role="header">Team at a Glance</h1>\n\t\t\t\t\t\t\t\t\t\t<hr class="header-line">\n\t\t\t\t\t\t\t\t\t\t<div class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-yourteam"></div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<div class="intro-content ataglance-content" id="ataglance-content">\n\t\t\t\t\t\t\t\t\t</div>\n\t                            </div>\n                            </div>\n                            {{/isperformance}}\n\n                            <div class="tab-section {{#hasAlerts}} hasAlerts{{/hasAlerts}} dash-name" id="{{dashName}}-dashboard">\n                                {{#hasDashboardTable}}\n                                    <div class="csv-holder">\n                                        <button href="#" class="csv-button off" data-dashboard="{{dashName}}">Download Spreadsheet &nbsp;<span class="icon icon-awf-download"></span></button>\n                                    </div>\n                                    <h1 data-navigation-name="Dashboard" data-navigation="Dashboard" class="tab-header" role="header">Dashboard</h1>\n                                    <hr class="header-line">\n                                {{/hasDashboardTable}}\n\n                                <div class=\'dashboard table-container\'>\n                                    {{#isyourteam}} {{>yourteam}} {{/isyourteam}}\n                                    {{#isperformance}} {{>performance}} {{/isperformance}}\n                                    {{#isexpertise}} {{>expertise}} {{/isexpertise}}\n                                    {{#iscompensation}} {{>compensation}} {{/iscompensation}}\n                                    {{#isleadership}} {{>leadership}} {{/isleadership}}\n                                    {{#isbcg}} {{>bcg}} {{/isbcg}}\n                                    {{#isdates}} {{>dates}} {{/isdates}}\n                                    {{#isemergency}}{{>emergency}} {{/isemergency}}\n                                    {{#issecurity}} {{>security}} {{/issecurity}}\n                                    {{#isbenefits}} {{>benefits}} {{/isbenefits}}\n                                    {{#isjobs}} {{>jobs}} {{/isjobs}}\n                                    {{#istravel}} {{>travel}} {{/istravel}}\n                                    {{#isassets}} {{>assets}} {{/isassets}}\n                                    {{#isawards}} {{>awards}} {{/isawards}}\n                                    {{#isexpenses}} {{>expenses}} {{/isexpenses}}\n                                    {{#istime}} {{>time}} {{/istime}}\n                                    {{#isglobal}} {{>global}} {{/isglobal}}\n                                    {{#isdiversity}} {{>diversity}} {{/isdiversity}}\n                                </div>\n                            </div>\n\n\t\t\t\t\t\t\t<div class="tab-content sub-tab-content relatedLinks-block" id="talentplaybook_related_links">\n\t\t\t\t\t\t\t\t<h1 id="relatedLinksHeader" data-navigation-name="Related Links" data-navigation="RelatedLinks" class="tab-header" role="header">Related Links</h1>\n\t\t\t\t\t\t\t\t <hr class="header-line">\n\t\t\t\t\t\t\t\t<div class="related-links-content">\n\t\t\t\t\t\t\t\t\t<div class="related_buttons"></div>\n\t\t\t\t\t\t\t\t\t<div class="related_links"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n                            <div class="tab-content sub-tab-content intro-block intro-guide">\n                                <button href="#" class="intro-toggle-btn" aria-expanded="false" aria-controls="intro-content">\n                                    <h1 id="helpHeader" data-navigation-name="Help" data-navigation="Help" class="tab-header" role="header">Help</h1>\n                                     <hr class="header-line">\n                                    <div class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{uid}}-yourteam"></div>\n                                </button>\n\n\n                                <div class="intro-content" id="intro-content">\n                                    <h2 class="section-header">Welcome to Manager Hub with Talent Playbook alerts</h2>\n                                    <p style="margin-bottom: 10px;">Apprenticing and providing feedback to your people every day is vital to a strong team and healthy business.\n                                        It takes specific knowledge and insight, but don\'t worry, the dashboards below can help! Click below\n                                        and you\'ll see specific observations and recommendations about your employees, aimed at helping your\n                                        people get the skills and career development opportunities they need. For more information, <a href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/GBS%20Managers%20only%20-%20Manager%20Talent%20Playbook%20Help" target="_blank" class="ibm-external-link">visit our Help Center</a>\n                                    </p>\n                                    <p><span style="font-weight: 600;">Note:</span> Due to Data Privacy restrictions some data elements might\n                                        be unavailable for specific employees.<br />Please see details: <a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager%20Hub%20-%20Blocked%20Data" target="_blank">Manager Hub - Blocked Data</a>\n                                    </p>\n                                    <h2 class="section-header">Proactive Retention</h2>\n                                    <p style="margin-bottom: 10px;">Slow career progression is one of several risk factors that put valuable IBMers at risk of leaving IBM.\n                                        Using the table below, you can now leverage predictive analytics to retain high value IBMers who are\n                                        at risk. Each employee\'s Propensity to Leave (PTL) is the predicted risk that he or she will leave IBM\n                                        within the next 12 months. The Observations column predicts why each IBMer may be at risk, and the Actions\n                                        for Managers recommends what you can do to retain that IBMer.\n                                    </p>\n                                    <p><span style="font-weight: 600;">Disclaimer:</span> the Propensity to Leave (PTL) Risk is calculated twice\n                                        a year (Spring and Fall). The information here is as of April 2016.\n                                    </p>\n\n                                    <h2 class="section-header">Drive Band Promotion</h2>\n                                    <p>Band velocity â how quickly an IBMer moves through bands â is an important signal to individuals about\n                                        their career opportunities with IBM. Our talent model is based on the foundation that people progress\n                                        every 2 â 4 years, assuming there are open roles at the next band. As a manager, it is your responsibility\n                                        to ensure your people expand their capabilities and become promotion eligible, positioning them for opportunities\n                                        at the next band level. And the first step is knowing how to progress a career in GBS. Orient your employees\n                                        to use the <a href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W902e03401bb8_45f4_a050_d23ab8ed019a/page/GBS-Peaks-Career-Model" target="_blank" class="ibm-external-link">Global GBS Career Wiki</a> as the first \'career stop\' for client\n                                        facing practitioners.\n                                    </p>\n\n                                    <h2 class="section-header">Broaden Capabilities</h2>\n                                    <p>The most effective IBMers are those who combine deep expertise with broad capabilities â they have a âT-shapedâ\n                                        talent profile. Helping IBMers to become T-shaped will get them ready for promotion while helping our\n                                        clients succeed. All IBMers are encouraged to complete 40 hours of professional development each year.\n                                        Your employees will need your guidance and support to identify and complete the most appropriate learning.\n                                        The tracking of Think40 is done on an annual basis.\n                                    </p>\n\n                                    <h2 class="section-header">Assess Performance and Potential</h2>\n                                    <p style="margin-bottom: 10px;">Active performance management by managers is critical to ensuring we have culture of high performance,\n                                        a high performing culture and we are effectively managing low performers. Managers should identify and\n                                        actively manage GBS Top Talent, specifically ensuring these IBMers understand our interest in having\n                                        them advance their careers, take stretch assignments, and receive appropriate learning. In addition to\n                                        inspiring your top performers and coaching average performers, low performers should be actively managed\n                                        through our Performance Management process. Contact your HR Partner with any process questions.</p>\n\n                                    <p style="margin-bottom: 32px;">All practitioners are expected to have at least one project assessment (PA) on file in a 12 month period.\n                                        This feedback helps you provide fact-based development and performance feedback. For any questions related\n                                        to the Performance Management process, reach out to your HR Partner.\n                                    </p>\n                                </div>\n                            </div>\n                            <br /><br /><br />\n\n                        </div>\n                    </div>\n                </div>\n                {{/dashboards}}\n            </div>\n        </div>\n    </div>\n</div>\n',
"talentplaybook-medium.html":'<div class="talentplaybook-medium">\n  <div class="icon-list">\n    {{#dashboards}}\n      <a class="btn-open-dashboard {{dashName}}" data-hover="View your talent reports" data-dashboard={{dashName}}>\n        <!-- TODO remove old alert div and keep new(alert-badge-count) when new is used permanently -->\n        <div class="count-badge" style="display:none;" data-component="badge"></div><div class="alert-badge-count"></div>\n        <div class="icon {{categoryIcon}}"></div>\n        <span>{{dashTitle}}</span>\n      </a>\n    {{/dashboards}}\n  </div>\n  <div class="mobile-alert">\n    <div class="mgrhub-icon"></div>\n    Manager Hub app is available for access on mobile devices.\n    <p class="cta-button">\n      <button type="button" class="solid-btn mgrhub-btn" onclick=\'window.open("https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager%20Hub%20Mobile%20FAQ","_blank")\'>Download the Manager Hub app <i class="icon-awf-chevron-right"></i></button>\n    </p>\n  </div>\n</div>\n\n<!-- https://cv01a092.w3-969.ibm.com/mobile/apps.html#detailid=com.ibm.cio.be.managerhubiOS3.2 -->',"team-at-a-glance-icon.html":"<a class='profile-picture person-link' href='http://w3.ibm.com/bluepages/profile.html?uid={{id}}' target='_blank' data-initials='{{initials}}' data-cnum='{{id}}'>\n    {{#avatar}}\n        <img class='avatar' src='{{{avatar}}}' alt='Link to your Bluepages profile' />\n    {{/avatar}}\n    {{^avatar}}\n        <span class='avatar initials'>{{initials}}</span>\n    {{/avatar}}\n</a>\n\n\n\n\n","team-at-a-glance.html":'<div class="ataglance" id="ataglance-table">\n\t<div class="top-gutter">\n\t\t<div class="title">YEARS IN BAND</div>\n\t</div>\n\t<div class="left-gutter">\n\t\t<div class="title">PERFORMANCE</div>\n\t</div>\n\t<div class="headers">\n\t\t<div class="number">0</div>\n\t\t<div class="number">1</div>\n\t\t<div class="number">2</div>\n\t\t<div class="number">3</div>\n\t\t<div class="number">4+</div>\n\t</div>\n\t<div class="arrow">\n\t\t<img src="images/talentplaybook/lineArrow.svg" alt="">\n\t</div>\n\t<div class="ataglance-table mtt">\n\t\t{{#yAxisCategories}}\n\t\t<div class="ataglance-row">\n\t\t\t<div class="ataglance-cell">{{.}}</div>\n\t\t\t<div class="ataglance-cell"></div>\n\t\t\t<div class="ataglance-cell"></div>\n\t\t\t<div class="ataglance-cell"></div>\n\t\t\t<div class="ataglance-cell"></div>\n\t\t\t<div class="ataglance-cell"></div>\n\t\t</div>\n\t\t{{/yAxisCategories}}\n\t</div>\n</div>',"tpb-alerts-new.html":'<div class="alert-holder {{noticeType}}" data-noticeId="{{noticeId}}" data-categoryId="{{categoryId}}">\n\t<div class="categoryLabel">{{{categoryLabel}}}</div>\n\t<div class="observation">\n\t\t<span class="title">Cognitive Observation</span>\n\t\t{{{observation}}}\n\t</div>\n\t<div class="recommendation">\n\t\t<span class="title">Manager Action</span>\n\t\t{{{recommendation}}}\n\t</div>\n\t\n\t<div class="supplemental">\n\t\t<span class="title">Supplemental Information</span>\n\t\t{{#suppUsedContent}}\n  \t\t\t{{{.}}}<br />\n\t\t{{/suppUsedContent}}\n\t</div>\n\t\n\t<div class="read-unread-buttons">\n\t\t<span class="read-unread-loading">Saving...</span>\n\t\t<button type="button" class="flip-2 mark-as-read">Mark as read</button>\n\t\t<button type="button" class="flip-2 mark-as-unread">Mark as unread</button>\n\t</div>\n</div>',"tpb-alerts.html":'{{#alertList}}\n\t<div class="alert-holder {{noticeType}}" data-noticeId="{{noticeId}}" data-categoryId="{{categoryId}}">\n\t\t<div class="categoryLabel">{{{categoryLabel}}}</div>\n\t\t<div class="observation">\n\t\t\t<span class="title">Cognitive Observation</span>\n\t\t\t{{{observation}}}\n\t\t</div>\n\t\t<div class="recommendation">\n\t\t\t<span class="title">Manager Action</span>\n\t\t\t{{{recommendation}}}\n\t\t</div>\n\t\t\n\t\t<div class="title supplemental" style="display: none;">Supplemental Information<span class=""></span></div>\n\t\t{{#supplementalData}}\n\t\t\t{{#.}}\n\t\t\t\t{{{fieldName}}}: {{{fieldValue}}}<br />\n\t\t\t{{/.}}\n\t\t{{/supplementalData}}\n\t\t\n\t\t<div class="read-unread-buttons">\n\t\t\t<span class="read-unread-loading">Saving...</span>\n\t\t\t<button type="button" class="flip-2 mark-as-read">Mark as read</button>\n\t\t\t<button type="button" class="flip-2 mark-as-unread">Mark as unread</button>\n\t\t</div>\n\n\t</div>\n{{/alertList}}',"tpb-expenses-list.html":'<div class="expenses-list-row">\n\t{{#collection.hasReports}}\n\t<span class="expenses-list-title">Expense Summary</span>\n\t<ul>\n\t\t{{#collection}}\n\t\t<li>Outstanding Advances <span>{{outstandingAdvances}} {{outstandingAdvancesCur}}</span></li>\n\t\t<li>Outstanding Card Charges <span>{{outstandingCardCharges}} {{outstandingCardChargesCur}}</span></li>\n\t\t{{/collection}}\n\t</ul>\n\n\t<table class="expenses-table">\n\t\t<thead>\n\t\t\t<th class="expenses-heading"></th>\n\t\t\t<th class="expenses-heading">Description</th>\n\t\t\t<th class="expenses-heading">Amount Paid</th>\n\t\t\t<th class="expenses-heading"></th>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t{{#collection}}\n\t\t\t\t{{#wwer}}\n\t\t\t\t{{#hasDate}}\n\t\t\t\t<tr class="wwer-row" data-id="{{id}}">\n\t\t\t\t\t<td>{{#hasAlerts}}<div class="count-badge expenses-count-badge alert" data-component="badge" data-id="{{id}}">{{alerts}}</div>{{/hasAlerts}}</td>\n\t\t\t\t\t<td class="expenses-desc">{{description}}</td>\n\t\t\t\t\t<td class="expenses-amount">{{amount}} {{currency}}</td>\n\t\t\t\t\t<td><i class="detail-link wwer-takeover icon-awf-arrow-right-thin"></i></td>\n\t\t\t\t</tr>\n\t\t\t\t{{/hasDate}}\n\t\t\t\t{{/wwer}}\n\t\t\t\t{{#cb}}\n\t\t\t\t{{#hasDate}}\n\t\t\t\t<tr class="cb-row" data-id="{{id}}">\n\t\t\t\t\t<td>{{#hasAlerts}}<div class="count-badge expenses-count-badge alert" data-component="badge" data-id="{{id}}">{{alerts}}</div>{{/hasAlerts}}</td>\n\t\t\t\t\t<td class="expenses-desc" data-id="{{id}}">{{description}}</td>\n\t\t\t\t\t<td class="expenses-amount" data-id="{{id}}">{{amount}} {{currency}}</td>\n\t\t\t\t\t<td><i class="detail-link cb-takeover icon-awf-arrow-right-thin" data-id="{{id}}"></i></td>\n\t\t\t\t</tr>\n\t\t\t\t{{/hasDate}}\n\t\t\t\t{{/cb}}\n\t\t\t\t{{#ldv}}\n\t\t\t\t{{#hasDate}}\n\t\t\t\t<tr class="ldv-row" data-id="{{id}}">\n\t\t\t\t\t<td data-id="{{id}}">{{#hasAlerts}}<div class="count-badge expenses-count-badge alert" data-component="badge" data-id="{{id}}">{{alerts}}</div>{{/hasAlerts}}</td>\n\t\t\t\t\t<td class="expenses-desc" data-id="{{id}}">{{description}}</td>\n\t\t\t\t\t<td class="expenses-amount" data-id="{{id}}">{{amount}} {{currency}}</td>\n\t\t\t\t\t<td><i class="detail-link ldv-takeover icon-awf-arrow-right-thin" data-id="{{id}}"></i></td>\n\t\t\t\t</tr>\n\t\t\t\t{{/hasDate}}\n\t\t\t\t{{/ldv}}\n\t\t\t{{/collection}}\n\t\t</tbody>\n\t</table>\n\n\t{{/collection.hasReports}}\n\t{{^collection.hasReports}}\n\t<span class="no-tasks">No Expense Reports for this month.</span> \n\t{{/collection.hasReports}}\n\n</div>\n',"tpb-focusbar.html":'{{#dashboards}}\n<button id="{{dashName}}" href="#{{dashName}}" class="gridelement {{dashName}}" data-gridelementtarget="{{dashName}}">\n\t{{#topicAlerts}}\n\t\t<div id="{{dashName}}-header-badge" class="menu-badge count-badge focus-badge " data-component="badge">{{topicAlerts}}</div>\n\t{{/topicAlerts}}\n\t<div class="icon {{categoryIcon}}"></div>\n\t<span id="dashtitle">{{dashTitle}}</span>\n</button>\n{{/dashboards}}\n',"tpb-manager-drilldown.html":'<!--parent level (current user) -->\n<li class="manager-list-item">\n\t<button tabindex="0" data-uid="{{userid}}">{{username}}</button>\n\t<ul class="manager-drilldown-level-2">\n\t\t{{#collection}}\n\t\t<li class="manager-list-item">\n\t\t\t<button tabindex="0" data-uid="{{uid}}">{{name.first}} {{name.last}}</button>\n\t\t\t<ul class="manager-drilldown-level-3">\n\t\t\t\t{{#reports}} \n\t\t\t\t<li class="manager-list-item">\n\t\t\t\t\t<button tabindex="0" data-uid="{{uid}}">{{name.first}} {{name.last}}</button>\n\t\t\t\t</li>\n\t\t\t\t{{/reports}}\n\t\t\t</ul> \n\t\t</li>\n\t\t{{/collection}}\n\t</ul>\n</li>'},"task-calendar-responsive":{"task-calendar-large.html":'<div class="content card" id="task-calendar-content">\n\t<div class="loading"><i class="icon-ibm-bee"></i></div>\n\t<div class="view-container" role="grid" aria-label="Expanded Task Calendar"></div>\n</div>\n',"task-calendar-mini.html":'<div>\n    <div class="icon {{iconFont}}"></div>\n    <div class="title">{{title}}</div>\n</div>',"task-calendar-popup.html":'<div id=\'task-calendar-popup\'>\n    <h2 class="days-remaining">{{ headerDate }}</h2>\n    <h2 class="task-popup-program">{{program}}</h2>\n    <h1 class="task-popup-title">{{name}}</h1>\n    <div class="task-popup-footer">\n        <div class="task-hover-circle {{final}} {{status}}"></div>\n        <span class="task-status">{{ taskStatus }}</span> <span class="days-remaining">{{daysRemaining}}</span>\n    </div>\n</div>',"task-category-large.html":'<div class="scroll-control sync-scroll responsive">\n\t<div class="phantom">&nbsp;</div>\n</div>\n\n<!-- Sticky category icons -->\n<div class="sticky-category-icons-wrapper sync-scroll responsive large-view-only">\n\t<div class="sticky-category-icons-column">\n\t\t<ul>\n\t\t\t{{#groupedItems}}\n\t\t\t<div id="{{categoryName}}" class="sticky-category-row category ibm-popup-link {{category}}" title="{{categoryName}}" aria-label="Category: {{categoryName}}">\n\t\t\t\t<li><i class="{{iconName}}"></i></li>\n\t\t\t</div>\n\t\t\t{{/groupedItems}}\n\t\t</ul>\n\t</div>\n</div>\n<!--  -->\n<div class="mask-scrollbar large-view-only"></div>\n<div class="tasks-container-large sync-scroll">\n\t<div class="tasks-container-large-in">\n\t\t{{#groupedItems}}\n\t\t<dl tabindex="0" class="calendar-container">\n\t\t\t<dt class="content-category-name">\n\t\t\t</dt>\n\t\t\t<dd id="{{categoryName}}" tabindex="0" class=\'content-tasks\' data-max-rows=\'{{maxRows}}\'>\n\t\t\t\t{{#tasks}}{{>task}}{{/tasks}}\n\t\t\t</dd>\n\t\t</dl>\n\t\t{{/groupedItems}}\n\t</div>\n\n</div>',"task-category.html":'<div class="tasks-container" id="medium-task-category">\r\n\t{{#groupedItems}}\r\n\t<dl tabindex="0" class="calendar-container">\r\n\t\t<dt class="content-category-name">\r\n\t\t\t<div tabindex="0" class="category ibm-popup-link {{category}}" title="{{categoryName}}" aria-label="Category: {{categoryName}}">\r\n\t\t\t\t<i class="{{iconName}}"></i>\r\n\t\t\t</div>\r\n\t\t</dt>\r\n\t\t<dd tabindex="0" class=\'content-tasks\' data-max-rows=\'{{maxRows}}\'>\r\n\t\t\t{{#tasks}}{{>task}}{{/tasks}}\r\n\t\t</dd>\r\n\t</dl>\r\n\t{{/groupedItems}}\r\n</div>',"task-detail.html":'<div class="task-detail-container" role="contentinfo">\t\n\t<span class="task-detail-pointer"></span>\n\t<div class="task-detail">\n\t\t<div class="section section-header">\n\t\t\t<span class="task-detail-btn-hide" role="button" aria-label="hide"><i class="icon-awf-chevron-right"></i></span>\n\t\t\t<span class="title">Task Details</span>\n\t\t</div>\n\t\t<div class="section section-description">\n\t\t\t<div class="task-name">{{program}}</div>\n\t\t\t<div class="subtask">{{name}}</div>\n\t\t</div>\n\t\t<div class="section section-dates">\n\t\t\t<div class="start-date"><span class="label">Start</span><span>{{startDate}}</span></div>\n\t\t\t<div class="end-date"><span class="label">Due</span><span>{{endDate}}</span></div>\n\t\t\t<div class="status">\n\t\t\t\t<span class="label">Status</span>\n\t\t\t\t<span class="desc">{{taskStatus}}</span>\n\t\t\t\t{{#daysRemaining}}<br/><span class="remaining">{{daysRemaining}}</span>{{/daysRemaining}}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section-additional">\n\t\t\t<div class="notes"></div>\n\t\t\t<ul class="buttons">\t\t\t\n\t\t\t\t{{#url}}<li><a class="button solid-btn btn-approve primary-form-btn" href="{{url}}" target="_blank" role="button">Learn More...</a></li>{{/url}}\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>',"task.html":'<span role="button" tabindex="0" class="task {{FINAL}} {{STATUS}} {{visibility}}" style="left: {{spacerWidth}}; width: {{streamWidth}};" role="gridcell" tabindex="0">\n\t<label class="subtask-name" \n\t\tdata-category="{{CATEGORY}}" \n\t\tdata-task="{{TASK_ID}}"\n\t\tdata-subtask="{{SUBTASK_ID}}"\n\t\tdata-button-one=""\n\t\tdata-button-two="">\n\t\t{{SUBTASK_NAME}}\n\t</label>\n</span>'},"team-members":{"large.html":'<div class="team-members-large">\n\t<ul id="dashboardTabs" class="nav nav-tabs tab-actions dropdown-tabs" role="tablist">\n\t\t<li role="presentation" class="dropdown-outer">\n\t\t\t<button href="#" id="dropdown_1" class="dropdown-toggle" data-toggle="dropdown" aria-controls="dropdown_1-contents" tabindex="0" aria-expanded="false">\n\t\t\t<!-- TODO: enable members dropdown-->\n\t\t\t<span id="{{uid}}-tab-title" class="on">\n\t\t\t\t<span class=\'avatar initials\'>MD</span>\n\t\t\t\t Delaney, Mary\n\t\t\t</span>\n\t\t\t<!--\n\t\t\t\t{{#collection}}\n\t\t\t\t<span id="{{uid}}-tab-title">\n                  {{#avatar}}\n                      <img class=\'avatar\' src=\'{{avatar}}\' alt=\'Link to your Bluepages profile\' />\n                  {{/avatar}}\n                  {{^avatar}}\n                      <span class=\'avatar initials\'>{{initials}}</span> {{/avatar}} {{{fullname.full}}}\n\t\t\t\t<div id="{{uid}}-header-badge" class="count-badge header-badge off" data-component="badge">&nbsp;</div>\n\t\t\t\t</span>\n\t\t\t\t{{/collection}}\n\t\t\t-->\n\t\t\t</button>\n\n\t\t\t<button class="arrow-icon icon-awf-chevron-down"></button>\n\t\t\t<!-- TODO: enable members dropdown-->\n\t\t\t<!--\n\t\t\t<ul class="dropdown-holder" aria-labelledby="dropdown_1" id="dropdown_1-contents" role="tablist">\n\t\t\t\t{{#collection}}\n\t\t\t\t<li class="dropdown-badge-holder {{uid}}-badge" data-title="{{uid}}">\n\t\t\t\t\t<button href="#{{uid}}" id="{{uid}}-tab" class="tab-dropdown" role="tab" data-toggle="tab-dropdown" aria-expanded="true" aria-controls="{{uid}}" data-toggletarget="{{uid}}" tabindex="0">\n\t\t\t\t\t\t<span class="icon section-icon {{categoryIcon}}"></span> {{{fullname.full}}} <span class="count-badge dropdown-badge" data-component="badge"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</li>\n\t\t\t\t{{/collection}}\n\t\t\t</ul>\n\t\t\t-->\n\t\t</li>\n\t</ul>\n\n\t<div class="navigation-Tab">\n\t\t<!--dynamic tabs menu goes here-->\n\t\t<div data-navid="overview" class="navtabs">Overview</div>\n\t\t<div data-navid="profile" class="navtabs">Private Profile</div>\n\t\t<div data-navid="help" class="navtabs">Help</div>\n\t</div>\n\n\t<div id="dashboardTabsContent" class="tab-content scroll-card">\n\t\t<!--{{#collection}}-->\n\t\t<div role="tabpanel" class="tab-pane parent-tab fade {{uid}}-panel" id="{{uid}}-panel" aria-labelledby="{{uid}}-tab" aria-selected="false">\n\t\t\t<div class="mgrhub-dropdown">\n\n\t\t\t\t<div id="{{uid}}TabsContent" class="tab-content sub-tab-content">\n\n\t\t\t\t\t<div class="tab-section" id="overview">\n\t\t\t\t\t\t<h3 data-navigation-name="Overview" data-navigation="Overview" class="tab-header">Overview</h3>\n\t\t\t\t\t\t<div class="overview-content"></div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="tab-section" id="profile">\n\t\t\t\t\t\t<h3 data-navigation-name="Private Profile" data-navigation="Private Profile" class="tab-header">Private Profile</h3>\n\t\t\t\t\t\t<div class="profile-content"></div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="tab-section" id="help">\n\t\t\t\t\t\t<h3 data-navigation-name="Help" data-navigation="Help" class="tab-header">Help</h3>\n\t\t\t\t\t\t<div class="help-content"></div>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<!--{{/collection}}-->\n\t</div>\n</div>',"medium.html":'<div class="team-members-medium">\n\t<div class="filter-button">\n\t\t<button href="#" class="team-toggle global-toggle" data-team="global">Global</button>\n\t\t<button href="#" class="team-toggle incountry-toggle" data-team="incountry">In-Country</button>\n\t\t<button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n\t</div>\n\t<span class=\'title\' role="heading">Reports ({{collection.length}})</span>\n\t<hr />\n\t<!-- TODO: Enable icon list\n\t<div class="icon-list">\n\t\t{{#collection}}\n\t\t<button class=\'person-link\' data-uid={{uid}}>\n\t\t\t{{#avatar}}\n\t\t\t<img class=\'avatar\' src={{avatar}} alt={{fullname.fullName}} /> {{/avatar}} {{^avatar}}\n\t\t\t<span class=\'avatar initials\'>{{initials}}</span> {{/avatar}}\n\t\t\t<span class=\'name\'>{{{fullname.first}}}</span>\n\t\t</button>\n\t\t{{/collection}}\n\t</div>\n\t<div class="mobile-alert">\n\t\t<div class="mgrhub-icon"></div>\n\t\tManager Hub app is available for access on mobile devices.\n\t\t<p class="cta-button">\n\t\t\t<button type="button" class="solid-btn mgrhub-btn" onclick=\'window.open("https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager%20Hub%20Mobile%20FAQ","_blank")\'>Download the Manager Hub app <i class="icon-awf-chevron-right"></i></button>\n\t\t</p>\n\t</div>\n\t-->\n</div>',"overview.html":'<p class="overview-text overview-yourteam">Manage your people better with this private profile summary of key employee data for one of your team members. All data is provided to you from the trusted source, only as permitted by the privacy laws and practices in the employee\'s country.</p>\n<p>\n\t<a class="ibm-external-link confidential-link" href="http://w3-03.ibm.com/ibm/privacy/practices_guidance.html" target="_blank">IBM Confidential</a>\n</p>'},"team-profiles":{"person-profile-single.html":'<table class=\'talent-table\'>\n    <tbody>\n        <tr class=\'talent-row {{RCNUM}}-yourteam {{RCNUM}} section-yourteam\' data-cnum=\'{{RCNUM}}\' id="{{RCNUM}}-yourteam">\n            <td class="table-spacer">&nbsp;</td>\n            <td class=\'name\'>\n                <div class="icon icon-awf-avatar-circle-bold"></div> Personal Information <div class="count-badge animate-flicker" data-component="badge">&nbsp;</div>\n            </td>\n            <td class=\'expand\'>\n                <button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{RCNUM}}-yourteam"></button>\n            </td>\n            <td class="table-spacer">&nbsp;</td>\n        </tr>\n        \n        <tr class="talent-row alert-section-row {{RCNUM}}-yourteam" data-currCnum="{{RCNUM}}" data-currTab="{{RCNUM}}-yourteam">\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n            <td colspan="99" class="talent-row-cell personal-info-data">\n                <div class="data-cell loading-holder">\n                    <div class="section talent-name">\n                        <span class="name">{{{name.first}}} {{name.last}}</span>\n                        <span class="role">{{{role}}}</span>\n                        <span class="title">{{{org.title}}}</span>\n                    </div>\n                    <div class="section employee-info">\n                        {{#employeeType}}\n                            {{#employeeType.code}}\n                                <span class="label">Type:</span> {{{employeeType.code}}}<br />\n                            {{/employeeType.code}}\n                            {{^employeeType.code}}\n                                <span class="label">Type:</span> {{{employeeType}}}<br />\n                            {{/employeeType.code}}\n                        {{/employeeType}}\n                        {{{#cnum}}}\n                            <span class="label">Serial:</span> {{{cnum}}}<br />\n                        {{{/cnum}}}\n                        {{{#band}}}\n                            <span class="label">Band:</span> {{{band}}}<br />\n                        {{{/band}}}\n                        {{{#timeInBand}}}\n                            <span class="label">Time in Band:</span> {{{timeInBand}}}<br />\n                        {{{/timeInBand}}}\n                        {{{#country}}}\n                            <span class="label">Country:</span> {{{country}}}<br />\n                        {{{/country}}}\n                    </div>\n                    <div class="section left address">\n                        <div class="bus-address">\n                            <span class="section-header">Business Address</span>\n                            {{#address.business.address}}\n                                <span>{{.}}</span>\n                            {{/address.business.address}}\n                            <span>{{{mailDrop}}}</span>\n                            <span>{{{address.business.location}}}</span>\n                            <span>Work location Code: {{{workLocation.code}}}</span>\n                            Building:{{{workLocation.building}}} Floor:{{{workLocation.floor}}} Office:{{{workLocation.office}}}\n                        </div>\n                        <div class="home-address">\n                            <span class="section-header">Home Address</span>\n                            <span>{{{TADDRLN1}}}</span>\n                            {{{#TADDRLN2}}}<span>{{{TADDRLN2}}}</span>{{{/TADDRLN2}}}\n                            <span>{{{TADDRLN3}}}, {{{TADDRLN4}}} {{{TADDRLN6}}}</span>    \n                        </div>\n                    </div>\n                    <div class="section right contact-info">\n                        {{#telephone.office}}\n                            <span>Office:</span> {{{telephone.office}}}<br />\n                        {{/telephone.office}}\n                        {{#telephone.mobile}}\n                            <span>Mobile:</span> {{{telephone.mobile}}}<br />\n                        {{/telephone.mobile}}\n                        {{#telephone.home}}\n                            <span>Home:</span> {{{telephone.home}}}<br />\n                        {{/telephone.home}}\n                        {{#RMAIL}}\n                            <span>Email:</span> {{{RMAIL}}}<br />\n                        {{/RMAIL}}\n                    </div>\n                    <hr>\n                    <div class="section dept">\n                        <span class="heading">Department / Organization</span>\n                        <div class="top">\n                            {{#dept.title}}\n                                <span class="bold">Department Name:</span> {{{dept.title}}}<br />\n                            {{/dept.title}}\n                            {{#org.title}}\n                                <span class="bold">Business Unit:</span> {{{org.title}}}<br />\n                            {{/org.title}}\n                        </div>\n                        <div class="split-bottom">\n                            {{#dept}}\n                                {{#dept.code}}\n                                    <span class="bold">Department Code:</span> {{{dept.code}}}<br />\n                                {{/dept.code}}\n                                {{^dept.code}}\n                                    <span class="bold">Department Code:</span> {{{dept}}}<br />\n                                {{/dept.code}}\n                            {{/dept}}\n\n                            {{#hrOrganizationCode}}\n                                <span class="bold">Organization Name:</span> {{{hrOrganizationCode}}}<br />\n                            {{/hrOrganizationCode}}\n                            {{#div}}\n                                <span class="bold">Division Name:</span> {{{div}}}<br />\n                            {{/div}}\n                            {{#costCenter}}\n                                <span class="bold">Cost Center:</span> {{{costCenter}}}<br />\n                            {{/costCenter}}\n                            {{#psc}}\n                                <span class="bold">PSC:</span> {{{psc}}}<br />\n                            {{/psc}}\n                            {{#managerPSC}}\n                                <span class="bold">Manager PSC:</span> {{{managerPSC}}}<br />\n                            {{/managerPSC}}\n                            {{#territory}}\n                                <span class="bold">Territory:</span> {{{territory}}}<br />\n                            {{/territory}}\n                        </div>\n                    </div>\n                </div>\n                <div  class="alert-data-cell  loading-alerts">\n                    <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>\n                </div>\n            </td>\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n        </tr>\n\n        \n        <tr class=\'talent-row {{RCNUM}}-awards {{RCNUM}} section-awards\' data-cnum=\'{{RCNUM}}\' id="{{RCNUM}}-awards">\n            <td class="table-spacer">&nbsp;</td>\n            <td class=\'name\'>\n                <div class="icon icon-youribm-award-ribbons"></div> Awards &amp; Recognition <!-- <div class="count-badge animate-flicker" data-component="badge">&nbsp;</div> -->\n            </td>\n            <td class=\'expand\'>\n                <button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{RCNUM}}-awards"></button>\n            </td>\n            <td class="table-spacer">&nbsp;</td>\n        </tr>\n\n        \n        <tr class="talent-row alert-section-row {{RCNUM}}-awards" data-currCnum="{{RCNUM}}" data-currTab="{{RCNUM}}-awards">\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n            <td colspan="99" class="talent-row-cell awards-data">\n                <div class="data-cell loading-holder">\n                    <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>\n                </div>\n                <div  class="alert-data-cell  loading-alerts">\n                    <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>\n                </div>\n            </td>\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n        </tr>\n\n        \n        <tr class=\'talent-row {{RCNUM}}-bcg {{RCNUM}} section-bcg\' data-cnum=\'{{RCNUM}}\' id="{{RCNUM}}-bcg">\n            <td class="table-spacer">&nbsp;</td>\n            <td class=\'name\'>\n                <div class="icon icon-awf-w3-certificate"></div> BCG + Values <!-- <div class="count-badge animate-flicker" data-component="badge">&nbsp;</div> -->\n            </td>\n            <td class=\'expand\'>\n                <button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{RCNUM}}-bcg"></button>\n            </td>\n            <td class="table-spacer">&nbsp;</td>\n        </tr>\n\n\n        <tr class="talent-row alert-section-row {{RCNUM}}-bcg" data-currCnum="{{RCNUM}}" data-currTab="{{RCNUM}}-bcg">\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n            <td colspan="99" class="talent-row-cell bcg-data" colspan="2">\n                <div class="data-cell loading-holder">\n                    <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>\n                </div>\n                <div  class="alert-data-cell  loading-alerts">\n                    <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>\n                </div>\n            </td>\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n        </tr>\n\n        \n        \n        <tr class=\'talent-row {{RCNUM}}-compensation {{RCNUM}} section-compensation\' data-cnum=\'{{RCNUM}}\' id="{{RCNUM}}-compensation">\n            <td class="table-spacer">&nbsp;</td>\n            <td class=\'name\'>\n                <div class="icon icon-youribm-compensation-circle"></div> Compensation <!-- <div class="count-badge animate-flicker" data-component="badge">&nbsp;</div> -->\n            </td>\n            <td class=\'expand\'>\n                <button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{RCNUM}}-compensation"></button>\n            </td>\n            <td class="table-spacer">&nbsp;</td>\n        </tr>\n\n        \n        <tr class="talent-row alert-section-row {{RCNUM}}-compensation" data-currCnum="{{RCNUM}}" data-currTab="{{RCNUM}}-compensation">\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n            <td colspan="99" class="talent-row-cell compensation-data">\n                <div class="data-cell loading-holder">\n\n                    <div class="section compensation">\n                        <span class="heading">Current Salary</span>\n                        <div class="">\n                            <span class="label">Approximate Annual Salary</span> <span class="field">{{{appAnnualSalaryCurrency}}}</span><br />\n                            <span class="label">Bonus Pay</span> <span class="field">{{{bonusPay}}} {{{currency}}}</span><br />\n                            <span class="label">Awards (3 years)</span> <span class="field">{{{awards3yr}}} {{{currency}}}</span><br />\n                        </div>\n                        \n                    </div>\n\n                    <div class="section compensation">\n                        <span class="heading">Compensation History*</span>\n                        <div class="">\n                            <span class="label">Date</span> <span class="field field-center">Salary Change</span><br />\n                            <span class="label">{{{lastSalaryChangeDate}}}</span> <span class="field">{{{lastSalaryChangeAmountCurrency}}}</span>\n                            <span class="label">{{{lastSalaryChangeDate_2}}}</span> <span class="field">{{{lastSalaryChangeAmountCurrency_2}}}</span>\n                            <span class="label">{{{lastSalaryChangeDate_3}}}</span> <span class="field">{{{lastSalaryChangeAmountCurrency_3}}}</span>\n\n                        </div>\n                        \n                    </div>\n                </div>\n                <div  class="alert-data-cell  loading-alerts">\n                    <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>\n                </div>\n            </td>\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n        </tr>\n\n        \n        \n        <tr class=\'talent-row {{RCNUM}}-dates {{RCNUM}} section-dates\' data-cnum=\'{{RCNUM}}\' id="{{RCNUM}}-dates">\n            <td class="table-spacer">&nbsp;</td>\n            <td class=\'name\'>\n                <div class="icon icon-youribm-calendar-check"></div> Dates <!-- <div class="count-badge animate-flicker" data-component="badge">&nbsp;</div> -->\n            </td>\n            <td class=\'expand\'>\n                <button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{RCNUM}}-dates"></button>\n            </td>\n            <td class="table-spacer">&nbsp;</td>\n        </tr>\n\n\n        <tr class="talent-row alert-section-row {{RCNUM}}-dates" data-currCnum="{{RCNUM}}" data-currTab="{{RCNUM}}-dates">\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n            <td colspan="99" class="talent-row-cell dates-data">\n                <div class="data-cell loading-holder">\n\n                    <div class="section dates">\n                        <span class="heading">Personal</span>\n                        <div class="">\n                            <span class="label">Birthday</span> <span class="field">{{{dateOfBirth}}}</span><br />\n                        </div>\n                    </div>\n\n                    <div class="section dates">\n                        <span class="heading">Service</span>\n                        <div class="">\n                            <span class="label">Service Reference</span> <span class="field">{{{serviceReference}}}</span><br />\n                            <span class="label">Date of Hire</span> <span class="field">{{{dateOfHire}}}</span><br />\n                            <span class="label">Length of Service</span> <span class="field">{{{serviceLength}}}</span><br />\n                        </div>\n                        \n                    </div>\n                </div>\n                \n                <div  class="alert-data-cell  loading-alerts">\n                    <!-- <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div> -->\n                </div>\n            </td>\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n        </tr>\n\n        \n        <tr class=\'talent-row {{RCNUM}}-emergency {{RCNUM}} section-emergency\' data-cnum=\'{{RCNUM}}\' id="{{RCNUM}}-emergency">\n            <td class="table-spacer">&nbsp;</td>\n            <td class=\'name\'>\n                <div class="icon icon-youribm-emergency"></div> Emergency <!-- <div class="count-badge animate-flicker" data-component="badge">&nbsp;</div> -->\n            </td>\n            <td class=\'expand\'>\n                <button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{RCNUM}}-emergency"></button>\n            </td>\n            <td class="table-spacer">&nbsp;</td>\n        </tr>\n\n\n        <tr class="talent-row alert-section-row {{RCNUM}}-emergency" data-currCnum="{{RCNUM}}" data-currTab="{{RCNUM}}-emergency">\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n            <td colspan="99" class="talent-row-cell emergency-data">\n                <div class="data-cell loading-holder">\n                    <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>\n                </div>\n                <div  class="alert-data-cell  loading-alerts">\n                    <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>\n                </div>\n            </td>\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n        </tr>\n\n\n\n        <tr class=\'talent-row {{RCNUM}}-expertise {{RCNUM}} section-expertise\' data-cnum=\'{{RCNUM}}\' id="{{RCNUM}}-expertise">\n            <td class="table-spacer">&nbsp;</td>\n            <td class=\'name\'>\n                <div class="icon icon-youribm-graduation-cap"></div> Expertise &amp; Learning <div class="count-badge animate-flicker" data-component="badge">&nbsp;</div>\n            </td>\n            <td class=\'expand\'>\n                <button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{RCNUM}}-expertise"></button>\n            </td>\n            <td class="table-spacer">&nbsp;</td>\n        </tr>\n\n        \n        <tr class="talent-row alert-section-row {{RCNUM}}-expertise" data-currCnum="{{RCNUM}}" data-currTab="{{RCNUM}}-expertise">\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n            <td colspan="99" class="talent-row-cell expertise-data">\n                <div  class="alert-data-cell  loading-alerts">\n                    <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>\n                </div>\n\n                <div class="data-cell loading-holder">\n                    <!-- <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div> -->\n                </div>\n            </td>\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n        </tr>\n\n        \n        \n        <tr class=\'talent-row {{RCNUM}}-leadership {{RCNUM}} section-leadership\' data-cnum=\'{{RCNUM}}\' id="{{RCNUM}}-leadership">\n            <td class="table-spacer">&nbsp;</td>\n            <td class=\'name\'>\n                <div class="icon icon-youribm-avatar-star"></div> Leadership<!-- <div class="count-badge animate-flicker" data-component="badge">&nbsp;</div>-->\n            </td>\n            <td class=\'expand\'>\n                <button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{RCNUM}}-leadership"></button>\n            </td>\n            <td class="table-spacer">&nbsp;</td>\n        </tr>\n\n\n        <tr class="talent-row alert-section-row {{RCNUM}}-leadership" data-currCnum="{{RCNUM}}" data-currTab="{{RCNUM}}-leadership">\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n            <td colspan="99" class="talent-row-cell leadership-data">\n                \n                <div class="data-cell loading-holder">\n                    <div class="section leadership">\n                        <span class="heading">Business and Technical Leadership</span>\n                    </div>\n                    <div class="section leadership leadership-left">\n                            <span class="label">Extraordinary Leadership Potential</span> <span class="field">{{#extLeadPot}}<i class="icon-awf-checkmark"></i>{{/extLeadPot}}{{{extLeadPotMask}}}</span><br />\n                            <span class="label">BTL Executive Potential</span> <span class="field">{{{btlExecPot}}}</span><br />\n                            <span class="label">BTL First Executive Appointment</span> <span class="field">{{{timeframe}}}</span><br />\n                            <span class="label">BTL Senior Executive Potential</span> <span class="field">{{#btlSenExecPot}}<i class="icon-awf-checkmark"></i>{{/btlSenExecPot}}{{{btlSenExecPotMask}}}</span><br />\n                    </div>\n\n                    <div class="section leadership leadership-right">\n                            <span class="bold">Position</span> <span class="">{{{position}}}</span><br />\n                            <span class="bold">Service Reference Data</span> <span class="">{{{serviceReference}}}</span><br />\n                            <span class="bold">Service Length</span> <span class="">{{{serviceLength}}}</span><br />\n                    </div>\n                </div>\n                <div  class="alert-data-cell  loading-alerts">\n                    <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>\n                </div>\n            </td>\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n        </tr>\n\n        \n        <tr class=\'talent-row {{RCNUM}}-performance {{RCNUM}} section-performance\' data-cnum=\'{{RCNUM}}\' id="{{RCNUM}}-performance">\n            <td class="table-spacer">&nbsp;</td>\n            <td class=\'name\'>\n                <div class="icon icon-youribm-chart-bar"></div> Performance <div class="count-badge animate-flicker" data-component="badge"></div>\n            </td>\n            <td class=\'expand\'>\n                <button class=\'expand-btn icon-awf-op-plus\' href=\'#\' data-uid="{{RCNUM}}-performance"></button>\n            </td>\n            <td class="table-spacer">&nbsp;</td>\n        </tr>\n\n        \n        <tr class="talent-row alert-section-row {{RCNUM}}-performance" data-currCnum="{{RCNUM}}" data-currTab="{{RCNUM}}-performance">\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n            <td  colspan="99"  class="talent-row-cell performance-data">\n                \n                <div class="data-cell loading-holder">\n                    <!-- <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div> -->\n                </div>\n                \n                <div  class="alert-data-cell  loading-alerts">\n                    <div class="loading-mark"><i data-primitive="icon" class="loading-indicator"></i></div>\n                </div>\n                \n            </td>\n            <!-- <td class="table-spacer">&nbsp;</td> -->\n        </tr>\n    </tbody>\n</table>\n\n\n\n\n',
"section-awards.html":'<div class="section">\n    <span class="section-heading">Awards Compensation</span>\n    <span class="awards-3-years">Awards (3 years): </span><span>{{{awards3yr}}} USD</span>\n    <hr style="margin: 25px 0;">\n    <span class="section-heading">Awards History</span>\n    <table class="awards-data-table">\n        <thead>\n            <tr>\n                <th class="table-header-title">Awards Title</th>\n                <th class="table-header-title">Date</th>\n                <th class="table-header-title">Amount (USD)</th>\n            </tr>\n        </thead>\n        <tbody class="award-table-append">\n            {{#awards}}\n                <tr>\n                    <td class="table-header-value award">{{{TAWARD}}}</td>\n                    <td class="table-header-value date">{{{DAWARD}}}</td>\n                    <td class="table-header-value amount">{{{AAWARD}}}</td>\n                </tr>\n            {{/awards}}\n        </tbody>\n    </table>\n</div>',"section-bcg.html":'    <div class="section bcg">\n        <span class="heading">Business Conduct Guidelines</span>\n        <div class="">\n            {{#bcg}}\n            <span class="label">BCG Completion</span>\n            <span class="field">\n                <span id=\'{{RCNUM}}-block1\' style="display: {{displayBlock1}};">\n                <a  href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a></span>\n                <span id=\'{{RCNUM}}-checkmark1\' style="display: {{displayCheckMark1}};"><i class="icon icon-awf-checkmark"></i><span style="display: {{displayDone1}}"> Done</span></span><span style="display: {{displayNoText1}}; margin-left: 16px;"> No</span>\n                {{exempt}}\n            </span>\n            <span class="field">\n                {{bcgCompletionDate}}\n            </span>\n            <br />\n            <span class="label">Certification Completion</span>\n            <span class="field">\n                <span id=\'{{RCNUM}}-block2\' style="display: {{displayBlock2}};">\n                <a  href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a></span>\n                <span id=\'{{RCNUM}}-checkmark2\' style="display: {{displayCheckMark2}};"><i class="icon icon-awf-checkmark"></i><span style="display: {{displayDone2}}"> Done</span></span><span style="display: {{displayNoText2}}; margin-left: 16px;">No</span>\n                {{exempt}}\n            </span>\n            <span class="field">\n                {{bcgCertificateDate}}\n            </span>\n            <br />\n            <span class="label">Course Completion</span>\n            <span class="field">\n                <span id=\'{{RCNUM}}-block3\' style="display: {{displayBlock3}};">\n                <a  href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a></span>\n                <span id=\'{{RCNUM}}-checkmark3\' style="display: {{displayCheckMark3}};"><i class="icon icon-awf-checkmark"></i><span style="display: {{displayDone3}}"> Done</span></span><span style="display: {{displayNoText3}}; margin-left: 16px;">No</span>\n                {{exempt}}\n            </span>\n            <span class="field">\n                {{bcgCourseCompletionDate}}\n            </span>\n            {{/bcg}}\n        </div>\n    </div>\n\n    <div class="section bcg-disclaimer"  style="display: {{#bcg}}{{displayBlock1}}{{/bcg}};">\n         * <i class="icon icon-awf-slash-circle"></i> = Data unavailable or restricted. <a  href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link">Learn more</a>\n    </div>\n',"section-emergency.html":'<div class="section">\n\n    <div class="additional-boxed-title">{{^emergency}}No {{/emergency}}Emergency Contacts</div>\n    <div class="emergency-list-row">\n        {{#emergency}}\n            <div class="emergency-contact-container">\n                <span class="info-box-row-label">Name:&nbsp;</span><span class="value contact-name">{{{emergencyContactName}}}</span><br />\n                <span class="info-box-row-label">Relationship:&nbsp;</span><span class="value relationship">{{{relationship}}}</span><br />\n                <span class="info-box-row-label">Phone Number:&nbsp;</span><span class="value phone">{{{phone}}}</span><br />\n            </div>\n        {{/emergency}}\n    </div>\n</div>',"section-expertise.html":'        {{#alerts}}\n        <div class="section expertise">\n            <span class="heading">Capabilities</span>\n            <div class="">\n                <span class="label">Manages Projects &amp; Programs</span>{{{supplemental.mppLevelStars}}} <span class="stars-text">{{{supplemental.mppStarsText}}}</span><br />\n                <span class="label">Provides Industry Insight</span>{{{supplemental.piiLevelStars}}} <span class="stars-text">{{{supplemental.piiStarsText}}}</span><br />\n            </div>\n        </div>\n\n        <div class="section expertise">\n            <span class="heading">Learning</span>\n            <div class="">\n                <span class="label">Prescribed Learning Completed</span>{{{supplemental.lk_individual}}}<br />\n                <span class="label">Think40 \n                    {{#supplemental.think40}}\n                        <span class="think40hours">{{{supplemental.think40_individual}}}</span>\n                    {{/supplemental.think40}}</span>{{{supplemental.think40remain}}}\n            </div>\n        </div>                 \n        {{/alerts}}',"section-performance.html":'{{#isCheckpointActive}}\n    {{#performance}}\n    <div class="section-outer"> \n        <div class="section checkpoint left">\n            <span class="heading">Checkpoint Assessment</span>\n            <div class="">\n                <span style="display: inline-block; margin-bottom: 5px;">Assessment Date:</span> {{{checkpointAssessmentDate}}}<br />\n                <span class="label">Business Results:</span>{{{businessResults}}}<br />\n                <span class="label">Client Success:</span>{{{clientSuccess}}}<br />\n                <span class="label">Innovation:</span>{{{innovation}}}<br />\n                <span class="label">Responsibility to Others:</span>{{{responsibility}}}<br />\n                <span class="label">Skills:</span>{{{skills}}}<br />\n            </div>\n        </div>\n        <div class="section checkpoint right">\n            &nbsp;\n        </div>\n    </div>\n    {{/performance}}\n{{/isCheckpointActive}}    \n    <div class="section-outer">\n\n        <div class="section left dept">\n            <span class="heading">PBC History</span>\n            <div class="">\n                <span class="bold">PBC 2015:</span> {{{pbcYear1}}}<br />\n                <span class="bold">PBC 2014:</span> {{{pbcYear2}}}<br />\n                <span class="bold">PBC 2013:</span> {{{pbcYear3}}}<br />\n            </div>\n            \n        </div>\n\n        <div class="section right  dept">\n            <span class="heading">Project Assessments</span>\n            <div class="supplemental-pa-data">\n                <span class="bold ">Number of PAs:</span> {{#alerts}}{{{supplemental.pa}}}{{/alerts}}\n            </div>\n            \n        </div>\n    </div>\n{{#isCheckpointActive}}    \n    <div class="section-outer">\n        <div class="section checkpoint">\n            <span class="heading">Checkpoint Questions</span>\n            {{#performance}}\n            <span class="bold">Job Availability:</span>\n            {{{checkpointQuestionJobAvailability}}}<br /><br />\n            <span class="bold">Manager Assessment Certification:</span>\n            {{{checkpointQuestionManagerCertification}}}<br /><br />\n            {{/performance}}\n        </div>\n    </div>\n{{/isCheckpointActive}}',"table-personalinfo.html":"<!-- blank, to delete -->","team-at-a-glance-icon.html":"<a class='profile-picture person-link' href='http://w3.ibm.com/bluepages/profile.html?uid={{id}}' target='_blank' data-initials='{{initials}}' data-cnum='{{id}}'>\n    {{#avatar}}\n        <img class='avatar' src='{{{avatar}}}' alt='Link to your Bluepages profile' />\n    {{/avatar}}\n    {{^avatar}}\n        <span class='avatar initials'>{{initials}}</span>\n    {{/avatar}}\n</a>\n\n\n\n\n","team-at-a-glance.html":'<div class="ataglance-table" id="ataglance-table">\n    <div class="ataglance-header">\n        <div class="ataglance-cell axis-label">{{{yAxisLabel}}}</div> \n        <div class="ataglance-cell axis-label">{{{xAxisLabel}}}</div>\n        <div class="ataglance-cell"><span class="column-separator">1</span></div>\n        <div class="ataglance-cell"><span class="column-separator">2</span></div>\n        <div class="ataglance-cell"><span class="column-separator">3</span></div>\n        <div class="ataglance-cell"><span class="column-separator">4+</span></div>\n        <!-- {{#xAxisCategories}}\n        <div class="ataglance-cell">\n            <span class="column-separator">{{.}}</span>\n        </div> \n        {{/xAxisCategories}}  -->\n    </div> \n    {{#yAxisCategories}}\n    <div class="ataglance-row">\n        <div class="ataglance-cell">{{.}}</div>\n        <div class="ataglance-cell"></div>\n        <div class="ataglance-cell"></div>\n        <div class="ataglance-cell"></div>\n        <div class="ataglance-cell"></div>\n        <div class="ataglance-cell"></div>\n    </div> \n    {{/yAxisCategories}}\n    \n    {{#data}}\n        <!-- <button class=\'person-link\' onclick=\'window.open("http://w3.ibm.com/bluepages/profile.html?uid={{cnum}}","_blank")\'>\n            {{#avatar}}\n                <img class=\'avatar\' src=\'{{avatar.url}}\' alt=\'Link to your Bluepages profile\' />\n            {{/avatar}}\n            {{^avatar}}\n                <span class=\'avatar initials\'>asdf{{initials}}</span>\n            {{/avatar}}\n        </button> -->\n\n    {{/data}}\n    <!-- \n                    <div class="ataglance-cell-inner">\n                        <div class="person-link">\n                            <button class="person-link" onclick="window.open(&quot;http://w3.ibm.com/bluepages/profile.html?uid=824455897&quot;,&quot;_blank&quot;)">\n                                <span class="avatar initials">LB</span>\n                            </button>\n                        </div>\n                    </div>\n    -->\n        </div>',"team-profiles-large.html":'<div class="card" role="region" aria-label="headline large card">\n<div class="team-profiles-large">\n  <div class="headerContainer">\n    <div class="navigation-Tab"></div>\n  </div>\n  <div class="mgrhub-dropdown">\n      <ul id="dashboardTabs" class="nav nav-tabs tab-actions dropdown-tabs" role="tablist">\n        <li role="presentation" class="dropdown-outer">\n          <button href="#" id="dropdown_1" class="dropdown-toggle" data-toggle="dropdown" aria-controls="dropdown_1-contents" tabindex="0" aria-expanded="false">\n            {{#collection}}\n              <span id="{{uid}}-tab-title">\n                  {{#avatar}}\n                      <img class=\'avatar\' src=\'{{avatar}}\' alt=\'Link to your Bluepages profile\' />\n                  {{/avatar}}\n                  {{^avatar}}\n                      <span class=\'avatar initials\'>{{initials}}</span>\n                  {{/avatar}}\n                  {{{fullname.full}}}\n                  <div id="{{uid}}-header-badge" class="count-badge header-badge off" data-component="badge">&nbsp;</div>\n              </span>\n            {{/collection}}\n        </button>\n          \n          <div class="icon arrow-icon icon-awf-chevron-down"></div>\n      \n          <ul class="dropdown-holder" aria-labelledby="dropdown_1" id="dropdown_1-contents" role="tablist" > \n          {{#collection}}\n            <li class="dropdown-badge-holder {{uid}}-badge" data-title="{{uid}}">\n              <button href="#{{uid}}" id="{{uid}}-tab" class="tab-dropdown" role="tab" data-toggle="tab-dropdown" aria-expanded="true" aria-controls="{{uid}}" data-toggletarget="{{uid}}" tabindex="0" >\n                <span class="icon section-icon {{categoryIcon}}"></span> {{{fullname.full}}} <span class="count-badge dropdown-badge" data-component="badge"></span>\n              </button> \n            </li>\n          {{/collection}}\n          </ul>\n          \n          <!-- <div class="mini-alerts">\n            {{#collection}}\n              <button href="#" class="mini-alert off" id="{{uid}}-mini-alert" tabindex="-1" title="{{dashTitle}}" data-toggletarget="{{uid}}"><span class="icon section-icon {{categoryIcon}}"></span> <span class="mini-alert-count"></span></button>\n            {{/collection}}\n          </div> -->\n        </li>\n      </ul>\n\n    <div id="dashboardTabsContent" class="tab-content scroll-card">\n      {{#collection}}\n        <div role="tabpanel" class="tab-pane parent-tab fade {{uid}}-panel" id="{{uid}}-panel" aria-labelledby="{{uid}}-tab" aria-selected="false">\n          <div class="mgrhub-dropdown">\n\n            <div id="{{uid}}TabsContent" class="tab-content sub-tab-content">\n                \n                <div class="tab-section" id="overview">\n                    <h1 data-navigation-name="Overview" data-navigation="Overview" class="tab-header" role="header">Overview</h1>\n                    <p class="overview-text overview-yourteam">Manage your people better with this private profile summary of key employee data for one of your team members. All data is provided to you from the trusted source, only as permitted by the privacy laws and practices in the employee\'s country.</p>\n                    <p>\n                        <a class="ibm-external-link confidential-link" href="http://w3-03.ibm.com/ibm/privacy/practices_guidance.html" target="_blank">IBM Confidential</a>\n                    </p>\n                </div>\n              \n              <h1 data-navigation-name="Private Profile" data-navigation="PrivateProfile" class="tab-header private-profile-header" role="header">Private Profile</h1>\n              \n              <div class="tab-section {{#hasAlerts}} hasAlerts{{/hasAlerts}}" id="{{uid}}-dashboard">\n                <!-- <h1 class="tab-header" role="header">Person: {{{fullname}}}</h1>  -->\n                <div class=\'table-container\'>\n                    \n                </div>\n              </div>\n              \n              <div class="tab-content sub-tab-content intro-block intro-guide">\n              <button href="#" class="intro-toggle-btn" aria-expanded="false" aria-controls="intro-content">\n                <h1 data-navigation-name="Help" data-navigation="Help" class="tab-header" role="header">Help</h1>\n                <div class="expand-btn icon-awf-op-plus" href="#" data-uid="-yourteam"></div>\n              </button>\n\n\n              <div class="intro-content" id="intro-content">\n                <h2 class="section-header">Welcome to Manager Hub with Talent Playbook alerts</h2>\n                <p style="margin-bottom: 10px;">Apprenticing and providing feedback to your people every day is vital to a strong team and healthy business.\n                  It takes specific knowledge and insight, but don\'t worry, the dashboards below can help! Click below\n                  and you\'ll see specific observations and recommendations about your employees, aimed at helping your\n                  people get the skills and career development opportunities they need. For more information, <a href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/GBS%20Managers%20only%20-%20Manager%20Talent%20Playbook%20Help" target="_blank" class="ibm-external-link">visit our Help Center</a></p>\n                <p><span style="font-weight: 600;">Note:</span> Due to Data Privacy restrictions some data elements might\n                  be unavailable for specific employees.<br>Please see details: <a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager%20Hub%20-%20Blocked%20Data" target="_blank">Manager Hub - Blocked Data</a></p>\n                <h2 class="section-header">Proactive Retention</h2>\n                <p style="margin-bottom: 10px;">Slow career progression is one of several risk factors that put valuable IBMers at risk of leaving IBM.\n                  Using the table below, you can now leverage predictive analytics to retain high value IBMers who are\n                  at risk. Each employee\'s Propensity to Leave (PTL) is the predicted risk that he or she will leave IBM\n                  within the next 12 months. The Observations column predicts why each IBMer may be at risk, and the Actions\n                  for Managers recommends what you can do to retain that IBMer.</p>\n                <p><span style="font-weight: 600;">Disclaimer:</span> the Propensity to Leave (PTL) Risk is calculated twice\n                  a year (Spring and Fall). The information here is as of April 2016.</p>\n\n                <h2 class="section-header">Drive Band Promotion</h2>\n                <p>Band velocity â how quickly an IBMer moves through bands â is an important signal to individuals about\n                  their career opportunities with IBM. Our talent model is based on the foundation that people progress\n                  every 2 â 4 years, assuming there are open roles at the next band. As a manager, it is your responsibility\n                  to ensure your people expand their capabilities and become promotion eligible, positioning them for opportunities\n                  at the next band level. And the first step is knowing how to progress a career in GBS. Orient your employees\n                  to use the <a href="https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W902e03401bb8_45f4_a050_d23ab8ed019a/page/GBS-Peaks-Career-Model" target="_blank" class="ibm-external-link">Global GBS Career Wiki</a> as the first \'career stop\' for client\n                  facing practitioners.</p>\n\n                <h2 class="section-header">Broaden Capabilities</h2>\n                <p>The most effective IBMers are those who combine deep expertise with broad capabilities â they have a âT-shapedâ\n                  talent profile. Helping IBMers to become T-shaped will get them ready for promotion while helping our\n                  clients succeed. All IBMers are encouraged to complete 40 hours of professional development each year.\n                  Your employees will need your guidance and support to identify and complete the most appropriate learning.\n                  The tracking of Think40 is done on an annual basis.</p>\n\n                <h2 class="section-header">Assess Performance and Potential</h2>\n                <p style="margin-bottom: 10px;">Active performance management by managers is critical to ensuring we have culture of high performance,\n                  a high performing culture and we are effectively managing low performers. Managers should identify and\n                  actively manage GBS Top Talent, specifically ensuring these IBMers understand our interest in having\n                  them advance their careers, take stretch assignments, and receive appropriate learning. In addition to\n                  inspiring your top performers and coaching average performers, low performers should be actively managed\n                  through our Performance Management process. Contact your HR Partner with any process questions.</p>\n                <p style="margin-bottom: 32px;">All practitioners are expected to have at least one project assessment (PA) on file in a 12 month period.\n                  This feedback helps you provide fact-based development and performance feedback. For any questions related\n                  to the Performance Management process, reach out to your HR Partner.</p>\n              </div>\n            </div>\n             <br /><br /><br />\n            \n            </div>\n          </div>\n        </div>\n      {{/collection}}\n    </div>\n  </div>\n</div>\n</div>',"team-profiles-medium.html":'<div class="team-profiles-medium">\n  <div class="filter-button">\n    <button href="#" class="team-toggle global-toggle" data-team="global">Global</button><button href="#" class="team-toggle incountry-toggle"\n      data-team="incountry">In-Country</button><button href="#" class="team-toggle allteams-toggle" data-team="allteams">All</button>\n  </div>\n  <span class=\'title\' role="heading">Reports ({{collection.length}})</span>\n  <hr />\n  <!-- <span class=\'distribution-list\'><a href="" target="_BLANK">Distribution List</a></span> -->\n  <div class="icon-list">\n    {{#collection}}\n      <button class=\'person-link\' data-uid={{uid}}>\n        {{#avatar}}\n          <img class=\'avatar\' src={{avatar}} alt={{fullname.fullName}} />\n        {{/avatar}}\n        {{^avatar}}\n          <span class=\'avatar initials\'>{{initials}}</span>\n        {{/avatar}}\n          <span class=\'name\'>{{{fullname.first}}}</span>\n      </button>\n    {{/collection}}\n  </div>\n  <div class="mobile-alert">\n    <div class="mgrhub-icon"></div>\n    Manager Hub app is available for access on mobile devices.\n    <p class="cta-button">\n      <button type="button" class="solid-btn mgrhub-btn" onclick=\'window.open("https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager%20Hub%20Mobile%20FAQ","_blank")\'>Download the Manager Hub app <i class="icon-awf-chevron-right"></i></button>\n    </p>\n  </div>\n</div>',"tpb-alerts.html":'\t<div class="alert-holder {{noticeType}}" data-noticeId="{{noticeId}}" data-categoryId="{{categoryId}}">\n\t\t<div class="categoryLabel">{{{categoryLabel}}}</div>\n\t\t<div class="observation">\n\t\t\t<span class="title">Cognitive Observation</span>\n\t\t\t{{{observation}}}\n\t\t</div>\n\t\t<div class="recommendation">\n\t\t\t<span class="title">Manager Action</span>\n\t\t\t{{{recommendation}}}\n\t\t</div>\n\t\t\n\t\t<div class="title supplemental" style="display: none;">Supplemental Information<span class=""></span></div><br />\n\t\t{{#suppUsedContent}}\n\t\t\t{{{.}}}<br />\n\t\t{{/suppUsedContent}}\n\t\t<div class="read-unread-buttons">\n\t\t\t<span class="read-unread-loading">Saving...</span>\n\t\t\t<span class="read-unread-loading-error">Error Saving</span>\n\t\t\t<button type="button" class="flip-2 mark-as-read">Mark as read</button>\n\t\t\t<button type="button" class="flip-2 mark-as-unread">Mark as unread</button>\n\t\t</div>\n\n\t</div>\n'},team:{"leadership.html":'{[ var totalRows = 1 ]}\n{[ var itemsPerRow = cardSize === \'large\' ? 3 : cardSize === \'wide\' ? 5 : 4 ]}\n{[ var needsRemainder = leadership.length > totalRows * itemsPerRow ]}\n{[ var remainder = needsRemainder && cardSize !== \'large\' ? leadership.length - (itemsPerRow * totalRows - 1) : 0 ]}\n{[ var leaders = leadership.slice(0, leadership.length - remainder) ]}\n<div class=\'group leadership {{ cardSize }}\'>\n\t<span class=\'title\' role="heading">Leadership ({{ leadership.length }})</span>\n\t<hr/>\n\t<ul role="list">\t\t\t\n\t\t{[ leaders.forEach(function(leader, index) { ]}\n\t\t\t<li class=\'person\' data-uid="{{ leader.uid }}" role="listitem">\n\t\t\t\t<span class=\'avatar-container\'></span>\t\t\t\t\n\t\t\t\t<span class=\'name\'>{{ leader.name.first }}</span>\n\t\t\t\t<div class=\'leader-info\'>\n\t\t\t\t\t<h1>\n\t\t\t\t\t\t<a class="name-link" href="http://w3.ibm.com/bluepages/profile.html?email={{ leader.preferredIdentity }}" onclick="http://w3.ibm.com/bluepages/profile.html?email={{ leader.preferredIdentity }}" target="_blank">{{ leader.name.first }} {{ leader.name.last }}</a>\n\t\t\t\t\t</h1>\n\t\t\t\t\t{[ if (leader.role) { ]}\n\t\t\t\t\t<h2 class="ellipsis">{{ leader.role }}</h2>\n\t\t\t\t\t{[ } ]}\n\t\t\t\t</div>\n\t\t\t\t{[ if (index !== (leaders.length - 1)) { ]}\n\t\t\t\t\t<div class="leadership-arrow"></div>\n\t\t\t\t\t<em class="icon-awf-chevron-right leadership-arrow-icon"></em>\n\t\t\t\t{[ } ]}\n\t\t\t</li>\t\t\n\t\t{[ }) ]}\n\t\t{[ if (needsRemainder) { ]}\n\t\t\t<li class=\'more\' role="listitem">\n\t\t\t\t<a class=\'interactive\' role="button" tabindex="0"><span class=\'remainder\'>{{ remainder }}</span></a>\n\t\t\t</li>\n\t\t{[ } ]}\n\t</ul>\n</div>\n{[ if (needsRemainder) { ]}\n\t<div class=\'leadership-toggle\' tabindex="0">\n\t\t<p class=\'leadership-toggle-content\' role="button">Show all leadership<i class=\'icon-awf-chevron-down\'></i></p>\n\t</div>\n{[ } ]}\n',"peers.html":"{[ var totalRows = 2 ]}\n{[ var itemsPerRow = cardSize === 'large' ? 6 : cardSize === 'wide' ? 5 : 4 ]}\n{[ var needsRemainder = peers.length > totalRows * itemsPerRow ]}\n{[ var remainder = needsRemainder && cardSize !== 'large' ? peers.length - (itemsPerRow * totalRows - 1) : 0 ]}\n<div class='group peers {{ cardSize }}'>\n<span class='title' role=\"heading\">Peers ({{ peers.length }})</span>\n<hr/>\n<ul role=\"list\">\n\t{[ peers.slice(0, peers.length - remainder).forEach(function(peer) { ]}\n\t\t<li class='person' data-uid=\"{{ peer.uid }}\" role=\"listitem\">\n\t\t\t<span class='avatar-container'></span>\n\t\t\t<span class='name'>{{ peer.name.first }}</span>\n\t\t</li>\t\t\n\t{[ }) ]}\n\t{[ if (needsRemainder) { ]}\n\t\t<li class='more' role=\"listitem\">\n\t\t\t<a class='interactive' role=\"button\" tabindex=\"0\"><span class='remainder'>{{ remainder }}</span></a>\n\t\t</li>\n\t{[ } ]}\n</ul>\n</div>\n{[ if (needsRemainder) { ]}\n\t<div class='peer-toggle' tabindex=\"0\">\n\t\t<p class='peer-toggle-content' role=\"button\">Show all peers<i class='icon-awf-chevron-down'></i></p>\n\t</div>\n{[ } ]}","reports.html":"{[ var totalRows = 3 ]}\n{[ var itemsPerRow = cardSize === 'wide' ? 5 : 4 ]}\n{[ var needsRemainder = cardSize !== 'large' && reports.length > totalRows * itemsPerRow ]}\n{[ var remainder = needsRemainder ? reports.length - (itemsPerRow * totalRows - 1) : 0 ]}\n<div class='group reports {{ cardSize }}'>\n\t<span class='title' role=\"heading\">Reports ({{ reports.length }})</span>\n\t<hr/>\n\t<ul role=\"list\">\n\t\t{[ reports.slice(0, reports.length - remainder).forEach(function(report) { ]}\n\t\t\t<li class='person' data-uid=\"{{ report.uid }}\" role=\"listitem\">\n\t\t\t\t<span class='avatar-container'></span>\n\t\t\t\t<span class='name'>{{ report.name.first }}</span>\n\t\t\t</li>\n\t\t{[ }) ]}\t\t\t\n\t\t{[ if (needsRemainder) { ]}\n\t\t\t<li class='more' role=\"listitem\">\n\t\t\t\t<a class='interactive' role=\"button\" tabindex=\"0\"><span class='remainder'>{{ remainder }}</span></a>\n\t\t\t</li>\n\t\t{[ } ]}\n\t</ul>\n</div>","team.html":'<div class="tab-container"></div>\n<div class="team"></div>'},"think-academy":{"item.html":'<div class="think-academy-item" style="width: {{ itemWidth }}%;" >\n\t<div class="think-academy-bg" style="background-color: {{ topicColor }};"></div>\n\t<div class="think-academy-content">\n\t\t<div class="title {{colors.title}}">{{ title }}</div>\n\t\t<div class="pictogram">\n\t\t\t{{ #pictogramWhiteWithTransparentBg }}\n\t\t\t\t<img alt="pictogram" src={{ pictogramWhiteWithTransparentBg }}>\n\t\t\t{{ /pictogramWhiteWithTransparentBg }}\n\t\t\t{{ ^pictogramWhiteWithTransparentBg }}\n\t\t\t\t<img data-primitive="pictogramWhiteWithTransparentBg" alt="pictogram" src="images/think-academy/KO.svg">\n\t\t\t{{ /pictogramWhiteWithTransparentBg }}\n\t\t</div>\n\t\t<div class="description TA-desc {{ colors.description }}">{{ description }}</div>\n        <p class="cta-button">\n            <button class="button outline {{colors.actionBtn}}" tabindex="{{ tabIndex }}" data-i18n="[html]app.cogs.corporate-strategy.cta.explore-topic">Explore topic<i class=\'icon-awf-chevron-right\'></i></a>\n        </p>\n\t</div>\n</div>',"large.html":'<div class="think-academy-large">\n\t<div class="content" data-container="content">\n\t\t<div class="content-topic">\n\t\t\t<img class="large-pictogram" src="{{ pictogramWithWhiteBg }}" alt="pictogram">\n\t\t\t<div class="content-right">\n\t\t\t\t<div class="date">{{ date }}</div>\n\t\t\t\t<div class="title">{{ title }}</div>\n\t\t\t\t<div class="description">{{ description }}</div>\n\t\t\t\t<a href="{{ url }}" target="_blank"><button class="primary-form-btn" data-i18n="app.cogs.corporate-strategy.cta.start-topic">Start the topic</button></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="featured-modules">\n\t\t\t<p class="header"><span  data-i18n="app.cogs.corporate-strategy.featured.header">Featured Modules</span><a href="{{ url }}" target="_blank" data-i18n="[html]app.cogs.corporate-strategy.featured.link">View all on ThinkAcademy<i class="icon-awf-arrow-down"></i></a></p>\n\t\t\t<div class="module moduleOne">\n\t\t\t\t<!-- <p class="module-number">1</p> -->\n\t\t\t\t<p class="module-label">{{ moduleOne.label }}</p>\n\t\t\t\t<img class="thumbnail" src="{{ moduleOne.thumbnail }}" alt="">\n\t\t\t\t<div class="module-right">\n\t\t\t\t\t<a href="{{ moduleOne.url }}" class="module-title" target="_blank">{{ moduleOne.title }}</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="module moduleTwo">\n\t\t\t\t<!-- <p class="module-number">2</p> -->\n\t\t\t\t<p class="module-label">{{ moduleTwo.label }}</p>\n\t\t\t\t<img class="thumbnail" src="{{ moduleTwo.thumbnail }}" alt="">\n\t\t\t\t<div class="module-right">\n\t\t\t\t\t<a href="{{ moduleTwo.url }}" class="module-title" target="_blank">{{ moduleTwo.title }}</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="module moduleThree">\n\t\t\t\t<!-- <p class="module-number">3</p> -->\n\t\t\t\t<p class="module-label">{{ moduleThree.label }}</p>\n\t\t\t\t<img class="thumbnail" src="{{ moduleThree.thumbnail }}" alt="">\n\t\t\t\t<div class="module-right">\n\t\t\t\t\t<a href="{{ moduleThree.url }}" class="module-title" target="_blank">{{ moduleThree.title }}</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',"medium.html":'<div data-primitive="hover_trigger" class="card">\n\t<div class="content" data-container="content"></div>\n</div>'},"time-in-out":{"time-in-out-large.html":'<div class="card" data-component="time-in-out-large">\n\t<h3>This is the large card!</h3>\n\t<div id="calendar"></div>\n\t<div id="legend">\n\t\t<div class="day-off-type">\n\t\t\t<div class="color-box vacation"></div>\n\t\t\t<span>Vacation</span>\n\t\t</div>\n\t\t<div class="day-off-type">\n\t\t\t<div class="color-box personal"></div>\n\t\t\t<span>Personal Choice Holiday</span>\n\t\t</div>\n\t\t<div class="day-off-type">\n\t\t\t<div class="color-box flex"></div>\n\t\t\t<span>Flex Time</span>\n\t\t</div>\n\t\t<div class="day-off-type">\n\t\t\t<div class="color-box custom"></div>\n\t\t\t<span>Custom Holiday</span>\n\t\t</div>\n\t\t<div class="day-off-type">\n\t\t\t<div class="color-box site"></div>\n\t\t\t<span>Site Holiday</span>\n\t\t</div>\n\t\t<div class="day-off-type">\n\t\t\t<div class="color-box sick"></div>\n\t\t\t<span>Sick Day</span>\n\t\t</div>\n\t</div>\n\t<div id="new-time-out">\n\t\t<h2 class="form-heading"></h2>\n\t\t<button class="close">\n\t\t\t<i data-primitive="icon" class="icon-awf-op-times"></i>\n\t\t</button>\n\t\t<form id="time-in-out-submit" method="post" accept-charset="utf-8">\n\t\t\t<label>EVENT TYPE*</label>\n\t\t\t<select id="time-off-type">\n\t\t\t\t<option disabled selected value></option>\n\t\t\t\t<option value="vacation">Vacation</option>\n\t\t\t\t<option value="holiday">Holiday</option>\n\t\t\t\t<option value="leave">Leave</option>\n\t\t\t\t<option value="sickDay">Sick-day/Illness</option>\n\t\t\t\t<option value="travel">Travel</option>\n\t\t\t\t<option value="customer-meeting">Customer Meeting</option>\n\t\t\t</select>\n\t\t\t<label id="vacation-label">DURATION TYPE*</label>\n\t\t\t<select id="vacation">\n\t\t\t\t<option disabled selected value></option>\n\t\t\t\t<option value="full">Full Day</option>\n\t\t\t\t<option value="firstHalf">1/2 Day AM</option>\n\t\t\t\t<option value="secondHalf">1/2 Day PM</option>\n\t\t\t</select>\n\t\t\t<label id="holiday-label">DURATION TYPE*</label>\n\t\t\t<select id="holiday">\n\t\t\t\t<option disabled selected value></option>\n\t\t\t\t<option value="siteHoliday">Site</option>\n\t\t\t\t<option value="personalChoice">Personal Choice</option>\n\t\t\t</select>\n\t\t\t<label id=title-label>TITLE</label>\n\t\t\t<input id="form-title" type="text" name="" value="">\n\t\t\t<label id="notes-label">NOTES</label>\n\t\t\t<textarea id="form-notes"></textarea>\n\t\t\t<div class="button-row">\n\t\t\t\t<a class="delete">Delete</a>\n\t\t\t\t<input type="submit" value="Submit" class="solid-btn">\n\t\t\t</div>\n\t\t</form>\n\t</div>\t\n</div>\n',
"time-in-out-medium.html":'<div class="card" data-component="time-in-out-medium">\n\t<h3>This is the medium card!</h3>\n</div>\n'},"user-sign-in-prompt":{"sign-in-popup.html":'<div class="signin-popup">\n\t<button class="btn-control js-sigin-popup-dismiss awf-card__titlebar__cta__close -awf-focus -awf-link-inverted">\n\t\t<span class="js-btn-text btn-control__text awf-access">Close</span>\n\t\t<em class="js-btn-icon btn-control__icon icon-awf-op-times"></em>\n\t</button>\n\t<h2 class="signin-popup__header title-2" data-i18n="app.cogs.user-sign-in-prompt.popup-title">Discover what the buzz is about</h2>\n\t<div class="signin-popup__body">\n\t\t<p class="signin-popup__body__logo">\n\t\t\t<i class="icon-youribm-logo-ibmerhub-circle-fill"></i>\n\t\t</p>\n\t\t<p class="signin-popup__body__content" data-i18n="app.cogs.user-sign-in-prompt.popup-body">Sign in to access full features and benefits</p>\n\t\t<p class="signin-popup__body__actions">\n\t\t\t<button class="js-sigin-popup-submit primary-form-btn" data-i18n="awf.common.sign_in_proper">Sign in</button><br/>\n\t\t\t<button class="js-sigin-popup-cancel tertiary-form-btn" data-i18n="awf.common.cancel">Cancel</button>\n\t\t</p>\n\t</div>\n</div>',"sign-in-prompt.html":'<div class="experience-load-message -background-base -box-shadow-base">\n\t<p>\n\t\t<a href="javascript:;" onclick="window.location=\'#/{{experience_id}}/\'; awf.user.login();" data-i18n="awf.common.sign_in">Sign in</a>.<span data-i18n="app.cogs.user-sign-in-prompt.access-msg"> To access some of the features and information on this page, you need to be authenticate.</span></p>\n</div>'},whatsnew:{"large-item.html":'<article aria-label="{{title}}" class="whatsnew-item-card" data-primitive="whatsnewitemcard" role="article">\n    <div class="whatsnew-content">\n        <div class="content-header">\n            <img class="header-icon" role="img" src="{{icon.src}}" alt="{{icon.alt}}">\n                <h1 class="title" role="heading">\n                    <a href="{{url}}" target="_blank">\n                        {{title}}\n                    </a>\n                </h1>\n            </img>\n        </div>\n        {[if(tabType === "item"){]}\n            <div class="hero-image">\n                <a href="{{url}}" target="_blank">\n                    <img alt="{{img_large.alt}}" class="hero" role="img" src="{{img_large.src}}">\n                    </img>\n                </a>\n            </div>\n        {[}]}\n        <div class="content-body">\n            <p>\n                <span class="date">\n                    {{date}}\n                </span>\n                {[if(tabType === "item"){]}\n                    <div class="abstract">\n                        {{abstract}}\n                    </div>\n                    <div class="copy">\n                        {{copy}}\n                    </div>\n                {[}]}\n                <button class="button_title flip-2" href="{{url}}" target="_blank" data-i18n="app.common.cta.learn-more">\n                    {{button_title}}\n                </button>\n            </p>\n        </div>\n    </div>\n</article>',"large.html":'<div data-primitive="hover_trigger" class="card" id="dropshadow-scroll">\n\t<div id="toggle-bar"></div>\n\t<div id="overview-content" role="tabpanel" aria-label="What\'s new tab panel" data-i18n="[aria-label]app.cogs.whatsnew.aria-label.tabpanel">\n\t\t<div class="title1" data-i18n="app.cogs.whatsnew.archive.filter-tilte">Content types released to date</div>\n\t\t<div class="data-visualization" role="region" aria-label="data visualization" data-i18n="[aria-label]app.cogs.whatsnew.aria-label.data-visualization">\n\t\t\t<div class="hover-overlay" data-i18n="app.cogs.whatsnew.archive.data-visualization-prompt">Click on a color field to filter posts.</div>\n\t\t\t<div class="data-row"></div>\n\t\t</div>\n\t\t<ul class="tab-filters"></ul>\n\t\t<div id="archive-content">\n\t\t\t<div id="search-bar"></div>\n\t\t\t<div id="search-results">\n\t\t\t\t<div id="archive-title"><span data-i18n="app.cogs.whatsnew.archive.list-tilte">All Post</span></div>\n\t\t\t\t<div id="archive-list"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div id="latest-posts-content" class="content" role="tabpanel" aria-label="What\'s new tab panel" data-i18n="[aria-label]app.cogs.whatsnew.aria-label.tabpanel"></div>\n</div>\n',"medium-item.html":'<article class="whatsnew__item" role="article" aria-label="{{title}}">\n    <div class="whatsnew__content">\n        {{#img}}\n        <div class="hero-image">\n            <a href="javascript:;" title="{{img.alt}}">\n                <img alt="{{img.alt}}" class="hero" src="{{img.src}}">\n            </a>\n        </div>\n        {{/img}}\n\n        <div class="content-body">\n            {{#title}}\n            <h3 class="title">\n                <a data-primitive="title_link" href="{{url}}" target="_blank" title="{{title}}">\n                    {{title}}\n                </a>\n            </h3>\n            {{/title}}\n            <div class="post_time">\n                <span class="date">{{date}}</span>\n                <button class="more_link slide-on" href="javascript:;" data-i18n="awf.common.show_more" data-primitive="more_link">Show More</button>\n            </div>\n            {{#trunc_abstract}}\n            <div class="abstract" data-primitive="abstract"> {{{trunc_abstract}}} </div>\n            {{/trunc_abstract}}\n        </div>\n    </div>\n</article>',"medium.html":'<div data-primitive="hover_trigger" class="card whatsnew">\n\t<div class="content" role="region" aria-label="What\'s new medium content" data-i18n="[aria-label]app.cogs.whatsnew.aria-label.medium-content"></div>\n</div>'}},components:{blocked:{"blocked.html":'{{#mask}}\n\t<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" \n\ttarget="_blank" \n\ttitle="Data is not available or restricted. Click to learn more." \n\tclass="blocked ibm-external-link">\n\t\t<i class="icon icon-awf-slash-circle"></i>\n\t</a>\n{{/mask}}\n{{^mask}}\n\t<span>{{data}}</span>\n{{/mask}}'},box:{"box-large-item.html":'<li class="content__section__list__item " data-primitive="item" >\n    <p class="item-icon {{folder_type}}" data-primitive="type"><i class="{{icon}}"></i></p>\n    <div class="item-content {{type}}" attrId="{{id}}">\n        <h4>\n            <a href="javascript:;" data-primitive="name" >{{name}}</a>\n        </h4>\n        <p>\n            <span data-primitive="size">{{size}}</span><span> uploaded by </span><span data-primitive="created_by">{{created_by}}</span>\n        </p>\n    </div>\n    <div class="item-date">\n        <span data-primitive="modified_at">{{modified_at}}</span>\n    </div>\n    <div class="item-drag-tips">Drop to upload into this folder</div>\n\n</li>',"box-large.html":'<div class="card box-large" aria-label="box large card">\n    <div class="file-sign-in" id="large_sign_in" data-primitive="large_sign_in" >\n        <p >We are currently working to integrate Files with the yourIBM single sign on.Until then, please sign in using the button below.</p>\n        <div class="large_sign_in_svg">\n        <object type="image/svg+xml" data="images/signIn_large.svg" class="indicator">Sorry ,your browser doesn\'t support object element.</object>\n        </div>\n        <button type="button" class="primary-form-btn submit" data-primitive="signin_cta">Sign In</button>\n    </div>\n    <div class="top-menu" id="top-menu" data-primitive="top_menu">\n        <p data-primitive="all" id="all" class="top-menu__title">All Files</p>\n        <p data-primitive="back" id="back" class="top-menu__title back">\n        <a href="javascript:;" title="Back to folder">\n        <i class="icon icon-awf-chevron-left"></i> <span>yourIBM</span></a>\n        </p>\n        <ul data-primitive="right_nav" id="right_nav" class="top-menu__actions" style="padding-right: 55px">\n            <li><a href="javascript:;" data-primitive="upload" title="Upload"><span class="awf-access">Upload icon</span><i class="icon-awf-upload"></i></a>\n                <p class="top-menu__actions__file"><label for="file-large-upload">Choose files</label><input type="file" multiple="" id="file-large-upload"></p>\n            </li>\n            <li  style="display:none"><a href="javascript:;" data-primitive="create_new_documents" title="Create new documents" ><span class="awf-access">Create new documents</span><i\n                    class="icon icon-awf-op-plus"></i></a></li>\n            <li  style="display:none"><a href="javascript:;" data-primitive="search" title="Search"><span class="awf-access">Search</span><i class="icon icon-awf-search"></i></a>\n            </li>\n            <li  style="display:none"><a href="javascript:;" data-primitive="change_view" title="Grid view"><span class="awf-access">Grid view</span><i\n                    class="icon icon-awf-grid-2x2"></i></a></li>\n        </ul>\n    </div>\n    <div class="content animated" id="large_main_content" data-primitive="large_main_content">\n        <ul class="content__sort-by">\n            <li><a href="javascript:;" title="name" id="sort_by_name" data-primitive="sort_by_name"><span>Name</span><i\n                    class="icon-awf-chevron-down"></i></a></li>\n            <li><a href="javascript:;" title="Last Modified" id="sort_by_date" data-primitive="sort_by_date"><span>Last Modified</span><i\n                    class="icon-awf-chevron-down"></i></a></li>\n        </ul>\n        <div class="content__section upload-progress" data-primitive="upload-progress">\n            <ul class="content__section__list" id="upload_list" data-primitive="upload_list"></ul>\n        </div>\n        <div class="content__section" data-primitive="collaboration">\n            <!--<h3>Collaboration</h3>-->\n            <ul class="content__section__list" id="collaboration_list" data-primitive="collaboration_list"></ul>\n        </div>\n        <div class="content__section" data-primitive="private">\n            <h3 class="content__section__title">Private</h3>\n            <ul class="content__section__list" id="private_list" data-primitive="private_list"></ul>\n        </div>\n        <div data-primitive="view_more" class="content__view-more">\n            <button type="button" class="primary-form-btn submit">Go to Box</button>\n        </div>\n        <div class="drag-tips" id="drag-tips" data-primitive="drag_tips">\n            <p class="drag-tips__img"><img src="images/boxIcons.png" alt="Click Browse to choose a file"></p>\n            <p class="drag-tips__title">Drop to upload to Box</p>\n            <p class="drag-tips__text">or click <i class="fa fa-upload"></i> to browse</p>\n        </div>\n    </div>\n    <div class="share-dialog animated"  data-primitive="share_dialog">\n        <div class="share-dialog__share-content">\n            <p class="share-dialog__share-content__desc">I\'d like to share this file with you on Box.</p>\n            <p class="share-dialog__share-content__filename" data-primitive="share_dialog_filename">{{filename}}</p>\n            <p class="share-dialog__share-content__tip">\n                <a href="javascript:;" class="share-dialog__share-content__tip__copy" tabindex="0">Click to copy this file link to your clipboard</a>\n            </p>\n        </div>\n        <div class="share-dialog__share-button">\n            <button href="javascript:;" class="tertiary-form-btn js-btn-share-cancel share-dialog__share-button__cancel" tabindex="0">Cancel</button>\n            <button type="submit" class="primary-form-btn js-btn-share-submit share-dialog__share-button__share">Share</button>\n        </div>\n    </div>\n    <div class="share-success">\n        <div class="share-success__content">\n            <p>\n                <i class="icon-awf-share"></i>\n            </p>\n            <div class="success-text">\n                Success!\n            </div>\n            <div class="inform-text">\n                Your link has been shared on your social status.\n            </div>\n            <button data-primitive="success_close" class="secondary-form-btn close share-success__close">Close</button>\n        </div>\n    </div>\n    <div class="share-dialog-overlay"></div>\n    <div class="footer" id="footer" data-primitive="footer">\n        <img src="images/copyright.png" data-primitive="logo" alt="Copyright">\n    </div>\n\n</div>',"box-medium-item.html":'<li class="content__section__list__item" data-primitive="item">\n    <p href="javascript:;" class="item-icon {{folder_type}}" data-primitive="type"><i class="{{icon}}"></i></p>\n    <div class="item-content {{type}}" attrId="{{id}}">\n        <h4>\n            <a href="javascript:;" data-primitive="name">{{name}}</a>\n        </h4>\n        <p >\n            {{#isFolder}}\n           <span class=\'float-left\' data-primitive="size">{{size}}</span><span class=\'float-right\' data-primitive="modified_at">{{modified_at}}</span>\n            {{/isFolder}}\n            {{^isFolder}}\n            <span class=\'float-left\' data-primitive="size">{{size}}</span> <span class=\'float-right\' data-primitive="modified_at">{{modified_at}}</span>\n            {{/isFolder}}\n        </p>\n    </div>\n</li>',"box-medium.html":'<div class="card box-medium" role="region" aria-label="box medium card">\n\n    <div class="file-sign-in" id="medium_sign_in" data-primitive="medium_sign_in" >\n        <p >We are currently working to integrate Files with the yourIBM single sign on.Until then, please sign in using the button below.</p>\n        <div class="medium_sign_in_svg">\n        <object type="image/svg+xml" data="images/signIn_medium.svg" class="indicator">Sorry , your browser doesn\'t support object element.</object>\n        </div>\n        <p data-primitive="more_btn" class="cta-btn">\n            <button type="button" class="flip-1" data-primitive="signin_cta">Sign In</button>\n        </p>\n\n    </div>\n\n    <div class="upload-overlay animated" id="upload-overlay" data-primitive="upload_overlay">\n        <div class="upload-overlay__content">\n            <p class="upload-overlay__img"></p>\n            <p  class="upload-overlay__text">Drag and drop your file here</p>\n            <p class="upload-overlay__href">\n                <a href="javascript:;" title="Click to browse for a file" data-primitive="trigger_upload">Or <span>browse</span> for a file</a>\n            <p class="upload-overlay__file" ><label for="file-medium-upload">Choose files</label> <input type="file"  id="file-medium-upload"></p>\n\n            </p>\n            <p class="upload-overlay__cta">\n                <button type="button" class="primary-form-btn" data-primitive="cancel_upload">Cancel</button>\n            </p>\n\n        </div>\n    </div>\n    <div class="animated upload-overlay upload-message" id="upload-message" data-primitive="upload_message">\n        <p class="upload-message__img"><i class="icon-awf-checkmark-circle-fill"></i> </p>\n        <p  class="upload-message__text">Success</p>\n        <p class="upload-message__text">\n            Here is your link:\n        </p>\n        <p class="upload-message__link">\n            <a href="javascript:;" title="Click to browser for a file" data-primitive="copy" >Click to copy the file\'s link to clipboard</a>\n        </p>\n        <p class="upload-message__cta">\n            <button type="button" class="primary-form-btn" data-primitive="close_upload">Close</button>\n        </p>\n    </div>\n    <div class="content" id="medium_main_content" data-primitive="medium_main_content">\n        <div class="content__section" data-primitive="collaboration">\n            <ul class="content__section__uploading-list" id="uploading_list" data-primitive="uploading_list"></ul>\n            <ul class="content__section__list" id="file_list" data-primitive="file_list"></ul>\n        </div>\n        <div class="content__cta">\n            <button type="button" id="upload_cta" class="flip-1" data-primitive="upload_cta">Upload</button>\n        </div>\n        <div class="content__overlay" id="content_overlay" data-primitive="content_overlay"></div>\n    </div>\n</div>\n',"box-uploading-item.html":'<li class="content__section__list__item" data-primitive="item" >\n    <a href="javascript:;" class="item-icon" data-primitive="type"><i class="icon-awf-file-text"></i></a>\n    <div class="item-content" >\n        <h4>\n            <a href="javascript:;" data-primitive="name" >{{name}}</a>\n        </h4>\n        <div class="upload-progress-bar">\n            <div data-primitive="size" class="upload-progress-bar__text">2.3MB/3.2MB</div><div data-primitive="progress_bar" class="upload-progress-bar__progress-bar"><div data-primitive="upload-progress-bar__bar" class="upload-progress-bar__bar"></div></div>\n        </div>\n    </div>\n</li>'},calendar:{"current-week-calendar.html":'<div class="cw-calendar-overlay">\n    <div class="cw-month">\n        <div class="cw-calendar">\n            <div class="cw-day-container">\n                <div class="cw-day"></div>\n                <div class="cw-day"></div>\n                <div class="cw-day"></div>\n                <div class="cw-day"></div>\n                <div class="cw-day"></div>\n                <div class="cw-day"></div>\n                <div class="cw-day"></div>\n            </div>\n        </div>\n    </div>\n</div>',"current-week-header.html":'{{#weeks}}\n<div class="calendar-header cw-header-container">\n    <div class="cw-month-name" role="heading">{{monthTitle}}</div>\n    <div class="cw-days" style="width: {{dayContainerWidth}}">\n        {{#days}}\n        <div class="cw-day-header-container">\n            <label class="cw-day-header {{dayClass}}">{{dayName}} <br> {{day}}</label>\n        </div>\n        {{/days}}\n    </div>\n</div>\n{{/weeks}}',"weekly-calendar-header.html":'<div class="nav-panel responsive">\n    <!--<button class="prev" role="button" aria-label="previous month"><i class="icon-awf-chevron-left"></i></button>-->\n    <div class="fixed-panel"><button class="today-btn" role="button" aria-label="today">Today</button></div>\n    <!--<button class="next"><i class="icon-awf-chevron-right" role="button" aria-label="next month"></i></button>-->\n</div>\n\n<div class="calendar-header wc-header">\n    <div class="nav-arrows">\n        <button class="prev" role="button" aria-label="previous month"><i class="icon-awf-chevron-left"></i></button>\n        <div class="arrow-today"><button class="today-btn" role="button" aria-label="today">Today</button></div>\n        <button class="next"><i class="icon-awf-chevron-right" role="button" aria-label="next month"></i></button>\n    </div>\n    <div class="months-container">\n        {{#months}}\n        <div class="header-month">\n            <div class="month-name {{suppressedMonth}}" role="columnHeader">{{shortName}}</div>\n            <div class="header-calendar">\n                {{#weeks}}\n                {{#visible}}\n                <div class="header-week" style="margin-left: {{marginLeft}}; width: {{width}}" role="columnheader"><label class="week-header">{{day}}</label></div>\n                {{/visible}}\n                {{/weeks}}\n            </div>\n        </div>\n        {{/months}}\n    </div>\n</div>',"weekly-calendar.html":'<div class="calendar-overlay">\n\t<div class="today-line" style="left: {{todayPosition}}; display: {{todayDisplay}}"><span class="today-head"></span></div>\n\t{{#months}}\n\t<div class="month">\n\t\t<div class="calendar">\t\n\t\t\t{{#weeks}}\n\t\t\t\t{{#visible}}\n\t\t\t\t<div class="week" style="margin-left: {{marginLeft}}; width: {{width}}"></div>\n\t\t\t\t{{/visible}}\n\t\t\t{{/weeks}}\n\t\t</div>\n\t</div>\n\t{{/months}}\t\n</div>'},carousel:{"carousel-backbone.html":'<div class="{{carouselContainerClass}}">\n\t<div id="{{carouselId}}" class="carousel-backbone" role="region" aria-label="ta-carousel">\n\t\t<div class="carousel-content" data-container="content" style="width: {{containerWidth}}%; left: {{position}}%">\n\t\t\t{{#slidesHtml}}\n\t\t\t\t{{{.}}}\n\t\t\t{{/slidesHtml}}\n\t\t</div>\n\t\t<div class="slidenav" data-primitive="point">\n\t\t\t<div class="carousel-angle">\n\t\t\t\t<button class=" -awf-link-inverted" data-direction="prev" title="Previous" aria-label="previous" tabindex="0"><i class="icon-awf-chevron-left"></i></button>\n\t\t\t</div>\n\t\t\t{{#carouselStyle}}\n\t\t\t<span tabindex="-1" class="unlimited"><span id="active-index">{{activeIndex}}</span> / {{numOfSlides}}</span>\n\t\t\t{{/carouselStyle}}\n\t\t\t{{^carouselStyle}}\n\t\t\t<ul data-primitive="pointers">\n\t\t\t\t{{#slides}}<li>\n\t\t\t\t\t<button data-slide="{{index}}" tabindex="-1" title="{{profile.name}}" aria-label="Navigate to {{profile.name}}{{index}}" role="button">\n\t\t\t\t\t\t{{profile.name}}\n\t\t\t\t\t</button>\n\t\t\t\t</li>{{/slides}}\n\t\t\t</ul>\n\t\t\t{{/carouselStyle}}\n\t\t\t<div class="carousel-angle">\n\t\t\t\t<button class=" -awf-link-inverted" data-direction="next" title="Next" aria-label="next" tabindex="0"><i class="icon-awf-chevron-right"></i></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',"carousel-minimal.html":'<div class="carousel-minimal" role="region"><div class="carousel-content" data-container="content"></div><div class="carousel-angle prev"><a data-primitive="prev" href="javascript:;" title="Previous" aria-label="Previous slide" role="button"><i class="icon-awf-chevron-left"></i><span>Previous button</span></a></div><div class="carousel-angle next"><a data-primitive="next" href="javascript:;" title="Next" aria-label="Next slide" role="button"><i class="icon-awf-chevron-right"></i><span>Next button</span></a></div></div>'},"coach-mark":{"coach-mark.html":'<div>\n\t<button class="bulb" data-primitive="bulb" title="Learn more about Places" data-i18n="[title]app.components.coach-mark.bulb;[aria-label]app.components.coach-mark.aria-label" aria-label="Coach Tips">\n\t\t<label class="access">bulb</label>\n\t\t<i class="icon-youribm-lightbulb"></i>\n\t</button>\n\t<div class="coach-mark" role="note" tabindex="1">\n\t    <div class="background" data-primitive="background"></div>\n\t    <button class="close" data-primitive="close"><i class="icon-awf-op-times-circle"></i><span class="access" data-i18n="awf.common.close">Close button</span></button>\n\t</div>\n</div>'},form:{"form-single-enter.html":'<form data-primitive="form" class="w3n-form">\n    <div class="elements" data-container="elements"></div>\n    <div style="display:none;">\n        <button type="submit">Hide Button</button>\n    </div>\n</form>',"form.html":'<form data-primitive="form" class="w3n-form">\n    <div data-container="hiddens"></div>\n    <div class="elements" data-container="elements"></div>\n    <div data-container="customs"></div>\n    <div class="buttons" data-container="buttons"></div>\n</form>'},"mgrhub-dropdown":{"mgrhub-dropdown.html":'<div>\n\t<ul class="tab-actions" role="tablist">\n\t\t{{#tabs}}\n\t\t<li {{#id}}id="{{id}}"{{/id}} {{#aria_controls}}aria-controls="{{aria_controls}}"{{/aria_controls}} role="tab" aria-label="{{label}}" aria-selected="false"><button data-index="{{index}}" data-target="{{target}}">{{label}}</button></li>\n\t\t{{/tabs}}\n\t</ul>\n</div>\n\n\n'},navtabs:{"navtabs.html":'{{#tabs}}\n\t<div data-navid="{{id}}" class="navtabs">{{name}}</div>\n{{/tabs}}'},popup:{"popup.html":'<div class="popup" role="tooltip" aria-label="popup">\n    <div class="popup-content"></div>\n</div>'},"profile-img":{"profile-img.html":'<a href="https://w3-connections.ibm.com/profiles/html/profileView.do?userid={{user_id}}" target="_blank"><img data-value="img" src="https://w3-connections.ibm.com/profiles/photo.do?userid={{user_id}}" alt="{{name}}" class="profile-img-{{profile_size}}"></a>'},report:{"report.html":'<div class="report-modal {{className}}">\n\t<div class="takeover-header js-card-titlebar awf-card__titlebar">\n\t\t{{#title}}\n\t\t\t<h2 class="takeover-title js-card-title awf-card__titlebar__title -color-alt -border-color-base">{{title}}</h2>\n\t\t{{/title}}\n\t\t<button class="close-button btn-control js-large-card-close awf-card__titlebar__close -awf-focus -awf-link-inverted"><em class="icon-awf-op-times"></em></button>\n\t</div>\n\t<div class="takeover-content">\n\t\t{{{content}}}\n\t</div>\n</div>'},"share-status":{"share-status.html":'<div class="share-status">\n    <div class="share-status__input">\n        <label class="share-status__input__label caption" data-i18n="app.components.sharecomponent.add-comment">Add comment (Optional)</label>\n        <textarea class="share-status__input__textarea -awf-focus -border-color-link" aria-label="Share Dialog Textarea"></textarea>\n    </div>\n    <!--Quote info-->\n    <div class="share-status__quote">\n        <p class="share-status__quote__title title-3"><em class="icon-awf-quote-double-left"></em></p>\n        <p class="share-status__quote__desc"></p>\n    </div>\n    <!--Call to actions-->\n    <div class="share-status__cta">\n        <button class="tertiary-form-btn js-btn-share-cancel" data-i18n="awf.common.cancel">Cancel</button>\n        <button type="submit" class="primary-form-btn js-btn-share-submit" data-i18n="awf.common.share">Share</button>\n    </div>\n</div><div class="share-dialog-overlay hide-overlap"></div>'},"slide-down":{"slide-down.html":'<div class="slide-content"></div>'},tabs:{"tabs.html":'<div class="tabs" data-component="tabs">\n\t<ul class="tab-actions" role="tablist" onkeydown="">\n\t\t{{#tabs}}\n\t\t<li id="{{tabKey}}" class="tab-list-item {{active}}" role="tab" aria-label="{{tabTitle}}" aria-selected="{{isSelected}}">\n\t\t\t{{#tabIndex}}<a class="tab-btn" data-index="{{tabKey}}" tabIndex="0" >{{tabTitle}}</a>{{/tabIndex}}\n\t\t\t{{^tabIndex}}<a class="tab-btn" data-index="{{tabKey}}" tabIndex="-1" >{{tabTitle}}</a>{{/tabIndex}}\n\t\t</li>\n\t\t{{/tabs}}\n\t</ul>\n</div>\n'},tooltip:{"business-card.html":'<div class="business-card">\n\t<div class="left-panel">\n\t\t<a>\n\t\t\t{{#avatar.avatar}}<img class=\'popup-avatar\' src=\'{{avatar.avatar}}\' alt=\'{{avatar.initials}}\' width="{{avatar.avatarsize}}" height="{{avatar.avatarsize}}"/>{{/avatar.avatar}}\n\t\t\t{{^avatar.avatar}}<span class=\'popup-avatar\'>{{avatar.initials}}</span>{{/avatar.avatar}}\n\t\t</a>\n\t\t<div class="chat-button-holder">\n\t\t\t<span class="sametime-status {{status}}">\n\t\t\t\t<span class="sametime-status-text">{{sametimestatus}}</span>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\t{{ #main }}\n\t<div class="right-panel">\n\t\t<h1><a class="name-link" href="http://w3.ibm.com/bluepages/profile.html?email={{ person.email }}" target=\'_blank\'>{{ person.name }}</a></h1>\n\t\t{{#person.bio}}\n\t\t<h2 class="ellipsis">{{ person.bio }}</h2>\n\t\t{{/person.bio}}\n\n\t\t<div class="contact-block mobile-view">\n\t\t\t<div class="dept">{{ person.org-title }}</div>\n\t\t\t<div class="city">{{ person.location }}</div>\n\t\t</div>\n\n\t\t<div class="contact-block">\n\t\t\t{{#person.office-phone }}\n\t\t\t<div class="phone">\n\t\t\t\t{{ person.office-phone }} (Office)\n\t\t\t</div>\n\t\t\t{{/person.office-phone}} {{#person.mobile-phone }}\n\t\t\t<div class="phone">\n\t\t\t\t{{ person.mobile-phone }} (Mobile)\n\t\t\t</div>\n\t\t\t{{/person.mobile-phone}}\n\n\t\t\t<div class="email">\n\t\t\t\t{{#person.email}}\n\t\t\t\t<a href="mailto:{{ person.email }}">{{ person.email }}</a> {{/person.email}}\n\t\t\t</div>\n\t\t\t<div class="notes-id">{{ person.notes-id }}</div>\n\t\t\t{{#person.assistant}}\n\t\t\t<div class="assistant">\n\t\t\t\tAssistant: <a href="http://w3.ibm.com/bluepages/profile.html?email={{person.assistant.email}}" target=\'_blank\'>{{ person.assistant.name }}</a>\n\t\t\t</div>\n\t\t\t{{/person.assistant}}\n\t\t</div>\n\t</div>\n\t{{/main}}\n</div>',"definition.html":"{{{displayText}}}"},"view-more-flip":{"view-more-flip-backbone.html":'<article class="view-more-flip-backbone" role="article"{{#itemWidth}} style="width: {{itemWidth}}%;"{{/itemWidth}} aria-label="{{ action_url }}">\n    <div class="view-content">\n        <p class="view-more-img">\n            <i class="{{ class }}" style="padding: {{ padding }}"></i>\n        </p>\n    </div>\n    <p data-primitive="action" class="view-more-action ">\n        <!--<a class="button outline awf-focus" href="javascript:;" data-primitive="action_btn">Would you like to see more?</a>-->\n        <button type="button" class="button outline" {{#action_url}} onclick="window.open(\'{{ action_url }}\')" {{/action_url}} data-primitive="action_btn" data-hover="{{ text_active }}">Would you like to see more?</button>\n    </p>\n    <!-- <p class="flipcards-not-available view-more-flip-sorry-box">Use the desktop experience for more features.</p> -->\n</article>',"view-more-flip.html":'<article role="article">\n    <div class="view-content"  data-primitive="content">\n        <p class="view-more-img" data-primitive="desc">\n            <i data-primitive="img"></i>\n        </p>\n    </div>\n    <p data-primitive="action" class="view-more-action ">\n        <!--<a class="button outline awf-focus" href="javascript:;" data-primitive="action_btn">Would you like to see more?</a>-->\n        <button type="button" class="button outline" data-primitive="action_btn">Would you like to see more?</button>\n    </p>\n    <!-- <p class="flipcards-not-available view-more-flip-sorry-box">Use the desktop experience for more features.</p> -->\n</article>\n'}},search:{"command-card-layout.html":'<div class="commands-list group -color-alt">\n\n\t{[ if (!data.no_card) { ]}<span class="commands-list__title" id="{{data.aria_id}}" data-i18n="app.cogs.{{data.type}}.label"></span>{[ } ]}\n \t{[ if (!data.no_card) { ]}<span class="commands-list__description" data-i18n="app.search.command.experience.{{data.exp}}.on"></span>{[ } ]}\n\n\t{[ if (data.no_card) { ]}<span class="commands-list__title" id="{{data.aria_id}}" data-i18n="app.search.command.no_card.label"></span>{[ } ]}\n \t{[ if (data.no_card) { ]}<span class="commands-list__description" data-i18n="app.search.command.no_card.on"></span>{[ } ]}\n\n</div>\n',"command-layout.html":'<div class="commands-list group -color-alt">\n\n\t<span class="commands-list__title" id="{{data.aria_id}}" data-i18n="app.search.command.{{data.example}}.label"></span>\n\t<span class="commands-list__example -color-link">[<span data-i18n="app.search.command.{{data.example}}.example"></span>]</span>\n\t<span class="commands-list__description" data-i18n="app.search.command.{{data.example}}.description"></span>\n\n</div>\n',"search-systems-layout.html":'<div class="js-search-systems search-systems awf-bucket" aria-label="Search In" role="region">\n\t<h2 class="js-bucket-label awf-bucket__label -border-color-base" data-i18n="app.search.systems.label"></h2>\n\t<ul class="js-bucket-items awf-bucket__items input__radios" role="radiogroup" aria-labelledby="radios">\n\t\t{{#systems}}\n\t\t\t<li class="search-systems-item">\n\t\t\t\t<input type="radio" name="searchSystems" value="{{id}}" id="search_{{id}}" {{#checked}}checked="true"{{/checked}}/>\n\t\t\t\t<label for="search_{{id}}" class="search-systems-item__label">\n\t\t\t\t\t<span class="search-systems-item__label__text">{{label}}</span>\n\t\t\t\t</label>\n\t\t\t</li>\n\t\t{{/systems}}\n\t</ul>\n\t<div class="search-systems__action search-systems__action--outer">\n\t\t<div class="search-systems__action--inner">\n\t\t\t<button title="Take me there" class="js-search-systems-button flip-2" href="#" tabindex="0">\n\t\t\t\t<span data-i18n="app.search.systems.search-button"></span><i class="icon-awf-chevron-right"/>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>'}};(function(){w3n.serviceModels={bp:{},ibmerNews:{},sametime:{},TalentProfile:{},TimeInOut:{},TimeInOutApiary:{},up:{},minipulse:{},wsf:{},community:{},whatsnew:{},tips:{},bluepages:{}};function createExtension(prototype){return{identity_service:true,addSupportedServiceKey:function(opts){if(opts&&opts.supportedServiceKey)this.supportedServiceKey=opts.supportedServiceKey;else if(this instanceof Backbone.Model&&this.collection)this.supportedServiceKey=this.collection.supportedServiceKey;else throw new Error("supported service key is required for an SSO model/collection");
},fetch:function(opts){opts=opts||{};this.trigger("fetch",opts);if(opts.skipSSO)return this.origFetch.apply(this,opts);opts.identity_service=true;opts.errorOptions={buttonTitle:"Sign In",buttonFunction:function(params){this.fetch(_.extend({},_.pick(params,["timeout"]),{skipSSO:true,uncache:true}))}.bind(this)};this.errorOptions=opts.errorOptions;if(!opts.service_index)opts.service_index=opts.supportedServiceKey||this.supportedServiceKey;return prototype.fetch.call(this,opts)},save:function(opts){opts=opts||{};this.trigger("change",opts);if(opts.skipSSO)return this.origSave.apply(this,opts);opts.identity_service=true;opts.errorOptions={buttonTitle:"Sign In",buttonFunction:function(params){this.save(_.extend({},_.pick(params,["timeout"]),{skipSSO:true,uncache:true}))}.bind(this)};this.errorOptions=opts.errorOptions;if(!opts.service_index)opts.service_index=opts.supportedServiceKey||this.supportedServiceKey;return prototype.save.call(this,null,opts)},initialize:function(attrs,opts){prototype.initialize.apply(this,arguments);if(!this.supportedServiceKey){this.addSupportedServiceKey(opts)}this.origFetch=function(){var args=Array.prototype.slice.call(arguments);var fetchOpts=_.omit(args[0],"service_index");args[0]=_.extend({dataType:"json"},fetchOpts,{headers:_.extend({Accept:"application/json"},fetchOpts.headers||{})});return prototype.fetch.apply(this,args)}.bind(this);this.cacheFetch("origFetch");this.origSave=function(){var args=Array.prototype.slice.call(arguments);var saveOpts=_.omit(args[0],"service_index");args[0]=_.extend({dataType:"json"},saveOpts,{headers:_.extend({Accept:"application/json"},saveOpts.headers||{})});return prototype.save.apply(this,args)}.bind(this)}}}var Model=app.base.models.BaseModel.extend(createExtension(app.base.models.BaseModel.prototype));var Collection=app.base.collections.BaseCollection.extend(createExtension(app.base.collections.BaseCollection.prototype));w3n.serviceModels.sso={Model:Model,Collection:Collection}})();(function(){var _DEFAULT_PROFILE_BASE64="/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCABzAHMDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD75/4qb/qJ/wDkSj/ipv8AqJ/+RK3f+Ex0z/nhdf8AfK//ABVH/CY6Z/zwuv8Avlf/AIqvq/aVv+fSPkvZ0f8An4YX/FTf9RP/AMiU7/ipf+on/wCRK2x4w0w/8sLn/vlf/iqX/hL9N/54XP8A3yv/AMVR7Wt/z6Q1Tpf8/DEH/CSd/wC0v/IlOX/hI88/2l/5Era/4S3Tf+eFz/3yv/xVKPFenH/ljc/98r/jU+0rf8+ilTpf8/DMj/t7Pzfb+vffVhP7Yz832zr33VeXxNYOeIbjr/dX/GpRr1mx4im/If41jKdXrTNYwh/OVo/7SwN32n8d1WI/tv8AF5/45qUatbN0ST8h/jUi6hC3RX/If41hKU/5TdRj0Ykfn5GfM/Wpl398/jQtzGx4DU/zAx4BrCTfY1Q6iiipGFFFFAGF/wAIdpn/AD3uv++l/wDiaP8AhDtM/wCe91/30v8A8TWF/wAVN/1E/wDyJQP+El7/ANp/+RK9j2db/n6jyvaUv+fZu/8ACIaYP+W9z/30v/xNL/wiGm/897n/AL6X/wCJrD/4qX/qJ/8AkSlH/CSY/wCYl/5EpOnW/wCfpSnS/wCfZuf8Ilpv/Pe5/wC+l/8AiaUeFNOH/La5/wC+l/wrEH/CR9/7S/8AIlOX/hIc8/2j/wCP0nTrf8/SlOl/z7N0eGrBTxLP1/vL/hUg0GzU8STfmP8ACsVP7dyN32/8d9WU/tf+L7Z+O6sZQqreoaxlDpA1RpNsvR5PzH+FSLp8K9Gf8x/hWcn9o8bvtP47qsR/bMHd5345rCUZ/wAxtFx6IvLbRqeC1P8ALCngmq0fn558z8c1Mu/vn8awkn3NUS0UUVIwooooAwv+Ex0z/nhdf98r/wDFUv8Awl+m/wDPC5/75X/4qk/4Q/TP+e91/wB9L/8AE0v/AAiGm/8APe5/76X/AOJr0P8AYvM4f9r8gHi7TT/ywuf++V/+Kpf+Et03/nhc/wDfK/8AxVIPCOmj/lvc/wDfS/8AxNL/AMIlpv8Az2uf++l/wpf7H5lf7V5C/wDCWad/zxuf++V/xoHivTiceTc/98r/AI0f8Inp3/Pa5/76X/CgeFdOByJrj/vpf8KX+yeY19Z8iRfEli54in6/3R/jUo120Y8RzfkP8ajXw3YqeJZ+v94f4VINCtF6STfmP8Kzf1bpc0XtupIurWzYwknPsP8AGpF1CFgcK/5D/Go10m2Xo8nHuP8ACpF0+FRwz/mP8Kzfsuha5+pItzGx4DU/zAx4Bpi20angtT/LCngmsny9C1fqOooopDCiiigDhh/wkvf+0/8AyJS/8VL/ANRP/wAiVuf8Jfpv/PC5/wC+V/8AiqB4u00/8sLn/vlf/iq9d1a3/PpHlqnS/wCfhi/8VH/1Ev8AyJSj/hIsf8xL/wAiVtDxbpx/5YXP/fK/40v/AAlmnf8APG5/75X/ABpe0rf8+iuSl/z8MX/iov8AqI/+RKev/CQZGf7Q/wDH61x4r04/8sbn/vlf8acPFGnn/ljcf98r/jS9pV/59lqFP+czV/tzPP27r331YT+1uN32v8d1XR4jsWPEU/X+6P8AGpBrlo3SOb8h/jWMp1OsDSMYdJFZP7RwN32n8d1WI/tn8XnfjmpV1W3bokn5D/GpFv4WHCv+Q/xrGUpfymyS7jU8/PPmfrU67++aRblCeA1P3hjwDWEm+xoh1FFFSMKKKKAMP/hENN/573P/AH0v/wATQPCOmj/lvc/99L/8TWGP+Ekzz/af/kSnf8VH/wBRL/yJXrezrf8AP08xTpf8+zbHhPTh/wAtrn/vpf8ACl/4RPTv+e1z/wB9L/hWL/xUX/UR/wDIlA/4SLP/ADEf/H6Xs63/AD9KU6X/AD7NoeFdOH/La4/76X/CnDwvp4/5bXH/AH0v+FYw/wCEg7/2h/4/Sj+38/8AMQ/8fpOnV/5+FqVP+Q2x4csVPEs/X+8P8KkGh2i9JJvzH+FY6f23n5vt3Xvvqyv9q9/tf47qylCot5mkZQ6RNMaVbr0eT8x/hUi2EKjhn/Mf4Vnp/aHf7R/49ViP7X/F5345rCSl/MaprsXFtkB4LU/YFPBNV08/PO/9amXf3zWMk+5oiSiiipGFFFFAGJ/wlum/88Ln/vlf/iqB4s04/wDLC5/75X/Gj/hEtN/573P/AH0v/wATR/wienD/AJbXP/fS/wCFd/8Asfmcf+0+Qv8Awlmnf88bn/vlf8aUeKtPP/LG5/75X/Gk/wCET07/AJ7XP/fS/wCFKPCunj/ltcf99L/hS/2TzH/tHkL/AMJRp/8AzxuP++V/xoHiewJx5Nx/3yv+NH/CL6f/AM9rj/vpf8KB4YsAc+dcf99L/hSf1XzKXt/IkXxFZOeIp+v90f41INbtG6Ry/kP8ajXw7ZIeJZ+v94f4VINEtF6SS/mP8Kzf1fpcte16ki6pbtjCSc+w/wAakW+hYcK/5CoxpduOjyfmP8KkWxhUcM/5is37LoWufqPW5QngNT94Y8A0xbZAeC1P2BTwTWbt0KV+o6iiikMKKKKAOJH/AAkff+0v/IlO/wCKi/6iP/kStr/hLNO/543P/fK/40f8JXp3/PG5/wC+V/xr1XUrf8+jzlCn/wA/DGH/AAkPf+0f/H6cP+Egx/zEP/H62B4p08/8sbj/AL5X/Gl/4SjT/wDnjcf98r/jS9pV/wCfZShT/nMf/if/APUQ/wDH6VP7e3c/b8f8DrX/AOEo0/8A543H/fK/40o8TWBOBDcf98r/AI0vaVf+fZahD+cz0/trPzfbevffVhP7U/i+1fjuq4PENkx4in6/3R/jUg1q1Y8Ry/kP8aylOp/IXGMV9orp9vxz9o/8eqZPtffzv1qUanA3RJPyH+NSLfQt0V/yFYylL+U1SXcann553/rUy7++aRblCeA1P3hjwDWMm+xaHUUUVIwooooA85pR1oor6ZngoetOooqWaoB1qVKKKlmiJ4+v41bi6iiiuaZvAtx9qsR9/rRRXJM3iWI+o+tWE7UUVyzNYk1FFFZlBRRRQB//2Q==";app.serviceModels.Avatar=app.base.models.BaseModel.extend({name:"Avatar",defaults:{avatarsize:75,url:null},initialize:function(options){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);if(options){this.name=options.name;this.email=options.email}this.url="https://w3-services1.w3-969.ibm.com/myw3/unified-profile-photo/v1/image/"+this.id},fetch:function(){return this.userHasPhoto().then(function(hasPhoto,service){if(hasPhoto){this.set({avatar:this.url})}else if(this.attributes.initials===""){this.set({avatar:"images/profile-icon.svg"})}else{this.set({avatar:false})}this.trigger("sync")}.bind(this))},userHasPhoto:function(){if(this.oldService){return this.convertImgToBase64("image/jpeg")}else{var deferred=$.Deferred();var xhr=new XMLHttpRequest;var url=this.removeSizeFromUrl();xhr.open("GET",url);xhr.responseType="arraybuffer";xhr.onload=function(e){var arraybuffer=xhr.response;var rawResponse=xhr.getResponseHeader("Content-Type");if(rawResponse){deferred.resolve(true)}else{deferred.resolve(false)}};xhr.onerror=function(e){deferred.resolve(false)};xhr.ontimeout=function(e){deferred.resolve(false)};xhr.send();return deferred.promise()}},removeSizeFromUrl:function(){return this.url.split("?s=")[0]},convertImgToBase64:function(outputFormat){var deferred=$.Deferred();var xhr=new XMLHttpRequest;var url=this.removeSizeFromUrl();xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function(e){if(xhr.status===200){var uInt8Array=new Uint8Array(xhr.response);var i=uInt8Array.length;var binaryString=new Array(i);while(i--){binaryString[i]=String.fromCharCode(uInt8Array[i])}var data=binaryString.join("");var base64=window.btoa(data);deferred.resolve(base64.indexOf(_DEFAULT_PROFILE_BASE64)===-1)}};xhr.send();return deferred.promise()},getSametimeStatus:function(email){email=email||this.email;var status=_.find(w3n.serviceModels.sametime.Status.cache,{username:email});if(!status){var sametimeStatus=new w3n.serviceModels.sametime.Status({emails:email});sametimeStatus.startLongPolling()}}})})();(function(){var bp={api:"//w3-services1.w3-969.ibm.com/myw3/unified-profile/v1/search/user"};function def_adapter(data){return data}w3n.serviceModels.bluepages.bp_prod=app.base.models.BaseModel.extend({name:"Blue Pages Search",limit:20,url:function(){var email_key=localStorage.getItem("w3n.user.email");return bp.api+awf.util.urlParams(_.extend(this.options,{query:this.query,userId:awf.user.is_authenticated?awf.user.info.cnum:localStorage.getItem("w3n.user.uid")?localStorage.getItem("w3n.user.uid"):""}))},initialize:function(options){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);options=options||{};this.queries_limitiion=options.limit||this.limit;this.queries=[];this.options={searchConfig:options.searchConfig||"optimized_search",rows:options.rows||50,timeout:options.timeout||2e4,threshold:options.threshold||0};this.adapter=options.adapter||def_adapter;var self=this,origFetch=this.fetch.bind(this);this.fetch=function(params){if(!params.uncache)params.uncache=true;this.query=params.query;return origFetch(params)}.bind(this)},search:function(params){if(!params||!params.query){throw new Error("Please provide valid params to search on bluepages.")}this.current_query=params.query;if(this.get(params.query)){var deferred=$.Deferred();this.trigger("get-query",params.query);this.trigger("get-results",this.get(params.query));this.trigger("get-matches");deferred.resolve(this.get(params.query));return deferred}else{return this.fetch(params).done(function(response){if(response.results&&response.results.length!==0){if(this.current_query==this.query){var collection=this.operateQueries(response);this.trigger("get-query",this.query);this.trigger("get-results",collection);this.trigger("get-matches")}}else{this.trigger("get-query",this.query);this.trigger("no-results")}}.bind(this)).fail(function(err){this.trigger("failed-query",{err:err,query:this.query})}.bind(this))}},emptyQuery:function(){this.query=null;this.current_query=null;this.trigger("empty-query")},operateQueries:function(response){if(this.queries.length>=this.queries_limitiion){this.unset(_.head(this.queries));_.drop(this.queries)}return this.addQuery(response)},addQuery:function(response){var collection=new app.base.collections.BaseCollection;collection.set(this.adapter(response.results));this.set("results_matches_"+this.query,response.matches);this.set(this.query,collection);this.queries.push(this.query);return collection}})})();(function(){var DEFAULTFIELDSET=["bio","org-title","location","office-phone","mobile-phone","email","notes-id","adminEmail","adminName","uid","ismanager","employeetype","hrcompanycode","mail","hrpreferredname","hrfirstname","hrlastname","workloc","manager","glteamlead","infotelephonenumber","hremployeetype","callupname","secretary"];w3n.serviceModels.bp.FunctionalTeam=app.base.models.BaseModel.extend({name:"Blue Pages Functional Team",initialize:function(options){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);this.fields=DEFAULTFIELDSET.join("&");if(options){if(options.id&&w3n.utils.data.getDnKey(options.id)){this.id=options.id}else{console.log("BluePages FunctionalTeam service requires a stringified distinguished name (dn) id")}if(options.fields){this.fields=options.fields.join("&")}}},url:function(){return w3n.connections.proxy+"/BpHttpApisv3/slaphapi?ibmperson/(|(&(manager="+this.id+")(!(glteamlead=*))(!(employeetype=N))(!(employeetype=Q)))"+"(&(glteamlead="+this.id+")(!(employeetype=N))(!(employeetype=Q))))/.list/byjson?"+this.fields},parse:function(response){var data={};if(response&&response.search&&response.search.entry&&response.search.entry.length){$.each(response.search.entry,function(){var attributes=w3n.utils.data.parseAttributeArray(this.attribute);data[w3n.utils.data.getDnKey(this.dn).value]={dn:this.dn,attributes:attributes}});data=_.map(data,"attributes")}return data}})})();(function(){w3n.serviceModels.bp.PrivateProfile=app.base.models.BaseModel.extend({name:"Blue Pages Private Profile",hoardCache:true,initialize:function(options){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);this.fields=options.fields.join("&")},url:function(){return w3n.connections.proxy+"/BpHttpApisv3/slaphapi?ibmperson/(uid="+this.id+")/.list/byjson?"+this.fields},parse:function(response){if(response.search&&response.search.entry){if(response.search.entry.length){return response.search.entry[0].attribute.reduce(function(acc,val){acc[val.name]=val.value[0];return acc},{})}else{return{}}}else{return response}}})})();(function(){w3n.serviceModels.bp.WorkLocation=app.base.models.BaseModel.extend({name:"Blue Pages Work Location",url:function(){return w3n.connections.proxy+"/BpHttpApisv3/slaphapi?ibmworklocation/(workloc="+this.id+")/.list/byjson"},parse:function(response){if(!response||!response.search||!response.search.entry||!response.search.entry.length)return{};return response.search.entry[0].attribute.reduce(function(acc,val){acc[val.name]=val.value[0];return acc},{})}})})();(function(){w3n.serviceModels.CMSModel=app.base.models.BaseModel.extend({name:"CMS",initialize:function(attrs){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);if(attrs&&!attrs.id)console.log("a CMS Model should be given an id")},url:function(){return app.utils.urlParam("preview")?w3n.connections.proxy+"/youribm/cms/v1/doc/draft/"+this.id:w3n.connections.proxy+"/youribm/cms/v1/doc/"+this.id},parse:function(data){return data.content}});w3n.serviceModels.CMSCollection=app.base.collections.BaseCollection.extend({initialize:function(models,opts){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);if(opts&&opts.id)this.id=opts.id;else console.log("a CMS Collection should be given an id")},url:function(){return app.utils.urlParam("preview")?w3n.connections.proxy+"/youribm/cms/v1/doc/draft/"+this.id:w3n.connections.proxy+"/youribm/cms/v1/doc/"+this.id},parse:function(data){console.log("parsing data for ",this.id,": ",data);return data.content}})})();(function(){var parameters="?results=500&start=0&sortKey={{key}}&sortOrder={{order}}",apis={owned:"/communities/service/atom/catalog/owned"+parameters,my_communities:"/communities/service/atom/catalog/my"+parameters,followed:"/communities/service/atom/catalog/followed"+parameters,invites:"/communities/service/atom/catalog/invites"+parameters,accept:"/communities/service/atom/forms/community/members?communityUuid={{community_id}}",reject:"/communities/service/atom/community/invites?communityUuid={{community_id}}&userid={{user_id}}",sub_entry:"/common/opensocial/basic/rest/activitystreams/urn:lsid:lconn.ibm.com:communities.community:{{community_id}}/@all/@all?rollup=true&shortStrings=true"},proxy="/proxy",jsonpCallback="callback",category="";var default_data_order="desc",default_data_sortby="update_date",default_data_api="my_communities",default_request_params={key:default_data_sortby,order:default_data_order,api:default_data_api,all:true};w3n.serviceModels.community.item=app.base.models.BaseModel.extend({});w3n.serviceModels.community.collectionsRequester=app.base.collections.BaseCollection.extend({name:"Community",model:w3n.serviceModels.community.item,buildUrl:function(params){var callback=params.callback?"&"+params.callback:"",base_url=Mustache.render(this.api,params),current_api=proxy+base_url+callback;this.url=current_api},url:"",api:"",initialize:function(models,options){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var self=this;if(options&&options.api){self.api=apis[options.api]}var origFetch=this.fetch;this.fetch=function(params){if(!params){params={}}params=_.merge(params,default_request_params);if(!params.dataType){params.dataType="xml"}this.buildUrl(params);var current_context={params:params,community:params.community||{},community_id:params.community_id||{}};var common_params={method:params.method,data:params.data||"",dataType:params.dataType||"text",context:current_context,contentType:params.contentType,uncache:params.uncache};var deferred=$.Deferred();if(params.success){deferred.done(params.success)}if(params.error){deferred.fail(params.error);common_params.fail=params.error}if(params.always){deferred.always(params.always)}if(!w3n.connections.authentication.enable_backup&&w3n.login_mode!=="manual-basic-auth"){common_params.identity_service=true}var SESSION_STORAGE_KEY="IDENTITY-MANAGER-SUPPORTED-SERVICE-"+awf.user.identity_manager.SupportedServices.CONNECTIONS;var cookie=window.sessionStorage.getItem(SESSION_STORAGE_KEY);var expirationDateString=cookie?JSON.parse(cookie).date:null;if(!expirationDateString||this.hasAuthExpired(expirationDateString)){common_params.uncache=true}return origFetch.call(this,common_params)}.bind(this);this.fetched=false},hasAuthExpired:function(expirationDateString){if(expirationDateString){var expirationDate=new Date(expirationDateString);if(expirationDate<new Date){return true}}return false},parse:function(original_data){return parseResponse(original_data)}});function parseResponse(original_data){if(original_data){var entryList=null;if(w3n.utils.browser.userAgent.chrome||w3n.utils.browser.userAgent.safari){entryList=original_data.getElementsByTagName("entry")}else{entryList=original_data.getElementsByTagName("atom:entry")}return entryList}}})();(function(){var service_name="status_updates",apis=w3n.connections.apis.status;w3n.serviceModels[service_name]=w3n.serviceModels[service_name]||{};var pickId=function(id){var new_id=null;new_id=id.substring(id.lastIndexOf(":")+1);return new_id};var def_params={timeout:1e4,identity_service:false,cache:false};var wrapError=function(model,options){var error=options.error;options.error=function(resp){if(error)error.call(options.context,model,resp,options);model.trigger("error",model,resp,options)}};var PPD=app.base.models.BaseModel.extend({url:"",ajax_params:{save:{dataType:"json",contentType:"application/json"},destroy:{dataType:"json",contentType:"application/json"}},initialize:function(){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);this.origSave=app.base.models.BaseModel.prototype.save.bind(this);this.origDestroy=app.base.models.BaseModel.prototype.destroy.bind(this)},save:function(options){options=options||{};_.extend(options,def_params);options.url=_.template(options.api||w3n.connections.proxy+this.apis.save)(options);options=_.extend({validate:true,parse:true},this.ajax_params.save,options);if(!w3n.connections.authentication.enable_backup&&w3n.login_mode!=="manual-basic-auth"){options.identity_service=true}var model=this;var wait=options.wait;var success=options.success;var attributes=this.attributes;options.success=function(resp){model.attributes=attributes;var serverAttrs=options.parse?model.parse(resp,options):resp;if(serverAttrs&&!model.set(serverAttrs,options))return false;if(success)success.call(options.context,model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);var method=!options.isPut?"create":"update";return this.sync(method,this,options)},destroy:function(options){options=options||{};_.extend(options,def_params);options.url=_.template(options.api||w3n.connections.proxy+this.apis.destroy)(options);options=_.extend({parse:true},this.ajax_params.destroy,options);if(!w3n.connections.authentication.enable_backup&&w3n.login_mode!=="manual-basic-auth"){options.identity_service=true}var model=this;var success=options.success;var attributes=this.attributes;options.success=function(resp){model.attributes=attributes;var serverAttrs=options.parse?model.parseDestroy(resp,options):resp;if(serverAttrs&&!model.set(serverAttrs,options))return false;if(success)success.call(options.context,model,resp,options);model.trigger("destroy",model,resp,options)};wrapError(this,options);var xhr=this.sync("delete",this,options);return xhr},parse:function(resp,options){return resp},parseDestroy:function(resp,options){return resp}});w3n.serviceModels[service_name].list=app.base.collections.BaseCollection.extend({model:app.base.models.BaseModel,url:w3n.connections.proxy+apis.getAll,fail_completely:false,buildUrl:function(params){this.url=_.template(w3n.connections.proxy+apis[this.api])(params)},initialize:function(options){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var origFetch=this.fetch.bind(this);this.fetch=function(options){options=options||{};_.extend(options,def_params);if(!options.uncache)options.uncache=true;this.api=_.camelCase(options.api||"get all");this.buildUrl(options);if(!w3n.connections.authentication.enable_backup&&w3n.login_mode!=="manual-basic-auth"){options.identity_service=true}return origFetch(options)}.bind(this);this.on("fail-completely",this.setFail);this.fetched=false},setFail:function(value){this.fail_completely=value||true;this.trigger("failure-status-changed")},parse:function(resp){return w3n.cogs[service_name].adapters.list(resp.list)}});w3n.serviceModels[service_name].comments=app.base.collections.BaseCollection.extend({model:app.base.models.BaseModel,url:w3n.connections.proxy+apis.getComments,ajax_params:{dataType:"json",contentType:"application/json"},initialize:function(options){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var origFetch=this.fetch.bind(this);this.fetch=function(options){options=options||{};_.extend(options,def_params);if(!options.uncache)options.uncache=true;this.url=_.template(options.api||w3n.connections.proxy+apis.getComments)(options);options=_.extend({},this.ajax_params,options);if(!w3n.connections.authentication.enable_backup&&w3n.login_mode!=="manual-basic-auth"){options.identity_service=true}return origFetch(options)}.bind(this);this.fetched=false},parse:function(resp){return w3n.cogs[service_name].adapters.comments(resp.list)}});w3n.serviceModels[service_name].postStatus=app.base.models.BaseModel.extend({url:w3n.connections.proxy+apis.postToEveryone,initialize:function(){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);this.origSave=app.base.models.BaseModel.prototype.save.bind(this)},save:function(options){options=options||{};_.extend(options,def_params);this.url=_.template(options.api||w3n.connections.proxy+apis.postToEveryone)(options);options=_.extend({validate:true,parse:true,dataType:"json",contentType:"application/json; charset=UTF-8"},options);var model=this;var wait=options.wait;var success=options.success;var attributes=this.attributes;options.success=function(resp){model.attributes=attributes;var serverAttrs=options.parse?model.parse(resp,options):resp;if(serverAttrs&&!model.set(serverAttrs,options))return false;if(success)success.call(options.context,model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);if(!w3n.connections.authentication.enable_backup&&w3n.login_mode!=="manual-basic-auth"){options.identity_service=true}var method=!options.isPut?"create":"update";return this.sync(method,this,options)},parse:function(resp){var new_entry={};new_entry[pickId(resp.entry.id)]=resp.entry;return new_entry}});w3n.serviceModels[service_name].toggleLikeStatus=PPD.extend({apis:{save:apis.likeThis,destroy:apis.unLikeThis},ajax_params:{save:{dataType:"json",contentType:"application/json"},destroy:{contentType:"application/x-www-form-urlencoded"}},parse:function(resp,options){var new_entry={};new_entry[options.entryID]=_.extend({},resp.entry,{is_like:true});return new_entry},parseDestroy:function(resp,options){var new_entry={};new_entry[options.entryID]={entry:resp.entry,is_like:false};return new_entry}});w3n.serviceModels[service_name].toggleLikeComment=PPD.extend({apis:{save:apis.likeComment,destroy:apis.unlikeComment},parse:function(resp,options){var new_entry={};new_entry[options.commentID]=_.extend({},resp.entry,{is_like:true});return new_entry},parseDestroy:function(resp,options){var new_entry={};new_entry[options.commentID]={entry:resp.entry,is_like:false};return new_entry}});w3n.serviceModels[service_name].manageComment=PPD.extend({apis:{save:apis.postAComment,destroy:apis.delComment},parse:function(resp,options){var new_entry={};new_entry[options.entryID+":"+pickId(resp.entry.id)]=resp.entry;return new_entry},parseDestroy:function(resp,options){var new_entry={};new_entry[options.entryID+":"+options.commentID]=false;return new_entry}})})();(function(){w3n.serviceModels.TeamAtAGlance={};var model=w3n.serviceModels.TeamAtAGlance.Model=w3n.serviceModels.sso.Model.extend({idAttribute:"RCNUM",supportedServiceKey:"tp",initialize:function(){w3n.serviceModels.sso.Model.prototype.initialize.apply(this,arguments);var origFetch=this.fetch;this.fetch=function(opts){return origFetch.call(this,_.extend({},opts,{timeout:3e4}))}.bind(this)},url:function(){var testglance=app.utils.urlParam("testglance");if(testglance){return"data/json/team-at-a-glance.json"}else{return w3n.connections.proxy+"/TalentPlayBookService/rest/dataForYourTeamAtGlance"}},parse:function(data){var reverse=function(s){for(var i=s.length-1,o="";i>=0;o+=s[i--]){}return o};for(var i=0;i<data.data.length;i++){data.data[i].initials=reverse(w3n.utils.getInitials(data.data[i].name))}return data}})})();(function(){var urlTemplate="//w3-workplace.ibm.com/w3restsvc/usercontent/{{applicationkey}}/json/email/{{email}}/applicationid/66/section/0/texttype/banner_start,banner_end,description,theme,icon,description,enable_on_prod,banner_title/callback/{{callback}}",applicationkey="760cb30ad578f91fa977f21dffe76ff4",jsonpCallback="ecmBannerCallback",anonymous_email="anonymous@us.ibm.com",probable_email=app.probable_email;app.serviceModels.banners=app.serviceModels.banners||{};app.serviceModels.banners.ecm=app.base.collections.BaseCollection.extend({buildUrl:function(email){this.url=_.template(urlTemplate)({email:email||anonymous_email,callback:jsonpCallback,applicationkey:applicationkey})},initialize:function(){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var origFetch=this.fetch.bind(this);this.fetch=function(params){var dfr=$.Deferred();params=params||{};if(!params.dataType){params.dataType="jsonp"}if(!params.jsonpCallback){params.jsonpCallback=jsonpCallback}awf.user.authentication.done(function(is_authenticated){if(is_authenticated){this.buildUrl(awf.user.info.email)}else{if(probable_email){this.buildUrl(probable_email)}else{this.buildUrl(anonymous_email)}}}.bind(this)).always(function(){origFetch(params).done(dfr.resolve).fail(dfr.reject)});return dfr}.bind(this);this.fetched=false},parse:function(res){return[_.sortBy(_.map(this.filter(res),function(obj){return{start:_.get(obj,"contentByLang[0].additionalText.banner_start")+" EDT",end:_.get(obj,"contentByLang[0].additionalText.banner_end")+" EDT",title:_.get(obj,"contentByLang[0].additionalText.banner_title"),description:_.get(obj,"contentByLang[0].additionalText.description"),theme:_.get(obj,"contentByLang[0].additionalText.theme"),icon:_.get(obj,"contentByLang[0].additionalText.icon"),priority:_.get(obj,"contentByLang[0].priority")}}),"priority")[0]]},filter:function(json){return _.filter(json,function(obj){var env_check=true,time_check=true,enable_on_prod=_.get(obj,"contentByLang[0].additionalText.enable_on_prod"),start=_.get(obj,"contentByLang[0].additionalText.banner_start")+" EDT",end=_.get(obj,"contentByLang[0].additionalText.banner_end")+" EDT";if(w3n.env.is_live){env_check=enable_on_prod.toLowerCase()==="no"?false:true}time_check=this.isActive(start,end);return env_check&&time_check}.bind(this))},isActive:function(start,end){var dtmNow=new Date,dtmStart=new Date(start),dtmEnd=new Date(end);return dtmStart<=dtmNow&&dtmNow<dtmEnd}})})();(function(){var url="data/json/banner-notifications.json";app.serviceModels.banners=app.serviceModels.banners||{};app.serviceModels.banners.json=app.base.collections.BaseCollection.extend({url:url,initialize:function(){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments)},parse:function(res){return _.filter(res,function(obj){return this.isActive(obj.start,obj.end)}.bind(this))},isActive:function(start,end){var dtmNow=new Date,dtmStart=new Date(start),dtmEnd=new Date(end);return dtmStart<=dtmNow&&dtmNow<dtmEnd}})})();(function(){var testmegamenumh=app.utils.urlParam("testmegamenumh");var testmegamenuih=app.utils.urlParam("testmegamenuih");var srvmegamenuih=app.utils.urlParam("srvmegamenuih");var urlTemplate_mh="//w3-workplace.ibm.com/w3restsvc/usercontent"+"/{{applicationkey}}"+"/json/email/{{email}}"+"/applicationid/25"+"/section/27,28,29,30,31,32,33,34,36,37"+"/maxcount/1000"+"/callback/{{callback}}",applicationkey_mh="6127839ee7627460c4189e36fc6b1b01",jsonpCallback_mh="ecmMegaMenuCallback",anonymous_email_mh="anonymous@us.ibm.com",email_key_mh="w3n.user.email",probable_email_mh=localStorage.getItem(email_key_mh);var urlTemplate_ih="//w3-workplace.ibm.com/w3restsvc/usercontent"+"/{{applicationkey}}"+"/json/email/{{email}}"+"/applicationid/25"+"/section/127,128,129,130,131,132,133,134,136,137"+"/maxcount/1000"+"/callback/{{callback}}",applicationkey_ih="6127839ee7627460c4189e36fc6b1b01",jsonpCallback_ih="ecmMegaMenuCallback",anonymous_email_ih="anonymous@us.ibm.com",email_key_ih="w3n.user.email",probable_email_ih=localStorage.getItem(email_key_ih);app.serviceModels.megaMenus=app.serviceModels.megaMenus||{};app.serviceModels.megaMenus.ECMmh=app.base.collections.BaseCollection.extend({buildUrl:function(email){this.url=_.template(urlTemplate_mh)({email:email||anonymous_email_mh,callback:jsonpCallback_mh,applicationkey:applicationkey_mh});console.log("Parameter testmegamenumh "+testmegamenumh+" URL megaMenu manager hub "+this.url)},initialize:function(){console.log("Initialize collection megaMenu for manager hub");app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);if(!testmegamenumh){var origFetch=this.fetch.bind(this);this.fetch=function(params){var def=$.Deferred();if(!params){params={}}if(!params.dataType){params.dataType="jsonp"}if(!params.contentType){params.contentType="appliction/json"}if(!params.jsonpCallback){params.jsonpCallback=jsonpCallback_mh}awf.user.authentication.done(function(is_authenticated){if(is_authenticated){this.buildUrl(awf.user.info.email)}else{if(probable_email_mh){this.buildUrl(probable_email_mh)}else{this.buildUrl(anonymous_email_mh)}}}.bind(this)).always(function(){origFetch(params).done(def.resolve).fail(def.reject)});return def}.bind(this)}else{this.url="data/json/megamenu-manager-hub.json"}this.fetched=false},parse:function(res){return res},fetchSuccess:function(collection,response){console.log("Collection megaMenus manager hub fetch success")},fetchError:function(collection,response){throw"Collection megaMenus manager hub fetch error: "+response}});app.serviceModels.megaMenus.ECMih=app.base.collections.BaseCollection.extend({buildUrl:function(email){this.url=_.template(urlTemplate_ih)({email:email||anonymous_email_ih,callback:jsonpCallback_ih,applicationkey:applicationkey_ih});console.log("Parameter testmegamenuih "+testmegamenuih+", srvmegamenuih "+srvmegamenuih+" URL megaMenu ibmer hub "+this.url)},initialize:function(){console.log("Initialize collection megaMenu for ibmer hub");app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var useStaticFile4Ih=checkData4Ih();if(!useStaticFile4Ih){var origFetch=this.fetch.bind(this);this.fetch=function(params){var def=$.Deferred();if(!params){params={}}if(!params.dataType){params.dataType="jsonp"}if(!params.contentType){params.contentType="appliction/json"}if(!params.jsonpCallback){params.jsonpCallback=jsonpCallback_ih}awf.user.authentication.done(function(is_authenticated){if(is_authenticated){this.buildUrl(awf.user.info.email)}else{if(probable_email_ih){this.buildUrl(probable_email_ih)}else{this.buildUrl(anonymous_email_ih)}}}.bind(this)).always(function(){origFetch(params).done(def.resolve).fail(def.reject)});return def}.bind(this)}else{this.url="data/json/megamenu-ibmer-hub.json"}this.fetched=false},parse:function(res){return res},fetchSuccess:function(collection,response){console.log("Collection megaMenus ibmer hub fetch success")},fetchError:function(collection,response){
throw"Collection megaMenus ibmer hub fetch error: "+response}});checkData4Ih=function(){var useStaticDataIh=awf.flags.isActive("experiences.ibmer-hub.megamenu_static_data");var useStaticFile=false;if(testmegamenuih||srvmegamenuih){if(testmegamenuih){useStaticFile=true}else{useStaticFile=false}}else if(useStaticDataIh){useStaticFile=true}else{useStaticFile=false}console.log("IBMmer hub testmegamenuih "+testmegamenuih+", srvmegamenuih "+srvmegamenuih+", useStaticDataIh "+useStaticDataIh+", useStaticFile (result) "+useStaticFile);return useStaticFile};parseECMmhResponseToMegaMenuFormat=function(res){console.log("Parsing data for megaMenu ECM manager hub");var megaMenuSectionRet=[];var megaMenuRet=[];var values=res;var megaMenuSection;var megaMenuHeading;var megaMenuLink;megaMenuSection=new Object({});megaMenuSection.tab="Resources";megaMenuSection.panel=[];megaMenuHeading=new Object({});megaMenuHeading.heading="Featured";megaMenuHeading.sectionId="27";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Work Activities";megaMenuHeading.sectionId="28";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Jobs & Employment";megaMenuHeading.sectionId="29";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Talent & Development";megaMenuHeading.sectionId="30";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Help us get better";megaMenuHeading.sectionId="34";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuSectionRet.push(megaMenuSection);megaMenuSection=new Object({});megaMenuSection.tab="Tools";megaMenuSection.panel=[];megaMenuHeading=new Object({});megaMenuHeading.heading="Tools";megaMenuHeading.sectionId="37";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Help us get better";megaMenuHeading.sectionId="34";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuSectionRet.push(megaMenuSection);megaMenuSection=new Object({});megaMenuSection.tab="Reports";megaMenuSection.panel=[];megaMenuHeading=new Object({});megaMenuHeading.heading="Reports";megaMenuHeading.sectionId="36";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Help us get better";megaMenuHeading.sectionId="34";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuSectionRet.push(megaMenuSection);megaMenuSection=new Object({});megaMenuSection.tab="Checklists";megaMenuSection.panel=[];megaMenuHeading=new Object({});megaMenuHeading.heading="Work Events";megaMenuHeading.sectionId="31";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Life Events";megaMenuHeading.sectionId="32";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Help us get better";megaMenuHeading.sectionId="34";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuSectionRet.push(megaMenuSection);megaMenuSection=new Object({});megaMenuSection.tab="Help";megaMenuSection.panel=[];megaMenuHeading=new Object({});megaMenuHeading.heading="Feedback";megaMenuHeading.sectionId="00";megaMenuHeading.links=[];megaMenuLink=new Object({});megaMenuLink.text="Feedback";megaMenuLink.url="https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff";megaMenuHeading.links.push(megaMenuLink);megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Help us get better";megaMenuHeading.sectionId="34";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuSectionRet.push(megaMenuSection);for(var i=0,length=values.length;i<length;i++){var currentValuesObj=values[i];var currentValuesContentObj=currentValuesObj.contentByLang;if(currentValuesObj===null||currentValuesContentObj===null){break}var megaMenu=new Object({});megaMenu.appId=currentValuesObj.appId;if(currentValuesContentObj.length>0){megaMenu.title=currentValuesContentObj[0].title;megaMenu.description=currentValuesContentObj[0].descText;megaMenu.url=currentValuesContentObj[0].url}var currentSectionId=currentValuesObj.appSection;for(var j=0,lengthj=megaMenuSectionRet.length;j<lengthj;j++){menuSectionObj=megaMenuSectionRet[j];menuSectionPanelsObj=menuSectionObj.panel;for(var l=0,lengthl=menuSectionPanelsObj.length;l<lengthl;l++){menuSectionPanelObj=menuSectionPanelsObj[l];if(menuSectionPanelObj.sectionId==currentSectionId){megaMenuLink=new Object({});megaMenuLink.text=megaMenu.title;megaMenuLink.url=megaMenu.url;megaMenuSectionRet[j].panel[l].links.push(megaMenuLink)}}}}var megaMenuSectionRetNew=clearMegaMenuEmptyLinks(megaMenuSectionRet);var parsedJSONSectionData=JSON.stringify(megaMenuSectionRetNew);return parsedJSONSectionData};parseECMihResponseToMegaMenuFormat=function(res){console.log("Parsing data for megaMenu ECM ibmer hub");var megaMenuSectionRet=[];var megaMenuRet=[];var values=res;var megaMenuSection;var megaMenuHeading;var megaMenuLink;megaMenuSection=new Object({});megaMenuSection.tab="Resources";megaMenuSection.panel=[];megaMenuHeading=new Object({});megaMenuHeading.heading="Featured";megaMenuHeading.sectionId="127";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Work Activities";megaMenuHeading.sectionId="128";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Jobs & Employment";megaMenuHeading.sectionId="129";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Talent & Development";megaMenuHeading.sectionId="130";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Help us get better";megaMenuHeading.sectionId="134";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuSectionRet.push(megaMenuSection);megaMenuSection=new Object({});megaMenuSection.tab="Tools";megaMenuSection.panel=[];megaMenuHeading=new Object({});megaMenuHeading.heading="Tools";megaMenuHeading.sectionId="137";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Help us get better";megaMenuHeading.sectionId="134";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuSectionRet.push(megaMenuSection);megaMenuSection=new Object({});megaMenuSection.tab="Reports";megaMenuSection.panel=[];megaMenuHeading=new Object({});megaMenuHeading.heading="Reports";megaMenuHeading.sectionId="136";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Help us get better";megaMenuHeading.sectionId="134";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuSectionRet.push(megaMenuSection);megaMenuSection=new Object({});megaMenuSection.tab="Checklists";megaMenuSection.panel=[];megaMenuHeading=new Object({});megaMenuHeading.heading="Work Events";megaMenuHeading.sectionId="131";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Life Events";megaMenuHeading.sectionId="132";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Help us get better";megaMenuHeading.sectionId="134";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuSectionRet.push(megaMenuSection);megaMenuSection=new Object({});megaMenuSection.tab="Help";megaMenuSection.panel=[];megaMenuHeading=new Object({});megaMenuHeading.heading="Feedback";megaMenuHeading.sectionId="000";megaMenuHeading.links=[];megaMenuLink=new Object({});megaMenuLink.text="Feedback";megaMenuLink.url="https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff";megaMenuHeading.links.push(megaMenuLink);megaMenuSection.panel.push(megaMenuHeading);megaMenuHeading=new Object({});megaMenuHeading.heading="Help us get better";megaMenuHeading.sectionId="134";megaMenuHeading.links=[];megaMenuSection.panel.push(megaMenuHeading);megaMenuSectionRet.push(megaMenuSection);for(var i=0,length=values.length;i<length;i++){var currentValuesObj=values[i];var currentValuesContentObj=currentValuesObj.contentByLang;if(currentValuesObj===null||currentValuesContentObj===null){break}var megaMenu=new Object({});megaMenu.appId=currentValuesObj.appId;if(currentValuesContentObj.length>0){megaMenu.title=currentValuesContentObj[0].title;megaMenu.description=currentValuesContentObj[0].descText;megaMenu.url=currentValuesContentObj[0].url}var currentSectionId=currentValuesObj.appSection;for(var j=0,lengthj=megaMenuSectionRet.length;j<lengthj;j++){menuSectionObj=megaMenuSectionRet[j];menuSectionPanelsObj=menuSectionObj.panel;for(var l=0,lengthl=menuSectionPanelsObj.length;l<lengthl;l++){menuSectionPanelObj=menuSectionPanelsObj[l];if(menuSectionPanelObj.sectionId==currentSectionId){megaMenuLink=new Object({});megaMenuLink.text=megaMenu.title;megaMenuLink.url=megaMenu.url;megaMenuSectionRet[j].panel[l].links.push(megaMenuLink)}}}}var megaMenuSectionRetNew=clearMegaMenuEmptyLinks(megaMenuSectionRet);var parsedJSONSectionData=JSON.stringify(megaMenuSectionRetNew);return parsedJSONSectionData};function clearMegaMenuEmptyLinks(megaMenuSectionRet){var megaMenuSectionRetNew=[];console.log("*** clearMegaMenuEmptyLinks Sections: "+megaMenuSectionRet.length);for(var j=0,lengthj=megaMenuSectionRet.length;j<lengthj;j++){var menuSectionObj=megaMenuSectionRet[j];var sectionName=menuSectionObj.tab;menuSectionPanelsObj=menuSectionObj.panel;for(var i=0,lengthi=menuSectionPanelsObj.length;i<lengthi;i++){var menuSectionPanelObj=menuSectionPanelsObj[i];var panelLinks=menuSectionPanelObj.links.length;var panelName=menuSectionPanelObj.heading;addSectionPanelElement(megaMenuSectionRetNew,menuSectionObj,menuSectionPanelObj)}}return megaMenuSectionRetNew}function addSectionPanelElement(megaMenuSectionRetNew,menuSectionObj,menuSectionPanelObj){var sectionElement=-1;if(menuSectionPanelObj.links.length>0){if(megaMenuSectionRetNew.length>0){for(var z=0,lengthz=megaMenuSectionRetNew.length;z<lengthz;z++){if(megaMenuSectionRetNew[z].tab===menuSectionObj.tab){sectionElement=z;break}}}if(sectionElement===-1){var menuSectionObjNew=menuSectionObj;menuSectionObjNew.panel=[];menuSectionObjNew.panel.push(menuSectionPanelObj);megaMenuSectionRetNew.push(menuSectionObjNew);sectionElement=0}else{megaMenuSectionRetNew[sectionElement].panel.push(menuSectionPanelObj)}}return 1}})();(function(){var URL=window.location.protocol+"//faces.tap.ibm.com/api/find/?uid={{uid}}&format=faces";w3n.serviceModels.Faces=app.base.models.BaseModel.extend({name:"Faces",url:function(){return _.template(URL)({uid:this.id})},parse:function(result){if(typeof result==="string")result=JSON.parse(result);return result[0]},timeout:3e4})})();(function(){w3n.serviceModels.ibmerNews.notWorking=app.base.collections.BaseCollection.extend({name:"IBM News",initialize:function(attrs){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var origFetch=this.fetch;this.fetch=function(params){if(!params)params={};if(!params.dataType)params.dataType="jsonp";if(!params.jsonpCallback)params.jsonpCallback="newsJsonpCallback";return origFetch(params)}.bind(this);if(attrs&&attrs.email){this.email=attrs.email}else{this.email=awf.user.info.email}awf.user.on("change:authenticated",{},function(){this.email=awf.user.info.email;this.url()})},url:function(){var email=this.email?this.email:"anonymous@us.ibm.com";return"//w3-workplace.ibm.com/w3restsvc/usercontent/6127839ee7627460c4189e36fc6b1b01/json/email/"+email+"/applicationid/17/section/0,1/attribs/metadata%2Cimage%2Cprofiledfor/callback/newsJsonpCallback"},email:null,model:app.base.models.BaseModel})})();(function(){w3n.serviceModels.IBMerNews=app.base.collections.BaseCollection.extend({initialize:function(attrs){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var origFetch=this.fetch;this.fetch=function(params){if(!params)params={};if(!params.dataType)params.dataType="jsonp";if(!params.jsonpCallback)params.jsonpCallback="newsJsonpCallback";return origFetch(params)}.bind(this);if(attrs&&attrs.email){this.email=attrs.email}else{this.email=awf.user.info.email}awf.user.on("change:authenticated",{},function(){this.email=awf.user.info.email;this.url()})},url:function(){var email=this.email?this.email:"anonymous@us.ibm.com";return"//w3-workplace.ibm.com/w3restsvc/usercontent/6127839ee7627460c4189e36fc6b1b01/json/email/"+email+"/applicationid/17/section/0,1/attribs/metadata%2Cimage%2Cprofiledfor/callback/newsJsonpCallback"},email:null,model:app.base.models.BaseModel})})();(function(){w3n.serviceModels.learning=w3n.serviceModels.learning||{};var apis={login:"https://w3-01.sso.ibm.com/hr/careersmart/secure/login.jsp",fourty_hours:"https://w3-01.sso.ibm.com/hr/careersmart/rest/rest-unprotected.wss/v2/fourtyHours?format=JSONP&type=full",add_learning:"https://w3-151.ibm.com/learning/lms/ibmservices/inserttranscripts?operation1=createnewcourse&completionstatus=Successful&courseno1=PERSONAL{{user_id}}{{callback}}",searchEvent:"https://w3-01.sso.ibm.com/hr/careersmart/html/find.html#tabId=FS&searchString="},keys=["listIBMLearning","listPersonalLearning"],group_list=["inProgressGroup","completedGroup"];w3n.serviceModels.learning.careersmartRequester=app.base.collections.BaseCollection.extend({model:app.base.models.BaseModel,buildUrl:function(params){switch(params.type){case"add_learning":this.url=_.template(apis.add_learning)({callback:"&callback="+params.callback,user_id:"&learnerid1="+(w3n.connections.user_email?w3n.connections.user_email:awf.user.name)});break;default:this.url=_.template(apis.fourty_hours)({});break}},url:apis.fourty_hours,initialize:function(){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var origFetch=this.fetch.bind(this);this.fetch=function(params){params=params||{};this.buildUrl(params);if(!params.identity_service){params.identity_service=true}if(!params.service_index){params.service_index="careersmart"}if(!params.dataType){params.dataType="jsonp"}return origFetch(params)}.bind(this);this.fetched=false},parse:function(resp){var all_data=[];_.forEach(group_list,function(group_key){var group=resp.data.fourtyHours[group_key]||false;if(group){_.forEach(keys,function(attr){if(group[attr]!==null&&group[attr].length>0){all_data=all_data.concat(group[attr])}})}});return all_data}})})();(function(){w3n.serviceModels.learning=w3n.serviceModels.learning||{};w3n.serviceModels.learning.localRequester=app.base.collections.BaseCollection.extend({model:app.base.models.BaseModel,url:"data/json/learnings.json",initialize:function(){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var origFetch=this.fetch.bind(this);this.fetch=function(params){params=params||{};if(!params.dataType){params.dataType="json"}return origFetch(params)}.bind(this);this.fetched=false},parse:function(data){this.data=data;return data.courses}})})();(function(){w3n.serviceModels.learning=w3n.serviceModels.learning||{};var cid="27fc9524-9add-4d10-bce7-f0cda13fd7a5",csecret="vS3iL1aV1cR2xU2qI3cA5oV7pV7wJ0tO4nQ6kT6vP7lP1fA8fU",apis={login:"https://w3-01.sso.ibm.com/hr/careersmart/secure/setToken.jsp",w3id_login:"https://yourlearning.w3bmix.ibm.com/setToken.jsp",hours:"https://w3.api.ibm.com/learning/run/v1/transcripts?transcriptDateYear=2016&returnFullRecord=true&client_id={{cid}}&client_secret={{csecret}}",summary:"https://w3.api.ibm.com/learning/run/v1/transcripts/summary?client_id={{cid}}&client_secret={{csecret}}",activities:"https://w3.api.ibm.com/learning/run/v1/learning_activities/{{activities}}?&client_id={{cid}}&client_secret={{csecret}}",add_learning:"https://w3.api.ibm.com/learning/run/v1/transcripts/post",business_initiative:"https://w3.api.ibm.com/learning/run/v1/businessinitiatives?includeIDs=Y&client_id={{cid}}&client_secret={{csecret}}",learning_delivery_type:"https://w3.api.ibm.com/learning/run/v1/learningdeliverytypes?includeIDs=Y&client_id={{cid}}&client_secret={{csecret}}"};w3n.serviceModels.learning.addLearningRequester=app.base.models.BaseModel.extend({url:apis.add_learning,initialize:function(){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);var self=this,origFetch=this.fetch.bind(this);this.fetch=function(params){this.url=_.template(apis.add_learning)({cid:cid,csecret:csecret});params=params||{};if(!params.crossDomain){params.crossDomain=true}if(!params.xhrFields){params.xhrFields={withCredentials:true}}params.headers={"X-IBM-Client-Id":cid,"X-IBM-Client-Secret":csecret};params.dataType="json";params.contentType="application/json";params.method="POST";params.timeout=2e4;params.data=JSON.stringify(params.data);params.uncache=true;return origFetch(params)}.bind(this)}});w3n.serviceModels.learning.BIDTRequester=app.base.collections.BaseCollection.extend({model:app.base.models.BaseModel,url:apis.business_initiative,buildUrl:function(params){this.url=_.template(apis[this.api])({cid:cid,csecret:csecret})},initialize:function(models,options){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);this.api=_.snakeCase(options.api||"business_initiative");this.parse_key=_.camelCase(this.api+"_records");var origFetch=this.fetch;this.fetch=function(params){params=params||{};this.buildUrl(params);params.dataType="json";params.cache=true;return origFetch(params)}.bind(this);this.fetched=false},parse:function(resp){return resp[this.parse_key]}});w3n.serviceModels.learning.summaryRequester=app.base.models.BaseModel.extend({url:apis.summary,buildUrl:function(params){switch(params.type){case"check_auth":this.url=_.template(apis.login)({});break;default:this.url=_.template(apis.summary)({cid:cid,csecret:csecret});break}},initialize:function(){if(awf.user.services.oauth){apis.login=apis.w3id_login}app.base.models.BaseModel.prototype.initialize.apply(this,arguments);var self=this,origFetch=this.fetch;this.fetch=function(params){params=params||{};this.buildUrl(params);if(!params.dataType){params.dataType="jsonp"}return origFetch(params).done(function(data){this.trigger("auth-fetched")}.bind(this))}.bind(this)},checkAuth:function(){w3n.utils.loadIframe(apis.login,{timeout:20,onload:true,debug:true,removeIframeAfterSuccess:true},this.fetch,this.iframeError.bind(this))},iframeError:function(){this.trigger("iframe-error")},parse:function(resp){return resp.transcriptSummary.completionHours}});var activity_collection=app.base.collections.BaseCollection.extend({model:app.base.models.BaseModel,url:apis.activities,buildUrl:function(params){this.url=_.template(apis.activities)({activities:params.activities||this.activities,cid:cid,csecret:csecret})},initialize:function(config){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);this.activities=config.activities;this.items=config.items;var origFetch=this.fetch;this.fetch=function(params){params=params||{};this.buildUrl(params);params.dataType="json";return origFetch(params)}.bind(this);this.fetched=false},parse:function(resp){return this.mergeData(resp.items)},mergeData:function(data){var merge_data=[];_.forEach(this.items,function(o_item){merge_data.push(_.extend(o_item,_.find(data,function(r_item){return r_item.lmsId===o_item.LAID})))});return merge_data}});w3n.serviceModels.learning.activityRequester=app.base.models.CompositeModel.extend({initSubmodels:function(attributes){this.addModel("activity",new activity_collection({activities:attributes.activities,items:attributes.items}))}});w3n.serviceModels.learning.activitiesRequester=app.base.collections.BaseCollection.extend({model:app.base.models.BaseModel,url:apis.hours,buildUrl:function(params){this.url=_.template(apis.hours)({cid:cid,csecret:csecret})},initialize:function(){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var origFetch=this.fetch;this.fetch=function(params){params=params||{};this.buildUrl(params);if(!params.dataType){params.dataType="jsonp"}return origFetch(params)}.bind(this);this.fetched=false},parse:function(resp){var list=_.unique(_.map(resp.transcriptRecords,function(item){return item.LAID||item.ID}));return{activities:list.join(","),items:resp.transcriptRecords}}})})();(function(){var apiBase="https://minipulse.cambridge.ibm.com/minipoll";if(app.utils.urlParam("minipulse-service-apibase")&&app.utils.urlParam("minipulse-service-apibase")==="dev"){apiBase="https://sp2.cambridge.ibm.com/minipoll"}w3n.serviceModels.minipulse.badge=app.base.models.BaseModel.extend({buildUrl:function(params){this.url=apiBase+"/badge";this.url+=w3n.utils.addParams(params)},fetched:false,origFetch:app.base.models.BaseModel.prototype.fetch,fetch:function(params){if(!params)params={};if(!params.dataType)params.dataType="jsonp";params.timeout=6e4;var fetch_defr=$.Deferred();var self=this;awf.user.authentication.done(function(info){self.buildUrl({email:info.email})}).always(function(){self.origFetch(params).done(fetch_defr.resolve).fail(fetch_defr.reject)});return fetch_defr},parse:function(res){this.set("success",res.success);this.set("icon",res.icon);this.set("text",res.text)}})})();(function(){var apiBase="https://minipulse.cambridge.ibm.com/minipoll";var hitCount=0;if(app.utils.urlParam("minipulse-service-apibase")&&app.utils.urlParam("minipulse-service-apibase")==="dev"){apiBase="https://sp2.cambridge.ibm.com/minipoll"}w3n.serviceModels.minipulse.pollList=app.base.collections.BaseCollection.extend({buildUrl:function(){var params={};params.action="get_poll_ids";params.offset=parseInt(app.utils.urlParam("minipulse-polls-offset"))||0;params.limit=parseInt(app.utils.urlParam("minipulse-polls-limit"))||5;this.url=apiBase+"/Station/Poll";this.url+=w3n.utils.addParams(params)},model:app.base.models.BaseModel,url:this.url,initialize:function(){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);var origFetch=this.fetch;this.fetch=function(params){if(!params)params={};if(!params.dataType)params.dataType="jsonp";if(!params.timeout)params.timeout=3e4;if(this.status=="authenticated"){return origFetch.call(this,params)}else{this.buildUrl();var self=this;self.auth_defr=$.Deferred();awf.user.authentication.done(function(res){self.initServiceApiAuth(self.authSuccess,self.authFail)});return self.auth_defr}}.bind(this);this.fetched=false},initServiceApiAuth:function(successCallback,failCallback){w3n.utils.loadIframe(apiBase+"/?action=empty",{timeout:20,onload:true,debug:true,removeIframeAfterSuccess:true},successCallback.bind(this),failCallback.bind(this))},authSuccess:function(){this.status="authenticated";this.fetch().done(this.auth_defr.resolve).fail(this.auth_defr.reject)},authFail:function(){this.status="notAuthenticated";this.auth_defr.reject()},isValidResponse:function(data,silent){var self=this;if(!data.statuscode&&!data.status){if(!silent){self.status="failed"}return false}else if(data.statuscode&&Math.floor(data.statuscode)!==200||data.status&&Math.floor(data.status)!==200){if(data.statuscode===403||data.status===403||data.statuscode===404||data.status===404){if(!silent){self.status="notAuthenticated"}return false}if(!silent){self.status="failed"}return false}return true},parse:function(data){return data.polls.map(function(poll){return{id:poll}})},getApiBase:function(){return apiBase}})})();(function(){var apiBase="https://minipulse.cambridge.ibm.com/minipoll";if(app.utils.urlParam("minipulse-service-apibase")&&app.utils.urlParam("minipulse-service-apibase")==="dev"){apiBase="https://sp2.cambridge.ibm.com/minipoll"}var PollModel=app.base.models.BaseModel.extend({sync:Backbone.Hoard.localStorageControl.getModelSync(),initialize:function(){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);var origFetch=this.fetch;this.fetch=function(params){if(params){params.timeout=3e4}return origFetch.call(this,params)}.bind(this);this.fetched=false},url:function(){return apiBase+"/Station?action=get_poll&pollid="+this.id},parse:function(data){return w3n.cogs.minipulse.adapters.pollAdapter(data)},votePoll:function(data,successCallback,failureCallback){if(!data){throw"w3n.models.minipulsePoll.votePoll: Missing required data object"}var $deferred=$.Deferred(),responseObj=this.createResponseObj({responses:data});var params={pollid:this.get("id"),data:responseObj};params.action="post_response";var api=apiBase+"/Station";api+=w3n.utils.addParams(params);this.callService({url:api}).always(function(res){if(!this.isValidResponse(res,true)){if(typeof failureCallback==="function"){failureCallback()}$deferred.reject();return}var poll=this.parse(res);this.set(poll);if(typeof successCallback==="function"){successCallback(poll)}$deferred.resolve();this.trigger("votePoll:success",poll)}.bind(this)).fail(function(){if(typeof failureCallback==="function"){failureCallback()}$deferred.reject()}.bind(this));return $deferred.promise()},likePoll:function(successCallback,failureCallback){var $deferred=$.Deferred();if(!this.get("liked")){this.set("liked",true)}else{this.set("liked",false)}var data={eula:false,responses:[{pollid:this.get("id"),answerid:1,shared:false,liked:this.get("liked"),referral:false,comment:""}]};var dataObj=JSON.stringify(data);var api=apiBase+"/Station"+"?action=like_poll"+"&pollid="+this.get("id")+"&data="+dataObj;this.callService({url:api}).always(function(res){if(!this.isValidResponse(res,true)){if(typeof failureCallback==="function"){failureCallback()}return}var poll=this.parse(res);this.set(poll);if(typeof successCallback==="function"){successCallback(poll)}$deferred.resolve()}.bind(this)).fail(function(){$deferred.reject()})},isValidResponse:function(data,silent){var self=this;if(!data.statuscode&&!data.status){return false}else if(data.statuscode&&Math.floor(data.statuscode)!==200||data.status&&Math.floor(data.status)!==200){if(data.statuscode===403||data.status===403||data.statuscode===404||data.status===404){return false}return false}return true},createResponseObj:function(params){return{eula:params.eula||false,responses:params.responses||[]}},callService:function(params){return $.ajax({url:params.url,dataType:"jsonp"})}});w3n.serviceModels.minipulse.poll=app.base.models.CompositeModel.extend({initSubmodels:function(attributes){this.addModel("poll",new PollModel({id:attributes.id}))}})})();(function(){w3n.serviceModels.sametime.Status=app.base.collections.BaseCollection.extend({name:"SameTime Status",modelId:function(attrs){return attrs.username},initialize:function(options){if(options){this.emails=options.emails}w3n.serviceModels.sametime.Status.cached=this},url:function(){return w3n.utils.sametimeDomain()+"/stwebapi/getstatus?userId="+this.emails+"&jsonp=callback"},fetch:function(){return app.base.collections.BaseCollection.prototype.fetch.call(this,{dataType:"jsonp",jsonpCallback:"callback"})},parse:function(data){return data.persons||data}});w3n.serviceModels.sametime.Status.cached={}})();(function(){var service={shorten:function(url,callback){var api="https://ibm.biz/api/shorten/",api_key="65a7669e5e6d49af1db9d3ec7ae7583d",post_data={url:url,api_key:api_key};if(!_.isString(url)){throw new Error("url must be defined")}if(!_.isFunction(callback)){throw new Error("callback function must be defined")}return $.post(api,post_data,callback)}};Object.defineProperty(w3n.services,"snip",{get:function(){return service}})})();(function(){var model=w3n.serviceModels.TalentProfile.Model=app.base.models.BaseModel.extend({idAttribute:"cnum"});w3n.serviceModels.TalentProfile.Collection=app.base.collections.BaseCollection.extend({name:"Talent Profile",model:model,initialize:function(){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var usetestdata=app.utils.urlParam("testdata");if(usetestdata){this.url="data/json/talent-playbook.json"}var origFetch=this.fetch;this.fetch=function(opts){if(!opts)opts={};opts.timeout=3e4;return origFetch(opts)}.bind(this)}})})();(function(){var testMode=w3n.is_live;var sourcePath=testMode?"https://w3-workplace.ibm.com/ibm/thinkacademy/":"https://esl008.somerslab.ibm.com/ibm/thinkacademy_2.0/";var service="data/w3home/ta-topics.json?";w3n.serviceModels.ThinkAcademy=app.base.collections.BaseCollection.extend({name:"Think Academy",model:app.base.models.BaseModel,url:function(){return sourcePath+service+Math.random()*Math.random()},initialize:function(){app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);var origFetch=this.fetch;this.fetch=function(params){if(!params)params={};if(!params.dataType)params.dataType="jsonp";if(!params.jsonpCallback)params.jsonpCallback="jsonCallback";return origFetch.call(this,params)}.bind(this)},parse:function(data){return data.topics.map(function(topic){topic.title=decodeHtmlEntity(unescape(topic.title));topic.description=decodeHtmlEntity(unescape(topic.description));topic.date=dateConversion(new Date(topic.date));if(topic.url!=="")topic.url=sourcePath+topic.url;topic.pictogramWithWhiteBg=topic.pictogramWithWhiteBg===""?"images/think-academy/TA_WORDMARK.svg":sourcePath+topic.pictogramWithWhiteBg;topic.pictogramWhiteWithTransparentBg=topic.pictogramWhiteWithTransparentBg===""?"images/think-academy/TA-ICON-KO.svg":sourcePath+topic.pictogramWhiteWithTransparentBg;topic.modules=topic.modules.map(function(module){if(module.url!=="")module.url=sourcePath+module.url;if(module.thumbnail!=="")module.thumbnail=sourcePath+module.thumbnail;return module});topic.moduleOne=topic.modules[0];topic.moduleTwo=topic.modules[1];topic.moduleThree=topic.modules[2];var topicColorObj=new awf.__.Color(topic.topicColor);topic.colors={description:topicColorObj.isDark()?"light-copy":"dark-copy",title:topicColorObj.isDark()?"light-copy":"dark-copy",actionBtn:topicColorObj.isDark()?"light-button":"dark-button"};return topic})}});function dateConversion(date){var months=["January","February","March","April","May","June","July","August","September","October","November","December"];return months[date.getMonth()]+" "+date.getDate()+", "+date.getFullYear()}function decodeHtmlEntity(str){return str.replace(/&#(\d+);/g,function(match,dec){return String.fromCharCode(dec)})}})();(function(){w3n.serviceModels.tips.json=app.base.models.BaseModel.extend({url:"data/json/coach-marks.json",initialize:function(){app.base.models.BaseModel.prototype.initialize.apply(this,arguments)}})})();(function(){w3n.serviceModels.up.ManagerReports=app.base.models.BaseModel.extend({hoardCache:true,name:"Unified Profile Manager Reports",initialize:function(options){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);if(!this.id)console.log("Unified Profile Manager Reports service requires an id")},url:function(){var domain=window.location.protocol+app.content.domain.unified_profile;return domain+"/myw3/unified-profile/v1/docs/instances/teamInfoResolved/"+this.id+"?functionalLeadershipLimit=0&functionalPeersLimit=0&incountryLeadershipLimit=0&incountryPeersLimit=0"}})})();(function(){w3n.serviceModels.up.PersonInfo=app.base.models.BaseModel.extend({name:"Unified Profile Individual Info",initialize:function(options){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);if(!this.id)console.log("Unified Profile TeamInfo service requires an id")},url:function(){var domain=window.location.protocol+app.content.domain.unified_profile;return domain+"/myw3/unified-profile/v1/docs/instances/master?userId="+this.id},parse:function(response){return response.content.identity_info;
}})})();(function(){w3n.serviceModels.up.TeamInfo=app.base.models.BaseModel.extend({name:"Unified Profile Team Info",initialize:function(options){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);if(!this.id)console.log("Unified Profile TeamInfo service requires an id")},url:function(){var domain=window.location.protocol+app.content.domain.unified_profile;return domain+"/myw3/unified-profile/v1/docs/instances/teamInfoResolved/"+this.id}})})();(function(){w3n.serviceModels.whatsnew.json=app.base.models.BaseModel.extend({url:"data/json/whatsnew.json",initialize:function(){app.base.models.BaseModel.prototype.initialize.apply(this,arguments)}})})();(function(){w3n.serviceModels.wsf.Awards=w3n.serviceModels.sso.Model.extend({hoardCache:true,name:"WSF Awards",supportedServiceKey:w3n.connections.proxy.indexOf("test")!==-1?"wsf_uat":"wsf",url:function(){var proxy=w3n.connections.proxy;var PROFILE_BASE_URL=proxy+"/hr/wsf/services/extdata/flmmh/uwpepp3/";return PROFILE_BASE_URL+this.id},setId:function(id){if(id.indexOf(",")>-1){var dn=w3n.utils.data.getDn(id);if(dn&&dn.uid)this.id=dn.uid;else this.id=id}return this},fetch:function(){if(!this.id)console.log("WsfProfile service requires an id");return w3n.serviceModels.sso.Model.prototype.fetch.apply(this,arguments)},parse:function(result){var data=JSON.parse(result.wsf_response.CRESDATA).results;var o={e:[],a:[]};for(var i=0;i<data.length;i++){if(data[i].TCATEGOTY==="AWARD"){o.a.push(data[i])}else{o.e.push(data[i])}}var sortFn=function(a,b){var dateA=new Date(a.DAWARD),dateB=new Date(b.DAWARD);if(dateA<dateB){return 1}return-1};o.e.sort(sortFn);o.a.sort(sortFn);return o}})})();(function(){w3n.serviceModels.wsf.Emergency=w3n.serviceModels.sso.Collection.extend({hoardCache:true,name:"WSF Emergency",supportedServiceKey:w3n.connections.proxy.indexOf("test")!==-1?"wsf_uat":"wsf",url:function(){var proxy=w3n.connections.proxy;var EMERGENCY_BASE_URL=proxy+"/hr/wsf/services/extdata/flmmh/uwpepp2/";return EMERGENCY_BASE_URL+this.id},setId:function(id){if(id.indexOf(",")>-1){var dn=w3n.utils.data.getDn(id);if(dn&&dn.uid)this.id=dn.uid;else this.id=id}return this},fetch:function(){if(!this.id)console.log("WsfEmergency service requires an id");return w3n.serviceModels.sso.Collection.prototype.fetch.apply(this,arguments)},parse:function(result){return JSON.parse(result.wsf_response.CRESDATA).results}})})();(function(){w3n.serviceModels.wsf.ExperienceAlerts=w3n.serviceModels.sso.Model.extend({name:"WSF Experience Alerts",supportedServiceKey:w3n.connections.proxy.indexOf("test")!==-1?"wsf_uat":"wsf",url:function(){var proxy=w3n.connections.proxy;return proxy+"/hr/wsf/services/extdata/mgrhbtsk/endalltsk/1"},parse:function(result){var cleanResults=JSON.parse(result.wsf_response.CRESDATA).results[0];return cleanResults}})})();(function(){var nullValue={value:null};w3n.serviceModels.wsf.Profile=w3n.serviceModels.sso.Model.extend({hoardCache:true,name:"WSF Profile",supportedServiceKey:w3n.connections.proxy.indexOf("test")!==-1?"wsf_uat":"wsf",url:function(){var proxy=w3n.connections.proxy;var PROFILE_BASE_URL=proxy+"/hr/wsf/services/extdata/flmmh/uwpepp1/";return PROFILE_BASE_URL+this.id},setId:function(id){if(id.indexOf(",")>-1){var dn=w3n.utils.data.getDn(id);if(dn&&dn.uid)this.id=dn.uid;else this.id=id}return this},fetch:function(){if(!this.id)console.log("WsfProfile service requires an id");return w3n.serviceModels.sso.Model.prototype.fetch.apply(this,arguments)},parse:function(result){var data=JSON.parse(result.wsf_response.CRESDATA).results[0];var parsed={compensation:{},homeAddress:{}};var compensationRawObj={approxAnnualSalary:data.FSALANU==="X"?nullValue:{value:data.ASALANU},approxAnnualSalaryCurr:data.FSALCURR==="X"?nullValue:{value:data.CSALCURR},lastSalaryChange:data.FSALCHGM==="X"?nullValue:{value:data.ASALCHGA},lastSalaryChangeDate:data.FDSALCHG_1==="X"?nullValue:{value:data.DSALIEFF_1},bonusPay:data.FBONUSS==="X"?nullValue:{value:data.ABONUS},bonusPayCurr:data.FSALCURR==="X"?nullValue:{value:data.CSALCURR},holdingPower:data.FEQPOTES==="X"?nullValue:{value:data.CEQTYPOT},holdingPowerCurr:data.FSALCURR==="X"?nullValue:{value:data.CSALCURR},awards3Year:data.FAWD3YR==="X"?nullValue:{value:data.TAWD3YR},awards3YearCurr:data.FSALCURR==="X"?nullValue:{value:data.CSALCURR},prevMonthlySalaryChange:data.FSALCHGM_2==="X"?nullValue:{value:data.SALCHGM_2},prevAnnualSalaryChange:data.FSALCHGA_2==="X"?nullValue:{value:data.SALCHGA_2},prevSalaryChangeDate:data.FDSALCHG_2==="X"?nullValue:{value:data.DSALIEFF_2},nextPrevMonthlySalaryChange:data.FSALCHGM_3==="X"?nullValue:{value:data.SALCHGM_3},nextPrevAnnualSalaryChange:data.FSALCHGA_3==="X"?nullValue:{value:data.SALCHGA_3},nextPrevSalaryChangeDate:data.FDSALCHG_3==="X"?nullValue:{value:data.DSALIEFF_3}};parsed.compensation=parseCompensationObject(compensationRawObj);var homeAddressRawObj={address1:data.FHOMEADDR_1==="X"?{hide:true}:{value:data.TADDRLN1},address2:data.FHOMEADDR_2==="X"?{hide:true}:{value:data.TADDRLN2},city:data.FHOMEADDR_3==="X"?{hide:true}:{value:data.TADDRLN3},stateProvidence:data.FHOMEADDR_4==="X"?{hide:true}:{value:data.TADDRLN4},country:data.FHOMEADDR_5==="X"?{hide:true}:{value:data.TADDRLN5},postal:data.FHOMEADDR_6==="X"?{hide:true}:{value:data.TADDRLN6},phone:data.FHOMTELN==="X"?{hide:true}:{value:data.THOMETELN}};parsed.homeAddress=homeAddressRawObj;return parsed}});function parseCompensationObject(raw){var parsed=$.extend({history:[]},raw);var parsedByYear={};histKeys=[["lastSalaryChangeDate","lastSalaryChange"],["prevSalaryChangeDate","prevAnnualSalaryChange"],["nextPrevSalaryChangeDate","nextPrevAnnualSalaryChange"]];for(var i=0;i<histKeys.length;i++){if(raw[histKeys[i][0]].value){var date=new Date(raw[histKeys[i][0]].value);var yr=date.getFullYear();parsedByYear[yr]=parsedByYear[yr]||[];parsedByYear[yr].push({date:raw[histKeys[i][0]].value,amount:raw[histKeys[i][1]].value,curr:raw.approxAnnualSalaryCurr.value})}}for(var year in parsedByYear){var obj={year:year,changes:parsedByYear[year]};parsed.history.push(obj)}return parsed}})();(function(){w3n.components={};w3n.components.sametime={}})();(function(){var accordion=app.base.views.BaseView.extend({});w3n.components.Accordion=accordion})();(function(){w3n.components.Blocked=app.base.views.BaseView.extend({name:"Blocked",template:w3n.templates.components.blocked["blocked.html"],initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.mask=options.mask||true;this.data=options.data}})})();(function(){var klass={box_large:".box-large",content:".content",share_dialog:".share-dialog",share_dialog_message:".share-dialog__share-content__message",share_dialog_desc:".share-dialog__share-content__desc",share_dialog_filename:".share-dialog__share-content__filename",share_dialog_tip_copy:".share-dialog__share-content__tip__copy",share_dialog_share:".share-dialog__share-button__share",share_dialog_cancel:".share-dialog__share-button__cancel",animation_down:"fadeInDownBig",animation_up:"fadeOutUpBig",share_dialog_overlay:".share-dialog-overlay",show_overlay:"show-overlay",overlay_blur:"overlay-blur",share_success:".share-success",share_success_close:".share-success__close"};w3n.components=w3n.components||{};w3n.components.boxLargeItemView=app.base.views.BaseView.extend({template:w3n.templates.components.box["box-large-item.html"],initialize:function(params){this.params=params;this.data=this.model.toJSON();this.type=this.data.type;this.$el=$(this.template);if(this.type=="folder"){this.$el.on("dragenter",this.dragenter.bind(this));this.$el.on("dragleave",this.dragleave.bind(this));this.$el.on("dragover",this.dragover.bind(this));this.$el.on("dragend",this.dragend.bind(this))}this.$el.on("drop",this.drop.bind(this));this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"box:large-item"})},render:function(){this.$el.html(_.template(this.$el.html())({id:this.data.id,folder_type:this.data.type==="folder"&&!this.data.has_collaborations?"private-folder":"",icon:this.data.type=="folder"?this.data.has_collaborations?"icon-awf-folder-shared":"icon-awf-folder":"icon-awf-file-text",name:this.data.name,size:this.data.size,created_by:this.data.created_by,modified_at:this.data.modified_at,modified_by:this.data.modified_by,download_url:this.data.download_url,type:this.data.type}));this.generateSocialActions();return this},events:{},showShareDialog:function(shareEvent){var self=this;this.getElement(klass.share_dialog_filename).html(this.data.name);this.showDialog(klass.share_dialog);this.showOverlay(true);var url=self.data.shared_link.url;var share_dialog=self.getElement(klass.share_dialog);var overlay=this.getElement("."+klass.show_overlay);var submit_btn=this.getElement(klass.share_dialog_share);var cancel_btn=this.getElement(klass.share_dialog_cancel);var tip=this.getElement(klass.share_dialog_tip_copy);var card_close_btn=this.getCardCloseButton();card_close_btn.focus();if(w3n.utils.browser.userAgent.safari)tip.html(url);overlay.on("click",function(event){if(!share_dialog.is(":visible"))return;if($.contains(share_dialog,event.target)||share_dialog==event.target)return;share_dialog.removeClass(klass.animation_down).addClass(klass.animation_up);share_dialog.hide();self.showOverlay(false);overlay.off("click")});if(!w3n.utils.browser.userAgent.safari){tip.off("click").on("click",function(event){event.preventDefault();this.tagEvent({ev:"click",action:"link",name:"copy",section:"share dialog"});var params=this.copyToClipboard(url);this.params.parent_component.showMessageForShare(params);tip.focus()}.bind(this))}cancel_btn.off("click").on("click",function(event){event.preventDefault();this.tagEvent({ev:"click",action:"button",name:"cancel",section:"share dialog"});setTimeout(function(){share_dialog.removeClass(klass.animation_down).addClass(klass.animation_up);share_dialog.hide()},200);this.showOverlay(false);if(shareEvent&&shareEvent.target)shareEvent.target.focus()}.bind(this));submit_btn.off("click").on("click",function(event){self.showLoadingMark();this.tagEvent({ev:"click",action:"button",name:"share",section:"share dialog"});app.serviceModels.snipRequester.shorten(url).done(function(res){this.collection=w3n.cogs.status_updates.collections[0];if(this.collection){this.model=this.collection.getSubStructure("postStatus")}else{this.model=new w3n.serviceModels.status_updates.postStatus}var msg=this.getElement(klass.share_dialog_desc).text()+"\n"+this.data.name+"("+res.url+")";var setData={content:msg,actor:{id:"@me"},verb:"post"};this.model.save({data:JSON.stringify(setData)}).done(this.showShareSuccess.bind(this)).fail(this.shareError.bind(this))}.bind(this)).fail(self.shareError.bind(self))}.bind(this));card_close_btn.off("keydown").on("keydown",function(event){if(!share_dialog.is(":visible"))return;if(event.keyCode===9){event.preventDefault();if(event.shiftKey){submit_btn.focus()}else{tip.focus()}}});tip.off("keydown").on("keydown",function(event){if(event.keyCode===9){event.preventDefault();if(event.shiftKey){card_close_btn.focus()}else{cancel_btn.focus()}}});cancel_btn.on("keydown",function(event){if(event.keyCode===9){event.preventDefault();if(event.shiftKey){tip.focus()}else{submit_btn.focus()}}});submit_btn.on("keydown",function(event){if(event.keyCode===9){event.preventDefault();if(event.shiftKey){cancel_btn.focus()}else{card_close_btn.focus()}}})},closeShare:function(){var share_dialog=this.getElement(klass.share_dialog);share_dialog.removeClass(klass.animation_down).addClass(klass.animation_up);share_dialog.hide();this.showOverlay(false)},shareError:function(){this.hideLoadingMark();console.info("share error");this.params.parent_component.showFailedMessageForShare()},copyToClipboard:function(text){var textArea=document.createElement("textarea");textArea.style.position="fixed";textArea.style.top=0;textArea.style.left=0;textArea.style.width="2em";textArea.style.height="2em";textArea.style.padding=0;textArea.style.border="none";textArea.style.outline="none";textArea.style.boxShadow="none";textArea.style.background="transparent";textArea.value=text;document.body.appendChild(textArea);textArea.select();var msg;try{var successful=document.execCommand("copy");status=successful?"success":"error";msg=successful?"This file's link has been copied to clipboard!":"Oops, faled to copy.";console.log("Copying text command was "+msg)}catch(err){msg="Oops, failed to copy.";status="error";console.log("Oops, unable to copy")}document.body.removeChild(textArea);return{status:status,message:msg}},showOverlay:function(action){if(action){this.getElement(klass.share_dialog_overlay).addClass(klass.show_overlay);this.getElement(klass.box_large).find(klass.content).addClass(klass.overlay_blur)}else{this.getElement(klass.share_dialog_overlay).removeClass(klass.show_overlay);this.getElement(klass.box_large).find(klass.content).removeClass(klass.overlay_blur)}},showHideLoadingMark:function(action){this.params.parent_component.showHideLoadingForShare(action)},showLoadingMark:function(){this.showHideLoadingMark("show")},hideLoadingMark:function(){this.showHideLoadingMark("hide")},getElement:function(dialog_class){return this.$el.parents().find(dialog_class)},hideOrShowDialog:function(dialog_class,value){this.getElement(dialog_class).css({display:value})},hideDialog:function(dialog_class){this.hideOrShowDialog(dialog_class,"none")},showDialog:function(dialog_class){if(dialog_class===klass.share_dialog){this.getElement(dialog_class).addClass(klass.animation_down).removeClass(klass.animation_up)}this.hideOrShowDialog(dialog_class,"block")},getCardCloseButton:function(){return this.params.parent_component.$el.parent().parent().find(".js-card-titlebar").find(".js-card-cta").find("button.js-large-card-close")},showShareSuccess:function(shareEvent){var self=this;this.hideDialog(klass.share_dialog);this.showDialog(klass.share_success);var overlay=this.getElement("."+klass.show_overlay);var share_success=this.getElement(klass.share_success);var card_close_btn=this.getCardCloseButton();var close_btn=this.getElement(klass.share_success_close);card_close_btn.focus();overlay.on("click",function(event){if(!share_success.is(":visible"))return;if($.contains(share_success,event.target)||share_success==event.target)return;share_success.hide();self.showOverlay(false);overlay.off("click")});close_btn.off("click").on("click",function(event){event.preventDefault();this.tagEvent({ev:"click",action:"button",name:"close",section:"share success"});this.hideDialog(klass.share_success);this.showOverlay(false);if(shareEvent&&shareEvent.target)shareEvent.target.focus()}.bind(this));card_close_btn.off("keydown").on("keydown",function(event){if(!share_success.is(":visible"))return;if(event.keyCode===9){event.preventDefault();if(close_btn){close_btn.focus()}}});close_btn.off("keydown").on("keydown",function(event){if(event.keyCode===9){event.preventDefault();if(card_close_btn){card_close_btn.focus()}}});this.hideLoadingMark()},generateSocialActions:function(){var params={items:[]};if(this.data.shared_link){params.items.push({icon:"share",title:"Share this file",evt:"click",callback:function(event){this.showShareDialog(event);this.tagEvent({ev:"click",action:"icon",name:"share",section:"file actions",target:"none"})}.bind(this)})}if(this.data.download_url){params.items.push({icon:"download",title:"Download this file",evt:"click",callback:function(){window.open(this.data.download_url,"_blank");console.log("download this file");this.tagEvent({ev:"click",action:"icon",name:"download",section:"file actions",target:"none"})}.bind(this)})}this.social_actions=new app.components.socialActions(params);this.social_actions.render();this.$el.append(this.social_actions.$el)},dragenter:function(e){e.preventDefault();console.log("..dragenter...")},dragover:function(e){this.$el.find(".dragOver").removeClass("dragOver");this.$el.find(".item-drag-tips").hide();this.$el.find(".item-date").show();this.$el.find(".social-actions").show();this.$el.addClass("dragOver");this.$el.find(".item-drag-tips").show();jQuery("#drag-tips").hide();this.$el.find(".item-date").hide();this.social_actions.$el.hide();e.preventDefault()},dragleave:function(e){e.preventDefault();this.$el.removeClass("dragOver");this.$el.find(".item-drag-tips").hide();this.$el.find(".item-date").show();this.social_actions.$el.show()},drop:function(event){event.preventDefault();var node=this.$el.find(".item-content a");this.$el.removeClass("dragOver");this.$el.find(".item-drag-tips").hide();this.$el.find(".item-date").show();this.social_actions.$el.show();var self=this;var dateTransfer=event.dataTransfer||event.originalEvent.dataTransfer;var files=dateTransfer.files;setTimeout(function(){_.forEach(files,function(file){self.params.parent_component.addLoadingItem(file.name)})},500)},dragend:function(e){e.preventDefault()},tagEvent:function(params){var parameters={ev:params.ev,action:params.action,module:"box:large-item",name:params.name,section:params.section,target:params.target||"none",group:"YourIBM"};this.metrics.tagEvent(parameters)}})})();(function(){var config={dev:{client_id:"9sou6lpvluuhyeu7o14zu0zfmwiqtr40",client_secret:"W1EfP4vf2YozndideHCTE3GRfUdPVKS7",redirect_uri:"https://devpccggww3n01.w3-969.ibm.com/your-ibm/build/index.html"},staging:{client_id:"4hill0w8zl48z1v75tvw6o5juvdul156",client_secret:"72pHlj7dOzPmqwOPRopDr25mBxpIupqq",redirect_uri:"https://w3-pre.ibm.com"},production:{client_id:"zkba11udfbajr3d159j3oncqvlws3c0o",client_secret:"PBHci7SbMew4TUuB11Nrbk5gH2wCISBU",redirect_uri:"https://w3.ibm.com"}};var auth=config.dev;var href=window.location.hostname;if(href=="w3-pre.ibm.com"){auth=config.staging}else if(href=="w3.ibm.com"){auth=config.production}w3n.components=w3n.components||{};w3n.components.boxLargeView=app.base.views.BaseView.extend({template:w3n.templates.components.box["box-large.html"],loading_html:app.templates.components["loading-mark"]["loading-mark.html"],initialize:function(params){this.params=params;this.$container=params.$container;this.$el=$(this.template);this.$container.html(this.$el);this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"box:box-large"});this.listenTo(this.collection,"add",this.addItem);this.listenTo(this,"request",this.requestItems);this.listenTo(this.collection,"remove",this.removeItem);this.listenTo(this,"sort",this.sortItems);this.listenTo(this.collection,"reset",this.render);this.listenTo(this.collection,"setParent",this.setParentModel);this.listenTo(this.collection,"signin",this.hideSignIn);this.addMessageBar();this.addMessageBarForShare();this.uploadingFileCount=0;this.bindevents();this.render();this.switchSignInSVG(null,awf.page.themes.current_theme)},render:function(){var self=this;self.showAllContent();self.clearAllItems();_.forEach(this.collection.models,function(item_model){self.hideSignIn();self.addItem(item_model)});if(w3n.utils.browser.userAgent.ie){this.$el.find(".indicator").addClass("no-svg")}return this},setParentModel:function(param){this.showHideLoading("show");this.parentModel=param.model;var name=param.model.toJSON().name;this.setNavTitle(name);this.showHideLoading("hide")},bindevents:function(){this.$el.find("button[data-primitive=signin_cta]").on("click",this.signin.bind(this));this.$el.find("p.back a").on("click",this.back.bind(this));this.$el.find("a[data-primitive=upload]").on("click",this.upload.bind(this));this.$el.find("a[data-primitive=upload]").on("keydown",this.uploadOnTabKey.bind(this));this.$el.find("a[data-primitive=create_new_documents]").on("click",this.create_new_documents.bind(this));this.$el.find("a[data-primitive=search]").on("click",this.search.bind(this));this.$el.find("a[data-primitive=change_view]").on("click",this.change_view.bind(this));this.$el.find("a[data-primitive=sort_by_name]").on("click",this.sortByName.bind(this));this.$el.find("a[data-primitive=sort_by_name]").on("keydown",this.sortOnTabKey.bind(this));this.$el.find("a[data-primitive=sort_by_date]").on("click",this.sortByDate.bind(this));this.$el.find("div.content__view-more button").on("click",this.openBoxPage.bind(this));this.$el.find("input[type=file]").on("change",this.setUploadingItems.bind(this));this.$el.find("div.content").on("dragenter",this.dragenter.bind(this));this.$el.find("div.content").on("dragleave",this.dragleave.bind(this));this.$el.find("div.content").on("drop",this.drop.bind(this));this.$el.find("div.content").on("dragover",this.dragover.bind(this));this.$el.find("div.content").on("dragend",this.dragend.bind(this));this.$el.find("div.content").on("mouseover",this.dragend.bind(this));awf.page.themes.on("change",this.switchSignInSVG.bind(this))},events:{"click button[data-primitive=signin_cta]":"signin","click a[data-primitive=upload]":"upload","keydown a[data-primitive=upload]":"uploadOnTabKey","click a[data-primitive=create_new_documents]":"create_new_documents","click a[data-primitive=search]":"search","click a[data-primitive=change_view]":"change_view","click a[data-primitive=sort_by_name]":"sortByName","keydown a[data-primitive=sort_by_name]":"sortOnTabKey","click a[data-primitive=sort_by_date]":"sortByDate","click div.content__view-more button":"openBoxPage","change input[type=file]":"setUploadingItems","dragenter div.content":"dragenter","dragleave div.content":"dragleave","drop div.content":"drop","dragover div.content":"dragover","dragend div.content":"dragend","mouseover div.content":"dragend"},switchSignInSVG:function(e,key){var $signSVG=this.$el.find(".large_sign_in_svg object[class=indicator]");switch(key){case"contrast":$signSVG.attr("data","images/signIn_large_contrast.svg");break;case"lowlight":$signSVG.attr("data","images/signIn_large_lowlight.svg");break;default:$signSVG.attr("data","images/signIn_large.svg")}},signin:function(){this.hideSignIn();this.collection.trigger("signin");window.open("https://ibm.app.box.com/api/oauth2/authorize?response_type=code&client_id="+auth.client_id+"&state=authenticated&redirect_uri="+auth.redirect_uri,"_self");this.tagEvent({ev:"click",action:"button",name:"Sign In",section:"none",target:"none"})},hideSignIn:function(){this.$el.find("#large_sign_in").hide()},showAllContent:function(){this.$el.find("#top-menu").show();this.$el.find("#large_main_content").show();this.$el.find("#footer").show();this.showHideLoading("hide")},back:function(){var self=this;self.$el.find("#all").fadeIn();self.$el.find("#back").hide();self.$el.find("#large_main_content").removeClass("fadeInRightBig");self.$el.find("#large_main_content").addClass("fadeOutRightBig");setTimeout(function(){self.$el.find("#large_main_content").removeClass("fadeOutRightBig")},500);this.trigger("request",{id:"0"});this.tagEvent({ev:"click",action:"link",name:"back",section:"parent folder",target:"none"})},addItem:function(item_model){this.showAllContent();var item_view=new w3n.components.boxLargeItemView({model:item_model,parent_component:this});item_view.render();var data=item_model.toJSON();if(data.has_collaborations){this.$el.find("#collaboration_list").append(item_view.$el)}else{this.$el.find("#private_list").append(item_view.$el)}item_view.$el.find(".item-content.folder a").on("click",{model:item_model},this.goToSubFolder.bind(this))},removeItem:function(item_model){this.$el.find("[attrId="+item_model.toJSON().id+"]").parent().remove()},sortItems:function(params){var array=this.collection.toJSON();array=_.sortBy(array,function(o){switch(params.type){case"modified_at":return new Date(o[params.type]);default:return o[params.type]}});if(params.orders=="desc"){array=array.reverse()}this.collection.reset(array)},clearAllItems:function(){this.$el.find(".content__section__list").empty()},addLoadingItem:function(name){var self=this;self.uploadingFileCount++;var int=0;self.hideSortMenu();self.cardType="large";var item_view=new w3n.components.boxUploadingItem({json:{name:name},parent_component:self});self.listenTo(item_view,"upload-done",self.uploadDone);self.listenTo(item_view,"upload-cancel",self.uploadCancel);self.$el.find("#upload_list").append(item_view.$el)},goToSubFolder:function(event){var title=$(event.currentTarget).html();this.setNavTitle(title);this.$el.find("#large_main_content").addClass("fadeInRightBig");var self=this;setTimeout(function(){self.$el.find("#large_main_content").removeClass("fadeInRightBig")},500);this.parent=event.data.model.toJSON().parent;this.triggerRequest(event.data.model.id);this.tagEvent({ev:"click",action:"link",name:"sub folder",section:"sub folder",target:"none"})},setNavTitle:function(title){this.$el.find("#all").hide();this.$el.find("#back a>span").html(title);this.$el.find("#back").fadeIn();this.$el.find("#back a").focus()},triggerRequest:function(id){this.trigger("request",{id:id})},requestItems:function(params){var self=this;self.collection.proxy.buildUrl(params.id);self.showHideLoading("show");var token=$.cookie("access_token");self.collection.fetch({uncache:true,token:token}).done(function(){self.showHideLoading("hide");if(self.sortParams){self.sortItems(self.sortParams)}else{self.render()}console.log("..............request items success..................")})},sortByName:function(){var sortNode=this.$el.find("#sort_by_name");sortNode.find("i").toggleClass("icon-awf-chevron-down");sortNode.find("i").toggleClass("icon-awf-chevron-up");sortNode.addClass("active");this.$el.find("#sort_by_date").removeClass("active");var orders=sortNode.find("i").hasClass("icon-awf-chevron-down")?"desc":"asc";this.sortParams={type:"name",orders:orders};this.trigger("sort",this.sortParams);this.tagEvent({ev:"click",action:"link",name:"sort_by_name",section:"title",target:"none"})},sortOnTabKey:function(event){if(event.keyCode===9&&event.shiftKey){event.preventDefault();this.$el.find("#right_nav li a:visible").last().focus()}},sortByDate:function(){var sortNode=this.$el.find("#sort_by_date");sortNode.find("i").toggleClass("icon-awf-chevron-down");sortNode.find("i").toggleClass("icon-awf-chevron-up");sortNode.addClass("active");this.$el.find("#sort_by_name").removeClass("active");var orders=sortNode.find("i").hasClass("icon-awf-chevron-down")?"desc":"asc";this.sortParams={type:"modified_at",orders:orders};this.trigger("sort",this.sortParams);this.trigger("sort",{type:"modified_at",orders:orders});this.tagEvent({ev:"click",action:"link",name:"sort_by_date",section:"title",target:"none"})},upload:function(){var node=this.$el.find("input[type=file]");var evt=document.createEvent("MouseEvents");evt.initEvent("click",true,true);node[0].dispatchEvent(evt);this.tagEvent({ev:"click",action:"icon",name:"Upload",section:"toolbar",target:"none"})},uploadOnTabKey:function(event){if(event.keyCode===9){event.preventDefault();this.$el.find("#sort_by_name").focus()}},uploadDone:function(params){this.showMessage(params.message);if(this.uploadingFileCount===0){this.showSortMenu()}},uploadCancel:function(){if(this.uploadingFileCount===0){this.showSortMenu()}},setUploadingItems:function(event){var self=this;_.forEach(event.target.files,function(file){self.addLoadingItem(file.name)});var file=$(event.target);file.after(file.clone(true).val(""));file.remove()},create_new_documents:function(){this.tagEvent({ev:"click",action:"icon",name:"create new document",section:"toolbar",target:"none"})},search:function(){this.tagEvent({ev:"click",action:"icon",name:"search",section:"toolbar",target:"none"})},change_view:function(){this.tagEvent({ev:"click",action:"icon",name:"change view",section:"toolbar",target:"none"})},openBoxPage:function(){this.tagEvent({ev:"click",action:"button",name:"Go to Box",section:"none",target:"none"});window.open("https://ibm.app.box.com/files/0/","_blank")},dragenter:function(e){e.preventDefault();var list=$(e.target).find(".content__section__list");if(!list[0]){this.$el.find("#drag-tips").show()}this.hideMessage();console.log("..dragenter...")},dragleave:function(e){e.preventDefault();e.stopPropagation();console.log("..dragleave...")},drop:function(event){var dateTransfer=event.dataTransfer||event.originalEvent.dataTransfer;event.preventDefault();this.$el.find("#drag-tips").hide();if(!$(event.target).parents(".content__section__list")[0]){var self=this;_.forEach(dateTransfer.files,function(file){self.addLoadingItem(file.name)})}console.log(event)},dragover:function(e){e.preventDefault();console.log("..dragover...")},dragend:function(e){e.preventDefault();this.$el.find("#drag-tips").hide()},addMessageBar:function(){this.message_bar=this.generateMessageBar({messages:{success:"File has been uploaded successfully."}});this.$el.append(this.message_bar.$el)},addMessageBarForShare:function(){this.message_bar_share=this.generateMessageBar({messages:{success:"You have copied this link to clipboard."}});this.$el.find(".share-dialog").append(this.message_bar_share.$el)},generateMessageBar:function(params){var message_bar=new app.components.message_bar(params);message_bar.render();return message_bar},showMessage:function(message){var self=this;if(!self.message_bar.is_showing){self.message_bar.show("success",message).delay(1e3).fadeOut("400",function(){self.message_bar.is_showing=false})}else{setTimeout(function(){self.message_bar.show("success",message).delay(1e3).fadeOut("400",function(){self.message_bar.is_showing=false})},2e3)}},showMessageForShare:function(params){this.message_bar_share.show(params.status,params.message).delay(3e3).fadeOut("400")},showFailedMessageForShare:function(){this.message_bar_share.show("error","Oops, the Connections service is not available. Please refresh the page and try it later.").delay(3e3).fadeOut("400")},hideMessage:function(){},createLoading:function(params){this.setLoader()},createLoadingForShare:function(action){action=action||"hide";var $share_overlay=this.$el.find(".share-dialog");if(action=="hide"){$share_overlay.find(".loading-mark").hide()}else{if(_.isEmpty($share_overlay.find(".loading-mark"))){$share_overlay.append(this.loading_html)}$share_overlay.find(".loading-mark").show()}},showHideLoading:function(action){action=action||"hide";if(action=="hide"){this.$el.find(".loading-mark").hide()}else{if(_.isEmpty(this.$el.find(".loading-mark"))){this.$el.append(this.loading_html)}this.$el.find(".loading-mark").show()}},showHideLoadingForShare:function(action){action=action||"hide";this.createLoadingForShare(action)},hideSortMenu:function(){this.$el.find(".content__sort-by").hide()},showSortMenu:function(){this.$el.find(".content__sort-by").show()},tagEvent:function(params){var parameters={ev:params.ev,action:params.action,module:"box:large",name:params.name,section:params.section,target:params.target||"none",group:"YourIBM"};this.metrics.tagEvent(parameters)}})})();(function(){w3n.components=w3n.components||{};w3n.components.BoxMediumItemView=app.base.views.BaseView.extend({template:w3n.templates.components.box["box-medium-item.html"],initialize:function(params){this.params=params;this.data=this.model.toJSON();this.type=this.data.type;this.$el=$(this.template);this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"box:medium-item"});this.render()},render:function(){this.data=this.model.toJSON();var context={id:this.data.id,folder_type:this.data.type==="folder"&&!this.data.has_collaborations?"private-folder":"",icon:this.data.type=="folder"?this.data.has_collaborations?"icon-awf-folder-shared":"icon-awf-folder":"icon-awf-file-text",name:this.truncFileName(this.data.name),size:this.data.size,created_by:this.data.created_by,modified_at:this.data.modified_at,isFolder:this.data.type=="folder"?true:false,type:this.data.type};this.$el.html(Mustache.render(this.$el.html(),context));if(this.data.type=="file"&&this.data.download_url){this.generateSocialActions()}return this},events:{},generateSocialActions:function(){var params={items:[{icon:"download",title:"Download this file",evt:"click",callback:function(){window.open(this.data.download_url,"_blank");tagEvent({ev:"click",action:"icon",name:"download",section:"file actions",target:"none"})}.bind(this)}]};this.social_actions=new app.components.socialActions(params);this.social_actions.render();this.$el.append(this.social_actions.$el);
},truncFileName:function(name){switch(this.data.type){case"file":var array=name.split(".");var fileType=array[array.length-1];name=_.trunc(array[0],18)+"."+fileType;break;default:name=_.trunc(name,30);break}return name},tagEvent:function(params){var parameters={ev:params.ev,action:params.action,module:"box:medium-item",name:params.name,section:params.section,target:params.target||"none",group:"YourIBM"};this.metrics.tagEvent(parameters)}})})();(function(){var config={dev:{client_id:"9sou6lpvluuhyeu7o14zu0zfmwiqtr40",client_secret:"W1EfP4vf2YozndideHCTE3GRfUdPVKS7",redirect_uri:"https://devpccggww3n01.w3-969.ibm.com/your-ibm/build/index.html"},staging:{client_id:"4hill0w8zl48z1v75tvw6o5juvdul156",client_secret:"72pHlj7dOzPmqwOPRopDr25mBxpIupqq",redirect_uri:"https://w3-pre.ibm.com"},production:{client_id:"zkba11udfbajr3d159j3oncqvlws3c0o",client_secret:"PBHci7SbMew4TUuB11Nrbk5gH2wCISBU",redirect_uri:"https://w3.ibm.com"}};var auth=config.dev;var href=window.location.hostname;if(href=="w3-pre.ibm.com"){auth=config.staging}else if(href=="w3.ibm.com"){auth=config.production}w3n.components=w3n.components||{};w3n.components.boxMediumView=app.base.views.BaseView.extend({template:w3n.templates.components.box["box-medium.html"],loading_html:app.templates.components["loading-mark"]["loading-mark.html"],initialize:function(params){this.params=params;this.$container=params.$container;this.medium_methods=params.medium_methods;this.$el=$(this.template);this.$container.append(this.$el);this.listenTo(this,"request",this.requestItems);this.listenTo(this.collection,"add",this.addItem);this.listenTo(this.collection,"remove",this.removeItem);this.listenTo(this.collection,"signin",this.hideSignIn);this.addMessageBar();this.uploadingFileCount=0;this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"box:medium"});this.bindevents();this.switchSignInSVG(null,awf.page.themes.current_theme)},render:function(){var self=this;this.clearAllItems();_.forEach(this.collection.models,function(item_model){self.addItem(item_model)});return this},bindevents:function(){this.$el.find("button[data-primitive=signin_cta]").on("click",this.signin.bind(this));this.$el.find("#upload_cta").on("click",this.showUploadOverlay.bind(this));this.$el.find("button[data-primitive=cancel_upload]").on("click",this.onClickCancelCta.bind(this));this.$el.find("a[data-primitive=trigger_upload]").on("click",this.triggerUpload.bind(this));this.$el.find("#file-medium-upload").on("change",this.setUploadingItems.bind(this));this.$el.find("button[data-primitive=close_upload]").on("click",this.hideUploadSuccessOverlay.bind(this));this.$el.find("button[data-primitive=file-medium-upload]").on("click",this.setUploadingItems.bind(this));this.$el.find(".upload-message__link a").on("click",this.openFileLink.bind(this));this.$el.find("a[data-primitive=copy]").on("click",this.onClickCopy.bind(this));this.$el.find("div.upload-overlay").on("dragenter",this.dragenter.bind(this));this.$el.find("div.upload-overlay").on("dragover",this.dragover.bind(this));this.$el.find("div.content__overlay").on("dragleave",this.dragleave.bind(this));this.$el.find("div.content").on("drop",this.drop.bind(this));this.$el.find("div.content").on("dragenter",this.dragenter.bind(this));this.$el.find("div.content").on("dragover",this.dragover.bind(this));awf.page.themes.on("change",this.switchSignInSVG.bind(this))},events:{},switchSignInSVG:function(e,key){var $signSVG=this.$el.find(".medium_sign_in_svg object[class=indicator]");switch(key){case"contrast":$signSVG.attr("data","images/signIn_medium_contrast.svg");break;case"lowlight":$signSVG.attr("data","images/signIn_medium_lowlight.svg");break;default:$signSVG.attr("data","images/signIn_medium.svg")}},signin:function(){this.hideSignIn();this.showHideLoading("show");this.collection.trigger("signin");window.open("https://ibm.app.box.com/api/oauth2/authorize?response_type=code&client_id="+auth.client_id+"&state=authenticated&redirect_uri="+auth.redirect_uri,"_self");this.tagEvent({ev:"click",action:"button",name:"Sign In",section:"none",target:"none"})},hideSignIn:function(){this.$el.find("#medium_sign_in").hide()},showSignIn:function(){if(w3n.utils.browser.userAgent.ie){this.$el.find(".indicator").addClass("no-svg")}this.$el.find("#medium_sign_in").show()},addItem:function(item_model){this.hideSignIn();this.$el.find("#medium_main_content").show();console.warn('MIGRATION TODO: convert "box-medium-item" to Backbone');var item_view=new w3n.components.BoxMediumItemView({model:item_model,parent_component:this.params.component});var data=item_model.toJSON();this.$el.find("#file_list").append(item_view.$el);item_view.$el.find(".item-content.folder a").on("click",{model:item_model},this.requestSubFolder.bind(this))},removeItem:function(item_model){this.$el.find("[attrId="+item_model.toJSON().id+"]").parent().remove()},clearAllItems:function(){this.$el.find("#file_list").empty()},requestSubFolder:function(event){var folderName=$(event.currentTarget).html();this.triggerFlipcard();this.triggerRequest(event.data.model.id);setTimeout(function(){this.collection.trigger("setParent",{model:event.data.model})}.bind(this),300);this.tagEvent({ev:"click",action:"link",name:"sub folder",section:"sub folder",target:"none"})},triggerFlipcard:function(){this.medium_methods.flipCard();this.collection.trigger("syncUploadingItems",{files:this.uploadingFiles})},triggerRequest:function(id){this.trigger("request",{id:id})},requestItems:function(params){var self=this;var token=$.cookie("access_token");self.collection.proxy.buildUrl(params.id);self.collection.fetch({uncache:true,token:token}).done(function(){self.render()})},setUploadingItems:function(event){var self=this;if(self.uploadingFileCount===0){var name=event.target.files[0].name;self.addLoadingItem(name);self.uploadingFileCount++;self.$el.find("#uploading_list").show();self.hideUploadOverlay(event)}var file=$(event.target);file.after(file.clone(true).val(""));file.remove()},addLoadingItem:function(name){var self=this;self.cardType="medium";var item_view=new w3n.components.boxUploadingItem({json:{name:name},parent_component:self});self.$el.find("#uploading_list").prepend(item_view.$el);self.listenTo(item_view,"upload-done",self.uploadDone);self.listenTo(item_view,"upload-cancel",self.uploadCancel)},uploadDone:function(params){this.showUploadSuccessOverlay();this.$el.find("#uploading_list").hide()},uploadCancel:function(params){if(this.uploadingFileCount===0){this.$el.find("#uploading_list").hide()}},showUploadSuccessOverlay:function(){this.$el.find("#upload-message").removeClass("fadeOutUpBig").addClass("fadeInDownBig");this.$el.find("#upload-message").show();this.$el.find("#upload-overlay").hide();var self=this;setTimeout(function(){self.$el.find("#upload-message").find("button").focus()},1e3)},hideUploadSuccessOverlay:function(){var self=this;self.$el.find("#upload-message").removeClass("fadeInDownBig").addClass("fadeOutUpBig");setTimeout(function(){self.$el.find("#upload-message").hide();self.$el.find("#medium_main_content").show();self.$el.find(".item-content a").eq(0).focus()},500);self.tagEvent({ev:"click",action:"link",name:"close messgae overlay",section:"message overlay",target:"none"})},onClickCopy:function(event){var text="https://ibm.app.box.com/files/0/f/0";var params=this.copyToClipboard(text);this.showMessage(params)},copyToClipboard:function(text){var textArea=document.createElement("textarea");textArea.style.position="fixed";textArea.style.top=0;textArea.style.left=0;textArea.style.width="2em";textArea.style.height="2em";textArea.style.padding=0;textArea.style.border="none";textArea.style.outline="none";textArea.style.boxShadow="none";textArea.style.background="transparent";textArea.value=text;document.body.appendChild(textArea);textArea.select();var msg,status="success";try{var successful=document.execCommand("copy");status=successful?"success":"error";msg=successful?"This file's link has been copied to clipboard!":"Oops, faled to copy.";console.log("Copying text command was "+msg)}catch(err){msg="Oops, failed to copy.";status="error";console.log("Oops, failed to copy")}document.body.removeChild(textArea);return{status:status,message:msg}},onClickCancelCta:function(event){this.hideUploadOverlay(event);this.$el.find("#upload_cta").focus();this.tagEvent({ev:"click",action:"button",name:"Cancel",section:"upload",target:"none"})},showUploadOverlay:function(){this.$el.find("#medium_main_content").hide();this.$el.find("#upload-overlay").removeClass("fadeOutUpBig");this.$el.find("#upload-overlay").show();this.$el.find("#upload-overlay").addClass("fadeInDownBig");this.$el.find("#upload-message").addClass("fadeInDownBig",200);var self=this;setTimeout(function(){self.$el.find(".upload-overlay__href a").focus()},1e3);this.tagEvent({ev:"click",action:"button",name:"Upload",section:"upload",target:"none"})},hideUploadOverlay:function(event){var self=this;self.$el.find("#medium_main_content").show();self.$el.find("#upload-overlay").hide();if(event&&event.type=="click"){}},showContentOverlay:function(){this.$el.find("#content_overlay").show()},hideContentOverlay:function(){this.$el.find("#content_overlay").hide()},triggerUpload:function(){var node=this.$el.find("input[type=file]");var evt=document.createEvent("MouseEvents");evt.initEvent("click",true,true);node[0].dispatchEvent(evt);this.tagEvent({ev:"click",action:"link",name:"browse for a file",section:"upload",target:"none"})},dragenter:function(event){event.preventDefault();this.showContentOverlay();this.hideUploadOverlay()},dragleave:function(event){event.preventDefault();this.hideContentOverlay()},drop:function(event){event.preventDefault();this.hideContentOverlay();var dateTransfer=event.dataTransfer||event.originalEvent.dataTransfer;var self=this;if(self.uploadingFileCount===0){self.addLoadingItem(dateTransfer.files[0].name);self.$el.find("#uploading_list").show();self.uploadingFileCount++}self.tagEvent({ev:"drop",action:"icon",name:"drop to upload",section:"upload",target:"none"})},dragover:function(e){e.preventDefault()},addMessageBar:function(){this.message_bar=this.generateMessageBar({messages:{success:"File has been uploaded successfully."}});this.$el.append(this.message_bar.$el)},generateMessageBar:function(params){var message_bar=new app.components.message_bar(params);message_bar.render();return message_bar},showMessage:function(params){this.message_bar.show(params.status,params.message).delay(3e3).fadeOut("400")},hideMessage:function(){var self=this;self.$el.find("#upload_message").removeClass("fadeInDownBig").addClass("fadeOutUpBig");setTimeout(function(){self.$el.find("#upload_message").hide();self.$el.find("#medium_main_content").show();self.$el.find("#upload_cta").focus()},500);self.tagEvent({ev:"click",action:"button",name:"Close",section:"message overlay",target:"none"})},openFileLink:function(){this.tagEvent({ev:"click",action:"link",name:"open file link",section:"message overlay",target:"none"})},createLoading:function(params){this.setLoader()},showHideLoading:function(action){action=action||"hide";if(action=="hide"){this.$el.find(".loading-mark").hide()}else{if(_.isEmpty(this.$el.find(".loading-mark"))){this.$el.append(this.loading_html)}this.$el.find(".loading-mark").show()}},tagEvent:function(params){var parameters={ev:params.ev,action:params.action,module:"box:medium",name:params.name,section:params.section,target:params.target||"none",group:"YourIBM"};this.metrics.tagEvent(parameters)}})})();(function(){w3n.components=w3n.components||{};w3n.components.boxUploadingItem=app.base.views.BaseView.extend({template:w3n.templates.components.box["box-uploading-item.html"],initialize:function(params){this.params=params;this.json=params.json;this.$el=$(this.template);this.render(this.json.name);this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"box:large-item"})},render:function(name){this.data=this.json;this.name=name;this.cardType=this.params.parent_component.cardType;this.$el.html(_.template(this.$el.html())({name:this.cardType=="large"?name:this.truncFileName(name)}));this.generateSocialActions();this.setLoadingProgressBar(name);return this},events:{},generateSocialActions:function(){var self=this;var params={items:[{icon:"pause",title:"Stop uploading",evt:"click",callback:function(event){var $target=$(event.currentTarget);var eventName="";$target.find("a").toggleClass("icon-awf-rotate-right").toggleClass("icon-awf-pause");if($target.find("a").hasClass("icon-awf-rotate-right")){$target.find("a").attr("title","Continue uploading");eventName="Stop uploading";window.clearInterval(self.clearNum)}else{$target.find("a").attr("title","Stop uploading");eventName="Continue uploading";self.clearNum=setInterval(function(){self.$el.find(".upload-progress-bar__bar").css("width",10*self.int+"%");if(self.int==10){window.clearInterval(self.clearNum);self.$el.remove();var message=self.name+" has been uploaded successfully.";self.params.parent_component.uploadingFileCount--;self.trigger("upload-done",{message:message,name:self.name})}self.int++},500)}var module="Box:"+self.cardType;self.tagEvent({ev:"click",action:"icon",module:module,name:eventName,section:"file actions",target:"none"})}},{icon:"op-times",title:"Cancel this upload",evt:"click",callback:function(event){$(event.currentTarget).closest(".content__section__list__item").remove();self.params.parent_component.uploadingFileCount--;self.trigger("upload-cancel",{name:self.name});window.clearInterval(self.clearNum);var module="Box:"+self.cardType;self.tagEvent({ev:"click",action:"icon",module:module,name:"cancel",section:"file actions",target:"none"})}}]};this.social_actions=new app.components.socialActions(params);this.social_actions.render();this.$el.append(this.social_actions.$el)},setLoadingProgressBar:function(name){var self=this;self.int=0;self.clearNum=setInterval(function(){self.$el.find(".upload-progress-bar__bar").css("width",10*self.int+"%");if(self.int==10){window.clearInterval(self.clearNum);self.$el.remove();var message=name+" has been uploaded successfully.";self.params.parent_component.uploadingFileCount--;self.trigger("upload-done",{message:message,name:name})}self.int++},500)},truncFileName:function(name){var array=name.split(".");var fileType=array[array.length-1];name=_.trunc(array[0],18)+"."+fileType;return name},tagEvent:function(params){var parameters={ev:params.ev,action:params.action,module:params.module,name:params.name,section:params.section,target:params.target||"none",group:"YourIBM"};this.metrics.tagEvent(parameters)}})})();(function(){var utils={};utils.unitWidthPixel="11px";utils.unitWidthPercent="14.28%";utils.milliSecondsPerDay=1e3*60*60*24;utils.DAYSBEFORETODAY=365;utils.DAYSAFTERTODAY=365;utils.DAYSTOSCROLL=730;utils.getWidth=function(startDate,endDate,uom,offset){if(!(offset instanceof Number||typeof offset==="number"))offset=0;var start=moment(startDate);var end=moment(endDate);var days=end.diff(start,"days");var unitWidth=uom==="%"?utils.unitWidthPercent:utils.unitWidthPixel;var unit=parseFloat(unitWidth.replace(uom,""));var width=days*unit+offset;return width+uom};utils.getUnit=function(){return _.parseInt(utils.unitWidthPixel.replace("px",""))};utils.previousMonth=function(date,n){var d=new Date(date||new Date);d.setDate(1);d.setMonth(d.getMonth()-(n||1));d.setHours(0,0,0,0);return d};utils.calendarModes={daily:1,weekly:2,monthly:3,quarterly:4,yearly:5,currentWeek:6};utils.createRange=function(pStartDate,pEndDate){var startDate=moment(pStartDate).startOf("day");var endDate=moment(pEndDate).startOf("day");var reverse=startDate.isAfter(endDate);return{startDate:reverse?endDate.toDate():startDate.toDate(),endDate:reverse?startDate.toDate():endDate.toDate()}};utils.datesHaveOverlap=function(range1,range2){return range1.startDate<=range2.endDate&&range1.endDate>=range2.startDate};utils.getOverlapArray=function($task){var overlap=[],box=$task.position();var $iterator=$task;while($iterator.next(".visible").length>0){$iterator=$iterator.next(".visible");var sibBox=$iterator.position();if(sibBox&&sibBox.left<box.left+$task.width()){overlap.push($iterator)}}return overlap};utils.getMediumOverlapArray=function($task){var overlap=[],box=$task.position();var $iterator=$task;while($iterator.next(".visible").length>0){$iterator=$iterator.next(".visible");var sibBox=$iterator.position();if(sibBox&&(sibBox.left<box.left+$task.width()&&sibBox.top<box.top)){sibBox.top=box.top}if(sibBox&&(sibBox.left<box.left+$task.width()&&sibBox.top===box.top)){overlap.push($iterator)}}return overlap};utils.isDateInRange=function(date,range){return moment(range.startDate).diff(moment(date))<=0&&moment(range.endDate).diff(moment(date))>=0};utils.locale={en:{month_names:["January","February","March","April","May","June","July","August","September","October","November","December"],month_names_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}};utils.getShortDay=function(date){var days=["Su","M","T","W","Th","F","S"];return days[date.getDay()]};utils.getMonthName=function(date,lang){lang=lang&&lang in utils.locale?lang:"en";return utils.locale[lang].month_names[date.getMonth()]};utils.getMonthNameShort=function(date,lang){lang=lang&&lang in utils.locale?lang:"en";return utils.locale[lang].month_names_short[date.getMonth()]};utils.getWeekOfMonth=function(exact){var month=this.getMonth();var year=this.getFullYear();var firstWeekday=new Date(year,month,1).getDay();var lastDateOfMonth=new Date(year,month+1,0).getDate();var offsetDate=this.getDate()+firstWeekday-1;var index=1;var weeksInMonth=index+Math.ceil((lastDateOfMonth+firstWeekday-7)/7);var week=index+Math.floor(offsetDate/7);if(exact||week<2+index)return week;return week===weeksInMonth?index+5:week};w3n.utils.calendarComponent=utils;w3n.components.calendar={}})();(function(){var calendarUtils=w3n.utils.calendarComponent;var CalendarBase=app.base.views.BaseView.extend({initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);_.bindAll(this,"render","renderHeader");if(options||(options={})){this.startDate=options.startDate||new Date;this.endDate=options.endDate||this.startDate;this.range=calendarUtils.createRange(this.startDate,this.endDate);this.headerEl=options.headerEl;this.scrollPosition=options.scrollPosition;this.dataModel=options.dataModel}this.listenToOnce(this.dataModel,"error",function(){this.model.trigger.apply(this.model,["error"].concat(Array.prototype.slice.call(arguments)))});this.$el.addClass("calendar-component")},render:function(){var html=Mustache.render(this.template,this.model.attributes);if(this.headerEl){this.$el.html(html)}else{this.$el.append(html)}$(".content.wc-parent").scrollTop(this.scrollPosition)},renderHeader:function(options){options=options||{};this.header=this.header?this.header.setElement(this.headerEl||this.el):new w3n.components.calendar.Header({el:this.headerEl||this.el,template:options.template,events:options.events,model:options.model});this.header.render();this.$header=this.header.$el},errorButtonFunction:function(e){var errorType=e&&e.target?$(e.target).data("error-type"):"";switch(errorType){case app.BackboneErrorTypes.sso:var model=this.dataModel?this.dataModel.collection:this.model||this.collection;model.fetch({skipSSO:true,uncache:true}).then(console.log.bind(console));break}}});w3n.components.calendar.Base=CalendarBase})();(function(){var calendarUtils=w3n.utils.calendarComponent;var CalendarCurrentWeek=w3n.components.calendar.Base.extend({initialize:function(options){w3n.components.calendar.Base.prototype.initialize.apply(this,arguments);this.template=w3n.templates.components.calendar["current-week-calendar.html"];this.getCurrentWeek()},render:function(){var headerTemplate=w3n.templates.components.calendar["current-week-header.html"];var headerModel=new app.base.models.BaseModel({weeks:this.weeks});this.renderHeader({template:headerTemplate,model:headerModel});w3n.components.calendar.Base.prototype.render.apply(this,arguments)},getCurrentWeek:function(date){var today=date||new Date;var todayDay=today.getDate();var yesterday=new Date(today);yesterday.setDate(today.getDate()-1);var yesterdayDay=yesterday.getDate();var yesterdayMonth=calendarUtils.getMonthName(yesterday,"en");var lastDay=new Date(today);lastDay.setDate(today.getDate()+5);var lastDayMonth=calendarUtils.getMonthName(lastDay,"en");var monthTitle;if(yesterdayMonth===lastDayMonth){monthTitle=yesterdayMonth}else{monthTitle=yesterdayMonth+" / "+lastDayMonth}this.weeks=[];this.weeks.push({monthTitle:monthTitle,days:[]});this.weeks[0].days.push({dayClass:"not-today",day:yesterdayDay,dayName:calendarUtils.getShortDay(yesterday)},{dayClass:"today",day:todayDay,dayName:calendarUtils.getShortDay(today)});for(var i=1;i<=5;i++){var day=new Date(today);day.setDate(today.getDate()+i);var dayObj={dayClass:"not-today",day:day.getDate(),dayName:calendarUtils.getShortDay(day)};this.weeks[0].days.push(dayObj)}}});w3n.components.calendar.CurrentWeek=CalendarCurrentWeek})();(function(){var CalendarHeader=app.base.views.BaseView.extend({initialize:function(options){if(options){this.template=options.template;this.events=options.events}}});w3n.components.calendar.Header=CalendarHeader})();(function(){var calendarUtils=w3n.utils.calendarComponent;var CalendarWeekly=w3n.components.calendar.Base.extend({initialize:function(options){_.bindAll(this,"today","prev","next","render","generateMonths","generateWeeks");w3n.components.calendar.Base.prototype.initialize.apply(this,arguments);this.scrollTop=0;if(options||(options={})){this.daysToScroll=options.daysToScoll||w3n.utils.calendarComponent.DAYSTOSCROLL;this.daysToShow=options.daysToShow||this.daysToScroll;this.daysBeforeToday=options.daysBeforeToday||w3n.utils.calendarComponent.DAYSBEFORETODAY;this.startDate=options.startDate;this.endDate=options.endDate;this.headerEl=options.headerEl}this.template=w3n.templates.components.calendar["weekly-calendar.html"];this.generateMonths(this.range)},render:function(){var headerTemplate=w3n.templates.components.calendar["weekly-calendar-header.html"];this.renderHeader({template:headerTemplate,events:{"click .today-btn":this.today,"click .prev":this.prev,"click .next":this.next},model:this.model});if(this.model&&this.model.attributes){if(calendarUtils.isDateInRange(new Date,this.range)){this.model.attributes.todayDisplay="block";this.model.attributes.todayPosition=calendarUtils.getWidth(this.startDate,new Date,"px",33)}else{this.model.attributes.todayDisplay="none"}}w3n.components.calendar.Base.prototype.render.apply(this,arguments)},next:function(){this.scrollTop=this.$el.scrollTop();this.startDate=this.endDate;this.endDate=moment(this.startDate).add(this.daysToScroll,"days").toDate();this.range=calendarUtils.createRange(this.startDate,this.endDate);this.generateMonths(this.range);this.render();this.trigger("next")},prev:function(){this.scrollTop=this.$el.scrollTop();this.endDate=this.startDate;this.startDate=moment(this.endDate).subtract(this.daysToScroll,"days").toDate();this.range=calendarUtils.createRange(this.startDate,this.endDate);this.generateMonths(this.range);this.render();this.trigger("prev")},today:function(){this.scrollTop=0;var nextFriday=w3n.utils.date.nextDay((new Date).setHours(0,0,0,0),5);this.startDate=moment(nextFriday).subtract(this.daysBeforeToday,"days").toDate();this.endDate=moment(this.startDate).add(this.daysToShow,"days").toDate();this.range=calendarUtils.createRange(this.startDate,this.endDate);this.generateMonths(this.range);this.render();this.trigger("today")},generateMonths:function(){var start=new Date(this.range.startDate);start.setDate(1);var months=[];for(var date=start;date<=this.range.endDate;date.setMonth(date.getMonth()+1)){var m1=moment(this.range.endDate);var m2=moment(this.range.startDate);var moreThanOneMonthDiff=Math.round(m1.diff(m2,"months",true))>1;var eoMonth=m2.endOf("month").toDate();var isFirstMonth=moment(date).month()===moment(this.range.startDate).month();var firstMonthIsLessThanTenDays=moreThanOneMonthDiff?Math.round(moment(eoMonth).diff(moment(this.range.startDate),"days",true))<10:false;var suppressMonthName=isFirstMonth&&moreThanOneMonthDiff&&firstMonthIsLessThanTenDays;var month={shortName:suppressMonthName?"Â ":calendarUtils.getMonthNameShort(date,"en"),suppressedMonth:suppressMonthName?"suppressed-month":"",weeks:[]};months.push(month);this.generateWeeks(month,date)}this.model.set("months",months)},generateWeeks:function(month,pDate){var start=w3n.utils.date.nextDay(pDate,5);var end=new Date(pDate.getFullYear(),pDate.getMonth()+1,0);var tempDate=new Date(pDate);var monthStart,monthEnd;var finalWeek;tempDate.setDate(1);monthStart=new Date(tempDate);monthEnd=new Date(end);for(var date=new Date(start);date<=end;date.setDate(date.getDate()+7)){var daysBefore=Math.floor((date-monthStart)/calendarUtils.milliSecondsPerDay);var daysAfter=Math.floor((monthEnd-date)/calendarUtils.milliSecondsPerDay);var prevMonthEnd=new Date(monthStart.setDate(0));var marginLeft=0;if(date!==start){if(daysBefore<7){if(moment(date).diff(moment(this.range.startDate))!==0){marginLeft=calendarUtils.getWidth(prevMonthEnd,date,"px")}}}var weekend=new Date(date);weekend.setDate(daysAfter<7?monthEnd.getDate():weekend.getDate()+7);var width=calendarUtils.getWidth(date,weekend,"px");var weekIsVisible=date>=this.range.startDate&&date<=this.range.endDate;var week={day:date.getDate(),marginLeft:marginLeft,width:width,visible:weekIsVisible};month.weeks.push(week);finalWeek=new Date(date)}},adjustHeight:function(newHeight){if(newHeight&&_.isNumber(newHeight)){this.$el.find(".calendar-overlay").height(newHeight)}}});w3n.components.calendar.Weekly=CalendarWeekly})();(function(){if(!w3n.base.components)w3n.base.components={};w3n.base.components.carousel=app.base.views.BaseView.extend({template:w3n.templates.components.carousel["carousel-backbone.html"],initialize:function(opts){app.base.views.BaseView.prototype.initialize.call(this,opts);this.limit=!opts.limit?null:opts.limit;this.partials=opts.partials||{};if(!opts.slideTemplate)throw new Error("add a slideTemplate");this.slideTemplate=opts.slideTemplate;if(opts.carouselContainerClass)this.carouselContainerClass=opts.carouselContainerClass;if(opts.carouselId)this.carouselId=opts.carouselId;this.prependedItems=new app.base.collections.BaseCollection;this.appendedItems=new app.base.collections.BaseCollection;this.rendered=false;this.activeIndex=0;this.activeCid=null;this.listenTo(this.prependedItems,"update",function(){this.render()}.bind(this));this.listenTo(this.appendedItems,"update",function(){this.render()}.bind(this))},events:{"click .carousel-angle>button":"angleClick",'click ul[data-primitive="pointers"] li button':"dotClick"},prependItem:function(model){if(model instanceof Backbone.Model)this.prependedItems.unshift(model);else this.prependedItems.unshift(new Backbone.Model(model));return this},prependItems:function(models){models.reverse().forEach(this.prependItem);return this},appendItem:function(model){if(model instanceof Backbone.Model)this.appendedItems.push(model);else this.appendedItems.push(new Backbone.Model(model));return this},appendItems:function(models){models.forEach(this.appendItem);return this},render:function(){this.items=this.getItemsWithIndex(this.limitItems(this.limit));var slidesHtml=this.items.map(function(item,i){return Mustache.render(item.template||this.slideTemplate,_.extend({itemWidth:100/this.items.length,tabIndex:i===this.activeIndex?0:-1},item),_.extend(item.partials,this.partials))}.bind(this));this.$el.html(Mustache.render(this.template,{slides:this.items,numOfSlides:this.items.length,containerWidth:this.items.length*100,position:this.activeIndex*-100,carouselContainerClass:this.carouselContainerClass,carouselId:this.carouselId,slidesHtml:slidesHtml,activeIndex:this.activeIndex+1,carouselStyle:this.limit!==null?false:true},this.partials));this.highlightSelected();this.modifyArrowAccess();if(!this.rendered){this.trigger("first-render");this.rendered=true}},remove:function(){app.base.views.BaseView.prototype.remove.apply(this,arguments);this.rendered=false;this.trigger("remove")},limitItems:function(limit){var prepended=this.prependedItems.models.length;var models=this.collection.models.length;var appended=this.appendedItems.models.length;var total=prepended+models+appended;var allowedModels;if(limit!==null&&total>limit){allowedModels=limit-(prepended+appended);return this.prependedItems.models.concat(this.collection.models.slice(0,allowedModels)).concat(this.appendedItems.models)}else if(limit===null||total<=limit){return this.prependedItems.models.concat(this.collection.models).concat(this.appendedItems.models)}},getItemsWithIndex:function(models){return models.map(function(model,i){var attrs=model.toJSON();attrs.index=i;return attrs})},angleClick:function(e){e.preventDefault();requestAnimationFrame(function(){if(this.activeIndex>this.items.length-1){return this.goToSlideByIndex(this.items.length-1)}if(e.currentTarget.attributes["data-direction"].value==="prev"){if(this.activeIndex===0)return;this.goToSlideRelative(-1)}if(e.currentTarget.attributes["data-direction"].value==="next"){if(this.activeIndex===this.items.length-1)return;this.goToSlideRelative(1)}}.bind(this))},dotClick:function(e){e.preventDefault();requestAnimationFrame(function(){var targetActiveIndex=+e.currentTarget.attributes["data-slide"].value;if(this.activeIndex===targetActiveIndex)return;this.goToSlideByIndex(targetActiveIndex)}.bind(this))},goToSlideByIndex:function(index){this.activeIndex=index;this.trigger("carousel:activeIndexChange",this.activeIndex);this.highlightSelected();this.modifyArrowAccess();var buttons=this.$(".corporate-strategy-item .cta-button button");buttons.attr("tabindex","-1");$(buttons[this.activeIndex]).attr("tabindex","0");this.$(".carousel-content").css("left",index*-100+"%");this.$("#active-index").html(this.activeIndex+1)},goToSlideRelative:function(num){this.goToSlideByIndex(this.activeIndex+num)},highlightSelected:function(){this.$("button[data-slide]").removeClass("selected");this.$("button[data-slide="+this.activeIndex+"]").addClass("selected")},modifyArrowAccess:function(){var next=$("button[data-direction=next]");var prev=$("button[data-direction=prev]");if(this.activeIndex===0){prev.addClass("disabled");prev.attr("tabindex","-1");prev.attr("aria-hidden","true");prev.attr("aria-disabled","true");next.removeClass("disabled");next.attr("tabindex","0");next.attr("aria-hidden","false")}else if(this.activeIndex>=this.items.length-1){next.addClass("disabled");next.attr("tabindex","-1");next.attr("aria-hidden","true");next.attr("aria-disabled","true");prev.removeClass("disabled");prev.attr("tabindex","0");prev.attr("aria-hidden","false")}else{prev.removeClass("disabled");prev.attr("tabindex","0");prev.attr("aria-hidden","false");prev.attr("aria-disabled","false");next.removeClass("disabled");next.attr("tabindex","0");next.attr("aria-hidden","false");next.attr("aria-disabled","true")}}})})();(function(){if(_.isUndefined(w3n.coach_mark)){Object.defineProperty(w3n,"coach_mark",{value:[],enumerable:true})}var index=0,content_html='<div class="content"><div class="icon"></div><div class="tip"></div></div>',$content_html=$(content_html),wrap=null;w3n.base.components.coach_mark=app.base.views.BaseView.extend({template:w3n.templates.components["coach-mark"]["coach-mark.html"],initialize:function(params){app.base.views.BaseView.prototype.initialize.call(this,params);var self=this;wrap=params.wrap;self.card_component=params.card_component||null;self.cog_name=params.cog_name;self.card_name=params.card_name;self.icon_css=params.icon_css;self.top=params.top||0;self.callbacks=generateCallBack();self.bulb_trigger={};self.related_card=params.related_card;self.bulb_trigger.events=generateTriggerEvents(self);self.show_callback=self.callbacks.show||null;self.hide_callback=self.callbacks.hide||null;self.hide_callback_once=self.callbacks.hide_once||null;self.hidden_callback_once=false;self.validate_data=false;
},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);var self=this;self.bulb_trigger.bulbs=[self.$el.find('[data-primitive="bulb"]')];self.$background=self.$el.find('[data-primitive="background"]');self.$close=self.$el.find('[data-primitive="close"]');setTrigger(self);setMetrics(self);bindEvents(self);setSlides(self);setPosition(self)},coachMarkGotButton:function(event){var self=this;event.preventDefault();self.$el.hide();if(self.related_card){var relatedMark=self.related_card.find('[data-component="coach-mark"]');if(relatedMark){relatedMark.hide()}}app.localCache.setData(self.card_name+":coach-marks:close",true);self.metrics.tagEvent({ev:"click",action:"Got it",name:"coach mark",section:self.section||self.domain,target:"none"})}});function generateTriggerEvents(self){return{click:coachMarkBulbClick.bind(self)}}function coachMarkBulbKeydown(event){if(event.keyCode===13&&w3n.models.tips){w3n.models.tips.loadOnce()}}function coachMarkBulbMouseenter(event){event.preventDefault();if(w3n.models.tips){w3n.models.tips.loadOnce()}}function coachMarkBulbClick(event){var self=this;event.preventDefault();showHideBulb(self,"300",function(){showContent(500,self)});if(self.metrics){self.metrics.tagEvent({ev:"click",action:"Show coach mark",name:"Bulb of coach mark",section:self.section||self.domain,target:"none"})}}function generateCallBack(){return{show:coachMarkShowCallback,hide:coachMarkHideCallback}}function coachMarkHideCallback(){showHideBulb(self,"300");self.metrics.tagEvent({ev:"click",action:"Hide coach mark",name:"coach mark",section:self.section||self.domain,target:"none"})}function coachMarkShowCallback(){getCloseBtn().focus()}function generateCarousel(params){var carousel=new app.components.carousel(params);return carousel}function generateDefaultSlides(){return w3n.models.tips.fullDataDeferred()}function setMetrics(self){self.metrics=app.utils.createMetricTag({module:self.cog_name,group:awf.app.id})}function prependToCard(self){self.def_show_effect="show";self.def_hide_effect="hide";self.$el.attr("data-component","coach-mark");if(self.card_component){self.card_component.prepend(self.$el);showHideBulb(self,"300",null,true);self.$el.localize()}}function setOverall(self){if(w3n.coach_mark){w3n.coach_mark.push(self);index=w3n.coach_mark.length;if(!self.domain){self.domain="coach_mark_"+index}}else{console.log("Coach Mark - init - w3n.coach_mark is undefined.")}if(self.theme){self.$el.find(".coach-mark").addClass(self.theme)}if(wrap){$(wrap).append(self.$el)}}function setTrigger(self){if(self.bulb_trigger&&self.bulb_trigger.bulbs){_.forEach(self.bulb_trigger.bulbs,function(bulb){_.forEach(self.bulb_trigger.events,function(func,evt){bulb.on(evt,func)})})}}function setSlides(self){setSlidesDeferred(self)}function setSlidesDeferred(self){var dataModel=new w3n.serviceModels.tips.json;dataModel.fetch().done(function(data){console.log("coach-mark data is",data);if(validateData(data,self)){generateDefaultField(data[self.cog_name],self);generateSlides(data[self.cog_name].slides,self);setSubActions(data[self.cog_name].sub_actions,self);prependToCard(self)}}).fail(function(error){console.log("oach mark deferred failed",error)})}function validateData(data,self){if(!data||!data[self.cog_name]||!data[self.cog_name].slides||data[self.cog_name].slides.length===0){return false}return true}function generateDefaultField(data,self){self.theme=data.theme;self.domain=data.domain;self.section=data.section;self.helper_txt=data.helper_txt;setOverall(self);setAriaLabel(self)}function setSubActions(data,self){if(data){_.forEach(data,function(action){_.forEach(action.events,function(func,evt){self.$el.find(action.selecter).on(evt,self[func].bind(self))})})}}function generateSlides(slides,self){if(slides.length>1){self.carousel=generateCarousel({el:self.$el.find(".coach-mark")[0],tag_event_module:_.startCase(self.domain),aria_label:_.startCase(self.domain)});self.$el.find(".coach-mark").append(self.carousel.render("append").$el);_.forEach(slides,function(slide){self.carousel.appendItem(generateSlideContent(slide,self))});self.carousel.setDefPointer();tabEventOnNextArrow(slides,self)}else{_.forEach(slides,function(slide){self.$el.find(".coach-mark").append(generateSlideContent(slide,self))})}}function generateSlideContent(slide,self){var $content=$content_html.clone();var $icon=$content.find(".icon");var $tip=$content.find(".tip");if(slide.icon_url){$icon.css("background","url("+slide.icon_url+") left top no-repeat");if(self.icon_css){$icon.addClass(self.icon_css)}}if(slide.content){$tip.html(slide.content)}if(slide.icon){if(slide.icon.css){$icon.css(slide.icon.css)}if(slide.icon.class){$icon.addClass(slide.icon.class)}}if(slide.tip){if(slide.tip.content){$tip.html(slide.tip.content)}if(slide.tip.css){$tip.css(slide.tip.css)}if(slide.tip.class){$tip.addClass(slide.tip.class)}}return $content}function setAriaLabel(self){if(self.domain){self.$el.attr("aria-label",_.startCase(self.domain))}}function bindEvents(self){if(!self.auto_hide){self.$close.on("click",function(event){self.$el.hide();if(self.related_card){var relatedMark=self.related_card.find('[data-component="coach-mark"]');if(relatedMark){relatedMark.hide()}}app.localCache.setData(self.card_name+":coach-marks:close",true);self.metrics.tagEvent({ev:"click",action:"Close",name:"coach mark",section:self.section||self.domain,target:"none"})})}}function tabEventOnNextArrow(slides,self){if(slides.length>1){self.carousel.getNextBtn().on("keydown",function(event){if(event.keyCode===9&&!event.shiftKey){event.preventDefault();self.$close.focus()}})}}function getCloseBtn(){return self.$close}function showHideBulb(self,timeout,callback,isShow){if(self.bulb_trigger.bulbs){_.forEach(self.bulb_trigger.bulbs,function(bulb){if(isShow){bulb.show(timeout,callback)}else{bulb.hide(timeout,callback)}})}}function showContent(timeout,self){self.$el.find(".coach-mark").show(timeout)}function setPosition(self){self.$el.find(".bulb").css("top",self.top)}})();(function(){w3n.base.components.old_form_single_enter=app.base.views.BaseView.extend({className:"form-styled",attributes:{"data-component":"form-single-enter"},template:_.template(w3n.templates.components.form["form-single-enter.html"]),templates:{text:'<input type="text" value="">',textarea:'<textarea cols="30" rows="10" class="form-control"></textarea>',label:'<label class="fg-label"></label>',wrap:'<div class="form-group fg-float"><div class="fg-line"></div></div>',message:{error:{html:'<p class="message error"><span class="icon-awf-alert-triangle-fill"></span></p>',type:{text:" This is a required",checkbox:" This is a required",radio:" This is a required",textarea:" This is a required",selection:" Please select a valid value",duration:" Please select a valid duration"}},warning:'<p class="message warning"><span class="icon-awf-alert-triangle-fill"></span></p>',success:'<p class="message success"><span class="icon-awf-alert-triangle-fill"></span></p>'}},classes:{position_class:"fg-line",duration:"icon-awf-clock",selection:"icon-awf-chevron-down"},initialize:function(options){this.options=options;this.validate_all=false;this.validate_pre="validate";this.has_error=false;this.form_index_num=null;this.message={error:false,warning:false,success:false};this.no_button=false;this.is_label_hidden=false;this.elements_array=[];this.dynamic_primitives={};this.validation_elements=[];this.overall_data=options.overall||{};this.elements_data=options.elements||{}},render:function(){this.$el.html(this.template({}));w3n.forms.push(self);this.form_index_num=w3n.forms.length;this.defineElements();this.operateOverall();this.operateElements();this.bindEvents();return this},defineElements:function(){this.form=this.$el.find("form");this.elements=this.$el.find("[data-container=elements]");this.button=this.$el.find("button")},bindEvents:function(){},operateOverall:function(){_.forIn(this.overall_data.properties,function(value,property){this.form.attr(property,value)}.bind(this));this.validate_all=this.overall_data.validation||false;this.no_button=this.overall_data.no_button||true;this.is_label_hidden=this.overall_data.is_label_hidden||false;if(this.overall_data.message){$.extend(true,this.message,this.overall_data.message)}if(this.overall_data.$wrap){this.overall_data.$wrap.append(this.$el)}},operateElements:function(){_.forEach(this.elements_data,function(element,index){var ele_obj={};switch(element.type){case"text":ele_obj=this.generateText(element);break;case"textarea":ele_obj=this.generateTextarea(element);break;default:ele_obj=this.generateText(element);break}this.elements_array.push(ele_obj);this.dynamic_primitives[ele_obj.primitive]=ele_obj;if(ele_obj.display){ele_obj.$inline_wrap.append(ele_obj.$ele)}else{this.appendElement(ele_obj.$ele)}}.bind(this))},generateText:function(params){var ele_obj={params:params,type:params.type,validation:params.validation||false};var name=_.snakeCase(params.label)+this.form_index_num;ele_obj.primitive=name;if(params.html){ele_obj.$ele=$(params.html.wrap);ele_obj.$label=$(params.html.label);ele_obj.$input=$(params.html.input);ele_obj.$ele.append(ele_obj.$input)}else{ele_obj.$ele=$(this.templates.wrap);ele_obj.$label=$(this.templates.label);ele_obj.$input=$(this.templates.text);ele_obj.$ele.find("."+this.classes.position_class).append(ele_obj.$input)}ele_obj.$input.attr("id",name);ele_obj.$ele.find("."+this.classes.position_class).prepend(ele_obj.$label);ele_obj.$label.html(params.label);ele_obj.$label.attr("for",name);ele_obj.$label.attr("id","label_"+name);if(this.is_label_hidden){ele_obj.$label.hide()}if(params.placeholder&&params.placeholder!==""){ele_obj.$input.attr("placeholder",params.placeholder)}if(params.value&&params.value!==""){ele_obj.$input.attr("value",params.value)}if(ele_obj.validation){this.validation_elements.push(ele_obj)}this.operateValidation(ele_obj);this.operateEvent(ele_obj);return ele_obj},generateTextarea:function(params){var ele_obj={params:params,type:params.type,limition:params.limition||false,validation:params.validation||false};var name=_.snakeCase(params.label)+this.form_index_num;ele_obj.primitive=name;if(params.html){ele_obj.$ele=$(params.html.wrap);ele_obj.$label=$(params.html.label);ele_obj.$input=$(params.html.input);ele_obj.$ele.append(ele_obj.$input);ele_obj.$ele.append(ele_obj.$label)}else{ele_obj.$ele=$(this.templates.wrap);ele_obj.$label=$(this.templates.label);ele_obj.$input=$(this.templates.textarea);ele_obj.$ele.find("."+this.classes.position_class).append(ele_obj.$input);ele_obj.$ele.find("."+this.classes.position_class).prepend(ele_obj.$label)}ele_obj.$input.attr("id",name);ele_obj.$label.html(params.label);ele_obj.$label.attr("for",name);ele_obj.$label.attr("id","label_"+name);ele_obj.$label.addClass("txtarea");if(this.is_label_hidden){ele_obj.$label.hide()}if(params.placeholder&&params.placeholder!==""){ele_obj.$input.attr("placeholder",params.placeholder)}if(params.value&&params.value!==""){ele_obj.$input.value(params.value)}if(ele_obj.validation){this.validation_elements.push(ele_obj)}this.operateValidation(ele_obj);this.operateEvent(ele_obj);return ele_obj},operateEvent:function(ele_obj){if(this.no_button){ele_obj.$input.on("keydown",{ele:ele_obj},ele_obj.params.func)}},operateValidation:function(ele_obj){if(this.validate_all||ele_obj.validation){var func=this.validateItem;ele_obj.$input.on("blur",{ele:ele_obj},func);if(ele_obj.type=="duration"){ele_obj.$down_arrow.on("blur",{ele:ele_obj},func)}}if(ele_obj.limition){var limit=this.validateLimition;ele_obj.$input.on("keyup",{ele:ele_obj},limit)}},validateItem:function(event){event.preventDefault();var errors=[];if(_.isArray(event.data.ele.validation)){}else{if(event.data.ele.validation){event.data.ele.validation=[event.data.ele.validation]}else{event.data.ele.validation=[event.data.ele.type]}}_.forEach(event.data.ele.validation,function(val,key){switch(val){case"text":if(event.target.value.trim().length===0){errors.push(val)}break;case"textarea":if(event.target.value.trim().length===0){errors.push(val)}break;default:errors.push(val);break}});if(errors.length>0){event.data.ele.$ele.addClass("has-error");if(event.data.ele.$inline_wrap){event.data.ele.$inline_wrap.addClass("has-error")}var error_message;if(event.data.ele.params.error_message){if(_.isObject(event.data.ele.params.error_message)){if(_.isString(event.data.ele.params.error_message[_.last(errors)]))error_message=event.data.ele.params.error_message[_.last(errors)]}else if(_.isString(event.data.ele.params.error_message)){error_message=event.data.ele.params.error_message}}_.forEach(this.message,function(val,key){if(val){this.addMessage(event.data.ele,key,error_message)}}.bind(this))}else{event.data.ele.$ele.removeClass("has-error");if(event.data.ele.$inline_wrap&&event.data.ele.$inline_wrap.find(".has-error").length===0){event.data.ele.$inline_wrap.removeClass("has-error")}this.removeMessage(event.data.ele)}},validateLimition:function(event){if(event.target.value.trim().length>event.data.ele.limition){event.data.ele.$ele.addClass("has-error");event.data.ele.$ele.find(".fg-line").addClass("has-error");if(event.data.ele.$inline_wrap){event.data.ele.$inline_wrap.addClass("has-error")}}else{event.data.ele.$ele.removeClass("has-error");event.data.ele.$ele.find(".fg-line").removeClass("has-error");if(event.data.ele.$inline_wrap){event.data.ele.$inline_wrap.removeClass("has-error")}}},checkValidation:function(){_.forEach(this.validation_elements,function(ele){ele.$input.trigger("blur",ele)})},appendElement:function(ele){this.elements.append(ele)},addMessage:function(ele,type,error_message){error_message=error_message||this.templates.message[type].type[ele.type];ele.$ele.find(".message").remove();ele.$ele.prepend($(this.templates.message[type].html).append(error_message))},removeMessage:function(ele){ele.$ele.find(".message").remove()},resetForm:function(){this.$el.find(".has-error").removeClass("has-error");this.$el.find(".has-warning").removeClass("has-warning");this.$el.find(".has-success").removeClass("has-success");this.$el.find(".message").remove();_.forEach(this.elements_array,function(ele){ele.$input.val("");if(ele.limition){ele.$label.html(ele.params.label)}});this.$el.find(".fg-toggled").removeClass("fg-toggled")},hasError:function(){var error_length=this.$el.find(".has-error").length;if(error_length>0){this.has_error=true}else{this.has_error=false}return this.has_error},getIndex:function(){return this.form_index_num},show:function(dur){this.$el.show(dur)},hide:function(dur){this.$el.hide(dur)}})})();(function(){var i18n_ns="app.common.validation-message";var i18n_label={required:i18n_ns+".required",valid_date:i18n_ns+".valid-date",valid_value:i18n_ns+".valid-value",valid_duration:i18n_ns+".valid-duration",hour:i18n_ns+".hour",hours:i18n_ns+".hours"};w3n.base.components.old_form=app.base.views.BaseView.extend({className:"form-styled",template:_.template(w3n.templates.components.form["form.html"]),templates:{button:'<button class="solid-btn"></button>',checkbox:'<input type="checkbox" name="" id="" value="" tabindex="-1">',option:'<option value=""></option>',radio:'<input type="radio" name="" id="" value="" tabindex="-1">',select:'<select name="" id=""></select>',text:'<input class="form-control" type="text" value="">',textarea:'<textarea class="form-control" name="" id="" cols="30" rows="10"></textarea>',label:'<label for="" class="fg-label"></label>',label_hidden:'<label for="" class="access"></label>',wrap:'<div class="form-group fg-float"><div class="fg-line"></div></div>',input_helper:'<i class="fg-input-helper"></i>',span:'<span class="fg-span"><span></span></span>',radio_wrap:'<div class="fg-radio" tabindex="0"><label class="component-content"></label></div>',checkbox_wrap:'<div class="fg-checkbox" tabindex="0"><label class="component-content"></label></div>',svg_li_wrap:'<li class="fg-li"><label></label></li>',svg_li_editable_wrap:'<li class="fg-li"><div class="editable_label_div"><label></label></div></li>',icon_arrowheavyup:'<span class="icon-awf-arrow-up"></span>',img:'<img src="" alt=""></img>',hidden:'<input type="hidden" name="" id="" value="">',hidden_text:'<div class="hidden-text-input"> <label for="" class="access"></label><input type="text" name="" id="" value=""></div>',down_arrow:'<a href="javascript:;" class="fg-icon"><span class="access">Selection trigger</span><i></i></a>',inline_wrap:'<div class="date-section"></div>',selectionRadio_wrap:'<div class="selection-radio"><div class="fg-div-label"></div><fieldset style="border:none"><legend class="access">legend</legend><div class="fg-radios"><div class="fg-div-radio"></div></div></fieldset></div>',selection_radio:'<span class="fg-radio fg-radio-inline"></span>',span_text:'<span class="label-text"></span>',field_set:'<fieldset id=""><legend class="access"><legend></fieldset>',ul:'<ul id=""></ul>',message:{error:{html:'<div class="message error"><span class="icon-awf-alert-triangle-fill"></span></div>',type:{text:" This is a required",checkbox:" This is a required",radio:" This is a required",textarea:" This is a required",selection:" Please select a valid value",duration:" Please select a valid duration"}},warning:'<div class="message warning"><span class="icon-awf-alert-triangle-fill"></span></div>',success:'<div class="message success"><span class="icon-awf-alert-triangle-fill"></span></div>'}},classes:{position_class:"fg-line",radio_class:"fg-radio",checkbox_class:"fg-checkbox",duration:"icon-awf-clock",selection:"icon-awf-chevron-down"},initialize:function(options){this.options=options;this.validate_all=false;this.is_label_hidden=false;this.validate_pre="validate";this.has_error=false;this.form_index_num=null;this.message={error:false,warning:false,success:false};this.elements_array=[];this.fieldsets={};this.buttons=[];this.hiddens=[];this.customs=[];this.dropdowns=[];this.dynamic_primitives={};this.validation_elements=[];this.overall_data=options.overall||{};this.elements_data=options.elements||{};this.buttons_data=options.buttons||{};this.hiddens_data=options.hiddens||{};this.customs_data=options.customs||{}},render:function(){this.$el.html(this.template({}));w3n.forms.push(this);this.form_index_num=w3n.forms.length;this.defineElements();this.operateOverall();this.operateElements();this.operateButtons();this.generateHiddens();this.generateCustoms();this.bindEvents();if("i18next"in window)this.$el.localize();return this},defineElements:function(){this.form=this.$el.find("form");this.hiddens=this.$el.find("[data-container=hiddens]");this.elements=this.$el.find("[data-container=elements]");this.customs=this.$el.find("[data-container=customs]");this.buttons=this.$el.find("[data-container=buttons]")},bindEvents:function(){},generateDown:function(params){var dropdown=new app.components.dropdown(params.dropdown);dropdown.render();if(params.options){var options=new app.components.dropdownOptions({id:_.snakeCase(params.params.label)+"_dropdown_options",options:params.options});dropdown.setContent(options.render().el);if(params.func){options.$el.on("click",params.func)}}return dropdown},operateOverall:function(){_.forIn(this.overall_data.properties,function(value,property){this.form.attr(property,value)}.bind(this));this.validate_all=this.overall_data.validation||false;this.is_label_hidden=this.overall_data.is_label_hidden||false;if(this.overall_data.message){$.extend(true,this.message,this.overall_data.message)}if(this.overall_data.$wrap){this.overall_data.$wrap.append(this.$el)}},operateButtons:function(){_.forEach(this.buttons_data,function(button,index){var this_button=this.generateButton(button);this.buttons.push(this_button);this.dynamic_primitives[this_button.primitive]=this_button;this.appendButton(this_button.$ele)}.bind(this))},operateElements:function(){_.forEach(this.elements_data,function(element,index){var ele_obj={};switch(element.type){case"text":ele_obj=this.generateText(element);break;case"textarea":ele_obj=this.generateTextarea(element);break;case"checkbox":ele_obj=this.generateCheckbox(element);break;case"radio":ele_obj=this.generateRadio(element);break;case"selection":ele_obj=this.generateSelection(element);break;case"duration":ele_obj=this.generateDuration(element);break;case"svg_li":ele_obj=this.generateSvgli(element);break;case"selectionRadio":ele_obj=this.generateSelectionRadio(element);break;default:ele_obj=this.generateText(element);break}this.elements_array.push(ele_obj);this.dynamic_primitives[ele_obj.primitive]=ele_obj;if(element.i18n_label){ele_obj.$label.attr("data-i18n",element.i18n_label)}if(ele_obj.display){ele_obj.$inline_wrap.append(ele_obj.$ele)}else{if(element.field_set_id){this.appendElementToFieldset(element,ele_obj.$ele)}else if(element.ul_id){this.appendElementToUl(element,ele_obj.$ele)}else{this.appendElement(ele_obj.$ele)}}}.bind(this))},generateText:function(params){var ele_obj={params:params,type:params.type,validation:params.validation||false};var name=params.name||_.snakeCase(params.label)+this.form_index_num,id=params.id||name;ele_obj.primitive=id;if(params.html){ele_obj.$ele=$(params.html.wrap);ele_obj.$label=$(params.html.label);ele_obj.$input=$(params.html.input);ele_obj.$ele.append(ele_obj.$input)}else{ele_obj.$ele=$(this.templates.wrap);ele_obj.$label=$(this.templates.label);ele_obj.$input=$(this.templates.text);ele_obj.$ele.find("."+this.classes.position_class).append(ele_obj.$input)}ele_obj.$input.attr("id",id);ele_obj.$input.attr("name",name);ele_obj.$input.attr("aria-label",name);if(params.label&&params.label.length!==0){ele_obj.$ele.find("."+this.classes.position_class).prepend(ele_obj.$label);ele_obj.$label.html(params.label);ele_obj.$label.attr("for",id);if(this.is_label_hidden||params.is_label_hidden){ele_obj.$label.hide()}}if(params.placeholder&&params.placeholder!==""){ele_obj.$input.attr("placeholder",params.placeholder)}if(params.value&&params.value!==""){ele_obj.$input.attr("value",params.value)}if(ele_obj.validation){this.validation_elements.push(ele_obj)}this.operateValidation(ele_obj);return ele_obj},generateCheckbox:function(params){return this.baseRadioCheckbox(params)},generateRadio:function(params){return this.baseRadioCheckbox(params)},generateSvgli:function(params){var ele_obj={params:params,type:params.type,validation:params.validation||false};var name=params.name||_.snakeCase(params.label)+this.form_index_num,id=params.id||name;ele_obj.primitive=id;if(params.label_edit){ele_obj.$ele=$(this.templates[ele_obj.type+"_editable_wrap"])}else{ele_obj.$ele=$(this.templates[ele_obj.type+"_wrap"])}ele_obj.$input=$(this.templates.hidden);ele_obj.$icon=$(this.templates.icon_arrowheavyup);if(params.label_edit){ele_obj.$ele.find(".editable_label_div").append(ele_obj.$input).append(ele_obj.$icon);ele_obj.$hidden_text=$(this.templates.hidden_text);ele_obj.$ele.append(ele_obj.$hidden_text);var labelEl=ele_obj.$ele.find(".editable_label_div");var downPosX=0;var downPosY=0;ele_obj.$ele.on("mousedown",function(evt){ele_obj.$ele.on("mousemove",function handler(evt){downPosX=evt.pageX;downPosY=evt.pageY;ele_obj.$ele.off("mousemove",handler)});ele_obj.$ele.on("mouseup",function handler(evt){if(downPosY===0||Math.abs(evt.pageY-downPosY)<20){ele_obj.$input.data("hidden-shown",true);ele_obj.$hidden_text.show();hidden_input.focus()}else{console.log("Drag")}ele_obj.$ele.off("mouseup",handler)})});var hidden_input=ele_obj.$hidden_text.find("input");hidden_input.attr("id",params.other_id);hidden_input.attr("name",params.other_name);hidden_input.attr("placeholder",params.label);var input_label=ele_obj.$hidden_text.find("label");input_label.attr("for",params.other_id);input_label.html(params.label);hidden_input.on("blur",function(event){var inputVal=hidden_input.val().trim();if(_.isEmpty(inputVal)){inputVal=params.label}labelEl.find("label").html(inputVal);ele_obj.$hidden_text.removeAttr("style");ele_obj.$input.data("hidden-shown",false)})}else{ele_obj.$ele.append(ele_obj.$input).append(ele_obj.$icon)}ele_obj.$input.attr("id",id);ele_obj.$input.attr("name",name);if(params.value&&params.value!==""){ele_obj.$input.attr("value",params.value)}if(ele_obj.validation){this.validation_elements.push(ele_obj)}if(params.label&&params.label.length!==0){ele_obj.$ele.find("label").html(params.label)}this.operateValidation(ele_obj);return ele_obj},generateSelectionRadio:function(params){var ele_obj={params:params,type:params.type,validation:params.validation||false};var name=params.name||_.snakeCase(params.label)+this.form_index_num,id=params.id||name;ele_obj.primitive=id;ele_obj.$ele=$(this.templates[ele_obj.type+"_wrap"]);ele_obj.$label=$(this.templates.label);ele_obj.$label.html(params.label);ele_obj.$ele.find(".fg-div-label").append(ele_obj.$label);_.each(params.options,function(option,i){var selRadio={};selRadio.$ele=$(this.templates.selection_radio);selRadio.$input=$(this.templates.radio);selRadio.$label_hidden=$(this.templates.label_hidden);selRadio.$label_hidden.html(params.label);selRadio.$input_helper=$(this.templates.input_helper);selRadio.$span=$(this.templates.span_text);selRadio.$span.html(option.text);if(option.i18n_label)selRadio.$span.attr("data-i18n",option.i18n_label);selRadio.$ele.append(selRadio.$input).append(selRadio.$input_helper).append(selRadio.$span).append(selRadio.$label_hidden);if(params.name&&params.name!==""){selRadio.$input.attr("name",params.name)}if(option.value&&option.value!==""){selRadio.$input.attr("value",option.value);selRadio.$input.attr("id",params.name+"_"+option.value);selRadio.$label_hidden.attr("for",params.name+"_"+option.value)}ele_obj.$ele.find(".fg-div-radio").append(selRadio.$ele)}.bind(this));if(typeof params.labelFor!=="undefined"&&!params.labelFor){ele_obj.$ele.find(".fg-label").removeAttr("for")}if(params.label_edit){ele_obj.$ele.find(".fg-div-label").addClass("editable_label_div");ele_obj.$hidden_text=$(this.templates.hidden_text);ele_obj.$ele.find(".fg-div-label").append(ele_obj.$hidden_text);var hidden_input=ele_obj.$hidden_text.find("input");hidden_input.attr("id",params.other_id);hidden_input.attr("name",params.other_name);hidden_input.attr("placeholder",params.label);hidden_input.data("hidden-shown",false);$("input[type=radio]",ele_obj.$ele).data("selected",false);ele_obj.$label.on("click",function(event){hidden_input.data("hidden-shown",true);ele_obj.$hidden_text.show();hidden_input.focus()});$("input[type=radio]",ele_obj.$ele).on("click",function(event){if(hidden_input.val()&&hidden_input.val().trim().length!==0){return}hidden_input.data("hidden-shown",true);ele_obj.$hidden_text.show();hidden_input.focus()});hidden_input.on("blur",function(event){var inputVal=hidden_input.val().trim();if(_.isEmpty(inputVal)){inputVal=params.label}ele_obj.$label.html(inputVal);ele_obj.$hidden_text.removeAttr("style");hidden_input.data("hidden-shown",false)})}$("input[type=radio]",ele_obj.$ele).on("keydown",function(event){if(event.keyCode===9&&event.shiftKey){var prevRadioBtn=$(this).parent().prev().find("input[type=radio]");if(prevRadioBtn&&prevRadioBtn.length>0){prevRadioBtn.focus();return false}}else if(event.keyCode===9){var nextRadioBtn=$(this).parent().next().find("input[type=radio]");if(nextRadioBtn&&nextRadioBtn.length>0){nextRadioBtn.focus();return false}}if(event.keyCode===13){var $radio=$(this);if($radio&&$radio.length>0){var evt=document.createEvent("MouseEvents");evt.initEvent("click",true,true);$radio[0].dispatchEvent(evt)}return false}});$("input[type=radio]",ele_obj.$ele).on("focus",function(event){$(event.currentTarget).closest(".fg-radio-inline").addClass("fg-radio-inline-focused")});$("input[type=radio]",ele_obj.$ele).on("blur",function(event){$(event.currentTarget).closest(".fg-radio-inline").removeClass("fg-radio-inline-focused")});$("input[type=radio]",ele_obj.$ele).on("click",function(event){if(!$(event.currentTarget).data("selected")){$(event.currentTarget).data("selected",true);$(event.currentTarget).closest(".fg-radios").find("input[type=radio]").not(event.currentTarget).data("selected",false);$(event.currentTarget).closest(".fg-radios").find("input[type=radio]").not(event.currentTarget).closest(".fg-radio-inline").removeClass("fg-radio-inline-checked");$(event.currentTarget).closest(".fg-radio-inline").addClass("fg-radio-inline-checked");$(event.currentTarget).closest(".selection-radio").addClass("selection-radio-checked");return}if(hidden_input){hidden_input.blur()}$(event.currentTarget).data("selected",false);$(event.currentTarget).prop("checked",false);$(event.currentTarget).closest(".fg-radio-inline").removeClass("fg-radio-inline-checked");$(event.currentTarget).closest(".selection-radio").removeClass("selection-radio-checked")});if(ele_obj.validation){this.validation_elements.push(ele_obj)}this.operateValidation(ele_obj);return ele_obj},baseRadioCheckbox:function(params){var ele_obj={params:params,type:params.type,validation:params.validation||false};var name=params.name;var primitiveId=_.snakeCase(params.label)+this.form_index_num;ele_obj.primitive=primitiveId;ele_obj.$ele=$(this.templates[ele_obj.type+"_wrap"]);ele_obj.$input=$(this.templates[ele_obj.type]);ele_obj.$label_hidden=$(this.templates.label_hidden);ele_obj.$label_hidden.html(params.label);ele_obj.$label_hidden.attr("for",params.id);ele_obj.$input_helper=$(this.templates.input_helper);ele_obj.$span=$(this.templates.span);ele_obj.$ele.find(".component-content").append(ele_obj.$input).append(ele_obj.$input_helper).append(ele_obj.$span).append(ele_obj.$label_hidden);if(params.label_edit){ele_obj.$hidden_text=$(this.templates.hidden_text);var hidden_input=ele_obj.$hidden_text.find("input");ele_obj.$ele.find(".component-content").append(ele_obj.$hidden_text);hidden_input.attr("id",params.other_id);hidden_input.attr("name",params.other_name);hidden_input.attr("placeholder",params.label);var input_label=ele_obj.$hidden_text.find("label");input_label.attr("for",params.other_id);input_label.html(params.label);ele_obj.$input.data("selected",false);ele_obj.$input.on("change",function(event){if(!ele_obj.$input.is(":checked")){hidden_input.blur();ele_obj.$ele.focus()}else{ele_obj.$input.data("hidden-shown",true);ele_obj.$hidden_text.show();setTimeout(function(){hidden_input.focus()},100)}});hidden_input.on("blur",function(event){setTimeout(function(){var inputVal=hidden_input.val().trim();if(_.isEmpty(inputVal)){inputVal=params.label}ele_obj.$span.find("span").html(inputVal);ele_obj.$hidden_text.removeAttr("style");ele_obj.$input.data("hidden-shown",false)},300)})}ele_obj.$input.on("click",function(event){if(!$(event.currentTarget).data("selected")){$(event.currentTarget).data("selected",true);if(ele_obj.type==="radio"){$(event.currentTarget).closest("[data-container=elements]").find("input[type=radio]").not(event.currentTarget).data("selected",false);$(event.currentTarget).closest("[data-container=elements]").find(".fg-radio").removeClass("fg-radio-checked");ele_obj.$ele.addClass("fg-radio-checked")}if(ele_obj.type==="checkbox"){ele_obj.$ele.addClass("fg-checkbox-checked")}return}else{$(event.currentTarget).data("selected",false);if(ele_obj.type==="radio"){$(event.currentTarget).prop("checked",false);ele_obj.$ele.removeClass("fg-radio-checked")}if(ele_obj.type==="checkbox"){ele_obj.$ele.removeClass("fg-checkbox-checked")}}});ele_obj.$ele.on("click",function(event){ele_obj.$ele.css({"outline-width":0})});ele_obj.$ele.on("keydown",function(event){if(event.keyCode===9){ele_obj.$ele.css({"outline-width":"thin"})}if(event.keyCode===13){event.preventDefault();var $elements=$(event.currentTarget).closest("[data-container=elements]");var $radio=$(event.currentTarget).find("input[type=radio]");if($radio&&$radio.length>0){var evt=document.createEvent("MouseEvents");evt.initEvent("click",true,true);$radio[0].dispatchEvent(evt)}var $checkbox=$(event.currentTarget).find("input[type=checkbox]");if($checkbox&&$checkbox.length>0){var checkbox_checked=$checkbox.prop("checked");$checkbox.prop("checked",checkbox_checked?false:true);$checkbox.change();if(checkbox_checked){ele_obj.$ele.removeClass("fg-checkbox-checked")}else{ele_obj.$ele.addClass("fg-checkbox-checked");
}}}});if(params.id&&params.id!==""){ele_obj.$input.attr("id",params.id)}ele_obj.$input.attr("name",name);if(params.value&&params.value!==""){ele_obj.$input.attr("value",params.value)}if(ele_obj.validation){this.validation_elements.push(ele_obj)}ele_obj.$span.find("span").html(params.label);this.operateValidation(ele_obj);if(ele_obj.evt){ele_obj.$input.on("click",function(event){ele_obj.evt(event,this)}.bind(this))}return ele_obj},generateTextarea:function(params){var ele_obj={params:params,type:params.type,limition:params.limition||false,validation:params.validation||false};var name=params.name||_.snakeCase(params.label)+this.form_index_num,id=params.id||name;ele_obj.primitive=id;if(params.html){ele_obj.$ele=$(params.html.wrap);ele_obj.$label=$(params.html.label);ele_obj.$input=$(params.html.input);ele_obj.$ele.append(ele_obj.$input)}else{ele_obj.$ele=$(this.templates.wrap);ele_obj.$label=$(this.templates.label);ele_obj.$input=$(this.templates.textarea);ele_obj.$ele.find("."+this.classes.position_class).append(ele_obj.$input)}ele_obj.$input.on("focus",function(event){ele_obj.$input.addClass("selected")});ele_obj.$input.on("blur",function(event){if(!ele_obj.$input.val()||ele_obj.$input.val().trim().length===0){ele_obj.$input.removeClass("selected")}});ele_obj.$input.attr("id",id);ele_obj.$input.attr("name",name);ele_obj.$input.attr("aria-label",name);if(params.label&&params.label.length!==0){ele_obj.$ele.find("."+this.classes.position_class).prepend(ele_obj.$label);ele_obj.$label.html(params.label);ele_obj.$label.attr("for",id);ele_obj.$label.addClass("txtarea");if(this.is_label_hidden||params.is_label_hidden){ele_obj.$label.hide()}}if(params.placeholder&&params.placeholder!==""){ele_obj.$input.attr("placeholder",params.placeholder);ele_obj.$input.attr("aria-label",params.placeholder)}if(params.value&&params.value!==""){ele_obj.$input.value(params.value)}if(ele_obj.validation){this.validation_elements.push(ele_obj)}this.operateValidation(ele_obj);return ele_obj},baseSelection:function(params){var ele_obj={params:params,type:params.type,options:[],display:params.display,validation:params.validation||false};var name=_.snakeCase(params.label)+this.form_index_num;ele_obj.primitive=name;if(params.html){}else{if(params.display){var inline_wrap=this.elements.children(".date-section").last();if(inline_wrap.length>0){ele_obj.$inline_wrap=inline_wrap;if(ele_obj.$inline_wrap.find(".form-group").length===2){ele_obj.$inline_wrap=$(this.templates.inline_wrap);this.elements.append(ele_obj.$inline_wrap)}}else{ele_obj.$inline_wrap=$(this.templates.inline_wrap);this.elements.append(ele_obj.$inline_wrap)}}ele_obj.$ele=$(this.templates.wrap);ele_obj.$label=$(this.templates.label);ele_obj.$input=$(this.templates.text);ele_obj.$down_arrow=$(this.templates.down_arrow);ele_obj.$option=$(this.templates.option);ele_obj.$down_arrow.find("i").addClass(this.classes[ele_obj.type]);ele_obj.$input.attr("disabled","disabled");ele_obj.$input.attr("id",name);ele_obj.$input.attr("name",name);ele_obj.$input.attr("aria-label",name);ele_obj.$ele.find("."+this.classes.position_class).append(ele_obj.$input);ele_obj.$ele.find("."+this.classes.position_class).append(ele_obj.$down_arrow);if(params.options||params.get_options){ele_obj.dropdown=this.generateDown({dropdown:{trigger:ele_obj.$down_arrow,evt:"click",evt_target:ele_obj.$down_arrow,width:params.dropdown&&params.dropdown.width?params.dropdown.width:false,has_wrap:true,reference:ele_obj.$ele,direction:"top",background_color:"#ffffff",top_component:this.$el.parents('[data-component="titled-card"]'),get_options:params.get_options||null},ele:ele_obj,params:params,options:params.options||null,func:params.func||false})}}ele_obj.$ele.find("."+this.classes.position_class).prepend(ele_obj.$label);ele_obj.$label.html(params.label);ele_obj.$label.attr("for",name);if(this.is_label_hidden||params.is_label_hidden){ele_obj.$label.hide()}return ele_obj},generateSelection:function(params){var ele_obj=this.baseSelection(params);if(ele_obj.validation){this.validation_elements.push(ele_obj)}this.operateValidation(ele_obj);return ele_obj},generateDuration:function(params){var ele_obj=this.baseSelection(params);var top_component=this.$el.parents('[data-component="titled-card"]');ele_obj.$timePicker=clock({trigger:ele_obj.$down_arrow,wrap:ele_obj.$ele,ele:ele_obj,top_component:top_component,index:this.form_index_num});if(ele_obj.validation){this.validation_elements.push(ele_obj)}this.operateValidation(ele_obj);return ele_obj},generateButton:function(params){var ele_obj={params:params,type:params.type,$ele:null,evt:params.func||null,value:params.value,tag:params.html_tag,primitive:_.snakeCase(params.value)};var def_class=params.def_class?"primary-form-btn ":"";var custom_class=params.custom_class+" "||"";switch(params.html_tag){case"button":ele_obj.$ele=$('<button type="'+params.type+'" class="'+def_class+params.type+'">'+params.value+"</button>");break;case"a":ele_obj.$ele=$('<a type="'+params.type+'" href="javascript:;" class="'+def_class+params.type+'">'+params.value+"</a>");break;case"input":ele_obj.$ele=$('<input type="'+params.type+'" class="'+def_class+params.type+'" type="'+params.type+'" value="'+params.value+'">');break;default:ele_obj.$ele=$("<button data-i18n="+params.i18n+' type="'+params.type+'" class="'+def_class+custom_class+params.type+'">'+params.value+"</button>");break}if(params.i18n_label)ele_obj.$ele.attr("data-i18n",params.i18n_label);ele_obj.$ele.on("click",function(event){this[params.type](event);ele_obj.evt(event,this)}.bind(this));return ele_obj},generateHiddens:function(params){_.forEach(this.hiddens_data,function(hidden,index){var this_hidden=this.generateHidden(hidden);this.hiddens.push(this_hidden);this.dynamic_primitives[this_hidden.primitive]=this_hidden;this.appendHidden(this_hidden.$ele)}.bind(this))},generateHidden:function(hidden){var ele_obj={name:params.name||"",$ele:null,value:params.value||"",id:params.id||"",primitive:_.snakeCase(params.value)};ele_obj.$ele=$(this.templates.hidden);if(ele_obj.name!==""){ele_obj.$ele.attr("name",ele_obj.name)}if(ele_obj.value!==""){ele_obj.$ele.attr("value",ele_obj.value)}if(ele_obj.id!==""){ele_obj.$ele.attr("id",ele_obj.id)}return ele_obj},generateCustoms:function(params){_.forEach(this.customs_data,function(custom,index){var this_custom=this.generateCustom(hidden);this.customs.push(this_custom);this.dynamic_primitives[this_custom.primitive]=this_custom;this.appendCustom(this_custom.$ele,this_custom.position)}.bind(this))},generateCustom:function(custom){var ele_obj={$ele:null,position:custom.position||"last",primitive:_.snakeCase(custom.label)};ele_obj.$ele=$(custom.html);return ele_obj},operateValidation:function(ele_obj){if(this.validate_all||ele_obj.validation){var func=this.validateItem;ele_obj.$input.on("blur",{ele:ele_obj},func.bind(this));if(ele_obj.type=="duration"){ele_obj.$down_arrow.on("keydown",{ele:ele_obj},func.bind(this))}}if(ele_obj.limition){var limit=this.validateLimition;ele_obj.$input.on("keyup",{ele:ele_obj},limit.bind(this))}},validateItem:function(event){var errors=[];if(_.isArray(event.data.ele.validation)){}else{if(event.data.ele.validation){event.data.ele.validation=[event.data.ele.validation]}else{event.data.ele.validation=[event.data.ele.type]}}_.forEach(event.data.ele.validation,function(val,key){switch(val){case"text":if(event.target.value.trim().length===0){errors.push(val)}break;case"textarea":if(event.target.value.trim().length===0){errors.push(val)}break;case"selection":if(event.target.value.trim().length===0){errors.push(val)}break;case"duration":var duration=event.data.ele.$input.val().trim();if(duration.length===0||duration=="0 "+(w3n.utils.hasI18nTag(i18n_label.hour)?i18next.t(i18n_label.hours):"hours")){errors.push(val)}break;case"dateformat":console.log("event.data.ele.",event.data.ele);if(event.target.value.trim().length===0){}break;case"radio":break;case"checkbox":break;default:console.log("The "+val+" validation is not defined.");errors.push(val);break}});if(errors.length>0){event.data.ele.$ele.addClass("has-error");if(event.data.ele.$inline_wrap){event.data.ele.$inline_wrap.addClass("has-error")}var error_message;if(event.data.ele.params.error_message){if(_.isObject(event.data.ele.params.error_message)){if(_.isString(event.data.ele.params.error_message[_.last(errors)]))error_message=event.data.ele.params.error_message[_.last(errors)]}else if(_.isString(event.data.ele.params.error_message)){error_message=event.data.ele.params.error_message}}_.forEach(this.message,function(val,key){if(val){this.addMessage(event.data.ele,key,error_message)}}.bind(this))}else{event.data.ele.$ele.removeClass("has-error");if(event.data.ele.$inline_wrap&&event.data.ele.$inline_wrap.find(".has-error").length===0){event.data.ele.$inline_wrap.removeClass("has-error")}this.removeMessage(event.data.ele)}},validateLimition:function(event){if(event.target.value.trim().length>event.data.ele.limition){event.data.ele.$ele.addClass("has-error");event.data.ele.$ele.find(".fg-line").addClass("has-error");if(event.data.ele.$inline_wrap){event.data.ele.$inline_wrap.addClass("has-error")}}else{event.data.ele.$ele.removeClass("has-error");event.data.ele.$ele.find(".fg-line").removeClass("has-error");if(event.data.ele.$inline_wrap){event.data.ele.$inline_wrap.removeClass("has-error")}}},checkValidation:function(){_.forEach(this.validation_elements,function(ele){ele.$input.trigger("blur",ele)})},appendElement:function(ele){this.elements.append(ele)},appendElementToUl:function(param,ele){var ulEl=this.generateUl(param);ulEl.append(ele)},generateUl:function(param){if(this.uls&&this.uls[param.ul_id]){return this.uls[param.ul_id]}else{var ul=$(this.templates.ul);ul.attr("id",param.ul_id);this.uls={};this.uls[param.ul_id]=ul;this.elements.append(ul);return ul}},appendElementToFieldset:function(param,ele){var fieldset=this.generateFieldset(param);fieldset.append(ele)},generateFieldset:function(param){if(this.fieldsets&&this.fieldsets[param.field_set_id]){return this.fieldsets[param.field_set_id]}else{var fs=$(this.templates.field_set);fs.attr("id",param.field_set_id);fs.find("legend").html(param.field_set_legend);this.fieldsets={};this.fieldsets[param.field_set_id]=fs;this.elements.append(fs);return fs}},appendButton:function(ele){this.buttons.append(ele)},appendHidden:function(ele){this.hiddens.append(ele)},appendCustom:function(ele,position){this.customs[position](ele)},addMessage:function(ele,type,error_message){error_message=error_message||this.templates.message[type].type[ele.type];error_message=this.checkI18n(ele,type,error_message);ele.$ele.find(".message").remove();ele.$ele.prepend($(this.templates.message[type].html).append(error_message))},checkI18n:function(ele,type,error_message){var ilabel="";switch(ele.type){case"text":case"textarea":case"checkbox":case"radio":case"selection":ilabel=i18n_label.required;break;case"duration":ilabel=i18n_label.valid_duration;break;case"svg_li":break;case"selectionRadio":break;default:ilabel=i18n_label.required;break}if(w3n.utils.hasI18nTag(ilabel)){return" "+i18next.t(ilabel)}return error_message},removeMessage:function(ele){ele.$ele.find(".message").remove()},resetForm:function(){this.$el.find(".has-error").removeClass("has-error");this.$el.find(".has-warning").removeClass("has-warning");this.$el.find(".has-success").removeClass("has-success");this.$el.find(".message").remove();_.forEach(this.elements_array,function(ele){ele.$input.val("");if(ele.limition){ele.$label.html(ele.params.label)}});this.$el.find(".fg-toggled").removeClass("fg-toggled");this.$el.find(".timepicker").hide();this.$el.find(".hours").html("00");this.$el.find(".mins").html("00")},hasError:function(){var error_length=this.$el.find(".has-error").length;if(error_length>0){this.has_error=true}else{this.has_error=false}return this.has_error},getIndex:function(){return this.form_index_num},submit:function(event){event.preventDefault();this.checkValidation()},reset:function(event){event.preventDefault()},cancel:function(event){event.preventDefault()},show:function(dur){this.$el.show(dur)},hide:function(dur){this.$el.hide(dur)},remove:function(){if(this.dynamic_primitives["duration"+this.form_index_num].$timePicker){this.dynamic_primitives["duration"+this.form_index_num].$timePicker.remove();this.dynamic_primitives["duration"+this.form_index_num].$timePicker=null}app.base.views.BaseView.prototype.remove.apply(this,arguments);return this}});function clock(params){var timepicker=$('<div class="timepicker"><ul><li><div class="arrow-up"><a href="javescript:;"><i class="icon-awf-chevron-up"></i></a></div><div class="arrow-up"><a href="javescript:;"><i class="icon-awf-chevron-up"></i></a></div></li><li ><p class="hours">00</p><p style="padding: 20px 0px;">:</p><p class="mins">00</p></li><li><div class="arrow-down"><a href="javescript:;"><i class="icon-awf-chevron-down"></i></a></div><div class="arrow-down"><a href="javescript:;"><i class="icon-awf-chevron-down" ></i></a></div></li></ul></div>');var me=this;me.is_show=true;var form_index=params.index||1;var $trigger=params.trigger||null;var $wrap=params.wrap||null;var $ele=params.ele||null;var top_component=params.top_component||null;var mins_array=["00","15","30","45"];var obj={l:null,t:null,w:null,h:null};function load(){$trigger.after(timepicker);bindEvents();setPosition()}function bindEvents(){timepicker.find(".arrow-up").eq(0).on("click",addHour);timepicker.find(".arrow-up").eq(1).on("click",addMins);timepicker.find(".arrow-down").eq(0).on("click",minusHour);timepicker.find(".arrow-down").eq(1).on("click",minusMins);$("body").on("click",function(event){setPosition();if($trigger[0]!=event.target&&$trigger.find("i")[0]!=event.target&&timepicker.css("display")=="block"&&!$.contains(timepicker[0],event.target)){$ele.$input.trigger("blur",$ele);timepicker.hide()}});if(top_component){top_component.on("click",function(event){setPosition();if($trigger[0]!=event.target&&$trigger.find("i")[0]!=event.target&&timepicker.css("display")=="block"&&!$.contains(timepicker[0],event.target)){var value=parseInt(timepicker.find(".hours").html())+timepicker.find(".mins").html()/60;var duration=$("[name=duration"+form_index+"]");if(timepicker.css("display")==="block"){duration.val(value===1?"1 "+(w3n.utils.hasI18nTag(i18n_label.hour)?i18next.t(i18n_label.hour):"hour"):value+" "+(w3n.utils.hasI18nTag(i18n_label.hours)?i18next.t(i18n_label.hours):"hours"))}$ele.$input.trigger("blur",$ele);timepicker.hide()}})}timepicker.hide()}function setValue(durationNode){var value=parseInt(timepicker.find(".hours").html())+timepicker.find(".mins").html()/60;var duration=durationNode||$("[name=duration"+form_index+"]");duration.val(value===1?"1 "+(w3n.utils.hasI18nTag(i18n_label.hour)?i18next.t(i18n_label.hour):"hour"):value+" "+(w3n.utils.hasI18nTag(i18n_label.hours)?i18next.t(i18n_label.hours):"hours"))}function addHour(event){event.preventDefault();var hour=timepicker.find(".hours").html();hour=parseInt(hour)+1;hour=hour>9?hour:"0"+hour;hour=hour>40?"00":hour;timepicker.find(".hours").html(hour);setValue()}function minusHour(event){event.preventDefault();var hour=timepicker.find(".hours").html();hour=parseInt(hour)-1;hour=hour<0?"40":hour;hour=hour>9?hour:"0"+hour;timepicker.find(".hours").html(hour);setValue()}function addMins(event){event.preventDefault();var mins=timepicker.find(".mins").html();var index=mins_array.indexOf(mins);index=index+1>3?0:index+1;timepicker.find(".mins").html(mins_array[index]);setValue()}function minusMins(event){event.preventDefault();var mins=timepicker.find(".mins").html();var index=mins_array.indexOf(mins);index=index-1<0?3:index-1;timepicker.find(".mins").html(mins_array[index]);setValue()}function getTriggerPosition(){var offset=$wrap.offset();obj.l=offset.left;obj.t=$trigger.outerHeight()}function setPosition(){getTriggerPosition();var top=obj.t;timepicker.css({right:"0",top:top+"px"})}me.show=function(){me.is_show=true;timepicker.show()};me.hide=function(){me.is_show=false;timepicker.hide()};load();return timepicker}})();(function(){var self;var MgrhubDropdown=app.base.views.BaseView.extend({name:"mgrhub-dropdown",template:w3n.templates.components["mgrhub-dropdown"]["mgrhub-dropdown.html"],events:{},initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);self=this;$(".dropdown-toggle").off("click",this.openDropdown);$("#dashboardTabsContent").off("click",this.closeDropdown);$(".gridelement, .mini-alert").off("click",this.dropdownHandler);$(".gridelement, .mini-alert").on("click",this.dropdownHandler);$(".gridelement").on("mousedown",function(){self.menuClick=true});$(".dropdown-toggle").on("click",this.openDropdown);$("#dashboardTabsContent").on("click",this.closeDropdown);$(".dropdown-holder").remove()},show:function(tabName){var $evTarget=$("#"+tabName);var $ul=$evTarget.closest("ul:not(.dropdown-menu)");var selector=$evTarget.data("target");if(!selector){selector=$evTarget.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}var panelName=selector+"-panel";if($evTarget.parent("li").hasClass("active"))return;var $previous=$ul.find(".active:last a");var hideEvent=$.Event("hide.bs.tab",{relatedTarget:$evTarget[0]});var showEvent=$.Event("show.bs.tab",{relatedTarget:$previous[0]});$previous.trigger(hideEvent);$evTarget.trigger(showEvent);if(showEvent.isDefaultPrevented()||hideEvent.isDefaultPrevented())return;var $target=$(panelName);$("div[role='tabpanel']").attr("aria-selected",false);$target.attr("aria-selected",true);$(".header-icon").removeClass("on");$(selector+"-tab-header").addClass("on");$(selector+"-tab-title").addClass("on");this.activate($evTarget.closest("li"),$ul);this.activate($target,$target.parent(),function(){$previous.trigger({type:"hidden.bs.tab",relatedTarget:$evTarget[0]});$evTarget.trigger({type:"shown.bs.tab",relatedTarget:$previous[0]})})},activate:function(element,container,callback){var $active=container.find("> .active");var transition=callback&&$.support.transition&&($active.length&&$active.hasClass("fade")||!!container.find("> .fade").length);function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);element.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(element.parent(".dropdown-menu").length){element.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}}next();$active.removeClass("in")},dropdownHandler:function(ev){ev.preventDefault();$(".dropdown-toggle span").removeClass("on");var tab=$(ev.target).closest(".gridelement").attr("data-gridelementtarget")+"-tab";$(".dropdown-toggle #"+tab+"-title").addClass("on");$(".gridmenu").slideUp();$(".gridmenu").addClass("closed");self.show(tab);this.menuClick=false},openDropdown:function(ev){ev.preventDefault();if($(".gridmenu").hasClass("closed")){$(".gridmenu").slideDown("fast");$(".gridmenu").removeClass("closed")}else{$(".gridmenu").slideUp();$(".gridmenu").addClass("closed")}},closeDropdown:function(){if(!this.menuClick){$(".gridmenu").slideUp();$(".gridmenu").addClass("closed")}}});w3n.components.MgrhubDropdownNew=MgrhubDropdown})();(function(){var self;var MgrhubDropdown=app.base.views.BaseView.extend({name:"mgrhub-dropdown",template:w3n.templates.components["mgrhub-dropdown"]["mgrhub-dropdown.html"],events:{},initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);self=this;$('[data-toggle="tab-dropdown"], .mini-alert').off("click",this.dropdownHandler);$(".dropdown-toggle").off("click",this.openDropdown);$("#dashboardTabsContent").off("click",this.closeDropdown);$('[data-toggle="tab-dropdown"], .mini-alert').on("click",this.dropdownHandler);$('[data-toggle="tab-dropdown"]').on("mousedown",function(){self.menuClick=true});$(".dropdown-toggle").on("click",this.openDropdown);$("#dashboardTabsContent").on("click",this.closeDropdown)},show:function(tabName){var $evTarget=$("#"+tabName);var $ul=$evTarget.closest("ul:not(.dropdown-menu)");var selector=$evTarget.data("target");if(!selector){selector=$evTarget.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}var panelName=selector+"-panel";if($evTarget.parent("li").hasClass("active"))return;var $previous=$ul.find(".active:last a");var hideEvent=$.Event("hide.bs.tab",{relatedTarget:$evTarget[0]});var showEvent=$.Event("show.bs.tab",{relatedTarget:$previous[0]});$previous.trigger(hideEvent);$evTarget.trigger(showEvent);if(showEvent.isDefaultPrevented()||hideEvent.isDefaultPrevented())return;var $target=$(panelName);$("div[role='tabpanel']").attr("aria-selected",false);$target.attr("aria-selected",true);$(".header-icon").removeClass("on");$(selector+"-tab-header").addClass("on");this.activate($evTarget.closest("li"),$ul);this.activate($target,$target.parent(),function(){$previous.trigger({type:"hidden.bs.tab",relatedTarget:$evTarget[0]});$evTarget.trigger({type:"shown.bs.tab",relatedTarget:$previous[0]})})},activate:function(element,container,callback){var $active=container.find("> .active");var transition=callback&&$.support.transition&&($active.length&&$active.hasClass("fade")||!!container.find("> .fade").length);function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);element.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(element.parent(".dropdown-menu").length){element.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}}next();$active.removeClass("in")},dropdownHandler:function(ev){ev.preventDefault();var tabName=$(ev.target).attr("data-toggletarget")+"-tab";$(".dropdown-toggle span").removeClass("on");$(".dropdown-toggle #"+tabName+"-title").addClass("on");$(".dropdown-toggle").attr("aria-expanded",false).focus();$(ev.target).closest(".dropdown-holder").removeClass("open");self.show(tabName);this.menuClick=false},openDropdown:function(ev){ev.preventDefault();var expanded=$(ev.target).attr("aria-expanded");$(".dropdown-holder").removeClass("tabbedInto");if(expanded==="false"){$(ev.target).attr("aria-expanded",true)}else{$(ev.target).attr("aria-expanded",false)}var $tarDropdown=$("#"+$(ev.target).attr("id")+"-contents");$tarDropdown.toggleClass("open")},closeDropdown:function(){if(!this.menuClick){$(".dropdown-holder").removeClass("open")}},focusDropdown:function(){$(".dropdown-holder").addClass("tabbedInto")}});w3n.components.MgrhubDropdown=MgrhubDropdown})();(function(){var navTabs=app.base.views.BaseView.extend({template:w3n.templates.components.navtabs["navtabs.html"],events:{"click .navtabs":"selectTab"},initialize:function(options){options=options||{};this.tabs=options.tabs;this.scrollContainer=options.scrollContainer;this.padding=options.padding;this.$container=options.$container;this.firstRenderClick=true;$(this.scrollContainer).on("scroll",{tabs:this.tabs,padding:this.padding,$container:this.$container},this.scrollHandler)},selectTab:function(e,renderClick){var id=$(e.currentTarget).data("navid");var flag=true;var offset=0;var $element;var count=0;$.each(this.tabs,function(index,value){if(value.id===id){$element=value.$element}});if($element){offset=$element.offset().top-$(this.scrollContainer).offset().top;$(this.scrollContainer).scrollTop(offset-this.padding+$(this.scrollContainer).scrollTop()+1);$(".navtabs").removeClass("selected");$(e.currentTarget).addClass("selected")}if(!this.firstRenderClick){var target=$(e.currentTarget).text();w3n.utils.metrics.tagCogEvent("Click Nav Tab",target,"Nav Tab Bar",w3n.currentDashboard,"Manager Hub","none")}else{this.firstRenderClick=false}},scrollHandler:function(e){var $el=$(e.currentTarget);var offsetArray=[];$.each(e.data.tabs,function(index,value){$element=value.$element;var elementScrollValue=$element.offset().top-$el.offset().top-e.data.padding+$el.scrollTop();offsetArray.push({elementScrollValue:elementScrollValue,value:value})});offsetArray.sort(function(a,b){return parseFloat(a.elementScrollValue)-parseFloat(b.elementScrollValue)});var $currentFocusedElement;var currentFocusedElementname;$.each(offsetArray,function(index,item){if($el.scrollTop()>=item.elementScrollValue){$currentFocusedElement=offsetArray[index].value.$element;currentFocusedElementname=offsetArray[index].value.name}});if($currentFocusedElement){$(".navtabs").removeClass("selected");var id=$currentFocusedElement.data("navigation");$('.navtabs[data-navid="'+id+'"]').addClass("selected")}if($el.scrollTop()===0){e.data.$container.css("box-shadow","0 0 0 0 gray")}else{e.data.$container.css("box-shadow","0 4px 12px -4px gray")}},render:function(){var html=Mustache.render(this.template,{tabs:this.tabs});this.$el.html(html);$(".navtabs").first().click()},destroy:function(){this.undelegateEvents();this.$el.removeData().unbind();this.remove();Backbone.View.prototype.remove.call(this)}});w3n.components.NavigationTabs=navTabs})();(function(){var template=w3n.templates.components.popup["popup.html"];w3n.components=w3n.components||{};w3n.components.popup=app.base.views.BaseView.extend({template:template,initialize:function(config){this.config=config;this.isHovering=false;this.$target=config instanceof jQuery?config:$();this.$parent=$("body");this.$body=$("body");this.$el.html(this.template);config=typeof config==="object"?config:{};if(config.mode==="tooltip"){}else{this.$el.append('<i id="btn-close" class="icon-awf-op-times"></i>')}if(config.class){config.class=config.class||"popup"}else{config.width=config.width||300;config.height=config.height||150}this.setEventHandlers(this.$target,this.$parent);this.cleanup()},render:function(htmlContent,target,parent){this.$target=target||(this.config instanceof jQuery?this.$target:this.config.target);this.$parent=parent||(this.config instanceof jQuery?this.$parent:this.config.parent);this.close();if(this.$target.parents(".grid__item")){$(".grid__item").css("z-index","");this.$target.parents(".grid__item ").css("z-index","1")}if(this.$target&&htmlContent){this.$el.find(".popup-content").empty().append(htmlContent);if(!this.config.class){this.$el.css({width:this.config.width,height:this.config.height});if(this.$parent){this.setPosition()}if(this.config.top)this.$el.css({top:this.config.top});if(this.config.left)this.$el.css({left:this.config.left})}else{this.$el.addClass(this.config.class)}this.$target.append(this.$el)}this.open()},setEventHandlers:function(){if(this.config.mode==="tooltip"){}else{this.$el.find("#btn-close").on("click",function(){this.close()})}},setPosition:function(){var top,left,right,bottom;var leftBound,rightBound,topBound,bottomBound;if(!this.config.top&&!this.config.left){var POPUP_MARGIN_TOP,POPUP_MARGIN_BOTTOM,POPUP_MARGIN_LEFT,POPUP_MARGIN_RIGHT,centerX,centerY,targetTop,targetLeft,targetHeight,targetWidth,widthOffset;POPUP_MARGIN_TOP=30;POPUP_MARGIN_BOTTOM=30;POPUP_MARGIN_LEFT=15;POPUP_MARGIN_RIGHT=30;var popupPosition=this.$parent&&this.$parent.prop("nodeName")==="BODY"?"offset":"position";centerX=this.$parent?this.$parent.width()/2:0;centerY=this.$parent?this.$parent.height()/2:0;topBound=0;bottomBound=this.$parent&&this.$parent[popupPosition]()?this.$parent[popupPosition]().top+this.$parent.height():0;leftBound=0;rightBound=this.$parent&&this.$parent[popupPosition]()?this.$parent[popupPosition]().left+this.$parent.width():0;targetTop=this.$target&&this.$target[popupPosition]()?this.$target[popupPosition]().top+POPUP_MARGIN_TOP:0;targetLeft=this.$target&&this.$target[popupPosition]()?this.$target[popupPosition]().left+POPUP_MARGIN_LEFT:0;targetRelativeTop=this.$target&&this.$target.position()?this.$target.position().top+POPUP_MARGIN_TOP:0;targetRelativeLeft=this.$target&&this.$target.position()?this.$target.position().left+POPUP_MARGIN_LEFT:0;targetHeight=this.$target?this.$target.height():0;targetWidth=this.$target?this.$target.width():0;targetRight=targetLeft+targetWidth;targetBottom=targetTop+targetHeight;if(awf.info.browser.safari||awf.info.browser.ie){targetRelativeTop=targetTop;targetRelativeLeft=targetLeft}if(targetTop>=centerY&&targetLeft<=centerX){if(popupPosition==="offset"){top=targetRelativeTop-this.config.height+POPUP_MARGIN_BOTTOM;left=targetRelativeLeft}else{top=targetTop-this.config.height;left=targetLeft}}else if(targetTop>=centerY&&targetLeft>centerX){if(popupPosition==="offset"){top=targetRelativeTop-this.config.height+POPUP_MARGIN_BOTTOM;left=targetRelativeLeft-this.config.width+this.$target.width()+POPUP_MARGIN_RIGHT}else{top=targetTop-this.config.height;left=targetLeft-this.config.width+this.$target.width()+POPUP_MARGIN_RIGHT}}else if(targetTop<centerY&&targetLeft<=centerX){if(popupPosition==="offset"){top=targetRelativeTop+this.$target.height()+POPUP_MARGIN_BOTTOM;left=targetRelativeLeft}else{top=targetTop+this.$target.height()-POPUP_MARGIN_BOTTOM;left=targetLeft}}else if(targetTop<centerY&&targetLeft>centerX){if(popupPosition==="offset"){top=targetRelativeTop+this.$target.height()+POPUP_MARGIN_BOTTOM;left=targetRelativeLeft-this.config.width+this.$target.width()+POPUP_MARGIN_RIGHT}else{top=targetTop+this.$target.height()-POPUP_MARGIN_BOTTOM;left=targetLeft-this.config.width+this.$target.width()+POPUP_MARGIN_RIGHT}}}else{top=this.config.top||0;left=this.config.left||0}if(top<topBound){top=topBound}else if(top+this.config.height>bottomBound){top=bottomBound-this.config.height}this.$el.css({top:top,left:left})},cleanup:function(){$(".popup").remove()},open:function(){if(this.config.mode==="tooltip"){setTimeout(function(){if(this.isHovering)this.$el.stop().fadeTo("fast",1)},400)}else{this.$el.stop().fadeTo("fast",1)}},close:function(){$(".popup").hide();this.$el.stop().remove()}})})();(function(){w3n.components=w3n.components||{};w3n.components.profile_img=app.base.views.BaseView.extend({className:"profile-img",attributes:{role:"img"},template:_.template(w3n.templates.components["profile-img"]["profile-img.html"]),templates:{sametime:'<span class="sametime-badge" data-component="sametime-watcher" style="display:none"></span>'},events:{"click a":"callMetrics"},initialize:function(options){this.config=options||{};this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"profile-img"});if(!options.profile_size)options.profile_size=60},render:function(config){if(config)this.config=_.extend(this.config,config);this.$el.html(this.template(this.config));if(this.config.class)this.$el.addClass(this.config.class);return this},callMetrics:function(event){event.data=event.data||{};event.data=_.extend(event.data,{section:this.config.section||"profile:img"});this.metrics.linkEvent.bind(event.currentTarget)(event)}})})();(function(){if(!w3n.components)w3n.components={};w3n.components.Report=app.base.views.BaseView.extend({initialize:function(opts){opts=opts||{};app.base.views.BaseView.prototype.initialize.call(this,opts);this.className=opts.className;this.parent=opts.parent;this.height=opts.height;this.width=opts.width;this.title=opts.title||null;this.content=opts.content;this.reportData=opts.reportData;this.report2Data=opts.report2Data;this.template=w3n.templates.components.report["report.html"];this.render();this.delegateEvents()},events:{"click .close-button":"destroyModal","click .csv-button-report":"buildReportCSV","click .csv-button-report-2":"buildReport2CSV"},destroyModal:function(e){this.remove()},buildReportCSV:function(e){e.preventDefault();var filename=$(e.currentTarget).data("report");var message="IBM CONFIDENTIAL";w3n.utils.JSONToCSVConvertor(this.reportData,filename,true,message)},buildReport2CSV:function(e){e.preventDefault();var filename=$(e.currentTarget).data("report");var message="IBM CONFIDENTIAL";w3n.utils.JSONToCSVConvertor(this.report2Data,filename,true,message)},render:function(){var viewData={className:this.className,content:this.content,title:this.title};var html=Mustache.render(this.template,viewData);this.modal=new awf.ui.Modal({parent:this.parent,
height:this.height,width:this.width,content:html,active_state:true});this.modal.$el.css("z-index",1e3);this.$el=this.modal.$el;if(awf.flags.isActive("cogs.talentplaybook.dashboard.expenses.downloadReports")!==true){$(".takeover-content .csv-holder").css("display","none")}}})})();(function(){w3n.shareDialog=[];w3n.components=w3n.components||{};w3n.components.sharecomponent=app.base.views.BaseView.extend({template:w3n.templates.components["share-status"]["share-status.html"],events:{"keyup .share-status__input__textarea":"keyUpEventOnShareTextarea","keydown .share-status__input__textarea":"keyDownEventOnShareTextarea","click .js-btn-share-submit":"clickShareButton","keydown .js-btn-share-submit":"keyDownEventOnShareButton","click .js-btn-share-cancel":"clickCancelButton","keydown .js-btn-share-cancel":"keyDownEventOnCancelButtton"},initialize:function(params){this.delay=3e3;this.parent=params.parent;this.width=params.width||"inherit";this.height=params.height||"inherit";this.evt_type=params.evt_type||"click";this.$evt_target=params.evt_target;this.$trigger=params.trigger;this.module=params.module;this.callback=params.callback;this.url=params.url;this.cog_methods=params.cog_methods;this.$el=$(Mustache.render(this.template));this.cancel_btn=this.$el.find(".js-btn-share-cancel");this.share_btn=this.$el.find(".js-btn-share-submit");this.share_textarea=this.$el.find(".share-status__input__textarea");this.$evt_target.off(this.evt_type).on(this.evt_type,this.bindEventsToTarget.bind(this));w3n.shareDialog.push(this);this.render()},render:function(){this.setContent();this.$trigger.prepend(this.$el);this.delegateEvents();if("i18next"in window){this.$el.localize()}},setContent:function(){var id="share_dialog_"+(w3n.shareDialog.length+1);this.$el.find(".share-status__input__label").attr("for",id);this.$el.find(".share-status__input__textarea").attr("id",id)},bindEventsToTarget:function(event){event.preventDefault();this.tagEvent({name:"Share Icon"});this.playAnimation();this.$currentTarget=$(event.currentTarget);if(this.callback){var obj=this.callback.call(this,event);this.updateQuota(obj)}},updateQuota:function(obj){this.$el.find(".share-status__quote__title").html('<em class="icon-awf-quote-double-left"></em>'+obj.title);this.$el.find(".share-status__quote__desc").html(obj.desc);this.url=obj.url},clickShareButton:function(){this.addLoadingmark();this.tagEvent({name:"Share on Connections"});app.serviceModels.snipRequester.shorten(this.url).done(function(short){var share_txt_val=this.share_textarea.val();var title=this.$el.find(".share-status__quote__title").text();var desc=this.$el.find(".share-status__quote__desc").text();var msg=share_txt_val;var sepStr="";for(var index=0;index<112;index++){sepStr+="-"}if(msg===""){msg='"'+title+'"\n('+short.url+" )"+"\n"+desc}else{msg=msg+"\n"+sepStr+'\n"'+title+'"\n('+short.url+" )"+"\n"+desc}var setData={content:msg,actor:{id:"@me"},verb:"post"};this.collection=w3n.cogs.status_updates.collections[0];if(this.collection){this.model=this.collection.getSubStructure("postStatus")}else{this.model=new w3n.serviceModels.status_updates.postStatus}this.model.save({data:JSON.stringify(setData)}).done(this.shareSuccess.bind(this)).fail(this.shareError.bind(this))}.bind(this)).fail(this.shareError.bind(this))},clickCancelButton:function(){this.tagEvent({name:"cancel"});this.hide()},keyUpEventOnShareTextarea:function(event){var commentLabel=this.$el.find(".share-status__input__label");var shareBtn=this.$el.find(".js-btn-share-submit");var inputDiv=this.$el.find(".share-status__input");var value=event.currentTarget.value.trim();if(value===""){commentLabel.html("Add comment (Optional)")}else{var valLen=1e3-value.length;if(valLen>=0){commentLabel.html("( "+valLen+" characters left )");shareBtn.attr("disabled",false);shareBtn.removeClass("disabled");inputDiv.removeClass("errorInput")}else{commentLabel.html("( <em>"+valLen+"</em> characters left )");shareBtn.attr("disabled",true);shareBtn.addClass("disabled");inputDiv.addClass("errorInput")}}},keyDownEventOnShareTextarea:function(event){if(event.keyCode===9&&w3n.utils.browser.userAgent.safari&&!event.shiftKey){this.cancel_btn.focus()}else if(event.keyCode===9&&event.shiftKey){setTimeout(function(){this.share_btn.focus()}.bind(this),100)}},keyDownEventOnCancelButtton:function(event){if(this.share_btn.attr("disabled")=="disabled"){setTimeout(function(){this.share_textarea.focus()}.bind(this),100)}if(event.keyCode===13){this.tagEvent({name:"cancel"});this.hide()}},keyDownEventOnShareButton:function(event){if(event.keyCode===9){event.preventDefault();if(!event.shiftKey){this.share_textarea.focus()}else{this.cancel_btn.focus()}}},playAnimation:function(){var self=this;if(self.$el.hasClass("slide")){self.hide()}else{self.setPosition(true);setTimeout(function(){self.show()},200)}},show:function(){this.setPosition(true);this.$el.addClass("slide");this.setPosition(false);this.$el.parent().find(".share-dialog-overlay").removeClass("hide-overlap");this.$el.parent().find(".content").addClass("share-blurred");setTimeout(function(){this.share_textarea.focus()}.bind(this),300)},hide:function(){this.setPosition(true);this.$el.parent().find(".content").removeClass("share-blurred");setTimeout(function(){this.$el.removeClass("slide");this.$currentTarget.focus()}.bind(this),300);this.$el.parent().find(".share-dialog-overlay").addClass("hide-overlap")},setSize:function(new_size){var size=new_size||{height:_.isNumber(this.height)?this.height+"px":this.height,width:_.isNumber(this.width)?this.width+"px":this.width};this.$el.css(size)},setPosition:function(hide){if(hide){this.$el.css({top:0-this.$el.outerHeight()+"px"})}else{this.$el.css({top:"0px"})}},addLoadingmark:function(){var node=this.$el.find(".loading-mark")[0];if(!node){this.loading_mark=this.generateLoadingMark()}else{$(node).show()}},generateLoadingMark:function(params){this.$el.eq(0).append(app.base.views.BaseView.prototype.loadingTemplate)},showLoading:function(){this.$el.find(".loading-mark").show()},hideLoading:function(){this.$el.find(".loading-mark").hide()},shareSuccess:function(){this.hideLoading();var message="Success";if("i18next"in window&&!_.isEmpty(awf.i18n.languages)){var translated=i18next.t("app.common.message.success");message=translated=="app.common.message.success"?message:translated}this.cog_methods.postMessage("success",message).andDismissIn(3);this.share_textarea.val("");this.$el.find(".share-status__input__label").html("Add comment (Optional)");this.$el.find("button.cancel").focus();setTimeout(function(){this.hide()}.bind(this),3e3)},shareError:function(){this.hideLoading();var message="Oops, the Connections service is not available. Please refresh the page and try it later.";if("i18next"in window&&!_.isEmpty(awf.i18n.languages)){var translated=i18next.t("app.common.message.service-unavailable",{cog:"Connections"});message=translated=="app.common.message.service-unavailable"?message:translated}this.cog_methods.postMessage("error",message).andDismissIn(3)},tagEvent:function(params){if(!this.module)return;var parameters={ev:params.ev||"click",action:params.action||"button",module:this.module,name:params.name,section:params.section||"share-component",target:params.target||"none",group:"YourIBM"};app.utils.createMetricTag({group:awf.app.id}).tagEvent(parameters)}})})();(function(){w3n.components=w3n.components||{};w3n.components.slide_down=app.base.views.BaseView.extend({showed:false,toggle_class:{up:"fadeOutUp",down:"fadeInDown"},el:'<div class="animated slide-down"></div>',overlay:'<div class="slide-overlay"></div>',template:_.template(w3n.templates.components["slide-down"]["slide-down.html"]),initialize:function(options){this.config=options||{};_.extend(this,_.pick(options,"content","full_size","height","trigger","trigger_type","hide_target","show_callback","hide_callback","enable_overlay"))},render:function(config){if(config)this.config=_.extend(this.config,config);this.$el.html(this.template(this.config));if(this.full_size){this.$el.addClass("full-size")}else{if(this.height)this.setHeight()}if(this.trigger)this.trigger=$(this.trigger);this.bindEvents();if(this.content)this.setContent();return this},bindEvents:function(){if(this.trigger){$(this.trigger).on(this.trigger_type||"click",this.toggle.bind(this))}if(this.hide_target){$(this.hide_target).on("click",this.tryToHide.bind(this))}else{$("body").on("click",this.tryToHide.bind(this))}},setHeight:function(val){this.$el.css("height",this.height||val)},setContent:function(content,append){var new_content=content||this.content;if(new_content)this.$el.find(".slide-content")[append?"append":"html"](new_content)},tryToHide:function(event){if(this.showed&&this.trigger[0]!=event.target&&!$.contains(this.trigger[0],event.target)&&!$.contains(this.$el[0],event.target)){this.hide()}},toggle:function(){if(this.showed){this.show()}else{this.hide()}this.showed=!this.showed},show:function(func){if(this.enable_overlay){this.$el.after(this.overlay)}this.$el.removeClass(this.toggle_class.up).addClass(this.toggle_class.down);if(this.show_callback)this.show_callback(this);if(func&&_.isFunction(func))func(this)},hide:function(func){this.$el.addClass(this.toggle_class.up).removeClass(this.toggle_class.down);if(this.enable_overlay){this.$el.parent().find("div[class=slide-overlay]").remove()}if(this.hide_callback)this.hide_callback(this);if(func&&_.isFunction(func))func(this)}})})();(function(){var stickyHeader=app.base.views.BaseView.extend({initialize:function(options){options=options||{};this.scrollContainer=options.scrollContainer;this.$targetTable=options.$targetTable;this.$stickytableHeaderContainer=options.$stickytableHeaderContainer;$(this.scrollContainer).on("scroll",{$targetTable:this.$targetTable,$stickytableHeaderContainer:this.$stickytableHeaderContainer,scrollContainer:this.scrollContainer},this.scrollHandler)},scrollHandler:function(e){var $el=$(e.currentTarget);if(e.data.$targetTable&&e.data.$targetTable.length){var tableHeight;var tableHeaderheight=e.data.$targetTable.height();var tableTopScrollValue=e.data.$targetTable.offset().top-$el.offset().top+$el.scrollTop();var $lastRow;e.data.$targetTable.find("tbody").find("tr").each(function(index){if($(this).hasClass("talent-row")&&!$(this).hasClass("alert-section-row")&&!$(this).hasClass("additional-section-row")){$lastRow=$(this)}});var tableBottomScrollValue;if($lastRow){tableBottomScrollValue=$lastRow.offset().top-$el.offset().top+$el.scrollTop()}if($el.scrollTop()>tableTopScrollValue&&$el.scrollTop()<tableBottomScrollValue){e.data.$stickytableHeaderContainer.show("fast")}else{e.data.$stickytableHeaderContainer.hide("fast")}e.data.$targetTable.find("thead").find("th").each(function(index){var n=index+1;if(index+1<=e.data.$stickytableHeaderContainer.find("th").length){e.data.$stickytableHeaderContainer.find("th:nth-child("+n+")").outerWidth($(this).outerWidth(true))}})}},render:function(){this.$el.html(this.$targetTable.html());this.$el.find("tbody").hide();this.$el.hide();var self=this;this.$targetTable.find("thead").find("th").each(function(index){var n=index+1;if(index+1<=self.$el.find("th").length){self.$el.find("th:nth-child("+n+")").width($(this).outerWidth(true))}})},destroy:function(){this.undelegateEvents();this.$el.removeData().unbind();this.remove();Backbone.View.prototype.remove.call(this)}});w3n.components.TableScrollHeader=stickyHeader})();(function(){var Tabs=app.base.views.BaseView.extend({name:"tabs",template:w3n.templates.components.tabs["tabs.html"],selectedTab:{},events:{"click .tab-actions .tab-btn":"selectTab",keydown:"keyPress"},initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);options=options||{};if(options){if(options.tabs){var isKeyMissing=_.some(options.tabs,function(tab){return tab.tabKey===undefined});if(isKeyMissing)console.error("w3n.components.Tabs: options.tabs is missing a key.")}}this.tabFetch=options.tabFetch||false;this.tabs=options.tabs||[{tabKey:"",tabTitle:""}];if(options.selectedTab){this.selectTab(options.selectedTab)}else{this.selectTab(this.tabs[0].tabKey)}this.activeFocus=this.tabs.length?this.selectedTab.tabKey:null;if(this.tabs.length)this.selectedTab.tabIndex=true},clearSelection:function(){this.selectedTab={};_.forEach(this.tabs,function(tab){tab.active="";tab.isSelected=false})},selectTab:function(tabKeyOrEvent){var self=this;var tabKey=tabKeyOrEvent instanceof $.Event?$(tabKeyOrEvent.target).data("index"):tabKeyOrEvent;var tab=_.find(this.tabs,{tabKey:tabKey});if(tab){this.clearSelection();tab.active="active";tab.isSelected=true;this.selectedTab=tab;this.activeFocus=tab.tabKey;this.render();this.$el.find("li.tab-list-item a").attr("tabindex","-1");this.$el.find("#"+this.activeFocus+" a").attr("tabindex","0");if(tab.view){if(this.subviewEl&&this.subviewEl!==tab.view.$el){tab.view.setElement(this.subviewEl)}tab.view.stopListening(tab.view.model,"sync sync:cached",listener);tab.view.listenTo(tab.view.model,"sync sync:cached",listener);tab.view.listenTo(tab.view.model,"error",errorhandler);if((this.tabFetch||this.hadError)&&tab.view.model){this.hadError=false;tab.view.model.fetch()}else{tab.view.render()}}}this.trigger("tabChange",tabKey);function listener(model,response,options){if(tab.view===options.view)tab.view.render()}function errorhandler(model,response,options){self.hadError=true}},keyPress:function(e){var code=e.keyCode||e.which;if(false)console.log("Keydown code: ",code);if(code===37){this.tabArrow(false)}else if(code===39){this.tabArrow(true)}if(code===13){this.selectTab(this.activeFocus);this.$el.find("li.tab-list-item a").attr("tabindex","-1");this.$el.find("#"+this.activeFocus+" a").attr("tabindex","0");this.$el.find("#"+this.activeFocus+" a")[0].focus()}},tabArrow:function(isUp){var tab;var activeIndex=this.tabs.map(function(tab){return tab.tabKey}).indexOf(this.activeFocus);if(isUp){activeIndex+=1}else{activeIndex-=1}if(activeIndex===this.tabs.length){tab=this.tabs[0].tabKey}else if(activeIndex<0){tab=this.tabs[this.tabs.length-1].tabKey}else{tab=this.tabs[activeIndex].tabKey}this.activeFocus=tab;this.$el.find("#"+tab+" a")[0].focus()},render:function(){if(this.tabs&&this.tabs.length>0){app.base.views.BaseView.prototype.render.call(this,{tabs:this.tabs})}}});w3n.components.Tabs=Tabs})();(function(){if(!w3n.components)w3n.components={};w3n.components.tooltip=app.base.views.BaseView.extend({initialize:function(opts){opts=opts||{};app.base.views.BaseView.prototype.initialize.call(this,opts);var requiredOpts=["template","model","target"];if(!opts||!w3n.utils.hasKeys(opts,requiredOpts)){throw new Error("a tooltip component requires options: "+requiredOpts.join(", "))}this.template=opts.template;this.className=opts.className;this.target=opts.target;this.hide=opts.hide||{};this.tip_events=opts.events||{};this.rendered=false;this.style=opts.style;this.position=opts.position;this.render()},render:function(){var data=this.model.toJSON();var target=$(this.target);var html;if(Object.keys(data).length===1)html=w3n.base.loaderString;else html=Mustache.render(this.template,data);var defaultStyle={classes:this.className||"",tip:false,height:this.height||191,width:this.width||360};var defaultPosition={my:"top left",at:"bottom right"};target.qtip(_.extend({style:this.style||defaultStyle,position:this.position||defaultPosition,content:{text:html},show:{solo:true,ready:true,delay:300},hide:_.extend({leave:true,fixed:true,delay:300,event:"mouseleave"},this.hide)},{events:this.tip_events}))}})})();(function(){var view_more=w3n.templates.components["view-more-flip"]["view-more-flip.html"]})();(function(){var cogName="aboutTray";w3n.cogs[cogName]={views:{}}})();(function(){var cogName="awards";w3n.cogs[cogName]={views:{}}})();(function(){w3n.cogs.bluepages={adapters:{},views:{}}})();(function(){var cogName="box";w3n.cogs[cogName]={adapters:{},views:{}}})();(function(){var cogName="community";w3n.cogs.community={adapters:{},models:{},views:{},services:{}}})();(function(){var cogName="compensation";w3n.cogs[cogName]={views:{}}})();(function(){var cogName="learning";w3n.cogs[cogName]={views:{},collections:{},models:{},i18n:{}};w3n.cogs[cogName].i18n={awf_common:"awf.common",app_common:"app.common",domain:"app.cogs.learning",domains:{courses:"courses",featured:"featured",t40:"think40",yours_website:"yours-website",form:"form",aria_label:"wai-aria.aria-label"},mapI18nNamespace:function(ns){if(_.contains(ns,this.awf_common)||_.contains(ns,this.app_common)){return ns}return this.domain+"."+ns},setI18nNamespace:function(nss){return _.mapValues(nss,this.mapI18nNamespace.bind(this))},organizeI18n:function(view,new_nss){view.i18n_ns={i18n_more:this.awf_common+"."+"show_more",i18n_less:this.awf_common+"."+"show_less",i18n_cancel:this.awf_common+"."+"cancel",i18n_courses_label:this.domains.courses+"."+"label",i18n_courses_view_your:this.domains.courses+"."+"view-your",i18n_courses_view_more:this.domains.courses+"."+"view-more",i18n_featured_label:this.domains.featured+"."+"label",i18n_featured_learn_more:this.app_common+".cta."+"learn-more",i18n_featured_view_more:this.domains.featured+"."+"view-more",i18n_t40_label:this.domains.t40+"."+"label",i18n_t40_view_scorecard:this.domains.t40+"."+"view-scorecard",i18n_t40_total:this.domains.t40+"."+"total",i18n_t40_accomplished:this.domains.t40+"."+"accomplished",i18n_t40_hours_completed:this.domains.t40+"."+"hours-completed",i18n_t40_add_cta:this.domains.t40+"."+"add-cta",i18n_t40_list_heading:this.domains.t40+"."+"list-heading",i18n_t40_completed:this.domains.t40+"."+"completed",i18n_t40_hour:this.domains.t40+"."+"hour",i18n_t40_hour_param:this.domains.t40+"."+"hour-param",i18n_t40_hours:this.domains.t40+"."+"hours",i18n_t40_hours_param:this.domains.t40+"."+"hours-param",i18n_t40_thx_add_learning:this.domains.t40+"."+"thx-add-learning",i18n_t40_back_scorecard:this.domains.t40+"."+"back-scorecard",i18n_t40_connect_learning:this.domains.t40+"."+"connect-learning",i18n_t40_in_learning_queue:this.domains.t40+"."+"in-queue",i18n_t40_enrollment_cancelled:this.domains.t40+"."+"enrollment-cancelled",i18n_t40_iframe_error:this.domains.t40+"."+"iframe-error",i18n_t40_activities_error:this.domains.t40+"."+"activities-error",i18n_t40_service_error:this.domains.t40+"."+"service-error",i18n_aria_label_course_item:this.domains.aria_label+"."+"course_item",i18n_aria_label_hero_item:this.domains.aria_label+"."+"hero_item",i18n_aria_label_feature_item:this.domains.aria_label+"."+"feature_item",i18n_aria_label_feature_item_label:this.domains.aria_label+"."+"feature_item_label",i18n_yours_website_label:this.domains.yours_website+"."+"tab_label",i18n_form_item_or_event_name:this.domains.form+"."+"item-or-event-name",i18n_form_completion_date:this.domains.form+"."+"completion-date",i18n_form_duration:this.domains.form+"."+"duration",i18n_form_activity_type:this.domains.form+"."+"activity-type",i18n_form_business_initiative:this.domains.form+"."+"business-initiative",i18n_form_comments:this.domains.form+"."+"comments",i18n_form_comments_counting:this.domains.form+"."+"comments-counting",i18n_form_submit:this.app_common+".cta."+"submit",i18n_form_cancel:this.awf_common+"."+"cancel"};if(new_nss){_.extend(view.i18n_ns,new_nss)}view.i18n_ns=this.setI18nNamespace(view.i18n_ns);if(!view.model){view.model=new app.base.models.BaseModel}if(view.model instanceof Backbone.Model){view.model.set(view.i18n_ns)}}};w3n.cogs[cogName].views.base=app.base.views.BaseView.extend({loading_html:app.templates.components["loading-mark"]["loading-mark.html"],message:{iframeError:"Can not get authentication.",activitiesError:"Oops, the activities service is not available.",serviceError:'If sign in fails several times, you can go directly to <a href="https://yourlearning.w3bmix.ibm.com/" target="_blank">Your Learning</a> site and sign in.'},initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;w3n.cogs[cogName].i18n.organizeI18n(this);this.setTabsText();if(this.params.summary){this.listenTo(this.params.summary,"sync",this.setSummary);this.listenTo(this.params.summary,"error",this.setSummaryError);this.listenTo(this.params.summary,"iframe-error",this.iframeError)}if("i18next"in window){awf.i18n.on("apply:language",this.setTabsText.bind(this))}this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"learning:large"})},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);if(this.setItems){this.setItems()}if(this.carousel){this.carousel.setDefPointer(0)}if(this.setCheckingThinkTab&&awf.user.is_authenticated){this.setCheckingThinkTab()}if(this.changeTab){this.changeTab()}if("i18next"in window)this.$el.localize();return this},setTabsText:function(){this.tabs_text={courses:w3n.utils.hasI18nTag(this.i18n_ns.i18n_courses_label)?i18next.t(this.i18n_ns.i18n_courses_label):"Courses",think40:w3n.utils.hasI18nTag(this.i18n_ns.i18n_t40_label)?i18next.t(this.i18n_ns.i18n_t40_label):"Your Think40",featured:w3n.utils.hasI18nTag(this.i18n_ns.i18n_featured_label)?i18next.t(this.i18n_ns.i18n_featured_label):"Featured",yourLearningSite:w3n.utils.hasI18nTag(this.i18n_ns.i18n_yours_website_label)?i18next.t(this.i18n_ns.i18n_yours_website_label):"Your Learning"}},iframeError:function(){var message=w3n.utils.hasI18nTag(this.i18n_ns.i18n_t40_iframe_error)?i18next.t(this.i18n_ns.i18n_t40_iframe_error):this.message.iframeError;this.commonError(message)},setSummaryError:function(){var message=w3n.utils.hasI18nTag(this.i18n_ns.i18n_t40_service_error)?i18next.t(this.i18n_ns.i18n_t40_service_error):this.message.serviceError;this.commonError(message)},commonError:function(message){this.showHideLoading("hide");this.params.parent_friends.postMessage("error",message,false).andDismissIn(5);this.yourLearning("hide");this.recommended("show");this.$el.find(".add-learning").hide();this.$el.find(".add-success").hide();if(this.tab.hasTab(this.tabs_text.courses)){this.tab.activeTab(this.tabs_text.courses)}if(this.tab.hasTab(this.tabs_text.featured)){this.tab.activeTab(this.tabs_text.featured)}},createCarousel:function(selecter,params){this.carousel=new app.components.carousel(_.extend({el:this.$el.find(selecter)[0]},params));this.$el.find(selecter).append(this.carousel.render().$el)},showHideLoading:function(action,params){action=action||"hide";if(action==="show"){this.$el.append(this.loading_html)}else{this.$el.find(".loading-mark").remove()}},showHideMessageBar:function(action,message,params){action=action||"hide";if(action==="show"){this.commonError(message.context)}},switchContent:function(index){var sections=this.$el.find(".content").children();sections.hide();sections.eq(index).show()},recommended:function(action){action=action||"hide";var css=action==="show"?"block":"none";this.$el.find(".recommended").css("display",css);this.$el.find(".recommended-list").css("display",css)},yourLearning:function(action){action=action||"hide";var css=action==="show"?"block":"none";this.$el.find(".your-learning").css("display",css);this.$el.find(".your-learning-list").css("display",css)},yoursWebsite:function(action){action=action||"hide";var css=action==="show"?"flex":"none";this.$el.find(".your-learning-website").css("display",css);this.$el.find(".your-learning-website").css("display",css)},remove:function(){app.base.views.BaseView.prototype.remove.apply(this,arguments);this.trigger("destroy");return this}});w3n.cogs[cogName].views.base_item=app.base.views.BaseView.extend({tagName:"article",attributes:{role:"article"},title_limit:55,abstract_limit:200,events:{"click a":"callMetrics","mousedown a":"callMetricsWithData"},initialize:function(params){this.params=params;w3n.cogs[cogName].i18n.organizeI18n(this);if(params.parent){this.listenTo(params.parent,"destroy",this.remove)}},render:function(){this.data=this.model.toJSON();this.data=this.setCourse(this.data);_.extend(this.data,this.i18n_ns);this.$el.html(this.template(this.data));this.setCommonEles();this.setClasses(this.data);if("i18next"in window)this.$el.localize();return this},setCommonEles:function(){this.$badging=this.$el.find(".badging");this.$due_date=this.$el.find(".due-date");this.$img=this.$el.find(".headline > img")},setClasses:function(data){switch(data.type.toLowerCase()){case"enrolled":this.$badging.addClass("green");break;case"featured":this.$badging.hide();break;case"required":this.$badging.addClass("red");this.$due_date.show();break;case"in learning queue":this.$badging.addClass("yellow");break;case"completed":this.$badging.addClass("gray");break;default:}if(data.icon_url&&data.type=="in-progress")this.$img.addClass("round")},setCourse:function(data){var temp_data={};if(data.type){temp_data.due_date=data.type=="required"&&data.due_date!==null&&data.due_date!==""?"due "+moment(data.due_date,"YYYY-MM-DD").fromNow():"";temp_data.type=_.capitalize(data.type)}temp_data.title=data.title?_.trunc(data.title,{length:this.title_limit,separator:" "}):"";temp_data.abstract=data.abstract?_.trunc(data.abstract,this.abstract_limit):"";temp_data.duration=data.duration?Number(data.duration).toFixed(1)+(Number(data.duration)>1?" hours":" hour"):"";temp_data.url=data.url||"javascript:;";temp_data.icon_url=data.image||data.icon_url||"";return temp_data},callMetrics:function(event){event.data=event.data||{};event.data=_.extend(event.data,{section:"carousel"});this.metrics.linkEvent.bind(event.currentTarget)(event)},callMetricsWithData:function(event){event.data=event.data||{};event.data=_.extend(event.data,{mousedown:true});this.callMetrics(event)}});w3n.cogs.learning.views.think_base=app.base.views.BaseView.extend({btn_template:_.template('<p class="cta-btn"><button type="button" class="flip-1" data-i18n="{{i18n_t40_view_scorecard}}">View your Think40 scorecard</button></p>'),initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;w3n.cogs[cogName].i18n.organizeI18n(this);if(params.parent){this.listenTo(params.parent,"destroy",this.remove)}$(window).on("resize",this.moveProgressBar.bind(this))},render:function(){var temp=this.model.toJSON();var hours=Number(temp.currentYear);this.model.set("currentYearHours",hours.toFixed(1));this.model.set("currentYearPercentage",temp.currentYear>=40?"100%":parseInt(temp.currentYear/40*100).toString()+"%");this.model.set("currentYearAccomplishment",temp.currentYear>=40?"Think40 <br>accomplished!":"");this.model.set("Accomplished",temp.currentYear>=40?"accomplished":"");app.base.views.BaseView.prototype.render.apply(this,arguments);if(this.appendBtn){this.appendBtn()}this.setSelecters();this.moveProgressBar();if("i18next"in window)this.$el.localize();return this},setSelecters:function(){this.$progress_wrap=this.$el.find(".progress__wrap");this.$progress_bar=this.$el.find(".progress__wrap__bar")},moveProgressBar:function(){var get_percent=this.$progress_wrap.data("progress-percent")/40,get_progress_wrap_width=this.$progress_wrap.width();if(this.card_type==="medium"&&get_progress_wrap_width<266)get_progress_wrap_width=266;var position=get_percent*get_progress_wrap_width;if(position>get_progress_wrap_width){position=get_progress_wrap_width}this.$progress_bar.stop().animate({left:position},2500)}})})();(function(){w3n.cogs.minipulse={adapters:{},views:{}};w3n.cogs.minipulse.views.base={createLikertLabels:function(type){var arr=[];switch(type){case 1:arr=[{text:"Highly Satisfied",value:1,i18n_label:"app.cogs.minipulse.poll-result.highy-satisfied"},{text:"Satisfied",value:2,i18n_label:"app.cogs.minipulse.poll-result.satisfied"},{text:"Neither Satisfied nor Disatisfied",value:3,i18n_label:"app.cogs.minipulse.poll-result.neither-satisfied-nor-disatisfied"},{text:"Dissatisfied",value:4,i18n_label:"app.cogs.minipulse.poll-result.dissatisfied"},{text:"Highly Dissatisfied",value:5,i18n_label:"app.cogs.minipulse.poll-result.highly-dissatisfied"}];break;default:arr=[{text:"Strongly Agree",value:1,i18n_label:"app.cogs.minipulse.poll-result.strongly-agree"},{text:"Agree",value:2,i18n_label:"app.cogs.minipulse.poll-result.agree"},{text:"Neither Agree nor Disagree",value:3,i18n_label:"app.cogs.minipulse.poll-result.neither-agree-nor-disagree"},{text:"Disagree",value:4,i18n_label:"app.cogs.minipulse.poll-result.disagree"},{text:"Strongly Disagree",value:5,i18n_label:"app.cogs.minipulse.poll-result.strongly-disagree"}];break}return arr},createAnswerObj:function(poll,answer,value){return{pollid:poll.id,answerid:answer.id,shared:poll.shared,liked:poll.liked,referral:false,comment:value.comment||"",rank:value.rank||0}}}})();(function(){var cogName="profileInfo";w3n.cogs[cogName]={views:{}}})();(function(){var cogName="status_updates";w3n.cogs[cogName]={views:{},collections:[],models:{},utils:{},appId:"yourIBM"};w3n.cogs[cogName].utils={i18n_awf_common:"awf.common",i18n_app_common:"app.common",i18n_domain:"app.cogs.status-updates",domains:{common:{sa:"social-actions",message:"message"},cta:"cta",social:"social",item:"item",comments:"comments",post_domain:"post-status-to",list:"view-list",messages:"messages",aria_label:"wai-aria.aria-label"},mapI18nNamespace:function(ns){if(_.contains(ns,this.i18n_awf_common)||_.contains(ns,this.i18n_app_common)){return ns}return this.i18n_domain+"."+ns},setI18nNamespace:function(nss){return _.mapValues(nss,this.mapI18nNamespace.bind(this))},organizeI18n:function(view,new_nss){view.i18n_ns={i18n_more:this.i18n_awf_common+"."+"show_more",i18n_less:this.i18n_awf_common+"."+"show_less",i18n_cancel:this.i18n_awf_common+"."+"cancel",i18n_view_more:this.domains.cta+"."+"view-more",i18n_del:this.domains.cta+"."+"delete",i18n_login_connections:this.i18n_awf_common+"."+"sign_in_proper",i18n_connect_to_connections:this.domains.cta+"."+"connect-connections",i18n_like:this.i18n_app_common+"."+this.domains.common.sa+"."+"like",i18n_unlike:this.i18n_app_common+"."+this.domains.common.sa+"."+"unlike",i18n_no_data_msg:this.i18n_app_common+"."+this.domains.common.message+"."+"no-data",i18n_comment:this.domains.social+"."+"comment",i18n_open_profile:this.domains.item+"."+"open-profile",i18n_repost_icon:this.domains.item+"."+"repost-icon",i18n_add_comment:this.domains.comments+"."+"add",i18n_adding_comment:this.domains.comments+"."+"adding",i18n_del_comment_confirmation:this.domains.comments+"."+"del-confirmation",i18n_del_comment:this.domains.comments+"."+"del",i18n_placeholder:this.domains.post_domain+"."+"placeholder",i18n_label:this.domains.post_domain+"."+"label",i18n_everyone:this.domains.post_domain+"."+"everyone",i18n_community:this.domains.post_domain+"."+"community",i18n_person:this.domains.post_domain+"."+"person",i18n_cta:this.domains.cta+"."+"post-status-btn",i18n_all:this.domains.list+"."+"all",i18n_network:this.domains.list+"."+"network",i18n_follow:this.domains.list+"."+"follow",i18n_communities:this.domains.list+"."+"communities",i18n_error_msg:this.domains.messages+"."+"error-msg",i18n_400:this.domains.messages+"."+"400",i18n_401:this.domains.messages+"."+"401",i18n_404:this.domains.messages+"."+"404",i18n_500:this.domains.messages+"."+"500",i18n_100:this.domains.messages+"."+"100",i18n_aria_lable_item:this.domains.aria_label+"."+"item"};if(new_nss){_.extend(view.i18n_ns,new_nss)}view.i18n_ns=this.setI18nNamespace(view.i18n_ns);if(!view.model){view.model=new app.base.models.BaseModel}if(view.model instanceof Backbone.Model){view.model.set(view.i18n_ns)}},setLoadingIcon:function(html){html.find("a").removeClass("icon-awf-heart").addClass("icon-awf-rotate-right icon-awf-spin")},toggleIconActive:function(html){html.find("a").toggleClass("active")},truncHTML:function(data,limit){data=this.shortenDashes(data);var result="",left=limit;var temp=data;var array=data.match(/<a(.*?)>/g);_.forEach(array,function(node,i){var preString=temp.substring(0,temp.indexOf(node));if(left>0){if(left-preString.length<=0){preString=_.trunc(preString,{length:left,separator:" "});left=left-preString.length;result+=preString}else{left=left-preString.length;var text=temp.substring(temp.indexOf(node)+node.length,temp.indexOf("</a>"));if(left-text.length<0){
text=_.trunc(text,left);left=left-text.length;result+=preString+node+text+"</a>"}else{result+=preString+node+text+"</a>";left=left-text.length;temp=temp.substring(temp.indexOf("</a>")+4);if(array.length==i+1){var lastString=temp;if(left-lastString.length<0){lastString=_.trunc(lastString,{length:left,separator:" "})}result+=lastString}}}}});if(!array){result=_.trunc(data,{length:limit,separator:" "})}if(result.lastIndexOf("<")>result.length-10&&result.lastIndexOf("...")===result.length-3){result=result.substring(0,result.lastIndexOf("<"))+"..."}return result},shortenDashes:function(description){description=description.replace("-------------------------------------------------------------------------------- ","");return description},isMoreThanOmitCount:function(original,limit){var html_tag=original.replace(/<(span class="photo"|span class="x-lconn-userid")(.*?)\/span>/g,"").replace(/<(.*?)>/g,"");if(html_tag.length>limit){return true}return false}}})();(function(){var cogName="talentplaybook";w3n.cogs[cogName]={views:{},models:{}};w3n.adapters.tpb={};w3n.AtAGlanceLoaded=false;w3n.getDashboardArray=function(){var obj=w3n.tpConfig.dashboards;var dashboardArray=$.map(obj,function(el){var returnEl=el;if(!awf.flags.isActive("cogs.talentplaybook.dashboard.yourteam")&&returnEl.dashName==="yourteam"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.expertise")&&returnEl.dashName==="expertise"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.performance")&&returnEl.dashName==="performance"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.bcg")&&returnEl.dashName==="bcg"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.compensation")&&returnEl.dashName==="compensation"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.dates")&&returnEl.dashName==="dates"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.emergency")&&returnEl.dashName==="emergency"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.leadership")&&returnEl.dashName==="leadership"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.security")&&returnEl.dashName==="security"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.assets")&&returnEl.dashName==="assets"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.awards")&&returnEl.dashName==="awards"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.benefits")&&returnEl.dashName==="benefits"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.diversity")&&returnEl.dashName==="diversity"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.expenses")&&returnEl.dashName==="expenses"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.global")&&returnEl.dashName==="global"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.jobs")&&returnEl.dashName==="jobs"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.time")&&returnEl.dashName==="time"){return}if(!awf.flags.isActive("cogs.talentplaybook.dashboard.travel")&&returnEl.dashName==="travel"){return}return returnEl});return dashboardArray};w3n.checkmark=" <span class='icon icon-awf-checkmark'></span>"})();(function(){var compositeModel=app.base.models.CompositeModel.extend({mergedSubCollection:{},mergeCandidates:{},asyncCollections:[],initialize:function(options){options=options||{};this.id=options.id||options.cnum;this.cnum=options.cnum;app.base.models.CompositeModel.prototype.initialize.apply(this,arguments);this.asyncCollections=[]},addCollection:function(name,collection,parse,error,options){var retval=app.base.models.CompositeModel.prototype.addCollection.apply(this,arguments);_.extend(collection,options);if(!_.find(this.asyncCollections,{mgrId:this.Id,name:name})){options=options||{};if(options.merge){this.mergeCandidates[name]={array:[],idFinder:options.idFinder,name:name,isOneToOne:options.isOneToOne}}if(options.async){collection.listenTo(collection,"sync sync:cached",function(){var col=this.subCollectionsMap[name];if(col){col.array=this.subCollectionsMap[name].toJSON();col.async=options.async;this.gatherCollectionsToMerge()}collection.trigger("sync:merged",name)}.bind(this));collection.listenTo(collection,"error",function(){collection.trigger("error:merged",name)}.bind(this));collection.async=true;collection.name=name;this.asyncCollections.push(collection)}}return retval},getFetchPromises:function(opts){var subModelsMapNonAsync=_.pick(this.subModelsMap,function(model){return!model.async});var subCollectionsMapNonAsync=_.pick(this.subCollectionsMap,function(col){return!col.async});var models=Object.keys(subModelsMapNonAsync).map(function(modelName){return subModelsMapNonAsync[modelName].fetch(opts)}.bind(this));var collections=Object.keys(subCollectionsMapNonAsync).map(function(collectionName){return subCollectionsMapNonAsync[collectionName].fetch(opts)}.bind(this));return models.concat(collections)},fetch:function(options){var fetchCount=0;options=options||{};options.uncache=true;options.all=true;return app.base.models.CompositeModel.prototype.fetch.apply(this,arguments).done(function(){this.gatherCollectionsToMerge();this.fetchAsync(options)}.bind(this))},fetchAsync:function(options){_.forEach(this.asyncCollections,function(col){col.trigger("sync:started",col.name);if(col.id===this.id||col.mgrId===this.id||col.cnumID===this.id){col.fetch(options)}}.bind(this))},gatherCollectionsToMerge:function(){_.forEach(this.mergeCandidates,function(value,key){if(this.subCollectionsMap&&this.subCollectionsMap[key]){var col=this.mergeCandidates[key];col.array=this.subCollectionsMap[key].toJSON();this.merge(col)}}.bind(this))},merge:function(candidate){var isMain=candidate===this.mergeCandidates.main;if(this.mergeCandidates.main&&this.mergeCandidates.main.array){var mergedRaw=_.map(this.mergeCandidates.main.array,function(mainItem){if(isMain){return mainItem}else{if(candidate.isOneToOne){return _.extend(mainItem,_.find(candidate.array,function(col2Item){return candidate.idFinder(mainItem.id,col2Item)}))}else{var itemsToMerge=_.filter(candidate.array,function(col2Item){return candidate.idFinder(mainItem.id,col2Item)});var wrapper={};wrapper[candidate.name]=itemsToMerge;return _.extend(mainItem,wrapper)}}}.bind(this));if(isMain||_.isEmpty(this.mergedSubCollection)){var mergedColl=this.setupSort();this.mergedSubCollection=new mergedColl(mergedRaw)}else{this.mergedSubCollection.set(mergedRaw)}}},removeCache:function(){_.forEach(this.subCollectionsMap,function(col){if(col.hoardCache&&col.canBeUpdated){var url=_.isFunction(col.url)?col.url():col.url;Backbone.Hoard.backend.removeItem(url)}})},setupSort:function(){var collection=app.base.collections.BaseCollection.extend({sortDirection:1,sortAttribute:"fullname",sortDashboard:function(attr){this.sortAttribute=attr;this.sort()},comparator:function(a,b){var x,y,property;if(this.sortAttribute.startsWith("supplemental")){property=this.sortAttribute.substring(13);x=a.get("supplemental")?a.get("supplemental")[property]:"";y=b.get("supplemental")?b.get("supplemental")[property]:""}else if(this.sortAttribute.startsWith("wwer2")){property=this.sortAttribute.substring(6);x=a.get("wwer2")?a.get("wwer2")[property]:"";y=b.get("wwer2")?b.get("wwer2")[property]:""}else{x=a.get(this.sortAttribute);y=b.get(this.sortAttribute)}x=String(x);y=String(y);if(this.sortAttribute==="pmrPercent"){if(!x){x=9999}else if(x.substring(x.length-1,x.length)==="%"){x=parseFloat(x)}else{x=999}if(!y){y=9999}else if(y.substring(y.length-1,y.length)==="%"){y=parseFloat(y)}else{y=999}}else if(this.sortAttribute==="band"||this.sortAttribute==="appAnnualSalary"||this.sortAttribute==="lastSalaryChangeAmount"||this.sortAttribute.startsWith("wwer2")||this.sortAttribute.startsWith("otherExpenses")){if((isNaN(x)||!x)&&x.indexOf("Blocked Data")==-1){x=9999}else if(x.indexOf("Blocked Data")!==-1){x=999}else{x=parseInt(x)}if((isNaN(y)||!y)&&y.indexOf("Blocked Data")==-1){y=9999}else if(y.indexOf("Blocked Data")!==-1){y=999}else{y=parseInt(y)}}else{if(!x){x="Ï"}if(x.indexOf("Blocked Data")!==-1){x="Î©"}if(!y){y="Ï"}if(y.indexOf("Blocked Data")!==-1){y="Î©"}}if(x==y)return 0;if(this.sortDirection==1){return x>y?1:-1}else{return x<y?1:-1}}});return collection}});w3n.cogs.talentplaybook.CompositeModel=compositeModel})();(function(){w3n.cogs.dashboard={views:{}}})();(function(){var itemBase=app.base.views.BaseView.extend({avatar:null,detailViews:[],initialize:function(options){options=options||{};this.dashboardProperties=options.dashboardProperties;this.template=w3n.templates.cogs.talentplaybook.dashboards.items[options.dashboardProperties.itemTemplate];this.parent=options.parent;this.detailViews=[]},render:function(options){options=options||{};app.base.views.BaseView.prototype.render.call(this,arguments);if(_.isFunction(this.renderAvatar))this.renderAvatar();if(_.isFunction(this.renderDetails))this.renderDetails()},renderAvatar:function(){this.avatarModel=new app.serviceModels.Avatar({id:this.model.attributes.id,initials:this.model.attributes.initials});this.avatarModel.fetch().then(function(){if(this.avatar){this.avatar.remove();this.avatar=null}this.avatar=new app.components.Avatar({model:this.avatarModel,name:"avatar-"+this.model.attributes.id});var view=this.avatar.render({uid:this.model.attributes.id},true);this.$el.find(".person-link."+this.model.attributes.id).find("div.avatar").html(view.$el.html())}.bind(this))},removeSubItems:function(){if(this.avatarModel){this.avatarModel.destroy();this.avatarModel=null}},remove:function(){this.removeSubItems();app.base.views.BaseView.prototype.remove.call(this,arguments)}});w3n.cogs.dashboard.views.ItemBase=itemBase})();(function(){var mainBase=app.base.views.BaseView.extend({el:".dashboard.table-container",template:null,itemViews:[],cacheNeedsUpdate:false,templates:{error:'<p class="notification js_msg_error"> Oops, the Dashboard data services are currently not available. Please refresh and try later.</p>',nodata:'<p class="notification js_msg_info">You have no {{filter}} direct reports.</p>'},initialize:function(options){options=options||{};this.template=w3n.templates.cogs.talentplaybook.dashboards[options.dashboardProperties.dashTemplate2];this.dashboardProperties=options.dashboardProperties;this.parent=options.parent;this.itemViews=[];this.spreadsheet={};this.filterSetting="global";this.components=options.components||{};this.sortAttribute=this.model.mergedSubCollection.sortAttribute;this.sortDirection=1;this.setLoader();this.on("switch-manager-by-item switch-manager-by-drilldown",this.switchManager)},events:{"click th":"sortColumn","click .team-toggle":"filterGlobalIncountry"},render:function(){this.model.attributes.dashboardProperties=this.dashboardProperties;this.$el.empty();app.base.views.BaseView.prototype.render.call(this,arguments);this.renderDrillDownManager();this.renderDownloadSpreadsheet();this.renderSortingIndicator();this.checkFeatureFlags();this.renderDashItems()},renderDownloadSpreadsheet:function(){var flag_for_all="cogs.talentplaybook.dashboard.download",flag_for_single="cogs.talentplaybook.dashboard."+this.dashboardProperties.dashName+".download";var downloadSpreadsheet=this.components.downloadSpreadsheet;if(awf.flags.isActive(flag_for_all)&&awf.flags.isActive(flag_for_single)){if(this.spreadsheet){delete this.spreadsheet}var options={main:this.model.mergedSubCollection,compositeModel:this.model.subCollectionsMap,dashboardProperties:this.dashboardProperties};if(_.isObject(downloadSpreadsheet)){_.extend(options,downloadSpreadsheet)}this.spreadsheet=new w3n.cogs.dashboard.views.Spreadsheet(options);this.$el.prepend(this.spreadsheet.render().el);this.spreadsheet.enableDownloadButton()}},renderDrillDownManager:function(){var flag_for_all="cogs.talentplaybook.dashboard.manager-drilldown",flag_for_single="cogs.talentplaybook.dashboard."+this.dashboardProperties.dashName+".manager-drilldown";var drilldown=this.components.managerDrilldown;if(awf.flags.isActive(flag_for_all)&&awf.flags.isActive(flag_for_single)){if(this.parent.modelDef!==w3n.cogs.talentplaybook.models.Expenses){if(this.managerDrilldown){delete this.managerDrilldown}var drillDownModel=new w3n.cogs.talentplaybook.ManagerDrillDown({id:awf.user.info.cnum});var options={el:this.parent.$el.find(drilldown.holderClass),collection:drillDownModel,autoFetch:true,parent:this};if(_.isObject(drilldown)){_.extend(options,drilldown)}this.managerDrilldown=new w3n.cogs.dashboard.views.ManagerDrilldown(options)}}},switchManager:function(e,options){if(e&&$(e.target).hasClass("is-manager")&&this.dashboardProperties.dashName==="expenses"){return}this.$el.find(".talent-table").append(app.templates.components["loading-mark"]["loading-mark.html"]);options=options||{};var id=e===null?options.period:typeof e==="string"?e:$(e.target).data("uid").toString();if(this.$el.find(".manager-list-item button").length){this.$el.find(".manager-list-item button").removeClass("active");$(e.target).parents(".manager-list-item:first button").addClass("active")}this.trigger("switch-manager",{event:e,id:id,period:options.period})},renderError:function(error){app.base.views.BaseView.prototype.render.call(this,arguments);if(error.responseJSON&&error.responseJSON.wsf_response){var filter=this.parent.filterSetting=="global"?" Global ":this.parent.filterSetting=="incountry"?" In country ":" ";this.$el.find(".talent-table").before(Mustache.render(this.templates.nodata,{filter:"Global "}));this.$el.find(".talent-table").remove()}else{this.$el.find(".talent-table").before(this.templates.error);this.$el.find(".talent-table").remove()}},renderDashItems:function(){if(this.sortAttribute){this.model.mergedSubCollection.sortDirection=this.sortDirection;this.model.mergedSubCollection.sortDashboard(this.sortAttribute)}var models=this.model.mergedSubCollection.models;this.$el.find(".dashboard-tbody").remove();this.$el.find(".loading-mark").remove();models.forEach(function(model){if(_.isFunction(this.preRenderItem))this.preRenderItem(model);this.$el.find(".talent-table").append('<tbody class="dashboard-tbody" id="'+model.id+'"></tbody>');var ItemView=this.dashboardProperties.itemView||w3n.cogs.dashboard.views.Item;var item=_.find(this.itemViews,{cnum:model.id})||new ItemView({model:model,dashboardProperties:this.dashboardProperties,el:this.$el.find(".dashboard-tbody#"+model.id),parent:this});this.itemViews.push(item);item.render();item.listenToOnce(this.model.mergedSubCollection,"reset",item.remove.bind(item))}.bind(this));this.filterGlobalIncountry(this.filterSetting)},filterGlobalIncountry:function(e){var teamGroup;if(typeof e==="string"){teamGroup=e}else{e.preventDefault();teamGroup=$(e.target).data("team")}this.closeAllAccordions();$(".talent-row").removeClass("on");if(teamGroup==="allteams"){$(".talent-row").addClass("on");$(".dashboard .js_msg_info").html("You have no direct reports.")}else{$(".team-"+teamGroup).addClass("on");$(".dashboard .js_msg_info").html("You have no "+(teamGroup=="global"?"Global":"In-country")+" direct reports.")}$(".team-toggle").removeClass("current");$("."+teamGroup+"-toggle").addClass("current");this.filterSetting=teamGroup},sortColumn:function(e){if(awf.flags.isActive("cogs.talentplaybook.dashboard.table-sort")){e.preventDefault();var scrollLoc=this.$el.find(".tab-content.scroll-card").scrollTop();this.closeAllAccordions();var $el=$(e.currentTarget);var ns=$el.attr("sort");if(ns&&ns!=="false"&&$el.attr("class")!=="person-link-header"){var cs=this.model.mergedSubCollection.sortAttribute;if(ns==cs){this.model.mergedSubCollection.sortDirection*=-1;this.sortDirection*=-1}else{this.model.mergedSubCollection.sortDirection=1;this.sortDirection=1}this.sortAttribute=ns;this.renderDashItems();this.checkFeatureFlags(e);this.$el.find(".tab-content.scroll-card").scrollTop(scrollLoc)}}},closeAllAccordions:function(){$(".showhide").removeClass("visible");$(".alert-section-row").removeClass("showSubRow");$(".additional-section-row").removeClass("showSubRow");$(".expand-btn").addClass("icon-awf-op-plus").removeClass("icon-awf-op-minus")},renderSortingIndicator:function(){this.$(".talent-table").find("th:not(:first-child)").append($("<div>"))},checkFeatureFlags:function(e){var $sort;if(e){$sort=$(e.currentTarget).find("div")}else{$sort=this.$(".talent-table").find('[sort="'+this.model.mergedSubCollection.sortAttribute+'"] div')}this.$(".talent-table th>div").removeClass("sortAsc").removeClass("sortDsc");if(awf.flags.isActive("cogs.talentplaybook.dashboard.table-sort")){if(this.model.mergedSubCollection.sortDirection==1){$sort.addClass("sortAsc")}else{$sort.addClass("sortDsc")}}if(!awf.flags.isActive("cogs.talentplaybook.example-definition")){$("a.definition").css("display","none")}}});w3n.cogs.dashboard.views.MainBase=mainBase})();(function(){var cogName="taskCalendarResponsive";w3n.cogs[cogName]={views:{},taskStatus:[{key:"future-task",description:"Scheduled"},{key:"past-task",description:"Past"},{key:"in-progress-task",description:"In Progress"}]}})();(function(){var cog_name="team-members";w3n.cogs[cog_name]={adapters:{},views:{}}})();(function(){var cogName="team-profiles";w3n.cogs[cogName]={views:{}};w3n.AtAGlanceLoaded=false;w3n.getMgrhubPersonArray=function(){var obj=w3n.mgrhubPersonConfig.dashboards;var dashboardArray=$.map(obj,function(el){var returnEl=el;if(!awf.flags.isActive("cogs.team-profiles.dashboard.personalinfo")&&returnEl.dashName==="personalinfo"){return}return returnEl});return dashboardArray};w3n.getParsedName=function(fullName){if(typeof fullName==="string"||fullName instanceof String){if(fullName.indexOf("Blocked Data")!==-1)return{first:fullName,mi:fullName,last:fullName,full:fullName};var last=fullName.split(",")[0];var first=fullName.split(",")[1].split(" ")[1];var mi=fullName[fullName.length-1];return{first:first,mi:mi,last:last,full:fullName}}else{return fullName}};w3n.checkmark=" <span class='icon icon-awf-checkmark'></span>"})();(function(){var cogName="team";w3n.cogs[cogName]={views:{}}})();(function(){var cogName="thinkAcademy";w3n.cogs[cogName]={views:{}}})();(function(){var cogName="timeInOut";w3n.cogs[cogName]={views:{}}})();(function(){var cogName="whatsnew";w3n.cogs[cogName]={state:{},views:{},adapters:{}};w3n.cogs.whatsnew.views.common={generateCarousel:function(data){var carousel=new app.components.carousel_sync(data);return carousel},hideUnpublished:function(entry){var today=moment();var entryDate=moment(entry.date);if(today>entryDate)return false;return true},dateConversion:function(date){var momentDate=moment(new Date(date));var printableDate=momentDate.format("D MMMM YYYY");return printableDate}};w3n.cogs.whatsnew.adapters.WhatsnewObj=function(){var obj={title:null,date:null,abstract:null,trunc_abstract:null,has_abstract:true,copy:null,trunc_copy:null,url:null,button_title:null,icon:{src:null,alt:null},img:{src:null,alt:null},img_large:{src:null,alt:null},has_img:true,tags:null};return obj};awf.util.use(awf.__.BaseModel).toCreate(Value);w3n.cogs.whatsnew.state.index=new Value(0);function Value(val){awf.__.BaseModel.call(this);var params=arguments.length>0?{value:val}:{};awf.util.mixin.properties(this,params,{value:{default:0}})}})();(function(){var roundFun=function(numberRound,roundDigit){var tempNumber;if(numberRound>=0){tempNumber=parseInt(numberRound*Math.pow(10,roundDigit)+.5)/Math.pow(10,roundDigit);return tempNumber}else{numberRound1=-numberRound;tempNumber=parseInt(numberRound1*Math.pow(10,roundDigit)+.5)/Math.pow(10,roundDigit);return-tempNumber}};var renderSize=function(value){if(value===0){return"0Bytes"}var unitArr=new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB");var index=0;var srcsize=parseFloat(value);var size=roundFun(srcsize/Math.pow(1024,index=Math.floor(Math.log(srcsize)/Math.log(1024))),2);return size+unitArr[index]};w3n.cogs.box.adapters.json=function(data){var collection=[];_.forEach(data[0].entries,function(entry){var model={id:entry.id,type:entry.type,sequence_id:entry.sequence_id,name:entry.name,file_version:entry.file_version,size:renderSize(entry.size),created_at:moment(entry.created_at).format("L"),created_by:entry.created_by.name,total_count:1,has_collaborations:entry.has_collaborations,modified_at:moment(entry.content_modified_at).format("L"),download_url:entry.download_url,parent:entry.parent,shared_link:entry.shared_link};collection.push(model)});return collection};var urlTemplate="https://api.box.com/2.0/folders/{{id}}/items?limit=10&offset=0&fields=type,id,etag,name,created_at,size,modified_by,created_by,has_collaborations,content_modified_at,item_collection,download_url,parent,shared_link",id="0",url="";url=_.template(urlTemplate)({id:id});w3n.serviceModels.jsonBoxRequester=app.base.collections.BaseCollection.extend({buildUrl:function(id){if(id){this.url=_.template(urlTemplate)({id:id})}},model:app.base.models.BaseModel,url:url,initialize:function(){app.base.models.BaseModel.prototype.initialize.apply(this,arguments);var origFetch=this.fetch;this.fetch=function(params){if(!params)params={};if(!params.dataType)params.dataType="json";if(!params.all)params.all=true;if(!params.headers)params.headers={"Access-Control-Allow-Origin":"*",authorization:"Bearer "+params.token};return origFetch.call(this,params)}.bind(this);this.fetched=false}})})();(function(){w3n.cogs.community.services.inviteService=function(api,data,model,component,ajax_params){var communityRequester=new w3n.serviceModels.community.collectionsRequester(null,{api:api});communityRequester.fetch(ajax_params).done(function(res){if(api==="accept"){acceptInviteDone(data,model,component)}else if(api==="reject"){rejectInviteDone(data,model,component)}}).fail(function(err){if(api==="accept"){acceptInviteFail(err,data,model,component)}else if(api==="reject"){rejectInviteFail(component)}})};function acceptInviteDone(res,model,component){res.community.$el.remove();var community_id=res.communityUuid;var updatedInvites=_.remove(model.toJSON().invites,function(entry){var flag=true;if(community_id==entry.communityUuid){entry.invites=false;model.toJSON().my_communities.push(entry);model.toJSON().my_communities.sort(function(a,b){return Date.parse(b.updated)-Date.parse(a.updated)});flag=false}return flag});model.set("invites",updatedInvites);component.tryReload();component.showMessage({status:"success",context:app.messages.community["accept-success"]})}function acceptInviteFail(err,data,model,component){var html;if(err.status==201){data.community.$el.remove();var community_id=data.communityUuid;var updatedInvites=_.remove(model.toJSON().invites,function(entry){var flag=true;if(community_id==entry.communityUuid){entry.invites=false;model.toJSON().my_communities.push(entry);model.toJSON().my_communities.sort(function(a,b){return Date.parse(b.updated)-Date.parse(a.updated)});flag=false}return flag});model.set("invites",updatedInvites);component.tryReload(model);component.showMessage({status:"success",context:app.messages.community["accept-success"]})}else{component.showMessage({status:"error",context:app.messages.community["request-fail"]})}}function rejectInviteDone(data,model,component){data.community.$el.remove();var community_id=data.communityUuid;var updatedInvites=_.remove(model.toJSON().invites,function(entry){var flag=true;if(community_id==entry.communityUuid){entry.invites=false;flag=false}return flag});model.set("invites",updatedInvites);component.showMessage({status:"success",context:app.messages.community["reject-success"]})}function rejectInviteFail(component){component.showMessage({status:"error",context:app.messages.community["request-fail"]})}})();(function(){var bp={profile:"http://w3.ibm.com/bluepages/profile.html?uid="};w3n.cogs.bluepages.views.grid_item=app.base.views.BaseView.extend({tagName:"li",className:"bluepages-search__result__views__grid__item awf-card -awf-focus",attributes:{tabindex:"0",role:"listitem"},events:{"click .js-bluepages-result-item-name":"goToURL","click .js-bluepages-result-item-email":"mailTo","click .js-bluepages-result-item-tel-office":"callTelNum","click .js-bluepages-result-item-tel-mobile":"callTelNum","click .js-bluepages-result-assistant-name":"assistant"},template:w3n.templates.cogs.bluepages["grid-item.html"],initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.business_card=null;this.options=options;_.extend(this,_.pick(options,"metrics"));if(options.card){this.listenTo(options.card,"remove-views",this.remove)}this.avatar=new app.serviceModels.Avatar({id:this.model.get("uid"),initials:w3n.utils.getInitials(this.model.get("name"))})},hasPhoto:function(){this.avatar.fetch().then(function(){if(this.avatar.get("avatar")){this.model.set("avatar",true)}else{this.model.set("avatar",false);this.model.set("initials",w3n.utils.getInitials(this.model.get("name")))}this.render()}.bind(this))},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);return this},goToURL:function(action){window.open(bp.profile+this.model.get("uid"),"_blank");var params=action.ev?action:{ev:"click"};this.callMetrics(params)},mailTo:function(){this.callMetrics({ev:"click",action:"Contact Mail of Profile",name:"Bluepages results list item",target:"mailto:"+this.model.get("email")})},assistant:function(){this.callMetrics({ev:"click",action:"Redirect to Bluepages",name:"Bluepages results list item",target:this.model.get("assistant_url")})},callTelNum:function(e){this.callMetrics({ev:"click",action:"Contact "+$(e.currentTarget).attr("title").substring(14)+" of Profile",name:"Bluepages results list item",target:"Call "+$(e.currentTarget).attr("title").substring(14)+" : "+$(e.currentTarget).attr("href").substring(4)})},callMetrics:function(params){if(this.metrics){this.metrics.tagEvent(_.extend({action:"Redirect to Bluepages",name:"Bluepages results list item",target:bp.profile+this.model.get("uid"),section:"BP card"},params))}else{console.log("There is no metrics function found.")}},remove:function(){app.base.views.BaseView.prototype.remove.apply(this,arguments)}})})();(function(){var bp={profile:"http://w3.ibm.com/bluepages/profile.html?uid="};w3n.cogs.bluepages.views.list_item=app.base.views.BaseView.extend({tagName:"li",className:"bluepages-search__result__views__list__item",attributes:{tabindex:"0",role:"listitem"},events:{mouseenter:"showBusinesscard",mouseleave:"hideBusinesscard","click .js-bluepages-result-item-name":"goToUrl","click .js-bluepages-copy-icon":"copyInfo",keydown:"checkActive",focus:"setActive",click:"ignoreInactive","blur .js-bluepages-copy-icon":"setInactive","blur .js-bluepages-result-item-name":"checkIcon","keydown .js-bluepages-copy-icon":"getFocus","click .js-bluepages-result-item-email":"mailTo","click .js-bluepages-result-item-tel-office":"callTelNum","click .js-bluepages-result-item-tel-mobile":"callTelNum"},template:w3n.templates.cogs.bluepages["list-item.html"],initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.business_card=null;this.options=options;this.view_methods=options.view_methods;_.extend(this,_.pick(options,"metrics"));this.debounceBusinessCard=_.debounce(this.toggleBusinessCard.bind(this),300);if(options.card){this.listenTo(options.card,"remove-views",this.remove);this.listenTo(options.card,"clear-active",this.setInactive);options.card.listenTo(this,"clear-active",options.card.clearActiveItems)}this.avatar=new app.serviceModels.Avatar({id:this.model.get("uid"),initials:w3n.utils.getInitials(this.model.get("name"))})},hasPhoto:function(){this.avatar.fetch().then(function(){if(this.avatar.get("avatar")){this.model.set("avatar",true)}else{this.model.set("avatar",false);this.model.set("initials",w3n.utils.getInitials(this.model.get("name")))}this.render()}.bind(this))},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.defineElements();this.show_copy_icon=!awf.flags.isActive("cogs.bluepages.copy")?false:true;this.checkConfig();return this},defineElements:function(){this.img=this.$el.find(".js-bluepages-result-item-img");this.name=this.$el.find(".js-bluepages-result-item-name");this.role=this.$el.find(".js-bluepages-result-item-role");this.copy=this.$el.find(".js-bluepages-copy-icon")},checkConfig:function(){if(!this.show_copy_icon){this.copy.addClass("disabled")}},showBusinesscard:function(event){event.preventDefault();this.debounceBusinessCard()},hideBusinesscard:function(event){event.preventDefault();this.debounceBusinessCard.cancel();this.toggleBusinessCard("hide");this.img.removeAttr("aria-describedby")},goToUrl:function(action){window.open(bp.profile+this.model.get("uid"),"_blank");var params=action.ev?action:{ev:"click"};this.callMetrics(params)},mailTo:function(){this.callMetrics({ev:"click",action:"Contact Mail of Profile",name:"Bluepages results list item",target:"mailto:"+this.model.get("email")})},callTelNum:function(e){this.callMetrics({ev:"click",action:"Contact "+$(e.currentTarget).attr("title").substring(14)+" of Profile",name:"Bluepages results list item",target:"Call "+$(e.currentTarget).attr("title").substring(14)+" : "+$(e.currentTarget).attr("href").substring(4)})},copyInfo:function(event){event.preventDefault();if(this.textAreaCopy){document.body.removeChild(this.textAreaCopy);delete this.textAreaCopy}var textArea=this.textAreaCopy=document.createElement("textarea");textArea.style.position="fixed";textArea.style.top=0;textArea.style.left=0;textArea.style.width="2em";textArea.style.height="2em";textArea.style.padding=0;textArea.style.border="none";textArea.style.outline="none";textArea.style.boxShadow="none";textArea.style.background="transparent";textArea.value=this.model.get("name")+"\n"+(this.model.get("role")?this.model.get("role")+"\n":"")+(this.model.get("address")?this.model.get("address")+"\n":"")+(this.model.get("tel_mobile")?this.model.get("tel_mobile")+" (Mobile)\n":"")+(this.model.get("tel_office")?this.model.get("tel_office")+" (Office)\n":"")+(this.model.get("tel_tieline")?this.model.get("tel_tieline")+" (Tie line)\n":"")+this.model.get("email")+"\n"+this.model.get("notes")+"\n";document.body.appendChild(textArea);textArea.select();if(awf.util.info.browser.safari&&awf.util.info.browser_version<10){this.view_methods.postMessage("info","Press Ctrl/Command-C to copy",false).andDismissIn(3)}else{try{var successful=document.execCommand("copy");var msg=successful?"This contact information has been copied to clipboard!":"Oops, copy failed.";if(successful){this.view_methods.postMessage("success",msg,false).andDismissIn(3)}else{this.view_methods.postMessage("error",msg,false).andDismissIn(3)}}catch(err){this.view_methods.postMessage("error","Oops, copy failed.",true).andDismissIn(3)}document.body.removeChild(textArea);delete this.textAreaCopy}if(this.metrics){this.metrics.tagEvent({ev:"click",action:"button",name:"Copy to clipboard",target:"none",section:"BP card"})}else{console.log("There is no metrics function found.")}},toggleBusinessCard:function(action){if(action==="hide"){if(this.business_card){this.business_card.remove();this.business_card=null}}else{if(!this.business_card){this.generateBusinessCard()}}},generateBusinessCard:function(){$(".qtip").remove();this.business_card=new w3n.components.tooltip({model:this.model,target:this.img[0],hide:{target:this.$el},template:w3n.templates.cogs.bluepages["business-card.html"],style:{width:400},events:{render:function(evt,api){$(".qtip .qtip-content .business-card .right-panel a").on("click",function(event){this.metrics.tagEvent({ev:"click",action:event.target.href.indexOf("mailto:")>-1?"mailto":"link",name:"Bluepages card results list item",target:event.target.href,section:"BP card"})}.bind(this));$(".qtip .qtip-content .business-card .right-panel a").first().on("keydown",function(event){if(event.keyCode===9&&event.shiftKey){var tooltip=$(this.business_card.target).qtip("api");tooltip.hide();this.hideBusinesscard(event);this.$el.focus()}}.bind(this));$(".qtip .qtip-content .business-card .right-panel a").last().on("keydown",function(event){if(event.keyCode===9&&!event.shiftKey){var tooltip=$(this.business_card.target).qtip("api");
tooltip.hide();this.hideBusinesscard(event);this.$el.focus()}}.bind(this));$(".qtip .qtip-content .business-card").localize()}.bind(this),visible:function(){$(".qtip .qtip-content .business-card .right-panel a").first().focus()},hide:function(evt,api){$(".qtip .qtip-content .business-card .right-panel a").off("click")}.bind(this)}})},setActive:function(event){this.$el.addClass("-is-active")},checkActive:function(event){if(event.keyCode===9&&event.shiftKey){this.setInactive()}if(event.keyCode===13&&$(event.target).is("li")){if(!this.business_card){this.generateBusinessCard()}}},setInactive:function(){this.$el.removeClass("-is-active")},checkIcon:function(){if(!this.show_copy_icon){this.setInactive()}},ignoreInactive:function(){this.trigger("clear-active")},getFocus:function(event){if(event.keyCode===13){event.preventDefault();this.copyInfo(event);this.setActive();this.copy.focus()}},callMetrics:function(params){if(this.metrics){this.metrics.tagEvent(_.extend({action:"Redirect to Bluepages",name:"Bluepages results list item",target:bp.profile+this.model.get("uid"),section:"BP card"},params))}else{console.log("There is no metrics function found.")}},remove:function(){this.toggleBusinessCard("hide");app.base.views.BaseView.prototype.remove.apply(this,arguments)}})})();(function(){var bp={api:"http://w3.ibm.com/bluepages/?s=",preference_key:"w3n.bluepages.preference_view"};w3n.cogs.bluepages.views.search=app.base.views.BaseView.extend({template:_.template(w3n.templates.cogs.bluepages["search.html"]),events:{"click .js-bluepages-result-submit":"redirectUrl","click .js-bluepages-result-clear":"triggerClearInput","click .js-bluepages-view-trigger":"switchViewTo","keydown .js-bluepages-view-trigger":"switchViewToByEnter","click .js-bluepages-search-result-footer button":"viewMore","keyup .js-bluepages-result-input":"keyboardSearch","focus .js-bluepages-result-input":"slideupInput","blur .js-bluepages-result-input":"slidedownInput","compositionstart .js-bluepages-result-input":"notDirectTyping"},matches_text:'<span data-i18n="[html]app.cogs.bluepages.search.results-for" data-i18n-options=\'{"num": "{{matches}}", "query": "{{query}}"}\'>{{matches}} search results for <strong>{{query}}</strong></span>',view_btn_html:'<li class="bluepages-search__result__bar__controller__item"><button class="js-bluepages-view-trigger icon-awf-{{icon}} {{type}}" data-i18n="[title]app.cogs.bluepages.result.{{type}}" title="{{text}}"><label data-i18n="app.cogs.bluepages.result.{{type}};" class="awf-access">{{text}}</label></button></li>',no_result_html:'<li class="js-bluepages-no-results bluepages-no-results"><p data-i18n="[html]app.cogs.bluepages.search.no-results" data-i18n-options=\'{"query": "{{query}}"}\'>0 results found for <strong>{{query}}</strong><p></li>',initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.options=options;this.view_methods=options.view_methods;this.limit=options.limit||5;this.result_views=options.result_views||["list"];this.view_button_label=options.view_button_label;this.view_button_i18n_label=options.view_button_i18n_label;var preference_key=localStorage.getItem(bp.preference_key);this.active_view=this.result_views.length>1&&preference_key?preference_key:options.active_view||"list";this.flex_class=options.flex_class||"-flex-disabled";this.active_class=options.active_class||"-is-active";this.active_grid_class="-grid-enable";this.bg_class="-bg-enable";_.extend(this,_.pick(options,["metrics","data"]));if(this.data){this.listenTo(this.data,"get-matches",this.setMatches);this.listenTo(this.data,"get-query",this.setQuery);this.listenTo(this.data,"get-results",this.setResults);this.listenTo(this.data,"no-results",this.setNoResults);this.listenTo(this.data,"empty-query",this.clearInput);this.listenTo(this.data,"error",this.searchFailed);this.data.listenTo(this,"searching",this.data.search);this.data.listenTo(this,"empty-input",this.data.emptyQuery)}this.on("clear-view",this.slidedownInput);this.debounceSearch=_.debounce(this.search.bind(this),200)},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.defineElements();this.renderOnce();this.setAriaLabels();this.SetFlipBtn();return this},defineElements:function(){this.wrap=this.$el.find(".js-bluepages-search");this.logo=this.$el.find(".js-bluepages-search-logo");this.input_wrap=this.$el.find(".js-bluepages-search-result-input");this.search_btn=this.$el.find(".js-bluepages-result-submit");this.input=this.$el.find(".js-bluepages-result-input");this.input_label=this.$el.find(".js-bluepages-result-input-label");this.clear_btn=this.$el.find(".js-bluepages-result-clear");this.result_bar_controller=this.$el.find(".js-bluepages-search-result-bar-controller");this.result_bar=this.$el.find(".js-bluepages-search-result-bar");this.result_bar_text=this.$el.find(".js-bluepages-search-result-bar-info");this.result_wrap=this.$el.find(".js-bluepages-search-results ul");this.footer=this.$el.find(".js-bluepages-search-result-footer")},SetFlipBtn:function(){this.footer.find("button").attr("data-i18n",this.view_button_i18n_label).html(this.view_button_label);if("i18next"in window)this.footer.find("button").localize()},setAriaLabels:function(){var name="",val="";if(this.data&&this.data.name){name="_"+_.snakeCase(this.data.name)}val="bluepages_result_input_"+this.cid+name;this.input.attr("id",val);this.input_label.attr("for",val);this.result_wrap.attr("aria-label","bluepages search result list wrap "+this.cid)},keyboardSearch:function(event){if(event.keyCode===13&&!this.not_direct_typing){this.redirectUrl()}else{if(event.keyCode!==9&&event.keyCode!==16&&!event.shiftKey){this.not_direct_typing=false;this.debounceSearch();this.toggleLoading()}}this.toggleClear(event);this.checkResultsStatus(event)},notDirectTyping:function(event){this.not_direct_typing=true},redirectUrl:function(event){var val=this.input.val();if(val!==""){window.open(bp.api+val,"_blank");this.callMetrics({ev:event?"click":"enter",action:"redirect",name:"query:"+val,target:bp.api+val})}else{this.message({type:"info",content:app.utils.hasI18nTag("app.cogs.bluepages.search.input-keywords")?i18next.t("app.cogs.bluepages.search.input-keywords"):"Please input keywords!"});this.callMetrics({ev:event?"click":"enter",action:"redirect",name:"No keywords",target:"input keywords!"})}},search:function(event){if(this.input.val()!==""){this.trigger("searching",{query:this.input.val()});this.callMetrics({ev:"keydown",action:"input",name:"query:"+this.input.val(),target:"none"})}},slideupInput:function(){this.toggleClear();this.wrap.addClass(this.flex_class);this.logo.slideUp("500")},slidedownInput:function(){setTimeout(function(){this.toggleClear();if(this.input.val()===""){this.toggleResults("hide")}this.wrap.removeClass(this.bg_class)}.bind(this),200)},toggleClear:function(){if(this.input.val()!==""){this.clear_btn.addClass(this.active_class)}else{this.clear_btn.removeClass(this.active_class)}},checkResultsStatus:function(event){if(this.input.val()===""&&event.keyCode===8){this.triggerClearInput();this.hideResults()}},toggleResults:function(action){if(action==="show"){if(this.result_views.length>1&&this.$el.find(".js-bluepages-no-results").length===0){this.setViewBtns();this.result_bar.fadeIn()}this.result_wrap.fadeIn();if(this.$el.find(".js-bluepages-no-results").length===0){if(_.isFunction(this.view_methods.closeTray)){this.view_methods.handleLargeViewAvailable(function(is_flippable){if(is_flippable){this.footer.fadeIn()}else{this.footer.fadeOut()}}.bind(this))}else{this.footer.fadeIn()}}}else{this.wrap.removeClass(this.flex_class);this.hideResults();setTimeout(function(){this.logo.slideDown("500")}.bind(this),100)}},setViewBtns:function(){if(this.result_bar_controller.has("li")){this.result_bar_controller.empty()}_.forEach(this.result_views,function(element){this.result_bar_controller.append(_.template(this.view_btn_html)({type:element.toLowerCase(),text:_.capitalize(element),icon:element.toLowerCase()==="list"?"list":"grid-2x2"}))}.bind(this));if("i18next"in window)this.result_bar_controller.localize()},clearItems:function(){this.trigger("remove-views");this.result_wrap.empty()},clearInput:function(){this.input.val("");this.input.focus();if(this.wrap.hasClass(this.flex_class)){this.hideResults()}},hideResults:function(){this.result_bar.hide();this.result_wrap.hide();this.footer.hide();this.clearItems()},triggerClearInput:function(){setTimeout(function(){this.trigger("empty-input")}.bind(this),200);this.callMetrics({ev:"click",action:"button",name:"clear input",target:"none"})},searchFailed:function(){var msg="Failed";if("i18next"in window)msg=i18next.t("app.common.message.fail");this.loading("hide");this.clearItems();this.message({type:"error",content:msg})},loading:function(action){if(action==="show"){this.search_btn.removeClass("icon-awf-search").addClass("icon-awf-rotate-right icon-awf-spin")}else{this.search_btn.removeClass("icon-awf-rotate-right icon-awf-spin").addClass("icon-awf-search")}},message:function(msg){if(this.options.view_methods){this.options.view_methods.postMessage(msg.type,msg.content,true).andDismissIn(3)}},toggleLoading:function(){if(this.input.val()!==""){this.loading("show")}else{this.loading("hide")}},renderOnce:function(){var query=this.data.current_query;if(query){this.input.val(query);this.setMatches();this.setResults(this.data.get(query))}},setMatches:function(){var text=_.template(this.matches_text)({matches:this.data.get("results_matches_"+this.data.current_query),query:this.data.current_query});this.result_bar_text.html(text);if("i18next"in window)this.result_bar_text.localize()},setQuery:function(query){this.query=query;if(this.$el.closest(".awf-card-wrap").css("visibility")==="hidden"){this.input.val(query)}this.toggleClear()},setResults:function(collection){if(this.input.val()===this.data.current_query){this.loading("hide");if(collection){if(!collection.length){this.setNoResults()}else{this.createItems(collection)}}else{if(!this.data.get(this.query)){this.setNoResults()}else{this.createItems(this.data.get(this.query))}}if(!this.wrap.hasClass(this.flex_class)){this.slideupInput()}switch(this.active_view){case"grid":this.result_wrap.addClass(this.active_grid_class);this.wrap.addClass(this.bg_class);break;default:this.result_wrap.removeClass(this.active_grid_class);this.wrap.removeClass(this.bg_class)}setTimeout(function(){this.toggleResults("show")}.bind(this),500)}},createItems:function(collection){if(collection){this.clearItems();collection.each(function(model,i){if(i<this.limit){var item;switch(this.active_view){case"grid":item=new w3n.cogs.bluepages.views.grid_item({model:model,view_methods:this.options.view_methods,metrics:this.metrics||{},card:this});break;default:item=new w3n.cogs.bluepages.views.list_item({model:model,view_methods:this.options.view_methods,metrics:this.metrics||{},card:this})}item.hasPhoto();this.result_wrap.append(item.el)}}.bind(this))}},setNoResults:function(){this.loading("hide");this.hideResults();this.result_wrap.append(_.template(this.no_result_html)({query:this.data.current_query}));if("i18next"in window)this.result_wrap.localize();this.result_wrap.show()},switchViewTo:function(event){var class_handler=event.currentTarget.className;if(_.contains(class_handler,"list")){this.active_view="list";this.wrap.removeClass(this.bg_class)}else if(_.contains(class_handler,"grid")){this.active_view="grid";this.wrap.addClass(this.bg_class)}localStorage.setItem(bp.preference_key,this.active_view);var query=this.data.current_query;if(query){this.input.val(query);this.setResults(this.data.get(query))}this.callMetrics({ev:"click",action:"button",name:this.active_view+" view trigger button",target:"none"})},switchViewToByEnter:function(event){if(event.keyCode===13){event.preventDefault();this.switchViewTo(event);setTimeout(function(){this.result_bar_controller.find("."+this.active_view).focus()}.bind(this),500)}},clearActiveItems:function(){this.trigger("clear-active")},viewMore:function(event){if(_.isFunction(this.view_methods.closeTray)){this.view_methods.flipCard()}else{this.redirectUrl()}},callMetrics:function(params){if(this.metrics){this.metrics.tagEvent(_.extend({section:"BluePages:Search"},params))}else{console.log("There is no metrics function found.")}},remove:function(){this.trigger("remove-views");app.base.views.BaseView.prototype.remove.apply(this,arguments)}})})();(function(){var metrics=null,pinned_class="selected",community_url="https://w3-connections.ibm.com/communities/service/html/communitystart?communityUuid={{communityUuid}}",community_thumb="/proxy"+"/communities/service/html/image?communityUuid={{communityUuid}}&alastMod=1351281837741&showDefaultForNoPermissions=true";w3n.cogs.community.views.large_item=app.base.views.BaseView.extend({name:"community-large-view-item",template:_.template(w3n.templates.cogs.community["large-view-item.html"]),initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;if(!metrics){metrics=app.utils.createMetricTag({module:"community:large-item",group:awf.app.id})}},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.$el=$(this.$el.find("li")[0]);this.$el.attr("data-component","community-large-item");this.primitives={};this.primitives.$headline=this.$el.find('[data-primitive="short_title"]');this.primitives.$community_url=this.$el.find('[data-primitive="community_url"]');this.primitives.$community_thumb=this.$el.find('[data-primitive="community_thumb"]');this.primitives.$pub_date=this.$el.find('[data-primitive="pub_date"]');this.primitives.$short_title_url=this.$el.find('[data-primitive="short_title_url"]');this.primitives.$show_more=this.$el.find('[data-primitive="show_more"]');this.primitives.invite=this.$el.find('[data-primitive="invite"]');this.primitives.social_actions=this.$el.find('[data-primitive="social_actions"]');this.primitives.img=this.$el.find('[data-primitive="img"]');this.primitives.pin=this.$el.find('[data-primitive="pin"]');this.primitives.accept=this.$el.find('[data-primitive="accept"]');this.primitives.reject=this.$el.find('[data-primitive="reject"]');var data=this.params.data;if(data.title){setHeadline(data.title,this)}if(data.communityUuid){setUrl(data,this);setThumb(data,this)}if(data.updated){setDate(moment(data.updated).fromNow(),this)}if(data.invites){this.primitives.$pub_date.hide();this.primitives.social_actions.hide();this.primitives.invite.css({display:"block"})}if(data.pinned){operateClass(this)}bindEvents(this);awf.i18n.on("apply:language",function(){setDate(moment(data.updated).fromNow(),this)}.bind(this))},pinItemFail:function(err){operateClass(this)},pinItemAlways:function(){}});function setHeadline(new_value,self){self.primitives.$headline.html(new_value);self.primitives.img.find("img").attr("alt",new_value)}function setUrl(new_value,self){self.primitives.$community_url.attr("href",Mustache.render(community_url,new_value));self.primitives.$short_title_url.attr("href",Mustache.render(community_url,new_value))}function setThumb(new_value,self){self.primitives.$community_thumb.attr("src",Mustache.render(community_thumb,new_value))}function setDate(new_value,self){self.primitives.$pub_date.html(new_value)}function bindEvents(self){self.primitives.pin.on("click",pinItem.bind(self));self.primitives.accept.on("click",accept.bind(self));self.primitives.reject.on("click",reject.bind(self));self.primitives.$short_title_url.on("click",{section:"communities-feed"},metrics.linkEvent);self.primitives.social_actions.find("a").on("click",{section:"communities-feed",name:self.primitives.pin.hasClass(pinned_class)?"Unpin":"Pin"},function(event){metrics.tagEvent({ev:"click",action:event.data.name,name:event.data.name,section:event.data.section,target:"none"})});self.primitives.img.find("a").on("click",{section:"communities-feed"},metrics.linkEvent)}function pinItem(event){var self=this;var data=self.params.data;event.preventDefault();showLargeLoading(data);var clone_data=_.clone(data);if(operateClass(self,event)){clone_data.pinned=true;clone_data.updated=moment()._d.toString();data.parent_component.pinItem({component:self,params:clone_data})}else{clone_data.pinned=null;data.parent_component.unpinItem({component:self,params:clone_data})}}function showLargeLoading(data){data.parent_component.showLoading()}function operateClass(self,event){if(event){if(self.primitives.pin.hasClass(pinned_class)){self.primitives.pin.removeClass(pinned_class);self.primitives.pin.attr("title","Pin this community");self.primitives.pin.find("span.access").html("Pin this community");self.primitives.pin.attr("data-i18n","[title]app.common.social-actions.pin");self.primitives.pin.find("span.access").attr("data-i18n","app.common.social-actions.pin");return false}else{self.primitives.pin.addClass(pinned_class);self.primitives.pin.attr("title","Unpin this community");self.primitives.pin.find("span.access").html("Unpin this community");self.primitives.pin.attr("data-i18n","[title]app.common.social-actions.unpin");self.primitives.pin.find("span.access").attr("data-i18n","app.common.social-actions.unpin");return true}}else{self.primitives.pin.toggleClass(pinned_class);if(self.primitives.pin.hasClass(pinned_class)){self.primitives.pin.attr("title","Unpin this community");self.primitives.pin.find("span.access").html("Unpin this community");self.primitives.pin.attr("data-i18n","[title]app.common.social-actions.unpin");self.primitives.pin.find("span.access").attr("data-i18n","app.common.social-actions.unpin")}else{self.primitives.pin.attr("title","Pin this community");self.primitives.pin.find("span.access").html("Pin this community");self.primitives.pin.attr("data-i18n","[title]app.common.social-actions.pin");self.primitives.pin.find("span.access").attr("data-i18n","app.common.social-actions.pin")}}self.primitives.pin.localize()}function accept(){var self=this;var data=self.params.data;showLargeLoading(data);data.community=self;data.parent_component.trigger("accept-invite",data)}function reject(){var self=this;var data=self.params.data;showLargeLoading(data);data.community=self;data.parent_component.trigger("reject-invite",data)}})();(function(){var self=null,$login_btn=$('<button class="flip-1" data-i18n="app.common.sign-in"></button>'),$invites_bar=$('<ul class="invites-bar"></ul>'),api_alias={owned:"I'm an owner",my_communities:"I'm a member",followed:"I'm following",pinned:"My favorites"},publish_limit=25,login_hidden=false,fold_input_timeout=2e3,login_btn_append_to_dom=false,current_api="my_communities",current_api_data=null,current_sort="updated",current_sort_alias=api_alias[current_api],aria_label_pre="communities large item ",manual_login_text="Connect to Connections",shadow_class="bottom-shadow",select_api_from_dropdown=false,messages_set={pin_done:"Success",pin_fail:"Failed",accept_success:"Thanks for joining this community.",reject_success:"The invitation was successfully deleted ",merge_fail:"Opps, loading your favorite Communities failed since w3 construct service is not available, please refresh the page and try it later.",request_fail:"Oops, the service Communities is currently not available. Please refresh the page and try it later."},more_links={owned:"https://w3-connections.ibm.com/communities/service/html/ownedcommunities",my_communities:"https://w3-connections.ibm.com/communities/service/html/mycommunities",followed:"https://w3-connections.ibm.com/communities/service/html/followedcommunities",invites:"https://w3-connections.ibm.com/communities/service/html/communityinvites"},no_data_html={api:'<li class="no-data" data-i18n="app.common.message.no-data">No community in your list.</li>',filter:'<li class="no-data" data-i18n="app.common.message.no-data">There is no data for this filter.</li>'};w3n.cogs.community.views.large=app.base.views.BaseView.extend({name:"community-large-view",template:_.template(w3n.templates.cogs.community["large-view.html"]),initialize:function(params){this.params=params;self=this;this.large_methods=params.large_methods;this.metrics=this.params.metrics;if(params.parent_friends){params.parent_friends.flipcard.getContainer("back").css({maxWidth:"1140px",width:"60%"});params.parent_friends.flipcard.on("flip-down",commonEventOnEl)}this.showLoading();self.listenTo(self.collection,"api-changed",apiChanged);self.listenTo(self.collection,"show-login",self.showLogin.bind(this));self.on("accept-invite",acceptInvite.bind(self));self.on("reject-invite",rejectInvite.bind(self))},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);self.primitives={};self.primitives.source_by=self.$el.find('[data-primitive="source_by"]');self.primitives.filter_by=self.$el.find('[data-primitive="filter_by"]');self.primitives.sort_by=self.$el.find('[data-primitive="sort_by"]');self.primitives.feed_list=self.$el.find('[data-primitive="feed_list"]');self.primitives.source_by_wrap=self.$el.find('[data-primitive="source_by_wrap"]');self.primitives.view_all=self.$el.find('[data-primitive="view_all"]');self.primitives.menu_bar=self.$el.find('[data-primitive="menu_bar"]');self.$el.attr("data-component","community-large");addTabs();setDropdown();this.bindEvents();fillData()},bindEvents:function(){$login_btn.on("click",login);self.$el.on("click",commonEventOnEl);self.primitives.filter_by.on("keyup",_.debounce(setFilterResult,300));self.primitives.filter_by.on("focus click",showFilterResultDom);self.source_by_dropdown.$el.on("click",changeApi);self.primitives.feed_list.on("scroll",showShadow);self.primitives.feed_list.on("mouseleave",hideShadow);self.$el.find("#community_large_view_more").on("click",this.viewMoreCommunity.bind(this))},viewMoreCommunity:function(event){var target=more_links[current_api];var params={action:"Link",name:"View more headlines",section:"view-more",target:target};this.addMetricsTag(event,params);window.open(target)},setLoader:function(){this.$el.append(app.base.views.BaseView.prototype.loadingTemplate)},noData:function(api){self.hideLoading();current_api=api;current_api_data=[];setNoData();focusOnSourceBtn()},filterItems:function(key,data){var results=[];var search_data=data||current_api_data;_.forEach(search_data,function(item){if(item.title.toLowerCase().indexOf(key.toLowerCase())>=0){results.push(item)}});return results},appendItem:function(item){item.parent_component=self;var link_item=generateItem(item);self.items.push(link_item);return link_item},clearItems:function(){self.items=[];self.$el.find('[data-container="content"]').empty()},setItems:function(data){var limit_data=data.slice(0,Math.min(data.length,publish_limit));_.forEach(limit_data,function(item,i){item.aria_label=aria_label_pre+i;self.appendItem(item)});_.forEach(self.items,function(item){item.render();self.$el.find('[data-container="content"]').append(item.$el)})},multiCommunitiesDone:function(categories){if(!categories){categories=["my"]}resetView();var temp_data=setCurrentData(self.collection,categories);if(temp_data&&temp_data.length!==0){self.clearItems();self.setItems(temp_data)}else{setNoData()}toggleViewAll("show");focusOnSourceBtn()},multiCommunitiesFail:function(){self.showMessage({status:"error",context:app.messages.common.fail},true);focusOnSourceBtn()},mergeDatasDone:function(categories){resetView();var temp_data=setCurrentData(self.collection,categories);if(temp_data&&temp_data.length!==0){self.clearItems();self.setItems(temp_data)}else{setNoData()}toggleViewAll("show");focusOnSourceBtn()},mergeDatasFail:function(categories){self.showMessage({status:"error",context:!model.pinned_data_ready?app.messages.community["merge-fail"]:app.messages.community["request-fail"]});focusOnSourceBtn()},sortByDone:function(sorted_data){resetView();if(sorted_data.length!==0){sorted_data=checkFilterData(sorted_data);self.clearItems();self.setItems(sorted_data)}else{setNoData()}toggleViewAll("show")},pinItem:function(item){select_api_from_dropdown=true;var changedItem={api:current_api,item:item};var new_pinned_data=operatePinnedData(changedItem);saving(new_pinned_data,changedItem)},unpinItem:function(item){select_api_from_dropdown=true;var changedItem={api:current_api,item:item};var new_pinned_data=operateUnpinnedData(changedItem);saving(new_pinned_data,changedItem)},pinnedFailed:function(context){context.item.component.pinItemFail();self.showMessage({status:"error",context:app.messages.common.fail})},pinnedAlways:function(context){self.hideLoading();focusOnSourceBtn();context.item.component.pinItemAlways()},invitesDone:function(model,invites){setInvitesBar();var invites_data=invites||model.data.invites;_.forEach(invites_data,function(item){item.parent_component=self;item.invites=true;var link_item=generateItem(item);link_item.render();$invites_bar.append(link_item.$el)})},tryReload:function(){if(current_api==="my_communities"){self.multiCommunitiesDone([current_api])}if(self.collection.toJSON().invites.length===0){$invites_bar.fadeOut()}},showLoading:function(){var loading=this.$el.find(".loading-mark");if(_.isEmpty(loading)){generateLoadingMark()}else{loading.show()}},hideLoading:function(){this.$el.find(".loading-mark").hide()},hideMessage:function(){var self=this;if(self.message_bar){if(self.message_bar.is_showing){self.message_bar.hide()}}},showMessage:function(message){this.hideLoading();var context;if("i18next"in window&&!_.isEmpty(awf.i18n.languages)){var translated=i18next.t(message.context.i18n);context=translated==message.context.i18n?message.context.default:translated}else{context=message.context.default}this.large_methods.postMessage(message.status,context).andDismissIn(5)},showNoAnimationMessage:function(message){this.showMessage(message)},operateMessage:function(message){if(message.context){message.context=setMessageContext(message.context)}return this.message_bar.show(message.status,message.context)},hideLogin:function(){if(!login_hidden){$login_btn.fadeOut("300");login_hidden=true}},showLogin:function(status){if(!login_btn_append_to_dom){$login_btn.on("click",login);self.$el.prepend($login_btn);login_btn_append_to_dom=true}if(status=="show-manual-login"){$login_btn.html(manual_login_text)}self.hideLoading();$login_btn.show()},resetForm:function(){var self=this;self.primitives.source_by.attr("title","I'm a member");self.primitives.source_by.find("span").html("I'm a member");self.primitives.filter_by.val("")},addMetricsTag:function(event,params){event.data=event.data||{};params=params||{};event.data=_.extend(event.data,params);this.metrics.linkEvent.bind(event.currentTarget)(event)}});function generateItem(item){return new w3n.cogs.community.views.large_item({data:item})}function generateTab(params){var tabs=new app.components.tabs(params);tabs.render();return tabs}function generateDropdown(params){var dropdown=new app.components.dropdown(params);dropdown.render();return dropdown}function generateDropdownOptions(params){var options=new app.components.dropdownOptions(params);options.render();return options}function generateLoadingMark(params){self.setLoader()}function generateMessageBar(params){var message_bar=new app.components.message_bar(params);message_bar.render();return message_bar}function addTabs(){self.sort_by=generateTab({no_border:true,css:{border_top:" true"},tag_event_module:"community-large"});self.sort_by.addTab("Date",{order:1,i18n:"app.cogs.community.sort.byDate"},{type:"click",func:function(){current_sort="updated";sorting()}});self.sort_by.addTab("Name",{order:2,i18n:"app.cogs.community.sort.byName"},{type:"click",func:function(){current_sort="title";sorting()}});self.sort_by.activeTab("Date");self.primitives.sort_by.append(self.sort_by.$el)}function sorting(){self.showLoading();sortBy({api:current_api,by:current_sort,filter:self.primitives.filter_by.val()})}function sortBy(sort){var sorted=[];var modelData=self.collection.toJSON()[sort.api];if(self.total_data_ready&&modelData){sorted=sortingBy(modelData,sort.by)}else if(self.collection.get("pinned")&&sort.api==="pinned"){sorted=sortingBy(self.collection.get("pinned"),sort.by)}self.sortByDone(sorted)}function sortingBy(data,by){var pinned=[],unpin=[],total=[];_.forEach(_.cloneDeep(data),function(item){if(item.pinned){pinned.push(item)}else{unpin.push(item)}});pinned=_.sortBy(pinned,by);unpin=_.sortBy(unpin,by);if(by==="updated"){pinned.reverse();unpin.reverse()}total=pinned.concat(unpin);return total}function setDropdown(){$("#community_large_tab_source_by_dropdown_options-options").closest(".dropdown").remove();self.source_by_dropdown=generateDropdown({trigger:self.primitives.source_by.find("i"),evt:"click",evt_target:self.primitives.source_by,width:200,has_wrap:false,direction:"top",module:"community:large",name:"Select Source",section:"filter:trigger",background_color:"#ffffff"});var dropdown_options={};if(w3n.utils.hasI18nTag("app.cogs.community.views.member")){dropdown_options["app.cogs.community.views.member"]={i18n_label:i18next.t("app.cogs.community.views.member"),key:"my_communities"};api_alias.my_communities=i18next.t("app.cogs.community.views.member")}else{dropdown_options["app.cogs.community.views.member"]={i18n_label:"I'm a member",key:"my_communities"}}if(w3n.utils.hasI18nTag("app.cogs.community.views.owner")){dropdown_options["app.cogs.community.views.owner"]={i18n_label:i18next.t("app.cogs.community.views.owner"),key:"owned"};api_alias.owned=i18next.t("app.cogs.community.views.owner")}else{dropdown_options["app.cogs.community.views.owner"]={i18n_label:"I'm an owner",key:"owned"}}if(w3n.utils.hasI18nTag("app.cogs.community.views.following")){dropdown_options["app.cogs.community.views.following"]={i18n_label:i18next.t("app.cogs.community.views.following"),key:"followed"};api_alias.followed=i18next.t("app.cogs.community.views.following")}else{dropdown_options["app.cogs.community.views.following"]={i18n_label:"I'm following",key:"followed"}}if(w3n.utils.hasI18nTag("app.cogs.community.views.favorites")){dropdown_options["app.cogs.community.views.favorites"]={i18n_label:i18next.t("app.cogs.community.views.favorites"),key:"pinned"};api_alias.pinned=i18next.t("app.cogs.community.views.favorites")}else{dropdown_options["app.cogs.community.views.favorites"]={i18n_label:"My favorites",key:"pinned"}}self.source_by_dropdown_options=generateDropdownOptions({id:"community_large_tab_source_by_dropdown_options",i18n:"i18next"in window?dropdown_options:false,options:{"I'm a member":"I'm a member","I'm an owner":"I'm an owner","I'm following":"I'm following","My favorites":"My favorites"},module:"community:large",name:"Dropdown option"});self.source_by_dropdown.setContent(self.source_by_dropdown_options.$el)}function showShadow(){clearTimeout(self.shadow_time);self.primitives.source_by_wrap.addClass(shadow_class)}function hideShadow(){self.shadow_time=setTimeout(function(){self.primitives.source_by_wrap.removeClass(shadow_class)},fold_input_timeout)}function commonEventOnEl(event){if(self.source_by_dropdown&&self.source_by_dropdown.is_show){self.source_by_dropdown.hide()}}function login(event){if(event){event.preventDefault()}self.collection.modelLogin()}function setFilterResult(){var val=self.primitives.filter_by.val();if(val!==""&&current_api_data){var results=self.filterItems(val,current_api_data);if(results.length!==0){results=sortingBy(results,current_sort);resetView();self.clearItems();self.setItems(results)}else{setNoData()}}else{if(current_api_data&&current_api_data.length!==0){resetView();self.clearItems();self.setItems(current_api_data)}else{setNoData()}}}function showFilterResultDom(event){event.preventDefault();if(_.trim(event.target.value)!==""){self.primitives.filter_by.addClass("shadow")}}function findApiAliasKey(title){return title===current_sort_alias}function changeApi(event){if($(event.target).is("a")){select_api_from_dropdown=true;self.showLoading();current_sort_alias=event.target.title;var newApi=_.findKey(api_alias,findApiAliasKey);if(newApi==="pinned"){if(self.collection.get("pinned")){if(_.isEmpty(self.collection.get("pinned"))){self.noData(newApi)}else{
self.multiCommunitiesDone([newApi])}}else{self.noData(newApi);self.showNoAnimationMessage({status:"error",context:"merge_fail"})}}else{if(_.indexOf(_.keys(self.collection.toJSON()),newApi)!==-1){switchApi(newApi)}else{self.trigger("change-api",_.findKey(api_alias,findApiAliasKey))}}self.primitives.source_by.attr("title",current_sort_alias);self.primitives.source_by.find("span").html(current_sort_alias)}}function toggleViewAll(action){switch(action){case"show":self.primitives.view_all.show();break;default:self.primitives.view_all.hide();break}}function addMessageBar(){self.message_bar=generateMessageBar({messages:{success:messages_set.pin_done,error:messages_set.pin_fail}});self.$el.append(self.message_bar.$el)}function setMessageContext(context){return messages_set[_.snakeCase(context)]}function showHideMessage(message){self.operateMessage(message).delay(3e3).fadeOut("400",function(){if(self.message_bar){self.message_bar.is_showing=false}})}function resetView(){self.primitives.menu_bar.show();self.primitives.source_by_wrap.show();self.hideLogin();self.hideMessage();self.hideLoading()}function checkFilterData(filter_data){var val=self.primitives.filter_by.val();if(val!==""){return self.filterItems(val,filter_data)}return filter_data}function setCurrentData(model,categories){if(model){var val=self.primitives.filter_by.val();current_api=categories?categories[0]:model.getCurrentCategories()[0];if(current_api==="pinned"){current_api_data=sortingBy(self.collection.get("pinned"),current_sort)}else{current_api_data=sortingBy(model.toJSON()[current_api],current_sort)}if(val){return checkFilterData(current_api_data)}else{return current_api_data}}else{console.log("community large - setCurrentData - model is undefined.")}}function setNoData(){var node=self.$el.find('[data-container="content"]');if(current_api){node.html(no_data_html.api)}else{node.html(no_data_html.filter)}node.localize()}function setInvitesBar(){if(!self.$el.has("ul.invites-bar").length){self.primitives.menu_bar.after($invites_bar)}$invites_bar.empty()}function focusOnSourceBtn(){if(select_api_from_dropdown){select_api_from_dropdown=false;self.primitives.source_by.focus()}}function fillData(categories){current_categories=[];_.forEach(self.collection.subCollectionsMap,function(subCollection,category){var objectData=self.collection.toJSON()[category];if(category!=="invites"){current_categories.push(category)}else{if(objectData&&objectData.length>0){self.invitesDone(null,objectData)}}});self.total_data_ready=self.collection.total_data_ready;if(self.collection.get("pinned")){mergeDatas(categories?categories:["my_communities","invites"])}else{self.multiCommunitiesDone(categories?categories:current_categories)}}function mergeDatas(categories){if(self.total_data_ready&&self.collection.get("pinned")){var isPinEmpty=_.isEmpty(self.collection.get("pinned"));_.forEach(self.collection.toJSON(),function(value,category){if(category!=="pinned"){if(!isPinEmpty){_.forEach(self.collection.get("pinned"),function(pinned){_.forEach(value,function(item){if(item.title==pinned.title){item.pinned=true}})})}}});self.mergeDatasDone(categories||current_categories)}else{if(!self.pinned_data_ready){console.log("community model - mergeDatas - self.pinned_data_ready",self.pinned_data_ready)}}}function apiChanged(category){fillData(category)}function switchApi(newApi){if(self.collection.get("pinned")){mergeDatas([newApi])}else{self.multiCommunitiesDone([newApi])}}function operatePinnedData(data){if(self.collection.get("pinned")){var cloned_data=_.values(_.cloneDeep(self.collection.get("pinned")));var is_exist=_.find(cloned_data,function(pinned){return pinned.title==data.item.params.title});if(is_exist){console.log("community model - operatePinnedData - the pin data is existed.");return false}else{cloned_data.push(data.item.params);var new_pinned_data=_.sortBy(_.uniq(cloned_data,"title"),"title");return new_pinned_data}}else{self.hideLoading();console.log("community model - operatePinnedData - cog.pinned_data_ready",cog.pinned_data_ready);return false}}function operateUnpinnedData(data){if(self.collection.get("pinned")){var cloned_data=_.values(_.cloneDeep(self.collection.get("pinned")));var is_exist=_.find(cloned_data,function(pinned){return pinned.title==data.item.params.title});if(is_exist){var filtered=[];_.forEach(cloned_data,function(item){if(item.title!==data.item.params.title){filtered.push(item)}});_.forEach(self.collection.toJSON(),function(values){_.forEach(values,function(item){if(item.title==data.item.params.title){if(item.pinned){item.pinned=null}}})});var new_pinned_data=filtered;return new_pinned_data}else{console.log("community model - operateUnpinnedData - the pin data is not existed.");return false}}else{self.hideLoading();console.log("community model - operateUnpinnedData - cog.pinned_data_ready",cog.pinned_data_ready);return false}}function saving(data,item){var clear_data=clearParams(data);self.collection.updatePinnedData(clear_data).done(function(){self.collection.set("pinned",clear_data);mergeDatas([item.api]);self.collection.trigger("saving-pinned-done");self.showMessage({status:"success",context:app.messages.common.success})}).fail(function(){self.pinnedFailed(item)}).always(function(){self.pinnedAlways(item)})}function clearParams(data){var cloned_data=_.clone(data,true);_.forEach(cloned_data,function(item){if(item.parent_component){item.parent_component=null}if(item.aria_label){item.aria_label=null}if(item.community){item.community=null}});return cloned_data}function acceptInvite(data){var ajax_params={method:"POST",data_type:"json",community_id:data.communityUuid,community:data.community,data:'<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom"><contributor><snx:userid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">'+w3n.connections.user_id+"</snx:userid></contributor></entry>",contentType:"application/xml"};w3n.cogs.community.services.inviteService("accept",data,this.collection,this,ajax_params)}function rejectInvite(data){var ajax_params={method:"DELETE",user_id:w3n.connections.user_id,data_type:"json",community_id:data.communityUuid,community:data.community};w3n.cogs.community.services.inviteService("reject",data,this.collection,this,ajax_params)}})();(function(){var metrics=null,ele_width=null,aria_label_pre="Communities medium item ",community_pre_url="https://w3-connections.ibm.com/communities/service/html/communitystart?communityUuid=",community_pre_img="/proxy"+"/communities/service/html/image?communityUuid=";w3n.cogs.community.views.medium_item=app.base.views.BaseView.extend({name:"community-medium-view-item",template:_.template(w3n.templates.cogs.community["medium-view-item.html"]),initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;if(!metrics){metrics=app.utils.createMetricTag({module:"community:medium-item",group:awf.app.id})}},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.primitives={};this.primitives.pub_date=this.$el.find('[data-primitive="pub_date"]');this.primitives.title=this.$el.find('[data-primitive="title"]');this.primitives.img=this.$el.find('[data-primitive="img"]');var data=this.model;setData(data,this);this.primitives.pub_date.show();this.$el.find("a").on("click",function(){var params={};params={ev:"click",action:"Community link",name:"Go to Community:"+data.title,section:"Community item",module:"communities:medium",target:community_pre_url+data.communityUuid};metrics.tagEvent(params)}.bind(this));awf.i18n.on("apply:language",function(){setPubDate(data,this)}.bind(this));return this}});function setPubDate(data,self){if(data.type=="rec"){self.primitives.pub_date.html("Last visited "+moment(data.update_ori).fromNow())}else{self.primitives.pub_date.html(moment(data.updated).fromNow())}}function setCommunitiesId(data,self){self.primitives.img.find("a").attr("href",community_pre_url+data.communityUuid);self.primitives.img.find("img").attr("src",community_pre_img+data.communityUuid+"&showDefaultForNoPermissions=true");self.primitives.title.attr("href",community_pre_url+data.communityUuid)}function setData(data,self){if(data.updated)setPubDate(data,self);if(data.communityUuid)setCommunitiesId(data,self);if(data.title){setTitle(data,self);self.$el.find("article").attr("aria-label",aria_label_pre+data.title)}}function setTitle(data,self){self.primitives.title.html(data.title);self.primitives.img.find("img").attr("alt",data.title)}})();(function(){var metrics=null;var shadow_class="bottom-shadow",base_duration="200",aria_label_pre="communities medium item ",fold_input_timeout=2e3,id_map={},all_pinned_data=[];w3n.cogs.community.views.medium=app.base.views.BaseView.extend({name:"community-medium-view",template:_.template(w3n.templates.cogs.community["medium-view.html"]),initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;this.medium_methods=params.medium_methods;metrics=this.params.metrics;this.setLoader();this.listenTo(this.collection,"saving-pinned-done",this.pinnedCommunitiesDone.bind(this))},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.primitives={};this.primitives.view_more=this.$el.find('[data-primitive="view_more"]').find("button");this.primitives.feed_list=this.$el.find('[data-primitive="feed_list"]');this.primitives.login=this.$el.find('[data-primitive="login"]');this.primitives.pinned_list=this.$el.find('[data-primitive="pinned_list"]');bindEvents(this);this.pinnedCommunitiesDone();this.$el.localize();return this},setLoader:function(){this.$el.append(app.base.views.BaseView.prototype.loadingTemplate)},hideLoading:function(){this.$el.find(".loading-mark").hide()},pinnedCommunitiesDone:function(){var self=this;resetView(self);self.clearItems();var concat_data=sortData(self.collection.toJSON().pinned);if(concat_data.length>0){self.setItems(concat_data);showList(self);self.primitives.view_more.attr("data-i18n","app.cogs.community.cta.view-more");self.primitives.view_more.html("View more communities")}else{showViewMore(self);self.primitives.view_more.attr("data-i18n","app.cogs.community.cta.start-pin");self.primitives.view_more.html("Start pinning favorites")}self.primitives.view_more.localize()},appendItemToDom:function(item){this.primitives.pinned_list.append(item)},setItems:function(data){var self=this;_.forEach(data,function(article,i){var art=_.clone(article,true);art.aria_label=aria_label_pre+i;self.appendItem(art)});_.forEach(self.items,function(item){item.render();self.appendItemToDom(item.el)})},appendItem:function(article){var self=this;article.parent_component=self;var article_item=generateArticleItem(article);id_map[article.communityUuid]=article.communityUuid;self.items.push(article_item);return article_item},clearItems:function(){this.items=[];this.primitives.pinned_list.empty()},hideLogin:function(){this.primitives.login.hide()},showLogin:function(status){if(status=="show-manual-login"){this.primitives.login.html("Connect to Connections")}this.hideMessage();this.primitives.login.show()}});function generateItemMore(params){return{}}function generateArticleItem(article){return new w3n.cogs.community.views.medium_item({model:article})}function bindEvents(self){self.primitives.login.on("click",basicLogin.bind(self));self.primitives.view_more.on("click",flipcardUp.bind(self));self.primitives.feed_list.on("scroll",showShadow.bind(self));self.primitives.feed_list.on("mouseleave",hideShadow.bind(self));self.$el.find('article[data-component="view-more-flip"] button').on("click",flipcardUp.bind(self))}function basicLogin(event){event.preventDefault();metrics.tagEvent(event);this.broadcast("login")}function flipcardUp(event){var params={};params={ev:"click",action:"flip-up",name:"View more communities",section:"view-more",module:"communities:medium",target:"none"};metrics.tagEvent(params);this.params.medium_methods.flipCard()}function showShadow(){clearTimeout(this.shadow_time);this.$el.parent().prev().addClass(shadow_class)}function hideShadow(){var self=this;self.shadow_time=setTimeout(function(){self.$el.parent().prev().removeClass(shadow_class)},fold_input_timeout)}function sortData(datas){all_pinned_data=_.sortBy(_.cloneDeep(datas),"title");return all_pinned_data}function resetView(self){self.hideLogin();self.hideLoading()}function showViewMore(self){if(self.primitives.feed_list.css("display")!=="none"){self.primitives.feed_list.fadeOut(base_duration,function(){self.$el.find('article[data-component="view-more-flip"]').fadeIn(base_duration)})}else{self.$el.find('article[data-component="view-more-flip"]').fadeIn(base_duration)}}function showList(self){if(self.$el.find('article[data-component="view-more-flip"]').css("display")!=="none"){self.$el.find('article[data-component="view-more-flip"]').fadeOut(base_duration,function(){self.primitives.feed_list.fadeIn(base_duration)})}else{self.primitives.feed_list.fadeIn(base_duration)}self.primitives.feed_list.fadeIn(base_duration)}})();(function(){w3n.cogs.learning.views.add_learning=app.base.views.BaseView.extend({initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;w3n.cogs.learning.i18n.organizeI18n(this);_.merge(this,_.omit(params,["collection","model","el"]));if(this.params.parent){this.listenTo(this.params.parent,"summary-hidden",this.showAddLearning);this.listenTo(this.params.parent,"back-to-scorecard",this.clearAutoBackToScorecard);this.listenTo(this.params.parent,"destroy",this.remove)}this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"learning:large:add-personal-learning"})},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.completion_date_menu=false;this.setForm();return this},setForm:function(){var self=this;this.form=new app.form.base({schema:{title:{type:"text",title:"Item or event name",i18n_label:w3n.utils.hasI18nTag(this.i18n_ns.i18n_form_item_or_event_name)?this.i18n_ns.i18n_form_item_or_event_name:false,validators:["required"]},date:{type:"datepicker",title:"Completion date",i18n_label:w3n.utils.hasI18nTag(this.i18n_ns.i18n_form_completion_date)?this.i18n_ns.i18n_form_completion_date:false,validators:["required","datepicker","presentday"],col:2},duration:{type:"durationpicker",title:"Duration",i18n_label:w3n.utils.hasI18nTag(this.i18n_ns.i18n_form_duration)?this.i18n_ns.i18n_form_duration:false,validators:["required","duration"],col:2},activity:{type:"select",title:"Activity Type",i18n_label:w3n.utils.hasI18nTag(this.i18n_ns.i18n_form_activity_type)?this.i18n_ns.i18n_form_activity_type:false,editorTrigger:function(editor,event){self.requestOptions().done(function(data){editor.trigger("set-options",data.learning_delivery_type)});self.requestOptions().promise()},editorCallback:function(editor,event){}},business:{type:"select",title:"Business Initiative",i18n_label:w3n.utils.hasI18nTag(this.i18n_ns.i18n_form_business_initiative)?this.i18n_ns.i18n_form_business_initiative:false,editorTrigger:function(editor,event){self.requestOptions().done(function(data){editor.trigger("set-options",data.business_initiative)});self.requestOptions().promise()},editorCallback:function(editor,event){}},comment:{type:"textarea",title:"Comments",i18n_label:w3n.utils.hasI18nTag(this.i18n_ns.i18n_form_comments)?this.i18n_ns.i18n_form_comments:false,validators:["characterCount"]}},submitButton:"Save",cancelButton:"Cancel"});this.form.on("submit",function(event,form){self.addPersonalLearning(event,form)});this.form.on("cancel",function(event,form){self.showYourLearning(event)});this.form.render();this.$el.append(this.form.el)},requestOptions:function(){var deferred=$.Deferred();var self=this;this.params.parent.params.BIDT.fetch({all:true}).done(function(){var objectData=self.params.parent.params.BIDT.toJSON();deferred.resolve(objectData)}).fail(function(){var failData=self.params.parent.collection.proxy.data;deferred.resolve(failData)});return deferred},addPersonalLearning:function(event,form){event.preventDefault();var self=this;this.params.parent.showHideLoading("show");console.log("form.model",form.model.toJSON());var params={data:{learnerTranscriptStatus:"Completed",learnerIntranetID:awf.user.info.email||"",learningActivityTitle:form.model.toJSON().title,learningDeliveryType:form.model.toJSON().activity,duration:parseFloat(form.model.toJSON().duration)*60,learnerCompletionDate:moment(form.model.toJSON().date).format("YYYY-MM-DD hh:mm:ss"),comments:form.model.toJSON().comment,businessInitiative:form.model.toJSON().business}};this.params.parent.params.add_learning.fetch(params).done(this.addSuccess.bind(this)).fail(this.addFail.bind(this)).always(function(){self.params.parent.showHideLoading("hide")});this.callMetrics({ev:"submit",action:"button",name:"Submit",target:"none"})},showAddLearning:function(){this.$el.show()},showYourLearning:function(event){event.preventDefault();var self=this;setTimeout(function(){self.form.clearForm()},1e3);this.$el.hide();this.params.parent.trigger("add-learning-hidden");this.callMetrics({ev:"hide",action:"button",name:"Cancel",target:"none"})},addSuccess:function(){var form=this.$el;var success_overlay=this.params.parent.$el.find(".add-success");form.hide();success_overlay.fadeIn();this.form.clearForm();this.add_success_timeout=setTimeout(function(){success_overlay.fadeOut();setTimeout(function(){form.show()},500)},5e3)},clearAutoBackToScorecard:function(){if(this.add_success_timeout){clearTimeout(this.add_success_timeout)}},addFail:function(){var message=w3n.utils.hasI18nTag(this.i18n_ns.i18n_t40_service_error)?i18next.t(this.i18n_ns.i18n_t40_service_error):this.params.parent.message.serviceError;this.form.clearForm();this.params.parent.showHideMessageBar("show",{status:"error",context:message})},callMetrics:function(params){console.log("tagEvent: ",{module:"learning:large:add-personal-learning",group:awf.app.id});this.metrics.tagEvent(params)},remove:function(){app.base.views.BaseView.prototype.remove.apply(this,arguments);if(this.form){this.form.remove()}return this}})})();(function(){w3n.cogs.learning.views.large_course_item=w3n.cogs.learning.views.base_item.extend({template:_.template(w3n.templates.cogs.learning["large-course-item-view.html"]),title_limit:200,abstract_limit:500,events:{"click button.flip-2":"openUrl","click button":"callMetrics","mousedown button":"callMetricsWithData"},initialize:function(params){w3n.cogs.learning.views.base_item.prototype.initialize.apply(this,arguments);this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"learning:large"})},render:function(){var data=this.model.toJSON();w3n.cogs.learning.views.base_item.prototype.render.apply(this,arguments);if(data.duration){this.$duration.attr("data-i18n",Number(data.duration)>1?this.i18n_ns.i18n_t40_hours_param:this.i18n_ns.i18n_t40_hour_param);this.$duration.data("i18n-options",{duration:"+"+Number(data.duration).toFixed(1)})}if(data.type&&w3n.utils.hasI18nTag(this.i18n_ns["i18n_t40_"+_.snakeCase(data.type)])){this.$type.attr("data-i18n",this.i18n_ns["i18n_t40_"+_.snakeCase(data.type)])}if("i18next"in window)this.$el.localize();return this},setCommonEles:function(){this.$badging=this.$el.find(".badging");this.$due_date=this.$el.find(".due-date");this.$img=this.$el.find(".headline > img");this.$duration=this.$el.find(".js-duration");this.$type=this.$el.find(".js-course-type")},setClasses:function(data){w3n.cogs.learning.views.base_item.prototype.setClasses.apply(this,arguments);if(!data.icon_url){this.$img.eq(0).hide();this.$el.find(".headline > .default-icon").css("display","block")}if(data.title){this.$el.attr("aria-label",data.title+" learning course item");if("i18next"in window){this.$el.attr("data-i18n","[aria-label]"+this.i18n_ns.i18n_aria_label_course_item);this.$el.data("i18n-options",{title:data.title})}}},setCourse:function(data){var temp_data=w3n.cogs.learning.views.base_item.prototype.setCourse.apply(this,arguments);temp_data.source=data.source||"";if(data.duration){temp_data.duration_completed=data.duration_completed||"";temp_data.duration="+"+Number(data.duration).toFixed(1)+(Number(data.duration)>1?" hours":" hour")}else{temp_data.duration_completed="";temp_data.duration=""}temp_data.url=data.url||"//yourlearning.w3bmix.ibm.com/#learning/completed";if(data.start_date)temp_data.date=moment(data.start_date).format("MMMM D, YYYY");return temp_data},openUrl:function(){window.open(this.data.url)},callMetrics:function(event){event.data=event.data||{};event.data=_.extend(event.data,{section:"list"});this.metrics.linkEvent.bind(event.currentTarget)(event)}})})();(function(){w3n.cogs.learning.views.large_hero_item=w3n.cogs.learning.views.base_item.extend({template:_.template(w3n.templates.cogs.learning["large-hero-item-view.html"]),attributes:{"data-component":"learning-item",role:"article"},title_limit:200,abstract_limit:500,events:{"click button.flip-2":"openUrl","click button":"callMetrics","mousedown button":"callMetricsWithData"},initialize:function(params){w3n.cogs.learning.views.base_item.prototype.initialize.apply(this,arguments);this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"learning:large"})},setClasses:function(data){w3n.cogs.learning.views.base_item.prototype.setClasses.apply(this,arguments);if(data.title){this.$el.attr("aria-label",data.title+" learning hero item");if("i18next"in window){this.$el.attr("data-i18n","[aria-label]"+this.i18n_ns.i18n_aria_label_hero_item);this.$el.data("i18n-options",{title:data.title})}}},setCourse:function(data){var temp_data=w3n.cogs.learning.views.base_item.prototype.setCourse.apply(this,arguments);temp_data.source=data.source||"";temp_data.text="Learn more";temp_data.url=data.url||"//yourlearning.w3bmix.ibm.com/#learning/completed";if(data.start_date)temp_data.date=moment(data.start_date).format("MMMM D, YYYY");return temp_data},openUrl:function(){window.open(this.data.url)}})})();(function(){w3n.cogs.learning.views.large=w3n.cogs.learning.views.base.extend({name:"learning-large-view",card_type:"large",template:_.template(w3n.templates.cogs.learning["large-view.html"]),events:{"click .back-to-btn button":"backToScorecard"},initialize:function(params){w3n.cogs.learning.views.base.prototype.initialize.apply(this,arguments);if(this.params.summary){this.listenTo(this.params.activities,"fetch-activities",this.setActivitiesItems);this.listenTo(this.params.activities,"activites-service-down",this.setActivitiesFail);this.listenTo(this.params.summary,"large-view",this.changeTab)}},changeTab:function(){if(this.params.cog.tab_nav===this.tabs_text.think40){this.showLearning()}},setSummary:function(){this.think_view=new w3n.cogs.learning.views[this.card_type+"_think"]({parent:this,model:this.params.summary,el:this.$el.find(".your-learning")[0]});setTimeout(function(){this.think_view.render();this.setForm();this.trigger("view-render-done")}.bind(this),500)},setForm:function(){this.add_learning_view=new w3n.cogs.learning.views.add_learning({parent:this,collection:this.collection,el:this.$el.find(".add-learning")[0]});this.add_learning_view.render()},setTab:function(){var params={no_border:true,css:{border_top:" true"},tag_event_module:"learning:large"};this.tab=new app.components.tabs(params);this.$el.find(".toogle-bar").prepend(this.tab.render().$el)},setCheckingThinkTab:function(){this.tab.addTab(this.tabs_text.think40,{order:2,i18n:this.i18n_ns.i18n_t40_label},{type:"click",func:function(event){this.showLearning(event);this.params.cog.tab_nav=this.tabs_text.think40;this.params.summary.trigger("medium-view")}.bind(this)})},showLearning:function(event){if(!event){this.tab.activeTab(this.tabs_text.think40)}this.$el.find(".your-learning-list > .title").css("display","none");if(_.isEmpty(this.params.summary.attributes)){this.showHideLoading("show");this.params.summary.checkAuth()}else{if(_.trim(this.$el.find(".your-learning").html())===""){this.setSummary()}if(this.params.activities.initialCollection.length===0){this.showHideLoading("show");this.trigger("fetch-activities")}else{this.setActivitiesItems()}}this.$el.find(".add-learning").hide();this.$el.find(".add-success").hide();this.recommended("hide");this.yourLearning("show")},createItemView:function(item_model){var hero_view=new w3n.cogs.learning.views.large_hero_item({model:item_model,parent:this});this.carousel.appendItem(hero_view.render().el);var item_view=new w3n.cogs.learning.views.large_course_item({model:item_model,parent:this});this.$el.find(".recommended-list .course-list").append(item_view.render().el)},setItems:function(){if(this.collection.length!==0){this.setTab();this.tab.addTab(this.tabs_text.featured,{order:1,i18n:this.i18n_ns.i18n_featured_label},{type:"click",func:function(){this.params.cog.tab_nav=this.tabs_text.featured;this.recommended("show");this.yourLearning("hide");this.$el.find(".add-learning").hide();this.$el.find(".add-success").hide()}.bind(this)});this.createCarousel(".recommended",{tag_event_module:"learning:large",aria_label:"Learning large card carousel",limits:5});this.collection.each(function(model){this.createItemView(model)}.bind(this));this.tab.activeTab(this.tabs_text.featured)}},setActivitiesItems:function(){this.yourLearning("show");this.$el.find(".your-learning-list .course-list").empty();this.params.activities.initialCollection.each(function(item_model){var item_view=new w3n.cogs.learning.views.large_course_item({model:item_model});this.$el.find(".your-learning-list .course-list").append(item_view.render().el)}.bind(this));this.$el.find(".your-learning-list > .title").css("display","block");this.showHideLoading("hide")},setActivitiesFail:function(){var message=w3n.utils.hasI18nTag(this.i18n_ns.i18n_t40_activities_error)?i18next.t(this.i18n_ns.i18n_t40_activities_error):this.message.activitiesError;this.showHideMessageBar("show",{status:"error",context:message});this.yourLearning("hide");this.$el.find(".your-learning-list").hide();this.showHideLoading("hide");this.$el.find(".add-learning").hide();this.$el.find(".add-success").hide()},backToScorecard:function(){this.recommended("hide");this.yourLearning("show");this.add_learning_view.$el.hide();this.$el.find(".add-success").hide();this.trigger("back-to-scorecard");this.metrics.tagEvent({ev:"click",action:"button",name:"Back To Scorecard",section:"learning large card",target:"none"})}})})();(function(){w3n.cogs.learning.views.medium_item=w3n.cogs.learning.views.base_item.extend({template:_.template(w3n.templates.cogs.learning["medium-item-view.html"]),attributes:{"data-component":"learning-item",role:"article"},initialize:function(params){w3n.cogs.learning.views.base_item.prototype.initialize.apply(this,arguments);this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"learning:medium"})},setClasses:function(data){w3n.cogs.learning.views.base_item.prototype.setClasses.apply(this,[data]);if(data.title){this.$el.attr("aria-label",data.title+" learning item");this.$el.find(".learning-overview").attr("aria-label",data.title+" learning item feature label");if("i18next"in window){this.$el.attr("data-i18n","[aria-label]"+this.i18n_ns.i18n_aria_label_feature_item);this.$el.data("i18n-options",{title:data.title});this.$el.find(".learning-overview").attr("data-i18n","[aria-label]"+this.i18n_ns.i18n_aria_label_feature_item_label);this.$el.find(".learning-overview").data("i18n-options",{title:data.title})}}}})})();(function(){w3n.cogs.learning.views.medium=w3n.cogs.learning.views.base.extend({name:"learning-medium-view",card_type:"medium",template:_.template(w3n.templates.cogs.learning["medium-view.html"]),events:{"click .cta-btn .flip-1":"triggerThinkView","click .your-learning-website button":"goToYourLearningWebsite"},initialize:function(params){w3n.cogs.learning.views.base.prototype.initialize.apply(this,arguments);this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"learning:medium"});if(this.params.summary){this.listenTo(this.params.summary,"medium-view",this.changeTab)}},changeTab:function(){if(this.params.cog.tab_nav===this.tabs_text.think40){this.showLearning()}},setSummary:function(){this.think_view=new w3n.cogs.learning.views[this.card_type+"_think"]({parent:this,model:this.params.summary,el:this.$el.find(".your-learning")[0],parent_friends:this.params.parent_friends});setTimeout(function(){this.think_view.render();this.trigger("view-render-done");this.showHideLoading("hide")}.bind(this),500)},setTab:function(){var params={no_border:true,css:{border_top:" true"},tag_event_module:"learning:medium"};this.tab=new app.components.tabs(params);this.$el.find(".toogle-bar").prepend(this.tab.render().$el)},createItemView:function(item_model){var item_view=new w3n.cogs.learning.views.medium_item({model:item_model,parent:this});this.carousel.appendItem(item_view.render().el)},setItems:function(){if(this.collection.length!==0){this.setTab();this.tab.addTab(this.tabs_text.courses,{order:1,id:"learning-tab-1",aria_controls:"learning-tab-1",i18n:this.i18n_ns.i18n_courses_label},{type:"click",func:function(){this.params.cog.tab_nav=this.tabs_text.courses;this.recommended("show");this.yourLearning("hide");this.yoursWebsite("hide")}.bind(this)});this.tab.addTab(this.tabs_text.yourLearningSite,{order:3,id:"learning-tab-3",aria_controls:"learning-tab-3",i18n:this.i18n_ns.i18n_yours_website_label},{type:"click",func:function(){this.params.cog.tab_nav=this.tabs_text.yourLearningSite;this.recommended("hide");this.yourLearning("hide");this.yoursWebsite("show")}.bind(this)});this.createCarousel(".recommended",{tag_event_module:"learning:medium",aria_label:"Learning medium card carousel",limits:5});this.collection.each(function(model){this.createItemView(model)}.bind(this));this.toggleViewMore();this.tab.activeTab(this.tabs_text.courses)}},setCheckingThinkTab:function(){this.tab.addTab(this.tabs_text.think40,{order:2,id:"learning-tab-2",aria_controls:"learning-tab-2",i18n:this.i18n_ns.i18n_t40_label},{type:"click",func:function(event){this.showLearning(event);this.params.cog.tab_nav=this.tabs_text.think40}.bind(this)});this.tab.setTabsOrder()},showLearning:function(event){if(!event){this.tab.activeTab(this.tabs_text.think40)}if(_.isEmpty(this.params.summary.attributes)){this.params.summary.checkAuth();this.showHideLoading("show")}else{if(_.trim(this.$el.find(".your-learning").html())===""){this.setSummary()}}this.yourLearning("show");this.recommended("hide");this.yoursWebsite("hide")},addViewMore:function(){this.carousel.setViewMore({icon:"icon-youribm-graduation-cap",label:w3n.utils.hasI18nTag(this.i18n_ns.i18n_courses_view_more)?i18next.t(this.i18n_ns.i18n_courses_view_more):"View more learning",i18n_label:this.i18n_ns.i18n_courses_view_more,callback:function(){this.triggerLargeView()}.bind(this)})},toggleViewMore:function(){this.params.parent_friends.handleLargeViewAvailable(function(is_flippable){var viewMoreNum=this.carousel.$el.find('article[aria-label="view more slide"]').length;if(is_flippable){if(!viewMoreNum){this.addViewMore()}}else{if(viewMoreNum){this.carousel.removeLastItem()}}}.bind(this))},triggerLargeView:function(){this.params.parent_friends.flipCard()},triggerThinkView:function(){this.params.cog.tab_nav=this.tabs_text.think40;this.params.summary.trigger("large-view");this.triggerLargeView()},goToYourLearningWebsite:function(){window.open("https://yourlearning.w3bmix.ibm.com/#home/","_blank");this.metrics.tagEvent({ev:"click",action:"button",name:"Go to your learning website",section:"learning medium view",target:"https://yourlearning.w3bmix.ibm.com/#home/"})}})})();(function(){w3n.cogs.learning.views.medium_think=w3n.cogs.learning.views.think_base.extend({card_type:"medium",template:_.template(w3n.templates.cogs.learning["think-view.html"]),render:function(){w3n.cogs.learning.views.think_base.prototype.render.apply(this,arguments);this.$el.find(".think40__add").hide();return this},appendBtn:function(){this.$el.append(this.btn_template(this.model.toJSON()));this.params.parent_friends.handleLargeViewAvailable(function(is_flippable){
if(is_flippable){this.$el.find(".cta-btn").fadeIn("fast")}else{this.$el.find(".cta-btn").fadeOut("fast")}}.bind(this))}});w3n.cogs.learning.views.large_think=w3n.cogs.learning.views.think_base.extend({card_type:"large",template:_.template(w3n.templates.cogs.learning["think-view.html"]),events:{"click .think40__add button":"hideSummary"},initialize:function(params){w3n.cogs.learning.views.think_base.prototype.initialize.apply(this,arguments);if(this.params.parent){this.listenTo(this.params.parent,"add-learning-hidden",this.showThinkView)}this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"learning:your-think40:porgress"})},hideSummary:function(event){this.$el.hide();this.params.parent.trigger("summary-hidden");event.data=event.data||{};event.data=_.extend(event.data,{section:"add personal learning"});this.metrics.linkEvent.bind(event.currentTarget)(event)},showThinkView:function(){this.$el.show()},redirectTo:function(){window.open("https://yourlearning.w3bmix.ibm.com/#home/queue/add_learning");this.metrics.tagEvent({ev:"click",action:"button",name:"add personal lerning",section:"learning large view",target:"https://yourlearning.w3bmix.ibm.com/#home/queue/add_learning"})}})})();(function(){var DEFAULTS={componentName:"minipulseCardLarge"};w3n.cogs.minipulse.views.large=app.base.views.BaseView.extend({name:DEFAULTS.componentName,template:w3n.templates.cogs.minipulse["card.html"],sso_login_template:w3n.templates.cogs.minipulse["sso-signin.html"],initialize:function(params){this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"minipulse:largeCard"});if(awf.user.is_authenticated){this.params=params;this.large_methods=params.large_methods;this.options=params.options;this.$el=$(this.template);w3n.cogs.minipulse.views.MinipulseCardView.init.call(this);this.render()}else{params.options.$container.parent().css({"max-width":"352px","max-height":"600px"});params.options.$container.html($(this.sso_login_template));if("i18next"in window){params.options.$container.html($(this.sso_login_template)).localize()}params.options.$container.find(".js-minipulse-sso-signin-card-wrap .js-sso-sigin-popup-submit").on("click",this.sso_login.bind(this))}},render:function(){var self=this;self.cardSize="large";w3n.cogs.minipulse.views.MinipulseCardView.render.call(self);return this},renderCarousel:function(){var self=this;w3n.cogs.minipulse.views.MinipulseCardView.renderCarousel.call(self);if(self.carousel){self.carousel.on("carousel:goToSlide",function(index){self.$el.closest(".js-card").find(".awf-message").remove();if($(".poll-item",self.$el).eq(index).data("view")){$(".poll-item",self.$el).eq(index).data("view").scrollTop()}})}},onCardFlip:function(){var self=this;w3n.cogs.minipulse.views.MinipulseCardView.onCardFlip.call(self);if(self.pollItems[self.cog.activeCarouselIndex]){self.pollItems[self.cog.activeCarouselIndex].onCardFlip()}if(self.cog.isLargeCardVisible){self.triggerCurrentSlideFunctions.call(self)}var back=self.$el.closest("div.back");if(back.length!==0&&back.attr("style").indexOf("800px")===-1){back.attr("style",back.attr("style")+"height: 800px !important;")}},triggerCurrentSlideFunctions:function(){var activateSlide=function(index){if(!this.pollItems){return false}if(this.pollItems[index]){this.pollItems[index].onCurrentCarouselSlide();this.pollItems[index].onCurrentCarouselSlideComplete();return true}return false}.bind(this);var currIndex=this.cog.activeCarouselIndex;activateSlide(currIndex)},destroy:function(){w3n.cogs.minipulse.views.MinipulseCardView.destroy.call(this)},sso_login:function(){var params={ev:"sso login",action:"button",name:"sign in",section:"sign in page",target:"sso login page"};this.tagEvent(params);var current_page=window.location.protocol+"//"+window.location.host+window.location.pathname,current_page_params=_.keys(awf.util.url_params).length===0?{"[":"]"}:awf.util.url_params,current_hash=window.location.hash,return_url=current_page+awf.util.urlParams(current_page_params)+current_hash,d=new Date,login_page_params="?"+d.getTime()+"&returnUrl="+return_url,final_url="https://w3-workplace.ibm.com/w3login.html"+login_page_params+"/#/home/minipulse/";window.location=final_url},tagEvent:function(params){this.metrics.tagEvent(params)},events:{}})})();(function(){var DEFAULTS={componentName:"minipulseCardMedium"};w3n.cogs.minipulse.views.medium=app.base.views.BaseView.extend({name:DEFAULTS.componentName,template:w3n.templates.cogs.minipulse["card.html"],initialize:function(params){this.params=params;this.medium_methods=params.medium_methods;this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"minipulse:medium-card"});this.options=params.options;this.$el=$(this.template);w3n.cogs.minipulse.views.MinipulseCardView.init.call(this);this.render()},render:function(){var self=this;self.cardSize="medium";w3n.cogs.minipulse.views.MinipulseCardView.render.call(self);return this},events:{},openLargeCard:function(){w3n.cogs.minipulse.views.base.medium_methods.flipCard()},tagEvent:function(params){var parameters={ev:params.ev,action:params.action,module:"box:medium",name:params.name,section:params.section,target:params.target||"none",group:"YourIBM"};console.log("tagEvent:",parameters);this.metrics.tagEvent(parameters)}})})();(function(){var DEFAULTS={debug:app.utils.urlParam("debug-minipulse"),pollsMaxCount:parseInt(app.utils.urlParam("minipulse-polls-limit"))||5};w3n.components=w3n.components||{};w3n.cogs.minipulse=w3n.cogs.minipulse||{};w3n.cogs.minipulse.views=w3n.cogs.minipulse.views||{};var self=w3n.cogs.minipulse.views.MinipulseCardView={init:function(){this.options=_.extend(DEFAULTS,this.options);this.isLoading=false;this.$container=this.options.$container;this.cog=awf.app.experience.cogs.minipulse.data;this.cog.activeCarouselIndex=this.cog.activeCarouselIndex||0;this.pollItems=[];w3n.components[this.options.componentName]=this;if(this.options.debug){console.log("cogs/minipulse/components/card -> minipulseCard.init complete",this)}this.$container.empty();this.$container.html(this.$el);this.$content=$("[card-content]",this.$el);this.flipcardComponent=this.$el.closest(".grid__item");if(this.flipcardComponent){}this.listenTo(this.cog.collection,"requestend",this.render)},render:function(){if(this.options.debug){}this.hasRenderedContent=false;if(this.cardSize==="large"&&typeof this.flipcardComponent!=="undefined"&&typeof this.flipcardComponent.$el!=="undefined"){$(".back",this.flipcardComponent).first().addClass("minipulse-flipcard-back")}if(!this.cog.status||this.cog.status=="loading"){if(this.showLoading){this.showLoading()}else{self.showLoading.call(this)}return}else{if(this.hideLoading){this.hideLoading()}else{self.hideLoading.call(this)}}if(["notAuthenticated","failed"].indexOf(this.cog.status)!==-1){var fnc="renderStatus"+this.cog.status.charAt(0).toUpperCase()+this.cog.status.slice(1);if(this[fnc]){this[fnc]()}else{self[fnc].call(this)}if("i18next"in window){this.$el.localize()}return}this.$content.html("");this.$el.removeClass(componentStatusClasses).addClass("status-complete");this.$el.addClass("card-"+this.cardSize);if(this.renderCarousel){this.renderCarousel()}else{self.renderCarousel.call(this)}this.hasRenderedContent=true;if(this.options.debug){console.log("cogs/minipulse/components/card -> minipulseCard.render complete")}if(this.attachEvents){this.attachEvents()}else{self.attachEvents.call(this)}if(this.generateShareDropDown){this.generateShareDropDown()}else{self.generateShareDropDown.call(this)}if("i18next"in window){this.$el.localize()}},renderCarousel:function(){if(_.size(this.cog.collection.toJSON())===0){if(this.renderEmpty){this.renderEmpty()}else{self.renderEmpty.call(this)}return}var hasCarousel=_.size(this.cog.collection.toJSON())!==1;if(hasCarousel){this.carousel=new app.components.carousel({el:this.$content,tag_event_module:"minipulse:"+this.cardSize});this.$content.append(this.carousel.render().$el);this.$content.find("div.carousel").data("view",this.carousel)}_.each(awf.app.experience.cogs.minipulse.data.collection.models,function(model,i){if(typeof this.options.pollsMaxCount==="number"&&i>=this.options.pollsMaxCount){return false}var pollItem=new w3n.cogs.minipulse.views.pollItemView({parent:this,model:model});this.pollItems.push(pollItem);if(hasCarousel){this.carousel.appendItem(pollItem.$el)}else{this.$content.append(pollItem.$el)}}.bind(this));this.carousel.setViewMore({icon:"icon-awf-w3-logo-minipulse",label:"View more polls",i18n_label:"app.cogs.minipulse.cta.view-more",callback:function(){var metrics=app.utils.createMetricTag({group:awf.app.id}),params={ev:"click",action:"button",name:"View more polls",section:"view-more",target:"https://minipulse.cambridge.ibm.com/minipoll/"};metrics.tagEvent(params);window.open("https://minipulse.cambridge.ibm.com/minipoll/")}.bind(this)});if(hasCarousel){this.carousel.setDefPointer(this.cog.activeCarouselIndex);var card=this.$container.parent();$("body").on("focusin",function(event){if(!$.contains(card[0],event.target)){card.find(".card-medium .poll-btns ul").removeClass("showActions")}else{card.find(".card-medium .poll-btns ul").addClass("showActions")}})}else{this.$content.wrapInner('<div class="carousel-content" />').wrapInner('<div class="carousel carousel-one-slide" />')}},attachEvents:function(){var onCardFlip=function(){if(this.onCardFlip){this.onCardFlip()}else{self.onCardFlip.call(this)}}.bind(this);if(this.cardSize==="large"){onCardFlip();this.flipcardComponent.on("flip-up-complete flip-down-complete",awf.page,function(){onCardFlip()}.bind(this))}if(this.carousel){this.carousel.on("carousel:goToSlide",function(index){this.cog.activeCarouselIndex=index;if(this.onCarouselSlide){this.onCarouselSlide(index)}else{self.onCarouselSlide.call(this,index)}}.bind(this))}},renderStatusNotAuthenticated:function(){this.$content.html(w3n.templates.cogs.minipulse["status-unauthenticated.html"]);this.$el.removeClass(componentStatusClasses).addClass("status-unauthenticated");$("[card-login]",this.$content).on("click",function(evt){evt.preventDefault();if(this.cog.errorType&&this.cog.errorType==="minipulseAuthFailed"){var win=window.open(this.collection.initialCollection.getApiBase(),"_blank");win.focus()}else{w3n.sso_window.show()}}.bind(this));if(this.options.debug){console.log("cogs/minipulse/components/card -> minipulseCard.renderStatusNotAuthenticated complete")}},renderStatusFailed:function(){this.$content.html();this.$el.prepend(w3n.templates.cogs.minipulse["status-failed.html"]);this.$el.removeClass(componentStatusClasses).addClass("status-failed")},renderEmpty:function(){if(this.options.debug){console.log("cogs/minipulse/components/card -> minipulseCard.renderEmpty start")}this.$content.html(w3n.templates.cogs.minipulse["empty.html"]);this.$el.addClass("results-empty");if(this.options.debug){console.log("cogs/minipulse/components/card -> minipulseCard.renderEmpty complete")}},showLoading:function(){this.$el.children().append(app.base.views.BaseView.prototype.loadingTemplate)},hideLoading:function(){if(!this.isLoading){return false}this.$el.find(".loading-mark").hide();this.isLoading=false},generateShareDropDown:function(){var carouselIndex=this.cog.activeCarouselIndex;self.shareDg=new w3n.components.sharecomponent({parent:this.$el,trigger:this.$el.parent(),evt_type:"click",evt_target:$("li.poll-btn-share a",this.$el),module:"minipulse:"+this.cardSize,cog_methods:this.medium_methods?this.medium_methods:this.large_methods,callback:function(event){var node=$(event.target).closest("article");var title=node.find("h3.poll-title");var question=node.find("p.poll-question span");return{title:_.trim(title.html()),desc:_.trim(question.html()),url:"https://minipulse.cambridge.ibm.com/minipoll/#minipulse"}}});this.$el.parents('[data-component="titled-card"]').on("click",function(event){var $target=$(event.target);if(!$target.parents().hasClass("share-status")&&self.shareDg.$el.is(":visible")&&self.shareDg.$el[0]!=event.target&&!$.contains(self.shareDg.$el[0],event.target)){self.shareDg.hide()}else{$target.focus()}})},onCardFlip:function(){if($(".awf-card-wrap",this.flipcardComponent.$el).hasClass("-flip")){this.cog.isLargeCardVisible=true;$("body").addClass("minipulse-large-card-visible")}else{var shareDialog=this.$el.find(".share-status.slide");if(shareDialog.length>0){shareDialog.removeClass("slide");shareDialog.slideUp(1)}this.$el.find(".share-dialog-overlay-id.share-dialog-overlay").removeClass("share-dialog-overlay");this.$el.find(".content").removeClass("overlay-blur");this.cog.isLargeCardVisible=false;$("body").removeClass("minipulse-large-card-visible")}updateCarouselSlide.call(this)},onCarouselSlide:function(index){updateCarouselSlide.call(this)},destroy:function(){if(this.options.debug){console.log("cogs/minipulse/components/card -> destroy card Component "+this.options.componentName)}_.each(this.pollItems,function(pollItem){pollItem.destroy()});this.remove();delete w3n.components[this.options.componentName]}};var componentStatusClasses="status-complete status-unauthenticated status-failed";function updateCarouselSlide(){var activeCarousel=this.carousel,$carousels;var goToSlide=function(carousel){if(carousel){carousel.goToSlide(this.cog.activeCarouselIndex,true)}}.bind(this);var $medium_carousel=$(".card-minipulse.card-medium").find("div.carousel");activeCarousel=$($medium_carousel).data("view");if(activeCarousel){goToSlide(activeCarousel)}var $large_carousel=$(".card-minipulse.card-large").find("div.carousel");activeCarousel=$($large_carousel).data("view");if(activeCarousel){goToSlide(activeCarousel)}}})();(function(){var DEFAULTS={debug:app.utils.urlParam("debug-minipulse"),messages:{oneRequiredfailure:"At least one answer is required",otherFieldIgnored:"Looks like you forgot to fill in the other field",maxSelectedExceedFailure:"You cannot select more than {{maxSelect}} choices.",defaultError:"Oops looks like something went wrong"}};w3n.cogs.minipulse.views.pollForm=app.base.views.BaseView.extend({initialize:function(params){this.params=params;this.model=params.model;this.poll=params.model.toJSON();this.parent=params.parent;this.template=Mustache.render(w3n.templates.cogs.minipulse["poll-form.html"],this.poll);this.$el=$(this.template);this.options=_.extend(DEFAULTS,this.options);this.formElements=[];this.data=this.poll;this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"minipulse:poll-form"});this.render()},render:function(){this.$el.html("");this["renderForm"+this.poll.type]();if(!this.$form){return false}this.attachEvents();this.postRender();this.debug("minipulsePollForm/minipulsePollForm.render complete");return this},events:{},generateMessageBar:function(){var slideMsgbar="Scroll down to answer all questions";if("i18next"in window){var translatedSlideMsgbar=i18next.t("app.cogs.minipulse.message.answer-all-question");if(translatedSlideMsgbar&&translatedSlideMsgbar!=="app.cogs.minipulse.message.answer-all-question"){slideMsgbar=translatedSlideMsgbar}}this.scrollMsgBar=this.parent.parent.large_methods.postMessage("info",slideMsgbar,true);return this.scrollMsgBar},renderForm:function(){var self=this;if(!this.formElements||this.formElements.length===0){self.debug("minipulsePollForm/minipulsePollForm.renderForm this.formElements is required");return false}this.form=new w3n.base.components.old_form({overall:{properties:{id:"form_"+this.poll.id},message:{error:true},$wrap:this.$el},elements:this.formElements,buttons:[{type:"submit",value:"Submit",i18n:"app.common.cta.submit",def_class:true,custom_class:"disabled",func:function(evt){self.submitForm.call(this,evt)}.bind(this)}]});this.form.render();if("i18next"in window){this.form.$el.localize()}this.$form=this.form.$el.is("form")?this.form.$el:$("form",this.form.$el)},attachEvents:function(){var self=this;$(":input",self.$form).on("focus",function(evt){self.onInputFocus(evt)});$(":input",self.$form).on("blur",function(evt){self.onInputBlur(evt)});this.bindTriggerValidationEvents()},bindTriggerValidationEvents:function(){var self=this,validateResult;formSubmitBtn=$("button.submit",self.$form);if(self.poll.type===2){formSubmitBtn.removeClass("disabled")}$(".selection-radio input[type=radio]",this.$form).each(function(){if($(this).attr("tabindex")==-1){$(this).attr("tabindex","0")}});$(":input",this.$form).each(function(){var data={};$(this).on("click",function(){$.each(self.$form.serializeArray(),function(i,field){if(!field.value||field.value.length===0){return}data[field.name]=field.value});validateResult=self.validateFormData(data);data={};if(!validateResult||!validateResult.status||validateResult.status!=="success"){if(!formSubmitBtn.hasClass("disabled")){formSubmitBtn.addClass("disabled")}return}else{formSubmitBtn.removeClass("disabled")}});if($(this).attr("type")==="text"){$(this).keyup(function(){$.each(self.$form.serializeArray(),function(i,field){if(!field.value||field.value.length===0){return}data[field.name]=field.value});validateResult=self.validateFormData(data);if(!validateResult||!validateResult.status||validateResult.status!=="success"){if(!formSubmitBtn.hasClass("disabled")){formSubmitBtn.addClass("disabled")}return}else{formSubmitBtn.removeClass("disabled")}data={}})}});$("div.elements",this.$form).scroll(function(){var $this=$(this),vsisableH=$(this).height(),contentH=$(this).get(0).scrollHeight,scrollTop=$(this).scrollTop();if(scrollTop/(contentH-vsisableH)>=.95){self.scrollMsgBar.andDismissIn(0)}})},onInputFocus:function(evt){var $input=$(evt.currentTarget);if(!this.hasStarted){this.hasStarted=(new Date).getTime()}if($input.is("textarea")){$input.parent().addClass("fg-toggled")}return $input},onInputBlur:function(evt){var $input=$(evt.currentTarget);if($input.is("textarea")&&($input.val()===""||$input.val().trim().length===0)){$input.parent().removeClass("fg-toggled")}if(_.contains($input.attr("id"),"_other")&&($input.val()===""||$input.val().trim().length===0)){$input.val("Other (specify)")}var data={};var self=this,validateResult;var formSubmitBtn=$("button.submit",self.$form);$.each(self.$form.serializeArray(),function(i,field){if(!field.value||field.value.length===0){return}data[field.name]=field.value});validateResult=self.validateFormData(data);data={};if(!validateResult||!validateResult.status||validateResult.status!=="success"){if(!formSubmitBtn.hasClass("disabled")){formSubmitBtn.addClass("disabled")}return}else{formSubmitBtn.removeClass("disabled")}return $input},submitForm:function(evt){var target=$(evt.target);this.resetFormMessage();var validateResult,data={};$.each(this.$form.serializeArray(),function(i,field){if(!field.value||field.value.length===0){return}data[field.name]=field.value});this.debug("minipulsePollForm/submitForm data",data);validateResult=this.validateFormData(data);if(!validateResult||!validateResult.status||validateResult.status!=="success"){var obj={msg:validateResult&&validateResult.errorMessage?validateResult.errorMessage:this.options.messages.defaultError,type:"error",error:validateResult||{}};return false}data=this.prepareFormData(data);if(!data||data.length===0){return false}var timestampCompleted=(new Date).getTime(),pollDuration=(timestampCompleted-this.hasStarted)/1e3%60;if(app.utils.urlParam("minipulse-fake-votePoll")){self.debug("minipulsePollForm/submitForm Success data",data);self.debug("minipulsePollForm/submitForm Success pollDuration",pollDuration);this.model.set("responses",this.model.get("responses")+1);this.$el.closest(".js-card").find(".awf-message").remove();this.parent.showResult();this.parent.showThankYou(poll);return}var tag={ev:"votePoll",action:"Form",section:"Poll",module:"minipulse:large",name:"pollId | pollTitle | duration",target:this.model.get("id")+" | "+this.model.get("title")+" | "+pollDuration,group:"YourIBM"};this.debug("minipulsePollForm/submitForm @metric",tag);this.metrics.tagEvent(tag);this.model.subModelsMap.poll.votePoll(data,function(poll){this.debug("minipulsePollForm/submitForm @metric",tag);this.$el.closest(".js-card").find(".awf-message").remove();this.parent.showResult();this.parent.showThankYou(poll)}.bind(this),function(){var obj={msg:this.options.messages.defaultError,type:"error",error:{}};this.updateFormMessage(obj)}.bind(this))},validateFormData:function(data){this.debug("minipulsePollForm/validateFormData data",data);var isOtherChecked;if(data&&_.size(data)>0&&this.data.otherfield){isOtherChecked=data["answer_"+this.data.otheranswerid]||parseInt(data.answer)===this.data.otheranswerid||false;if(!isOtherChecked&&data["other_"+this.data.otheranswerid]&&data["other_"+this.data.otheranswerid].trim().length>0){delete data["other_"+this.data.otheranswerid]}}if(!data||_.size(data)===0){return{status:"failed",errorMessage:this.options.messages.oneRequiredfailure}}if(this.data.type!==2){if(_.size(data)===1){var comment_id="answer_"+this.data.id;if(comment_id in data){return{status:"failed",errorMessage:this.options.messages.oneRequiredfailure}}}}if(this.data.otherfield&&this.data.type!==2){var isOtherChosen=data["answer_"+this.data.otheranswerid]||parseInt(data.answer)===this.data.otheranswerid||false;if(isOtherChosen&&(!data["other_"+this.data.otheranswerid]||data["other_"+this.data.otheranswerid].trim().length===0)){return{status:"failed",errorMessage:this.options.messages.otherFieldIgnored}}}if(this.data.otherfield&&this.data.type===2){var isOtherField=$('[name="answer_'+this.data.otheranswerid+'"]');if(isOtherField&&parseInt(isOtherField.val())!==this.data.answers.length){var otherInput=$('[name="other_'+this.data.otheranswerid+'"]');if(otherInput&&_.isEmpty($.trim(otherInput.val()))){return{status:"failed",errorMessage:this.options.messages.otherFieldIgnored}}}}if(this.data.maxselect!==0&&this.data.type===1){var selectedOptionSize=_.size(data);if(data["answer_"+this.data.id]){selectedOptionSize=selectedOptionSize-1}if(isOtherChecked&&data["other_"+this.data.otheranswerid]&&data["other_"+this.data.otheranswerid].trim().length>0){selectedOptionSize=selectedOptionSize-1}if(this.data.maxselect<selectedOptionSize){var message=Mustache.render(this.options.messages.maxSelectedExceedFailure,{maxSelect:this.data.maxselect});return{status:"failed",errorMessage:message}}}return{status:"success"}},prepareFormData:function(data){var self=this;var preparedData=[];_.each(this.data.answers,function(answer,i){var answerObj;switch(this.data.type){case 0:answerObj=self.createSingleSelectAnswer(this.data,answer,data);break;case 1:answerObj=self.createMultipleSelectAnswer(this.data,answer,data);break;default:answerObj=self.createDefaultAnswer(this.data,answer,data)}if(answerObj){preparedData.push(answerObj)}}.bind(this));if(this.data.optionalcomment&&data["answer_"+this.data.id]&&data["answer_"+this.data.id].trim().length!==0){response=w3n.cogs.minipulse.views.base.createAnswerObj(this.data,{id:2},{comment:data["answer_"+this.data.id]});preparedData.push(response)}this.debug("minipulsePollForm/prepareFormData preparedData",preparedData);return preparedData},updateFormMessage:function(params){if(!params||!params.type||!params.msg){return false}this.resetFormMessage();if(!this.$formMessage){this.$formMessage=$('<div class="poll-form-message"></div>');this.$el.append(this.$formMessage)}this.$formMessage.addClass("type-"+params.type).html(params.msg)},resetFormMessage:function(){if(this.$formMessage){this.$formMessage.removeClass("type-error type-success");this.$formMessage.html("")}},addOtherField:function(poll,answer,field){if(!answer.isOtherAnswer){return field}if(!poll.otherfield){return}field.label_edit=true;field.other_name="other_"+poll.otheranswerid;field.other_id="answer_"+answer.id+"_other";field.label=poll.otherfieldtext;return field},addCommentField:function(poll){if(!poll.optionalcomment){return false}var label=poll.commentprompt.replace("(optional)","").replace("(Optional)","").trim();return{type:"textarea",name:"answer_"+poll.id,id:"answer_"+poll.id,label:label+" (Optional)"}},debug:function(msg,data){if(app.utils.urlParam("debug-minipulse")){if(msg&&data){console.info("cogs/minipulse/components/poll-form/"+msg,data)}else{console.info("cogs/minipulse/components/poll-form/"+msg)}}},destroy:function(){this.debug("minipulsePollForm/destroy");this.remove()},renderForm0:function(){var self=this;var poll=self.poll;_.each(poll.answers,function(answer,i){var field={type:"radio",name:"answer",id:"answer_"+answer.id,value:answer.id,label:answer.textvalue,field_set_id:"radio_fs_"+poll.id,field_set_legend:"Radio Group Fieldset"};field=self.addOtherField(poll,answer,field);if(field){self.formElements.push(field)}});var commentField=self.addCommentField(poll);if(commentField){self.formElements.push(commentField)}this.renderForm()},renderForm1:function(){var self=this;var poll=self.poll;var options=w3n.cogs.minipulse.views.base.createLikertLabels(self.poll.scaletype);_.each(poll.answers,function(answer,i){var field={type:"checkbox",name:"answer_"+answer.id,id:"answer_"+answer.id,value:answer.textvalue,label:answer.textvalue};field=self.addOtherField(poll,answer,field);if(field){self.formElements.push(field)}});var commentField=self.addCommentField(poll);if(commentField){self.formElements.push(commentField)}this.renderForm()},renderForm2:function(){var self=this;var poll=self.poll;_.each(poll.answers,function(answer,i){var field={type:"svg_li",value:(i+1).toString(),name:"answer_"+answer.id,id:"answer_"+answer.id,label:answer.textvalue,ul_id:"rank_order_ul_"+poll.id};field=self.addOtherField(poll,answer,field);if(field){self.formElements.push(field)}});var commentField=self.addCommentField(poll);if(commentField){self.formElements.push(commentField)}this.renderForm()},renderForm3:function(){var self=this;var poll=self.poll;var options=w3n.cogs.minipulse.views.base.createLikertLabels(self.poll.scaletype);_.each(poll.answers,function(answer,i){var field={type:"selectionRadio",name:"answer_"+answer.id,id:"answer_"+answer.id,label:answer.textvalue,labelFor:false,options:options};field=self.addOtherField(poll,answer,field);if(field){self.formElements.push(field)}});var commentField=self.addCommentField(poll);if(commentField){self.formElements.push(commentField)}this.renderForm()},postRender:function(){if(this.poll.type===2){this.initSortable()}},initSortable:function(){var self=this;this.$sortable=$(".elements ul",this.$form);if(this.$sortable&&this.$sortable.sortable){this.$sortable.sortable({items:"> .fg-li"})}this.$sortable.on("sortupdate",function(event,ui){if(!this.hasStarted){self.hasStarted=(new Date).getTime()}ui.item.addClass("ui-sortable-handle-sorting");self.updateRankOrder()});this.$sortable.on("sortstart",function(event,ui){console.log("sortstart");ui.item.addClass("ui-sortable-handle-sorting");self.$sortable.find(".hidden-text-input").find("input").blur()});this.$sortable.on("sortstop",function(event,ui){console.log("sortstop");ui.item.removeClass("ui-sortable-handle-sorting")})},updateRankOrder:function(){$(".fg-li",this.$sortable).each(function(i,el){$(el).find("input[type=hidden]").val(i+1)})},createDefaultAnswer:function(poll,answer,data){if(!poll){return false}var value=parseInt(data["answer_"+answer.id]);if(!value){return false}var answerObj=w3n.cogs.minipulse.views.base.createAnswerObj(poll,answer,{rank:value});answerObj=this.createOtherAnswer(answerObj,poll,answer,data);return answerObj},createMultipleSelectAnswer:function(poll,answer,data){if(!poll){return false}var value=data["answer_"+answer.id];if(!value){return false}var answerObj=w3n.cogs.minipulse.views.base.createAnswerObj(poll,answer,{});answerObj=this.createOtherAnswer(answerObj,poll,answer,data);return answerObj},createSingleSelectAnswer:function(poll,answer,data){if(!poll){return false}var value=parseInt(data.answer);if(!value||value!==answer.id){return false}var answerObj=w3n.cogs.minipulse.views.base.createAnswerObj(poll,answer,{comment:answer.textvalue});answerObj=this.createOtherAnswer(answerObj,poll,answer,data);return answerObj},createOtherAnswer:function(answerObj,poll,answer,data){if(answer.isOtherAnswer&&poll.otherfield){if(!data["other_"+poll.otheranswerid]||data["other_"+poll.otheranswerid].trim().length===0){return false}answerObj.comment=data["other_"+poll.otheranswerid]}return answerObj},openLargeCard:function(){w3n.cogs.minipulse.views.base.medium_methods.flipCard()}})})();(function(){var DEFAULTS={debug:app.utils.urlParam("debug-minipulse"),disableBadges:!app.utils.urlParam("minipulse-debug-badges"),disableMeta:app.utils.urlParam("minipulse-disable-meta"),disableMetaTag:true,enableLike:app.utils.urlParam("minipulse-enable-poll-like"),enableShare:app.utils.urlParam("minipulse-enable-poll-share"),pollEngagedTimeout:3};var message_template='<div class="message status-message {{class}}"> <i class="icon-awf-alert-triangle-fill"></i> <span>{{status}}:</span> {{text}}</div>';w3n.cogs.minipulse.views.pollItemView=app.base.views.BaseView.extend({template:w3n.templates.cogs.minipulse["poll-item.html"],initialize:function(params){this.params=params;this.options=_.extend({},DEFAULTS,typeof params==="object"&&params);this.parent=params.parent;this.model=params.model;this.$el=$(this.template);this.$el.data("view",this);this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"minipulse:poll-item"});this.render()},render:function(){var self=this;if(typeof self.model==="undefined")return;var context=self.model.toJSON();if(self.parent.cardSize==="large"){context.isLargeCard=true}else if(self.parent.cardSize==="medium"){context.isMediumCard=true}if(self.options.disableMetaTag){context.tag=false}if(self.options.enableLike||awf.flags.isActive("cogs.minipulse.poll.like")){self.isLikeEnabled=true;context.isLikeEnabled=true}if(self.options.enableShare||awf.flags.isActive("cogs.minipulse.action.share")){self.isShareEnabled=true;context.isShareEnabled=true}if(!_.isEmpty(context.forumlink)){self.isDiscussEnabled=true;context.isDiscussEnabled=true}if("i18next"in window){if(self.options.model.attributes.targets>0){context.badgeType="app.common.badge.profiled"}else if(self.options.model.attributes.targets===0){context.badgeType="app.common.badge.all-ibm"}}var $template=$(Mustache.render(this.template,context));self.$el.html($template[0].innerHTML);if(context.isMediumCard){var descQuestion=_.trunc(context.question,{length:120,separator:" "});self.$el.find(".poll-question span").html(descQuestion);var titileLink=_.trunc(context.title,50);self.$el.find(".poll-title a").html(titileLink)}if(context.isLargeCard){self.$el.find(".poll-question span").html(context.question)}self.$content=$("[poll-content]",self.$el);self.$content.wrap('<div class="poll-content-outer"></div>');self.pollStatus=_.camelCase(self.model.get("statustext"));self.$el.addClass("poll-status-"+self.pollStatus);self.$el.addClass("poll-type-"+_.camelCase(self.model.get("typetext")));self.$el.addClass("poll-viztype-"+_.camelCase(self.model.get("viztypetext")));self.$el.attr("aria-label","Minipulse "+(context.isLargeCard?"large":"medium")+" item "+context.title);if(self.options.disableBadges){self.$el.addClass("disable-badges")}if(self.options.disableMeta){self.$el.addClass("disable-meta")}if(context.liked){$(".poll-btn-likes>a",self.$el).addClass("poll-user-has-liked");$(".poll-btn-likes>a",self.$el).attr("title","Unlike");$(".poll-btn-likes>a",self.$el).attr("data-i18n","[title]app.common.social-actions.unlike")}else{$(".poll-btn-likes>a",self.$el).attr("title","Like")}var spanBadging=self.$el.find("span.badging");if(self.options.model.attributes.targets>0){spanBadging.html("Profiled");spanBadging.addClass("yellow")}else if(self.options.model.attributes.targets===0){spanBadging.html("All IBM");spanBadging.addClass("green")}var lis=self.$el.find("div.poll-meta").find("ul").find("li");if(lis.length===0){self.$el.find("div.poll-meta").find("ul").remove()}self.attachEvents();if("i18next"in window){self.$el.localize()}return this},renderSubViews:function(){var self=this;if(self.parent.cardSize==="large"){if(self.model.get("status")===0){setTimeout(function(){self.showForm()},1e3)}else{setTimeout(function(){self.showResult()},1e3);
}}},attachEvents:function(){var self=this;$("[data-bind]",self.$el).each(function(i,el){var $el=$(el),attr=$el.attr("data-bind");self.model.on("change:"+attr,function(model){$el.text(model.get(attr))})});$("[poll-like]",self.$el).on("click",function(evt){evt.preventDefault();var tag={ev:"click",action:$(this).attr("title")=="Like"?"Like":"Unlike",section:"poll",module:"minipulse:"+self.parent.cardSize,name:"Like/Unlike",target:"none",group:"YourIBM"};self.tagEvent(tag);if(self.isLikeEnabled&&!self.isLiking(evt)){self.replaceLikeIcon(evt);self.model.subModelsMap.poll.likePoll(self.likeSuccess.bind(self),self.likeFailed.bind(self))}});$("[poll-discuss]",self.$el).on("click",function(evt){var tag={ev:"click",action:"button",section:"poll",module:"minipulse:"+self.parent.cardSize,name:"Discuss",target:$(this).attr("href"),group:"YourIBM"};self.tagEvent(tag)});$("[go-to-poll]",self.$el).on("click",function(evt){evt.preventDefault();var tag={ev:"click",action:"button",section:"poll",module:"minipulse:medium",name:$(this).text()?$(this).text().trim():"none",target:"none",group:"YourIBM"};self.tagEvent(tag);self.parent.medium_methods.handleLargeViewAvailable(function(is_flippable){if(is_flippable){if(self.parent.openLargeCard){self.parent.openLargeCard()}}else{if(app.utils.urlParam("minipulse-service-apibase")&&app.utils.urlParam("minipulse-service-apibase")==="dev"){window.open("https://sp2.cambridge.ibm.com/minipoll/#"+self.model.get("id"),"_blank")}else{window.open("https://minipulse.cambridge.ibm.com/minipoll/#minipulse"+self.model.get("id"),"_blank")}}})});self.model.on("change:status",function(model){self.$el.removeClass("poll-status-"+self.pollStatus);self.pollStatus=_.camelCase(model.get("statustext"));self.$el.addClass("poll-status-"+self.pollStatus)});self.model.on("change:liked",function(model){if(model.get("liked")){$(".poll-btn-likes",self.$el).addClass("poll-user-has-liked");$(".poll-btn-likes>a",self.$el).attr("title","Unlike");$(".poll-btn-likes>a",self.$el).attr("data-i18n","[title]app.common.social-actions.unlike")}else{$(".poll-btn-likes",self.$el).removeClass("poll-user-has-liked");$(".poll-btn-likes>a",self.$el).attr("title","Like");$(".poll-btn-likes>a",self.$el).attr("data-i18n","[title]app.common.social-actions.like")}if("i18next"in window){self.$el.localize()}});if(self.parent.carousel){self.parent.carousel.on("carousel:goToSlide",function(index){if(self.parent.cardSize==="large"&&self.parent.cog.isLargeCardVisible){if(self.$el.hasClass("active")){self.onPreviousCarouselSlide();if(self.pollForm&&self.pollForm.hasStarted){self.pollForm.hasStarted=false;self.pollFormAbandoned()}}if(self.$el.index()===index){self.onCurrentCarouselSlide();self.parent.carousel.once("carousel:goToSlide:complete",function(){self.$el.parent().find("article.poll-item").removeClass("animating");self.onCurrentCarouselSlideComplete()})}}})}},renderForm:function(){var self=this;if(self.parent.cardSize!=="large"){return false}self.pollForm=new w3n.cogs.minipulse.views.pollForm({model:self.model,parent:self});self.$content.append(self.pollForm.$el)},renderResult:function(){var self=this;if(self.parent.cardSize!=="large"){return false}self.pollResult=new w3n.cogs.minipulse.views.pollResultView({model:self.model,parent:self.$content})},showForm:function(){var self=this;if(self.parent.cardSize!=="large"){return false}if(self.formIsVisible){return false}self.formIsVisible=true;self.resultIsVisible=false;if(self.pollResult){self.pollResult.$el.hide()}if(!self.pollForm){self.renderForm()}self.pollForm.$el.show();var parent=self.pollForm.$el.parent();var scrollHeight=parent.closest(".poll-content-outer").height()-225-parent.find(".poll-title-div").height()-parent.find(".poll-meta").height()-parent.find(".poll-description").height();self.pollForm.$el.find(".elements").height(scrollHeight);var pollFormContent=self.pollForm.$el.find(".elements")[0];if(pollFormContent.scrollHeight-10>=pollFormContent.clientHeight){self.pollForm.generateMessageBar()}self.scrollTop()},showResult:function(){var self=this;if(self.parent.cardSize!=="large"){return false}if(self.resultIsVisible&&self.options.model.attributes.typetext!=="Multiple Select"&&self.options.model.attributes.typetext!=="Likert Scale"){return false}console.log("cogs/minipulse/components/poll-item -> showResult");self.resultIsVisible=true;self.formIsVisible=false;if(self.pollForm){self.pollForm.$el.hide()}if(!self.pollResult){self.renderResult()}else{if(window.navigator.userAgent.indexOf("Chrome")!==-1&&(self.options.model.attributes.type===1||self.options.model.attributes.type===3)){if(self.pollResult.view){self.pollResult.view.renderChart()}else{self.pollResult.renderChart()}}}var parent=self.pollResult.$el.parent();var scrollHeight=parent.closest(".poll-content-outer").height()-125-parent.find(".poll-title-div").height()-parent.find(".poll-meta").height()-parent.find(".poll-description").height();self.pollResult.$el.height(scrollHeight);self.pollResult.$el.show();self.scrollTop()},showThankYou:function(poll){var self=this;var defaultThxTxt="Thank you for participating in this mini-poll. Your response is highly appreciated.";var $template=$(Mustache.render(w3n.templates.cogs.minipulse["thank-you-message.html"],{thankyoumessage:poll.thankyouaddon!==""?poll.thankyouaddon:defaultThxTxt}));self.slidedown=new w3n.components.slide_down({content:$template,enable_overlay:true,trigger:this.$el.find(".poll-form .buttons button")[0]||null,hide_target:false});self.$el.closest(".card-minipulse").append(self.slidedown.render().el);self.slidedown.$el.find(".thankyou-message__desc a").each(function(){$(this).on("click",function(event){var tag={ev:"Click",action:"Link",section:"Thank you message",module:"minipulse:large",name:"Thank you message",target:$(this).attr("href"),group:"YourIBM"};self.tagEvent(tag)}.bind(this))});var closeBtn=self.$el.closest(".card-minipulse").find(".thankyou-message__btn .close");self.slidedown.$el.find(".thankyou-message__desc a").eq(0).on("keydown",function(event){if(event.keyCode===9&&event.shiftKey){event.preventDefault();closeBtn.focus()}});closeBtn.off("click").on("click",function(){self.slidedown.hide();this.parent.$el.closest(".js-card").find(".js-large-card-close").focus();var tag={ev:"Click",action:"Close",section:"Thank you message",module:"minipulse:large",name:"Thank you message",group:"YourIBM"};this.tagEvent(tag);setTimeout(function(){self.slidedown.$el.nextAll(".slide-overlay").remove();self.slidedown.$el.remove()}.bind(this),300)}.bind(this)).off("keydown").on("keydown",function(event){event.stopPropagation();if(event.keyCode===9&&!event.shiftKey){event.preventDefault();var descLink=self.slidedown.$el.find(".thankyou-message__desc a");if(descLink.length>0){descLink.eq(0).focus()}else{this.focus()}}});if("i18next"in window){self.slidedown.$el.localize()}self.slidedown.show();closeBtn.focus()},scrollTop:function(){$(".poll-content-outer",this.$el).scrollTop(0)},pollEngaged:function(){var self=this;var tag={ev:(self.formIsVisible?"pollFormShown":false)||(self.resultIsVisible?"pollResultShown":false)||"",action:"pollEngaged",section:"Poll",module:"minipulse:large",name:"pollId | pollTitle",target:self.model.get("id")+" | "+self.model.get("title"),group:"YourIBM"};self.tagEvent(tag)},pollFormAbandoned:function(){var self=this;var tag={ev:"pollFormAbandoned",action:"Form",section:"Poll",module:"minipulse:large",name:"pollId | pollTitle",target:self.model.get("id")+" | "+self.model.get("title"),group:"YourIBM"};self.tagEvent(tag)},onPreviousCarouselSlide:function(){var self=this;self.$el.siblings("article.poll-item").removeClass("animate-in").addClass("animating");self.$el.addClass("animate-out");if(self.shareDg&&self.shareDg.$el.is(":visible")){self.shareDg.hide()}},onCurrentCarouselSlide:function(){var self=this;self.renderSubViews();self.scrollTop()},onCurrentCarouselSlideComplete:function(){var self=this;self.$el.siblings("article.poll-item").removeClass("animate-out");self.$el.removeClass("animate-out");self.$el.addClass("animate-in");self.addEngagedTimers.call(self);self.scrollTop()},onCardFlip:function(){var self=this;console.log("cogs/minipulse/components/poll-item -> onCardFlip");if(!self.parent.cog.isLargeCardVisible){if(self.pollForm&&self.pollForm.hasStarted){self.pollForm.hasStarted=false;self.pollFormAbandoned()}if(self.$el&&self.$el.find(".share-dialog-overlay-id").length>=1){self.$el.find("share-dialog-overlay-id").removeClass("share-dialog-overlay")}}},destroy:function(){var self=this;console.log("cogs/minipulse/components/poll-item -> destroy");if(self.pollForm){self.pollForm.remove()}if(self.pollResult){self.pollResult.remove()}self.remove()},showHideMessage:function(node){var message=$(node);this.params.$el.append(message);message.fadeIn().delay(3e3).fadeOut("400",function(){message.remove()})},replaceLikeIcon:function(event){var self=this;var icon=$(event.currentTarget);var loading=icon.children().hasClass("icon-awf-spin");if(!loading){self.toggleLikeIcon(icon);self.setLoadingIcon(icon)}},isLiking:function(event){var icon=$(event.currentTarget);var loading=icon.children().hasClass("icon-awf-spin");if(loading){return true}return false},toggleLikeIcon:function(html){html.toggleClass("active")},setLoadingIcon:function(html){html.find("i").replaceWith('<i class="icon-awf-rotate-right icon-awf-spin"></i>')},likeFailed:function(){var message_html=Mustache.render(message_template,{class:"msg_error",status:"Error",text:"Like Poll Failed"});this.showHideMessage(message_html);var refresh_icon=self.$el.find(".icon-awf-spin");refresh_icon.replaceWith('<i class="icon icon-awf-heart"></i>')},likeSuccess:function(){var refresh_icon=this.$el.find(".icon-awf-spin");refresh_icon.replaceWith('<i class="icon icon-awf-heart"></i>')},events:{},addEngagedTimers:function(){var timer,engagedTimeout,resetTimers,timerInterval=500;timer=setInterval(function(){if(this.$el.hasClass("animating")||!this.$el.hasClass("active")||!this.parent.cog.isLargeCardVisible){resetTimers()}}.bind(this),timerInterval);engagedTimeout=setTimeout(function(){this.pollEngaged();resetTimers()}.bind(this),this.options.pollEngagedTimeout*1e3);resetTimers=function(){clearTimeout(engagedTimeout);clearInterval(timer)}},tagEvent:function(params){this.metrics.tagEvent(params)}})})();(function(){var DEFAULTS={debug:app.utils.urlParam("debug-minipulse")};w3n.cogs.minipulse.views.pollResultView=app.base.views.BaseView.extend({initialize:function(params){this.parent=params.parent;this.model=params.model;this.poll=params.model.toJSON();this.pollType=this.poll.type;this.template=Mustache.render(w3n.templates.cogs.minipulse["poll-result.html"],{typetext:this.poll.typetext});this.$el=$(this.template);this.largeCardWidth=730;this.newSize=730;this.legendLoaded=false;this.customLegendLoaded=false;this.windowWidth=730;this.translation_votes="i18next"in window?"data-i18n=app.cogs.minipulse.poll-result.votes":"";this.metrics=app.utils.createMetricTag({group:awf.app.id,module:"minipulse:pollresult"});if(this.pollType===0||this.pollType===3){this.chartWidthPercent=.8}else if(this.pollType===1||this.pollType===2){this.chartWidthPercent=.7}if(this.poll&&this.poll.responses&&this.poll.responses===0){console.log("cogs/minipulse/components/poll-result -> minipulsePollResult.init failed because there are no responses");return false}this.debug("cogs/minipulse/components/poll-result -> minipulsePollResult.init");if(this.parent&&this.$el){this.parent.append(this.$el)}this.render()},render:function(){this.$chart=$(".chart",this.$el).html("")[0];this.showLoading();this["renderChart"+this.pollType]();this.renderChart();$(window).on("resize",this.responsivelySetWidth.bind(this));if("i18next"in window){this.$el.localize()}return this},events:{},getI18nTranslation:function(val){var i18n="";switch(val){case"Strongly Disagree":i18n="app.cogs.minipulse.poll-result.strongly-disagree";break;case"Disagree":i18n="app.cogs.minipulse.poll-result.disagree";break;case"Neither Agree nor Disagree":i18n="app.cogs.minipulse.poll-result.neither-agree-nor-disagree";break;case"Agree":i18n="app.cogs.minipulse.poll-result.agree";break;case"Strongly Agree":i18n="app.cogs.minipulse.poll-result.strongly-agree";break;case"Highly Satisfied":i18n="app.cogs.minipulse.poll-result.highy-satisfied";break;case"Satisfied":i18n="app.cogs.minipulse.poll-result.satisfied";break;case"Neither Satisfied nor Disatisfied":i18n="app.cogs.minipulse.poll-result.neither-satisfied-nor-disatisfied";break;case"Dissatisfied":i18n="app.cogs.minipulse.poll-result.dissatisfied";break;case"Highly Dissatisfied":i18n="app.cogs.minipulse.poll-result.highly-dissatisfied";break}return i18n},showLoading:function(){},hideLoading:function(){if(!this.isLoading){return false}this.loading_mark.hide()},responsivelySetWidth:function(){this.windowWidth=window.innerWidth;if(this.pollType===3){this.renderChart3()}if("i18next"in window){this.$el.localize()}},debug:function(msg,data){if(!DEFAULTS.debug)return;if(msg&&data){console.log("cogs/minipulse/components/poll-result-likertScale -> "+msg,data)}else{console.log("cogs/minipulse/components/poll-result-likertScale -> "+msg)}},renderChart:function(){},renderChart0:function(){var self=this;self.$el.find("div.chart.c3").html("");var answers=this.poll.answers,chartCols=[],totalVotes=0,customLegend_enabler=true;for(var index in answers){if(answers[index].count>0){var col=[];col[0]=answers[index].textvalue;col[1]=answers[index].count;totalVotes=totalVotes+col[1];chartCols.push(col)}}chartCols.sort(function(obj1,obj2){var count1=obj1[1];var count2=obj2[1];return count2-count1});var chartWidth=self.newSize<self.largeCardWidth?self.newSize*self.chartWidthPercent:self.largeCardWidth*self.chartWidthPercent;var init_width=(self.$el.width()*.65-10)*.7;var chart=c3.generate({bindto:self.$chart,size:{height:init_width,width:init_width},data:{columns:chartCols,type:"donut"},color:{pattern:["#ff5050","#fdd600","#8cd211","#5aaafa","#d7aaff","#9e9494","#dfe9e9","#3c4646","#008571","#41d6c3","#00b4a0"]},donut:{label:{show:false}},legend:{show:false},zoom:{enabled:false},tooltip:{contents:function(d,defaultTitleFormat,defaultValueFormat,color){var fontColor="#000000";if(color(d[0].id)==="#008571"||color(d[0].id)==="#3c4646"){fontColor="#ffffff"}var p=parseFloat(d[0].ratio*100).toFixed(2);var percent=parseFloat(d[0].ratio*100).toFixed(0)+"%";if(p>0&&p<1){percent="<1%"}var category=d[0].id;if("i18next"in window){var translatedCategory=i18next.t(self.getI18nTranslation(d[0].id));if(translatedCategory&&translatedCategory!==self.getI18nTranslation(d[0].id)){category=translatedCategory}}var content="<table class='c3-tooltip'><tbody>"+"<tr style='display:none;'>"+"<th>category</th>"+"<th>percent</th>"+"</tr>"+"<tr>"+"<td style='color:#3C4646;vertical-align:middle;'>"+category+"</td>"+"<td style='background-color:"+color(d[0].id)+";font-size:16px;color:"+fontColor+";align-content:center;vertical-align:middle;'>"+percent+"</td>"+"</tr>"+"</tbody></table>";return content},position:function(data,width,height,thisElement){var mouse=d3.mouse(thisElement);var tooltipLeft=this.width/2+mouse[0];var tooltipTop=this.height/2+mouse[1]+20;var totalVoteNumberObj=self.$el.find("text.c3-chart-arcs-title");var totalVoteNumber_left=totalVoteNumberObj.position().left;if(navigator.userAgent.indexOf("Firefox")){tooltipLeft=this.width/2;if(mouse[1]>0){tooltipTop=tooltipTop-100}}else{if(tooltipLeft>totalVoteNumber_left){tooltipLeft=tooltipLeft-100}}return{top:tooltipTop,left:tooltipLeft}}},onrendered:function(){self.hideLoading.call(self)}});var label=d3.select(self.$el.find(".c3-chart-arcs-title")[0]);label.html("");label.insert("tspan").text(format(totalVotes)).attr("dy",0).attr("x",0).attr("font-weight","300").attr("font-size","36px").attr("fill","#3c4646");label.insert("tspan").text("votes").attr("dy",40).attr("x",0).attr("font-weight","300").attr("font-size","18px").attr("fill","#7d7373").attr("data-i18n","app.cogs.minipulse.poll-result.votes");function format(number){var num=(number||0).toString(),result="";while(num.length>3){result=","+num.slice(-3)+result;num=num.slice(0,num.length-3)}if(num){result=num+result}return result}function generateCustomLegend(){var $result_legend=$('<ul class="legend"></ul>');_.forEach(_.sortBy(answers,"count").reverse(),function(obj){if(obj.count>0){var c3Width=self.$el.find("div.c3.chart").width();if(c3Width===100){c3Width=self.$el.width()}var descWidth=c3Width-30-120-30;var $key=$('<li class="single-li">'+'<div class="color-div">'+'<span class="caption color" style="background-color:'+chart.color(obj.textvalue)+'"></span>'+"</div>"+'<div class="key-div">'+'<span class="key caption">'+obj.textvalue+"</span>"+"</div>"+"</li>");var table="";if(totalVotes>0){var p=parseFloat(obj.count/totalVotes*100).toFixed(2);var percent=parseFloat(obj.count/totalVotes*100).toFixed(0)+"%";if(p>0&&p<1){percent="<1%"}table=percent}else{table="0%"}$key.append('<div class="percent-div"><span class="caption">'+table+"</span><div>");$key.bind({mouseenter:function(){chart.focus(obj.textvalue)},mouseleave:function(){chart.revert()},click:function(){var tag={ev:"click",action:"click on legend",section:"poll-result-singleSelect",module:"minipulse:large",name:"singleSelect",target:"none",group:"YourIBM"};self.metrics.tagEvent(tag);chart.toggle(obj.textvalue)}});$result_legend.append($key)}});return $result_legend}$(self.$chart).css({"max-height":""});if(customLegend_enabler){var legend=self.$el.find("ul.legend");if(legend.length>0){legend.remove()}self.$el.append(generateCustomLegend())}},renderChart1:function(){var self=this;self.$el.find("div.chart.c3").html("");var answers=this.poll.answers,chartCols=[],groupArr=[],totalVotes=0,customLegend_enabler=true;var filterAnswers=[];_.forEach(answers,function(obj){if(obj.count>0){filterAnswers.push(obj)}});var colSize=filterAnswers.length;for(var index in filterAnswers){var col=[];col[0]=filterAnswers[index].textvalue;groupArr.push(col[0]);for(var i=1;i<colSize+1;i++){if(i==1+parseInt(index)){col[i]=filterAnswers[index].count}else{col[i]=0}}totalVotes=totalVotes+filterAnswers[index].count;chartCols.push(col)}for(var j in chartCols){var cCol=chartCols[j];for(var x in cCol){if(x=="0"||cCol[x]=="0"){continue}cCol[x]=parseFloat(cCol[x]/totalVotes*100).toFixed(2)}}var title=this.poll.responses;if(self.$el.parents("div.back").length===1){self.newSize=self.$el.parents("div.back").width()}self.debug("cardSize: ",self.newSize);var chartWidth=self.newSize<self.largeCardWidth?self.newSize*self.chartWidthPercent:self.largeCardWidth*self.chartWidthPercent;var init_width=self.$el.width()*.65-10;var chart=c3.generate({bindto:self.$chart,size:{height:init_width*.5,width:init_width*.9},data:{columns:chartCols,type:"bar",groups:[groupArr]},color:{pattern:["#ff5050","#fdd600","#8cd211","#5aaafa","#d7aaff","#9e9494","#dfe9e9","#3c4646","#008571","#41d6c3","#00b4a0"]},legend:{show:false},axis:{x:{type:"categorized",show:true,tick:{outer:false,values:[],centered:true,fit:true}},y:{max:100,padding:{top:0},tick:{values:[0,25,50,75,100],outer:false,format:function(d){return d+"%"}}},y2:{show:true,max:100,tick:{outer:false,values:[],format:function(d1){return d1+"%"}},label:{text:"",position:"inner-top"}}},grid:{y:{show:true}},onrendered:function(){if(self.$el.find("svg").length===0)return;self.windowWidth=window.innerWidth;var totalVoteInfo="totalVoteInfo"+self.poll.id;var totalVoteInfoId="#"+totalVoteInfo;if(self.$el.find(totalVoteInfoId).length===1){self.$el.find(totalVoteInfoId).remove()}var padding_right=0;var svgWidth=self.$el.find("svg").width();var c3Width=self.$el.find("div.chart.c3").width();if(c3Width===100){c3Width=self.$el.width()}if(svgWidth===0){svgWidth=self.$el.find("svg").attr("width")}if(self.newSize<self.largeCardWidth){padding_right=(c3Width-svgWidth)/2+20;self.debug("c3Width:"+c3Width+",  svgWidth:"+svgWidth+",  padding_right:"+padding_right)}else{padding_right=24;self.debug("padding_right:"+padding_right)}var div="<div id='"+totalVoteInfo+"'>"+"<span id='totalVoteNumber"+self.poll.id+"'>"+title+"</span>"+"&nbsp;"+"<span "+self.translation_votes+" id='votes"+self.poll.id+"'>votes</span>"+"</div>";self.$el.find("div[id^=totalVoteInfo]").remove();self.$el.find("svg").before(div);self.$el.find(totalVoteInfoId).css({"padding-right":padding_right+"px","text-align":"right"});self.$el.find("#totalVoteNumber"+self.poll.id).css({"font-weight":"300","font-size":"20px"});self.$el.find("#votes"+self.poll.id).css({"font-weight":"300","font-size":"12px"});self.hideLoading.call(self)},tooltip:{contents:function(d,defaultTitleFormat,defaultValueFormat,color){var dName,dValue;_.forEach(d,function(obj){if(obj.value>0){dName=obj.name;dValue=obj.value}});var fontColor="#000000";if(this.color(dName)==="#008571"||this.color(dName)==="#3c4646"){fontColor="#ffffff"}var width=self.newSize*.3;var p=parseFloat(dValue).toFixed(2);var percent=parseFloat(dValue).toFixed(0)+"%";if(p>0&&p<1){percent="<1%"}return"<table class='c3-tooltip'><tbody>"+"<tr>"+"<td style='width:"+width+"px;word-wrap:break-word;color:#3C4646;align-content:center;vertical-align:middle;'>"+dName+"</td>"+"<td style='width=40px;background-color:"+this.color(dName)+";font-size:16px;color:"+fontColor+";align-content:center;vertical-align:middle;'>"+percent+"</td>"+"</tr>"+"</tbody></table>"}}});var chartSvg=self.$el.find("svg");chartSvg.css({"padding-top":"0px"});self.$el.find(".chart").css({});self.$el.find(".c3-axis-y2-label").attr("transform","rotate(0)");self.$el.find(".c3-axis-y2-label").removeAttr("transform");function generateCustomLegend(){var $result_legend=$('<ul class="legend"></ul>');_.forEach(answers,function(obj){if(obj.count>0){var c3Width=self.$el.find("div.c3.chart").width();if(c3Width===100){c3Width=self.$el.width()}var descWidth=c3Width-30-120-30;var $key=$('<li class="single-li">'+'<div class="color-div">'+'<span class="caption color" style="background-color:'+chart.color(obj.textvalue)+'"></span>'+"</div>"+'<div class="key-div">'+'<span class="key caption">'+obj.textvalue+"</span>"+"</div>"+"</li>");var table="";if(totalVotes>0){var p=parseFloat(obj.count/totalVotes*100).toFixed(2);var percent=parseFloat(obj.count/totalVotes*100).toFixed(0)+"%";if(p>0&&p<1){percent="<1%"}table=percent}else{table="0%"}$key.append('<div class="percent-div"><span class="caption">'+table+"</span><div>");$key.bind({mouseenter:function(){chart.focus(obj.textvalue)},mouseleave:function(){chart.revert()},click:function(){var tag={ev:"click",action:"click on legend",section:"poll-result-multipleSelect",module:"minipulse:large",name:"multipleSelect",target:"none",group:"YourIBM"};self.metrics.tagEvent(tag);chart.toggle(obj.textvalue)}});$result_legend.append($key)}});return $result_legend}var ticks=self.$el.find(".c3-axis-y.tick line");ticks.remove();var barRect=self.$el.find(".c3-event-rect");barRect.css({cursor:"pointer"});$(self.$chart).css({"max-height":""});if(customLegend_enabler){var legend=self.$el.find("ul.legend");if(legend.length>0){legend.remove()}self.$el.append(generateCustomLegend())}},renderChart3:function(){var self=this;self.$el.find("div.chart.c3").html("");var labels=w3n.cogs.minipulse.views.base.createLikertLabels(this.poll.scaletype);var grps=_.pluck(_.sortBy(labels,function(item){return-item.value}),"text");var totalVotes=this.poll.responses;var answers=this.poll.answers;var cols=[];var cats=[];var questions="<br><p style='line-height:150%;'>";var index=0;for(var m=0;m<answers.length;m++){if(answers[m].id===this.poll.otheranswerid&&!this.poll.otherfield)continue;index=index+1;cats.push("Q"+index);questions=questions+"<b>Q"+index+"</b>: "+answers[m].textvalue+"<br>"}questions=questions+"</p>";if(!self.questionLoaded){var label=self.$el.parents(".poll-content").find(".desc.poll-question");label.html(label.html()+questions);self.questionLoaded=true}for(var j=0;j<grps.length;j++){var column=[];column.push(grps[j]);for(var k=0;k<answers.length;k++){if(answers[k].id===this.poll.otheranswerid&&!this.poll.otherfield)continue;var count=0;for(var n=0;n<answers[k].ranks.length;n++){count=count+answers[k].ranks[n]}column.push(parseFloat(answers[k].ranks[grps.length-1-j]/count).toFixed(4))}cols.push(column)}if(self.$el.parents("div.back").length===1){self.newSize=self.$el.parents("div.back").width()}self.debug("cardSize: ",self.newSize);var chartWidth=self.newSize<self.largeCardWidth?self.newSize*self.chartWidthPercent:self.largeCardWidth*self.chartWidthPercent;var init_width=self.$el.width()*.58-10;var colors=["#ff5050","#fdd600","#dfe9e9","#41d6c3","#00b4a0"];var vote_rank="Vote Rank";if("i18next"in window){var translatedVoteRank=i18next.t("app.cogs.minipulse.poll-result.vote-rank");if(translatedVoteRank&&translatedVoteRank!=="app.cogs.minipulse.poll-result.vote-rank"){vote_rank=translatedVoteRank}}var chart=c3.generate({bindto:self.$chart,size:{width:init_width,height:answers.length*(25+20)+20},data:{columns:cols,type:"bar",groups:[grps],order:null},color:{pattern:colors},legend:{show:false},axis:{rotated:true,x:{label:{text:"Questions",position:"outer-top"},type:"category",categories:cats},y:{padding:{top:13,bottom:0},min:0,max:1,label:{text:vote_rank,position:"outer-middle"},tick:{values:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],format:function(d){if(d>1){return""}else{return d*100+"%"}}}}},grid:{y:{show:true,lines:[{value:0}]}},bar:{width:25},tooltip:{grouped:false,contents:function(d,defaultTitleFormat,defaultValueFormat,color){var p=parseFloat(d[0].value*100).toFixed(2);var percent=parseFloat(d[0].value*100).toFixed(0)+"%";if(p>0&&p<1){percent="<1%"}var category=d[0].name;if("i18next"in window){var translatedCategory=i18next.t(self.getI18nTranslation(d[0].name));if(translatedCategory&&translatedCategory!==self.getI18nTranslation(d[0].name)){category=translatedCategory}}return"<table class='c3-tooltip'><tbody>"+"<tr style='display:none;'>"+"<th>category</th>"+"<th>percent</th>"+"</tr>"+"<tr>"+"<td style='font-weight:300;font-size:12px;color:#3c4646;align-content:center;vertical-align:middle;'>"+category+"</td>"+"<td style='background-color:"+this.color(d[0].name)+";font-weight:300;font-size:16px;color:#000000;align-content:center;vertical-align:middle;'>"+percent+"</td>"+"</tr>"+"</tbody></table>"}},onrendered:function(){if(self.$el.find("svg").length===0)return;var totalVoteInfo="totalVoteInfo"+self.poll.id;var totalVoteInfoId="#"+totalVoteInfo;if(self.$el.find(totalVoteInfoId).length===1){self.$el.find(totalVoteInfoId).remove()}var padding_right=0;if(self.newSize<self.largeCardWidth){var c3Width=self.$el.find("div.c3.chart").width();var svgWidth=self.$el.find("svg").width();if(c3Width===100){c3Width=self.$el.width()}if(svgWidth===0){svgWidth=self.$el.find("svg").attr("width")}if(navigator.userAgent.indexOf("Firefox")){padding_right=(c3Width-svgWidth)/2+45}else{padding_right=(c3Width-svgWidth)/2+45}self.debug("c3Width:"+c3Width+",  svgWidth:"+svgWidth+",  padding_right:"+padding_right)}else{padding_right=30;self.debug("padding_right: ",padding_right)}var div="<div id='"+totalVoteInfo+"'><span id='totalVoteNumber"+self.poll.id+"'>"+totalVotes+"</span>&nbsp;<span "+self.translation_votes+" id='votes"+self.poll.id+"'>votes</span></div>";self.$el.find("svg").before(div);self.$el.find(totalVoteInfoId).css({"padding-right":padding_right+"px","text-align":"right"});self.$el.find("#totalVoteNumber"+self.poll.id).css({"font-weight":"300","font-size":"20px"});self.$el.find("#votes"+self.poll.id).css({"font-weight":"300","font-size":"12px",color:"#9e9494"});self.$el.find("g.c3-axis.c3-axis-x tspan").css({display:"block","font-weight":"300","font-size":"15px",color:"#3c4646","line-height":"14px"});self.$el.find("g.c3-axis.c3-axis-y tspan").css({"font-weight":"300","font-size":"12px",color:"#9e9494"});self.$el.find("text.c3-axis-x-label").css({display:"block","font-weight":"300","font-size":"12px",color:"#9e9494"});self.$el.find("text.c3-axis-y-label").css({"font-weight":"300","font-size":"12px",color:"#9e9494"});var lines=self.$el.find("line.c3-ygrid");for(var s=lines.length;s>11;s--){lines.eq(s-1).remove()}var ticks=self.$el.find("g.c3-axis.c3-axis-y").find("g.tick");for(var t=ticks.length;t>11;t--){ticks.eq(t-1).remove()}self.hideLoading.call(self)}});function generateCustomLegend(){var $result_legend=$('<ul class="legend"></ul>');_.forEach(cols,function(obj){var $key,$percentage;$key=$('<li class="likert-li"><p><span class="caption color" style="background-color:'+chart.color(obj[0])+'"></span><span class="key caption" data-i18n="'+self.getI18nTranslation(obj[0])+'">'+obj[0]+"</span></p></li>");$percentage=$('<p class="percentage"></p>');_.forEach(_.drop(obj),function(item,key){var str="";if(item===0||isNaN(item)){str="<span>Q"+(key+1)+" (0%)</span>"}else if(parseFloat(item*100)>0&&parseFloat(item*100)<1){str="<span>Q"+(key+1)+" (<1%)</span>"}else{str="<span>Q"+(key+1)+" ("+parseFloat(item*100).toFixed(0)+"%)</span>"}$percentage.append(str)});$key=$key.append($percentage);$key.bind({mouseenter:function(){chart.focus(obj[0])},mouseleave:function(){chart.revert()},click:function(){var tag={ev:"click",action:"click on legend",section:"poll-result-likertScale",module:"minipulse:large",name:"likertScale",target:"none",group:"YourIBM"};self.metrics.tagEvent(tag);chart.toggle(obj[0])}});$result_legend.append($key)});return $result_legend}$(self.$chart).css({"max-height":""});var legend=self.$el.find("ul.legend");if(legend.length>0){legend.remove()}self.$el.append(generateCustomLegend())},renderChart2:function(){var self=this;var $html=$(Mustache.render(w3n.templates.cogs.minipulse["poll-result-rankOrder.html"],this.poll));this.$el.html($html[0].innerHTML);self.createPopupInstance();var orderResult=self.$el.find(".order-result");var answers=this.poll.answers;var totalVotes=0;_.forEach(answers,function(obj){var ranks=obj.ranks;var barWidth=0,index=0,len=ranks.length;_.forEach(ranks,function(rank){barWidth=barWidth+rank*(len-index);index++});obj.barWidth=barWidth;totalVotes=totalVotes+obj.barWidth});var index=0;var colorArr=["#ff5050","#fdd600","#8cd211","#5aaafa","#d7aaff","#9e9494","#dfe9e9","#6D6363","#008571","#41d6c3","#00b4a0"];_.forEach(_.sortBy(answers,"barWidth").reverse(),function(obj){var $progressDiv=$('<div class="order-item">'+'<div class="block"></div>'+'<span class="answer"></span>'+'<div class="progress">'+'<div class="progress-bar" id="'+obj.textvalue+obj.id+'" role="progressbar" aria-label="table of contents" aria-valuemax="100" aria-valuemin="0" aria-valuenow="0"></div>'+"</div>"+"</div>");$progressDiv.find(".block").html(index+1);$progressDiv.find("span").html(obj.textvalue);var barWidth=parseFloat(obj.barWidth/totalVotes*100+7).toFixed(1)+"%";$progressDiv.find(".block").css({"background-color":colorArr[index]});$progressDiv.find(".progress-bar").css({"background-color":colorArr[index],width:barWidth});orderResult.append($progressDiv);var tooltipHtml=self.tooltipTitle($progressDiv,$progressDiv.parents('[data-component="titled-card"]'),obj.textvalue,obj.ranks,$progressDiv.find(".progress-bar").css("background-color"));var result_tooltip=self.generateDropdown({trigger:$progressDiv.find(".block"),evt:"mouseenter",evt_target:$progressDiv.find(".block"),width:370,height:250,has_wrap:false,direction:"left",background_color:"#ffffff"});result_tooltip.setContent(tooltipHtml);if(window.navigator.userAgent.indexOf("Chrome")!==-1){$progressDiv.find(".block").off("mouseenter").on("mouseenter",function(event){event.preventDefault();result_tooltip.emptyContent();result_tooltip.setContent(tooltipHtml);result_tooltip.playAnimation()})}$progressDiv.find(".block").off("mouseleave").on("mouseleave",function(event){setTimeout(function(){if(result_tooltip.$el.is(":visible")){result_tooltip.hide()}},350)});index++});self.hideLoading.call(self)},tooltipTitle:function(target,parent,textvalue,ranks,color){var totalRank=0;_.forEach(ranks,function(obj){totalRank=totalRank+obj});var chartCol=[];chartCol[0]=textvalue;var index=1;_.forEach(ranks,function(obj){chartCol[index]=parseFloat(obj/totalRank*100).toFixed(2);
index++});var $tooltipDiv=$('<div class="tooltip-div" style="width:330px; height:210px;"></div>');var $votesDiv=$('<div class="tooltip-votes" style="text-align: right; margin-top:15px;"><span class="tooltip-text" style="display:block; font-weight:300;font-size: 16px;line-height: 14px;margin-bottom:5px;"></span><span class="tooltip-desc" style="font-weight:300;font-size: 10px;">Percent of each rank to be voted</span></div>');$votesDiv.find(".tooltip-text").html(_.trunc(textvalue,{length:40,separator:" "}));var $tooltipChart=$('<div class="chart" style="height:150px;margin-left:10px;"></div>');$tooltipDiv.append($votesDiv).append($tooltipChart);setTimeout(function(){var tooltipChart=c3.generate({bindto:$tooltipChart[0],color:{pattern:[color]},data:{columns:[chartCol],type:"bar",labels:{format:function(v,id,i,j){if(parseFloat(v).toFixed(2)>0&&parseFloat(v).toFixed(2)<1){return"<1"}else if(parseFloat(v).toFixed(2)===0){return"0"}else{return parseFloat(v).toFixed(0)}},color:"#ffffff"}},legend:{show:false},axis:{x:{type:"categorized",tick:{outer:false,centered:true,format:function(d){return d+1}}},y:{show:false,max:100,tick:{values:[],outer:false}},y2:{show:false,max:100,tick:{outer:false,values:[]},label:{text:"",position:"inner-top"}}},bar:{width:10},onrendered:function(){var texts=$tooltipChart.find(".c3-chart-texts .c3-chart-text .c3-texts .c3-text");texts.css({"font-weight":"300","font-size":"10px"});for(var index=0;index<texts.length;index++){texts.eq(index)[0].style.fill=""}texts.append("%")},tooltip:{show:false}});$tooltipChart.find(".c3-axis-x .tick line").remove();$tooltipChart.find(".c3-axis-x .tick text tspan").css({"font-weight":"300","font-size":"12px"})},600);return $tooltipDiv[0]},createPopupInstance:function(){return new w3n.components.popup({mode:"tooltip",width:370,height:250})},calculatePosition:function(event,$parent){var top=event.clientY;var left=event.clientX;var rightBound=$parent.offset().left+$parent.width();var bottomBound=$parent.offset().top+$parent.height();if(top+300>730){top=top-250}if(left+400>rightBound){left=left-770}else{left=left-410}return{top:top,left:left}},generateDropdown:function(params){var dropdown=new app.components.dropdown(params);dropdown.render();return dropdown},tagEvent:function(params){this.metrics.tagEvent(params)}})})();(function(){var view_name="status_updates";w3n.cogs[view_name].views.base=app.base.views.BaseView.extend({renderOnSync:false,no_data:'<p class="caption">There is no status update for you.</p>',events:{"click button[data-primitive=login]":"basicAuthRequest"},login_btn_html:'<button data-primitive="login" type="button" class="flip-1">Login Connections</button>',initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.options=options;if(options.collection){this.services={status:{get:this.collection.getSubStructure("list"),post:this.collection.getSubStructure("postStatus"),like:this.collection.getSubStructure("toggleLikeStatus")},comment:{get:this.collection.getSubStructure("comments"),like:this.collection.getSubStructure("toggleLikeComment"),edit:this.collection.getSubStructure("manageComment")}};this.listenTo(this.collection,"base-auth manual-base-auth",this.showLoginButton);this.listenTo(this.collection,"manual-login-mode",this.showManualLogin);this.listenTo(this.services.status.get,"sync fetch-done",this.render);this.listenTo(this.services.status.get,"error",this.errorLoading);this.listenTo(this.services.status.get,"reset",this.resetItemsView);this.clone_collection=this.services.status.get.clone();this.listenTo(this.clone_collection,"sync",this.syncToCollection);this.listenTo(this.clone_collection,"error",this.errorHandler);this.listenTo(this.clone_collection,"change-api-done",this.hideLoading);this.listenTo(this.clone_collection,"change-api",this.showLoading);this.collection.stopListening(this.services.status.post,"error");this.listenTo(this.services.status.post,"sync fetch-new-data",this.fetchNewData);this.listenTo(this.services.status.post,"error",this.errorHandlerWithLoading);this.listenTo(this.services.status.post,"posting-start",this.showLoading)}this.on("has-data",this.showMorebtn);this.on("no-data",this.hideMorebtn);this.on("input-focus input-blur",this.triggerFeedsSlide);w3n.cogs[view_name].utils.organizeI18n(this)},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.defineElements();this.renderSubViews();this.setAriaLabel();this.$el.find("> .card").data("i18n-options",{size:this.type});if("i18next"in window)this.$el.localize();if(this.type==="medium"){this.options.pf.handleLargeViewAvailable(function(is_flippable){if(is_flippable){this.$el.find(".cta-btn").fadeIn("fast");this.$el.find(".status-updates-feed").removeClass("-is-autoHeight");this.$el.find(".status-updates-feed .icon-awf-comment ").show()}else{this.$el.find(".cta-btn").fadeOut("fast");this.$el.find(".status-updates-feed").addClass("-is-autoHeight");this.$el.find(".status-updates-feed .icon-awf-comment ").hide()}}.bind(this))}return this},setLoader:function(){this.$el.append(this.loadingTemplate)},defineElements:function(){this.wrap_post=this.$el.find(".status-updates-input");this.wrap_list=this.$el.find(".feed-wrap");this.wrap_items=this.$el.find(".items-list");this.login_btn=this.$el.find("button[data-primitive=login]");this.wrap_feeds=this.$el.find(".status-updates-feed");this.more_btn=this.$el.find("div[data-primitive=view_all] a");this.more_btn_wrap=this.$el.find(".more-area")},renderSubViews:function(){this.renderPostView();this.renderListView();this.renderListItemsView();if(!_.isEmpty(this.$el.find(".loading-mark"))){this.hideLoading()}},setAriaLabel:function(){},renderPostView:function(){this.post_view=new w3n.cogs[view_name].views.post({el:this.wrap_post,model:this.services.status.post,type:this.type,card:this});this.post_view.render()},renderListView:function(){if(this.list_view)this.list_view.remove();this.list_view=new w3n.cogs[view_name].views.list({list:this.clone_collection,type:this.type,card:this});this.list_view.render();this.wrap_list.prepend(this.list_view.el)},resetItemsView:function(){this.renderListItemsView();this.clone_collection.trigger("reset")},renderListItemsView:function(){this.login_btn.hide();this.wrap_items.empty();if(this.services.status.get.length){this.services.status.get.each(function(model,i){if(i<this.items_limit){model.set("aria_label","Status updates item "+i+" on "+this.type);this.createItemView(model)}}.bind(this));this.trigger("has-data")}else{if(w3n.utils.hasI18nTag(this.i18n_ns.i18n_no_data_msg)){this.wrap_items.append('<p class="caption">'+i18next.t(this.i18n_ns.i18n_no_data_msg)+"</p>")}else{this.wrap_items.append(this.no_data)}this.trigger("no-data")}},syncToCollection:function(){this.services.status.get.reset(this.clone_collection.toJSON())},createItemView:function(item){var item_view=new w3n.cogs[view_name].views[this.type+"_item"]({model:item,services:this.services,pf:this.options.pf,card:this,notLocalize:true});this.wrap_items.append(item_view.el);item_view.render()},fetchNewData:function(){if(this.list_view.$el.find(".feeds-selector span").html()==="All"){var self=this;this.clone_collection.fetch().always(function(){self.hideLoading()})}else{this.hideLoading()}},showLoading:function(){this.showHideLoading("show")},hideLoading:function(){this.showHideLoading("hide")},createLoading:function(){this.setLoader()},showHideLoading:function(action,params){action=action||"hide";if(_.isEmpty(this.$el.find(".loading-mark"))){this.createLoading()}this.$el.find(".loading-mark")[action]()},errorHandlerWithLoading:function(err){this.hideLoading();this.errorHandler(err)},errorHandler:function(err){var status;if("i18next"in window){if(err.message){status=err.message}else if(w3n.utils.hasI18nTag(this.i18n_ns["i18n_"+err.status])){status=i18next.t(this.i18n_ns["i18n_"+err.status],{card:"Status Updates"})}else if(w3n.utils.hasI18nTag(this.i18n_ns.i18n_100)){status=i18next.t(this.i18n_ns.i18n_100,{card:"Status Updates"})}}else{status=err.message||w3n.connections.message[err.status]||w3n.connections.message[100]}this.options.pf.postMessage("error",_.template(status)({card:"Status Updates"}),false).andDismissIn(3)},errorLoading:function(err){if(!w3n.connections.authentication.enable_backup){if(err.status===404||err.status===500||err.status===0){if(w3n.login_mode!=="manual-basic-auth"){w3n.connections.authentication.enable_backup=true;this.showLoginButton()}}else if(err.status!==undefined){err.not_hide=true}err.message=w3n.utils.hasI18nTag(this.i18n_ns.i18n_error_msg)?i18next.t(this.i18n_ns.i18n_error_msg):"Opps, Status card failed to load data.";this.errorHandler(err)}else{this.services.status.get.trigger("fail-completely")}},showLoginButton:function(html){if(!this.login_btn){this.$el.html(this.login_btn_html);this.login_btn=this.$el.find("button[data-primitive=login]");if(html){this.login_btn.html(html);this.login_btn.attr("data-i18n",this.i18n_ns["i18n_"+_.snakeCase(html)])}else{this.login_btn.attr("data-i18n",this.i18n_ns.i18n_login_connections)}}this.login_btn.show()},showManualLogin:function(){this.showLoginButton("Connect to Connections")},basicAuthRequest:function(){this.showLoading();if(w3n.connections.user_id||this.collection.manual_login_mode){this.services.status.get.fetch().fail(function(err){this.services.status.get.trigger("error",err)}.bind(this))}else{w3n.connections.authentication.addCallback(this.services.status.get.fetch.bind(this));w3n.connections.authentication.requestAuth()}},triggerFeedsSlide:function(action){this.wrap_feeds[action+"Class"]("large-slide")},showMorebtn:function(){this.services.status.get.no_data=false;this.more_btn_wrap.show()},hideMorebtn:function(){this.services.status.get.no_data=true;this.more_btn_wrap.hide()},remove:function(){app.base.views.BaseView.prototype.remove.apply(this,arguments);this.trigger("destroy");return this}});w3n.cogs[view_name].views.item_base=app.base.views.BaseView.extend({template:_.template(w3n.templates.cogs["status-updates"]["item-view.html"]),initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.utils=w3n.cogs.status_updates.utils;this.options=options;_.extend(this,_.pick(options,"services"));this.metrics=app.utils.createMetricTag({group:awf.app.id||w3n.cogs[view_name].appId,module:"status:item"});this.listenTo(this.model,"change:like_count",this.renderLike);this.listenTo(this.model,"change:total_comments",this.renderComment);if(options.card){this.listenTo(options.card,"destroy",this.remove)}w3n.cogs[view_name].utils.organizeI18n(this)},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);if(this.defineElements)this.defineElements();if(this.addProfileImg)this.addProfileImg();if(this.manageDescription)this.manageDescription();if(this.addSocialActions)this.addSocialActions();if(this.setAriaLabel)this.setAriaLabel();this.$el.delegate(".feed-content span[data-primitive=description] a","click",{section:"status-feed",action:"link"},this.metrics.linkEvent);return this},addProfileImg:function(){var data=this.model.toJSON();data.section=this.section+":profile";this.profile=new w3n.components.profile_img(data);this.wrap_profile.append(this.profile.render().el)},setAriaLabel:function(){this.$el.attr("aria-label",this.model.get("aria_label"))}})})();(function(){var view_name="status_updates";w3n.cogs[view_name].views.comments=app.base.views.BaseView.extend({renderOnSync:false,el:'<div class="comments" role="region"></div>',template:_.template(w3n.templates.cogs["status-updates"]["comments-view.html"]),loading_html:app.templates.components["loading-mark"]["loading-mark.html"],events:{"click a.delete":"deleteComment","click a.cancel":"cancelComment","focus textarea":"inputFocus","blur textarea":"inputBlur","keyup textarea":"checkKeyup"},error_html:'<div class="message-bar error" style="display:block;"><i data-primitive="icon icon-awf-op-times-circle-fill"></i> <span data-primitive="content">There was an error connecting to server. Please try again.</span></div>',initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.options=options;this.metrics=app.utils.createMetricTag({group:awf.app.id||w3n.cogs[view_name].appId,module:"status:comments"});_.extend(this,_.pick(options,"services"));if(options.entry){this.icon_comment=options.entry.social_actions.$comment}this.collection=this.services.comment.get.clone();this.listenTo(this.collection,"sync",this.setCommentItems);this.listenTo(this.collection,"error",this.hideLoading);this.listenTo(this.collection,"add",this.addItem);w3n.cogs[view_name].utils.organizeI18n(this)},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.defineElements();this.addProfileImg();this.addForm();this.setAriaLabel();this.$el.delegate(".item-img a","click",{section:"comment-feed",action:"link",name:"small-profile-image"},this.metrics.linkEvent);this.$el.delegate(".comments-wrap .feed-content a","click",{section:"comment-feed",action:"link"},this.metrics.linkEvent);return this},defineElements:function(){this.profile_wrap=this.$el.find(".form-content");this.form_wrap=this.$el.find(".item-content");this.list_wrap=this.$el.find(".comments-wrap");this.confirm_wrap=this.$el.find(".confirm-content")},setAriaLabel:function(){this.$el.attr("aria-label","Comments of "+this.model.get("aria_label"))},createLoading:function(){this.$el.append(this.loading_html)},showHideLoading:function(action,params){action=action||"hide";if(_.isEmpty(this.$el.find(".loading-mark"))){this.createLoading()}this.$el.find(".loading-mark")[action]()},showLoading:function(){this.showHideLoading("show")},hideLoading:function(){this.showHideLoading("hide")},addProfileImg:function(){this.profile=new w3n.components.profile_img({user_id:w3n.connections.user_id,name:w3n.connections.user_name,profile_size:40});this.profile.$el.addClass("item-img");this.profile_wrap.prepend(this.profile.render().el)},addForm:function(){this.comment_form=new w3n.base.components.old_form_single_enter({overall:{$wrap:this.form_wrap},elements:[{type:"textarea",label:w3n.utils.hasI18nTag(this.i18n_ns.i18n_add_comment)?i18next.t(this.i18n_ns.i18n_add_comment):"Add comment...",limition:1e3,func:this.saveComment.bind(this)}]});this.comment_form.render();this.textarea=this.comment_form.dynamic_primitives[(w3n.utils.hasI18nTag(this.i18n_ns.i18n_add_comment)?_.snakeCase(i18next.t(this.i18n_ns.i18n_add_comment)):"add_comment")+this.comment_form.getIndex()];if(w3n.utils.hasI18nTag(this.i18n_ns.i18n_add_comment)){this.textarea.$ele.find("label").attr("data-i18n",this.i18n_ns.i18n_add_comment);this.textarea.$ele.find("label").data("i18n-options",{value:1e3})}},inputFocus:function(){this.form_wrap.find(".fg-line").addClass("fg-toggled")},inputBlur:function(){if(this.textarea.$input.val()===""){this.form_wrap.find(".fg-line").removeClass("fg-toggled")}},checkKeyup:function(){var node=this.textarea.$label;var value=this.textarea.$input.val();if(this.textarea.$input.val().trim()!==""){if(w3n.utils.hasI18nTag(this.i18n_ns.i18n_add_comment)){this.textarea.$ele.find("label").attr("data-i18n",this.i18n_ns.i18n_adding_comment);node.html(i18next.t(this.i18n_ns.i18n_adding_comment,{value:1e3-value.length}));this.textarea.$ele.find("label").data("i18n-options",{value:1e3-value.length})}else{node.html("Add comment... ("+(1e3-value.length)+" characters left)")}}else{if(w3n.utils.hasI18nTag(this.i18n_ns.i18n_add_comment)){this.textarea.$ele.find("label").attr("data-i18n",this.i18n_ns.i18n_add_comment);node.html(i18next.t(this.i18n_ns.i18n_add_comment));this.textarea.$ele.find("label").data("i18n-options",{value:1e3})}else{node.html("Add comment...")}}},saveComment:function(event){if(event.keyCode===13&&!event.shiftKey){event.preventDefault()}if(!this.comment_form.hasError()&&this.textarea.$input.val()!==""&&event.keyCode===13&&!event.shiftKey){this.showLoading();var comment={content:this.textarea.$input.val().replace(/&/g,"&amp;amp;amp;")};this.services.comment.edit.save({data:JSON.stringify(comment),entryID:this.options.entry_id}).done(this.addCommentSuccess.bind(this)).fail(this.addCommentFail.bind(this));this.metrics.tagEvent({ev:"click",action:"button",name:"Save comment",target:"none",section:"comment-feed"})}},addCommentSuccess:function(comment){this.list_wrap.find(".temp-li").remove();this.hideLoading();this.creatItem(comment);this.comment_form.resetForm();this.textarea.$input.focus();this.list_wrap.show();this.list_wrap.scrollTop(this.list_wrap.height());this.model.set("total_comments",parseInt(this.model.get("total_comments"))+1);if("i18next"in window)this.$el.localize()},addCommentFail:function(me){this.hideLoading();this.form_wrap.append(this.error_html);setTimeout(function(){this.form_wrap.find(".message-bar").remove();this.comment_form.resetForm();this.textarea.$input.focus();if("i18next"in window)this.$el.localize()}.bind(this),3e3)},closeCommenting:function(event,entry){this.icon_comment.removeClass("active");this.$el.slideUp(200);this.$el.removeClass("comment-down");setTimeout(function(){this.clearComments()}.bind(this),300)},openCommenting:function(event,entry){this.icon_comment.addClass("active");if(this.model.toJSON().total_comments!==0){this.showMoreComments()}this.$el.slideDown(500);this.$el.addClass("comment-down")},toggleCommentForm:function(event){this.metrics.tagEvent({ev:"click",action:"button",name:"Comment",target:"none",section:"status-feed"});if(this.$el.hasClass("comment-down")){this.closeCommenting(event)}else{this.openCommenting(event)}},checkFlipdown:function(){if(this.$el.hasClass("comment-down")){this.closeCommenting()}},showMoreComments:function(){this.showHideLoading("show");this.collection.fetch({entryID:this.options.entry_id}).done(this.setCommentItems.bind(this))},clearComments:function(){this.list_wrap.empty();this.list_wrap.append('<li class="temp-li" role="listitem">comments list</li>')},setCommentItems:function(){this.list_wrap.empty();this.list_wrap.show();if(this.collection.length){this.collection.each(function(model,i){this.addItem(model)}.bind(this))}this.hideLoading()},creatItem:function(comment){var new_comment={id:comment.entry.id,user_id:w3n.connections.user_id,user_name:w3n.connections.user_name,updated:"just now",full_date:+new Date,content:comment.entry.content,like_action:"Like",is_new:true};this.collection.add(new_comment)},addItem:function(model,prepend){var item=new w3n.cogs[view_name].views.comment_item({services:this.services,model:model,comments_view:this,notLocalize:true});item.render();this.list_wrap[!model.toJSON().is_new?"prepend":"append"](item.el);item.$el.fadeIn(500)},confirmToDelete:function(view,event){this.metrics.tagEvent({ev:"click",action:"button",name:"Want to delete a comment",target:"none",section:"comment-feed"});if(this.confirm_wrap.hasClass("comment-in")){if(this.current_deleting!==event.target){view.$el.siblings().removeClass("deleting");view.$el.addClass("deleting");this.confirm_wrap.find("a.delete").attr("rel",pickId(view.model.toJSON().id));this.confirm_wrap.find("a.delete").data("comment",view);this.current_deleting=event.target;this.metrics.tagEvent({ev:"click",action:"button",name:"Confirm to delete a comment",target:"none",section:"comment-feed"})}else{this.cancelComment(event);view.$el.removeClass("deleting");this.confirm_wrap.find("a.delete").attr("rel","");this.confirm_wrap.find("a.delete").data("comment",null)}}else{view.$el.addClass("deleting");this.confirm_wrap.css("visibility","visible");this.confirm_wrap.css("left","0px");this.confirm_wrap.addClass("comment-in");this.confirm_wrap.find("a.delete").attr("rel",pickId(view.model.toJSON().id));this.confirm_wrap.find("a.delete").data("comment",view);this.current_deleting=event.target;this.metrics.tagEvent({ev:"click",action:"button",name:"Confirm to delete a comment",target:"none",section:"comment-feed"})}},cancelComment:function(event){this.confirm_wrap.css("left","600px");this.confirm_wrap.removeClass("comment-in");setTimeout(function(){this.confirm_wrap.css("visibility","hidden")}.bind(this),600);if(event){this.metrics.tagEvent({ev:"click",action:"button",name:"Cancel to delete a comment",target:"none",section:"comment-feed"})}},deleteComment:function(event){this.showLoading();this.services.comment.edit.destroy({commentID:event.target.rel,entryID:this.options.entry_id}).done(this.deleteCommentSuccess.bind(this)).fail(this.deleteCommentFail.bind(this));if(event){this.metrics.tagEvent({ev:"click",action:"button",name:"Delete a comment",target:"none",section:"comment-feed"})}},deleteCommentSuccess:function(context){this.hideLoading();var view=this.confirm_wrap.find("a.delete").data("comment");view.$el.slideUp(300);setTimeout(function(){view.remove()},300);this.model.set("total_comments",parseInt(this.model.get("total_comments"))-1);if(this.model.get("total_comments")===0){this.list_wrap.hide()}this.cancelComment();this.confirm_wrap.find("a.delete").attr("rel","");this.confirm_wrap.find("a.delete").data("comment",null)},deleteCommentFail:function(context){this.hideLoading();this.confirm_wrap.find("a.delete").attr("rel","");this.confirm_wrap.find("a.delete").data("comment",null);this.confirm_wrap.find(".confirm-text").hide();this.form_wrap.append(this.error_html);setTimeout(function(){this.confirm_wrap.find(".confirm-text").show();this.confirm_wrap.find(".message-bar").remove();this.cancelComment()}.bind(this),3e3)}});var pickId=function(id){var new_id=null;new_id=id.substring(id.lastIndexOf(":")+1);return new_id}})();(function(){var view_name="status_updates";w3n.cogs[view_name].views.medium_item=w3n.cogs[view_name].views.item_base.extend({events:{"click .more-description":"showHideMoreDescription"},el:'<article role="article" data-component="status-updates-item"></article>',omit_count:120,show_more:_.template('<button class="more-description slide-on" title="show more info" href="javascript:;" data-i18n="[title]{{i18n_more}};{{i18n_more}}">Show More</button>'),section:"status:medium:item",render:function(){w3n.cogs[view_name].views.item_base.prototype.render.apply(this,arguments);this.checkAlts();this.$el.delegate("h3 a","click",{section:"status-feed",action:"link",name:"profile"},this.metrics.linkEvent);if("i18next"in window){this.$el.attr("data-i18n","[aria-label]"+this.i18n_ns.i18n_aria_lable_item);this.$el.data("i18n-options",{name:this.model.toJSON().name,size:this.options.card.type,entry_id:this.model.toJSON().entry_id});this.poster_name.data("i18n-options",{name:this.model.toJSON().name});awf.i18n.on("apply:language",this.updateDate.bind(this));this.updateDate();this.$el.localize()}return this},updateDate:function(lc){this.update_date.html(moment(this.model.get("full_date")).fromNow())},defineElements:function(){this.wrap_social=this.$el.find(".js-status-item-feed-content");this.wrap_profile=this.$el.find(".js-status-item-img");this.description=this.$el.find(".js-status-item-description");this.content=this.$el.find(".js-status-item-content");this.poster_name=this.$el.find(".js-status-item-content > h3 a");this.update_date=this.$el.find(".js-status-item-content > time")},manageDescription:function(){this.original_description=this.model.toJSON().event_title;if(this.utils.isMoreThanOmitCount(this.original_description,this.omit_count)){this.omit_description=this.utils.truncHTML(this.original_description,this.omit_count);this.description.empty();this.description.append(this.omit_description);this.description.after(this.show_more(this.model.toJSON()))}},showHideMoreDescription:function(event){var target=$(event.currentTarget);var status=target.html();if("i18next"in window&&status.toLowerCase()===i18next.t(this.i18n_ns.i18n_more).toLowerCase()||status.toLowerCase()==="show more"){this.description.empty();this.description.append(this.original_description);target.attr("data-i18n","[title]"+this.i18n_ns.i18n_less+";"+this.i18n_ns.i18n_less);if("i18next"in window){target.localize()}else{target.attr("title","Show Less");target.html("Show Less")}target.removeClass("slide-on").addClass("slide-off");this.metrics.tagEvent({ev:"click",action:"toggle",name:"Show more",target:"none",section:"status-feed"})}else{this.description.empty();this.description.append(this.omit_description);target.attr("data-i18n","[title]"+this.i18n_ns.i18n_more+";"+this.i18n_ns.i18n_more);if("i18next"in window){target.localize()}else{target.attr("title","Show More");target.html("Show More")}target.removeClass("slide-off").addClass("slide-on");this.metrics.tagEvent({ev:"click",action:"toggle",name:"Show less",target:"none",section:"status-feed"})}},checkAlts:function(){var imgs=this.$el.find(".feed-content img");_.forEach(imgs,function(img){if($(img).attr("src").indexOf("Repost16.png")>-1){$(img).attr("data-i18n","[alt]"+this.i18n_ns.i18n_repost_icon);if("i18next"in window){$(img).localize()}else{$(img).attr("alt","Repost icon image")}}}.bind(this))},addSocialActions:function(){var data=this.model.toJSON();this.social_actions=new app.components.socialActions({items:[{icon:"heart",title:w3n.utils.hasI18nTag(this.i18n_ns["i18n_"+data.like_html.toLowerCase()])?i18next.t(this.i18n_ns["i18n_"+data.like_html.toLowerCase()]):data.like_html,i18n_label:w3n.utils.hasI18nTag(this.i18n_ns["i18n_"+data.like_html.toLowerCase()])?this.i18n_ns["i18n_"+data.like_html.toLowerCase()]:null,evt:"click",text:data.like_count,callback:this.likeCallback.bind(this)},{icon:"comment",title:w3n.utils.hasI18nTag(this.i18n_ns.i18n_comment)?i18next.t(this.i18n_ns.i18n_comment):"Comment",i18n_label:w3n.utils.hasI18nTag(this.i18n_ns.i18n_comment)?this.i18n_ns.i18n_comment:null,evt:"click",text:data.total_comments,callback:this.commentCallback.bind(this)}]});this.social_actions.render();this.social_actions.$el.attr("entryid",data.like_url.substr(data.like_url.indexOf(".note:")+6,36));if(data.like_html=="Unlike"){this.social_actions.$el.find(".icon-awf-heart").addClass("active")}this.social_actions.$like=this.social_actions.$el.find(".icon-awf-heart");this.social_actions.$like.attr("data-i18n","[title]"+this.i18n_ns["i18n_"+data.like_html.toLowerCase()]);this.social_actions.$comment=this.social_actions.$el.find(".icon-awf-comment");this.social_actions.$comment.attr("data-i18n","[title]"+this.i18n_ns.i18n_comment);this.content.append(this.social_actions.$el)},likeCallback:function(event){var icon=$(event.currentTarget);var loading=icon.children().hasClass("fa-spin");if(!loading){if(icon.find("a").hasClass("active")){this.unlike(icon)}else{this.like(icon)}this.utils.setLoadingIcon(icon)}},like:function(html){this.metrics.tagEvent({ev:"click",action:"button",name:"like",target:"none",section:"status-feed"});var self=this;var data=this.model.toJSON();this.services.status.like.save({entryID:this.social_actions.$el.attr("entryid"),userid:w3n.connections.user_id}).done(function(){self.social_actions.$like.attr("title","Unlike");self.social_actions.$like.removeClass("icon-awf-rotate-right icon-awf-spin").addClass("icon-awf-heart");self.model.set("like_html","Unlike");self.model.set("like_count",parseInt(self.model.get("like_count"))+1)}).fail(function(){self.resetIcon(self.social_actions.$like)})},unlike:function(html){this.metrics.tagEvent({ev:"click",action:"button",name:"unlike",target:"none",section:"status-feed"});var data=this.model.toJSON();var self=this;this.services.status.like.destroy({entryID:this.social_actions.$el.attr("entryid"),userid:w3n.connections.user_id}).done(function(){self.social_actions.$like.attr("title","Like");self.social_actions.$like.removeClass("icon-awf-rotate-right icon-awf-spin").addClass("icon-awf-heart");self.model.set("like_html","Like");self.model.set("like_count",parseInt(self.model.get("like_count"))-1)}).fail(function(){self.resetIcon(self.social_actions.$like)})},renderLike:function(){var li=this.social_actions.$like.parent();li.find(">span").html(this.model.get("like_count"));this.social_actions.$like.attr("data-i18n","[title]"+this.i18n_ns["i18n_"+this.model.get("like_html").toLowerCase()]);if("i18next"in window){this.social_actions.$like.localize()}this.utils.toggleIconActive(li)},resetIcon:function(li){var icon=li.find("i");icon.parent().toggleClass("active");icon.replaceWith('<i class="icon-awf-heart"></i>')},renderComment:function(){var li=this.social_actions.$comment.parent();li.find("> span").html(this.model.get("total_comments"))},commentCallback:function(event){this.metrics.tagEvent({ev:"click",action:"button",name:"Comment",target:"none",section:"status-feed"});this.model.set("auto_show",true);this.options.pf.flipCard()}});w3n.cogs[view_name].views.large_item=w3n.cogs[view_name].views.medium_item.extend({el:'<article role="article" data-component="status-updates-large-item"></article>',template:_.template(w3n.templates.cogs["status-updates"]["large-item-view.html"]),omit_count:500,section:"status:large:item",initialize:function(){w3n.cogs[view_name].views.item_base.prototype.initialize.apply(this,arguments);this.listenTo(this.model,"change:auto_show",this.autoShow)},render:function(){w3n.cogs[view_name].views.medium_item.prototype.render.apply(this,arguments);this.checkAlts();if(this.autoShow)this.autoShow();this.$el.find(".feed-title a").on("click",{section:"status-feed",action:"link",name:"profile"},this.metrics.linkEvent);return this},manageDescription:function(){this.original_description=this.model.toJSON().content;if(this.utils.isMoreThanOmitCount(this.original_description,this.omit_count)){this.omit_description=this.utils.truncHTML(this.original_description,this.omit_count);this.description.empty();this.description.append(this.omit_description);this.description.after(this.show_more(this.model.toJSON()))}},checkAlts:function(){var imgs=this.$el.find(".feed-title img");_.forEach(imgs,function(img){if($(img).attr("src").indexOf("Repost16.png")>-1){$(img).attr("data-i18n","[alt]"+this.i18n_ns.i18n_repost_icon);if("i18next"in window){$(img).localize()}else{$(img).attr("alt","Repost icon image")}}}.bind(this))},addComment:function(){this.comment=new w3n.cogs[view_name].views.comments({services:this.services,model:this.model,entry_id:this.social_actions.$el.attr("entryid"),pf:this.options.pf,entry:this});this.comment.render();this.wrap_social.after(this.comment.el)},commentCallback:function(event){if(!this.comment){this.addComment()}this.comment.toggleCommentForm(event)},autoShow:function(){setTimeout(function(){if(this.model.get("auto_show")){this.social_actions.$comment[0].click();this.model.set("auto_show",false);this.$el.closest(".status-updates-feed").scrollTop(this.$el.position().top)}}.bind(this),1e3)}});w3n.cogs[view_name].views.comment_item=w3n.cogs[view_name].views.medium_item.extend({el:'<li role="listitem"></li>',template:_.template(w3n.templates.cogs["status-updates"]["comment-item-view.html"]),events:{"click a.close":"confirmToDelete","click a.like":"likeOrUnlikeComment"},error_html:'<p class="msg_error"><i class="icon-awf-alert-circle"></i> There was an error connecting to server. Please try again.</p>',section:"status:comment:item",initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.utils=w3n.cogs.status_updates.utils;this.options=options;this.metrics=app.utils.createMetricTag({group:awf.app.id||w3n.cogs[view_name].appId,module:"status:item"});_.extend(this,_.pick(options,"services"));this.listenTo(this.model,"change:like_count",this.renderLike);this.listenTo(this.model,"change:like_action",this.renderLikeHtml);if(options.comments_view){options.comments_view.listenTo(this,"confirm-to-delete",options.comments_view.confirmToDelete)}w3n.cogs[view_name].utils.organizeI18n(this)},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);var data=this.model.toJSON();var userid=this.model.toJSON().user_id;if(userid==w3n.connections.user_id){this.$el.addClass("owner")}if(this.defineElements)this.defineElements();if(this.addProfileImg)this.addProfileImg();this.poster_name.data("i18n-options",{name:this.model.toJSON().user_name
});var like_tag=this.i18n_ns["i18n_"+this.model.get("like_action").toLowerCase()];this.like_btn.attr("data-i18n","[title]"+like_tag+";"+like_tag);awf.i18n.on("apply:language",this.updateDate.bind(this));this.updateDate();if("i18next"in window)this.$el.localize();return this},updateDate:function(lc){this.update_date.html(moment(this.model.get("full_date")).fromNow())},defineElements:function(){this.like_btn=this.$el.find(".js-status-comment-item-like");this.close_btn=this.$el.find(".js-status-comment-item-close");this.poster_name=this.$el.find(".js-status-comment-item-feed-content > a");this.update_date=this.$el.find(".js-status-comment-item-time")},confirmToDelete:function(event){this.trigger("confirm-to-delete",this,event)},likeOrUnlikeComment:function(){var status=this.model.get("like_action").toLowerCase();var method=status==="like"?"save":"destroy";this.services.comment.like[method]({userid:w3n.connections.user_id,commentID:this.model.get("id")}).done(this.likeOrUnlikeCommentSuccess.bind(this)).fail(this.likeOrUnlikeCommentFail.bind(this));this.like_btn.hide();this.like_btn.after('<div class="loading"><i class="icon-awf-rotate-right icon-awf-spin"></i></div>');this.metrics.tagEvent({ev:"click",action:"button",name:status+" comment",target:"none",section:"comment-feed"})},likeOrUnlikeCommentSuccess:function(context){this.like_btn.parent().find(".loading").remove();this.like_btn.show();this.model.set("like_action",this.model.get("like_action").toLowerCase()=="like"?"Unlike":"Like")},likeOrUnlikeCommentFail:function(context){this.like_btn.parent().find(".loading").remove();this.like_btn.parent().append(this.error_html);setTimeout(function(){this.like_btn.parent().find(".msg_error").remove();this.like_btn.show()}.bind(this),3e3)},renderLikeHtml:function(){var like_tag=this.i18n_ns["i18n_"+this.model.get("like_action").toLowerCase()];this.like_btn.attr("data-i18n","[title]"+like_tag+";"+like_tag);if("i18next"in window){this.$el.localize()}else{this.like_btn.html(this.model.get("like_action"));this.like_btn.attr("title",this.model.get("like_action"))}},addProfileImg:function(){this.profile=new w3n.components.profile_img({user_id:this.model.get("user_id"),name:this.model.get("user_name"),profile_size:40,class:"item-img",section:"status:comment:item"});this.$el.find(".item-content").prepend(this.profile.render().el)}})})();(function(){w3n.cogs.status_updates.views.large=w3n.cogs.status_updates.views.base.extend({type:"large",items_limit:50,events:_.extend(w3n.cogs.status_updates.views.base.prototype.events,{"click .cta-btn button":"viewMoreUpdates"}),template:_.template(w3n.templates.cogs["status-updates"]["large-view.html"]),render:function(){w3n.cogs.status_updates.views.base.prototype.render.apply(this,arguments);return this},viewMoreUpdates:function(event){var params={action:"Link",name:"View more updated",section:"view-more",target:"//w3-connections.ibm.com"};this.addMetricsTag(event,params);window.open("//w3-connections.ibm.com")},addMetricsTag:function(event,params){event.data=event.data||{};params=params||{};event.data=_.extend(event.data,params);this.options.metrics.linkEvent.bind(event.currentTarget)(event)}})})();(function(){var prev_selected_group="All";var current_selected_group=prev_selected_group;var module="status:medium";var view_name="status_updates";w3n.cogs[view_name].views.list=app.base.views.BaseView.extend({renderOnSync:false,el:'<ul data-primitive="feed_buttons" class="feed-buttons"></ul>',template:_.template(w3n.templates.cogs["status-updates"]["list-view.html"]),filters:{all:"getAll",myNetwork:"getMyNetwork",peopleIFollow:"get People I Follow",allCommunities:"getCommunities"},initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.options=options;_.extend(this,_.pick(options,"list"));this.listenTo(this.list,"sync",this.changeDone);this.listenTo(this.list,"error",this.changeFail);this.listenTo(this.list,"reset",this.renderSync);if(options.card){this.listenTo(options.card,"destroy",this.remove)}this.list_category=["all","network","follow","communities"];w3n.cogs[view_name].utils.organizeI18n(this)},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.default_group=prev_selected_group;this.defineElements();this.addDropdown();this.renderSync();return this},defineElements:function(){this.selecter=this.$el.find(".feeds-selector");this.group=this.$el.find(".feeds-selector span");this.mentions=this.$el.find(".mentions-btn")},addDropdown:function(){this.dropdown=new app.components.dropdown({trigger:this.selecter.find("i"),evt:"click",evt_target:this.selecter,width:200,has_wrap:false,direction:"top",background_color:"#ffffff",module:module,name:"Status update view",section:"filter:trigger",card:"status_updates"});this.dropdown.render();dropdown_options={};if(w3n.utils.hasI18nTag(this.i18n_ns.i18n_all)){dropdown_options[this.i18n_ns.i18n_all]={i18n_label:i18next.t(this.i18n_ns.i18n_all),key:"All"}}else{dropdown_options[this.i18n_ns.i18n_all]={i18n_label:"All",key:"All"}}if(w3n.utils.hasI18nTag(this.i18n_ns.i18n_network)){dropdown_options[this.i18n_ns.i18n_network]={i18n_label:i18next.t(this.i18n_ns.i18n_network),key:"My Network"}}else{dropdown_options[this.i18n_ns.i18n_network]={i18n_label:"My network",key:"My Network"}}if(w3n.utils.hasI18nTag(this.i18n_ns.i18n_follow)){dropdown_options[this.i18n_ns.i18n_follow]={i18n_label:i18next.t(this.i18n_ns.i18n_follow),key:"People I follow"}}else{dropdown_options[this.i18n_ns.i18n_follow]={i18n_label:"People I follow",key:"People I follow"}}if(w3n.utils.hasI18nTag(this.i18n_ns.i18n_communities)){dropdown_options[this.i18n_ns.i18n_communities]={i18n_label:i18next.t(this.i18n_ns.i18n_communities),key:"All communities"}}else{dropdown_options[this.i18n_ns.i18n_communities]={i18n_label:"All communities",key:"All communities"}}var listOptions=new app.components.dropdownOptions({id:this.dropdown.id,i18n:"i18next"in window?dropdown_options:false,options:{All:"All","All communities":"All communities","People I follow":"People I follow","My network":"My network"}});this.dropdown.setContent(listOptions.render().el);listOptions.$el.on("click",this.selectFeedGroup.bind(this));if(this.options.type==="large"){var self=this;this.options.card.$el.on("click",function(event){if(!$.contains(self.selecter.find("i")[0],event.target)&&self.selecter.find("i")[0]!=event.target){setTimeout(function(){self.dropdown.hide()},100)}})}},selectFeedGroup:function(event){event.preventDefault();if($(event.target).is("a")){current_selected_group=$(event.target).data("i18nkey");var group=this.filters[_.camelCase(current_selected_group)];this.list.trigger("change-api",this);this.list.fetch({api:group})}},renderSync:function(){if(this.default_group!=current_selected_group){this.group.html(current_selected_group);this.setI18nAttr(current_selected_group);this.default_group=current_selected_group}},changeDone:function(resp){this.default_group=current_selected_group;this.group.html(current_selected_group);this.setI18nAttr(current_selected_group);this.list.trigger("change-api-done",this)},changeFail:function(resp){current_selected_group=this.default_group;this.list.trigger("change-api-fail",this)},setI18nAttr:function(curr_cate){_.forEach(this.list_category,function(cate){var match=curr_cate.toLowerCase().indexOf(cate.toLowerCase());if(match===0&&curr_cate.length===cate.length||match>-1){this.group.attr("data-i18n",this.i18n_ns["i18n_"+cate])}}.bind(this));if("i18next"in window)this.$el.localize()}})})();(function(){w3n.cogs.status_updates.views.medium=w3n.cogs.status_updates.views.base.extend({type:"medium",items_limit:5,events:_.extend(w3n.cogs.status_updates.views.base.prototype.events,{"click .cta-btn button":"flipCard"}),template:_.template(w3n.templates.cogs["status-updates"]["medium-view.html"]),flipCard:function(){this.options.pf.flipCard()}})})();(function(){var module="status:medium";var view_name="status_updates";w3n.cogs[view_name].views.post=app.base.views.BaseView.extend({renderOnSync:false,charLimit:1e3,template:_.template(w3n.templates.cogs["status-updates"]["post-view.html"]),events:{"focus textarea":"inputFocus","blur textarea":"inputBlur","keyup textarea":"checkKeyup","click a":"clearFoldInput","click button":"postTo"},initialize:function(options){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.options=options;this.metrics=app.utils.createMetricTag({group:awf.app.id||w3n.cogs[view_name].appId,module:"status:post"});this.stopListening(this.model,"error");this.listenTo(this.model,"sync",this.postDone);this.listenTo(this.model,"error",this.postFail);if(options.card){this.listenTo(options.card,"destroy",this.remove)}w3n.cogs[view_name].utils.organizeI18n(this)},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.defineElements();this.checkConfig();this.addDropdown();this.setAriaLable();if(this.options.type==="large"){this.buttons.prepend('<div class="attachment">Attachement</div>');this.target.wrap('<div class="post-to-wrap" />')}return this},defineElements:function(){this.textarea=this.$el.find("textarea");this.label=this.$el.find("label.access");this.target=this.$el.find("a");this.button=this.$el.find("button");this.buttons=this.$el.find(".input-buttons");this.counter=this.$el.find(".counter-wrap")},setAriaLable:function(){var name="status_updates_textarea_"+this.options.type;this.label.attr("for",name);this.label.attr("id","label_"+name);this.textarea.attr("id",name)},addDropdown:function(){if(this.options.type==="medium"){this.dropdown=new app.components.dropdown({trigger:this.target.find("i"),evt:"click",evt_target:this.target,width:280,has_wrap:true,reference:this.$el,direction:"top",background_color:"#ffffff",module:module,name:"Post to",section:"selection:trigger",card:"status_updates"})}else{this.dropdown=new app.components.dropdown({trigger:this.target.find("i"),evt:"click",evt_target:this.target,width:293,no_wrap_reference_elem:this.target,direction:"top",background_color:"#ffffff",module:module,responsive_for_dropdown:true,flipcard:this.options.card.options.pf.flipcard||null,name:"Post to",section:"selection:trigger",card:"status_updates"});var self=this;this.options.card.$el.on("click",function(event){if(!$.contains(self.target[0],event.target)&&self.target[0]!=event.target&&self.target.find("i")[0]!=event.target){setTimeout(function(){self.dropdown.hide()},100)}})}var dropdown_options={};if(w3n.utils.hasI18nTag(this.i18n_ns.i18n_everyone)){dropdown_options[this.i18n_ns.i18n_everyone]={i18n_label:i18next.t(this.i18n_ns.i18n_everyone),key:"everyone"}}else{dropdown_options[this.i18n_ns.i18n_everyone]={i18n_label:"Everyone",key:"everyone"}}if(w3n.utils.hasI18nTag(this.i18n_ns.i18n_community)){dropdown_options[this.i18n_ns.i18n_community]={i18n_label:i18next.t(this.i18n_ns.i18n_community),key:"everyone"}}else{dropdown_options[this.i18n_ns.i18n_community]={i18n_label:"A community (Coming soon)",key:"A community (Coming soon)"}}if(w3n.utils.hasI18nTag(this.i18n_ns.i18n_person)){dropdown_options[this.i18n_ns.i18n_person]={i18n_label:i18next.t(this.i18n_ns.i18n_person),key:"A person's profile (Coming soon)"}}else{dropdown_options[this.i18n_ns.i18n_person]={i18n_label:"A person's profile (Coming soon)",key:"A person's profile (Coming soon)"}}var postOptions=new app.components.dropdownOptions({id:this.dropdown.id,i18n:"i18next"in window?dropdown_options:false,options:{Everyone:"Everyone","A community (Coming soon)":"A community (Coming soon)","A person's profile (Coming soon)":"A person's profile (Coming soon)"}});this.dropdown.render();this.dropdown.setContent(postOptions.render().el);postOptions.disabledOptions(["A community (Coming soon)","A person's profile (Coming soon)"]);postOptions.$el.on("click",this.selectPostType.bind(this))},checkConfig:function(){if(awf.flags.isActive("cogs.status-updates.post")){this.$el.show()}else{this.$el.hide()}},inputFocus:function(event){this.clearFoldInput();setTimeout(function(){this.textarea.attr("placeholder","");this.textarea.addClass("slide");this.buttons.addClass("slide");this.options.card.trigger("input-focus","add")}.bind(this),300);this.metrics.tagEvent({ev:"click",action:"focus",name:"Focus to Status update input field",section:"textarea",target:"none"})},inputBlur:function(event){this.clearFoldInput();if(!hasValue(this.textarea)){this.fold_input=setTimeout(function(){this.textarea.removeClass("slide");this.buttons.removeClass("slide");this.options.card.trigger("input-blur","remove")}.bind(this),2e3)}if("i18next"in window){this.textarea.localize()}else{this.textarea.attr("placeholder","What are you working on?")}},checkKeyup:function(event){var node=event.target;var currLeft=checkTextarea(node,this.charLimit,this.textError.bind(this),this.textNormal.bind(this));if(currLeft<=50){this.counter.show();this.counter.find("span").html("Remaining character count "+currLeft)}else{this.counter.show();this.counter.find("span").html("")}if(currLeft<0){this.textarea.addClass("error")}else{this.textarea.removeClass("error")}},clearFoldInput:function(event){if(this.fold_input){clearTimeout(this.fold_input)}},postTo:function(event){event.preventDefault();this.clearFoldInput();if(hasValue(this.textarea)){this.textError();var setData={content:this.textarea.val(),actor:{id:"@me"},verb:"post"};this.model.trigger("posting-start",this);this.model.save({data:JSON.stringify(setData)});this.metrics.tagEvent({ev:"click",action:"post",name:"Post Status update",section:"button",target:"none"})}},selectPostType:function(event){},textError:function(button){this.button.attr("disabled",true)},textNormal:function(button){this.button.attr("disabled",false)},postDone:function(resp){this.reset()},postFail:function(err){this.reset()},reset:function(){this.textarea.val("");this.textNormal();this.trigger("post-end",this)}});function hasValue(input){return _.trim(input.val())!==""}function checkTextarea(node,charNum,errorFun,correctFun){var left=setCharCount(node,charNum);if(left<0){if(errorFun){errorFun()}}else{if(correctFun){correctFun()}}return left}function setCharCount(node,charNum){var lth=node.value.length;var left=charNum-lth;return left}})();(function(){var yourTeam=app.base.views.BaseView.extend({el:".talent-table tbody",template:w3n.templates.cogs.talentplaybook["dash-item-yourteam.html"],render:function(options){options=options||{};app.base.views.BaseView.prototype.render.call(this,arguments,options.append);if(this.model.attributes.allNotices){this.model.attributes.allNotices.forEach(function(notice,index){var view=new w3n.cogs.dashboard.views.AlertDetail({model:notice});view.render({append:index>0})})}}});var alertDetail=app.base.views.BaseView.extend({el:".alert-data-cell",template:w3n.templates.cogs.talentplaybook["tpb-alerts-new.html"],render:function(options){options=options||{};app.base.views.BaseView.prototype.render.call(this,arguments,options.append)}});w3n.cogs.dashboard.views.YourTeam=yourTeam;w3n.cogs.dashboard.views.AlertDetail=alertDetail})();(function(){var sortByKey=function(array,key){return array.sort(function(a,b){var x=b[key];var y=a[key];return x<y?-1:x>y?1:0})};var Spreadsheet=app.base.views.BaseView.extend({className:"csv-holder",template:_.template(w3n.templates.cogs.talentplaybook.dashboards["download-spreadsheet.html"]),events:{"click .csv-button":"setCSV"},initialize:function(options){options=options||{};_.extend(this,options);if(!this.collection){this.collection=new w3n.cogs.talentplaybook.models.DownloadSpreadsheet({main:options.main,compositeModel:options.compositeModel,dashboardProperties:this.dashboardProperties})}},render:function(options){this.$el.html(this.template(this.dashboardProperties));return this},setCSV:function(options){if(!options.currDashboardName){options.currDashboardName=this.dashboardProperties.dashName}if(options.currDashboardName){this.collection.fetch(options).done(function(data){this.generateCSV(data,options)}.bind(this))}return this},generateCSV:function(CSVOutput,options){var newList=sortByKey(CSVOutput,this.sortByKey||"Talent_Playbook_Category_1");var filename=(this.filenamePrefix||"MH-Dashboard-")+options.currDashboardName;var message=this.message||"IBM CONFIDENTIAL";w3n.utils.JSONToCSVConvertor(CSVOutput,filename,true,message)},errorNotification:function(err){this.trigger("service-error",err)},enableDownloadButton:function(){this.$el.show();this.$el.find(".csv-button").removeClass("off")}});w3n.cogs.dashboard.views.Spreadsheet=Spreadsheet})();(function(){var alertsDetail=app.base.views.BaseView.extend({template:w3n.templates.cogs.talentplaybook["tpb-alerts-new.html"],initialize:function(options){options=options||{};this.parentItem=options.parentItem;this.dashboardProperties=options.dashboardProperties},events:{"click .mark-as-read":"markReadUnreadButton","click .mark-as-unread":"markReadUnreadButton"},render:function(options){options=options||{};app.base.views.BaseView.prototype.render.call(this,arguments)},markReadUnreadButton:function(e){var alertHolder=$(e.target).closest(".alert-holder");var noticeId=$(e.target).closest(".alert-holder").data("noticeid");var categoryId=$(e.target).closest(".alert-holder").data("categoryid");var currCnum=$(e.target).closest(".alert-section-row").data("currcnum");var isRead=true;if(alertHolder.hasClass("read")){isRead=false}else{isRead=true}$(e.target).attr("disabled","disabled");alertHolder.find(".read-unread-loading").addClass("loading");this.parentItem.toggleReadUnread(isRead,currCnum,categoryId.toString(),noticeId,alertHolder)}});w3n.cogs.dashboard.views.AlertsDetail=alertsDetail})();(function(){var itemDetail=app.base.views.BaseView.extend({template:w3n.templates.cogs.talentplaybook.dashboards.items.details["expense-item-detail.html"],initialize:function(options){app.base.views.BaseView.prototype.initialize.call(this,arguments);options=options||{};this.parentItem=options.parentItem},events:{"click .wwer-row":"createWWER","click .ldv-row":"createLDV","click .cb-row":"createCB"},render:function(){if(this.model.attributes.wwer){_.forEach(this.model.attributes.wwer,function(value){value.hasAlerts=value&&this.checkExpenseAlerts(value)}.bind(this))}if(this.model.attributes.cb){this.model.attributes.cb.hasAlerts=this.checkExpenseAlerts(this.model.attributes.cb)}if(this.model.attributes.ldv){this.model.attributes.ldv.hasAlerts=this.checkExpenseAlerts(this.model.attributes.ldv)}w3n.cogs.dashboard.views.Item.prototype.render.call(this,arguments)},createWWER:function(e){var uid=$(e.target).closest("tr.talent-row").data("uid");var wwerId=$(e.target).closest("tr.wwer-row").data("id");var ExpensesModel=new w3n.serviceModels.ExpensesDashboard.wwerExpenses({reportId:wwerId});var ExceptionsModel=new w3n.serviceModels.ExpensesDashboard.wwerExceptions({reportId:wwerId});var WWERTemplate=w3n.templates.cogs.talentplaybook["report-wwer.html"];var data=_.find(this.model.attributes.wwer,{id:wwerId});var avatarPartial;var htmlContent;var compositeModel=w3n.cogs.talentplaybook.CompositeModel.extend({initialize:function(attrs,opts){w3n.cogs.talentplaybook.CompositeModel.prototype.initialize.call(this,arguments);this.addCollection("expenses",ExpensesModel,null,null,{});this.addCollection("exceptions",ExceptionsModel,null,null,{})}});var model=new compositeModel;var generateReport=function(){var exceptionsCol=model.subCollectionsMap.exceptions.models;avatarPartial=this.parentItem.avatar.$el.html();htmlContent=Mustache.render(WWERTemplate,{expenses:model.subCollectionsMap.expenses.models[0].attributes.data,total:model.subCollectionsMap.expenses.models[0].attributes.total,curr:model.subCollectionsMap.expenses.models[0].attributes.curr,exceptions:exceptionsCol,model:data,hasExceptions:exceptionsCol.length>=1&&_.keys(exceptionsCol[0].attributes).length>1},{avatarPartial:avatarPartial});var modal=new w3n.components.Report({parent:$(".talentplaybook-large"),content:htmlContent,reportData:model.subCollectionsMap.exceptions.toJSON(),report2Data:model.subCollectionsMap.expenses.models[0].attributes.data,className:"wwer-takeover-content",title:"Manage Team Topics"})}.bind(this);model.fetch().then(generateReport,generateReport)},createLDV:function(e){var date=$(e.target).data("id");var uid=$(e.target).closest("tr.talent-row").data("uid");var LDVModel=new w3n.serviceModels.ExpensesDashboard.ldv({date:date});var DLVTemplate=w3n.templates.cogs.talentplaybook["report-ldv.html"];var data=this.model.toJSON();var avatarPartial;var htmlContent;LDVModel.fetch().then(function(){var collection=[],reportData=[],total_amount=0;collection=this.filterExpensesByCNUM(LDVModel.models[0].attributes.data.data,uid);avatarPartial=this.parentItem.avatar.$el.html();_.forEach(collection,function(item){total_amount+=item.total});_.forEach(LDVModel.models[0].attributes.reportData,function(item){if(item.CNUM==uid){reportData.push(item)}});htmlContent=Mustache.render(DLVTemplate,{collection:collection,total:total_amount,curr:LDVModel.models[0].attributes.data.curr,month:LDVModel.models[0].attributes.data.month,year:LDVModel.models[0].attributes.data.year,model:data},{avatarPartial:avatarPartial});var modal=new w3n.components.Report({parent:$(".talentplaybook-large"),content:htmlContent,reportData:reportData,className:"ldv-takeover-content",title:"Manage Team Topics"})}.bind(this))},createCB:function(e){var date=$(e.target).data("id");var uid=$(e.target).closest("tr.talent-row").data("uid");var CBModel=new w3n.serviceModels.ExpensesDashboard.cb({date:date});var CBTemplate=w3n.templates.cogs.talentplaybook["report-cb.html"];var data=this.model.toJSON();var avatarPartial;var htmlContent;CBModel.fetch().then(function(){var collection=[],reportData=[],total_amount=0;collection=this.filterExpensesByCNUM(CBModel.models[0].attributes.data.data,uid);avatarPartial=this.parentItem.avatar.$el.html();w3n.superModel=CBModel;_.forEach(collection,function(item){total_amount+=item.total});_.forEach(CBModel.models[0].attributes.reportData,function(item){if(item.CNUM==uid){reportData.push(item)}});htmlContent=Mustache.render(CBTemplate,{collection:collection,total:total_amount,curr:CBModel.models[0].attributes.data.curr,month:CBModel.models[0].attributes.data.month,year:CBModel.models[0].attributes.data.year,model:data},{avatarPartial:avatarPartial});var modal=new w3n.components.Report({parent:$(".talentplaybook-large"),content:htmlContent,reportData:reportData,className:"cb-takeover-content",title:"Manage Team Topics"})}.bind(this))},filterExpensesByCNUM:function(expenses,cnum){var collection=[],uid="";collection=expenses;uid=cnum;if(collection.length>0){_.forEach(collection,function(item){var total=0;item.models=_.remove(item.models,function(expense){return expense.CNUM==uid});_.forEach(item.models,function(n){total+=parseFloat(n.AMOUNTPAID)});item.total=_.round(total,2)});_.remove(collection,function(item){return item.total===0})}return collection},checkExpenseAlerts:function(data){var hasAlerts=data.alerts>0?true:false;return hasAlerts}});w3n.cogs.dashboard.views.ExpenseItemDetail=itemDetail})();(function(){var item=w3n.cogs.dashboard.views.ItemBase.extend({render:function(options){this.model.attributes.hasReports=true;this.model.attributes.off="off";if(!this.model.attributes.hasWWER&&!this.model.attributes.hasCB&&!this.model.attributes.hasLDV){this.model.attributes.hasReports=false}w3n.cogs.dashboard.views.ItemBase.prototype.render.call(this,arguments)},events:{"click .expand-btn":"toggleAccordion"},renderDetails:function(){var detailView=new w3n.cogs.dashboard.views.ExpenseItemDetail({model:this.model,el:this.$el.find(".alert-detail#"+this.model.get("cnum")),parentItem:this});detailView.render()},toggleAccordion:function(e){e.preventDefault();var targetOpen="."+$(e.target).data("uid");var currCnumForToggle=$(e.target).closest(".talent-row").data("cnum");$(targetOpen+" .showhide").toggleClass("visible");$(targetOpen).toggleClass("showSubRow");$(targetOpen+" .expand-btn").toggleClass("icon-awf-op-plus").toggleClass("icon-awf-op-minus");var action=$(targetOpen).hasClass("showSubRow")?"Opened Accordion":"Closed Accordion";w3n.utils.metrics.tagCogEvent(action,action,"Dashboard",this.dashboardProperties.dashName,"Manager Hub","none")}});w3n.cogs.dashboard.views.ExpenseItem=item})();(function(){var item=w3n.cogs.dashboard.views.ItemBase.extend({noticeAttribute:"allNotices",events:{"click .expand-btn":"toggleAccordion","click .person-link .count-badge":"toggleAccordion","click .reports i":"switchManager"},initialize:function(options){w3n.cogs.dashboard.views.ItemBase.prototype.initialize.call(this,options);if(this.parent){this.parent.listenTo(this,"switch-manager",function(event){this.trigger("switch-manager-by-item",event)}.bind(this.parent))}this.dashboardProperties=options.dashboardProperties},render:function(options){options=options||{};if(_.isFunction(this.addAlertsToModel))this.addAlertsToModel();if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services-new-version")){this.noticeAttribute="allNotices"}else{this.noticeAttribute="notices"}this.model.attributes.dashboardProperties=this.dashboardProperties;this.model.attributes.displayedNotices=this.model.attributes[this.noticeAttribute];w3n.cogs.dashboard.views.ItemBase.prototype.render.call(this,arguments)},addAlertsToModel:function(){var tpAlertsSummary=this.parent.parent.tpAlertsSummary;if(tpAlertsSummary){this.model.attributes.alertCount=tpAlertsSummary.employeeTopicCount(this.model.attributes.id,this.dashboardProperties.dashName)||0;this.model.attributes.off=!isNaN(this.model.attributes.alertCount)&&this.model.attributes.alertCount>0?"on":"off"}else{this.model.attributes.off="off"}},renderDetails:function(){this.detailViews=[];this.model.attributes.displayedNotices=this.model.attributes[this.noticeAttribute];if(this.model.attributes.displayedNotices){var alertDetailView=w3n.cogs.dashboard.views.AlertsDetail;_.forEach(this.model.attributes.displayedNotices,function(notice){if(_.contains(this.dashboardProperties.categories,notice.categoryId)){var detailModel=new app.base.models.BaseModel(_.extend(notice,{isRead:notice.noticeType==="read"}));var detail=new alertDetailView({model:detailModel,el:this.$el.find(".alert-detail#"+detailModel.attributes.noticeId),parentItem:this,dashboardProperties:this.dashboardProperties});detail.render();this.detailViews.push(detail)}}.bind(this))}},updateBadge:function(){var tpAlertsSummary=this.parent.parent.tpAlertsSummary;var cnum=this.model.get("id");var topic=this.dashboardProperties.dashName;var count=tpAlertsSummary.employeeTopicCount(cnum,topic);var $badge=this.$el.find(".item-badge");if(!isNaN(count)&&count>0){this.model.set({alertCount:count});$badge.removeClass("off").text(count)}else{$badge.addClass("off")}},toggleAccordion:function(e){e.preventDefault();var targetOpen="."+$(e.target).data("uid");var currCnumForToggle=$(e.target).closest(".talent-row").data("cnum");$(targetOpen+" .showhide").toggleClass("visible");$(targetOpen).toggleClass("showSubRow");$(targetOpen+" .expand-btn").toggleClass("icon-awf-op-plus").toggleClass("icon-awf-op-minus");var action=$(targetOpen).hasClass("showSubRow")?"Opened Accordion":"Closed Accordion";if(action==="Opened Accordion"){this.markRead(targetOpen,currCnumForToggle)}w3n.utils.metrics.tagCogEvent(action,action,"Dashboard",this.dashboardProperties.dashName,"Manager Hub","none")},markRead:function(targetOpen,currCnumForToggle){if(awf.flags.isActive("cogs.talentplaybook.read-unread")){var noticeIdList="";var categoryIdList="";setTimeout(function(){$.each($(targetOpen+".alert-section-row .alert-holder"),function(){noticeIdList+=$(this).attr("data-noticeid").toString()+","});$.each($(targetOpen+".alert-section-row .alert-holder"),function(){categoryIdList+=$(this).attr("data-categoryId").toString()+","});noticeIdList=noticeIdList.slice(0,-1);categoryIdList=categoryIdList.slice(0,-1);this.toggleReadUnread(true,currCnumForToggle,categoryIdList,noticeIdList,$(targetOpen+".alert-section-row .alert-holder"))}.bind(this),250)}},toggleReadUnread:function(isRead,empCnum,categoryIdList,noticeId,alertHolder){if(isRead&&alertHolder.hasClass("unread")||!isRead&&alertHolder.hasClass("read")){categoryIdList=categoryIdList||"";var model=new w3n.serviceModels.isReadTPB({isRead:isRead,empCnum:empCnum,noticeId:noticeId});model.save().done(function(response){if(alertHolder){var newNoticeType;if(alertHolder.hasClass("neverRead")){newNoticeType="read";alertHolder.removeClass("neverRead").addClass(newNoticeType)}else if(isRead===true){newNoticeType="read";alertHolder.removeClass("unread");alertHolder.addClass(newNoticeType)}else{newNoticeType="unread";alertHolder.removeClass("read");alertHolder.addClass(newNoticeType)}alertHolder.find(".read-unread-loading").removeClass("loading");alertHolder.find("button").attr("disabled",false);var operation=isRead?"subtractOne":"addOne";_.forEach(categoryIdList.split(","),function(categoryId){this.parent.parent.tpAlertsSummary[operation](empCnum.toString(),categoryId);this.updateBadge();if(this.parent&&this.parent.parent&&this.parent.parent.headerView){this.parent.parent.headerView.updateBadge()}}.bind(this));this.parent.cacheNeedsUpdate=true}}.bind(this)).fail(function(error){console.log("ERROR Updated Read Status");console.log(error);console.log("---------------------------")})}},switchManager:function(e){this.trigger("switch-manager",e)}});w3n.cogs.dashboard.views.Item=item})();(function(){var main=w3n.cogs.dashboard.views.MainBase.extend({periodModels:[],templates:{error:'<p class="notification"> Oops, the Dashboard data services are currently not available. Please refresh and try later.</p>',nodata:'<p class="notification">You have no direct reports.</p>'},initialize:function(options){w3n.cogs.dashboard.views.MainBase.prototype.initialize.apply(this,arguments);options=options||{};this.monthYearList=this.setupMonthYearList();this.model.set({currentPeriod:options.currentPeriod});this.model.set({monthYearList:this.monthYearList})},events:{"click .month-year-holder":"toggleMonthYearList"},render:function(){w3n.cogs.dashboard.views.MainBase.prototype.render.call(this,arguments);if(!this.model.mergedSubCollection||!this.model.mergedSubCollection.models||this.model.mergedSubCollection.models.length<=0){this.$el.find(".talent-table").html(this.templates.nodata)}},renderError:function(){this.model.set({monthYearList:this.monthYearList});w3n.cogs.dashboard.views.MainBase.prototype.renderError.call(this,arguments)},setupMonthYearList:function(){var monthYearList=[];var monthYear=moment(new Date).startOf("month");while(monthYearList.length<24){var text=monthYear.format("MMMM YYYY");var value=monthYear.format("YYYYMM");monthYearList.push({text:text,value:value});monthYear=monthYear.subtract(1,"months");var compositeModel=new w3n.cogs.talentplaybook.models.Expenses({period:value});compositeModel.set("period",value);this.periodModels.push(compositeModel)}return monthYearList},toggleMonthYearList:function(e){var $el=this.$el.find(".month-year-list");$el.toggle(!$el.is(":visible"))}});w3n.cogs.dashboard.views.MainExpenses=main})();(function(){var main=w3n.cogs.dashboard.views.MainBase.extend({});w3n.cogs.dashboard.views.Main=main})();(function(){var ManagerDrilldown=app.base.views.BaseView.extend({template:_.template(w3n.templates.cogs.talentplaybook.dashboards["manager-drilldown.html"]),itemTemplate:w3n.templates.cogs.talentplaybook.dashboards["manager-drilldown-item.html"],events:{click:"toggleManagerDrillDown","click .manager-list-item button":"switchManager"},initialize:function(options){if(!options.nameID){throw new Error("w3n.cogs.dashboard.views.ManagerDrilldown - [options.nameID] is messing ")}if(!options.currentUser){throw new Error("w3n.cogs.dashboard.views.ManagerDrilldown - [options.currentUser] is messing ")}this.options=options||{};_.extend(this,_.pick(options,["currentUser","nameID","parent"]));if(this.collection){this.stopListening(this.collection,"sync");this.listenTo(this.collection,"sync",this.render);if(options.autoFetch){
this.collection.fetch()}}if(this.parent){this.listenTo(this.parent,"close-menu",this.closeMenu.bind(this));this.parent.listenTo(this,"switch-manager",function(event){this.trigger("switch-manager-by-drilldown",event)}.bind(this.parent));this.parent.listenTo(this,"manager-drilldown-synced",function(view){this.trigger("manager-drilldown-synced",view)}.bind(this.parent))}},render:function(options){this.$el.html(this.template({}));var itemProps={userid:awf.user.info.cnum,username:awf.user.info.name};if(this.collection){_.extend(itemProps,{collection:this.collection.toJSON()})}var itemHtml=Mustache.render(this.itemTemplate,itemProps);this.$el.find(".manager-drilldown-level-1").html(itemHtml);this.updateDrillDownName();this.$el.css("visibility","visible");this.trigger("manager-drilldown-synced",this);return this},switchManager:function(event){this.trigger("switch-manager",event)},toggleManagerDrillDown:function(e){var $el=this.$el.find(".manager-drilldown-level-1");$el.toggle(!$el.is(":visible"));this.setManagerDrillDownText($el)},setManagerDrillDownText:function($el){if($el.is(":visible")){this.updateDrillDownName("Managers")}else{this.updateDrillDownName()}},closeMenu:function(e){var $el=this.$el.find(".manager-drilldown-level-1");var $target=$(e.target).closest(".manager-drilldown-holder");if(!$target.length&&$el.is(":visible")){$el.toggle(false);this.updateDrillDownName()}},updateDrillDownName:function(name){this.$el.find(".manager-drilldown span").text(name||this.currentUser.name)}});w3n.cogs.dashboard.views.ManagerDrilldown=ManagerDrilldown})();(function(){var focusMenu=app.base.views.BaseView.extend({render:function(dashData){var html=Mustache.render(this.template,dashData);this.$el.html(html)}});w3n.cogs.dashboard.views.FocusMenu=focusMenu})();(function(){var header=app.base.views.BaseView.extend({template:w3n.templates.cogs.talentplaybook["header.html"],mgrhubDropdown:null,focusbarTemplate:w3n.templates.cogs.talentplaybook["tpb-focusbar.html"],initialize:function(options){options=options||{};this.parent=options.parent;this.currentDashboard=options.parent.currentDashboard},render:function(options){options=options||{};this.dashboardProperties=options.dashboardProperties;this.dashName=options.dashboardProperties.dashName;this.getBadgeCount();var html=Mustache.render(this.template,options.dashboardProperties);this.$el.html(html);this.setupFocusbar();this.renderTabs();this.mgrhubDropdown.show(this.currentDashboard)},setupFocusbar:function(){if(awf.flags.isActive("cogs.talentplaybook.dashboard.focus-bar")){this.$el.find(".menuicon").addClass("icon-awf-grid-3x3").removeClass("icon-awf-chevron-down");var dashboardArray=w3n.getDashboardArray();var tasksAlertsSummary=this.parent.tasksAlertsSummary;var tpAlertsSummary=this.parent.tpAlertsSummary;_.forEach(dashboardArray,function(board){var boardName=board.dashName;var topicCount=0;if(tasksAlertsSummary){topicCount+=tasksAlertsSummary.topicCount(boardName)}if(tpAlertsSummary){topicCount+=tpAlertsSummary.topicCount(boardName)}board.topicAlerts=topicCount}.bind(this));var focusbarView=new app.base.views.BaseView({el:this.$el.find(".gridmenu"),template:this.focusbarTemplate});focusbarView.render({dashboards:dashboardArray})}},renderTabs:function(){this.mgrhubDropdown=new w3n.components.MgrhubDropdownNew},getBadgeCount:function(){var topicCount=0;var overallCount=0;var tasksAlertsSummary=this.parent.tasksAlertsSummary;var tpAlertsSummary=this.parent.tpAlertsSummary;if(tasksAlertsSummary){topicCount=tasksAlertsSummary.topicCount(this.currentDashboard);overallCount=tasksAlertsSummary.totalCount(this.currentDashboard)}if(tpAlertsSummary){topicCount+=tpAlertsSummary.topicCount(this.dashName);overallCount+=tpAlertsSummary.overallCount(this.dashName)}this.dashboardProperties.topicCount=topicCount>0?topicCount:null;this.dashboardProperties.off=topicCount>0?"on":"off";this.dashboardProperties.overallCount=overallCount>0?overallCount:null;return{topic:this.dashboardProperties.topicCount,overall:this.dashboardProperties.overallCount}},updateBadge:function(){var counts=this.getBadgeCount();var topicCount=counts.topic;var overallCount=counts.overall;var $badge=this.$el.find(".header-badge");var $overall=this.$el.find(".totalAlertsCount");if(topicCount>0){$badge.removeClass("off").text(topicCount)}else{$badge.addClass("off")}if(overallCount>0){$overall.text(overallCount)}else{$overall.hide()}this.setupFocusbar()}});w3n.cogs.dashboard.views.Header=header})();(function(){var help=app.base.views.BaseView.extend({template:w3n.templates.cogs.talentplaybook["help.html"],initialize:function(options){this.container=options.container;this.currentDashboard=options.currentDashboard;app.base.views.BaseView.prototype.initialize.call(this,options)},render:function(){var html=Mustache.render(this.template);this.container.html(html)}});w3n.cogs.dashboard.views.Help=help})();(function(){var overview=app.base.views.BaseView.extend({template:w3n.templates.cogs.talentplaybook["overview.html"],render:function(dashboardProperties){var html=Mustache.render(this.template,dashboardProperties);this.$el.html(html)}});w3n.cogs.dashboard.views.Overview=overview})();(function(){var relatedLinks=app.base.views.BaseView.extend({no_data_html:'<p class="notification">You have no Related Links data at this time.</p>',initialize:function(options){options=options||{};this.currentDashboard=options.currentDashboard},render:function(cnum){var relatedCollection=new w3n.serviceModels.relatedLinks.Collection(null,{model:w3n.serviceModels.relatedLinks.Model,cnum:cnum});var relatedButtonsCollection=new w3n.serviceModels.relatedButtons.Collection(null,{model:w3n.serviceModels.relatedButtons.Model,cnum:cnum});if(awf.flags.isActive("cogs.talentplaybook.relatedlinks")){var currUserCnum1=cnum;var currTime1=Date.now();var reqUniqueId1=currUserCnum1+"_"+currTime1;var is_link_loaded=false,is_button_loaded=false;var fetch_links_dfr=relatedCollection.fetch({headers:{reqUniqueId:reqUniqueId1}}).fail(function(){console.log("Related links failed");this.noData(is_link_loaded,is_button_loaded)}.bind(this)).done(function(){var links=this.setLinks();if(links&&links.length>0)is_link_loaded=true}.bind(this));var fetch_buttons_dfr=relatedButtonsCollection.fetch({headers:{reqUniqueId:reqUniqueId1}}).fail(function(){console.log("Related links failed");this.noData(is_link_loaded,is_button_loaded)}.bind(this)).done(function(){var buttons=this.setButtons();if(buttons&&buttons.length>0)is_button_loaded=true}.bind(this));$.when(fetch_links_dfr,fetch_buttons_dfr).done(function(){if(is_link_loaded||is_button_loaded){$(".related-links-content").find(".notification").remove();console.log("Related Links rendered with data")}else{$(".related_links").html("<p>There is no related link defined for current topic.</p>")}})}},noData:function(is_link_loaded,is_button_loaded){if(!is_link_loaded&&!is_button_loaded){$(".related-links-content").find(".related_buttons").empty();$(".related-links-content").find(".related_links").empty();$(".related-links-content").find(".notification").remove();$(".related-links-content").append(this.no_data_html)}},setLinks:function(){var template=w3n.templates.cogs.talentplaybook["related-links.html"];var dashName=this.currentDashboard;var relatedLinkKey=w3n.tpConfig.dashboards[dashName].relatedPrefix+"rl";var links=w3n.related_links_data[relatedLinkKey];if(links){links=_.chunk(links,4);$(".related_links").html("");_.forEach(links,function(value){var data={list:value};var html=Mustache.render(template,data);$(".related_links").append(html)})}return links},setButtons:function(){var template=w3n.templates.cogs.talentplaybook["related-links-buttons.html"];var dashName=this.currentDashboard;var relatedButtonKey=w3n.tpConfig.dashboards[dashName].relatedPrefix+"rb";var btns=w3n.related_buttons_data[relatedButtonKey];if(btns){var data={list:btns};var html=Mustache.render(template,data);$(".related_buttons").html(html)}return btns}});w3n.cogs.dashboard.views.RelatedLinks=relatedLinks})();(function(){var tasks=app.base.views.BaseView.extend({template:w3n.templates.cogs.talentplaybook["table-tasks.html"],events:{"click .task-expand-btn":"toggleTaskAccordion","click .person-link .task-icon":"toggleTaskAccordion","click .person-link .count-badge":"toggleTaskAccordion","click .task-dropdown":"toggleDropDown","click .markAs-btn":"toggleReadUnread","click .action-button-rest":"callAction","click .action-button-di":"updateState"},initialize:function(options){options=options||{};this.parent=options.parent;this.currentDashboard=options.parent.currentDashboard;w3n.appAwfMap={3:{GET:{true:awf.user.identity_manager.SupportedServices.GET_LIVE,false:awf.user.identity_manager.SupportedServices.GET_TEST}}}},render:function(){var self=this;this.setLoader();var tasksCollection=this.collection=new w3n.serviceModels.Tasks.Collection(null,{model:w3n.serviceModels.Tasks.Model});tasksCollection.fetch({cache:false}).done(function(){var data;data=w3n.tasks_data[this.currentDashboard];data=this.setUpData(data);this.updateTasksTable(data)}.bind(this)).fail(function(err){console.log("Tasks service failed since: "+err);var data=[];data=this.setUpData(data);this.updateTasksTable(data)}.bind(this))},toggleTaskAccordion:function(e){e.preventDefault();var targetOpen="."+$(e.target).data("uid");$(targetOpen+"-showhide.task-showhide.tasks-row").toggleClass("visible");$(targetOpen).toggleClass("showSubRow");$(targetOpen+"-expand-btn").toggleClass("icon-awf-op-plus").toggleClass("icon-awf-op-minus");if($(targetOpen+"-showhide.task-showhide.tasks-row").hasClass("visible")&&!awf.flags.isActive("cogs.talentplaybook.clean-tasks")){setHeight(targetOpen.split("-tasks")[0])}var action=$(targetOpen+"-showhide.task-showhide.tasks-row").hasClass("visible")?"Opened Accordion":"Closed Accordion";w3n.utils.metrics.tagCogEvent(action,action,"Task Section",this.currentDashboard,"Manager Hub","none");return false},toggleDropDown:function(e){e.preventDefault();var taskID=this.extractTaskID(e.target.classList[0]);$(e.target).toggleClass("active");$("."+taskID+"-task-dropdown.task-dropdown ul.dropdown").toggleClass("active");e.stopPropagation()},toggleReadUnread:function(e){e.preventDefault();var taskID=this.extractTaskID(e.target.classList[0]);var target="."+taskID+"-task-dropdown";var value;value=e.target.innerHTML.trim()==="Mark as Read"?"1":"0";this.markAs(taskID,value,target)},callAction:function(e){e.preventDefault();var target=e.target;var method=target.dataset.opt;var url=target.dataset.url;var tokenIndex=w3n.appAwfMap[target.dataset.appid].GET[target.dataset.live];var taskID=target.dataset.taskid;awf.user.identity_manager.ajax(tokenIndex,{url:url,success:function(response){var msg=response.split("<response><response_code>")[1].split("</response_code>")[0];if(msg==="Successful"){this.closeAllTaskAccordions();this.removeTask(taskID);this.setNotification("success","Successfully Updated Task",3);$(".scroll-card").scrollTop(0)}else if(msg==="Failed"){this.closeAllTaskAccordions();this.setNotification("error","There was an error updateing your task",3);$(".scroll-card").scrollTop(0)}},error:function(err){console.log(err)}})},updateState:function(e){e.preventDefault();var state=e.target.dataset.type;var taskID=e.target.dataset.taskid;var setState;switch(state){case"Done":setState=3;break;case"Ignore":setState=3;break;default:break}this.markAs(taskID,setState,e.target)},markAs:function(taskID,value,button){var data="<?xml version='1.0' encoding='UTF-8'?><input><wsfput><update><data colname='STATE' dbType='string'>"+value+"</data></update><where><data colname='TASK_ID' dbType='double'>"+taskID+"</data></where></wsfput></input>";originalTxt=$(button).html();$(button).html('<i class="icon-awf-rotate-right icon-awf-spin"></i> Saving...');awf.user.identity_manager.ajax(awf.user.identity_manager.SupportedServices.WSF,{url:w3n.connections.proxy+"/hr/wsf/services/extdata/mgrhbtsk/udurdnot/1",method:"PUT",contentType:"text/xml",dataType:"text",data:data,timeout:1e4,supportedServiceKey:w3n.connections.proxy.indexOf("test")!==-1?"wsf_uat":"wsf",success:function(response){if(awf.flags.isActive("cogs.talentplaybook.dashboard.new")){this.parent.renderHeader()}if(parseInt(value)===3){this.closeAllTaskAccordions();this.removeTask(taskID);this.setNotification("success","Successfully Updated Task",3);$(".scroll-card").scrollTop(0)}else if(parseInt(value)===1){this.resetButton(taskID,button,originalTxt);this.setNotification("success","Successfully Updated Task as Read",3);if(!awf.flags.isActive("cogs.talentplaybook.dashboard.new")){if(w3n.cogs.talentplaybook.tasksSummary.hasData){w3n.cogs.talentplaybook.tasksSummary.subtractOne(this.currentDashboard);w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-header"].badge.setNumber(w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-header"].badge.number-1);w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-header"].taskCount-=1;w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-header"].badge.render();w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-topic"].badge.setNumber(w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-topic"].badge.number-1);w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-topic"].taskCount-=1;w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-topic"].badge.render()}}}else{this.resetButton(taskID,button,originalTxt);this.setNotification("success","Successfully Updated Task as Unread",3);if(!awf.flags.isActive("cogs.talentplaybook.dashboard.new")){if(w3n.cogs.talentplaybook.tasksSummary.hasData){w3n.cogs.talentplaybook.tasksSummary.addOne(this.currentDashboard);w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-header"].badge.setNumber(w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-header"].badge.number+1);w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-header"].taskCount+=1;w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-header"].badge.render();w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-topic"].badge.setNumber(w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-topic"].badge.number+1);w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-topic"].taskCount+=1;w3n.cogs.talentplaybook.LargeCardAlertBadge[w3n.cogs.talentplaybook.tpUser][this.currentDashboard+"-topic"].badge.render()}}}var newValue={STATE:value,TASK_ID:taskID};this.checkState(newValue);if(awf.flags.isActive("cogs.talentplaybook.dashboard.new")){w3n.tasksSummary.fetch({uncache:true,cache:false}).then(function(){this.parent.tasksAlertsSummary=new w3n.serviceModels.TasksAlertSummary({collection:w3n.tasksSummary.toJSON()});this.parent.tasksAlertsSummary.doCount().then(function(){this.parent.headerView.updateBadge()}.bind(this))}.bind(this))}}.bind(this),error:function(err){console.log(err);this.resetButton(taskID,button,originalTxt);this.setNotification("error","There was an error updating the task.",3)}.bind(this)})},setUpData:function(data){data.isEmpty=data.length===0;data.sortOrder=false;var tabName=this.currentDashboard;data.section_name=w3n.tpConfig.dashboards[tabName].dashTitle;return data},updateTasksTable:function(data){var dashboardData={collection:data};var template=w3n.templates.cogs.talentplaybook["table-tasks.html"];var html=Mustache.render(template,dashboardData);var currDash=this.currentDashboard;if(awf.flags.isActive("cogs.talentplaybook.dashboard.new")){$(".tasks-content").html(html)}else{$("."+currDash+"-tasks").html(html)}this.loadIFrames(data);this.setAvatars(data)},setAvatars:function(data){_.forEach(data,function(member){var name=member.EMP_NAME!==null?member.EMP_NAME:"";var cnum=member.EMP_CNUM!==null?member.EMP_CNUM:awf.user.info.cnum;if(name===""){var html='<button class="person-link default"><i class="icon-youribm-logo-managerhub-circle task-avatar"></i></button>';$(".task-row[data-cnum="+member.TASK_ID+"]").find(".task-person").html(html)}else{var avatarModel=new app.serviceModels.Avatar({id:cnum,initials:w3n.utils.getInitials(name)});var avatar=new app.components.Avatar({model:avatarModel,name:"avatar-"+cnum,el:$(".task-row[data-cnum="+member.TASK_ID+"]").find(".task-person")});avatarModel.fetch().then(function(){avatar.render({uid:cnum},true)})}}.bind(this))},loadIFrames:function(data){_.forEach(data,function(value){if(awf.flags.isActive("cogs.talentplaybook.clean-tasks")){var regExp=new RegExp("<a ","g");$("."+value.TASK_ID+"-task-desc").prepend(value.descriptionHTML.replace(regExp,'<a target="_blank" '))}else{var newIframe=document.createElement("iframe");newIframe.width="780px";newIframe.height="auto";newIframe.src="about:blank";$("."+value.TASK_ID+"-task-desc").prepend(newIframe);newIframe.contentWindow.document.open("text/html","replace");newIframe.contentWindow.document.write(value.descriptionHTML);newIframe.contentWindow.document.close()}this.checkLinks(value.TASK_ID);this.displayButtons(value);this.checkState(value)}.bind(this))},setHeight:function(taskIDClass){var iFrame=$(taskIDClass+"-task-desc iframe");var newHeight=iFrame.contents().find("body")[0].scrollHeight;var isFirefox=typeof InstallTrigger!=="undefined";if(isFirefox){newHeight+=50}iFrame.attr("height",newHeight+"px")},checkState:function(value){var state=value.STATE;var alert=$("."+value.TASK_ID+"-tasks-alert");var button=$("."+value.TASK_ID+"-markAs-btn.markAs-btn");var drop=$("."+value.TASK_ID+"-task-dropdown");if(state=="0"){alert.removeClass("hide-alert");button.text("Mark as Read");drop.removeClass("active")}else{alert.addClass("hide-alert");button.text("Mark as Unread");drop.removeClass("active")}},removeTask:function(taskID){$("."+taskID+"-tasks").fadeOut();$("."+taskID+"-tasks-showhide").fadeOut()},closeAllTaskAccordions:function(){$("[class$='-showhide']").removeClass("visible");$(".showSubRow").removeClass("showSubRow");$("[class$='-expand-btn']").addClass("icon-awf-op-plus").removeClass("icon-awf-op-minus")},setNotification:function(msgType,msg,dismissIn){var $container=$(".tasks-content").parents(".js-card").find(".js-card-message");$container.css("z-index","9999");if(dismissIn){awf.util.postMessage($container,msgType,msg,false).andDismissIn(dismissIn)}else{awf.util.postMessage($container,msgType,msg,false)}},resetButton:function(taskID,button,originalTxt){$(button).html(originalTxt);$("."+taskID+"-task-dropdown ul").removeClass("active")},checkLinks:function(taskID){var html=$("."+taskID+"-task-desc iframe").contents().find("body");var links=$("a",html);_.forEach(links,function(link){if(!link.hasAttribute("target")||$.attr(link,"target")==="_self"||$.attr(link,"target")==="_parent"||$.attr(link,"target")==="_top"){$.attr(link,"target","_blank")}})},displayButtons:function(value){var appID=value.APP_ID;var taskID=value.TASK_ID;var taskDesc=$("."+taskID+"-task-desc");var taskActions=$("."+taskID+"-task-actions");for(var i=5;i>=1;i--){var prefix="ACTION"+i;var action=prefix+"_LABEL";if(value[action]){var label=value[prefix+"_LABEL"];var url=value[prefix+"_URL"];var actionType=value[prefix+"_TYPE"];var operation=this.getOperation(value[prefix+"_OPER"]);switch(actionType){case w3n.actionTypes.link:this.createLink(taskActions,label,url,"action-button-link");break;case w3n.actionTypes.rest:if(awf.flags.isActive("cogs.talentplaybook.rest-tasks")){this.createAction(taskActions,label,url,"action-button-rest",operation,appID,"false",taskID)}break;case w3n.actionTypes.dashboard:break;case w3n.actionTypes.iframe:break;default:break}}}if(value.TYPE===w3n.taskTypes.notification){this.createDoneIgnore(taskActions,"Ignore","action-button-di","PUT",taskID);this.createDoneIgnore(taskActions,"Done","action-button-di","PUT",taskID)}},createLink:function(div,label,url,className){div.prepend('<a class="action-button '+className+'" title="'+label+'" href="'+url+'" target="_blank">'+label+"</a>");return true},createAction:function(div,label,url,className,opt,appID,live,taskID){var updatedUrl=this.switchUrl(url);div.prepend('<a class="action-button '+className+'" title="'+label+'" href="#" data-url="'+updatedUrl+'" data-opt="'+opt+'" data-taskid="'+taskID+'" data-appid="'+appID+'" data-live="'+live+'">'+label+"</a>");return true},createDoneIgnore:function(div,label,className,opt,taskID){var url=w3n.connections.proxy+"/hr/wsf/services/extdata/mgrhbtsk/udurdnot/1";div.prepend('<a class="action-button '+className+'" title="'+label+'" href="#" data-taskid="'+taskID+'" data-type="'+label+'">'+label+"</a>");return true},switchUrl:function(url){var end=url.split("/hr/")[1];return w3n.connections.proxy+"/hr/"+end},getOperation:function(opt){var operation;switch(opt){case w3n.operations.put:operation="PUT";break;case w3n.operations.post:operation="POST";break;case w3n.operations.get:operation="GET";break;case w3n.operations.delete:operation="DELETE";break;default:break}return operation},extractTaskID:function(classList){if(Array.isArray(classList)){return classList[0].split("-")[0]}return classList.split("-")[0]}});w3n.cogs.dashboard.views.Tasks=tasks})();(function(){var tooltips={};var teamAtAGlance=app.base.views.BaseView.extend({initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params||{}},render:function(){var self=this;if(this.params&&this.params.cnum){var teamCollection=this.collection=new w3n.serviceModels.TeamAtAGlance.Collection(null,{model:w3n.serviceModels.TeamAtAGlance.Model,cnum:this.params.cnum});this.fetchTeam(teamCollection).then(function(data){self.setTable(data)}).catch(function(err){console.log("Team at a glance service failed since: "+err)})}},fetchTeam:function(teamCollection){return new Promise(function(resolve,reject){teamCollection.fetch().done(function(data){resolve(data)}).fail(function(err){var data=[];reject();$("#ataglance-content").html('<p class="notification">You have no Team at a Glance data at this time.</p>')})})},setTable:function(data){var template=w3n.templates.cogs.talentplaybook["team-at-a-glance.html"];var html=Mustache.render(template,data);this.$el.html(html);this.plotTeamMembers(data)},plotTeamMembers:function(serviceCall){var indY=1;$("#ataglance-table .ataglance-row").each(function(){var indX=0;$(this).find(".ataglance-cell").each(function(){$(this).attr("data-position",indX+"_"+indY);indX++});indY++});_.forEach(serviceCall.data,function(value){var currRecord=value;var xPos=parseInt(currRecord.x)+1;var yPos=parseInt(currRecord.y)+1;currRecord.avatarObj=new app.serviceModels.Avatar({id:currRecord.cnum,avatarsize:115,initials:currRecord.initials.toUpperCase()});currRecord.avatarObj.fetch().done(function(){var html=Mustache.render(w3n.templates.cogs.talentplaybook["team-at-a-glance-icon.html"],currRecord.avatarObj.toJSON());$('[data-position="'+xPos+"_"+yPos+'"]').append(html);w3n.AtAGlanceLoaded=true;$('[data-position="'+xPos+"_"+yPos+'"] .profile-picture').on("mouseover",function(e){this.showTooltip(e)}.bind(this))}.bind(this))}.bind(this));this.setTeamatAGlanceHeights()},setTeamatAGlanceHeights:function(){var rows=$(".ataglance-row");setTimeout(function(){_.forEach(rows,function(row){var row_height=$(row).height();var maxHeight=60;_.forEach(row.children,function(cell){var numAvatarRows=$(cell).find("a.profile-picture").length%2===0?$(cell).find("a.profile-picture").length/2:($(cell).find("a.profile-picture").length+1)/2;var newHeight=numAvatarRows*50;maxHeight=newHeight>maxHeight?newHeight:maxHeight});_.forEach(row.children,function(cell){$(cell).height(maxHeight)})})},200)},showTooltip:function(e){this.hover=true;$(".qtip").remove();var target=e.currentTarget;var id=$(e.currentTarget).data("cnum");var initials=$(e.currentTarget).data("initials");var tooltipCompositeModel=app.base.models.CompositeModel.extend({initSubmodels:function(attributes){this.addModel("avatar",new app.serviceModels.Avatar({id:attributes.person.uid,email:attributes.person.email,avatarsize:115,initials:initials}),null,false)},keyedSubModels:true});if(!tooltips[id]){tooltips[id]={model:new tooltipCompositeModel(null,{initialModel:new w3n.serviceModels.Faces({id:id})})}}var tooltip=tooltips[id];if(!tooltip.view){tooltip.view=new w3n.components.tooltip({model:tooltip.model,target:target,template:w3n.templates.components.tooltip["business-card.html"]})}else{tooltip.view.target=target}tooltip.model.fetch()},hideTooltip:function(e){setTimeout(function(){if(this.hover===false)$(".qtip").remove()}.bind(this),500)}});w3n.cogs.dashboard.views.TeamAtAGlance=teamAtAGlance})();(function(){var cog_name="team-members";w3n.cogs[cog_name].views.Medium=app.base.views.BaseView.extend({initialize:function(options){app.base.views.BaseView.prototype.initialize.call(this,options);this.origCollection=options.collection;this.filter="global"},template:w3n.templates.cogs[cog_name]["medium.html"],events:{"click button.person-link":"handleFlip","click button.team-toggle":"handleFilter"},handleFlip:function(e){var uid=$(e.currentTarget).data("uid");this.trigger(cog_name+"-flip",uid)},handleFilter:function(e){var filter=$(e.currentTarget).data("team");this.filter=filter;this.filterData();this.render()},filterData:function(){if(awf.flags.isActive("cogs."+cog_name+".medium-filter")){if(this.filter==="incountry"){this.collection=new Backbone.Collection(this.origCollection.where({incountryteam:true}))}else if(this.filter==="global"){this.collection=new Backbone.Collection(this.origCollection.where({globalteam:true}))}else{this.collection=this.origCollection}}else{this.collection=this.origCollection}},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.filterData();if(awf.flags.isActive("cogs."+cog_name+".medium-filter")){this.$el.find("button.team-toggle."+this.filter+"-toggle").addClass("current")}else{$(this.$el.find(".filter-button")).hide()}}})})();(function(){w3n.cogs.whatsnew.views.large_item=app.base.views.BaseView.extend({name:"whatsnew-large-item-view",template:_.template(w3n.templates.cogs.whatsnew["large-item.html"]),events:{"click [data-primitive=whatsnewitemcard] a":"aLinkClick","click button.button_title":"learnMoreClick"},initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;this.metrics=app.utils.createMetricTag({module:"whatsnew:large-item",group:awf.app.id})},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);setEventHandlers(this);this.$el.find("article").attr("data-component","whatsnew-large-item");this.$el.attr({role:"region","aria-label":"What's new large item view","data-i18n":"[aria-label]app.cogs.whatsnew.aria-label.large-view"});awf.i18n.on("apply:language",this.updateDate.bind(this));this.updateDate();return this},updateDate:function(){var date=moment(this.model.attributes.date).format("D MMMM YYYY");this.$el.find(".date").html(date)},aLinkClick:function(event){var self=this;var $whatsnewitemcard=self.$el.find('[data-primitive="whatsnewitemcard"]');var tab=$whatsnewitemcard.parents("#latest-posts-content").length>0?"Featured":"All";var section="content space - "+tab;if($(event.currentTarget).parent().hasClass("hero-image")){section="content space: Hero image"}var target=$(event.currentTarget).attr("href")?$(event.currentTarget).attr("href"):"none";self.metrics.tagEvent({ev:"click",action:target!=="none"?"link":"button",name:$(event.target).text()||event.target.alt||"none",section:section,target:target})},learnMoreClick:function(event){var self=this;var target=$(event.currentTarget).attr("href");if(target!=="#"){window.open(target);this.aLinkClick(event)}}});function setEventHandlers(self){var $whatsnewitemcard=self.$el.find('[data-primitive="whatsnewitemcard"]');$whatsnewitemcard.on("scroll",function(){if($whatsnewitemcard.scrollTop()!==0){$(".tab-actions").addClass("dropshadow")}else{$(".tab-actions").removeClass("dropshadow")}})}})();(function(){var metrics=null,self=null;var tagTotal;var tagArray;var tabsComponent;var archiveItems=[];var splitBy;var hoverChange=80;var easeType="easeOutExpo";var easeTime=400;w3n.cogs.whatsnew.views.large=app.base.views.BaseView.extend({name:"whatsnew-large-view",template:_.template(w3n.templates.cogs.whatsnew["large.html"]),initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;this.items=[];self=this;metrics=app.utils.createMetricTag({module:"whatsnew:large",group:awf.app.id})},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);self.json_Model=self.model.toJSON();self.carousel=w3n.cogs.whatsnew.views.common.generateCarousel({el:self.$el.find(".content")[0],tag_event_module:"whatsnew:large",total:self.json_Model.maxCarouselSlides});self.data=self.model.toJSON();self.clone_data=_.cloneDeep(self.data);loadContent(self);bindEvents(self);self.$el.find("#dropshadow-scroll").attr("data-component","whatsnew-large");return self}});function loadContent(self){self.maxCarouselSlides=self.data.maxCarouselSlides;sortByDate(self.clone_data);self.$el.find(".content").append(self.carousel.render().$el);setItems(w3n.cogs.whatsnew.state.index.value,self.data);setOverviewData(self.clone_data)}function bindEvents(self){tabFunctionality();self.carousel.on("slide_change",carouselChange);self.$el.find(".hover-overlay").hover(function(){$(this).fadeOut("slow",function(){$(this).css("display","none")})});self.$el.on("scroll",function(){if($("#dropshadow-scroll").scrollTop()!==0){$(".tab-actions").addClass("dropshadow")}else{$(".tab-actions").removeClass("dropshadow")}});self.carousel.on("carousel:goToSlide",function(index){setItems(index,self.data)})}function carouselChange(e){w3n.cogs.whatsnew.state.index.setValue(self.carousel.slide_index||0)}function generateArticleItem(article){var item_model={attributes:article};return new w3n.cogs.whatsnew.views.large_item({model:item_model})}function tabFunctionality(){var params={no_border:true,css:{border_top:" true"},tag_event_module:"whatsnew:large"};var badge_featured=w3n.utils.hasI18nTag("app.common.badge.featured")?i18next.t("app.common.badge.featured"):"Featured";var badge_all=w3n.utils.hasI18nTag("app.common.badge.all")?i18next.t("app.common.badge.all"):"All";tabsComponent=new app.components.tabs(params);tabsComponent.render();tabsComponent.addTab(badge_featured,{label:badge_featured,target:"#latest-posts-content",id:"whatsnew-tab-1",i18n:"app.common.badge.featured"},{type:"click",func:clickFeatured});tabsComponent.addTab(badge_all,{label:badge_all,target:"#overview-content",id:"whatsnew-tab-2",i18n:"app.common.badge.all"},{type:"click",func:clickAll});tabsComponent.activeTab(badge_featured);self.tabBar=tabsComponent;self.$el.find("#toggle-bar").append(tabsComponent.$el)}function clickFeatured(){$("#overview-content").css("display","none");$("#latest-posts-content").css("display","block");checkForScroll()}function clickAll(){self.$el.find("#archive-list").empty();setArchiveItems(self.clone_data);$("#latest-posts-content").css("display","none");$("#overview-content").css("display","block");checkForScroll();visualizeData();filterArchive();searchResultHeading()}function checkForScroll(){$(".whatsnew-item-card").scrollTop(0);$(".card").scrollTop(0);$(".tab-actions").removeClass("dropshadow")}function grow(ev){var obj=ev.target||null;var dataRow=$(".data-row div");var total=$(".data-row div").length;var objID=$(obj).attr("id");if(!objID)return;$(obj).stop(true,false).animate({width:hoverChange+"%"},easeTime);$(".data-row div").not(obj).stop(true,false).animate({
width:Math.floor(100-hoverChange)/(total-1)+"%"},easeTime)}function shrink(ev){var obj=ev.target||null;for(var cat=0;cat<tagArray.length;cat++){self.$el.find("#"+tagArray[cat].index).animate({width:tagArray[cat].count/tagTotal*100+"%"},easeTime)}}function visualizeData(){var itemArray=self.$el.find(".data-row div");for(var i=0;i<itemArray.length;i++){$(itemArray[i]).mouseenter(grow)}$(".data-visualization").mouseleave(shrink)}function toggleSocialToolkit(action){primitives.hover_trigger[action+"Class"]("hovered")}function sortArrayByFrequency(array){var uniqeArray=[];var arrayList=[];var sortedArraylist,flat_arr;for(var i=0;i<array.length;i++){if(uniqeArray.indexOf(array[i])===-1){uniqeArray.push(array[i])}}for(var y=0;y<uniqeArray.length;y++){var newArray=[];for(var z=0;z<array.length;z++){if(uniqeArray[y]===array[z]){newArray.push(array[z])}}arrayList.push(newArray)}sortedArraylist=arrayList.sort(function(a,b){return b.length-a.length});flat_arr=[].concat.apply([],sortedArraylist);return flat_arr.reverse()}function createFilterTabs(array){for(var i=0;i<array.length;i++){var tab=document.createElement("li");tab.setAttribute("id","whatsnew_tab_filter_"+i);tab.setAttribute("class","tab-filter");self.$el.find("ul.tab-filters").append(tab);var $tab=self.$el.find("ul.tab-filters #whatsnew_tab_filter_"+i);$tab.html(array[i].name+'<i data-primitive="icon" class="icon icon-awf-op-times-bold"></i>');var color=self.$el.find(".data-row #"+i).css("background-color");$tab.css("background-color",color);$tab.css("display","none")}self.$el.find(".data-row .category").on("click",function(){var tabToShowId=$(this).attr("id");var node=self.$el.find("ul.tab-filters #whatsnew_tab_filter_"+tabToShowId);node.css("display","inline-block");filterArchive();searchResultHeading();metrics.tagEvent({ev:"click",action:"filter:add",module:"whatsnew:large",name:node.text(),section:"content space - All"})});self.$el.find("ul.tab-filters li i.icon-awf-op-times-bold").on("click",function(){var tabToHideId=$(this).parent().attr("id");self.$el.find("ul.tab-filters #"+tabToHideId).css("display","none");filterArchive();searchResultHeading();metrics.tagEvent({ev:"click",action:"filter:remove",module:"whatsnew:large",name:$(this).parent().eq(0).text(),section:"content space - All"})})}function getActiveTags(){var activeTags=[];$("ul.tab-filters li.tab-filter").each(function(index){if($(this).is(":visible")){activeTags.push(tagArray[index].name)}});return activeTags}function filterArchive(){var activeTags=getActiveTags();for(var i=0;i<archiveItems.length;i++){var archiveObj=archiveItems[i];if(activeTags.length===0){archiveObj.item.$el.css("display","block")}else{var matches=_.intersection(archiveObj.entry.tags,activeTags);var displayState=matches.length>0;archiveObj.item.$el.css("display",displayState?"block":"none")}}}function searchResultHeading(){var activeTags=getActiveTags();var activeArticles=0;var s="";var titleString="";var filter_text='<span data-i18n="[html]app.cogs.whatsnew.archive.filter-for" data-i18n-options=\'{"num": "{{num}}", "s":"{{s}}", "query": "{{query}}"}\'>{{num}} result{{s}} <span class="active-tag">for {{query}}</span></span>';$("#search-results article").each(function(index){if($(this).is(":visible")){activeArticles+=1}});if(activeArticles>1)s="s";for(var i=0;i<activeTags.length;i++){titleString+=activeTags[i];if(i===activeTags.length-2){titleString+=" and "}if(i<activeTags.length-2){titleString+=", "}}var filter_result_text=_.template(filter_text)({num:activeArticles,query:titleString,s:s});if(activeTags.length===0){self.$el.find("#archive-title").html('<span data-i18n="app.cogs.whatsnew.archive.list-tilte">All Post</span>')}else{self.$el.find("#archive-title").html(filter_result_text)}if("i18next"in window)self.$el.find("#archive-title span").localize()}function countTags(array){var tagName=[],tagCount=[],prev;var tagArray=[];array=sortArrayByFrequency(array);for(var i=0;i<array.length;i++){if(array[i]!==prev){tagName.push(array[i]);tagCount.push(1)}else{tagCount[tagCount.length-1]++}prev=array[i]}for(var y=0;y<tagName.length;y++){tagArray[y]={name:tagName[y],count:tagCount[y],index:y}}return tagArray}function formatTagNumber(string){if(string>1){return string+" posts"}else{return string+" post"}}function sortByDate(data){data.entries.sort(function(a,b){return new Date(b.date)-new Date(a.date)})}function appendItem(article){article.tabType="item";var article_item=generateArticleItem(article);self.items.push(article_item);return article_item}function appendArchiveItem(article){article.tabType="all";var archive_item=generateArticleItem(article);self.items.push(archive_item);return archive_item}function clearItems(){self.items=[];self.carousel.reset()}function setOverviewData(data){var tags=[];var colorArray=["7CC7FF","5AAAFA","5596E6","4178BE","325C80"].reverse();for(var i=0;i<data.entries.length;i++){var entry=data.entries[i];for(var tag in entry.tags){tags.push(entry.tags[tag])}}tagTotal=tags.length;tagArray=countTags(tags);for(var x=0;x<tagArray.length;x++){var cell=document.createElement("div");var cellTitle=document.createElement("span");var cellNumber=document.createElement("span");var colorCounter=x%colorArray.length;cell.setAttribute("id",tagArray[x].index);cell.setAttribute("class","category");cellTitle.innerHTML=tagArray[x].name;cellTitle.setAttribute("class","title");cellNumber.innerHTML=formatTagNumber(tagArray[x].count);cellNumber.setAttribute("class","number");self.$el.find(".data-row").append(cell);self.$el.find("#"+tagArray[x].index).append(cellTitle);self.$el.find("#"+tagArray[x].index).append(cellNumber);self.$el.find("#"+tagArray[x].index).css("width",tagArray[x].count/tagTotal*100+"%");self.$el.find("#"+tagArray[x].index).css("background-color","#"+colorArray[colorCounter])}createFilterTabs(tagArray)}function setItems(index,data){if(self.carousel.hasNotItem(index)){var item;var entry=data.entries[index];item=appendItem(entry);item.render();self.carousel.appendItem({index:index,view:item.$el})}self.carousel.setDefPointer(w3n.cogs.whatsnew.state.index.value)}function setArchiveItems(data){var srDiv=self.$el.find("#archive-list");var featured_span='<span data-primitive="type" class="badging green purple" data-i18n="app.common.badge.featured">Featured</span>';archiveItems=[];for(var i=0;i<data.entries.length;i++){var entry=data.entries[i];if(!w3n.cogs.whatsnew.views.common.hideUnpublished(entry)){var item=appendArchiveItem(entry);item.render();srDiv.append(item.$el);archiveItems.push({item:item,entry:entry});if(i<6){item.$el.find("span.date").before(featured_span);if("i18next"in window)item.$el.find("span.date").prev("span").localize()}}}}})();(function(){var MORE_LABEL="Show More",LESS_LABEL="Show Less";w3n.cogs.whatsnew.views.medium_item=app.base.views.BaseView.extend({name:"whatsnew-medium-item-view",template:w3n.templates.cogs.whatsnew["medium-item.html"],events:{"click button.more_link":"showMoreToggleClick","click .hero-image a":"heroImageClick","click [data-primitive=title_link]":"titleLinkClick"},initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;this.metrics=app.utils.createMetricTag({module:"whatsnew:medium-item",group:awf.app.id})},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.$el.attr({role:"region","aria-label":"What's new medium item view","data-i18n":"[aria-label]app.cogs.whatsnew.aria-label.medium-view"});awf.i18n.on("apply:language",this.updateDate.bind(this));this.updateDate();this.defineElements();return this},defineElements:function(){this.item_content=this.$el.find(".whatsnew__content");this.item_abstract=this.$el.find(".abstract");this.item_more_link=this.$el.find("button.more_link");this.item_abstract_link=this.item_abstract.find("a[href]")},updateDate:function(){var date=moment(this.model.attributes.date).format("D MMMM YYYY");this.$el.find(".date").html(date)},reset:function(){var self=this;var data=this.model.attributes;this.item_content.removeClass("opened");this.item_abstract.html(data.trunc_abstract).removeClass("scrollable");this.item_more_link.html(MORE_LABEL);self.$el.find("button.more_link").attr("data-i18n","awf.common.show_more").html(MORE_LABEL);if("i18next"in window)self.$el.find("button.more_link").localize()},showMoreToggleClick:function(){var self=this;var data=self.model.attributes;self.metrics.tagEvent({ev:"click",action:"toggle",name:this.item_more_link.html(),section:"content space",target:"none"});if(this.item_content.hasClass("opened")){this.item_more_link.html(MORE_LABEL).removeClass("slide-off").addClass("slide-on").attr("data-i18n","awf.common.show_more");this.item_abstract.html(data.trunc_abstract).removeClass("scrollable");if("i18next"in window)this.item_more_link.localize()}else{this.item_more_link.html(LESS_LABEL).removeClass("slide-on").addClass("slide-off").attr("data-i18n","awf.common.show_less");this.item_abstract.html(data.abstract).addClass("scrollable");if("i18next"in window)this.item_more_link.localize();if(this.item_abstract_link){this.item_abstract_link.on("click",function(event){var target=$(this).attr("href")?$(this).attr("href"):"none";this.metrics.tagEvent({ev:"click",action:"link",name:$(event.target).text()||event.target.alt||"none",section:"content space",target:target})})}}this.item_content.toggleClass("opened")},heroImageClick:function(event){var self=this;var targetObj=event.currentTarget;var ev_name,ev_action;if($(targetObj).find("img").length){ev_name=$(targetObj).closest("[data-component=whatsnew-item]").attr("aria-label");ev_action="hero-image"}else{ev_name=$(targetObj).text();ev_action="link"}self.metrics.tagEvent({ev:"click",action:ev_action,name:ev_name,section:"content space",target:"none"});self.params.medium_methods.flipCard()},titleLinkClick:function(event){var self=this;var targetObj=event.currentTarget;var target=$(targetObj).attr("href")?$(targetObj).attr("href"):"none";self.metrics.tagEvent({ev:"click",action:"link",name:$(event.target).text()||event.target.alt||"none",section:"content space",target:target})}})})();(function(){var metrics=null;w3n.cogs.whatsnew.views.medium=app.base.views.BaseView.extend({name:"whatsnew-medium-view",template:_.template(w3n.templates.cogs.whatsnew["medium.html"]),initialize:function(params){app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.params=params;this.items=[];this.maxCarouselSlides=6;metrics=app.utils.createMetricTag({module:"whatsnew:medium",group:awf.app.id})},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.json_Model=this.model.toJSON();var self=this;self.carousel=w3n.cogs.whatsnew.views.common.generateCarousel({el:self.$el.find(".content")[0],tag_event_module:"whatsnew:medium",total:self.json_Model.maxCarouselSlides});loadContent(self);bindEvents(self);self.$el.attr("data-component","whatsnew");return this}});function loadContent(self){self.$el.find(".content").append(self.carousel.render().$el);setItems(w3n.cogs.whatsnew.state.index.value,self.json_Model,self)}function bindEvents(self){self.listenTo(self.carousel,"slide_change",carouselChange);w3n.cogs.whatsnew.state.index.on("change:value",function(ev,new_val,old_val){if(self.carousel.slide_index!==w3n.cogs.whatsnew.state.index.value){setItems(w3n.cogs.whatsnew.state.index.value,self.json_Model,self)}});self.carousel.on("carousel:goToSlide",function(index){setItems(index,self.json_Model,self)})}function carouselChange(e){w3n.cogs.whatsnew.state.index.setValue(this.carousel.slide_index||0);this.$el.find(".whatsnew-content").removeClass("opened");for(var i=0,l=this.items.length;i<l;i++){var item=this.items[i];item.reset()}}function generateArticleItem(article,self){var item_model={attributes:article};return new w3n.cogs.whatsnew.views.medium_item({model:item_model,medium_methods:self.params.medium_methods})}function appendItem(article,self){var article_item=generateArticleItem(article,self);self.items.push(article_item);return article_item}function clearItems(self){self.items=[];self.carousel.reset()}function setItems(index,data,self){if(self.carousel.hasNotItem(index)){var item;var entry=data.entries[index];item=appendItem(entry,self);item.render();self.carousel.appendItem({index:index,view:item.$el})}self.carousel.setDefPointer(w3n.cogs.whatsnew.state.index.value)}})();(function(){w3n.cogs.awards.large=app.base.views.BaseView.extend({name:"awards",template:w3n.templates.cogs.awards["awards-large.html"],initialize:function(opts){app.base.views.BaseView.prototype.initialize.apply(this,arguments);var giveTabTemplate=new app.base.views.BaseView({template:w3n.templates.cogs.awards["give-tab.html"]});var historyTabTemplate=new app.base.views.BaseView({template:w3n.templates.cogs.awards["history-tab.html"],model:opts.awardsModel.getSubStructure("awards")});this.tabComponent=new w3n.components.Tabs({tabs:[{tabKey:"give",tabTitle:"Give Recognition",view:giveTabTemplate},{tabKey:"history",tabTitle:"History",view:historyTabTemplate}],tabFetch:true});this.private=true;this.privacyInitted=false;var self=this;this.listenTo(this.tabComponent,"tabChange",function(tabKey){if(tabKey==="history"){if(!self.privacyInitted){self.privacyInit();self.privacyInitted=true}self.$(".privacy-msg").show()}else{self.$(".button-wrap").hide();self.$(".awards-large").removeClass("blurred");self.$(".privacy-msg").hide()}})},render:function(){app.base.views.BaseView.prototype.render.call(this,arguments);this.tabComponent.subviewEl=this.$(".awards-large");this.tabComponent.setElement(this.$el.find(".awards-tab-container"));this.tabComponent.render();this.tabComponent.selectTab("give")},events:{"click .awards-privacy-button":"privacyButton"},privacyInit:function(){this.$(".awards-privacy-button").show();this.$(".button-wrap").show();this.$(".awards-large").addClass("blurred")},privacyButton:function(){w3n.utils.metrics.tagCogEvent("click","button","Privacy screen","awards card","Private data, visible to you and your management.","none");this.$(".awards-privacy-button").hide();this.$(".button-wrap").hide();this.$(".awards-large").removeClass("blurred");this.private=false}})})();(function(){var templates={large:w3n.templates.cogs.compensation["large.html"]};var Tab=app.base.views.BaseView.extend({className:"content"});var Large=app.base.views.BaseView.extend({template:templates.large,initialize:function(opts){app.base.views.BaseView.prototype.initialize.apply(this,arguments);opts=opts||{};this.blackoutStart=opts.blackoutStart;this.blackoutEnd=opts.blackoutEnd;this.tabViews=new w3n.components.Tabs({tabs:opts.tabs})},render:function(){var now=moment();if(now>=this.blackoutStart&&now<=this.blackoutEnd){this.$el.html(Mustache.render(templates.large,{blackout:true,blackoutEndDate:moment(awf.flags._feature_data.cogs.compensation.blackout.date.before).format("MMMM Do YYYY")}))}else{app.base.views.BaseView.prototype.render.apply(this,arguments);var $tabContainer=this.$(".tabs-container");var $tabContent=this.$(".tabs-content");if(this.tabViews.$el!==$tabContainer)this.tabViews.setElement($tabContainer);if(this.tabViews.subviewEl!==$tabContent)this.tabViews.subviewEl=$tabContent;this.tabViews.selectTab(this.tabViews.activeFocus)}}});var views={Large:Large,Tab:Tab};w3n.cogs.compensation.views=views})();(function(){var Large=app.base.views.BaseView.extend({name:"profile-info-large",template:w3n.templates.cogs["profile-info"]["profile-info-large.html"],events:{"click .privacy-msg a":"handleUpdateData","click .personal-info-privacy-button":"handleClickPrivacy"},handleUpdateData:function(){w3n.utils.metrics.tagCogEvent("click","button","Large card body",this.name,"Update your data","none")},handleClickPrivacy:function(e){this.$el.find(".button-wrap").hide();this.$el.find(".privacy-msg").show();this.$el.find(".personal-info").removeClass("blurred");w3n.utils.metrics.tagCogEvent("click","button","Large card body",this.name,"Privacy button","none")}});var Medium=app.base.views.BaseView.extend({name:"profile-info-medium",template:w3n.templates.cogs["profile-info"]["profile-info-medium.html"],initialize:function(options){options=options||{};this.helpers=options.helpers},events:{"click .flip-1":"handleViewMore","click .icon-holder":"handleClickIcon","click .header h2":"handleHeaderClick"},handleViewMore:function(){this.helpers.flipCard();w3n.utils.metrics.tagCogEvent("click","button","Medium card body",this.name,"See more about your profile?","none")},handleClickIcon:function(e){w3n.utils.metrics.tagCogEvent("click","button","Medium card title",this.name,"open icon","none")},handleHeaderClick:function(m){w3n.utils.metrics.tagCogEvent("click","button","Medium card title",this.name,"Personal Information","none")}});var HomeAddress=app.base.views.BaseView.extend({name:"profile-home-address",template:w3n.templates.cogs["profile-info"]["profile-home-address.html"]});var BusinessAddress=app.base.views.BaseView.extend({name:"profile-business-address",template:w3n.templates.cogs["profile-info"]["profile-business-address.html"]});var Contact=app.base.views.BaseView.extend({name:"profile-contact",template:w3n.templates.cogs["profile-info"]["profile-contact.html"]});var Emergency=app.base.views.BaseView.extend({name:"profile-emergency",template:w3n.templates.cogs["profile-info"]["profile-emergency.html"]});var views={Large:Large,Medium:Medium,HomeAddress:HomeAddress,BusinessAddress:BusinessAddress,Contact:Contact,Emergency:Emergency};w3n.cogs.profileInfo.views=views})();(function(){var firstLineTPServices="cogs.talentplaybook.dashboard.first-line-tp-services";w3n.cogs.talentplaybook.views.Large=app.base.views.BaseView.extend({initialize:function(options){options=options||{};this.id=options.id||awf.user.info.cnum;this.currentUser=options.currentUser||{};this.currentPeriod={value:moment(new Date).startOf("month").format("YYYYMM"),text:moment(new Date).startOf("month").format("MMMM YYYY")};this.currentDashboard=w3n.currentDashboard;this.dashboardProperties=w3n.tpConfig.dashboards[options.currentDashboard];this.modelDef=this.switchModelDefinition(this.currentDashboard);this.compositeModel=new this.modelDef({cnum:awf.user.info.cnum});this.filterSetting="global";this.cacheNeedsUpdate=false;if(_.isEmpty(this.compositeModel.mergedSubCollection)){this.collection=new app.base.collections.BaseCollection}else{this.collection=new app.base.collections.BaseCollection(this.compositeModel.mergedSubCollection.toJSON())}app.base.views.BaseView.prototype.initialize.call(this,options);this.uplineManagerModels.push(this.compositeModel);this.listenToCompositeModel();if(w3n.currentDashboard==="expenses"){this.tpUser=awf.user.info.cnum;w3n.cogs.talentplaybook.tpUser=awf.user.info.cnum}else{this.tpUser=this.id;w3n.cogs.talentplaybook.tpUser=this.id}this.tpAlertsSummary[this.tpUser]={};w3n.cogs.talentplaybook.LargeCardAlertBadge={};w3n.cogs.talentplaybook.LargeCardAlertBadge[this.tpUser]={};w3n.cogs.talentplaybook.tpAlertsSummary={};this.tpReadUnread={};w3n.cogs.talentplaybook.isAsync=w3n.cogs.talentplaybook.isAsync||false},className:"talentplaybook-large-container",template:w3n.templates.cogs.talentplaybook["talentplaybook-large.html"],drillDownTemplate:w3n.templates.cogs.talentplaybook["tpb-manager-drilldown.html"],modelDef:null,uplineManagerModels:[],periodModels:[],focusbarTemplate:w3n.templates.cogs.talentplaybook["tpb-focusbar.html"],mgrhubDropdown:null,currentDashboard:null,tabBarView:null,dashboardtableHeader:null,UIAlertBadge:{},hasTpSummary:false,tpAlertsSummary:{},tpReadUnread:{},alerts:{},isInit:true,events:{"click .expand-btn":"toggleAccordion","click .csv-button":"buildCSV","click .team-toggle":"filterGlobalIncountry","click .person-link .count-badge":"toggleAccordion","click .intro-toggle-btn":"toggleIntroSection","mouseover a.definition":"showDefinitionTooltip","mouseout a.definition":"hideDefinitionTooltip","mouseover div.showtooltip":"showDefinitionTooltip","mouseout div.showtooltip":"hideDefinitionTooltip","click th":"sortColumn","click .tab-dropdown":"switchTabs","click .gridelement":"switchTabs","click .card":"closeMenu","click .manager-drilldown-holder":"toggleManagerDrillDown","click .manager-list-item button":"fetchSubTeam","click .reports i":"fetchSubTeam","click .mark-as-read":"markReadUnreadButton","click .mark-as-unread":"markReadUnreadButton","click .month-year-holder":"toggleMonthYearList","click .month-year-list-item button":"fetchSubTeam","click .wwer-row":"createWWER","click .ldv-row":"createLDV","click .cb-row":"createCB"},createWWER:function(e){var uid=$(e.target).closest("tr.talent-row").data("uid");var wwerId=$(e.target).closest("tr.wwer-row").data("id");var ExpensesModel=new w3n.serviceModels.ExpensesDashboard.wwerExpenses({reportId:wwerId});var ExceptionsModel=new w3n.serviceModels.ExpensesDashboard.wwerExceptions({reportId:wwerId});var WWERTemplate=w3n.templates.cogs.talentplaybook["report-wwer.html"];var data=this.compositeModel.mergedSubCollection.get(uid).toJSON();var avatarPartial;var htmlContent;var compositeModel=w3n.cogs.talentplaybook.CompositeModel.extend({initialize:function(attrs,opts){w3n.cogs.talentplaybook.CompositeModel.prototype.initialize.call(this,arguments);this.addCollection("expenses",ExpensesModel,null,null,{});this.addCollection("exceptions",ExceptionsModel,null,null,{})}});var model=new compositeModel;var generateReport=function(){this.getAvatar(data).then(function(html){var exceptionsCol=model.subCollectionsMap.exceptions.models;avatarPartial=html;htmlContent=Mustache.render(WWERTemplate,{expenses:model.subCollectionsMap.expenses.models[0].attributes.data,total:model.subCollectionsMap.expenses.models[0].attributes.total,curr:model.subCollectionsMap.expenses.models[0].attributes.curr,exceptions:exceptionsCol,model:data,hasExceptions:exceptionsCol.length>=1&&_.keys(exceptionsCol[0].attributes).length>1},{avatarPartial:avatarPartial});var modal=new w3n.components.Report({parent:$(".talentplaybook-large"),height:this.$el.height()+52,width:this.$el.width()+164,content:htmlContent,reportData:model.subCollectionsMap.exceptions.toJSON(),report2Data:model.subCollectionsMap.expenses.models[0].attributes.data,className:"wwer-takeover-content",title:"Manage Team Topics"})}.bind(this))}.bind(this);model.fetch().then(generateReport,generateReport)},createLDV:function(e){var date=$(e.target).data("id");var uid=$(e.target).closest("tr.talent-row").data("uid");var LDVModel=new w3n.serviceModels.ExpensesDashboard.ldv({date:date});var DLVTemplate=w3n.templates.cogs.talentplaybook["report-ldv.html"];var data=this.compositeModel.mergedSubCollection.get(uid).toJSON();var avatarPartial;var htmlContent;LDVModel.fetch().then(function(){this.getAvatar(data).then(function(html){var collection=[],reportData=[],total_amount=0;collection=this.filterExpensesByCNUM(LDVModel.models[0].attributes.data.data,uid);avatarPartial=html;_.forEach(collection,function(item){total_amount+=item.total});_.forEach(LDVModel.models[0].attributes.reportData,function(item){if(item.CNUM==uid){reportData.push(item)}});htmlContent=Mustache.render(DLVTemplate,{collection:collection,total:total_amount,curr:LDVModel.models[0].attributes.data.curr,month:LDVModel.models[0].attributes.data.month,year:LDVModel.models[0].attributes.data.year,model:data},{avatarPartial:avatarPartial});var modal=new w3n.components.Report({parent:$(".talentplaybook-large"),height:this.$el.height()+52,width:this.$el.width()+164,content:htmlContent,reportData:reportData,className:"ldv-takeover-content",title:"Manage Team Topics"})}.bind(this))}.bind(this))},createCB:function(e){var date=$(e.target).data("id");var uid=$(e.target).closest("tr.talent-row").data("uid");var CBModel=new w3n.serviceModels.ExpensesDashboard.cb({date:date});var CBTemplate=w3n.templates.cogs.talentplaybook["report-cb.html"];var data=this.compositeModel.mergedSubCollection.get(uid).toJSON();var avatarPartial;var htmlContent;CBModel.fetch().then(function(){this.getAvatar(data).then(function(html){var collection=[],reportData=[],total_amount=0;collection=this.filterExpensesByCNUM(CBModel.models[0].attributes.data.data,uid);avatarPartial=html;w3n.superModel=CBModel;_.forEach(collection,function(item){total_amount+=item.total});_.forEach(CBModel.models[0].attributes.reportData,function(item){if(item.CNUM==uid){reportData.push(item)}});htmlContent=Mustache.render(CBTemplate,{collection:collection,total:total_amount,curr:CBModel.models[0].attributes.data.curr,month:CBModel.models[0].attributes.data.month,year:CBModel.models[0].attributes.data.year,model:data},{avatarPartial:avatarPartial});var modal=new w3n.components.Report({parent:$(".talentplaybook-large"),height:this.$el.height()+52,width:this.$el.width()+164,content:htmlContent,reportData:reportData,className:"cb-takeover-content",title:"Manage Team Topics"})}.bind(this))}.bind(this))},filterExpensesByCNUM:function(expenses,cnum){var collection=[],uid="";collection=expenses;uid=cnum;if(collection.length>0){_.forEach(collection,function(item){var total=0;item.models=_.remove(item.models,function(expense){return expense.CNUM==uid});_.forEach(item.models,function(n){total+=parseFloat(n.AMOUNTPAID)});item.total=_.round(total,2)});_.remove(collection,function(item){return item.total===0})}return collection},closeMenu:function(e){var $el=this.$el.find(".manager-drilldown-level-1");var $target=$(e.target).closest(".manager-drilldown-holder");if(!$target.length){if($el.is(":visible")){$el.toggle(false);this.$el.find(".manager-drilldown-holder").find(".manager-drilldown span").text(this.currentUser.name)}}},sortColumn:function(e){if(awf.flags.isActive("cogs.talentplaybook.dashboard.table-sort")){e.preventDefault();var scrollLoc=this.$el.find(".tab-content.scroll-card").scrollTop();this.closeAllAccordions();var $el=$(e.currentTarget);var ns=$el.attr("sort");if(ns!=="false"&&$el.attr("class")!=="person-link-header"){var cs=this.collection.sortAttribute;if(ns==cs){this.collection.sortDirection*=-1}else{this.collection.sortDirection=1}this.collection.sortDashboard(ns);this.render();this.$el.find(".tab-content.scroll-card").scrollTop(scrollLoc)}}},showDefinitionTooltip:function(e){if(awf.flags.isActive("cogs.talentplaybook.example-definition")){this.hover=true;$(".qtip").remove();var target=e.currentTarget;var $task=$(e.currentTarget);var data={displayText:$(e.target).data("definition"),field:"field"};var tooltip=new w3n.components.tooltip({model:new app.base.models.BaseModel(data),target:target,template:w3n.templates.components.tooltip["definition.html"],style:{classes:"definitionTooltip",width:"auto",height:"auto"},position:{my:"top left",at:"bottom right",target:$task}})}},hideDefinitionTooltip:function(e){setTimeout(function(){if(this.hover===false)$(".qtip").remove()}.bind(this),500)},toggleIntroSection:function(ev){ev.preventDefault();$(ev.target).closest(".intro-block").toggleClass("open");if($(ev.target).attr("aria-expanded")==="false"){$(ev.target).attr("aria-expanded",true)}else{$(ev.target).attr("aria-expanded",false)}$(ev.target).find(".expand-btn").toggleClass("icon-awf-op-plus").toggleClass("icon-awf-op-minus");$(ev.target).siblings(".expand-btn").toggleClass("icon-awf-op-plus").toggleClass("icon-awf-op-minus");var action=$(ev.target).closest(".intro-block").hasClass("open")?"Opened Intro Section":"Closed Intro Section";w3n.utils.metrics.tagCogEvent(action,action,"Intro Section",w3n.currentDashboard,"Manager Hub","none")},toggleReadUnread:function(isRead,empCnum,categoryId,noticeId,alertHolder,categoryList){var self=this;var model=new w3n.serviceModels.isReadTPB({isRead:isRead,empCnum:empCnum,noticeId:noticeId});model.save().done(function(response){if(awf.flags.isActive("cogs.talentplaybook.dashboard.read-unread-fix")){if(!self.tpReadUnread[self.tpUser]){self.tpReadUnread[self.tpUser]={}}}if(alertHolder){if(alertHolder.hasClass("neverRead")){alertHolder.removeClass("neverRead").addClass("read")}else if(isRead===true){if(awf.flags.isActive("cogs.talentplaybook.dashboard.read-unread-fix")){_.forEach(noticeId.split(","),function(noticeId){if(!self.tpReadUnread[self.tpUser][empCnum]){self.tpReadUnread[self.tpUser][empCnum]={};self.tpReadUnread[self.tpUser][empCnum][noticeId]={noticeType:"read",noticeId:noticeId}}else{self.tpReadUnread[self.tpUser][empCnum][noticeId]={noticeType:"read",noticeId:noticeId}}})}if(awf.flags.isActive("cogs.talentplaybook.dashboard.new-alert-badge-large")){if(categoryList===""){self.tpAlertsSummary[self.tpUser].subtractOne(String(empCnum),String(categoryId))}else{_.forEach(categoryList.split(","),function(item){self.tpAlertsSummary[self.tpUser].subtractOne(String(empCnum),String(item))})}self.renderTPAlertsSummary()}alertHolder.removeClass("unread");alertHolder.addClass("read")}else{if(awf.flags.isActive("cogs.talentplaybook.dashboard.read-unread-fix")){_.forEach(noticeId.split(","),function(noticeId){if(!self.tpReadUnread[self.tpUser][empCnum]){self.tpReadUnread[self.tpUser][empCnum]={};self.tpReadUnread[self.tpUser][empCnum][noticeId]={noticeType:"unread",noticeId:noticeId}}else{self.tpReadUnread[self.tpUser][empCnum][noticeId]={noticeType:"unread",noticeId:noticeId}}})}if(awf.flags.isActive("cogs.talentplaybook.dashboard.new-alert-badge-large")){if(categoryList===""){self.tpAlertsSummary[self.tpUser].addOne(String(empCnum),String(categoryId))}else{_.forEach(categoryList.split(","),function(item){self.tpAlertsSummary[self.tpUser].addOne(String(empCnum),String(item))})}self.renderTPAlertsSummary()}alertHolder.removeClass("read");alertHolder.addClass("unread")}w3n.cogs.talentplaybook.tpAlertsSummary[self.tpUser]=self.tpAlertsSummary[self.tpUser];alertHolder.find(".read-unread-loading").removeClass("loading");alertHolder.find("button").attr("disabled",false);if(!awf.flags.isActive("cogs.talentplaybook.dashboard.new-alert-badge-large")){var currTab=alertHolder.closest(".alert-section-row").data("currtab");var currTable=$("#"+currTab).closest("table");var currDash=w3n.currentDashboard;var displayCount=0;var headerDisplayCount=0;var totalDisplayCount=0;$.each($("."+currTab+" .alert-holder"),function(){if($(this).hasClass("unread")){displayCount++}});if(displayCount<=0){$("."+currTab+" .person-link .count-badge").text("").addClass("off")}else{$("."+currTab+" .person-link .count-badge").removeClass("off").text(displayCount)}$.each(currTable.find(".person-link  .count-badge"),function(){if(!isNaN(parseInt($(this).text()))){headerDisplayCount+=parseInt($(this).text())}});if(headerDisplayCount<=0){$(".totalAlertsCount").text("");$("#"+currDash+"-title .header-badge, #"+currDash+" .header-badge").addClass("off")}else{$(".totalAlertsCount").text(headerDisplayCount);$("#"+currDash+"-title .header-badge, #"+currDash+" .header-badge").removeClass("off").text(headerDisplayCount)}$.each($(".gridmenu .count-badge"),function(){if(!isNaN(parseInt($(this).text()))){totalDisplayCount+=parseInt($(this).text())}});if(totalDisplayCount<=0){$(".talentplaybook-large .totalAlertsCount").addClass("off")}else{$(".talentplaybook-large .totalAlertsCount").removeClass("off").text(totalDisplayCount)}}}this.cacheNeedsUpdate=true}.bind(this)).fail(function(error){console.log("ERROR Updated Read Status");console.log(error);console.log("---------------------------")})},updateReadUnreadCollection:function(){_.forEach(this.tpReadUnread[this.tpUser],function(emp,key){var alertsModel=_.find(this.compositeModel.mergedSubCollection.models,function(o){if(o.attributes.supplemental){return o.attributes.supplemental.cnum===String(key)}});_.forEach(emp,function(notice){if(alertsModel){_.map(alertsModel.attributes.allNotices,function(item){if(item.noticeId===notice.noticeId){item.noticeType=notice.noticeType}}.bind(this))}}.bind(this))}.bind(this))},toggleAccordion:function(e){e.preventDefault();var targetOpen="."+$(e.target).data("uid");var currCnumForToggle=$(e.target).closest(".talent-row").data("cnum");$(targetOpen+" .showhide").toggleClass("visible");$(targetOpen).toggleClass("showSubRow");$(targetOpen+" .expand-btn").toggleClass("icon-awf-op-plus").toggleClass("icon-awf-op-minus");
if(awf.flags.isActive("cogs.talentplaybook.read-unread")){var noticeIdList="";var categoryIdList="";setTimeout(function(){$.each($(targetOpen+".alert-section-row .alert-holder"),function(){noticeIdList+=$(this).attr("data-noticeid").toString()+","});$.each($(targetOpen+".alert-section-row .alert-holder"),function(){categoryIdList+=$(this).attr("data-categoryId").toString()+","});noticeIdList=noticeIdList.slice(0,-1);categoryIdList=categoryIdList.slice(0,-1);if(noticeIdList&&$(targetOpen+" .showhide").hasClass("visible")){this.toggleReadUnread(true,currCnumForToggle,"3",noticeIdList,$(targetOpen+".alert-section-row .alert-holder"),categoryIdList)}}.bind(this),250)}var action=$(targetOpen).hasClass("showSubRow")?"Opened Accordion":"Closed Accordion";w3n.utils.metrics.tagCogEvent(action,action,"Dashboard",w3n.currentDashboard,"Manager Hub","none")},markReadUnreadButton:function(e){var alertHolder=$(e.target).closest(".alert-holder");var noticeId=$(e.target).closest(".alert-holder").data("noticeid");var categoryId=$(e.target).closest(".alert-holder").data("categoryid");var currCnum=$(e.target).closest(".alert-section-row").data("currcnum");var isRead=true;if(alertHolder.hasClass("read")){isRead=false}else{isRead=true}$(e.target).attr("disabled","disabled");alertHolder.find(".read-unread-loading").addClass("loading");this.toggleReadUnread(isRead,currCnum,categoryId,noticeId,alertHolder,"")},closeAllAccordions:function(){$(".showhide").removeClass("visible");$(".alert-section-row").removeClass("showSubRow");$(".additional-section-row").removeClass("showSubRow");$(".expand-btn").addClass("icon-awf-op-plus").removeClass("icon-awf-op-minus")},updatecollection:function(){this.collection=_.isEmpty(this.compositeModel.mergedSubCollection)?new app.base.collections.BaseCollection:this.compositeModel.mergedSubCollection},render:function(){this.collection=_.isEmpty(this.compositeModel.mergedSubCollection)?new app.base.collections.BaseCollection:this.compositeModel.mergedSubCollection;if(awf.flags.isActive("cogs.talentplaybook.dashboard.read-unread-fix")){this.updateReadUnreadCollection()}var sortAttr=this.collection.sortAttribute;var sortDir=this.collection.sortDirection;var collection=this.collection.toJSON();var bcgCollection=null;if(this.collectionBcg){bcgCollection=collectionBcg.toJSON}var relatedCollection=null;if(this.collectionRelated){relatedCollection=collectionRelated.toJSON}var obj=w3n.tpConfig.dashboards;var dashboardArray=w3n.getDashboardArray();var dashboardTemplates={};for(var i=0;i<dashboardArray.length;i++){var name=dashboardArray[i].dashName;var template=dashboardArray[i].dashTemplate;dashboardTemplates[name]=template;if(name==="expertise"){dashboardArray[i].hasDashboardTable=dashboardArray[i].isexpertise=awf.flags.isActive("cogs.talentplaybook.dashboard.expertise.tp-bluegroups")}}var monthYearList;if(this.currentDashboard==="expenses"){monthYearList=this.setupMonthYearList()}var isCheckpointActive;if(awf.flags.isActive("cogs.talentplaybook.dashboard.checkpoint-columns")){isCheckpointActive=true}else{isCheckpointActive=false}dashboardData={collection:collection,dashboards:dashboardArray,totalCount:collection.length,s:collection.length===1?"":"s",monthYearList:monthYearList,currentPeriod:this.currentPeriod,isCheckpointActive:isCheckpointActive};var html=Mustache.render(this.template,dashboardData,dashboardTemplates);this.$el.html(html);this.renderAvatars();if(w3n.currentDashboard==="expenses"){this.getExpenseList(dashboardData.collection)}if(w3n.currentDashboard==="performance"&&!awf.flags.isActive("cogs.talentplaybook.dashboard.performance.ataglance")){$(".ataglance-block").toggle()}if(!awf.flags.isActive("cogs.talentplaybook.tasks")){$(".tasks-section").css("display","none");setTimeout(function(){$('.navtabs[data-navid="Tasks"]').toggle()},100)}this.setupDrillDownManager();this.setupFocusbar();if(!awf.flags.isActive("cogs.talentplaybook.csv-download")){$(".csv-holder").css("display","none")}if(!w3n.currentDashboard){w3n.currentDashboard="yourteam"}this.renderTabs();this.mgrhubDropdown.show(w3n.currentDashboard);if(!awf.flags.isActive("cogs.talentplaybook.example-definition")){$("a.definition").css("display","none")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.table-sort")){if(sortDir==1){this.$(".talent-table").find("th:not(:first-child)").append($("<div>")).closest("thead").find("div").addClass("none").end().find('[sort="'+sortAttr+'"] div').removeClass("none").addClass("sortAsc")}else{this.$(".talent-table").find("th:not(:first-child)").append($("<div>")).closest("thead").find("div").addClass("none").end().find('[sort="'+sortAttr+'"] div').removeClass("none").addClass("sortDsc")}}this.renderRelatedLinks(this.id);this.filterGlobalIncountry(this.filterSetting);this.renderTasks();if(awf.flags.isActive("cogs.talentplaybook.dashboard.performance.ataglance")){if(w3n.currentDashboard==="performance"){this.renderTeamAtAGlance(this.id)}}else{this.$("#ataglance").remove()}setTimeout(function(){if(awf.flags.isActive("cogs.talentplaybook.dashboard.yourteam.download")){$("#yourteam-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.performance.download")){$("#performance-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.expertise.download")){$("#expertise-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.compensation.download")){$("#compensation-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.leadership.download")){$("#leadership-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.global.download")){$("#global-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.diversity.download")){$("#diversity-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.bcg.download")){$("#bcg-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.dates.download")){$("#dates-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.emergency.download")){$("#emergency-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.security.download")){$("#security-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.benefits.download")){$("#benefits-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.jobs.download")){$("#jobs-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.travel.download")){$("#travel-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.assets.download")){$("#assets-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.expenses.download")){$("#expenses-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.time.download")){$("#time-dashboard .csv-holder").css("display","block")}if(awf.flags.isActive("cogs.talentplaybook.dashboard.awards.download")){$("#awards-dashboard .csv-holder").css("display","block")}$(".csv-button").removeClass("off")},500);if(this.tabBarView!==null){this.setupTabBar("destroy")}this.setupTabBar("render");if(awf.flags.isActive("cogs.talentplaybook.dashboard.dashboard-sticky-header")){this.setupTableHeader("render")}this.currentUser.name=this.id===awf.user.info.cnum?awf.user.info.name:this.compositeModel.get("fullname");this.$el.find(".manager-drilldown-holder").find(".manager-drilldown span").text(this.currentUser.name);if(awf.flags.isActive("cogs.talentplaybook.dashboard.new-alert-badge-large")){if(this.compositeModel){_.forEach(this.compositeModel.subCollectionsMap,function(col){if(col instanceof w3n.serviceModels.DashboardAlerts.Collection){if(!col.async){w3n.cogs.talentplaybook.isAsync=false;var tpUser=this.tpUser;if(!this.tpAlertsSummary[tpUser].hasTpSummary){var alertsCol=this.compositeModel.subCollectionsMap.alerts.toJSON();this.tpAlertsSummary[tpUser]=new w3n.serviceModels.AlertSummary({collection:alertsCol});this.tpAlertsSummary[tpUser].hasTpSummary=true;w3n.cogs.talentplaybook.tpAlertsSummary[tpUser]=this.tpAlertsSummary[tpUser];var notification=this.setNotification("success","TalentPlaybook alerts loaded successfully","9999");notification.andDismissIn(5)}this.renderTPAlertsSummary()}if(col.async){if(this.tpAlertsSummary[this.tpUser].hasTpSummary){this.renderTPAlertsSummary()}w3n.cogs.talentplaybook.isAsync=true}}}.bind(this))}}if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services")){this.renderAlerts(this.id);if(awf.flags.isActive("cogs.talentplaybook.dashboard.new-alert-badge-large")){this.renderTaskAlertsSummary()}}},setupTableHeader:function(option){if(option==="render"){var $targetTable=this.$(".tab-pane[aria-labelledby="+w3n.currentDashboard+"]").find(".talent-table");var tableHeader=new w3n.components.TableScrollHeader({$stickytableHeaderContainer:this.$(".dashboard-header .stickyTable"),$targetTable:$targetTable,scrollContainer:".scroll-card"});tableHeader.setElement(this.$(".dashboard-header .stickyTable"));tableHeader.render();this.dashboardtableHeader=tableHeader}else{this.dashboardtableHeader.destroy()}},setupTabBar:function(option){if(option==="render"){var tabArray=[];this.$(".tab-pane[aria-labelledby="+w3n.currentDashboard+"]").find("[data-navigation]").each(function(index){tabArray[index]={name:$(this).data("navigation-name"),id:$(this).data("navigation"),$element:$(this)}});var tabBar=new w3n.components.NavigationTabs({tabs:tabArray,scrollContainer:".scroll-card",padding:5,$container:this.$(".navigation-Tab")});tabBar.setElement(this.$(".navigation-Tab"));tabBar.render();this.tabBarView=tabBar}else{this.tabBarView.destroy()}},setupDrillDownManager:function(){var d=$.Deferred();if(awf.flags.isActive("cogs.talentplaybook.dashboard.manager-drilldown")){if(this.modelDef!==w3n.cogs.talentplaybook.models.Expenses){var drillDownModel=new w3n.cogs.talentplaybook.ManagerDrillDown({id:awf.user.info.cnum});var drillDownView=new app.base.views.BaseView({el:this.$el.find(".manager-drilldown-level-1"),template:this.drillDownTemplate,collection:drillDownModel});drillDownModel.fetch();drillDownView.stopListening(drillDownModel,"sync");drillDownView.listenTo(drillDownModel,"sync",function(){drillDownView.render({userid:awf.user.info.cnum,username:awf.user.info.name});this.uplineManagerModels=[new this.modelDef({cnum:awf.user.info.cnum})];_.forEach(drillDownModel.toJSON(),function(model){var compositeModel=new this.modelDef({cnum:model.uid});compositeModel.set("fullname",model.name.first+" "+model.name.last);this.uplineManagerModels.push(compositeModel)}.bind(this));d.resolve()}.bind(this));this.$el.find(".manager-drilldown-holder").css("visibility","visible");this.$el.find(".manager-drilldown-holder").find(".manager-drilldown span").text(this.currentUser.name)}}return d.promise()},setupMonthYearList:function(){this.periodModels=[];var monthYearList=[];var monthYear=moment(new Date).startOf("month");while(monthYearList.length<24){var text=monthYear.format("MMMM YYYY");var value=monthYear.format("YYYYMM");monthYearList.push({text:text,value:value});monthYear=monthYear.subtract(1,"months");var compositeModel=new w3n.cogs.talentplaybook.models.Expenses({period:value});compositeModel.set("period",value);this.periodModels.push(compositeModel)}return monthYearList},setupFocusbar:function(){if(awf.flags.isActive("cogs.talentplaybook.dashboard.focus-bar")){this.$el.find(".menuicon").addClass("icon-awf-grid-3x3").removeClass("icon-awf-chevron-down");var dashboardArray=w3n.getDashboardArray();var focusbarView=new app.base.views.BaseView({el:this.$el.find(".gridmenu"),template:this.focusbarTemplate});focusbarView.render({dashboards:dashboardArray})}},renderTabs:function(){if(awf.flags.isActive("cogs.talentplaybook.dashboard.focus-bar")){this.mgrhubDropdown=new w3n.components.MgrhubDropdownNew}else{this.mgrhubDropdown=new w3n.components.MgrhubDropdown}},filterGlobalIncountry:function(e){var teamGroup;if(typeof e==="string"){teamGroup=e}else{e.preventDefault();teamGroup=$(e.target).data("team")}this.closeAllAccordions();$(".talent-row").removeClass("on");if(teamGroup==="allteams"){$(".talent-row").addClass("on")}else{$(".team-"+teamGroup).addClass("on")}$(".team-toggle").removeClass("current");$("."+teamGroup+"-toggle").addClass("current");this.filterSetting=teamGroup},buildCSV:function(e){e.preventDefault();var self=this;if(awf.flags.isActive("cogs.talentplaybook.csv-download")){var supplementalData;var currDashboardName=$(e.target).data("dashboard");var currDashboardCategories=w3n.tpConfig.dashboards[currDashboardName].categories;var dashboard=this.collection.toJSON();var CSVOutput=[];var blockedText='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';var replaceBlockedText="XXXXXXX";var supplementalFields=["cnum","band","yearsInBand","pbcYear1","pbcYear2","pbcYear3","careerFramework","tldrType","btl","subBand","think40","sexCode","pmr","lk","jobCategory","mppLevel","piiLevel","iot","promoEligible","pa","ptlrisk","country","currentPBC","priorPrevPBC","previousPBC"];var getByAttr=function(list,key,value){for(var o in list){if(list[o][key]==value)return list[o]}return undefined};var alerts=new w3n.serviceModels.DashboardAlerts.Collection;var setCSV=function(){var maskDashboardField=function(fieldValue){if(fieldValue===blockedText){fieldValue=replaceBlockedText}return fieldValue};var maskAlertData=function(index,value){if(value==="X"||value==="x"){var fieldName=index.replace(/mask/gi,"");supplementalData[fieldName]=replaceBlockedText}};_.forEach(dashboard,function(entry,k){var csvItem={};csvItem.CNUM=dashboard[k].id;csvItem.name=maskDashboardField(dashboard[k].fullname);if(currDashboardName==="yourteam"){csvItem.Position=maskDashboardField(dashboard[k].position);csvItem.Status=maskDashboardField(dashboard[k].status);csvItem.Employee_Type=maskDashboardField(dashboard[k].employeeType)}else if(currDashboardName==="bcg"){if(dashboard[k].bcgIsExemptFlag&&dashboard[k].bcgIsExemptFlag.toUpperCase()==="X"){dashboard[k].exempt=replaceBlockedText}if(dashboard[k].bcgCompletionDateFlag&&dashboard[k].bcgCompletionDateFlag.toUpperCase()==="X"){dashboard[k].bcgCompletionDate=replaceBlockedText}if(dashboard[k].bcgCertificateDateFlag&&dashboard[k].bcgCertificateDateFlag.toUpperCase()==="X"){dashboard[k].bcgCertificateDate=replaceBlockedText}if(dashboard[k].bcgCourseCompletionDateFlag&&dashboard[k].bcgCourseCompletionDateFlag.toUpperCase()==="X"){dashboard[k].bcgCourseCompletionDate=replaceBlockedText}if(dashboard[k].exempt!==""&&dashboard[k].exempt!==replaceBlockedText){csvItem.BCG_Completion=dashboard[k].exempt;csvItem.BCG_Completion_Date=dashboard[k].exempt;csvItem.BCG_Certificate=dashboard[k].exempt;csvItem.BCG_Certificate_Date=dashboard[k].exempt;csvItem.BCG_Course_Completion=dashboard[k].exempt;csvItem.BCG_Course_Completion_Date=dashboard[k].exempt}else{if(dashboard[k].bcgCompletionDate!==""){csvItem.BCG_Completion="Yes"}else{csvItem.BCG_Completion="No"}csvItem.BCG_Completion_Date=dashboard[k].bcgCompletionDate;if(dashboard[k].bcgCertificateDate!==""){csvItem.BCG_Certificate="Yes"}else{csvItem.BCG_Certificate="No"}csvItem.BCG_Certificate_Date=dashboard[k].bcgCertificateDate;if(dashboard[k].bcgCourseCompletionDate!==""){csvItem.BCG_Course_Completion="Yes"}else{csvItem.BCG_Course_Completion="No"}csvItem.BCG_Course_Completion_Date=dashboard[k].bcgCourseCompletionDate}}else if(currDashboardName==="compensation"){csvItem.Currency=maskDashboardField(dashboard[k].currency);csvItem.Approximate_Annual_Salary=maskDashboardField(dashboard[k].appAnnualSalary);csvItem.Last_Salary_Change=maskDashboardField(dashboard[k].lastSalaryChangeAmount);csvItem.Last_Salary_Change_Date=maskDashboardField(dashboard[k].lastSalaryChangeDate);csvItem.PMR=maskDashboardField(dashboard[k].pmr);csvItem.Bonus_Pay=maskDashboardField(dashboard[k].bonusPay);csvItem.Awards=maskDashboardField(dashboard[k].awards);csvItem.Holding_Power=maskDashboardField(dashboard[k].holdingPower)}else if(currDashboardName==="dates"){csvItem.dateOfBirth=maskDashboardField("XXXX-"+dashboard[k].dateOfBirth);csvItem.serviceReference=maskDashboardField(dashboard[k].serviceReference);csvItem.serviceLength=maskDashboardField(dashboard[k].serviceLength);csvItem.dateOfHire=maskDashboardField(dashboard[k].dateOfHire)}else if(currDashboardName==="emergency"){var allEmerg=dashboard[k].emergencies;if(allEmerg){_.forEach(allEmerg,function(item,index){csvItem["Emergency_Name_"+(index+1)]=item.emergencyContactName;csvItem["Emergency_Relationship_"+(index+1)]=item.relationship;csvItem["Emergency_Phone_Number_"+(index+1)]=item.phone})}}else if(currDashboardName==="leadership"){csvItem.Extraordinary_Leadership_Potential=maskDashboardField(dashboard[k].extLeadPot);csvItem.BTL_Executive_Potential=maskDashboardField(dashboard[k].btlExecPot);csvItem.BTL_First_Executive_Appointment=maskDashboardField(dashboard[k].timeframe);csvItem.BTL_Senior_Executive_Potential=maskDashboardField(dashboard[k].btlSenExecPot);csvItem.Position=maskDashboardField(dashboard[k].position);csvItem.Service_Reference=maskDashboardField(dashboard[k].serviceReference);csvItem.Service_Length=maskDashboardField(dashboard[k].serviceLength)}else if(currDashboardName==="performance"){csvItem.Business_Results=dashboard[k].businessResultsTextOnly;csvItem.Client_Success=dashboard[k].clientSuccessTextOnly;csvItem.Innovation=dashboard[k].innovationTextOnly;csvItem.Responsibility_to_Others=dashboard[k].responsibilityToOthersTextOnly;csvItem.Skills=dashboard[k].skillsTextOnly;csvItem.Checkpoint_Assessment_Date=dashboard[k].checkpointAssessmentDate;csvItem.Checkpoint_Job_Availability=dashboard[k].checkpointQuestionJobAvailability;csvItem.Checkpoint_Manager_Certification=dashboard[k].checkpointQuestionManagerCertification;csvItem.pbcYear1=maskDashboardField(dashboard[k].pbcYear1);csvItem.pbcYear2=maskDashboardField(dashboard[k].pbcYear2);csvItem.pbcYear3=maskDashboardField(dashboard[k].pbcYear3)}else if(currDashboardName==="expenses"){var chargedDefault_currency=dashboard[k].wwer2.chargedDefaultCurrencyMask?replaceBlockedText:dashboard[k].wwer2.chargedDefaultCurrency;csvItem["Expense Reimbursement: Default Account"]=dashboard[k].wwer2.chargedDefaultMask?replaceBlockedText:dashboard[k].wwer2.chargedDefault+" "+chargedDefault_currency;var chargedOther_currency=dashboard[k].wwer2.chargedOtherCurrencyMask?replaceBlockedText:dashboard[k].wwer2.chargedOtherCurrency;csvItem["Expense Reimbursement: Other Account"]=dashboard[k].wwer2.chargedOtherMask?replaceBlockedText:dashboard[k].wwer2.chargedOther+" "+chargedOther_currency;var otherExpenses_currency=dashboard[k].otherExpensesCurrencyMask?replaceBlockedText:dashboard[k].wwer2.otherExpensesCurrency;csvItem["Other Expenses (CB+LDV)"]=dashboard[k].otherExpensesMask?replaceBlockedText:dashboard[k].otherExpenses+" "+otherExpenses_currency;csvItem["Outstanding Advances"]=dashboard[k].outstandingAdvances+dashboard[k].outstandingAdvancesCur;csvItem["Outstanding Card Charges"]=dashboard[k].outstandingCardCharges+dashboard[k].outstandingCardChargesCur;_.forEach(dashboard[k].wwer,function(value,key){var alert=0,description,amountPaid;if(value.hasDate){if(value.alertsMask){alert=replaceBlockedText}else if(value.hasAlerts){alert=value.alerts}else{alert="No alerts"}if(!value.descriptionMask){description=value.description}else{description=replaceBlockedText}if(!value.amountMask){amountPaid=value.amount}else{amountPaid=replaceBlockedText}if(!value.currencyMask){amountPaid=amountPaid+" "+value.currency}else{amountPaid=amountPaid+" "+replaceBlockedText}if(key===0){csvItem["WWER report"]="("+String(key+1)+")"+"Alerts:"+alert+"\n"+"Description: "+description+"\n"+"Amount Paid: "+amountPaid+"\n\n"}else{csvItem["WWER report"]=csvItem["WWER report"]+"("+String(key+1)+")"+"Alerts:"+alert+"\n"+"Description: "+description+"\n"+"Amount Paid: "+amountPaid+"\n\n"}}else{csvItem["WWER report"]=""}});if(dashboard[k].cb){if(dashboard[k].cb.hasDate){if(dashboard[k].cb.alertsMask){csvItem["CB Alerts"]=replaceBlockedText}else if(dashboard[k].cb.hasAlerts){csvItem["CB Alerts"]=dashboard[k].cb.alerts}else{csvItem["CB Alerts"]="No alerts"}if(!dashboard[k].cb.descriptionMask){csvItem["CB Description"]=dashboard[k].cb.description}else{csvItem["CB Description"]=replaceBlockedText}if(!dashboard[k].cb.amountMask){csvItem["CB - Amount Paid"]=dashboard[k].cb.amount}else{csvItem["CB - Amount Paid"]=replaceBlockedText}if(!dashboard[k].cb.currencyMask){csvItem["CB - Amount Paid"]=csvItem["CB - Amount Paid"]+" "+dashboard[k].cb.currency}else{csvItem["CB - Amount Paid"]=csvItem["CB - Amount Paid"]+" "+replaceBlockedText}}else{csvItem["CB Alerts"]="";csvItem["CB Description"]="";csvItem["CB - Amount Paid"]=""}}if(dashboard[k].ldv){if(dashboard[k].ldv.hasDate){if(dashboard[k].ldv.alertsMask){csvItem["LDV Alerts"]=replaceBlockedText}else if(dashboard[k].ldv.hasAlerts){csvItem["LDV Alerts"]=dashboard[k].ldv.alerts}else{csvItem["LDV Alerts"]="No alerts"}if(!dashboard[k].ldv.descriptionMask){csvItem["LDV Description"]=dashboard[k].ldv.description}else{csvItem["LDV Description"]=replaceBlockedText}if(!dashboard[k].ldv.amountMask){csvItem["LDV - Amount Paid"]=dashboard[k].ldv.amount}else{csvItem["LDV - Amount Paid"]=replaceBlockedText}if(!dashboard[k].ldv.currencyMask){csvItem["LDV - Amount Paid"]=csvItem["LDV - Amount Paid"]+" "+dashboard[k].ldv.currency}else{csvItem["LDV - Amount Paid"]=csvItem["LDV - Amount Paid"]+" "+replaceBlockedText}}else{csvItem["LDV Alerts"]="";csvItem["LDV Description"]="";csvItem["LDV - Amount Paid"]=""}}}csvItem.band=maskDashboardField(dashboard[k].band);csvItem.country=maskDashboardField(dashboard[k].country);csvItem.department=maskDashboardField(dashboard[k].dept);if(currDashboardName!=="compensation"){delete csvItem.appAnnualSalary;delete csvItem.lastSalaryChangeAmount;delete csvItem.lastSalaryChangeDate;delete csvItem.pmr;delete csvItem.bonusPay;delete csvItem.awards;delete csvItem.holdingPower;delete csvItem.btlTalent2014B9;delete csvItem.btlTalent2014B10;delete csvItem.serviceLenght;delete csvItem.currency}if(w3n.tpConfig.dashboards[currDashboardName].hasAlerts){for(var c=1;c<5;c++){csvItem["Talent_Playbook_Category_"+c]="";csvItem["Talent_Playbook_Observation_"+c]="";csvItem["Talent_Playbook_Recommendation_"+c]="";csvItem["Talent_Playbook_Supplemental_Data_Used_"+c]=""}}if(alerts.length>0){_.forEach(alerts,function(item,i){var alertItem=alerts.models[i];var cnum=alertItem.attributes.supplemental.cnum;supplementalData=alertItem.attributes.supplemental;if(cnum===csvItem.CNUM){$.each(supplementalData,maskAlertData);var alertBuild=alertItem.attributes.allNotices;var alertNumber=0;for(var j=0;j<alertBuild.length;j++){if(alertBuild[j].observation||alertBuild[j].recommendation){if(currDashboardCategories.indexOf(alertBuild[j].categoryId)>=0){alertNumber++;csvItem["Talent_Playbook_Category_"+alertNumber]=alertBuild[j].categoryLabel;csvItem["Talent_Playbook_Observation_"+alertNumber]=alertBuild[j].observation;csvItem["Talent_Playbook_Recommendation_"+alertNumber]=self.stripHTML(alertBuild[j].recommendation);var suppDataUsedIndex="Talent_Playbook_Supplemental_Data_Used_"+alertNumber;for(var ind1=0;ind1<alertBuild[j].supplementalUsed.length;ind1++){var suppFieldName=alertBuild[j].supplementalUsed[ind1];alertBuild[j].supplementalUsed[ind1]=w3n.utils.data.talentplaybook.supplementalFieldNames[suppFieldName];csvItem[suppDataUsedIndex]+=alertBuild[j].supplementalUsed[ind1]+", "}}}}if(supplementalData){_.forEach(supplementalData,function(value,key){if(w3n.utils.data.talentplaybook.supplementalFieldNames[key]){csv_key=w3n.utils.data.talentplaybook.supplementalFieldNames[key].replace(/ /g,"_");csvItem[csv_key]=value}})}}})}CSVOutput.push(csvItem)});var sortByKey=function(array,key){return array.sort(function(a,b){var x=b[key];var y=a[key];return x<y?-1:x>y?1:0})};var newList=sortByKey(CSVOutput,"Talent_Playbook_Category_1");var filename="MH-Dashboard-"+currDashboardName;var message="IBM CONFIDENTIAL";w3n.utils.JSONToCSVConvertor(CSVOutput,filename,true,message)}.bind(this);if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services-new-version")){alerts.fetch().done(function(){setCSV()}.bind(this)).fail(function(err){var notificationWarning=this.setNotification("error","TalentPlaybook service is not available, it will only generate default data.","9997");notificationWarning.andDismissIn(3);setCSV()}.bind(this))}else{setCSV()}}},stripHTML:function(htmlString){if(awf.flags.isActive("cogs.talentplaybook.csv-remove-html")){var countHref=(htmlString.match(/href=/g)||[]).length;var href="";if(htmlString.match(/href=['"]([^'"]*)/)){href=" "+htmlString.match(/href=['"]([^'"]*)/)[1]}htmlString=htmlString.replace(/<a(?:.|\n)*?>/gm,"");htmlString=htmlString.replace(/<\/a(?:.|\n)*?>/gm,href)}return htmlString},toggleManagerDrillDown:function(e){var $el=this.$el.find(".manager-drilldown-level-1");$el.toggle(!$el.is(":visible"));this.setManagerDrillDownText($el)},toggleMonthYearList:function(e){var $el=this.$el.find(".month-year-list");$el.toggle(!$el.is(":visible"))},setManagerDrillDownText:function($el){if($el.is(":visible")){this.$el.find(".manager-drilldown-holder").find(".manager-drilldown span").text("Managers")}else{this.$el.find(".manager-drilldown-holder").find(".manager-drilldown span").text(this.currentUser.name)}},fetchSubTeam:function(e,options){if(e&&$(e.target).hasClass("is-manager")&&w3n.currentDashboard==="expenses"){return}this.$el.html(app.templates.components["loading-mark"]["loading-mark.html"]);options=options||{};var id;if(!e){id=this.id}else{id=e===null?options.period:typeof e==="string"?e:$(e.target).data("uid").toString()}this.id=id;this.$el.find(".manager-list-item button").removeClass("active");if(e!==null){$(e.target).parents(".manager-list-item:first button").addClass("active")}if(w3n.currentDashboard==="expenses"){var monthYearList=this.setupMonthYearList();if(w3n.currentDashboard===this.currentDashboard&&/^(\d{4})(\d{2})$/.test(id)){this.currentPeriod={value:id,text:moment(id,"YYYYMM").format("MMMM YYYY")}}else{this.currentPeriod={value:moment(new Date).startOf("month").format("YYYYMM"),text:moment(new Date).startOf("month").format("MMMM YYYY")};id=this.currentPeriod.value}}else{this.currentUser.name=id===awf.user.info.cnum?awf.user.info.name:this.compositeModel.get("fullname")}if(w3n.currentDashboard==="expenses"){this.tpUser=awf.user.info.cnum;w3n.cogs.talentplaybook.tpUser=awf.user.info.cnum}else{this.tpUser=this.id;w3n.cogs.talentplaybook.tpUser=this.id}if(!this.tpAlertsSummary[this.tpUser]){this.tpAlertsSummary[this.tpUser]={}}this.compositeModel=this.getCompositeModel(id);this.listenToCompositeModel();if(options.model){this.compositeModel=options.model}_.forEach(this.compositeModel.subCollectionsMap,function(col){if(col instanceof w3n.serviceModels.DashboardAlerts.Collection){if(!col.async){w3n.cogs.talentplaybook.isAsync=false}if(col.async){w3n.cogs.talentplaybook.isAsync=true}}});this.compositeModel.fetch(_.extend({id:id,uncache:true},options)).then(function(){this.collection=new app.base.collections.BaseCollection(this.compositeModel.mergedSubCollection.toJSON());this.currentDashboard=w3n.currentDashboard;this.render()}.bind(this),function(error){console.error(error);this.renderError(this.compositeModel,error)}.bind(this))},switchTabs:function(e){var prevTab=w3n.currentDashboard;this.$el.html(app.templates.components["loading-mark"]["loading-mark.html"]);if(!awf.flags.isActive("cogs.talentplaybook.dashboard.focus-bar")){w3n.currentDashboard=$(e.target).attr("id")}else{w3n.currentDashboard=$(e.target).closest(".gridelement").attr("data-gridelementtarget")}this.setupTabBar("render");if(awf.flags.isActive("cogs.talentplaybook.dashboard.dashboard-sticky-header")){if(this.tabBarView!==null){this.setupTableHeader("destroy")}}this.modelDef=this.switchModelDefinition(w3n.currentDashboard);if(w3n.currentDashboard!=="expenses"){this.setupDrillDownManager().then(function(){if(prevTab==="expenses"){this.fetchSubTeam(awf.user.info.cnum)}else{this.fetchSubTeam(this.id)}}.bind(this))}else{if(prevTab==="expenses"){this.fetchSubTeam(awf.user.info.cnum)}else{this.fetchSubTeam(this.id)}}var switching=prevTab+" to "+w3n.currentDashboard;w3n.utils.metrics.tagCogEvent("Switch Topic",switching,"Focus bar","Manager Hub","Manager Hub","none")},getCompositeModel:function(id){if(w3n.currentDashboard==="expenses"){return _.find(this.periodModels,function(period){return period.attributes.period===id})}else{return _.find(this.uplineManagerModels,function(item){return item.get("cnum")===id})}},getExpenseList:function(data){var cm=this.compositeModel;var expenseTemplate=w3n.templates.cogs.talentplaybook["tpb-expenses-list.html"];var listHtml;$.each(data,function(index,expenseList){var prefix=cm.attributes.main[index].wwer;expenseList.outstandingAdvances=prefix.outstandingAdvances;expenseList.outstandingAdvancesCur=prefix.outstandingAdvancesCurrency;expenseList.outstandingCardCharges=prefix.outstandingCard;expenseList.outstandingCardChargesCur=prefix.outstandingCardCurrency;expenseList.hasWWER=false;if(expenseList.wwer){_.forEach(expenseList.wwer,function(value){value.hasAlerts=value&&checkExpenseAlerts(value);value.hasDate=value&&checkExpenseDate(value);if(value.hasDate){expenseList.hasWWER=true}})}expenseList.hasCB=false;if(expenseList.cb){expenseList.cb.hasAlerts=checkExpenseAlerts(expenseList.cb);expenseList.cb.hasDate=checkExpenseDate(expenseList.cb);expenseList.hasCB=expenseList.cb.hasDate}expenseList.hasLDV=false;if(expenseList.ldv){expenseList.ldv.hasAlerts=checkExpenseAlerts(expenseList.ldv);expenseList.ldv.hasDate=checkExpenseDate(expenseList.ldv);expenseList.hasLDV=expenseList.ldv.hasDate}expenseList.hasReports=false;if(expenseList.hasWWER||expenseList.hasCB||expenseList.hasLDV){expenseList.hasReports=true}listHtml=Mustache.render(expenseTemplate,{collection:expenseList});$(".alert-section-row."+expenseList.cnum+"-expenses .alert-data-cell").html(listHtml)});$(".alert-section-row").removeClass("loading-alerts");$(".expenses-heading").click(false)},renderTaskAlertsSummary:function(){var d=$.Deferred();if(!w3n.cogs.talentplaybook.LargeCardAlertBadge[this.tpUser]){w3n.cogs.talentplaybook.LargeCardAlertBadge[this.tpUser]={}}if(!w3n.cogs.talentplaybook.tasksSummary.hasData){var notification=this.setNotification("error","There was an error loading Task alerts","9998");notification.andDismissIn(5)}else{if(this.isInit){if(w3n.cogs.talentplaybook.isAsync){var notificationWarning=this.setNotification("warn","Task alerts loaded successfully. Loading TalentPlaybook alerts..","9998");notificationWarning.andDismissIn(5);this.isInit=false}}var UIAlertBadge=w3n.cogs.talentplaybook.LargeCardAlertBadge[this.tpUser];var $parent=this.$el.find(".menuicon");var self=this;if(!UIAlertBadge.totalCount){UIAlertBadge.totalCount={};UIAlertBadge.totalCount.taskCount=w3n.cogs.talentplaybook.tasksSummary.totalCount(w3n.currentDashboard);UIAlertBadge.totalCount.tpCount=0;UIAlertBadge.totalCount.badge=new awf.ui.Badge({number:UIAlertBadge.totalCount.taskCount+UIAlertBadge.totalCount.tpCount,parent:$parent});UIAlertBadge.totalCount.badge.render()}else{UIAlertBadge.totalCount.taskCount=w3n.cogs.talentplaybook.tasksSummary.totalCount(w3n.currentDashboard);UIAlertBadge.totalCount.badge.setNumber(parseInt(UIAlertBadge.totalCount.taskCount+UIAlertBadge.totalCount.tpCount));UIAlertBadge.totalCount.badge._default_parent=$parent;
UIAlertBadge.totalCount.badge.render()}_.forEach(w3n.cogs.talentplaybook.tasksSummary.collection,function(item,key){if(!UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"]){UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"]={};UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"].taskCount=w3n.cogs.talentplaybook.tasksSummary.topicCount(w3n.taskMap[item.CATEGORY_ID]);UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"].tpCount=0;UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"].badge=new awf.ui.Badge({number:UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"].taskCount+UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"].tpCount,parent:self.$el.find("#"+w3n.taskMap[item.CATEGORY_ID])});UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"].badge.render()}else{UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"].taskCount=w3n.cogs.talentplaybook.tasksSummary.topicCount(w3n.taskMap[item.CATEGORY_ID]);UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"].badge._default_parent=self.$el.find("#"+w3n.taskMap[item.CATEGORY_ID]);UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"].badge.setNumber(UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"].taskCount+UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"].tpCount);UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-topic"].badge.render()}if(w3n.taskMap[item.CATEGORY_ID]===w3n.currentDashboard){if(!UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"]){UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"]={};UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"].taskCount=w3n.cogs.talentplaybook.tasksSummary.topicCount(w3n.taskMap[item.CATEGORY_ID]);UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"].tpCount=0;UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"].badge=new awf.ui.Badge({number:UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"].taskCount+UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"].tpCount,parent:self.$el.find("#"+w3n.currentDashboard+"-awf-header-badge")});UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"].badge.render()}else{UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"].taskCount=w3n.cogs.talentplaybook.tasksSummary.topicCount(w3n.taskMap[item.CATEGORY_ID]);UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"].badge._default_parent=self.$el.find("#"+w3n.currentDashboard+"-awf-header-badge");UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"].badge.setNumber(UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"].taskCount+UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"].tpCount);UIAlertBadge[w3n.taskMap[item.CATEGORY_ID]+"-header"].badge.render()}}}.bind(this));w3n.cogs.talentplaybook.LargeCardAlertBadge[this.tpUser]=UIAlertBadge}d.resolve();return d.promise()},renderTPAlertsSummary:function(){var currDashboard=w3n.currentDashboard.substring(0,w3n.currentDashboard.length-4);if(!w3n.cogs.talentplaybook.LargeCardAlertBadge[this.tpUser]){w3n.cogs.talentplaybook.LargeCardAlertBadge[this.tpUser]={}}if(!this.tpAlertsSummary[this.tpUser].hasTpSummary){}else{var UIAlertBadge=w3n.cogs.talentplaybook.LargeCardAlertBadge[this.tpUser];var $parent=this.$el.find(".menuicon");var self=this;var currentTable=this.$el.find('table.talent-table[data-tablename="'+currDashboard+'"] tbody');UIAlertBadge[currDashboard]={};$.each(currentTable.find("td.person-link"),function(){$(this).find(".awf-badge").remove();var cnum=$(this.closest("tr")).attr("data-cnum");UIAlertBadge[currDashboard][cnum]={};UIAlertBadge[currDashboard][cnum].count=self.tpAlertsSummary[self.tpUser].employeeTopicCount(String(cnum),currDashboard);UIAlertBadge[currDashboard][cnum].badge=new awf.ui.Badge({number:UIAlertBadge[currDashboard][cnum].count,parent:$(this)});UIAlertBadge[currDashboard][cnum].badge._default_parent=$(this);setTimeout(function(){UIAlertBadge[currDashboard][cnum].badge.render()},1e3)});if(!UIAlertBadge.totalCount){UIAlertBadge.totalCount={};UIAlertBadge.totalCount.taskCount=0;UIAlertBadge.totalCount.tpCount=this.tpAlertsSummary[this.tpUser].overallCount(currDashboard);UIAlertBadge.totalCount.badge=new awf.ui.Badge({number:UIAlertBadge.totalCount.taskCount+UIAlertBadge.totalCount.tpCount,parent:$parent});UIAlertBadge.totalCount.badge.render()}else{UIAlertBadge.totalCount.tpCount=this.tpAlertsSummary[this.tpUser].overallCount(currDashboard);UIAlertBadge.totalCount.badge.setNumber(parseInt(UIAlertBadge.totalCount.taskCount+UIAlertBadge.totalCount.tpCount));UIAlertBadge.totalCount.badge._default_parent=$parent;UIAlertBadge.totalCount.badge.render()}_.forEach(w3n.tpConfig.dashboards,function(item,key){if(!UIAlertBadge[key+"-topic"]){UIAlertBadge[key+"-topic"]={};UIAlertBadge[key+"-topic"].taskCount=0;UIAlertBadge[key+"-topic"].tpCount=this.tpAlertsSummary[this.tpUser].topicCount(key);UIAlertBadge[key+"-topic"].badge=new awf.ui.Badge({number:UIAlertBadge[key+"-topic"].taskCount+UIAlertBadge[key+"-topic"].tpCount,parent:self.$el.find("#"+key)});UIAlertBadge[key+"-topic"].badge.render()}else{UIAlertBadge[key+"-topic"].tpCount=this.tpAlertsSummary[this.tpUser].topicCount(key);UIAlertBadge[key+"-topic"].badge._default_parent=self.$el.find("#"+key);UIAlertBadge[key+"-topic"].badge.setNumber(UIAlertBadge[key+"-topic"].taskCount+UIAlertBadge[key+"-topic"].tpCount);UIAlertBadge[key+"-topic"].badge.render()}if(key===w3n.currentDashboard){if(!UIAlertBadge[key+"-header"]){UIAlertBadge[key+"-header"]={};UIAlertBadge[key+"-header"].taskCount=0;UIAlertBadge[key+"-header"].tpCount=this.tpAlertsSummary[this.tpUser].topicCount(key);UIAlertBadge[key+"-header"].badge=new awf.ui.Badge({number:UIAlertBadge[key+"-header"].taskCount+UIAlertBadge[key+"-header"].tpCount,parent:self.$el.find("#"+w3n.currentDashboard+"-awf-header-badge")});UIAlertBadge[key+"-header"].badge.render()}else{UIAlertBadge[key+"-header"].tpCount=this.tpAlertsSummary[this.tpUser].topicCount(key);UIAlertBadge[key+"-header"].badge._default_parent=self.$el.find("#"+w3n.currentDashboard+"-awf-header-badge");UIAlertBadge[key+"-header"].badge.setNumber(UIAlertBadge[key+"-header"].taskCount+UIAlertBadge[key+"-header"].tpCount);UIAlertBadge[key+"-header"].badge.render()}}}.bind(this));w3n.cogs.talentplaybook.LargeCardAlertBadge[this.tpUser]=UIAlertBadge}},setNotification:function(msgType,msg,zIndex){var $container=this.$el.parents(".js-card").find(".js-card-message");$container.css("z-index",zIndex);return new awf.util.postMessage($container,msgType,msg,false)},renderAlerts:function(cnum){if(awf.flags.isActive("cogs.talentplaybook.alerts")){var currUserCnum=cnum;var currTime=Date.now();var reqUniqueId=currUserCnum+"_"+currTime;var totalcount=0;var currDash=w3n.currentDashboard.substring(0,w3n.currentDashboard.length-4);setTimeout(function(){this.getDashboardAlerts(currDash,"");if(!awf.flags.isActive("cogs.talentplaybook.dashboard.new-alert-badge-large")){if(awf.flags.isActive("cogs.talentplaybook.dashboard."+currDash)){totalcount+=this.getDashboardAlerts(currDash,"gettotal")}if(totalcount===0){$(".totalAlertsCount").text("")}else{$(".totalAlertsCount").text(totalcount)}}if(w3n.alertsCnumArray){for(var i=0;i<w3n.cnumArray.length;i++){if(w3n.alertsCnumArray.indexOf(w3n.cnumArray[i])<0){$("."+w3n.cnumArray[i]+" .count-badge").addClass("off");$(".alert-section-row."+w3n.cnumArray[i]+"-"+currDash+" .alert-data-cell .loading").css("display","none")}}}$(".csv-button").removeClass("off")}.bind(this),200)}else{$(".alert-section-row").addClass("always-hide");$(".alert-section-row, .count-badge").css("display","none");$(".csv-holder").css("display","none")}},getDashboardAlerts:function(dashboard,flag){var self=this;self.count=[];self.individualCount=[];self.alerts={};self.count[dashboard]=0;var categories=[];var total=0;categories[dashboard]=w3n.tpConfig.dashboards[dashboard].categories;$.each(this.compositeModel.mergedSubCollection.models,function(index,item){self.individualCount[dashboard]=0;var supplementalData=this.attributes.supplemental;if(!supplementalData){return}if(w3n.cnumArray.indexOf(supplementalData.cnum)>=0){var currCNUM=supplementalData.cnum;self.alerts[dashboard]={};self.alerts[dashboard].alertList=[];var readunread=awf.flags.isActive("cogs.talentplaybook.read-unread");var noticeAttribute;if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services-new-version")){noticeAttribute="allNotices"}else{noticeAttribute="notices"}$.each(this.attributes[noticeAttribute],function(index,value){if(this.error){}else if(categories[dashboard].indexOf(this.categoryId)>=0){self.alerts[dashboard].alertList.push(this);if(readunread){if(this.noticeType==="unread"||this.noticeType==="neverRead"){self.individualCount[dashboard]++;self.count[dashboard]++}}else{self.individualCount[dashboard]++;self.count[dashboard]++}}});if(flag==="gettotal"){total=self.count[dashboard]}else{if(awf.flags.isActive("cogs.talentplaybook.supplementalUsed")){$(".title.supplemental").css("display","block");var alertArray=self.alerts[dashboard].alertList;for(var i=0;i<alertArray.length;i++){var suppUsedContent=[];for(var j=0;j<alertArray[i].supplementalUsed.length;j++){var currField=alertArray[i].supplementalUsed[j];var currValue=this.attributes.supplemental[currField];if(currField==="currentPBC"||currField==="previousPBC"||currField==="priorPrevPBC"){suppUsedContent[j]={fieldName:w3n.utils.data.talentplaybook.supplementalFieldNames[currField],fieldValue:checkPBC(currField,currValue,this.attributes.supplemental)}}else{suppUsedContent[j]={fieldName:w3n.utils.data.talentplaybook.supplementalFieldNames[currField],fieldValue:currValue}}}alertArray[i].supplementalData=suppUsedContent}}var alertsTemplate=w3n.templates.cogs.talentplaybook["tpb-alerts.html"];var html=Mustache.render(alertsTemplate,self.alerts[dashboard]);$(".alert-section-row").removeClass("loading-alerts");if(html!==""&&html!==" "){$(".alert-section-row").removeClass("loading-alerts");$(".alert-section-row."+supplementalData.cnum+"-"+dashboard+" .alert-data-cell").html(html);if(!awf.flags.isActive("cogs.talentplaybook.dashboard.new-alert-badge-large")){$("."+supplementalData.cnum+"-"+dashboard+"-count").text(self.individualCount[dashboard]);$(".talentplaybook-large .count-badge").removeClass("animate-flicker");$(".talentplaybook-large .talent-row .count-badge").each(function(){if(parseInt($(this).text())<=0){$(this).addClass("off")}});if(self.count[dashboard]>0){$("#"+dashboard+"-header-badge, ."+dashboard+"-badge .dropdown-badge").text(self.count[dashboard]).removeClass("off")}else{$("#"+dashboard+"-mini-alert").addClass("no-alerts")}}else{var currRowSelector=".alert-section-row."+supplementalData.cnum+"-"+dashboard;$(currRowSelector+" .alert-data-cell").removeClass("loading-alerts");$(currRowSelector+" .alert-data-cell .loading").remove();$("."+supplementalData.cnum+"-"+dashboard+" .count-badge").css("display","none")}}if(!awf.flags.isActive("cogs.talentplaybook.read-unread")){$(".mark-as-read, .mark-as-unread").css("display","none")}}}});if(flag==="gettotal"){return total}},renderTasks:function(){if(awf.flags.isActive("cogs.talentplaybook.tasks")){var taskView=new w3n.cogs.dashboard.views.Tasks;var currDash=w3n.currentDashboard;this.$("."+currDash+"-tasks").unbind();taskView.setElement(this.$("."+currDash+"-tasks")).render()}},renderTeamAtAGlance:function(cnum){var teamView=new w3n.cogs.dashboard.views.TeamAtAGlance;this.$(".ataglance-block").unbind();teamView.setElement(this.$(".ataglance-block")).render(cnum)},renderRelatedLinks:function(cnum){var relatedLinksView=new w3n.cogs.dashboard.views.RelatedLinks;this.$(".relatedLinks-content").unbind();relatedLinksView.setElement(this.$(".relatedLinks-content")).render(cnum)},listenToCompositeModel:function(){if(this.compositeModel){_.forEach(this.compositeModel.subCollectionsMap,function(col){if(col instanceof w3n.serviceModels.DashboardAlerts.Collection){this.listenToOnce(col,"sync:merged",function(){if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services")){if(awf.flags.isActive("cogs.talentplaybook.dashboard.new-alert-badge-large")&&w3n.cogs.talentplaybook.isAsync){var tpUser=this.tpUser;if(!this.tpAlertsSummary[tpUser].hasTpSummary){var alertsCol=this.compositeModel.subCollectionsMap.alerts.toJSON();this.tpAlertsSummary[tpUser]=new w3n.serviceModels.AlertSummary({collection:alertsCol});this.tpAlertsSummary[tpUser].hasTpSummary=true;w3n.cogs.talentplaybook.tpAlertsSummary[tpUser]=this.tpAlertsSummary[tpUser];this.renderTPAlertsSummary();var notification=this.setNotification("success","TalentPlaybook alerts loaded successfully","9999");notification.andDismissIn(5)}}this.renderAlerts(this.compositeModel.id)}}.bind(this));this.listenToOnce(col,"error:merged",function(){var notification=this.setNotification("error","Error loading TalentPlaybook alerts","9999");notification.andDismissIn(5);this.$el.find(".count-badge.animate-flicker").hide();$(".csv-button").removeClass("off")}.bind(this))}if(col instanceof w3n.serviceModels.ManagerDashboard.Collection||col instanceof w3n.serviceModels.ExpensesDashboard.RequiredSummary){this.listenTo(col,"error",this.mainErrorHandler)}}.bind(this))}},setCardAlerts:function(topicCount,boxCount){if(topicCount>0){$("."+this.dashboardProperties.dashName+"-header-badge").removeClass("off").html(topicCount)}if(boxCount>0){$(".totalAlertsCount span").html(boxCount)}},mainErrorHandler:function(model,response,options){var errorType;if(model instanceof app.base.collections.BaseCollection||model instanceof app.base.models.BaseModel){errorType=model.getErrorType(model,response,options)}var hasErrorFunction=options.errorOptions&&typeof options.errorOptions.buttonFunction==="function";if(errorType==="ssoError"&&hasErrorFunction){options.errorOptions.buttonFunction=function(){this.fetchSubTeam(null,{id:this.id,period:this.period,skipSSO:true,model:this.compositeModel})}}this.renderError(model,response,options)},switchModelDefinition:function(currentDashboard){var modelDef;switch(currentDashboard){case"bcg":modelDef=w3n.cogs.talentplaybook.models.BCG;break;case"performance":modelDef=w3n.cogs.talentplaybook.models.PerformanceModel;break;case"emergency":modelDef=w3n.cogs.talentplaybook.models.Emergency;break;case"expertise":modelDef=w3n.cogs.talentplaybook.models.Expertise;break;case"leadership":modelDef=w3n.cogs.talentplaybook.models.Leadership;break;case"compensation":modelDef=w3n.cogs.talentplaybook.models.Compensation;break;case"dates":modelDef=w3n.cogs.talentplaybook.models.Dates;break;case"expenses":modelDef=w3n.cogs.talentplaybook.models.Expenses;break;default:modelDef=w3n.cogs.talentplaybook.models.YourTeam;break}return modelDef},getAvatar:function(member){var d=$.Deferred();var avatarModel=new app.serviceModels.Avatar({id:member.id,initials:member.initials});var avatar=new app.components.Avatar({model:avatarModel,name:"avatar-"+member.id});avatarModel.fetch().then(function(){var view=avatar.render({uid:member.id},true);d.resolve(view.$el.html())},function(error){d.reject(error)});return d.promise()},renderAvatars:function(){_.forEach(this.compositeModel.mergedSubCollection.toJSON(),function(member){this.getAvatar(member).then(function(html){this.$el.find("[data-cnum="+member.uid+"] .person-link").html(html)}.bind(this))}.bind(this))}});function checkExpenseAlerts(data){var hasAlerts=data.alerts>0?true:false;return hasAlerts}function checkExpenseDate(data){var hasDate=data.date&&data.id?true:false;return hasDate}function checkPBC(field,value,model){var val=value;var year;var y1;var y2;switch(field){case"currentPBC":year=parseInt(model.pbcYear1.substring(0,4));if(year<2015){val="No data"}break;case"previousPBC":year=parseInt(model.pbcYear2.substring(0,4));if(year<2014){val="No data"}y1=parseInt(model.pbcYear1.substring(0,4));if(y1===2014){val=model.currentPBC}break;case"priorPrevPBC":year=parseInt(model.pbcYear3.substring(0,4));if(year<2013){val="No data"}y1=parseInt(model.pbcYear1.substring(0,4));if(y1===2013){val=model.currentPBC}y2=parseInt(model.pbcYear2.substring(0,4));if(y2===2013){val=model.previousPBC}break}return val}})();(function(){var calendarUtilsResponsive=w3n.utils.calendarComponent;var taskCategoriesLarge=app.base.views.BaseView.extend({name:"Task Calendar Categories",tasks:[],templates:{category:w3n.templates.cogs["task-calendar-responsive"]["task-category-large.html"],task:w3n.templates.cogs["task-calendar-responsive"]["task.html"]},firstRender:true,initialize:function(options){options=options||{};app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.calendar=options.calendar;this.allowDetails=options.allowDetails||false;this.cog=options.cog;this.$headerEl=options.$headerEl;this.taskOpened=null;this.currentTarget=options.currentTarget;this.listenTo(this.calendar,"next",this.next);this.listenTo(this.calendar,"prev",this.prev);this.listenTo(this.calendar,"today",this.today);this.handleScroll=this.handleScroll.bind(this);this.stickyCategoryIcons=this.stickyCategoryIcons.bind(this);this.verticalScrollbar=this.verticalScrollbar.bind(this);this.handleOpenedTaskClick=this.handleOpenedTaskClick.bind(this);if(this.cog){this.listenTo(this.cog,"large-render",function(){this.firstRender=true})}},events:{"mouseenter .task":"showTooltip","mouseleave .task":"hideTooltip","click .task":"showTaskDetail","click .task-detail-btn-hide":"hideTaskDetail","keydown .task":"keyPress"},render:function(){if(this.model&&this.calendar){this.calendar.render();this.model.calendarStartDate=this.calendar.startDate;this.model.calendarEndDate=this.calendar.endDate;var partials={task:this.templates.task};var html=Mustache.render(this.templates.category,this.model.attributes,partials);this.$el.find(".loading-mark").remove();if(this.$el.find(".tasks-container-large")){this.$el.append(html)}else{this.$el.html(html)}this.$el.prepend(this.$headerEl);this.collapseRows();if(this.currentTarget)this.showTaskDetail(this.currentTarget)}this.widthOffsetExperience();this.verticalScrollbar();this.stickyCategoryIcons()},keyPress:function(e){var code=e.keyCode||e.which;if($(document.activeElement).hasClass("task")&&code===13){this.showTaskDetail(e)}},next:function(){this.model.calendarStartDate=this.calendar.startDate;this.model.calendarEndDate=this.calendar.endDate;this.model.groupItems();this.$el.find(".tasks-container-large").empty();this.render();this.hideTaskDetail();this.calendar.$el.scrollTop(this.calendar.scrollTop)},prev:function(){this.model.calendarStartDate=this.calendar.startDate;this.model.calendarEndDate=this.calendar.endDate;this.model.groupItems();this.$el.find(".tasks-container-large").empty();this.render();this.hideTaskDetail();this.calendar.$el.scrollTop(this.calendar.scrollTop)},today:function(){this.model.calendarStartDate=this.calendar.startDate;this.model.calendarEndDate=this.calendar.endDate;this.model.groupItems();this.$el.find(".tasks-container-large").empty();this.render();this.hideTaskDetail();this.calendar.$el.scrollTop(this.calendar.scrollTop);this.widthOffsetExperience()},todayReload:function(){this.calendar.$el.scrollTop(this.calendar.scrollTop);this.widthOffsetExperience()},widthOffsetExperience:function(){var widthOffset;switch(awf.app.experience.id){case"ibmer-hub":widthOffset=245;break;case"manager-hub":widthOffset=307;break;case"manager-hub-protean":widthOffset=417;break;case"ibmer-hub-protean":widthOffset=417;break;default:widthOffset=245}this.calendar.$el.scrollLeft(this.todayLinePosition(this.calendar.startDate,widthOffset))},todayLinePosition:function(tDate,offsetWeek){var largeCardWidth=parseInt($("#ttcal-large-responsive").width(),0)||0;var marginLeftResponsive=calendarUtilsResponsive.getWidth(tDate,new Date,"");var offsetToday=marginLeftResponsive-largeCardWidth/2+offsetWeek;return offsetToday},phantomSet:function(){var phantomSetElement=$("#ttcal-large-responsive .phantom");phantomSetElement.css("height",$("#ttcal-large-responsive .tasks-container-large-in").height()-10)},stickyCategoryIcons:function(){var stickyWrapperElement=$("#ttcal-large-responsive .sticky-category-icons-wrapper");$(window).resize(function(){stickyWrapperElement.css("height",$("#ttcal-large-responsive").height()-95)})},verticalScrollbar:function(){var divInnerWidth=calendarUtilsResponsive.getWidth(this.calendar.startDate,this.calendar.endDate,"px");$(".nav-panel.responsive").css("width",238+parseInt(divInnerWidth,0));$(".calendar-header.wc-header").css("width",238+parseInt(divInnerWidth,0));$(".sync-scroll").scroll(function(){var vScrollOffset=1.1;$(".sync-scroll").scrollTop($(this).scrollTop())});var maskScrollbarElement=$(".mask-scrollbar");maskScrollbarElement.css("left",238-maskScrollbarElement.width()+parseInt(divInnerWidth,0));var scrollControlElement=$("#ttcal-large-responsive .scroll-control");var modalWidth=$(".js-modal-inner.awf-modal__inner").width();var modalMarginLeft=parseInt($(".js-modal-inner.awf-modal__inner").css("margin-left"));if(awf.util.info.browser.chrome){offsetScrollbar=15}else{offsetScrollbar=15}scrollControlElement.css("left",modalWidth+modalMarginLeft-offsetScrollbar);$("div.awf-modal__inner").css("min-height",280);$(".awf-modal").css("overflow-y","hidden");console.log("This: "+this);$(window).resize(function(){var modalWidth=$(".js-modal-inner.awf-modal__inner").width()||0;var scrollControlElement=$("#ttcal-large-responsive .scroll-control");scrollControlElement.css("height",$("#ttcal-large-responsive").height()-94);var modalMarginLeft=parseInt($(".js-modal-inner.awf-modal__inner").css("margin-left"))||0;if(awf.util.info.browser.chrome){offsetScrollbar=15}else{offsetScrollbar=15}scrollControlElement.css("left",modalWidth+modalMarginLeft-offsetScrollbar);var taskDetailsWindowContainer=$("#ttcal-large-responsive .task-detail-container")||0;taskDetailsWindowContainer.css("left",modalWidth+modalMarginLeft-273)})},collapseRows:function(){var spacer=2;var categoriesOverLaps=[];_.forEach(this.$el.find(".task.visible"),function(task){var overlappedBy=w3n.utils.calendarComponent.getOverlapArray($(task));var box=$(task).position();var taskHeight=$(task).outerHeight()+spacer;var categoryId=$(task).parent()[0].id;var categoryOverLaps=overlappedBy.length;while(overlappedBy.length>0){var parentHeight=$(task).parent().height();overlappedBy.pop().css({top:box.top+taskHeight})}if(getCategoryOverLapsCount(categoriesOverLaps,categoryId)===0){setCategoryOverLapsCount(categoriesOverLaps,categoryId,categoryOverLaps)}});_.forEach(this.$el.find(".content-tasks"),function(c){var $contentTasks=$(c);var categoryId=$contentTasks[0].id;var categoryOverLapsCount=getCategoryOverLapsCount(categoriesOverLaps,categoryId)+1;var maxRows=parseInt($contentTasks.data("maxRows"));var height=0;if(categoryOverLapsCount<=maxRows){height=($contentTasks.find(".task:first").height()+spacer)*maxRows}else{height=($contentTasks.find(".task:first").height()+spacer)*categoryOverLapsCount}$contentTasks.height(height);$(".sticky-category-row[id$="+"'"+categoryId+"'"+"]").height(height+46)});$(".task.hidden").remove();if(typeof this.calendar.adjustHeight==="function"){if(this.firstRender){this.firstRender=false;setTimeout(function(){adjust.call(this);this.phantomSet()}.bind(this),300);setTimeout(function(){this.todayReload()}.bind(this),500)}else{adjust.call(this);this.phantomSet();setTimeout(function(){this.todayReload()}.bind(this),200)}}function setCategoryOverLapsCount(categoriesOverLaps,categoryId,categoryOverLaps){var existCategory=false;if(categoriesOverLaps.length>0){categoriesOverLaps.forEach(function(o){if(o.id==categoryId){existCategory=true}})}if(!existCategory){var categoryHeigh={id:categoryId,count:0};categoriesOverLaps.push(categoryHeigh)}categoriesOverLaps.forEach(function(o){if(o.id===categoryId){var old=o.count;o.count=categoryOverLaps}})}function getCategoryOverLapsCount(categoriesOverLaps,taskId){var result=0;categoriesOverLaps.forEach(function(o){if(o.id===taskId&&result===0){result=o.count}});return result}function adjust(){this.calendar.adjustHeight(this.$el.find(".tasks-container").height())}},showTooltip:function(e){$(".qtip").remove();if(this.detailsOpened())return;var models=this.model&&this.model.sourceCollection?this.model.sourceCollection.toJSON():[];var $task=$(e.currentTarget);var subTaskId=$task.find(".subtask-name").data("subtask").toString();var subTask=_.find(models,{SUBTASK_ID:subTaskId});if(subTask){var data=prepareDetailModel(subTask);this.tasks[subTaskId]={model:new app.base.models.BaseModel(data)};var currentWindowHeight=$(window).height();var currentWindowWidth=$(window).width();var my1="";var my2="";var at1="";var at2="";var yPosWindow="";var xPosWindow="";var xPosMouse="";var yPosMouse="";xPosMouse=e.clientX;yPosMouse=e.clientY;if(yPosMouse<currentWindowHeight/2){yPosWindow="upper";if(xPosMouse<currentWindowWidth/2){xPosWindow="left";my1="top";my2="left";at1="bottom";at2="left"}else{xPosWindow="right";my1="top";my2="right";at1="bottom";at2="right"}}else if(yPosMouse>currentWindowHeight/2){yPosWindow="lower";if(xPosMouse<currentWindowWidth/2){xPosWindow="left";my1="bottom";my2="left";at1="top";at2="left"}else{xPosWindow="right";my1="bottom";my2="right";at1="top";at2="right"}}var tooltip=new w3n.components.tooltip({className:"tooltip",model:this.tasks[subTaskId].model,target:e.currentTarget,template:w3n.templates.cogs["task-calendar-responsive"]["task-calendar-popup.html"],style:{width:260,height:"auto"},position:{my:my1+" "+my2,at:at1+" "+at2,target:$task}})}},hideTooltip:function(e){this.$el.find(".qtip").remove()},showTaskDetail:function(e){if(!this.allowDetails){this.trigger("medium-task-click",e);return}if(this.detailsOpened()&&e.currentTarget===this.taskOpened[0]){this.handleOpenedTaskClick(e);return}var $task;var subTaskId;if(_.isString(e)){subTaskId=e;$task=this.$el.find("[data-subtask="+subTaskId+"]").parent()}else{$task=$(e.currentTarget);subTaskId=$task.find(".subtask-name").data("subtask").toString()}var models=this.model&&this.model.sourceCollection?this.model.sourceCollection.toJSON():[];var subTask=_.find(models,{SUBTASK_ID:subTaskId});var largeCardTitleOffset=parseInt($(".awf-card__titlebar").height(),10)||0;var calendarHeaderOffset=parseInt($(".calendar-header.wc-header").height(),10)||0;var barMiddle=parseInt($task.height()/2);var pointerPosition=$task[0].getBoundingClientRect().top-(barMiddle+largeCardTitleOffset+calendarHeaderOffset);this.taskOpened=$task;if(subTask){var data=prepareDetailModel(subTask);this.tasks[subTaskId]={model:new app.base.models.BaseModel(data)};var taskDetail=new w3n.cogs.taskCalendarResponsive.views.large.Detail({el:this.$el,model:this.tasks[subTaskId].model});taskDetail.render();var taskDetailsWindowContainer=$("#ttcal-large-responsive .task-detail-container");var modalWidth=$(".js-modal-inner.awf-modal__inner").width();var modalMarginLeft=parseInt($(".js-modal-inner.awf-modal__inner").css("margin-left"));taskDetailsWindowContainer.css("left",modalWidth+modalMarginLeft-273);this.$el.find("span.task-detail-pointer").css("top",pointerPosition);this.applyOpacity($task[0]);this.calendar.$el.find(".tasks-container-large").on("scroll",this.handleScroll)}},applyOpacity:function(currentTarget){var finalArray;var allTasks=this.$el.find("span.task.visible");this.$el.find("span.task").removeClass("not-selected");finalArray=$.grep(allTasks,function(n,i){return n!==currentTarget});$.each(finalArray,function(i,e){$(e).addClass("not-selected")})},handleOpenedTaskClick:function(e){this.hideTaskDetail();$(e.currentTarget).off("click")},handleScroll:function(e){this.hideTaskDetail();this.calendar.$el.off("scroll")},hideTaskDetail:function(e){var $taskDetail=this.$el.find(".task-detail-container");if($taskDetail.is(":visible")){$taskDetail.remove()}this.$el.find("span.task").removeClass("not-selected");this.taskOpened=null},detailsOpened:function(){return this.$el.find(".task-detail-container").is(":visible")}});var detail=Backbone.View.extend({name:"Task Calendar Detail",template:w3n.templates.cogs["task-calendar-responsive"]["task-detail.html"],initialize:function(){_.bindAll(this,"render");this.model.on("change",this.render,this)},render:function(){var html=Mustache.render(this.template,this.model.attributes);$(".qtip").remove();var $taskDetailContainer=this.$el.find(".task-detail-container");$taskDetailContainer.remove();this.$el.append(html)}});var prepareDetailModel=function(data){var end=new Date(data.MGR_END);var today=new Date;var start=new Date(data.MGR_START);var year=end.getFullYear();var month=end.getMonth()+1;var day=end.getDate();var daysRemaining="";var milliSecondsPerDay=1e3*60*60*24;var utc1=Date.UTC(today.getFullYear(),today.getMonth(),today.getDate());var utc2=Date.UTC(end.getFullYear(),end.getMonth(),end.getDate());var utc3=Date.UTC(start.getFullYear(),start.getMonth(),start.getDate());var days=Math.floor((utc2-utc1)/milliSecondsPerDay);var futureDays=Math.floor((utc3-utc1)/milliSecondsPerDay);if(days===0){daysRemaining="Due Today"}else if(days<0){days=days*-1;daysRemaining="Due "+days+" days ago"}else if(data.STATUS==="future-task"){daysRemaining="Starts in "+futureDays+" days"}else{daysRemaining=days+" days remaining"}var model={program:data.TASK_NAME,name:data.SUBTASK_NAME,dueDate:data.MGR_END,startDate:moment(data.MGR_START).format("YYYY-MM-DD"),endDate:moment(data.MGR_END).format("YYYY-MM-DD"),status:data.STATUS,final:data.FINAL,daysRemaining:daysRemaining,taskStatus:getStatusDescription(data.STATUS),headerDate:year?"Due "+year+"-"+month+"-"+day:"Loading...",url:data.URL};return model};var getStatusDescription=function(key){var status=_.find(w3n.cogs.taskCalendarResponsive.taskStatus,{key:key});return status.description||"Unconfirmed"};var views={TaskCategoriesLarge:taskCategoriesLarge,Detail:detail};w3n.cogs.taskCalendarResponsive.views.large=views})();(function(){var taskCategories=app.base.views.BaseView.extend({name:"Task Calendar Categories",tasks:[],templates:{category:w3n.templates.cogs["task-calendar-responsive"]["task-category.html"],task:w3n.templates.cogs["task-calendar-responsive"]["task.html"]},firstRender:true,initialize:function(options){options=options||{};app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.calendar=options.calendar;this.allowDetails=options.allowDetails||false;this.cog=options.cog;this.$headerEl=options.$headerEl;this.taskOpened=null;this.currentTarget=options.currentTarget;this.listenTo(this.calendar,"next",this.next);this.listenTo(this.calendar,"prev",this.prev);this.listenTo(this.calendar,"today",this.today);this.handleScroll=this.handleScroll.bind(this);this.handleOpenedTaskClick=this.handleOpenedTaskClick.bind(this);if(this.cog){this.listenTo(this.cog,"large-render",function(){this.firstRender=true})}},events:{"mouseenter .task":"showTooltip","mouseleave .task":"hideTooltip","click .task":"showTaskDetail","click .task-detail-btn-hide":"hideTaskDetail","keydown .task":"keyPress"},render:function(){if(this.model&&this.calendar){this.calendar.render();this.model.calendarStartDate=this.calendar.startDate;this.model.calendarEndDate=this.calendar.endDate;var partials={task:this.templates.task};var html=Mustache.render(this.templates.category,this.model.attributes,partials);this.$el.find(".loading-mark").remove();if(this.$el.find(".tasks-container")){this.$el.append(html)}else{this.$el.html(html)}this.$el.prepend(this.$headerEl);this.collapseRows();if(this.currentTarget)this.showTaskDetail(this.currentTarget)}},keyPress:function(e){var code=e.keyCode||e.which;if($(document.activeElement).hasClass("task")&&code===13){this.showTaskDetail(e)}},next:function(){this.model.calendarStartDate=this.calendar.startDate;this.model.calendarEndDate=this.calendar.endDate;this.model.groupItems();this.$el.find(".tasks-container").empty();this.render();this.hideTaskDetail();this.calendar.$el.scrollTop(this.calendar.scrollTop)},prev:function(){this.model.calendarStartDate=this.calendar.startDate;this.model.calendarEndDate=this.calendar.endDate;this.model.groupItems();this.$el.find(".tasks-container").empty();this.render();this.hideTaskDetail();this.calendar.$el.scrollTop(this.calendar.scrollTop)},today:function(){this.model.calendarStartDate=this.calendar.startDate;this.model.calendarEndDate=this.calendar.endDate;
this.model.groupItems();this.$el.find(".tasks-container").empty();this.render();this.hideTaskDetail();this.calendar.$el.scrollTop(this.calendar.scrollTop)},collapseRows:function(){var spacer=2;_.forEach(this.$el.find(".task.visible"),function(task){var overlappedBy=w3n.utils.calendarComponent.getOverlapArray($(task));var box=$(task).position();var taskHeight=$(task).outerHeight()+spacer;var counter=0;while(overlappedBy.length>0){var parentHeight=$(task).parent().height();overlappedBy.pop().css({top:box.top+taskHeight})}});_.forEach(this.$el.find(".content-tasks"),function(c){var $contentTasks=$(c);var maxRows=parseInt($contentTasks.data("maxRows"));var height=($contentTasks.find(".task:first").height()+spacer)*maxRows;$contentTasks.height(height)});if(typeof this.calendar.adjustHeight==="function"){if(this.firstRender){this.firstRender=false;setTimeout(function(){adjust.call(this)}.bind(this),300)}else{adjust.call(this)}}function adjust(){this.calendar.adjustHeight(this.$el.find(".tasks-container").height())}},showTooltip:function(e){$(".qtip").remove();if(this.detailsOpened())return;var models=this.model&&this.model.sourceCollection?this.model.sourceCollection.toJSON():[];var $task=$(e.currentTarget);var subTaskId=$task.find(".subtask-name").data("subtask").toString();var subTask=_.find(models,{SUBTASK_ID:subTaskId});if(subTask){var data=prepareDetailModel(subTask);this.tasks[subTaskId]={model:new app.base.models.BaseModel(data)};var tooltip=new w3n.components.tooltip({className:"tooltip",model:this.tasks[subTaskId].model,target:e.currentTarget,template:w3n.templates.cogs["task-calendar-responsive"]["task-calendar-popup.html"],style:{width:230,height:"auto"},position:{my:"top center",at:"bottom center",target:$task}})}},hideTooltip:function(e){this.$el.find(".qtip").remove()},showTaskDetail:function(e){if(!this.allowDetails){this.trigger("medium-task-click",e);return}if(this.detailsOpened()&&e.currentTarget===this.taskOpened[0]){this.handleOpenedTaskClick(e);return}var $task;var subTaskId;if(_.isString(e)){subTaskId=e;$task=this.$el.find("[data-subtask="+subTaskId+"]").parent()}else{$task=$(e.currentTarget);subTaskId=$task.find(".subtask-name").data("subtask").toString()}var models=this.model&&this.model.sourceCollection?this.model.sourceCollection.toJSON():[];var subTask=_.find(models,{SUBTASK_ID:subTaskId});var largeCardTitleOffset=parseInt($(".awf-card__titlebar").height(),10)||0;var calendarHeaderOffset=parseInt($(".calendar-header.wc-header").height(),10)||0;var barMiddle=parseInt($task.height()/2);var pointerPosition=$task[0].getBoundingClientRect().top-(barMiddle+largeCardTitleOffset+calendarHeaderOffset);this.taskOpened=$task;if(subTask){var data=prepareDetailModel(subTask);this.tasks[subTaskId]={model:new app.base.models.BaseModel(data)};var taskDetail=new w3n.cogs.taskCalendar.views.medium.Detail({el:this.$el,model:this.tasks[subTaskId].model});taskDetail.render();this.$el.find("span.task-detail-pointer").css("top",pointerPosition);this.applyOpacity($task[0]);this.calendar.$el.find(".tasks-container").on("scroll",this.handleScroll)}},applyOpacity:function(currentTarget){var finalArray;var allTasks=this.$el.find("span.task.visible");this.$el.find("span.task").removeClass("not-selected");finalArray=$.grep(allTasks,function(n,i){return n!==currentTarget});$.each(finalArray,function(i,e){$(e).addClass("not-selected")})},handleOpenedTaskClick:function(e){this.hideTaskDetail();$(e.currentTarget).off("click")},handleScroll:function(e){this.hideTaskDetail();this.calendar.$el.off("scroll")},hideTaskDetail:function(e){var $taskDetail=this.$el.find(".task-detail-container");if($taskDetail.is(":visible")){$taskDetail.remove()}this.$el.find("span.task").removeClass("not-selected");this.taskOpened=null},detailsOpened:function(){return this.$el.find(".task-detail-container").is(":visible")}});var detail=Backbone.View.extend({name:"Task Calendar Detail",template:w3n.templates.cogs["task-calendar-responsive"]["task-detail.html"],initialize:function(){_.bindAll(this,"render");this.model.on("change",this.render,this)},render:function(){var html=Mustache.render(this.template,this.model.attributes);$(".qtip").remove();var $taskDetailContainer=this.$el.find(".task-detail-container");$taskDetailContainer.remove();this.$el.append(html)}});var prepareDetailModel=function(data){var end=new Date(data.MGR_END);var today=new Date;var start=new Date(data.MGR_START);var year=end.getFullYear();var month=end.getMonth()+1;var day=end.getDate();var daysRemaining="";var milliSecondsPerDay=1e3*60*60*24;var utc1=Date.UTC(today.getFullYear(),today.getMonth(),today.getDate());var utc2=Date.UTC(end.getFullYear(),end.getMonth(),end.getDate());var utc3=Date.UTC(start.getFullYear(),start.getMonth(),start.getDate());var days=Math.floor((utc2-utc1)/milliSecondsPerDay);var futureDays=Math.floor((utc3-utc1)/milliSecondsPerDay);if(days===0){daysRemaining="Due Today"}else if(days<0){days=days*-1;daysRemaining="Due "+days+" days ago"}else if(data.STATUS==="future-task"){daysRemaining="Starts in "+futureDays+" days"}else{daysRemaining=days+" days remaining"}var model={program:data.TASK_NAME,name:data.SUBTASK_NAME,dueDate:data.MGR_END,startDate:moment(data.MGR_START).format("YYYY-MM-DD"),endDate:moment(data.MGR_END).format("YYYY-MM-DD"),status:data.STATUS,final:data.FINAL,daysRemaining:daysRemaining,taskStatus:getStatusDescription(data.STATUS),headerDate:year?"Due "+year+"-"+month+"-"+day:"Loading...",url:data.URL};return model};var getStatusDescription=function(key){var status=_.find(w3n.cogs.taskCalendarResponsive.taskStatus,{key:key});return status.description||"Unconfirmed"};var views={TaskCategories:taskCategories,Detail:detail};w3n.cogs.taskCalendarResponsive.views.medium=views})();(function(){var TaskDetailModel=Backbone.Model.extend();var TaskDetailView=Backbone.View.extend({el:'[data-component="task-calendar-large"] .view-container',template:w3n.templates.cogs["task-calendar-responsive"]["task-detail.html"],initialize:function(){_.bindAll(this,"render","hide");this.model.on("change",this.render,this)},events:{"click .task-detail-btn-hide":"hide"},hide:function(event){var $taskDetail=this.$el.find(".task-detail");if($taskDetail.is(":visible")){if(this.model.hideNoAnimation){$taskDetail.hide();this.model.hideNoAnimation=false}else{$taskDetail.children().css("white-space","nowrap");$taskDetail.animate({width:"toggle"},function(){$(this).hide();$(this).children().css("white-space","")})}$(".task-detail-pointer").hide();$(".content-tasks .task.selected").removeClass("selected");$(".content-tasks .task").css("opacity","1");$(".category i").css("opacity","1")}},render:function(){var html=Mustache.render(this.template,this.model.attributes);var $taskDetailContainer=this.$el.find(".task-detail-container");$taskDetailContainer.remove();this.$el.append(html);var $taskDetail=this.$el.find(".task-detail");var $pointer=this.$el.find(".task-detail-pointer");$pointer.hide();$taskDetail.children().css("white-space","nowrap");$taskDetail.animate({width:"toggle"},function(){$(this).show();$pointer.show();$(this).children().css("white-space","")})}});var views={TaskDetailView:TaskDetailView}})();(function(){w3n.cogs["team-profiles"].views.Large=app.base.views.BaseView.extend({initialize:function(options){app.base.views.BaseView.prototype.initialize.call(this,options);var self=this},className:"team-profiles-large-container",template:w3n.templates.cogs["team-profiles"]["team-profiles-large.html"],tabBarView:null,events:{"click .expand-btn":"toggleAccordion","click .csv-button":"buildCSV","click .team-toggle":"filterGlobalIncountry","click .intro-toggle-btn":"toggleIntroSection","click .person-link .count-badge":"toggleAccordion","click .tab-dropdown":"loadIndividual","click .mark-as-read":"markReadUnreadButton","click .mark-as-unread":"markReadUnreadButton","mouseover div.showtooltip":"showDefinitionTooltip","mouseout div.showtooltip":"hideDefinitionTooltip"},toggleAccordion:function(e){e.preventDefault();var targetOpen="."+$(e.target).data("uid");var currCnumForToggle=$(e.target).closest(".talent-row").data("cnum");$(targetOpen+" .showhide").toggleClass("visible");$(targetOpen).toggleClass("showSubRow");$(targetOpen+" .expand-btn").toggleClass("icon-awf-op-plus").toggleClass("icon-awf-op-minus");if(awf.flags.isActive("cogs.talentplaybook.read-unread")){var noticeIdList="";setTimeout(function(){$.each($(targetOpen+".alert-section-row .alert-holder"),function(){noticeIdList+=$(this).attr("data-noticeid").toString()+","});noticeIdList=noticeIdList.slice(0,-1);if(noticeIdList&&$(targetOpen+".alert-section-row").hasClass("showSubRow")){this.toggleReadUnread(true,currCnumForToggle,"1",noticeIdList,$(targetOpen+".alert-section-row .alert-holder"))}}.bind(this),250)}},closeAllAccordions:function(){$(".showhide").removeClass("visible");$(".alert-section-row").removeClass("showSubRow");$(".expand-btn").addClass("icon-awf-op-plus").removeClass("icon-awf-op-minus")},toggleIntroSection:function(ev){ev.preventDefault();$(ev.target).closest(".intro-block").toggleClass("open");if($(ev.target).attr("aria-expanded")==="false"){$(ev.target).attr("aria-expanded",true)}else{$(ev.target).attr("aria-expanded",false)}$(ev.target).find(".expand-btn").toggleClass("icon-awf-op-plus").toggleClass("icon-awf-op-minus");$(ev.target).siblings(".expand-btn").toggleClass("icon-awf-op-plus").toggleClass("icon-awf-op-minus")},markReadUnreadButton:function(e){var alertHolder=$(e.target).closest(".alert-holder");var noticeId=$(e.target).closest(".alert-holder").data("noticeid");var categoryId=$(e.target).closest(".alert-holder").data("categoryid");var currCnum=$(e.target).closest(".alert-section-row").data("currcnum");var isRead=true;if(alertHolder.hasClass("read")){isRead=false}else{isRead=true}$(e.target).attr("disabled","disabled");alertHolder.find(".read-unread-loading-error").removeClass("error");alertHolder.find(".read-unread-loading").addClass("loading");this.toggleReadUnread(isRead,currCnum,categoryId,noticeId,alertHolder)},toggleReadUnread:function(isRead,empCnum,categoryId,noticeId,alertHolder){var model=new w3n.serviceModels.isReadTPB({isRead:isRead,empCnum:empCnum,noticeId:noticeId});model.save().done(function(response){if(alertHolder){if(alertHolder.hasClass("neverRead")){alertHolder.removeClass("neverRead").addClass("read")}else if(isRead===true){alertHolder.removeClass("unread");alertHolder.addClass("read")}else{alertHolder.removeClass("read");alertHolder.addClass("unread")}alertHolder.find(".read-unread-loading").removeClass("loading");alertHolder.find("button").attr("disabled",false);var currTab=alertHolder.closest(".alert-section-row").data("currtab");var currTable=$("."+currTab).closest("table");var currDash=w3n.currentDashboard;var displayCount=0;var headerDisplayCount=0;var totalDisplayCount=0;$.each($("."+currTab+" .alert-holder"),function(){if($(this).hasClass("unread")){displayCount++}});if(displayCount<=0){$("."+currTab+" .count-badge").text("").addClass("off")}else{$("."+currTab+" .count-badge").removeClass("off").text(displayCount)}}}).fail(function(){alertHolder.find(".read-unread-loading").removeClass("loading");alertHolder.find(".read-unread-loading-error").addClass("error");alertHolder.find("button").attr("disabled",false);console.log("ERROR Updated Read Status");console.log("---------------------------")})},showDefinitionTooltip:function(e){if(awf.flags.isActive("cogs.talentplaybook.example-definition")){this.hover=true;$(".qtip").remove();var target=e.currentTarget;var $task=$(e.currentTarget);var data={displayText:$(e.target).data("definition"),field:"field"};var tooltip=new w3n.components.tooltip({model:new app.base.models.BaseModel(data),target:target,template:w3n.templates.components.tooltip["definition.html"],style:{classes:"definitionTooltip",width:"auto",height:"auto"},position:{my:"center left",at:"top right",target:$task}})}},hideDefinitionTooltip:function(e){setTimeout(function(){if(this.hover===false)$(".qtip").remove()}.bind(this),500)},render:function(){var collection=this.collection.toJSON();var obj=w3n.tpConfig.dashboards;var dashboardArray=w3n.getDashboardArray();var dashboardTemplates={};for(var i=0;i<dashboardArray.length;i++){var name=dashboardArray[i].dashName;var template=dashboardArray[i].dashTemplate;dashboardTemplates[name]=template}dashboardData={collection:collection,dashboards:dashboardArray,totalCount:collection.length,s:collection.length===1?"":"s"};var html=Mustache.render(this.template,dashboardData,dashboardTemplates);this.$el.html(html);this.renderTabs();if(!awf.flags.isActive("cog:talentplaybook:csv-download")){$(".csv-holder").css("display","none")}if(!w3n.cogs["team-profiles"].currentProfileTab){$("#"+collection[0].id+"-tab").click()}else{$("#"+w3n.cogs["team-profiles"].currentProfileTab).click()}},setupTabBar:function(option){if(option==="render"){var tabArray=[];this.$(".tab-pane.active").find("[data-navigation]").each(function(index){tabArray[index]={name:$(this).data("navigation-name"),id:$(this).data("navigation"),$element:$(this)}});var tabBar=new w3n.components.NavigationTabs({tabs:tabArray,scrollContainer:".scroll-card",padding:5,$container:this.$(".navigation-Tab")});tabBar.setElement(this.$(".navigation-Tab"));tabBar.render();this.tabBarView=tabBar}else{this.tabBarView.destroy()}},renderTabs:function(){var fancyTabs=new w3n.components.MgrhubDropdown},loadIndividual:function(e){var isCheckpointActive;if(awf.flags.isActive("cogs.team-profiles.dashboard.checkpoint-columns")){isCheckpointActive=true}else{isCheckpointActive=false}var targetID=$(e.target).data("toggletarget");console.time("MgrHub_Person_Profile_"+targetID);var currPerson=new w3n.cogs["team-profiles"].Model({cnum:targetID});currPerson.attributes.isCheckpointActive=isCheckpointActive;console.log("--currPerson-------------------------");console.log(currPerson);console.log("---------------------------");currPerson.fetch({all:true}).always(function(){console.timeEnd("MgrHub_Person_Profile_"+targetID);var html=Mustache.render(w3n.templates.cogs["team-profiles"]["person-profile-single.html"],currPerson.toJSON());$("#"+targetID+"-panel .table-container").html(html);$("#"+targetID+"-panel .table-container").addClass("profileLoaded");if(!awf.flags.isActive("cogs.team-profiles.dashboard.personalinfo")){$(".section-personalinfo").css("display","none")}if(!awf.flags.isActive("cogs.team-profiles.dashboard.expertise")){$(".section-expertise").css("display","none")}if(!awf.flags.isActive("cogs.team-profiles.dashboard.performance")){$(".section-performance").css("display","none")}if(!awf.flags.isActive("cogs.team-profiles.dashboard.awards")){$(".section-awards").css("display","none")}if(!awf.flags.isActive("cogs.team-profiles.dashboard.emergency")){$(".section-emergency").css("display","none")}if(!awf.flags.isActive("cogs.team-profiles.dashboard.leadership")){$(".section-leadership").css("display","none")}if(!awf.flags.isActive("cogs.team-profiles.dashboard.compensation")){$(".section-compensation").css("display","none")}if(!awf.flags.isActive("cogs.team-profiles.dashboard.dates")){$(".section-dates").css("display","none")}if(!awf.flags.isActive("cogs.team-profiles.dashboard.bcg")){$(".section-bcg").css("display","none")}_.forEach(currPerson.subCollectionsMap,function(col){currPerson.listenTo(col,"sync:merged",function(name){var currPersonJson=currPerson.toJSON();var currSupplemental={};if(name==="alerts"&&!$(".team-profiles-large ."+targetID+"-panel").hasClass("alertsLoaded")){if(currPersonJson.alerts[0]){var expertiseHtml=Mustache.render(w3n.templates.cogs["team-profiles"]["section-expertise.html"],currPerson.toJSON());$("."+targetID+"-expertise .data-cell").html(expertiseHtml)}renderAlertsIndividual(targetID,currPerson);$(".team-profiles-large ."+targetID+"-panel").addClass("alertsLoaded")}if(name==="awards"){var awardsHtml=Mustache.render(w3n.templates.cogs["team-profiles"]["section-awards.html"],currPerson.toJSON());$("."+targetID+"-awards .data-cell").html(awardsHtml)}if(name==="emergency"){var emergencyHtml=Mustache.render(w3n.templates.cogs["team-profiles"]["section-emergency.html"],currPerson.toJSON());$("."+targetID+"-emergency .data-cell").html(emergencyHtml)}if(name==="bcg"){var bcgHtml=Mustache.render(w3n.templates.cogs["team-profiles"]["section-bcg.html"],currPerson.toJSON());$("."+targetID+"-bcg .data-cell").html(bcgHtml)}if(name==="performance"){var performanceHtml=Mustache.render(w3n.templates.cogs["team-profiles"]["section-performance.html"],currPerson.toJSON());$("."+targetID+"-performance .data-cell").html(performanceHtml)}});currPerson.listenTo(col,"error:merged",function(name){if(name==="alerts"){$("#"+targetID+"-panel .alert-data-cell").html('<div style="color:red; padding-left: 60px;">Error loading alerts</div>');$("#"+targetID+"-panel .count-badge.animate-flicker").css("display","none");$("."+targetID+"-expertise.alert-section-row").html('<td colspan="99"><div style="color:red; padding-left: 60px;"><br>Error loading section<br><br></div></td>')}if(name==="awards"){var awardsHtml=Mustache.render(w3n.templates.cogs["team-profiles"]["section-awards.html"],currPerson.toJSON());$("."+targetID+"-awards .data-cell").html(awardsHtml)}if(name==="emergency"){var emergencyHtml=Mustache.render(w3n.templates.cogs["team-profiles"]["section-emergency.html"],currPerson.toJSON());$("."+targetID+"-emergency .data-cell").html(emergencyHtml)}})})});this.setupTabBar("render")},filterGlobalIncountry:function(e){e.preventDefault();this.closeAllAccordions();var teamGroup=$(e.target).data("team");var dashboard=$(e.target).closest(".tab-section").attr("id");$(".talent-row").removeClass("on");if(teamGroup==="allteams"){$(".talent-row").addClass("on")}else{$(".team-"+teamGroup).addClass("on")}$(".team-toggle").removeClass("current");$("."+teamGroup+"-toggle").addClass("current")}});var renderAlertsIndividual=function(cnum,currPerson){if(awf.flags.isActive("cogs.talentplaybook.alerts")){var currUserCnum=cnum;var currTime=Date.now();var reqUniqueId=currUserCnum+"_"+currTime;setTimeout(function(){getIndividualAlerts(currPerson)},200)}else{$(".alert-section-row").addClass("always-hide");$(".alert-section-row, .count-badge").css("display","none");$(".csv-holder").css("display","none")}};var getIndividualAlerts=function(currPerson){var self=this;self.count=[];self.individualCount=[];self.alerts={};var alertRecord=currPerson.attributes.alerts;var alertRecordCount=alertRecord.length;$.each(currPerson.attributes.alerts,function(index,value){var currPersonCnum;if(this.supplemental){currPersonCnum=this.supplemental.cnum}$.each(this.allNotices,function(index,value){if(this.error||!this.observation){}else{$.each(w3n.tpConfig.dashboards,function(index,value){var alertCategory=this.categoryId;var dashboardName=value.dashName;var dashboardCategories=value.categories;if(dashboardName==="yourteam"){dashboardCategories=["5","6"]}if(dashboardCategories.indexOf(alertCategory)>=0){var className="."+currPersonCnum+"-"+dashboardName;var badgeClass=className+" .count-badge";var loaderClass=className+" .loading-alerts";var alertsTemplate=w3n.templates.cogs["team-profiles"]["tpb-alerts.html"];var html=Mustache.render(alertsTemplate,this);$(className+" .alert-data-cell .loading-mark").css("display","none");$(className+" .alert-data-cell").append(html);var currCount=$(badgeClass).text();if(this.noticeType==="unread"||this.noticeType==="neverRead"){currCount++}$(badgeClass).text(currCount);if(currCount>=0){$(badgeClass).removeClass("animate-flicker");$(loaderClass).removeClass("loading-alerts")}if(currCount===0||currCount===""){$(badgeClass).addClass("off")}}else{}}.bind(this))}});if(!awf.flags.isActive("cogs.talentplaybook.read-unread")){$(".mark-as-read, .mark-as-unread").css("display","none")}});$(".team-profiles-large .animate-flicker").css("display","none");$(".team-profiles-large .loading-alerts").css("display","none")}})();(function(){w3n.cogs["team-profiles"].views.Medium=app.base.views.BaseView.extend({initialize:function(options){app.base.views.BaseView.prototype.initialize.call(this,options);this.origCollection=options.collection;this.filter="global"},template:w3n.templates.cogs["team-profiles"]["team-profiles-medium.html"],events:{"click button.person-link":"handleFlip","click button.team-toggle":"handleFilter"},handleFlip:function(e){var uid=$(e.currentTarget).data("uid");this.trigger("team-profiles-flip",uid)},handleFilter:function(e){var filter=$(e.currentTarget).data("team");this.filter=filter;this.filterData();this.render()},filterData:function(){if(awf.flags.isActive("cogs.team-profiles.medium-filter")){if(this.filter==="incountry"){this.collection=new Backbone.Collection(this.origCollection.where({incountryteam:true}))}else if(this.filter==="global"){this.collection=new Backbone.Collection(this.origCollection.where({globalteam:true}))}else{this.collection=this.origCollection}}else{this.collection=this.origCollection}},render:function(){app.base.views.BaseView.prototype.render.apply(this,arguments);this.filterData();if(awf.flags.isActive("cogs.team-profiles.medium-filter")){this.$el.find("button.team-toggle."+this.filter+"-toggle").addClass("current")}else{$(this.$el.find(".filter-button")).hide()}}})})();(function(){var button;var Team=app.base.views.BaseView.extend({name:"team",template:w3n.templates.cogs.team["team.html"],initialize:function(options){options=options||{};this.cog=options.cog;app.base.views.BaseView.prototype.initialize.apply(this,arguments);this.viewType=options.viewType||"medium";this.tabComponent=new w3n.components.Tabs({tabs:[{tabKey:"functional",tabTitle:"Global"},{tabKey:"incountry",tabTitle:"In Country"}],selectedTab:this.cog?this.cog.currentTab:null})},render:function(){app.base.views.BaseView.prototype.render.call(this,arguments);this.tabComponent.subviewEl=this.$(".team");this.tabComponent.setElement(this.$el.find(".tab-container"));this.tabComponent.render()}});var tooltipCompositeModel=app.base.models.CompositeModel.extend({initSubmodels:function(attributes){this.addModel("avatar",new app.serviceModels.Avatar({id:attributes.person.uid,email:attributes.person.email,avatarsize:115,initials:w3n.utils.getInitials(attributes.person.name)}),null,false)},keyedSubModels:true});var SubTeam=app.base.views.BaseView.extend({name:"subteam",isManager:false,hover:false,template:function(data){return _.template(getTemplates(this.isManager))(data)},initialize:function(options){if(options){this.name=options.name;this.isManager=options.isManager||false;this.isLargeCard=options.isLargeCard||false;this.tabView=options.tabView;this.models=options.models;this.helpers=options.helpers;this.cogName=options.cogName;this.cog=options.cog;this.selectedModel=this.models.functional;this.model.set({cardSize:this.isLargeCard?"large":"narrow"})}this.tooltips={};$(window).on("resize",_.debounce(this.updateCardWidth.bind(this),250));this.once("rendered",this.updateCardWidth.bind(this))},parseData:function(data){data.leadership=removeNullMembers(data.leadership);data.reports=removeNullMembers(data.reports);data.peers=removeNullMembers(data.peers);data.peers=removeSelfReporters(data.leadership,data.peers);return data},updateCardWidth:function(){var cardWidth=parseInt(this.cog.cards.medium.$el.css("width"),10);if(cardWidth>=350&&this.model.get("cardSize")==="narrow"){this.model.set({cardSize:"wide"});this.render()}else if(cardWidth<350&&this.model.get("cardSize")==="wide"){this.model.set({cardSize:"narrow"});this.render()}},remove:function(){$(window).off("resize",this.updateCardWidth);app.base.views.BaseView.prototype.remove.apply(this,arguments)},render:function(){var hasSelectedTab=this.tabView&&this.tabView.selectedTab&&this.models;var dataModel=hasSelectedTab?this.models[this.tabView.selectedTab.tabKey]:this.selectedModel;this.model.set(this.parseData(dataModel.toJSON()));var data=this.model instanceof Backbone.Model?this.model.toJSON():{};this.$el.html(this.template(data));getAvatar(this.$el,data);this.trigger("rendered")},events:{"click .leadership-toggle":"toggleLeadership","click .peer-toggle":"togglePeers","keydown .peer-toggle":"handleKeydown","keydown .leadership-toggle":"handleKeydown","keydown a.interactive":"handleKeydown","click li.more .interactive":"flipCard","mouseover button.interactive.person-link":"showTooltip","mouseout button.interactive.person-link":"hideTooltip"},togglePeers:function(options){var $peerToggle=this.$el.find(".peer-toggle");if($peerToggle.hasClass("opened"))options.hide=true;if(options.hide){this.$el.find(".group.peers li.person:not(:nth-child(-n + 12))").hide();this.$el.find(".peer-toggle-content").html('Show all peers<i class="icon-awf-chevron-down"></i>');$peerToggle.removeClass("opened")}else{this.$el.find(".group.peers li.person").show();this.$el.find(".group.peers li.person").css({display:"inline-block"});this.$el.find(".peer-toggle-content").html('Collapse peers<i class="icon-awf-chevron-up"></i>');$peerToggle.addClass("opened")}},toggleLeadership:function(options){options=options||{};var $leadershipToggle=this.$el.find(".leadership-toggle");if($leadershipToggle.hasClass("opened"))options.hide=true;if(options.hide){this.$el.find(".group.leadership li.person:not(:nth-child(-n + 3))").hide();this.$el.find(".leadership-toggle-content").html('Show all leadership<i class="icon-awf-chevron-down"></i>');$leadershipToggle.removeClass("opened")}else{this.$el.find(".group.leadership li.person").show();this.$el.find(".leadership-toggle-content").html('Collapse leadership<i class="icon-awf-chevron-up"></i>');$leadershipToggle.addClass("opened")}},handleKeydown:function(e){if(e.which==13){if(e.currentTarget.className.indexOf("peer-toggle")>-1){this.$el.find(".peer-toggle").trigger("click")}else if(e.currentTarget.className.indexOf("leadership-toggle")>-1){this.$el.find(".leadership-toggle").trigger("click")}else if(e.currentTarget.className.indexOf("interactive")>-1){this.flipCard(e)}}},flipCard:function(event){$(".qtip").remove();var $group=$(event.target).parents(".group");this.cog.toggles.peers=!$group.hasClass("peers");this.cog.toggles.leadership=!$group.hasClass("leadership");this.helpers.flipCard();w3n.utils.metrics.tagCogEvent("click","button","Team member links","Team card","more","none")},showTooltip:function(e){this.hover=true;$(".qtip").remove();var target=e.currentTarget;var id=e.currentTarget.attributes.id.value;if(!this.tooltips[id]){this.tooltips[id]={model:new tooltipCompositeModel(null,{initialModel:new w3n.serviceModels.Faces({id:id})})}}var tooltip=this.tooltips[id];if(!tooltip.view){tooltip.view=new w3n.components.tooltip({model:tooltip.model,target:target,template:w3n.templates.components.tooltip["business-card.html"],style:{width:400}})}else{tooltip.view.target=target}tooltip.model.fetch()},hideTooltip:function(e){setTimeout(function(){if(this.hover===false)$(".qtip").remove()}.bind(this),500)},toggleSections:function(){this.togglePeers({hide:this.cog.toggles.peers});this.toggleLeadership({hide:this.cog.toggles.leadership})}});function getTemplates(isManager){var arr=[];if(isManager){arr.push(w3n.templates.cogs.team["reports.html"])}else{arr.push(w3n.templates.cogs.team["leadership.html"]);arr.push(w3n.templates.cogs.team["peers.html"])}return arr.join("")}function getAvatar($container,team){var all=_.union(team.leadership,team.peers,team.reports);_.forEach(all,function(member){var avatarModel=new app.serviceModels.Avatar({id:member.uid,email:member.preferredIdentity,initials:w3n.utils.getInitials(member.name.first+" "+member.name.last)});var avatar=new app.components.Avatar({model:avatarModel,name:"avatar-"+member.uid,el:$container.find(".person[data-uid="+member.uid+"] .avatar-container")});avatarModel.fetch().then(function(){avatar.render({uid:member.uid},true)})})}function removeNullMembers(group){return _.reject(group,function(item){return item.name.first===null&&item.name.last===null})}function removeSelfReporters(leadership,peers){return _.reject(peers,function(peer){return _.some(leadership,{uid:peer.uid})})}var views={Team:Team,SubTeam:SubTeam};w3n.cogs.team.views=views})();(function(){var colorHash={vacation:"#0024b1",personal:"#6cbb1f",flex:"#00183f",custom:"#5d00db",site:"#f8c41c",sick:"#00b4a0"};var timeInOutLarge=app.base.views.BaseView.extend({template:w3n.templates.cogs["time-in-out"]["time-in-out-large.html"],initialize:function(options){app.base.views.BaseView.prototype.initialize.call(this,options);this.collection=options.collection;this.adapter=options.adapter;this.date=null;this.selectedId=null},events:{"click button.close":"handleClose","click a.delete":"handleDelete","change #time-off-type":"customizeForm","submit #time-in-out-submit":"handleSubmit","mouseenter .fc-day":"handleDayHover","mouseleave .fc-day":"destroyHover"},addCalendar:function(){var data=this.getCleanData().map(function(model){return _.extend(model,{color:colorHash[model.eventType]})});this.$el.find("#calendar").fullCalendar({events:data,header:{left:"today, prev, title, next",right:"month,basicWeek"},timezone:false,contentHeight:500,dayNamesShort:["Su","Mo","Tu","We","Th","Fr","Sa"],dayClick:function(date,jsEvent,view){this.date=date.format();this.$el.find(".card").addClass("opened");this.$el.find(".form-heading").text("NEW EVENT | "+moment(this.date).format("MMMM DD, YYYY"));this.$el.find("label#vacation-label").css("display","none");this.$el.find("label#holiday-label").css("display","none")}.bind(this),eventClick:function(calEvent,jsEvent,view){console.log("calEvent",calEvent);this.date=calEvent.start.format();this.selectedId=calEvent.eventId;console.log("this.selectedId",this.selectedId);var selectVal=this.$el.find("#time-off-type");var vacationSelect=this.$el.find("select#vacation");var holidaySelect=this.$el.find("select#holiday");var vacationLabel=this.$el.find("label#vacation-label");var holidayLabel=this.$el.find("label#holiday-label");this.$el.find(".card").addClass("opened");this.$el.find(".form-heading").text("EDIT EVENT | "+moment(this.date).format("MMMM DD, YYYY"));this.$el.find("#form-title").val(calEvent.title);this.$el.find("#form-notes").val(calEvent.notes);selectVal.val(calEvent.eventType);selectVal.trigger("change");if(selectVal.val()==="vacation"){vacationSelect.css("display","block");vacationLabel.css("display","block");vacationSelect.val(calEvent.dayOffType);vacationSelect.trigger("change");holidaySelect.val("")}else if(selectVal.val()==="holiday"){holidaySelect.css("display","block");holidayLabel.css("display","block");holidaySelect.val(calEvent.dayOffType);holidaySelect.trigger("change");vacationSelect.val("")}}.bind(this)})},handleDayHover:function(e){$(e.target).append('<div class="hover-outline"></div')},destroyHover:function(e){this.$el.find("div.hover-outline").remove()},handleClose:function(e){e.preventDefault();this.$el.find(".card").removeClass("opened");this.$el.find("#time-in-out-submit")[0].reset();this.$el.find("#time-off-type").select2("val","");this.$el.find("select#vacation").val("");this.$el.find("select#holiday").val("");this.$el.find("select#vacation").trigger("change");this.$el.find("select#holiday").trigger("change");this.$el.find("span.selection .vacation").css("display","none");this.$el.find("span.selection .holiday").css("display","none");this.$el.find(".form-heading").text("");this.date=null;this.selectedId=null},customizeForm:function(e){var selectVal=this.$el.find("#time-off-type").val();var vacationSelect=this.$el.find("span.selection .vacation");var holidaySelect=this.$el.find("span.selection .holiday");var vacationLabel=this.$el.find("label#vacation-label");var holidayLabel=this.$el.find("label#holiday-label");if(selectVal==="vacation"){holidaySelect.css("display","none");holidayLabel.css("display","none");vacationSelect.css("display","block");vacationLabel.css("display","block");this.$el.find("select#holiday").val("")}else if(selectVal==="holiday"){vacationSelect.css("display","none");vacationLabel.css("display","none");holidaySelect.css("display","block");holidayLabel.css("display","block");
this.$el.find("label#title-label").css("margin-top","0px");this.$el.find("select#vacation").val("")}else{vacationSelect.css("display","none");vacationLabel.css("display","none");holidaySelect.css("display","none");holidayLabel.css("display","none");this.$el.find("label#title-label").css("margin-top","-20px");this.$el.find("select#vacation").val("");this.$el.find("select#holiday").val("")}},handleSubmit:function(e){e.preventDefault();this.collection.create({eventType:this.$el.find("#time-off-type").val(),name:this.$el.find("#form-title").val(),notes:this.$el.find("#form-notes").val(),date:new Date(this.date).toISOString(),duration:24,dayOffType:this.$el.find("select#vacation").val()||this.$el.find("select#holiday").val()||null,ownerId:awf.user.info.cnum,ownerType:"employee",availability:"off"},{wait:true})},handleDelete:function(e){e.preventDefault();var modelToDelete=this.collection.findWhere({eventId:this.selectedId});console.log("modelToDelete: ",modelToDelete);modelToDelete.destroy({success:function(){this.collection.trigger("sync");this.selectedId=null}.bind(this)})},getCleanData:function(){var data=this.collection.toJSON();console.log("data: ",data);var cleanData=[];for(var i=0;i<data.length;i++){var dataPoint={availability:data[i].availability,created:new Date(data[i].created),start:new Date(data[i].date),duration:24,title:data[i].name,notes:data[i].notes,eventType:data[i].eventType,modified:data[i].modified,eventId:data[i].eventId,dayOffType:data[i].dayOffType,ownerId:this.id,ownerType:"employee"};cleanData.push(dataPoint)}return cleanData},useSelect2:function(){function options(cssClass){return{allowClear:false,placeholder:"select option",minimumResultsForSearch:-1,containerCssClass:cssClass}}this.$el.find("#time-off-type").select2(options("time-off-type"));this.$el.find("select#vacation").select2(options("vacation"));this.$el.find("select#holiday").select2(options("holiday"))},overRideStyles:function(){this.$el.find("button.fc-today-button").addClass("outline-large")},render:function(){var collection=this.getCleanData();var html=Mustache.render(this.template,{collection:collection});this.$el.html(html);this.useSelect2();this.addCalendar();this.overRideStyles()}});var timeInOutMedium=app.base.views.BaseView;var views={timeInOutLarge:timeInOutLarge,timeInOutMedium:timeInOutMedium};w3n.cogs.timeInOut.views=views})();(function(){w3n.cogs.learning=w3n.cogs.learning||{};w3n.cogs.learning.adapters=w3n.cogs.learning.adapters||{};function translateHours(mins){return Number(mins/60).toFixed(1)}w3n.cogs.learning.adapters.activitiesAdapter=function(data){var temp_data=[];_.forEach(data,function(item){if(item.learnerTranscriptStatus!=="Completion Removed"){temp_data.push({type:item.learnerTranscriptStatus,learning_id:item.LAID||item.lmsId||item.ID,title:item.learningActivityTitle||"",abstract:item.language?item.language.en.description:"",start_date:moment(item.transcriptDate!==null?item.transcriptDate:item.updated).format("MMMM D YYYY"),duration:translateHours(item.duration),completed_date:item.learnerCompletionDate?moment(item.learnerCompletionDate).format("MMMM D YYYY"):null,url:item.url!=="no data available"&&item.url!==""&&item.url!==null?item.url:"//yourlearning.w3bmix.ibm.com/#home/queue/progress",icon_url:item.iconUrl||"//cdn1.iconfinder.com/data/icons/MetroStation-PNG/128/MB__book.png",activity_type:item.activityTypeLabel||""})}});return temp_data}})();(function(){w3n.cogs.learning=w3n.cogs.learning||{};w3n.cogs.learning.adapters=w3n.cogs.learning.adapters||{};function filterType(type){return type==="In Learning Queue"?"in-progress":"completed"}function translateHours(mins){return Number(mins/60).toFixed(1)}w3n.cogs.learning.adapters.BIAdapter=function(data){var temp_data={};_.forEach(data,function(item){temp_data[item.businessInitiativeLabel]=item.businessInitiativeLabel});return temp_data};w3n.cogs.learning.adapters.DTAdapter=function(data){var temp_data={};_.forEach(data,function(item){temp_data[item.learningDeliveryTypeLabel]=item.learningDeliveryTypeLabel});return temp_data}})();(function(){w3n.cogs.learning=w3n.cogs.learning||{};w3n.cogs.learning.adapters=w3n.cogs.learning.adapters||{};function filterTitle(title){var temp_title="";temp_title=_.trim(title.replace("Think Academy","").replace("Think Friday",""));if(temp_title.indexOf("-")===0){temp_title=_.trim(temp_title.replace("-",""))}if(temp_title.indexOf("|")===0){temp_title=_.trim(temp_title.replace("|",""))}if(temp_title.indexOf(":")===0){temp_title=_.trim(temp_title.replace(":",""))}return temp_title.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function filterCourseUrl(item){var url="";_.forEach(item,function(action){if(action.url!==null&&action.url!="no data available"){url=action.url}});return url}function filterType(type){return type==="inProgress"?"in-progress":"completed"}w3n.cogs.learning.adapters.careersmartAdapter=function(resp){var temp_data=[];_.forEach(resp,function(item){temp_data.push({type:filterType(item.status),learning_id:item.id||"",title:filterTitle(item.name),abstract:item.description||"",start_date:moment(item.registrationDate!==null?item.registrationDate:item.startDate).format("MMMM D YYYY"),duration:item.duration,completed_date:item.completedDate?moment(item.completedDate).format("MMMM D YYYY"):null,url:item.url!=="no data available"&&item.url!==""&&item.url!==null?item.url:filterCourseUrl(item.actionButtons)||item.resourceUrl,icon_url:"https://cdn1.iconfinder.com/data/icons/MetroStation-PNG/128/MB__book.png",activity_type:item.activityTypes})});return temp_data}})();(function(){w3n.cogs.learning=w3n.cogs.learning||{};w3n.cogs.learning.adapters=w3n.cogs.learning.adapters||{};w3n.cogs.learning.adapters.localAdapter=function(data){var temp_data=[],now=(new Date).getTime();_.forEach(data,function(item){var s=new Date(item.start_date).getTime();var e=new Date(item.end_date).getTime();if(s<now&&now<e){temp_data.push(item)}});return temp_data}})();(function(){function randomizeAnswers(poll){if(poll.randomise){var answers=_.clone(poll.answers,true),numAnswers=_.size(answers),otherAnswer;if(poll.otherfield&&numAnswers<3||!poll.otherfield&&numAnswers<2){return poll}if(poll.otherfield){otherAnswer=_.clone(answers[numAnswers-1]);delete answers[parseInt(numAnswers-1)];answers.length=parseInt(numAnswers-1)}answers=shuffle(answers);if(poll.otherfield){answers[numAnswers-1]=otherAnswer}poll.answers=answers}_.each(poll.answers,function(answer){if(answer.id===poll.otheranswerid){answer.isOtherAnswer=true}});return poll.answers}function shuffle(obj){obj=_.clone(obj);var arr=_.values(obj);arr=arr.sort(function(){return Math.round(Math.random())-.5});_.each(arr,function(value,i){obj[i]=value});return obj}function addPollStatusText(poll){var statusCodes={0:"Open",1:"Closed",2:"Draft",3:"Publish Pending",4:"Open Pending",5:"Close Pending",6:"Archive Pending",7:"Archived",8:"Voted",9:"Reopen Pending"};statustext=statusCodes[poll.status];return statustext}function addPollTypeText(poll){var typeCodes={0:"Single Select",1:"Multiple Select",2:"Rank Order",3:"Likert Scale"};return typeCodes[poll.type]}function addPollVizTypeText(poll){var vizTypeCodes={0:"None",1:"Pie Chart",2:"Bar Chart"};return vizTypeCodes[poll.viztype]}w3n.cogs.minipulse.adapters.pollAdapter=function(data){return{maxselect:data.polls[0].maxselect,statuscode:data.statuscode,statustext:addPollStatusText(data.polls[0]),status:data.polls[0].status,title:data.polls[0].title.trim(),type:data.polls[0].type,url:"https://minipulse.cambridge.ibm.com/minipoll/Tag/"+data.polls[0].tag,typetext:addPollTypeText(data.polls[0]),viztype:data.polls[0].viztype,viztypetext:addPollVizTypeText(data.polls[0]),targets:data.polls[0].targets,isPrivate:data.polls[0].targets>0?true:false,badges:data.polls[0].status!==0?[{title:"Closed",color:"red"}]:[],hasBadges:data.polls[0].status!==0?true:false,answers:randomizeAnswers(data.polls[0]),question:data.polls[0].question,optionalcomment:data.polls[0].optionalcomment,commentprompt:data.polls[0].commentprompt,otherfield:data.polls[0].otherfield,otheranswerid:data.polls[0].otheranswerid,otherfieldtext:data.polls[0].otherfieldtext,sponsor:data.polls[0].sponsor,responses:data.polls[0].responses,thankyouaddon:data.polls[0].thankyouaddon,likes:data.polls[0].likes,forumlink:data.polls[0].forumlink,liked:data.polls[0].liked,shared:data.polls[0].shared,scaletype:data.polls[0].scaletype}}})();(function(){var adapter_name="status_updates";w3n.cogs[adapter_name]=w3n.cogs[adapter_name]||{};w3n.cogs[adapter_name].adapters=w3n.cogs[adapter_name].adapters||{};w3n.cogs[adapter_name].adapters.comments=function(data){var temp_data=[];_.forEach(data,function(entry,i){var like_text="Like";if(entry.likes.totalItems!==0){_.forEach(entry.likes.items,function(item){if(getFeedId(item.id)==w3n.connections.user_id){like_text="Unlike"}})}temp_data.push({id:entry.id,user_name:entry.author.displayName,user_id:getFeedId(entry.author.id),content:entry.content.replace(/<(span class="photo"|span class="x-lconn-userid")(.*?)\/span>/g,"").replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "),updated:moment(entry.updated).fromNow(),full_date:entry.updated,like_action:like_text})});return temp_data};function getFeedId(feedid){var getId="";if(feedid){var getIdArray=feedid.split(":");getId=getIdArray[getIdArray.length-1]}return getId}})();(function(){var adapter_name="status_updates";w3n.cogs[adapter_name]=w3n.cogs[adapter_name]||{};w3n.cogs[adapter_name].adapters=w3n.cogs[adapter_name].adapters||{};var model_template={update_date:null,full_date:null,photo:null,entry_id:null,followed_resource:null,comments_list:[],total_comments:0,title:null,name:null,content:null,react:{name:null,user_id:null,content:null},event_title:null,full_event_title:null,short_title:null,img:null,email:null,user_id:null,attachments:[],like_html:null,like_count:null,like_url:null};w3n.cogs[adapter_name].adapters.list=function(data){var tempData=[];_.forEach(data,function(list,i){var eventType=list.openSocial.embed.context.eventType,eventTitle=list.openSocial.embed.context.eventTitle,summary=list.openSocial.embed.context.summary,getlistDate=moment(list.updated).fromNow(),prelist=_.cloneDeep(model_template);prelist.update_date=getlistDate;prelist.full_date=list.updated;prelist.photo=getFeedId(list.actor.id);prelist.comments_list=[];prelist.entry_id=list.connections.rollupid;prelist.followed_resource=list.connections.followedResource;prelist.total_comments=0;if(list.target&&list.target.replies&&list.target.replies.totalItems>0){prelist.total_comments=list.target.replies.totalItems;_.forEach(list.target.replies.items,function(item,j){var comment={};comment.name=item.author.displayName;comment.user_id=getFeedId(item.author.id);comment.updated=moment(item.updated).fromNow();comment.content=filterFeedTitle(item.content.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "));prelist.comments_list.push(comment)})}else if(list.object&&list.object.replies&&list.object.replies.totalItems>0){prelist.total_comments=list.object.replies.totalItems;_.forEach(list.object.replies.items,function(item,k){var comment={};comment.name=item.author.displayName;comment.user_id=getFeedId(item.author.id);comment.updated=moment(item.updated).fromNow();comment.content=filterFeedTitle(item.content.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "));prelist.comments_list.push(comment)})}if(eventType=="profiles.status.updated"&&list.verb=="bump"||eventType=="profiles.wall.recommendation.added"||eventType=="profiles.wall.comment.added"||eventType=="profiles.wallpost.created"||eventType=="community.wall.recommendation.added"||eventType=="community.wallpost.created"){prelist.title=list.title.replace(/<(span class="photo"|span class="x-lconn-userid")(.*?)\/span>/g,"").replace(/<(?!a|\/a)(.*?)>/g,"").replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' role='button' ");prelist.name=list.actor.displayName}else{prelist.title="<a href='https://w3-connections.ibm.com/profiles/html/profileView.do?userid="+prelist.photo+"' onclick='window.open(this.href);return false;' role='button' title='Open the profile of "+list.actor.displayName+"'>"+list.actor.displayName+"</a>";prelist.name=list.actor.displayName}var author=list.object.author||{};if(list.target){if(list.target.displayName!==list.actor.displayName&&(list.target.displayName===author.displayName||list.actor.displayName===author.displayName)&&eventType!=="profiles.wallpost.created"&&eventType!=="community.wall.recommendation.added"&&eventType!=="community.wallpost.created"){if(list.target.author){if(list.target.author.displayName!==list.target.displayName&&list.target.author.displayName===list.actor.displayName){prelist.content=filterFeedTitle(list.openSocial.embed.context.summary.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "))}else{prelist.react.name=list.target.author.displayName;prelist.react.user_id=getFeedId(list.target.author.id);prelist.react.content=filterFeedTitle(list.openSocial.embed.context.summary.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "))}}else{if(list.actor.displayName===author.displayName&&list.target.displayName!==author.displayName){prelist.content=filterFeedTitle(list.openSocial.embed.context.summary.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "))}else{prelist.react.name=list.target.displayName;prelist.react.user_id=getFeedId(list.target.id);prelist.react.content=filterFeedTitle(list.openSocial.embed.context.summary.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "))}}}else if(list.target.displayName!==list.actor.displayName&&list.target.displayName!==author.displayName&&author.displayName!==list.actor.displayName&&eventType!=="profiles.wallpost.created"&&eventType!=="profiles.wall.comment.added"&&eventType!=="community.wall.recommendation.added"&&eventType!=="community.wallpost.created"){prelist.react.name=author.displayName;prelist.react.user_id=getFeedId(author.id);prelist.react.content=filterFeedTitle(list.openSocial.embed.context.summary.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "))}else if(list.target.displayName===list.actor.displayName&&list.target.displayName!==author.displayName&&author.displayName!==list.actor.displayName&&eventType!=="profiles.wall.comment.added"&&eventType!=="community.wall.recommendation.added"&&eventType!=="community.wallpost.created"){prelist.react.name=author.displayName;prelist.react.user_id=getFeedId(author.id);prelist.react.content=filterFeedTitle(list.openSocial.embed.context.summary.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "))}else{prelist.content=filterFeedTitle(list.openSocial.embed.context.summary.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "))}}else{if(list.actor.displayName===author.displayName&&eventType!=="profiles.wallpost.created"&&eventType!=="community.wall.recommendation.added"&&eventType!=="community.wallpost.created"){if(list.actor.displayName===author.displayName){prelist.content=filterFeedTitle(list.openSocial.embed.context.summary.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "))}else{prelist.react.name=author.displayName;prelist.react.user_id=getFeedId(author.id);prelist.react.content=filterFeedTitle(list.openSocial.embed.context.summary.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "))}}else if(author.displayName!==list.actor.displayName&&eventType!=="profiles.wallpost.created"&&eventType!=="community.wall.recommendation.added"&&eventType!=="community.wallpost.created"){prelist.react.name=author.displayName;prelist.react.user_id=getFeedId(author.id);prelist.react.content=filterFeedTitle(list.openSocial.embed.context.summary.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "))}else{prelist.content=filterFeedTitle(list.openSocial.embed.context.summary.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "))}}if(!prelist.content){prelist.content=filterFeedTitle(summary.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' "))}eventTitle=simplifyHTML(eventTitle);prelist.event_title=eventTitle.indexOf("<a class")===0?eventTitle.replace(/<a class(.*?)\/a>/,""):eventTitle;prelist.event_title=prelist.event_title.replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' ");prelist.content=simplifyHTML(prelist.content,"single");prelist.full_event_title=prelist.content.indexOf("<a class")===0?prelist.content.replace(/<a class(.*?)\/a>/,""):prelist.content;var connectonsObj=list.connections;if(connectonsObj){prelist.short_title=connectonsObj.shortTitle.replace(/<(span class="photo"|span class="x-lconn-userid")(.*?)\/span>/g,"").replace(/"/g,"'").replace(/<a /g,"<a onclick='window.open(this.href);return false;' ").replace(/<span(.*?)>/g,"").replace(/<\/span>/g,"")}prelist.img={size:"60",alt:prelist.name};prelist.email="";prelist.user_id=prelist.photo;prelist.attachments=[];if(list.object&&list.object.attachments){_.forEach(list.object.attachments,function(a,x){var fileArray="";if(a.displayName){fileArray=a.displayName.split(".");a.fileType=fileArray[fileArray.length-1]}else{var fileUrl=a.url.split("/");a.displayName=fileUrl[fileUrl.length-1];fileArray=a.displayName.split(".");a.fileType=fileArray[fileArray.length-1]}prelist.attachments.push(a)})}else if(list.target&&list.target.attachments){_.forEach(list.target.attachments,function(a,y){var fileArray="";if(a.displayName){fileArray=a.displayName.split(".");a.fileType=fileArray[fileArray.length-1]}else{var fileUrl=a.url.split("/");a.displayName=fileUrl[fileUrl.length-1];fileArray=a.displayName.split(".");a.fileType=fileArray[fileArray.length-1]}prelist.attachments.push(a)})}prelist.like_html="Like";if(list.target!==undefined&&list.target.likes!==undefined&&list.target.likes.totalItems!==undefined){prelist.like_count=list.target.likes.totalItems;if(list.target.likes.items!==undefined){prelist.like_html="Unlike"}}else if(list.object!==undefined&&list.object.likes!==undefined&&list.object.likes.totalItems!==undefined){prelist.like_count=list.object.likes.totalItems;if(list.object.likes.items!==undefined){prelist.like_html="Unlike"}}else{prelist.like_count="0"}prelist.like_url=list.connections.likeService;tempData.push(prelist)});return tempData};function simplifyHTML(html,chart){if(chart=="single"){return html.replace(/<(span class='photo'|span class='x-lconn-userid')(.*?)\/span>/g,"").replace(/<span(.*?)>/g,"").replace(/<\/span>/g,"")}else{return html.replace(/<(span class="photo"|span class="x-lconn-userid")(.*?)\/span>/g,"").replace(/<span(.*?)>/g,"").replace(/<\/span>/g,"")}}function filterFeedTitle(title){var html="";var person="";var oriArray=[];var regArray=[];var i=-1;if(title.indexOf("profileView.do?userid=")!=-1){var atag=new RegExp("<a(.*?)</a","g");var at=new RegExp("@(.*?)</a");oriArray=title.match(atag);if(oriArray===null){return title}else{_.forEach(oriArray,function(str,i){if(str.indexOf("profileView.do?userid=")!=-1){if(str.match(at)===null){regArray.push(str)}else{regArray.push(str.replace("<a ","<a role='button' title='Open the profile of "+str.match(at)[1]+"' "))}}else{regArray.push(str)}});html=title.replace(atag,function(){i++;if(i<regArray.length){return regArray[i]}});return html}}else{return title}}function getFeedId(feedid){var getId="";if(feedid){var getIdArray=feedid.split(":");getId=getIdArray[getIdArray.length-1]}return getId}})();(function(){w3n.adapters.tpb.DownloadSpreadsheet={};var blockedText='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';var replaceBlockedText="XXXXXXX";var supplementalFields=["cnum","band","yearsInBand","pbcYear1","pbcYear2","pbcYear3","careerFramework","tldrType","btl","subBand","think40","sexCode","pmr","lk","jobCategory","mppLevel","piiLevel","iot","promoEligible","pa","ptlrisk","country","currentPBC","priorPrevPBC","previousPBC"];var maskDashboardField=function(fieldValue){if(fieldValue===blockedText){fieldValue=replaceBlockedText}return fieldValue};var maskAlertData=function(index,value){if(value==="X"||value==="x"){var fieldName=index.replace(/mask/gi,"");supplementalData[fieldName]=replaceBlockedText}};var stripHTML=function(htmlString){if(awf.flags.isActive("cogs.talentplaybook.csv-remove-html")){var countHref=(htmlString.match(/href=/g)||[]).length;var href="";if(htmlString.match(/href=['"]([^'"]*)/)){href=" "+htmlString.match(/href=['"]([^'"]*)/)[1]}htmlString=htmlString.replace(/<a(?:.|\n)*?>/gm,"");htmlString=htmlString.replace(/<\/a(?:.|\n)*?>/gm,href)}return htmlString};w3n.adapters.tpb.DownloadSpreadsheet.main=function(dashboard,options){var CSVOutput=[];var currDashboardName=options.currDashboardName||"yourteam";_.forEach(dashboard,function(entry,k){var csvItem={};var item=dashboard[k];csvItem.CNUM=item.id;csvItem.name=maskDashboardField(item.fullname);csvItem.band=maskDashboardField(item.band);csvItem.country=maskDashboardField(item.country);csvItem.department=maskDashboardField(item.dept);if(w3n.adapters.tpb.DownloadSpreadsheet[currDashboardName]){_.extend(csvItem,w3n.adapters.tpb.DownloadSpreadsheet[currDashboardName](item))}if(currDashboardName!=="compensation"){delete csvItem.appAnnualSalary;delete csvItem.lastSalaryChangeAmount;delete csvItem.lastSalaryChangeDate;delete csvItem.pmr;delete csvItem.bonusPay;delete csvItem.awards;delete csvItem.holdingPower;delete csvItem.btlTalent2014B9;delete csvItem.btlTalent2014B10;delete csvItem.serviceLenght;delete csvItem.currency}if(w3n.tpConfig.dashboards[currDashboardName].hasAlerts){for(var c=1;c<5;c++){csvItem["Talent_Playbook_Category_"+c]="";csvItem["Talent_Playbook_Observation_"+c]="";csvItem["Talent_Playbook_Recommendation_"+c]="";csvItem["Talent_Playbook_Supplemental_Data_Used_"+c]=""}}CSVOutput.push(csvItem)});return CSVOutput};w3n.adapters.tpb.DownloadSpreadsheet.yourteam=function(item){return{Position:maskDashboardField(item.position),Status:maskDashboardField(item.status),Employee_Type:maskDashboardField(item.employeeType)}};w3n.adapters.tpb.DownloadSpreadsheet.bcg=function(item){if(item.bcgIsExemptFlag&&item.bcgIsExemptFlag.toUpperCase()==="X"){item.exempt=replaceBlockedText}if(item.bcgCompletionDateFlag&&item.bcgCompletionDateFlag.toUpperCase()==="X"){item.bcgCompletionDate=replaceBlockedText}if(item.bcgCertificateDateFlag&&item.bcgCertificateDateFlag.toUpperCase()==="X"){item.bcgCertificateDate=replaceBlockedText}if(item.bcgCourseCompletionDateFlag&&item.bcgCourseCompletionDateFlag.toUpperCase()==="X"){item.bcgCourseCompletionDate=replaceBlockedText}if(item.exempt!==""&&item.exempt!==replaceBlockedText){return{BCG_Completion_Date:item.exempt,BCG_Certificate_Date:item.exempt,BCG_Course_Completion_Date:item.exempt}}else{return{BCG_Completion_Date:item.bcgCompletionDate,BCG_Certificate_Date:item.bcgCertificateDate,BCG_Course_Completion_Date:item.bcgCourseCompletionDate}}};w3n.adapters.tpb.DownloadSpreadsheet.compensation=function(item){return{Currency:maskDashboardField(item.currency),Approximate_Annual_Salary:maskDashboardField(item.appAnnualSalary),Last_Salary_Change:maskDashboardField(item.lastSalaryChangeAmount),Last_Salary_Change_Date:maskDashboardField(item.lastSalaryChangeDate),PMR:maskDashboardField(item.pmr),Bonus_Pay:maskDashboardField(item.bonusPay),Awards:maskDashboardField(item.awards),Holding_Power:maskDashboardField(item.holdingPower)}};w3n.adapters.tpb.DownloadSpreadsheet.dates=function(item){return{dateOfBirth:maskDashboardField("XXXX-"+item.dateOfBirth),serviceReference:maskDashboardField(item.serviceReference),serviceLength:maskDashboardField(item.serviceLength),dateOfHire:maskDashboardField(item.dateOfHire)}};w3n.adapters.tpb.DownloadSpreadsheet.emergency=function(item){var emergencies={};var allEmerg=item.emergencies;if(allEmerg){_.forEach(allEmerg,function(item,index){emergencies["Emergency_Name_"+(index+1)]=item.emergencyContactName;emergencies["Emergency_Relationship_"+(index+1)]=item.relationship;emergencies["Emergency_Phone_Number_"+(index+1)]=item.phone})}return emergencies};w3n.adapters.tpb.DownloadSpreadsheet.leadership=function(item){return{Extraordinary_Leadership_Potential:maskDashboardField(item.extLeadPot),BTL_Executive_Potential:maskDashboardField(item.btlExecPot),BTL_First_Executive_Appointment:maskDashboardField(item.timeframe),BTL_Senior_Executive_Potential:maskDashboardField(item.btlSenExecPot),Position:maskDashboardField(item.position),Service_Reference:maskDashboardField(item.serviceReference),Service_Length:maskDashboardField(item.serviceLength)}};w3n.adapters.tpb.DownloadSpreadsheet.performance=function(item){return{Business_Results:item.businessResultsTextOnly,Client_Success:item.clientSuccessTextOnly,Innovation:item.innovationTextOnly,Responsibility_to_Others:item.responsibilityToOthersTextOnly,Skills:item.skillsTextOnly,Checkpoint_Assessment_Date:item.checkpointAssessmentDate,Checkpoint_Job_Availability:item.checkpointQuestionJobAvailability,Checkpoint_Manager_Certification:item.checkpointQuestionManagerCertification,pbcYear1:maskDashboardField(item.pbcYear1),pbcYear2:maskDashboardField(item.pbcYear2),pbcYear3:maskDashboardField(item.pbcYear3)}};w3n.adapters.tpb.DownloadSpreadsheet.expenses=function(item){var csvItem={};var chargedDefault_currency=item.wwer2.chargedDefaultCurrencyMask?replaceBlockedText:item.wwer2.chargedDefaultCurrency;csvItem["Expense Reimbursement: Default Account"]=item.wwer2.chargedDefaultMask?replaceBlockedText:item.wwer2.chargedDefault+" "+chargedDefault_currency;var chargedOther_currency=item.wwer2.chargedOtherCurrencyMask?replaceBlockedText:item.wwer2.chargedOtherCurrency;csvItem["Expense Reimbursement: Other Account"]=item.wwer2.chargedOtherMask?replaceBlockedText:item.wwer2.chargedOther+" "+chargedOther_currency;var otherExpenses_currency=item.otherExpensesCurrencyMask?replaceBlockedText:item.otherExpensesCurrency;csvItem["Other Expenses (CB+LDV)"]=item.otherExpensesMask?replaceBlockedText:item.otherExpenses+" "+otherExpenses_currency;csvItem["Outstanding Advances"]=item.outstandingAdvances+" "+item.outstandingAdvancesCur;csvItem["Outstanding Card Charges"]=item.outstandingCardCharges+" "+item.outstandingCardChargesCur;_.forEach(item.wwer,function(value,key){var alert=0,description,amountPaid;if(value.hasDate){if(value.alertsMask){alert=replaceBlockedText}else if(value.hasAlerts){alert=value.alerts}else{alert="No alerts"}if(!value.descriptionMask){description=value.description}else{description=replaceBlockedText}if(!value.amountMask){amountPaid=value.amount}else{amountPaid=replaceBlockedText}if(!value.currencyMask){amountPaid=amountPaid+" "+value.currency}else{amountPaid=amountPaid+" "+replaceBlockedText}if(key===0){csvItem["WWER report"]="("+String(key+1)+")"+"Alerts:"+alert+"\n"+"Description: "+description+"\n"+"Amount Paid: "+amountPaid+"\n\n"}else{csvItem["WWER report"]=csvItem["WWER report"]+"("+String(key+1)+")"+"Alerts:"+alert+"\n"+"Description: "+description+"\n"+"Amount Paid: "+amountPaid+"\n\n"}}else{csvItem["WWER report"]=""}});if(item.cb){if(item.cb.hasDate){if(item.cb.alertsMask){csvItem["CB Alerts"]=replaceBlockedText}else if(item.cb.hasAlerts){csvItem["CB Alerts"]=item.cb.alerts}else{csvItem["CB Alerts"]="No alerts"}if(!item.cb.descriptionMask){csvItem["CB Description"]=item.cb.description}else{csvItem["CB Description"]=replaceBlockedText}if(!item.cb.amountMask){csvItem["CB - Amount Paid"]=item.cb.amount}else{csvItem["CB - Amount Paid"]=replaceBlockedText}if(!item.cb.currencyMask){csvItem["CB - Amount Paid"]=csvItem["CB - Amount Paid"]+" "+item.cb.currency}else{csvItem["CB - Amount Paid"]=csvItem["CB - Amount Paid"]+" "+replaceBlockedText}}else{csvItem["CB Alerts"]="";csvItem["CB Description"]="";csvItem["CB - Amount Paid"]=""}}if(item.ldv){if(item.ldv.hasDate){if(item.ldv.alertsMask){csvItem["LDV Alerts"]=replaceBlockedText}else if(item.ldv.hasAlerts){csvItem["LDV Alerts"]=item.ldv.alerts}else{csvItem["LDV Alerts"]="No alerts"}if(!item.ldv.descriptionMask){csvItem["LDV Description"]=item.ldv.description}else{csvItem["LDV Description"]=replaceBlockedText}if(!item.ldv.amountMask){csvItem["LDV - Amount Paid"]=item.ldv.amount}else{csvItem["LDV - Amount Paid"]=replaceBlockedText}if(!item.ldv.currencyMask){csvItem["LDV - Amount Paid"]=csvItem["LDV - Amount Paid"]+" "+item.ldv.currency}else{csvItem["LDV - Amount Paid"]=csvItem["LDV - Amount Paid"]+" "+replaceBlockedText}}else{csvItem["LDV Alerts"]="";csvItem["LDV Description"]="";csvItem["LDV - Amount Paid"]=""}}return csvItem};w3n.adapters.tpb.DownloadSpreadsheet.alerts=function(alerts,options){var currDashboardName=options.currDashboardName||"yourteam";var currDashboardCategories=w3n.tpConfig.dashboards[currDashboardName].categories;var csvItems=[];_.forEach(alerts,function(item,i){var csvItem={};var alertItem=alerts.models[i];csvItem.CNUM=alertItem.attributes.supplemental.cnum;var supplementalData=alertItem.attributes.supplemental;$.each(supplementalData,maskAlertData);var alertBuild=alertItem.attributes.allNotices;var alertNumber=0;for(var j=0;j<alertBuild.length;j++){if(alertBuild[j].observation||alertBuild[j].recommendation){if(currDashboardCategories.indexOf(alertBuild[j].categoryId)>=0){alertNumber++;csvItem["Talent_Playbook_Category_"+alertNumber]=alertBuild[j].categoryLabel;csvItem["Talent_Playbook_Observation_"+alertNumber]=alertBuild[j].observation;csvItem["Talent_Playbook_Recommendation_"+alertNumber]=stripHTML(alertBuild[j].recommendation);var suppDataUsedIndex="Talent_Playbook_Supplemental_Data_Used_"+alertNumber;for(var ind1=0;ind1<alertBuild[j].supplementalUsed.length;ind1++){var suppFieldName=alertBuild[j].supplementalUsed[ind1];alertBuild[j].supplementalUsed[ind1]=w3n.utils.data.talentplaybook.supplementalFieldNames[suppFieldName];csvItem[suppDataUsedIndex]+=alertBuild[j].supplementalUsed[ind1]+", "}}}}if(supplementalData){_.forEach(supplementalData,function(value,key){if(w3n.utils.data.talentplaybook.supplementalFieldNames[key]){csv_key=w3n.utils.data.talentplaybook.supplementalFieldNames[key].replace(/ /g,"_");csvItem[csv_key]=value}})}csvItems.push(csvItem)});return csvItems};w3n.adapters.tpb.DownloadSpreadsheet.merge=function(main,alerts){_.forEach(main,function(item){_.forEach(alerts,function(alert){if(item.CNUM==alert.CNUM){_.extend(item,alert)}})});return main}})();(function(){w3n.adapters.tpb.BCG=function(response,options){var thisBCG=response.BCG_COMPLETION_DATE;var bcgIsExemptFlag=response.FIS_EXEMPT||"";var bcgIsExempt=response.IS_EXEMPT||"";var bcgCompletionDateFlag=response.FBCG_COMPLETION_DATE||"";var bcgCompletionDate=response.BCG_COMPLETION_DATE||"";var bcgCertificateDateFlag=response.FCERT_DATE||"";var bcgCertificateDate=response.CERT_DATE||"";var bcgCourseCompletionDateFlag=response.FCOMPL_DATE||"";var bcgCourseCompletionDate=response.COMPL_DATE||"";var bcgCNUM=response.CNUM||"";if(bcgCompletionDate!==null&&bcgCompletionDate!==""){bcgCompletionDate=bcgCompletionDate.substring(0,4)+"-"+bcgCompletionDate.substring(4,6)+"-"+bcgCompletionDate.substring(6)}if(bcgCertificateDate!==null&&bcgCertificateDate!==""){bcgCertificateDate=bcgCertificateDate.substring(0,4)+"-"+bcgCertificateDate.substring(4,6)+"-"+bcgCertificateDate.substring(6)}if(bcgCourseCompletionDate!==null&&bcgCourseCompletionDate!==""){bcgCourseCompletionDate=bcgCourseCompletionDate.substring(0,4)+"-"+bcgCourseCompletionDate.substring(4,6)+"-"+bcgCourseCompletionDate.substring(6)}var exempt="";var displayBlock1="none";var displayCheckMark1="none";var displayDone1="none";
var displayNoText1="none";var displayBlock2="none";var displayCheckMark2="none";var displayDone2="none";var displayNoText2="none";var displayBlock3="none";var displayCheckMark3="none";var displayDone3="none";var displayNoText3="none";if(bcgIsExemptFlag.toUpperCase()==="X"||bcgCompletionDateFlag.toUpperCase()==="X"){displayBlock1="block";displayBlock2="block";displayBlock3="block";exempt="";bcgCompletionDate="";bcgCertificateDate="";bcgCourseCompletionDate=""}else if(bcgIsExempt.toUpperCase()==="Y"){exempt="Exempt";bcgCompletionDate="";bcgCertificateDate="";bcgCourseCompletionDate=""}else{exempt="";displayDone1="inline";displayDone2="inline";displayDone3="inline";if(bcgCompletionDate===null||bcgCompletionDate===""){displayNoText1="inline-block"}if(bcgCertificateDate===null||bcgCertificateDate===""){displayNoText2="inline-block"}if(bcgCourseCompletionDate===null||bcgCourseCompletionDate===""){displayNoText3="inline-block"}}if(bcgCompletionDate!==null&&bcgCompletionDate!==""){displayCheckMark1="inline-block"}if(bcgCertificateDate!==null&&bcgCertificateDate!==""){displayCheckMark2="inline-block"}if(bcgCourseCompletionDate!==null&&bcgCourseCompletionDate!==""){displayCheckMark3="inline-block"}var data={cnum:response.CNUM,bcgCompletionDate:bcgCompletionDate,bcgCertificateDate:bcgCertificateDate,bcgCourseCompletionDate:bcgCourseCompletionDate,exempt:exempt,displayBlock1:displayBlock1,displayBlock2:displayBlock2,displayBlock3:displayBlock3,displayCheckMark1:displayCheckMark1,displayCheckMark2:displayCheckMark2,displayCheckMark3:displayCheckMark3,displayDone1:displayDone1,displayDone2:displayDone2,displayDone3:displayDone3,displayNoText1:displayNoText1,displayNoText2:displayNoText2,displayNoText3:displayNoText3,bcgCompletionDateFlag:bcgCompletionDateFlag,bcgCertificateDateFlag:bcgCertificateDateFlag,bcgCourseCompletionDateFlag:bcgCourseCompletionDateFlag,bcgIsExemptFlag:bcgIsExemptFlag};return data}})();(function(){w3n.adapters.tpb.Emergency=function(response,options){function correctString(str){var correctedString=str.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()});return correctedString.replace(",","")}var country=response.CCOUNTRY;var rcnum=response.RCNUM;var emergencyContactName=correctString(response.TECNAMFUL);var relationship=correctString(response.TERCREL);var type=response.TLDRTYPE;var phone=response.TTELNR;var wsfKey=response.WSF_KEY_FL;if(response.FEMCONT_1!==""){emergencyContactName='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FEMCONT_2!==""){relationship='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FEMCONT_3!==""){phone='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}var data={country:country,rcnum:rcnum,emergencyContactName:emergencyContactName,relationship:relationship,type:type,phone:phone,wsfKey:wsfKey};return data}})();(function(){w3n.adapters.tpb.ExpensesOptionalSummary=function(item,options){if(item.cb&&item.ldv){return _.extend({},item,{id:item.cnum,otherExpenses:(parseFloat(item.cb.total)+parseFloat(item.ldv.total)).toFixed(2),otherExpensesMask:item.cb.totalMask||item.ldv.totalMask,otherExpensesCurrency:item.cb.currency||item.ldv.currency,otherExpensesCurrencyMask:item.cb.currencyMask||item.ldv.currencyMask})}else{return item}}})();(function(){w3n.adapters.tpb.ExpensesOptionalList=function(item,options){item.hasCB=false;if(item.cb){item.cb.hasAlerts=checkExpenseAlerts(item.cb);item.cb.hasDate=checkExpenseDate(item.cb);if(item.cb.hasDate){item.hasCB=true}}item.hasLDV=false;if(item.ldv){item.ldv.hasAlerts=checkExpenseAlerts(item.ldv);item.ldv.hasDate=checkExpenseDate(item.ldv);if(item.ldv.hasDate){item.hasLDV=true}}return item};function checkExpenseAlerts(data){var hasAlerts=data.alerts>0?true:false;return hasAlerts}function checkExpenseDate(data){var hasDate=data.date&&data.id?true:false;return hasDate}})();(function(){w3n.adapters.tpb.ExpensesRequiredSummary=function(item,options){var nameParts=item.name.split(/[\s,]+/);var hasComma=item.name.indexOf(",")>0;var firstInit,lastInit;if(hasComma){firstInit=nameParts&&nameParts[1]&&nameParts.length>1?nameParts[1][0].toUpperCase():"";lastInit=nameParts&&nameParts[0]&&nameParts.length>0?nameParts[0][0].toUpperCase():""}else{firstInit=nameParts&&nameParts[0]&&nameParts.length>0?nameParts[0][0].toUpperCase():"";lastInit=nameParts&&nameParts[1]&&nameParts.length>1?nameParts[1][0].toUpperCase():""}return _.extend({},item,{period:options.period,id:item.cnum,uid:item.cnum,fullname:item.name,dept:item.department,initials:firstInit+lastInit,wwer2:item.wwer,outstandingAdvances:item.wwer?item.wwer.outstandingAdvances:0,outstandingAdvancesCur:item.wwer?item.wwer.outstandingAdvancesCurrency:0,outstandingCardCharges:item.wwer?item.wwer.outstandingCard:0,outstandingCardChargesCur:item.wwer?item.wwer.outstandingCardCurrency:0})}})();(function(){w3n.adapters.tpb.ExpensesRequiredList=function(item,options){if(item.wwer){_.forEach(item.wwer,function(value){value.hasAlerts=value&&checkExpenseAlerts(value);value.hasDate=value&&checkExpenseDate(value);if(value.hasDate){item.hasWWER=true}})}return item};function checkExpenseAlerts(data){var hasAlerts=data.alerts>0?true:false;return hasAlerts}function checkExpenseDate(data){var hasDate=data.date&&data.id?true:false;return hasDate}})();(function(){w3n.adapters.tpb.Leadership=function(response,options){var maskIcon='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';var globalteam_var,incountryteam_var;var fullNameParse=response.TNAMFULL;var lastName=fullNameParse.substring(0,fullNameParse.indexOf(","));var firstName=fullNameParse.substring(fullNameParse.indexOf(",")+2,fullNameParse.length);if(response.TLDRTYPE==="Global"||response.TLDRTYPE==="Both"){globalteam_var=true}else{globalteam_var=false}if(response.TLDRTYPE==="In-Country"||response.TLDRTYPE==="InCountry"||response.TLDRTYPE==="Both"){incountryteam_var=true}else{incountryteam_var=false}var sLength=response.SERVICEDUR;if(response.FSERVDUR!==""){sLength='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}var sRefDate=response.DSERRFIW;if(response.DSERRFIW!==null){sRefDate=response.DSERRFIW.substring(0,4)+"-"+response.DSERRFIW.substring(4,6)+"-"+response.DSERRFIW.substring(6)}if(response.FDSERRFIW!==""){sRefDate='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}var sPosition=response.TPOSITION;if(response.FPOSITION!==""){sPosition='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}var mTimeInBand=response.TIMEINBND;if(response.FTINBND!==""){mTimeInBand='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}var mDept=response.RDEPT;if(response.FDEPT!==""){mDept='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}var extLeadPotMask=response.FFBTLRES==="X"?maskIcon:null;var extLeadPot=response.FBTLRES==="Y"?true:false;var btlExecPotMask=response.FEXCSTAT==="X"?maskIcon:null;var btlSenExecPotMask=response.FEXCSTAT==="X"?maskIcon:null;var execStatus=response.EXECUTIVE_STATUS;var btlExecPot=execStatus.endsWith("with senior executive potential")?execStatus.substring(0,execStatus.indexOf("with senior executive potential")):null;var btlSenExecPot=execStatus.endsWith("with senior executive potential")?true:false;var timeframe=response.FTIMEFRM==="X"?maskIcon:response.TTIMEFRM;var band=response.FBAND==="X"?maskIcon:response.SALBIAW;var returnObj={id:response.CNUM,uid:response.CNUM,fullname:response.TNAMFULL,dept:mDept,position:sPosition,initials:firstName.trim()[0].toUpperCase()+lastName.trim()[0].toUpperCase(),extLeadPot:extLeadPot,btlExecPot:btlExecPot,btlFirstExecPot:btlSenExecPot,btlSenExecPot:btlSenExecPot,extLeadPotMask:extLeadPotMask,btlExecPotMask:btlExecPotMask,btlSenExecPotMask:btlSenExecPotMask,timeframe:timeframe,timeInBand:mTimeInBand,band:band,country:response.CCOUNTRY,serviceLength:sLength,serviceReference:sRefDate,globalteam:globalteam_var,incountryteam:incountryteam_var};return returnObj}})();(function(){w3n.adapters.tpb.Performance=function(response,options){var blockHTML='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';var businessResults="";var businessResultsTextOnly="";if(response.FDIM05!==""){businessResults=blockHTML;businessResultsTextOnly="XXXXXXX"}else{if(response.CDIM05==="EXC"){businessResults='<div class="a-performance-exc showtooltip" data-definition="<span>Exceeds</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';businessResultsTextOnly="Exceeds"}else if(response.CDIM05==="ACH"){businessResults='<div class="b-performance-ach showtooltip" data-definition="<span>Achieves</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';businessResultsTextOnly="Achieves"}else if(response.CDIM05==="MOR"){businessResults='<div class="c-performance-mor showtooltip" data-definition="<span>Expects More</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';businessResultsTextOnly="Expects More"}else{businessResults='<div class="d-performance-none showtooltip" data-definition="<span>No Rating</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';businessResultsTextOnly="No Rating"}}var clientSuccess="";var clientSuccessTextOnly="";if(response.FDIM04!==""){clientSuccess=blockHTML;clientSuccessTextOnly="XXXXXXX"}else{if(response.CDIM04==="EXC"){clientSuccess='<div class="a-performance-exc showtooltip" data-definition="<span>Exceeds</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';clientSuccessTextOnly="Exceeds"}else if(response.CDIM04==="ACH"){clientSuccess='<div class="b-performance-ach showtooltip" data-definition="<span>Achieves</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';clientSuccessTextOnly="Achieves"}else if(response.CDIM04==="MOR"){clientSuccess='<div class="c-performance-mor showtooltip" data-definition="<span>Expects More</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';clientSuccessTextOnly="Expects More"}else{clientSuccess='<div class="d-performance-none showtooltip" data-definition="<span>No Rating</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';clientSuccessTextOnly="No Rating"}}var innovation="";var innovationTextOnly="";if(response.FDIM03!==""){innovation=blockHTML;innovationTextOnly="XXXXXXX"}else{if(response.CDIM03==="EXC"){innovation='<div class="a-performance-exc showtooltip" data-definition="<span>Exceeds</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';innovationTextOnly="Exceeds"}else if(response.CDIM03==="ACH"){innovation='<div class="b-performance-ach showtooltip" data-definition="<span>Achieves</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';innovationTextOnly="Achieves"}else if(response.CDIM03==="MOR"){innovation='<div class="c-performance-mor showtooltip" data-definition="<span>Expects More</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';innovationTextOnly="Expects More"}else{innovation='<div class="d-performance-none showtooltip" data-definition="<span>No Rating</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';innovationTextOnly="No Rating"}}var responsibility="";var responsibilityTextOnly="";if(response.FDIM02!==""){responsibility=blockHTML;responsibilityTextOnly="XXXXXXX"}else{if(response.CDIM02==="EXC"){responsibility='<div class="a-performance-exc showtooltip" data-definition="<span>Exceeds</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';responsibilityTextOnly="Exceeds"}else if(response.CDIM02==="ACH"){responsibility='<div class="b-performance-ach showtooltip" data-definition="<span>Achieves</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';responsibilityTextOnly="Achieves"}else if(response.CDIM02==="MOR"){responsibility='<div class="c-performance-mor showtooltip" data-definition="<span>Expects More</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';responsibilityTextOnly="Expects More"}else{responsibility='<div class="d-performance-none showtooltip" data-definition="<span>No Rating</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';responsibilityTextOnly="No Rating"}}var skills="";var skillsTextOnly="";if(response.FDIM01!==""){skills=blockHTML;skillsTextOnly="XXXXXXX"}else{if(response.CDIM01==="EXC"){skills='<div class="a-performance-exc showtooltip" data-definition="<span>Exceeds</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';skillsTextOnly="Exceeds"}else if(response.CDIM01==="ACH"){skills='<div class="b-performance-ach showtooltip" data-definition="<span>Achieves</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';skillsTextOnly="Achieves"}else if(response.CDIM01==="MOR"){skills='<div class="c-performance-mor showtooltip" data-definition="<span>Expects More</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';skillsTextOnly="Expects More"}else{skills='<div class="d-performance-none showtooltip" data-definition="<span>No Rating</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>';skillsTextOnly="No Rating"}}var checkpointAssessmentDate="";if(response.FCKPTDCOMPLET!==""){checkpointAssessmentDate=blockHTML}else if(response.DCOMPLET===""){checkpointAssessmentDate="No Data"}else{checkpointAssessmentDate=response.DCOMPLET}var checkpointQuestionJobAvailability="";if(response.FQSTN01!==""){checkpointQuestionJobAvailability=blockHTML}else if(response.FFLQ01==="Y"||response.FFLQ01==="y"){checkpointQuestionJobAvailability='<i class="icon icon-awf-checkmark"></i>Yes, this employee can be made available for a new job opportunity in the next calender year.'}else if(response.FFLQ01==="N"||response.FFLQ01==="n"){ischeckpointQuestionJobAvailability=false;checkpointQuestionJobAvailability='<i class="icon icon-awf-op-times-bold"></i>No, this employee may not be made available for a new job opportunity in the next calender year.'}else{checkpointQuestionJobAvailability="No data"}var checkpointQuestionManagerCertification="";if(response.FQSTN02!==""){checkpointQuestionManagerCertification=blockHTML}else if(response.FFLQ02==="Y"||response.FFLQ02==="y"){checkpointQuestionManagerCertification='<i class="icon icon-awf-checkmark"></i>Yes, the Global Manager completed the enablement and received certification, prior to accessing this employee.'}else if(response.FFLQ02==="N"||response.FFLQ02==="n"){checkpointQuestionManagerCertification='<i class="icon icon-awf-op-times-bold"></i>No, the Global Manager did not complete the enablement and receive certification, prior to accessing this employee.'}else{checkpointQuestionManagerCertification="No data"}var isabc='<i class="icon icon-awf-checkmark"></i>';var data={cnum:response.CNUM,businessResults:businessResults,businessResultsTextOnly:businessResultsTextOnly,clientSuccess:clientSuccess,clientSuccessTextOnly:clientSuccessTextOnly,innovation:innovation,innovationTextOnly:innovationTextOnly,responsibilityToOthers:responsibility,responsibilityToOthersTextOnly:responsibilityTextOnly,skills:skills,skillsTextOnly:skillsTextOnly,checkpointAssessmentDate:checkpointAssessmentDate,checkpointQuestionJobAvailability:checkpointQuestionJobAvailability,checkpointQuestionManagerCertification:checkpointQuestionManagerCertification};return data}})();(function(){w3n.adapters.tpb.YourTeam=function(response,options){var fullNameParse=response.TNAMFULL;var lastName=fullNameParse.substring(0,fullNameParse.indexOf(","));var firstName=fullNameParse.substring(fullNameParse.indexOf(",")+2,fullNameParse.length);var globalteam_var,incountryteam_var;if(response.TLDRTYPE==="Global"||response.TLDRTYPE==="Both"){globalteam_var=true}else{globalteam_var=false}if(response.TLDRTYPE==="In-Country"||response.TLDRTYPE==="InCountry"||response.TLDRTYPE==="Both"){incountryteam_var=true}else{incountryteam_var=false}var sortby=function(field,reverse){var key=function(x){return x[field]};reverse=!reverse?1:-1;return function(a,b){return a=key(a),b=key(b),reverse*((a>b)-(b>a))}};var responseDate1="";var responseDate2="";var responseDate3="";var responseYear1=0;var responseYear2=0;var responseYear3=0;responseDate1=response.PBC_APPROVAL_DATE;responseDate2=response.DPBCADAT_2;responseDate3=response.DPBCADAT_3;if(response.PBC_APPROVAL_DATE){responseYear1=parseInt(response.PBC_APPROVAL_DATE.substring(0,4))}if(response.DPBCADAT_2){responseYear2=parseInt(response.DPBCADAT_2.substring(0,4))}if(response.DPBCADAT_3){responseYear3=parseInt(response.DPBCADAT_3.substring(0,4))}var currentTime=new Date;var currYear=currentTime.getFullYear();var responsePbcText1="";if(response.FPBC!==""){responsePbcText1='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}else{responsePbcText1=response.PBC}var responsePbcText2="";if(response.FPBCP!==""){responsePbcText2='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}else{responsePbcText2=response.PREVIOUS_PBC}var responsePbcText3="";if(response.FPBCNP!==""){responsePbcText3='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}else{responsePbcText3=response.NEXT_PREVIOUS_PBC}var pbcs=[{approvalDate:responseDate1,approvalYear:responseYear1,pbcText:responsePbcText1},{approvalDate:responseDate2,approvalYear:responseYear2,pbcText:responsePbcText2},{approvalDate:responseDate3,approvalYear:responseYear3,pbcText:responsePbcText3}];var pbcsSorted=pbcs.sort(sortby("approvalDate",true));var pbcByRecent=[{approvalDate:"",pbcText:""},{approvalDate:"",pbcText:""},{approvalDate:"",pbcText:""}];var prevYear=0;for(var i=0;i<pbcsSorted.length;i++){var currApprovalYear=pbcsSorted[i].approvalYear;if(currApprovalYear===prevYear){}else if(currApprovalYear===2013){pbcByRecent[2]=pbcsSorted[i]}else if(currApprovalYear===2014){pbcByRecent[1]=pbcsSorted[i]}else if(currApprovalYear===2015){pbcByRecent[0]=pbcsSorted[i]}prevYear=currApprovalYear}if(pbcByRecent[0].pbcText===""){pbcByRecent[0].pbcText="No Data"}if(pbcByRecent[1].pbcText===""){pbcByRecent[1].pbcText="No Data"}if(pbcByRecent[2].pbcText===""){pbcByRecent[2].pbcText="No Data"}if(response.FEMPL2!==""){response.TNAMFULL='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FPOSITION!==""){response.TPOSITION='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FSTATUS!==""){response.CACTIVE='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FEMPTYPE!==""){response.TEMPLTYP='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FBAND!==""){response.SALBIAW='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FTINBND!==""){response.TIMEINBND='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FDEPT!==""){response.RDEPT='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FWPI!==""){response.CWPI='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}var pmrPercentAux;if(response.FPMR!==""){response.PMR='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';pmrPercentAux=response.PMR}else{pmrPercentAux=response.PMR+"%"}var appAnnualSalaryCurrencyAux;if(response.FSALANU!==""){response.ASALANU='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';appAnnualSalaryCurrencyAux=""}else{appAnnualSalaryCurrencyAux=response.ASALANU+" "+response.CSALCURR;appAnnualSalaryCurrencyAux=appAnnualSalaryCurrencyAux.substring(appAnnualSalaryCurrencyAux.length-3,appAnnualSalaryCurrencyAux.length)}var lastSalaryChangeAmountCurrencyAux;if(response.FSALCHGA!==""){response.ASALCHGA='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';lastSalaryChangeAmountCurrencyAux=""}else{lastSalaryChangeAmountCurrencyAux=response.ASALCHGA+" "+response.CSALCURR;lastSalaryChangeAmountCurrencyAux=lastSalaryChangeAmountCurrencyAux.substring(lastSalaryChangeAmountCurrencyAux.length-3,lastSalaryChangeAmountCurrencyAux.length)}if(response.FSALDTE!==""){response.DSALCHG='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FBONUSS!==""){response.ABONUS='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FAWD3YR!==""){response.TAWD3YR='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FEQPOTES!==""){response.CEQTYPOT='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FFBTLRES!==""){response.FBTLRES='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FSERVDUR!==""){response.SERVICEDUR='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FEXCSTAT!==""){response.EXECUTIVE_STATUS='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FDBIRTHMD!==""){response.DBIRTH_MMDD='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}else{response.DBIRTH_MMDD="XXXX-"+response.DBIRTH_MMDD.replace("/","-")}if(response.FSALCURR!==""){response.CSALCURR=""}var btlTalent2016B10Value=response.EXECUTIVE_STATUS;var btlTalent2014B9Value="";var talentValue=response.FBTLRES;if(talentValue===null)talentValue="";if(talentValue!==""){var talentUpper=talentValue.toUpperCase();if(talentUpper==="N"){btlTalent2014B9Value="No"}else if(talentUpper=="Y"){btlTalent2014B9Value="Yes"}else{btlTalent2014B9Value=talentValue}}var sRefDate=response.DSERRFIW;if(response.DSERRFIW!==null){sRefDate=response.DSERRFIW.substring(0,4)+"-"+response.DSERRFIW.substring(4,6)+"-"+response.DSERRFIW.substring(6)}if(response.FDSERRFIW!==""){sRefDate='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';
}var mDateOfHire=response.DHIREEMP;if(response.FHIREEMP!==""){mDateOfHire='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}return{id:response.CNUM,uid:response.CNUM,fullname:response.TNAMFULL,position:response.TPOSITION,status:response.CACTIVE,employeeType:response.TEMPLTYP,band:response.SALBIAW,timeInBand:response.TIMEINBND,country:response.CCOUNTRY,dept:response.RDEPT,globalteam:globalteam_var,incountryteam:incountryteam_var,isManager:response.FCMGRIW==="X"?false:response.CMGRIW==="Y"?true:false,pbcYear1:pbcByRecent[0].pbcText,pbcYear2:pbcByRecent[1].pbcText,pbcYear3:pbcByRecent[2].pbcText,initials:firstName.trim()[0].toUpperCase()+lastName.trim()[0].toUpperCase(),appAnnualSalary:response.ASALANU,appAnnualSalaryCurrency:appAnnualSalaryCurrencyAux,lastSalaryChangeAmount:response.ASALCHGA,lastSalaryChangeAmountCurrency:lastSalaryChangeAmountCurrencyAux,lastSalaryChangeDate:response.DSALCHG,pmr:response.PMR,pmrPercent:pmrPercentAux,bonusPay:response.ABONUS,awards:response.TAWD3YR,holdingPower:response.CEQTYPOT,btlTalent2014B9:btlTalent2014B9Value,btlTalent2016B10:btlTalent2016B10Value,serviceLength:response.SERVICEDUR,currency:response.CSALCURR,dateOfHire:mDateOfHire,serviceReference:sRefDate,dateOfBirth:response.DBIRTH_MMDD,wpi:response.CWPI}}})();(function(){w3n.cogs.whatsnew.adapters.json=function(data){var entries=data.entries;var dataEntries=[];if(entries&&entries.length>0){_.forEach(entries,function(value){var entryObj=new w3n.cogs.whatsnew.adapters.WhatsnewObj;entryObj.title=value.title||"";entryObj.date=value.date?w3n.cogs.whatsnew.views.common.dateConversion(value.date):"";entryObj.abstract=value.abstract||"";entryObj.trunc_abstract=value.abstract?value.abstract:"";entryObj.copy=value.copy||"";entryObj.trunc_copy=value.copy?value.copy:"";entryObj.url=value.url||"";entryObj.button_title=value.button_title||"Learn more";entryObj.icon=value.icon||"";entryObj.tags=value.tags||"";entryObj.img=value.img||"";entryObj.img_large=value.img_large||"";entryObj.img.alt=value.img&&value.img.alt?value.img.alt:"What's new medium item "+value.title;entryObj.img.src=value.img&&value.img.src?value.img.src.replace("http://","https://"):"";entryObj.img_large.alt=value.img_large&&value.img_large.alt?value.img_large.alt:"What's new large item "+value.title;entryObj.img_large.src=value.img_large&&value.img_large.src?value.img_large.src.replace("http://","https://"):"";entryObj.icon.alt=value.icon&&value.icon.alt?value.icon.alt:"What's new large item "+entryObj.title;entryObj.icon.src=value.icon&&value.icon.src?value.icon.src.replace("http://","https://"):"";var preview_mode=awf.util.url_params.preview_whatsnew=="true";var live_env=w3n.env.is_live;if(value.date&&(!preview_mode&&!live_env)){var today=moment();var entryDate=moment(entryObj.date);if(entryDate>today)return}dataEntries.push(entryObj)});data.entries=dataEntries}return data}})();(function(){var calendarUtils=w3n.utils.calendarComponent;var taskCategoriesAdapter=app.base.models.BaseModel.extend({categorySort:[],visibleItems:[],currentOnly:true,initialize:function(attrs,options){options=options||{};app.base.models.BaseModel.prototype.initialize.apply(this,arguments);this.calendarStartDate=options.calendarStartDate;this.calendarEndDate=options.calendarEndDate;this.currentOnly=options.currentOnly;this.unit=options.unit;this.sourceCollection=options.model;console.log("Task Calendar collection: "+this.sourceCollection);this.listenTo(this.sourceCollection,"all",function(eventName){if(eventName==="update"){this.groupItems()}this.trigger.apply(this,arguments)})},groupItems:function(models){models=models||this.sourceCollection.toJSON();var groupedItems=[];var calendarRange=calendarUtils.createRange(this.calendarStartDate,this.calendarEndDate);var data=this.currentOnly?_.filter(models,function(item){var itemDuration=calendarUtils.createRange(item.MGR_START,item.MGR_END);return calendarUtils.datesHaveOverlap(calendarRange,itemDuration)}):models?models:[];if(data&&data.length>0){var visibleItems=this.setVisibleItems(models);var groups=_.groupBy(data,"CATEGORY");groupedItems=[];_.forEach(groups,function(group,name){this.setItemRow(group);if(this.categorySort.length>0){index=_.indexOf(this.categorySort,name)}else{index=_.findIndex(visibleItems,{CATEGORY:name})}var tasksOrder=_.sortBy(group,"dueDate");if(group[0].CATEGORY_NAME){var category={url:group[0].URL,category:name,categoryName:group[0].CATEGORY_NAME,tasks:tasksOrder,sort:index>=0?index:9999,maxRows:_.max(group,"ROW").ROW,iconName:group[0].icon};_.forEach(category.tasks,function(task){this.getTaskWidth(task)}.bind(this));if(category.categoryName!=="Unused"){groupedItems.push(category)}}}.bind(this));groupedItems=_.sortBy(groupedItems,"tasks").reverse();if(!this.runOnce){this.categorySort=_.map(groupedItems,"category");this.runOnce=true}}this.set({groupedItems:groupedItems})},getTaskWidth:function(task){var unitWidth=this.unit==="percent"?calendarUtils.unitWidthPercent:calendarUtils.unitWidthPixel;var uom=this.unit==="percent"?"%":"px";var offsetInPixels=this.unit==="percent"?0:0;var firstDay=moment(this.calendarStartDate>task.MGR_START?this.calendarStartDate:task.MGR_START);var lastDay=moment(this.calendarEndDate<task.MGR_END?this.calendarEndDate:task.MGR_END);lastDay=this.currentOnly||firstDay.isSame(lastDay)?lastDay.add(1,"days"):lastDay;task.streamWidth=calendarUtils.getWidth(firstDay.toDate(),lastDay.toDate(),uom,offsetInPixels);task.spacerWidth=calendarUtils.getWidth(this.calendarStartDate,firstDay.toDate(),uom)},setItemRow:function(category){var row=2;_.each(category,function(task){var overlaps=this.getOverlaps(task,category,row);if(overlaps.length>0)row++}.bind(this))},getOverlaps:function(task,category,row){var iterator;var overlaps=[];var r1=calendarUtils.createRange(task.MGR_START,task.MGR_END);var hasOverlap=false;_.each(category,function(iterator){if(task.SUBTASK_ID!==iterator.SUBTASK_ID&&!iterator.ROW_SET){var r2=calendarUtils.createRange(iterator.MGR_START,iterator.MGR_END);if(calendarUtils.datesHaveOverlap(r1,r2)&&task.ROW===iterator.ROW){iterator.ROW=row;overlaps.push(iterator)}}});task.ROW_SET=true;return overlaps},setVisibleItems:function(models){var range1=calendarUtils.createRange(this.calendarStartDate,this.calendarEndDate);var visibleItems=[];_.forEach(models,function(item){var range2=calendarUtils.createRange(item.MGR_START,item.MGR_END);if(calendarUtils.datesHaveOverlap(range1,range2)){item.visibility="visible";visibleItems.push(_.cloneDeep(item))}else{item.visibility="hidden"}}.bind(this));visibleItems=_.sortBy(visibleItems,"MGR_END");return visibleItems}});var adapters={TaskCategories:taskCategoriesAdapter};w3n.cogs.taskCalendarResponsive.adapters=adapters})();(function(){var ibm=function(response){console.log("the adapters response: ",response);data={title:response.name,start:response.date,end:response.date};return data};var adapters={ibm:ibm};w3n.cogs.timeInOut.adapters=adapters})();(function(){w3n.serviceModels.DashboardAlerts={};var model=w3n.serviceModels.DashboardAlerts.Model=w3n.serviceModels.sso.Model.extend({hoardCache:true,idAttribute:"CNUM",name:"TPB alerts",initialize:function(){w3n.serviceModels.sso.Model.prototype.initialize.apply(this,arguments)}});w3n.serviceModels.DashboardAlerts.Collection=w3n.serviceModels.sso.Collection.extend({model:model,hoardCache:true,supportedServiceKey:"tp",name:"TPB alerts",initialize:function(options){w3n.serviceModels.sso.Collection.prototype.initialize.apply(this,arguments);var origFetch=this.fetch;this.fetch=function(opts){return origFetch.call(this,_.extend({},opts,{timeout:3e4,service_index:"tp",cache:false}))}.bind(this);options=options||{};this.mgrId=options.mgrId},url:function(){var testalert=app.utils.urlParam("testalert");var readunread=app.utils.urlParam("readunread");var testNewAlert=app.utils.urlParam("testnewalert");var testMasks=app.utils.urlParam("testMasks");if(testalert){return"data/json/tp-alerts-local.json"}else if(readunread||testNewAlert){return"data/json/read-unread-alerts.json"}else if(testMasks){return"data/json/all-masked-alerts.json"}else{var uplineFlagOff=!awf.flags.isActive("cogs.talentplaybook.dashboard.upline-tp-services");if(this.mgrId===undefined||this.mgrId===null||this.mgrId===awf.user.info.cnum||uplineFlagOff){if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services-new-version")){return w3n.connections.proxy+"/TalentPlayBookService/rest/tpservicedata/v1"}else{return w3n.connections.proxy+"/TalentPlayBookService/rest/tpservicedata"}}else{return w3n.connections.proxy+"/TalentPlayBookService/rest/tpservicedata/"+this.mgrId+"/v2"}}},parse:function(data){w3n.alertsCnumArray=[];var noticeType=function(notice,type){notice.noticeType=type};_.forEach(data,function(obj,j){_.forEach(data[j].supplemental,function(value,key){if(_.endsWith(key.toLowerCase(),"mask")){if(value==="X"||value==="x"){var fieldName=key.replace(/mask/gi,"");data[j].supplemental[fieldName]=' <a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}}});w3n.alertsCnumArray[j]=data[j].supplemental.cnum;if(data[j].supplemental.pa===""){data[j].supplemental.pa=0}if(data[j].supplemental.think40Mask!==""){data[j].supplemental.think40_individual="";data[j].supplemental.think40remain='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}else{data[j].supplemental.think40remain=40;if(data[j].supplemental.think40===""){data[j].supplemental.think40=""}data[j].supplemental.think40remain-=parseInt(data[j].supplemental.think40);if(parseInt(data[j].supplemental.think40)>=40){data[j].supplemental.think40+=w3n.checkmark;data[j].supplemental.think40_individual=w3n.checkmark+" Done";data[j].supplemental.think40remain=""}else{data[j].supplemental.think40_individual=data[j].supplemental.think40+" Hours Completed";data[j].supplemental.think40remain+=" Hours Needed"}}if(data[j].supplemental.lkmask!==""){data[j].supplemental.lk_individual='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}else{if(data[j].supplemental.lk.toUpperCase()==="YES"){data[j].supplemental.lk_individual=w3n.checkmark+" Done"}else{data[j].supplemental.lk_individual="No"}}$.each(data[j].supplemental,function(index,value){if(value==="X"||value==="x"){var fieldName=index.replace(/mask/gi,"");data[j].supplemental[fieldName]='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}});var mppStars,piiStars;if(data[j].supplemental.mppLevelMask!==""){data[j].supplemental.mppLevelStars='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}else{data[j].supplemental.mppLevelStars="";for(mppStars=0;mppStars<data[j].supplemental.mppLevel;mppStars++){data[j].supplemental.mppLevelStars+='<div class="icon icon-awf-star-fill"></div>'}for(var mppStarsBlank=data[j].supplemental.mppLevel;mppStarsBlank<5;mppStarsBlank++){data[j].supplemental.mppLevelStars+='<div class="icon icon-awf-star"></div>'}}if(data[j].supplemental.piiLevelMask!==""){data[j].supplemental.piiLevelStars='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}else{data[j].supplemental.piiLevelStars="";for(piiStars=0;piiStars<data[j].supplemental.piiLevel;piiStars++){data[j].supplemental.piiLevelStars+='<div class="icon icon-awf-star-fill"></div>'}for(var piiStarsBlank=data[j].supplemental.piiLevel;piiStarsBlank<5;piiStarsBlank++){data[j].supplemental.piiLevelStars+='<div class="icon icon-awf-star"></div>'}}var starsText=["","Entry","Foundation","Experienced","Expert","Thought Leader"];if(data[j].supplemental.mppLevelMask===""){data[j].supplemental.mppStarsText=starsText[mppStars]}if(data[j].supplemental.piiLevelMask===""){data[j].supplemental.piiStarsText=starsText[piiStars]}data[j].allNotices=[];var read=data[j].readNotices||[];var unread=data[j].unreadNotices||[];var neverRead=data[j].neverReadNotices||[];if(neverRead){for(var m=0;m<neverRead.length;m++){noticeType(neverRead[m],"neverRead");data[j].allNotices.push(neverRead[m])}}if(unread){for(var l=0;l<unread.length;l++){noticeType(unread[l],"unread");data[j].allNotices.push(unread[l])}}if(read){for(var k=0;k<read.length;k++){noticeType(read[k],"read");data[j].allNotices.push(read[k])}}data[j].alertCount=unread.length+neverRead.length;data[j].off=data[j].alertCount===0?"off":"";var allNotes=data[j].allNotices;for(var n=0;n<allNotes.length;n++){var suppUsed=allNotes[n].supplementalUsed;allNotes[n].suppUsedContent=[];for(var o=0;o<suppUsed.length;o++){if(w3n.utils.data.talentplaybook.supplementalFieldNames[suppUsed[o]]!==undefined){var suppContentSingle=w3n.utils.data.talentplaybook.supplementalFieldNames[suppUsed[o]]+": "+data[j].supplemental[suppUsed[o]];allNotes[n].suppUsedContent.push(suppContentSingle)}}}});return data}})})();(function(){w3n.serviceModels.BCGDashboard={};var model=w3n.serviceModels.BCGDashboard.Model=w3n.serviceModels.sso.Model.extend({idAttribute:"RCNUM",supportedServiceKey:"wsf"});w3n.serviceModels.BCGDashboard.Collection=w3n.serviceModels.sso.Collection.extend({model:model,supportedServiceKey:"wsf",initialize:function(options){w3n.serviceModels.sso.Collection.prototype.initialize.apply(this,arguments);options=options||{};this.mgrId=options.mgrId},url:function(){var testbcg=app.utils.urlParam("testdashboard");var testMasks=app.utils.urlParam("testMasks");if(testbcg){return"data/json/bcg.json"}else if(testMasks){return"data/json/bcg-mask.json"}else{if(this.mgrId===undefined||this.mgrId===null||this.mgrId===awf.user.info.cnum){return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpflbcg/1"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpflbc/"+this.mgrId}}},parse:function(data){var parsedData=JSON.parse(data.wsf_response.CRESDATA);console.log("BCG DATA: ",parsedData);return parsedData.results},comparator:function(item){return[item.get("NAME")]}})})();(function(){w3n.serviceModels.EmergencyDashboard={};var model=w3n.serviceModels.EmergencyDashboard.Model=w3n.serviceModels.sso.Model.extend({idAttribute:"CNUM",supportedServiceKey:"wsf"});w3n.serviceModels.EmergencyDashboard.Collection=w3n.serviceModels.sso.Collection.extend({model:model,supportedServiceKey:"wsf",initialize:function(options){w3n.serviceModels.sso.Collection.prototype.initialize.apply(this,arguments);options=options||{};this.mgrId=options.mgrId},url:function(){var testemergency=app.utils.urlParam("testdashboard");var testMasks=app.utils.urlParam("testMasks");if(testemergency){return"data/json/dashboard-emergency.json"}else if(testMasks){return"data/json/dashboard-emergency-masks.json"}else{if(this.mgrId===undefined||this.mgrId===null||this.mgrId===awf.user.info.cnum){return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpflemer/1"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpulemer/"+this.mgrId}}},parse:function(data){var parsedData=JSON.parse(data.wsf_response.CRESDATA);console.log("EMERGENCY DATA: ",parsedData);return parsedData.results},comparator:function(item){return[item.get("NAME")]}})})();(function(){w3n.serviceModels.ExpensesDashboard=w3n.serviceModels.ExpensesDashboard||{};w3n.serviceModels.ExpensesDashboard.cb=w3n.serviceModels.sso.Collection.extend({hoardCache:true,supportedServiceKey:w3n.connections.proxy.indexOf("test")!==-1?"wsf_uat":"wsf",initialize:function(options){w3n.serviceModels.sso.Collection.prototype.initialize.apply(this,arguments);options=options||{};var origFetch=this.fetch;this.fetch=function(opts){return origFetch.call(this,_.extend({},opts,{timeout:3e4}))}.bind(this);if(/^\d{6}$/.test(options.date)){this.date=options.date.toString()}else{console.error("CB Service Model must be instantiated with a date in the correct format (YYYYMM)")}},url:function(){var testexpense=app.utils.urlParam("testdashboard");if(testexpense){return"data/json/cb.json"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/mhxpense/uwpflcmd/"+this.date}},parse:function(data){data=data||{};var dataArr=[];var grandTotal=0;var month=w3n.utils.date.getMonth(this.date.slice(-2));var year=this.date.substring(0,4);var result=JSON.parse(data.wsf_response.CRESDATA).results;var grouped=_.groupBy(result,function(item){return item.SUPPLIER});_.forIn(grouped,function(value,key){var dataObj={};var total=0;for(var i=0;i<value.length;i++){var itemTotal=parseFloat(value[i].AMOUNTPAID);total+=itemTotal}dataObj.supplier=key;dataObj.models=value;dataObj.total=total.toFixed(2);dataObj.curr=dataObj.models[0].CCURRISO;dataArr.push(dataObj);grandTotal+=total});var sorted=_.sortBy(dataArr,"supplier");var returnObj={data:sorted,total:grandTotal.toFixed(2),curr:sorted[0].curr,month:month,year:year};return{data:returnObj,reportData:result}}})})();(function(){w3n.serviceModels.ExpensesDashboard=w3n.serviceModels.ExpensesDashboard||{};w3n.serviceModels.ExpensesDashboard.ldv=w3n.serviceModels.sso.Collection.extend({hoardCache:true,supportedServiceKey:w3n.connections.proxy.indexOf("test")!==-1?"wsf_uat":"wsf",initialize:function(options){w3n.serviceModels.sso.Collection.prototype.initialize.apply(this,arguments);options=options||{};var origFetch=this.fetch;this.fetch=function(opts){return origFetch.call(this,_.extend({},opts,{timeout:3e4}))}.bind(this);console.log("THIS",this);if(/^\d{6}$/.test(options.date)){this.date=options.date.toString()}else{console.error("LDV Service Model must be instantiated with a date in the correct format (YYYYMM)")}},url:function(){var testexpense=app.utils.urlParam("testdashboard");if(testexpense){return"data/json/ldv.json"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/mhxpense/uwpflldv/"+this.date}},parse:function(data){data=data||{};var dataArr=[];var grandTotal=0;var month=w3n.utils.date.getMonth(this.date.slice(-2));var year=this.date.substring(0,4);var result=JSON.parse(data.wsf_response.CRESDATA).results;var grouped=_.groupBy(result,function(item){return item.SOURCE});_.forIn(grouped,function(value,key){var dataObj={};var total=0;for(var i=0;i<value.length;i++){var itemTotal=parseFloat(value[i].AMOUNTPAID)*parseFloat(value[i].QUANTITY);total+=itemTotal}dataObj.source=key;dataObj.models=value;dataObj.total=total.toFixed(2);dataObj.curr=dataObj.models[0].CCURRISO;dataArr.push(dataObj);grandTotal+=total});var sorted=_.sortBy(dataArr,"source");var returnObj={data:sorted,total:grandTotal.toFixed(2),curr:sorted[0].curr,month:month,year:year};return{data:returnObj,reportData:result}}})})();(function(){var is_oidc=false;w3n.serviceModels.ExpensesDashboard=w3n.serviceModels.ExpensesDashboard||{};w3n.serviceModels.ExpensesDashboard.OptionalList=app.base.collections.BaseCollection.extend({hoardCache:true,initialize:function(options){is_oidc=!!_.get(awf,"user.services.oauth");app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);options=options||{};this.period=options.period;var origFetch=this.fetch;this.fetch=function(opts){var self=this;opts=opts||{};opts.timeout=3e4;if(is_oidc){var dfr=$.Deferred();awf.user.services.oauth.maybeFetchRefreshToken().done(function(){opts.headers=opts.headers||{};_.extend(opts.headers,{Authorization:"Bearer "+awf.user.services.oauth.getAccessToken()});origFetch.call(self,opts).done(dfr.resolve).fail(dfr.reject)});return dfr.promise()}else{return origFetch.call(self,opts)}}.bind(this)},url:function(){var testexpense=app.utils.urlParam("testdashboard");if(testexpense){return"data/json/dashboard-expenses-optional-list.json"}else{return is_oidc?"https://w3-services1.w3-969.ibm.com/youribm/expensesaggregator/v1/list/oidc/optional/"+this.period:w3n.connections.proxy+"/youribm/expensesaggregator/v1/list/optional/"+this.period}},parse:function(data){data=data||{};return data.results}})})();(function(){var is_oidc=false;w3n.serviceModels.ExpensesDashboard=w3n.serviceModels.ExpensesDashboard||{};w3n.serviceModels.ExpensesDashboard.OptionalSummary=app.base.collections.BaseCollection.extend({hoardCache:true,initialize:function(options){is_oidc=!!_.get(awf,"user.services.oauth");app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);options=options||{};this.period=options.period;var origFetch=this.fetch;this.fetch=function(opts){var self=this;opts=opts||{};opts.timeout=3e4;if(is_oidc){var dfr=$.Deferred();awf.user.services.oauth.maybeFetchRefreshToken().done(function(){opts.headers=opts.headers||{};_.extend(opts.headers,{Authorization:"Bearer "+awf.user.services.oauth.getAccessToken()});origFetch.call(self,opts).done(dfr.resolve).fail(dfr.reject)});return dfr.promise()}else{return origFetch.call(self,opts)}}.bind(this)},url:function(){var testexpense=app.utils.urlParam("testdashboard");if(testexpense){return"data/json/dashboard-expenses-optional-summary.json"}else{return is_oidc?"https://w3-services1.w3-969.ibm.com/youribm/expensesaggregator/v1/summary/oidc/optional/"+this.period:w3n.connections.proxy+"/youribm/expensesaggregator/v1/summary/optional/"+this.period}},parse:function(data){data=data||{};return data.results}})})();(function(){var is_oidc=false;w3n.serviceModels.ExpensesDashboard=w3n.serviceModels.ExpensesDashboard||{};w3n.serviceModels.ExpensesDashboard.RequiredList=app.base.collections.BaseCollection.extend({hoardCache:true,initialize:function(options){is_oidc=!!_.get(awf,"user.services.oauth");app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);options=options||{};this.period=options.period;var origFetch=this.fetch;this.fetch=function(opts){var self=this;opts=opts||{};opts.timeout=3e4;if(is_oidc){var dfr=$.Deferred();awf.user.services.oauth.maybeFetchRefreshToken().done(function(){opts.headers=opts.headers||{};_.extend(opts.headers,{Authorization:"Bearer "+awf.user.services.oauth.getAccessToken()});origFetch.call(self,opts).done(dfr.resolve).fail(dfr.reject)});return dfr.promise()}else{return origFetch.call(self,opts)}}.bind(this)},url:function(){var testexpense=app.utils.urlParam("testdashboard");if(testexpense){return"data/json/dashboard-expenses-required-list.json"}else{return is_oidc?"https://w3-services1.w3-969.ibm.com/youribm/expensesaggregator/v1/list/oidc/required/"+this.period:w3n.connections.proxy+"/youribm/expensesaggregator/v1/list/required/"+this.period}},parse:function(data){data=data||{};return data.results}})})();(function(){var is_oidc=false;w3n.serviceModels.ExpensesDashboard=w3n.serviceModels.ExpensesDashboard||{};w3n.serviceModels.ExpensesDashboard.RequiredSummary=app.base.collections.BaseCollection.extend({hoardCache:true,initialize:function(options){is_oidc=!!_.get(awf,"user.services.oauth");app.base.collections.BaseCollection.prototype.initialize.apply(this,arguments);options=options||{};this.period=options.period;var origFetch=this.fetch;this.fetch=function(opts){var self=this;opts=opts||{};opts.timeout=3e4;if(is_oidc){var dfr=$.Deferred();awf.user.services.oauth.maybeFetchRefreshToken().done(function(){opts.headers=opts.headers||{};_.extend(opts.headers,{Authorization:"Bearer "+awf.user.services.oauth.getAccessToken()});origFetch.call(self,opts).done(dfr.resolve).fail(dfr.reject)});return dfr.promise()}else{return origFetch.call(self,opts)}}.bind(this)},url:function(){var testexpense=app.utils.urlParam("testdashboard");if(testexpense){return"data/json/dashboard-expenses-required-summary.json"}else{return is_oidc?"https://w3-services1.w3-969.ibm.com/youribm/expensesaggregator/v1/summary/oidc/required/"+this.period:w3n.connections.proxy+"/youribm/expensesaggregator/v1/summary/required/"+this.period}},parse:function(data){data=data||{};return data.results}})})();(function(){w3n.serviceModels.ExpensesDashboard=w3n.serviceModels.ExpensesDashboard||{};w3n.serviceModels.ExpensesDashboard.wwerExceptions=w3n.serviceModels.sso.Collection.extend({hoardCache:true,supportedServiceKey:w3n.connections.proxy.indexOf("test")!==-1?"wsf_uat":"wsf",initialize:function(options){w3n.serviceModels.sso.Collection.prototype.initialize.apply(this,arguments);options=options||{};var origFetch=this.fetch;this.fetch=function(opts){return origFetch.call(this,_.extend({},opts,{timeout:3e4}))}.bind(this);if(!options.reportId)console.error("WWER Exceptions Service Model must be instantiated with a reportId");this.reportId=options.reportId},url:function(){var testexpense=app.utils.urlParam("testdashboard");if(testexpense){return"data/json/WWERTea_exception.json"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/mhxpense/uwpflwre/"+this.reportId}},parse:function(data){data=data||{};var result=JSON.parse(data.wsf_response.CRESDATA).results;return result}})})();(function(){w3n.serviceModels.ExpensesDashboard=w3n.serviceModels.ExpensesDashboard||{};w3n.serviceModels.ExpensesDashboard.wwerExpenses=w3n.serviceModels.sso.Collection.extend({hoardCache:true,supportedServiceKey:w3n.connections.proxy.indexOf("test")!==-1?"wsf_uat":"wsf",initialize:function(options){w3n.serviceModels.sso.Collection.prototype.initialize.apply(this,arguments);options=options||{};var origFetch=this.fetch;this.fetch=function(opts){return origFetch.call(this,_.extend({},opts,{timeout:3e4}))}.bind(this);if(!options.reportId)console.error("WWER Expenses Service Model must be instantiated with a reportId");this.reportId=options.reportId},url:function(){var testexpense=app.utils.urlParam("testdashboard");if(testexpense){return"data/json/WWERTea_expense.json"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/mhxpense/uwpflwrd/"+this.reportId}},parse:function(data){data=data||{};var grandTotal=0;var result=JSON.parse(data.wsf_response.CRESDATA).results;for(var i=0;i<result.length;i++){result[i].ATTENDEES=parseInt(result[i].ATTENDEES);var itemTotal=parseFloat(result[i].HOME_AMT);grandTotal+=itemTotal}return{data:result,total:grandTotal.toFixed(2),curr:result[0].HOME_CURRENCY_ISOCHAR}}})})();(function(){w3n.serviceModels.isReadTPB=w3n.serviceModels.sso.Model.extend({supportedServiceKey:"tp",initialize:function(options){this.isRead=options.isRead;this.empCnum=options.empCnum;this.noticeId=options.noticeId;w3n.serviceModels.sso.Model.prototype.initialize.apply(this,arguments)},url:function(){return w3n.connections.proxy+"/TalentPlayBookService/rest/markAsRead/?isRead="+this.isRead+"&empCnum="+this.empCnum+"&noticeId="+this.noticeId}})})();(function(){w3n.cogs.talentplaybook.DashboardListModel=app.base.models.CompositeModel.extend({initSubmodels:function(attributes){this.addModel("avatar",new app.serviceModels.Avatar({id:attributes.CNUM}),null,false)}})})();(function(){w3n.serviceModels.ManagerDashboard={};var model=w3n.serviceModels.ManagerDashboard.Model=w3n.serviceModels.sso.Model.extend({supportedServiceKey:"wsf",hoardCache:true,name:"Manage Team Topics card",idAttribute:"CNUM"});w3n.serviceModels.ManagerDashboard.Collection=w3n.serviceModels.sso.Collection.extend({model:model,supportedServiceKey:"wsf",name:"Manage Team Topics card",initialize:function(options){w3n.serviceModels.sso.Collection.prototype.initialize.apply(this,arguments);options=options||{};this.mgrId=options.mgrId},url:function(){var testdashboard=app.utils.urlParam("testdashboard");var readunread=app.utils.urlParam("readunread");var shortdashboard=app.utils.urlParam("shortdashboard");var largedashboard=app.utils.urlParam("largedashboard");var testMasks=app.utils.urlParam("testMasks");if(testdashboard||readunread){return"data/json/dashboard.json"}else if(shortdashboard){return"data/json/dashboard-short.json"}else if(largedashboard){return"data/json/dashboard-large.json"}else if(testMasks){return"data/json/dashboard-mask-test.json"}else{var time=new Date;if(this.mgrId===undefined||this.mgrId===null||this.mgrId===awf.user.info.cnum){return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpflwd/1?_="+time.getTime()}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpulwd/"+this.mgrId+"?_="+time.getTime()}}},fetch:function(options){options=options||{};this.id=options.id;return w3n.serviceModels.sso.Collection.prototype.fetch.apply(this,arguments)},parse:function(data){var options={fields:["TNAMFULL"],chars:["\\\\0"]};data.wsf_response.CRESDATA=w3n.utils.filterBy(data.wsf_response.CRESDATA,options);var parsedData=JSON.parse(data.wsf_response.CRESDATA);w3n.cnumArray=[];for(var j=0;j<parsedData.results.length;j++){w3n.cnumArray[j]=parsedData.results[j].CNUM}return parsedData.results},comparator:function(item){return[item.get("TNAMFULL")]}})})();(function(){w3n.serviceModels.PerformanceDashboard={};var model=w3n.serviceModels.PerformanceDashboard.Model=w3n.serviceModels.sso.Model.extend({idAttribute:"CNUM",supportedServiceKey:"wsf"});w3n.serviceModels.PerformanceDashboard.Collection=w3n.serviceModels.sso.Collection.extend({model:model,supportedServiceKey:"wsf",initialize:function(options){w3n.serviceModels.sso.Collection.prototype.initialize.apply(this,arguments);options=options||{};this.mgrId=options.mgrId},url:function(){var testperformance=app.utils.urlParam("testdashboard");var testMasks=app.utils.urlParam("testMasks");if(testperformance){return"data/json/dashboard-performance.json"}else if(testMasks){return"data/json/dashboard-performance-masks.json"}else{if(awf.flags.isActive("cogs.talentplaybook.dashboard.checkpoint-columns")){if(this.mgrId===undefined||this.mgrId===null||this.mgrId===awf.user.info.cnum){return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpflckpt/1"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpulckpt/"+this.mgrId}}else{if(this.mgrId===undefined||this.mgrId===null||this.mgrId===awf.user.info.cnum){return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpflwd/1"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpulwd/"+this.mgrId}}}},parse:function(data){var options={fields:["TNAMFULL"],chars:["\\\\0"]};data.wsf_response.CRESDATA=w3n.utils.filterBy(data.wsf_response.CRESDATA,options);var parsedData=JSON.parse(data.wsf_response.CRESDATA);console.log("PERFORMANCE DATA: ",parsedData);return parsedData.results},comparator:function(item){return[item.get("NAME")]}})})();(function(){w3n.serviceModels.relatedButtons={};var model=w3n.serviceModels.relatedButtons.Model=app.base.models.BaseModel.extend({});w3n.serviceModels.relatedButtons.Collection=app.base.collections.BaseCollection.extend({model:model,url:function(){var test_relatedlinks=app.utils.urlParam("test_relatedlinks");var email=awf.user.info.email;if(email===null){email="anonymous@us.ibm.com"}if(test_relatedlinks){return"data/json/related-buttons.json"}else{return w3n.connections.proxy+"/w3restsvc/usercontent/93bf543674e83d44bde840b175755c9b/json/email/"+email+"/applicationid/25/section/39,13,5,15,41,45,19,7,48,9,21,25,54,43,51,1,3,11/maxcount/1000";
}},parse:function(data){var related_maps={39:"your_team_rb",13:"assets_devices_rb",5:"awards_recognition_rb",15:"benefits_health_safety_rb",41:"compensation_rb",45:"dates_rb",19:"diversity_community_rb",7:"emergency_rb",48:"expenses_rb",9:"expertise_learning_rb",21:"global_mobility_rb",25:"jobsonoffboarding_rb",54:"leadership_rb",43:"performance_rb",51:"security_passwords_rb",1:"time_inout_rb",3:"travel_rb",11:"values139_bcg_rb"};w3n.related_buttons_data={security_passwords_rb:[],awards_recognition_rb:[],values139_bcg_rb:[],leadership_rb:[],compensation_rb:[],performance_rb:[],expenses_rb:[],your_team_rb:[],expertise_learning_rb:[],benefits_health_safety_rb:[],assets_devices_rb:[],dates_rb:[],diversity_community_rb:[],emergency_rb:[],global_mobility_rb:[],jobsonoffboarding_rb:[],time_inout_rb:[],travel_rb:[]};$.each(data,function(index,value){var temp=[],section_name="";section_name=related_maps[value.appSection];if(section_name)w3n.related_buttons_data[section_name].push(value.contentByLang[0])});return w3n.related_buttons_data}})})();(function(){w3n.serviceModels.relatedLinks={};var model=w3n.serviceModels.relatedLinks.Model=app.base.models.BaseModel.extend({});w3n.serviceModels.relatedLinks.Collection=app.base.collections.BaseCollection.extend({model:model,url:function(){var test_relatedlinks=app.utils.urlParam("test_relatedlinks");var email=awf.user.info.email;if(email===null){email="anonymous@us.ibm.com"}if(test_relatedlinks){return"data/json/related-links.json"}else{return w3n.connections.proxy+"/w3restsvc/usercontent/93bf543674e83d44bde840b175755c9b/json/email/"+email+"/applicationid/25/section/40,14,6,16,42,46,20,8,49,10,22,26,55,44,52,2,4,12/maxcount/1000"}},parse:function(data){var related_maps={40:"your_team_rl",14:"assets_devices_rl",6:"awards_recognition_rl",16:"benefits_health_safety_rl",42:"compensation_rl",46:"dates_rl",20:"diversity_community_rl",8:"emergency_rl",49:"expenses_rl",10:"expertise_learning_rl",22:"global_mobility_rl",26:"jobsonoffboarding_rl",55:"leadership_rl",44:"performance_rl",52:"security_passwords_rl",2:"time_inout_rl",4:"travel_rl",12:"values139_bcg_rl"};w3n.related_links_data={security_passwords_rl:[],awards_recognition_rl:[],values139_bcg_rl:[],leadership_rl:[],compensation_rl:[],performance_rl:[],expenses_rl:[],your_team_rl:[],expertise_learning_rl:[],benefits_health_safety_rl:[],assets_devices_rl:[],dates_rl:[],diversity_community_rl:[],emergency_rl:[],global_mobility_rl:[],jobsonoffboarding_rl:[],time_inout_rl:[],travel_rl:[]};$.each(data,function(index,value){var temp=[],section_name="";section_name=related_maps[value.appSection];if(section_name)w3n.related_links_data[section_name].push(value.contentByLang[0])});return w3n.related_links_data}})})();(function(){w3n.serviceModels.TasksSummary={};var model=w3n.serviceModels.TasksSummary.Model=app.base.models.BaseModel.extend({});w3n.serviceModels.TasksSummary.Collection=w3n.serviceModels.sso.Collection.extend({model:model,supportedServiceKey:w3n.connections.proxy.indexOf("test")!==-1?"wsf_uat":"wsf",url:function(){var test_tasks=app.utils.urlParam("test_tasks");if(test_tasks){return"data/json/task-count.json"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/mgrhbtsk/endcattsk/1"}},parse:function(data){var parsedData=JSON.parse(data.wsf_response.CRESDATA);var results=parsedData.results;return results}})})();(function(){w3n.serviceModels.Tasks={};var model=w3n.serviceModels.Tasks.Model=app.base.models.BaseModel.extend({});w3n.serviceModels.Tasks.Collection=w3n.serviceModels.sso.Collection.extend({model:model,supportedServiceKey:w3n.connections.proxy.indexOf("test")!==-1?"wsf_uat":"wsf",url:function(){var test_tasks=app.utils.urlParam("test_tasks");if(test_tasks){return"data/json/tasks.json"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwptasks/1"}},parse:function(data){var options={fields:["TNAMFULL"],chars:["\\\\0"]};data.wsf_response.CRESDATA=w3n.utils.filterBy(data.wsf_response.CRESDATA,options);var parsedData=JSON.parse(data.wsf_response.CRESDATA);var results=parsedData.results;w3n.tasks_data={};_.forEach(w3n.taskMap,function(value){w3n.tasks_data[value]=[]});_.forEach(results,function(value){switch(value.TYPE){case w3n.taskTypes.alert:break;case w3n.taskTypes.notification:this.createTask(value);break;case w3n.taskTypes.task:this.createTask(value);break;default:break}}.bind(this));return w3n.tasks_data},createTask:function(value){var categoryName=w3n.taskMap[value.CATEGORY_ID];var html=awf.flags.isActive("cogs.talentplaybook.clean-tasks")?w3n.utils.data.scrubHTML(value.DESCRIPTION):parseHTML(value.DESCRIPTION);value.descriptionHTML=html;if(categoryName!="all"){var dashName=categoryName.split("-")[0];value.icon=w3n.tpConfig.dashboards[dashName].categoryIcon}value.read=value.STATE==="0"?false:true;w3n.tasks_data[categoryName].push(value)}});function parseHTML(data){var parsedData;var step1=data.split("<![CDATA[")[1].split("]]>")[0];if(step1.indexOf('<wm:mime_part charset="UTF-8">')>=0){var step2=step1.split('<wm:mime_part charset="UTF-8">')[1];var step3=step2.split("</wm:mime_part>")[0];parsedData=step3}else{parsedData=step1}return parsedData}})();(function(){w3n.serviceModels.TeamAtAGlance={};var model=w3n.serviceModels.TeamAtAGlance.Model=w3n.serviceModels.sso.Model.extend({});w3n.serviceModels.TeamAtAGlance.Collection=w3n.serviceModels.sso.Collection.extend({model:model,supportedServiceKey:"tp",initialize:function(models,options){this.cnum=options.cnum;w3n.serviceModels.sso.Collection.prototype.initialize.apply(this,arguments)},url:function(){var test_tasks=app.utils.urlParam("testdashboard");if(test_tasks){return"data/json/team-at-a-glance.json"}else{var atAGlanceURL=this.cnum===awf.user.info.cnum?"/proxy/TalentPlayBookService/rest/dataForYourTeamAtGlance/v1":"/proxy/TalentPlayBookService/rest/dataForYourTeamAtGlance/"+this.cnum+"/v2";return atAGlanceURL}},parse:function(data){var reverse=function(s){for(var i=s.length-1,o="";i>=0;o+=s[i--]){}return o};for(var i=0;i<data.data.length;i++){data.data[i].initials=reverse(w3n.utils.getInitials(data.data[i].name))}return data}})})();(function(){w3n.cogs.talentplaybook.Model=app.base.models.CompositeModel.extend({initSubmodels:function(attributes){var muid=attributes.manager.split(",")[0].substring("uid=".length);this.addModel("avatar",new w3n.serviceModels.Avatar({id:attributes.cnum}),null,false).addModel("jobresponsibility",new w3n.serviceModels.bp.PrivateProfile({id:attributes.cnum,fields:["jobresponsibilities"]}),null,false)}})})();(function(){w3n.serviceModels.AlertSummary=app.base.models.BaseModel.extend({initialize:function(options){options=options||{};var collection=options.collection;this.summaryByCnumTopic={};this.totalCount=0;this.alerts=[];this.topics=[];this.hasTpSummary=false;var topics=_.map(_.toArray(w3n.tpConfig.dashboards),function(topic){return{topicName:topic.dashName,categories:topic.categories}});this.topics=topics;var unreadNotices;if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services-new-version")){unreadNotices="unreadNotices"}else{unreadNotices="notices"}_.forEach(collection,function(item){_.forEach(item[unreadNotices],function(notice){var alert;var relatedTopics=_.filter(topics,function(t){return t.categories.indexOf(notice.categoryId)>=0});if(relatedTopics.length){alert=_.extend({},{cnum:item.supplemental.cnum,categoryId:notice.categoryId,topics:_.map(relatedTopics,"topicName").join("|")});this.alerts.push(alert)}else{console.warn("the following alert was ignored:");console.warn({Alert:notice})}}.bind(this))}.bind(this));var groupedByCnumTopics=_.chain(this.alerts).groupBy(function(n){return n.cnum+"-"+n.topics}).mapValues(function(g){return{cnum:g[0].cnum,categoryId:g[0].categoryId,topics:g[0].topics,count:g.length}}).toArray().value();this.summaryByCnumTopic=groupedByCnumTopics},subtractOne:function(cnum,categoryId){_.map(this.summaryByCnumTopic,function(item){if(item.categoryId===categoryId&&item.cnum===cnum&&item.count!==0){return item.count-=1}}.bind(this))},addOne:function(cnum,categoryId){var found;_.map(this.summaryByCnumTopic,function(item){if(item.categoryId===categoryId&&item.cnum===cnum){found=true;return item.count+=1}}.bind(this));if(!found){var relatedTopics=_.filter(this.topics,function(t){return t.categories.indexOf(categoryId)>=0});var alert;if(relatedTopics.length){alert=_.extend({},{cnum:cnum,categoryId:categoryId,topics:_.map(relatedTopics,"topicName").join("|"),count:1});this.summaryByCnumTopic.push(alert)}}},employeeCount:function(cnum){return this.doCount(cnum)},topicCount:function(topic){return this.doCount(null,topic)},employeeTopicCount:function(cnum,topic){return this.doCount(cnum,topic)},overallCount:function(topic){var topicCount=topic?this.topicCount(topic):0;return this.doCount(null,null)-topicCount},doCount:function(cnum,topic){var total=0;var subSet=_.filter(this.summaryByCnumTopic,function(item){if(cnum&&!topic){return item.cnum===cnum}if(!cnum&&topic){return item.topics.split("|").indexOf(topic)>=0}if(cnum&&topic){return item.cnum===cnum&&item.topics.split("|").indexOf(topic)>=0}if(!cnum&&!topic){return item}});if(!cnum&&!topic){_.forEach(subSet,function(item){total+=item.count*item.topics.split("|").length})}else{_.forEach(subSet,function(item){total+=item.count})}return total}})})();(function(){var TPCollection=w3n.serviceModels.ManagerDashboard.Collection.extend({model:app.base.models.BaseModel,parse:function(response,options){var parsedCol=w3n.serviceModels.ManagerDashboard.Collection.prototype.parse.apply(this,arguments);return parsedCol.map(function(item){return w3n.adapters.tpb.YourTeam(item,options)})}});var alerts=w3n.serviceModels.DashboardAlerts.Collection;var bcgCollection=w3n.serviceModels.BCGDashboard.Collection.extend({model:app.base.models.BaseModel,parse:function(response,options){var parsedCol=w3n.serviceModels.BCGDashboard.Collection.prototype.parse.apply(this,arguments);return parsedCol.map(function(item){return w3n.adapters.tpb.BCG(item,options)})}});var composite=w3n.cogs.talentplaybook.CompositeModel.extend({initialize:function(opts){w3n.cogs.talentplaybook.CompositeModel.prototype.initialize.apply(this,arguments);this.addCollection("main",new TPCollection({mgrId:this.cnum}),null,null,{merge:true});this.addCollection("bcg",new bcgCollection({mgrId:this.cnum}),null,null,{merge:true,idFinder:function(cnum,bcg){return bcg&&cnum===bcg.cnum},isOneToOne:true});var hasAlerts=opts.hasAlerts||false;if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services")&&hasAlerts){this.addCollection("alerts",new alerts({mgrId:this.cnum}),null,null,{merge:true,idFinder:function(cnum,alert){return alert&&alert.supplemental&&cnum===alert.supplemental.cnum},async:true,isOneToOne:true,canBeUpdated:true})}}});w3n.cogs.talentplaybook.models.BCG=composite})();(function(){var TPCollection=w3n.serviceModels.ManagerDashboard.Collection.extend({model:app.base.models.BaseModel,parse:function(response,options){var parsedCol=w3n.serviceModels.ManagerDashboard.Collection.prototype.parse.apply(this,arguments);return parsedCol.map(function(item){return w3n.adapters.tpb.YourTeam(item,options)})}});var alerts=w3n.serviceModels.DashboardAlerts.Collection;var composite=w3n.cogs.talentplaybook.CompositeModel.extend({initialize:function(opts){w3n.cogs.talentplaybook.CompositeModel.prototype.initialize.apply(this,arguments);this.addCollection("main",new TPCollection({mgrId:this.cnum}),null,null,{merge:true});var hasAlerts=opts.hasAlerts||false;if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services")&&hasAlerts){this.addCollection("alerts",new alerts({mgrId:this.cnum}),null,null,{merge:true,idFinder:function(cnum,alert){return alert&&alert.supplemental&&cnum===alert.supplemental.cnum},async:true,isOneToOne:true,canBeUpdated:true})}}});w3n.cogs.talentplaybook.models.Compensation=composite})();(function(){var TPCollection=w3n.serviceModels.ManagerDashboard.Collection.extend({model:app.base.models.BaseModel,parse:function(response,options){var parsedCol=w3n.serviceModels.ManagerDashboard.Collection.prototype.parse.apply(this,arguments);return parsedCol.map(function(item){return w3n.adapters.tpb.YourTeam(item,options)})}});var alerts=w3n.serviceModels.DashboardAlerts.Collection;var composite=w3n.cogs.talentplaybook.CompositeModel.extend({initialize:function(opts){w3n.cogs.talentplaybook.CompositeModel.prototype.initialize.apply(this,arguments);this.addCollection("main",new TPCollection({mgrId:this.cnum}),null,null,{merge:true});var hasAlerts=opts.hasAlerts||false;if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services")&&hasAlerts){this.addCollection("alerts",new alerts({mgrId:this.cnum}),null,null,{merge:true,idFinder:function(cnum,alert){return alert&&alert.supplemental&&cnum===alert.supplemental.cnum},async:true,isOneToOne:true,canBeUpdated:true})}}});w3n.cogs.talentplaybook.models.Dates=composite})();(function(){var mainAdapter=w3n.adapters.tpb.DownloadSpreadsheet.main;var alertsAdapter=w3n.adapters.tpb.DownloadSpreadsheet.alerts;var mergeAdapter=w3n.adapters.tpb.DownloadSpreadsheet.merge;var composite=app.base.models.CompositeModel.extend({initialize:function(opts){app.base.models.CompositeModel.prototype.initialize.apply(this,arguments);this.opts=opts||{};this.addCollection("main",opts.main,null,null);if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services")){if(opts.compositeModel.alerts&&opts.compositeModel.alerts.length>0){this.addCollection("alerts",opts.compositeModel.alerts,null,null);this.listenTo(opts.compositeModel.alerts,"error",this.tryMergeFail)}else{var alerts=new w3n.serviceModels.DashboardAlerts.Collection;this.addCollection("alerts",alerts,null,null)}}},fetch:function(options){if(!options){throw new Error("w3n.cogs.talentplaybook.models.DownloadSpreadsheet - [options] is messing ")}if(!options.currDashboardName){throw new Error("w3n.cogs.talentplaybook.models.DownloadSpreadsheet - [options.currDashboardName] is messing ")}var self=this;var def=$.Deferred();if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services-new-version")&&this.opts.dashboardProperties&&this.opts.dashboardProperties.hasAlerts){if(this.subCollectionsMap.alerts){if(this.subCollectionsMap.alerts.length>0){if(this.subCollectionsMap.alerts.length===1){if(!this.subCollectionsMap.alerts.models[0].attributes.supplemental){def.resolve(self.setMain(options))}else{def.resolve(self.mergeData(options))}}else{if(this.fetchAlertsFailed){def.resolve(self.mergeDataFail(options,this.fetchAlertsFailed))}else{def.resolve(self.mergeData(options))}}}else{this.subCollectionsMap.alerts.fetch().done(function(){def.resolve(self.mergeData(options))}).fail(function(err){def.resolve(self.mergeDataFail(options,err))})}}else{def.resolve(this.setMain(options))}}else{def.resolve(this.setMain(options))}return def},tryMergeFail:function(err){this.fetchAlertsFailed=err},mergeData:function(options){var alerts,main,merge;if(this.subCollectionsMap.alerts.length>0){alerts=this.getAlerts(options)}main=this.getMain(options);if(alerts){merge=mergeAdapter(main,alerts);this.set("merge",merge);this.trigger("merged-data",merge);return merge}else{this.set("main",main);this.trigger("main-data",main);return main}},mergeDataFail:function(options,err){var main=this.setMain(options);this.trigger("merge-error",err);return main},setMain:function(options){var main=this.getMain(options);this.set("main",main);this.trigger("main-data",main);return main},getMain:function(options){return mainAdapter(this.subCollectionsMap.main.toJSON(),options)},getAlerts:function(options){return alertsAdapter(this.subCollectionsMap.alerts,options)}});w3n.cogs.talentplaybook.models.DownloadSpreadsheet=composite})();(function(){var TPCollection=w3n.serviceModels.ManagerDashboard.Collection.extend({model:app.base.models.BaseModel,parse:function(response,options){var parsedCol=w3n.serviceModels.ManagerDashboard.Collection.prototype.parse.apply(this,arguments);return parsedCol.map(function(item){return w3n.adapters.tpb.YourTeam(item,options)})},sortAttribute:"fullname",sortDirection:1,sortDashboard:function(attr){this.sortAttribute=attr;this.sort()}});var alerts=w3n.serviceModels.DashboardAlerts.Collection;var EmergencyCollection=w3n.serviceModels.EmergencyDashboard.Collection.extend({model:app.base.models.BaseModel,parse:function(response,options){options.emergencylength=this.length;var parsedCol=w3n.serviceModels.EmergencyDashboard.Collection.prototype.parse.apply(this,arguments);return parsedCol.map(function(item){return w3n.adapters.tpb.Emergency(item,options)})}});var composite=w3n.cogs.talentplaybook.CompositeModel.extend({initialize:function(opts){w3n.cogs.talentplaybook.CompositeModel.prototype.initialize.apply(this,arguments);this.addCollection("main",new TPCollection({mgrId:this.cnum}),null,null,{merge:true});this.addCollection("emergencies",new EmergencyCollection({mgrId:this.cnum}),null,null,{merge:true,idFinder:function(cnum,emergency){return emergency&&cnum===emergency.rcnum}});var hasAlerts=opts.hasAlerts||false;if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services")&&hasAlerts){this.addCollection("alerts",new alerts({mgrId:this.cnum}),null,null,{merge:true,idFinder:function(cnum,alert){return alert&&alert.supplemental&&cnum===alert.supplemental.cnum},async:true,isOneToOne:true,canBeUpdated:true})}}});w3n.cogs.talentplaybook.models.Emergency=composite})();(function(){var requiredSummary=w3n.serviceModels.ExpensesDashboard.RequiredSummary.extend({parse:function(response,options){options=options||{};var parsedCol=w3n.serviceModels.ExpensesDashboard.RequiredSummary.prototype.parse.apply(this,arguments);if(response.input){options=_.extend({},options,{id:response.input.monthpaid})}return parsedCol.map(function(item){return w3n.adapters.tpb.ExpensesRequiredSummary(item,options)})}});var requiredList=w3n.serviceModels.ExpensesDashboard.RequiredList.extend({parse:function(response,options){options=options||{};var parsedCol=w3n.serviceModels.ExpensesDashboard.RequiredList.prototype.parse.apply(this,arguments);if(response.input){options=_.extend({},options,{id:response.input.monthpaid})}return parsedCol.map(function(item){return w3n.adapters.tpb.ExpensesRequiredList(item,options)})}});var optionalSummary=w3n.serviceModels.ExpensesDashboard.OptionalSummary.extend({parse:function(response,options){var parsedCol=w3n.serviceModels.ExpensesDashboard.OptionalSummary.prototype.parse.apply(this,arguments);return parsedCol.map(function(item){return w3n.adapters.tpb.ExpensesOptionalSummary(item,options)})}});var optionalList=w3n.serviceModels.ExpensesDashboard.OptionalList.extend({parse:function(response,options){var parsedCol=w3n.serviceModels.ExpensesDashboard.OptionalList.prototype.parse.apply(this,arguments);return parsedCol.map(function(item){return w3n.adapters.tpb.ExpensesOptionalList(item,options)})}});var alerts=w3n.serviceModels.DashboardAlerts.Collection;var composite=w3n.cogs.talentplaybook.CompositeModel.extend({initialize:function(opts){w3n.cogs.talentplaybook.CompositeModel.prototype.initialize.apply(this,arguments);opts=opts||{};opts.period=opts.period||moment(new Date).format("YYYYMM");this.addCollection("main",new requiredSummary({period:opts.period}),null,null,{merge:true});this.addCollection("optionalSummary",new optionalSummary({period:opts.period}),null,null,{merge:true,idFinder:function(cnum,expense){return expense&&cnum===expense.cnum},isOneToOne:true});this.addCollection("optionalList",new optionalList({period:opts.period}),null,null,{merge:true,idFinder:function(cnum,optionalItem){return optionalItem&&cnum===optionalItem.cnum},isOneToOne:true});this.addCollection("requiredList",new requiredList({period:opts.period}),null,null,{merge:true,idFinder:function(cnum,requiredItem){return requiredItem&&cnum===requiredItem.cnum},isOneToOne:true});var hasAlerts=opts.hasAlerts||false;if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services")&&hasAlerts){this.addCollection("alerts",new alerts({mgrId:this.cnum}),null,null,{merge:true,idFinder:function(cnum,alert){return alert&&alert.supplemental&&cnum===alert.supplemental.cnum},async:true,isOneToOne:true,canBeUpdated:true})}}});w3n.cogs.talentplaybook.models.Expenses=composite})();(function(){var TPCollection=w3n.serviceModels.ManagerDashboard.Collection.extend({model:app.base.models.BaseModel,parse:function(response,options){var parsedCol=w3n.serviceModels.ManagerDashboard.Collection.prototype.parse.apply(this,arguments);return parsedCol.map(function(item){return w3n.adapters.tpb.YourTeam(item,options)})}});var alerts=w3n.serviceModels.DashboardAlerts.Collection;var composite=w3n.cogs.talentplaybook.CompositeModel.extend({initialize:function(opts){w3n.cogs.talentplaybook.CompositeModel.prototype.initialize.apply(this,arguments);this.addCollection("main",new TPCollection({mgrId:this.cnum}),null,null,{merge:true});var hasAlerts=opts.hasAlerts||false;if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services")&&hasAlerts){this.addCollection("alerts",new alerts({mgrId:this.cnum}),null,null,{merge:true,idFinder:function(cnum,alert){return alert&&alert.supplemental&&cnum===alert.supplemental.cnum},isOneToOne:true,async:true,canBeUpdated:true})}}});w3n.cogs.talentplaybook.models.Expertise=composite})();(function(){var TPCollection=w3n.serviceModels.ManagerDashboard.Collection.extend({model:app.base.models.BaseModel,parse:function(response,options){var parsedCol=w3n.serviceModels.ManagerDashboard.Collection.prototype.parse.apply(this,arguments);return parsedCol.map(function(item){return w3n.adapters.tpb.Leadership(item,options)})}});var alerts=w3n.serviceModels.DashboardAlerts.Collection;var composite=w3n.cogs.talentplaybook.CompositeModel.extend({initialize:function(opts){w3n.cogs.talentplaybook.CompositeModel.prototype.initialize.apply(this,arguments);this.addCollection("main",new TPCollection({mgrId:this.cnum}),null,null,{merge:true});var hasAlerts=opts.hasAlerts||false;if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services")&&hasAlerts){this.addCollection("alerts",new alerts({mgrId:this.cnum}),null,null,{merge:true,idFinder:function(cnum,alert){return alert&&alert.supplemental&&cnum===alert.supplemental.cnum},async:true,isOneToOne:true,canBeUpdated:true})}}});w3n.cogs.talentplaybook.models.Leadership=composite})();(function(){var col=app.base.collections.BaseCollection.extend({id:null,initialize:function(opts){opts=opts||{};this.id=opts.id},fetch:function(){var deferreds=[];this.fetchReports(this.id).then(function(reports){this.reset(reports);_.forEach(this.models,function(model){var d=$.Deferred();this.fetchReports(model.attributes.uid).then(function(reports){if(reports.length)model.attributes.reports=reports;d.resolve()},function(error){d.reject(error);console.error(error)});deferreds.push(d)}.bind(this));$.when.apply(window,deferreds).done(function(){this.removeNonManagers();this.trigger("sync")}.bind(this))}.bind(this))},fetchReports:function(uid){var d=$.Deferred();var model=new w3n.serviceModels.up.ManagerReports({id:uid});model.fetch().then(function(response){var reports=this.parseReports(response);d.resolve(reports)}.bind(this),function(error){d.reject(error);console.error(error)}.bind(this));return d.promise()},parseReports:function(response){response=response[0];var reports=[];if(response&&response.doc&&response.doc.content){var functionalReports=response.doc.content.functional?response.doc.content.functional.reports:[];var incountryReports=response.doc.content.incountry?response.doc.content.incountry.reports:[];this.tagArray(response.doc.content.functional.reports,"functional");this.tagArray(response.doc.content.incountry.reports,"incountry");this.tagCommon(functionalReports,incountryReports,"both");reports=_.uniq(_.union(functionalReports,incountryReports),false,"uid")}return reports},tagArray:function(arr,tag){_.forEach(arr,function(item){item.type=tag})},tagCommon:function(functionalArr,incountryArr,tag){_.forEach(incountryArr,function(report){var item=_.findWhere(functionalArr,{uid:report.uid});if(item){item.type=report.type=tag}})},removeNonManagers:function(){_.remove(this.models,function(model){return!model.attributes.reports||!model.attributes.reports.length});_.forEach(this.models,function(model){_.remove(model.attributes.reports,function(report){return!report.reports||!report.reports.length})})}});w3n.cogs.talentplaybook.ManagerDrillDown=col})();(function(){var TPCollection=w3n.serviceModels.ManagerDashboard.Collection.extend({model:app.base.models.BaseModel,parse:function(response,options){var parsedCol=w3n.serviceModels.ManagerDashboard.Collection.prototype.parse.apply(this,arguments);return parsedCol.map(function(item){return w3n.adapters.tpb.YourTeam(item,options)})}});var alerts=w3n.serviceModels.DashboardAlerts.Collection;var performanceCollection=w3n.serviceModels.PerformanceDashboard.Collection.extend({model:app.base.models.BaseModel,parse:function(response,options){var parsedCol=w3n.serviceModels.PerformanceDashboard.Collection.prototype.parse.apply(this,arguments);return parsedCol.map(function(item){return w3n.adapters.tpb.Performance(item,options)})}});var composite=w3n.cogs.talentplaybook.CompositeModel.extend({initialize:function(opts){w3n.cogs.talentplaybook.CompositeModel.prototype.initialize.apply(this,arguments);this.addCollection("main",new TPCollection({mgrId:this.cnum}),null,null,{merge:true});this.addCollection("performanceCollection",new performanceCollection({mgrId:this.cnum}),null,null,{merge:true,idFinder:function(cnum,performance){return performance&&cnum===performance.cnum},isOneToOne:true});var hasAlerts=opts.hasAlerts||false;if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services")&&hasAlerts){this.addCollection("alerts",new alerts({mgrId:this.cnum}),null,null,{merge:true,idFinder:function(cnum,alert){return alert&&alert.supplemental&&cnum===alert.supplemental.cnum},isOneToOne:true,async:true,canBeUpdated:true})}}});w3n.cogs.talentplaybook.models.PerformanceModel=composite})();(function(){w3n.serviceModels.TasksAlertSummary=app.base.models.BaseModel.extend({initialize:function(options){options=options||{};this.collection=options.collection;this.summary={};this.hasData=false},doCount:function(){var d=$.Deferred();this.summary={};_.forEach(this.collection,function(item){this.summary[item.CATEGORY_ID]={};this.summary[item.CATEGORY_ID]={categoryId:parseInt(item.CATEGORY_ID),count:parseInt(item.UNREAD_COUNT)}}.bind(this));d.resolve();return d.promise()},subtractOne:function(topic){var topicId=parseInt(w3n.taskIdMap[topic]);if(this.summary[topicId].count!==0){this.summary[topicId].count-=1}},addOne:function(topic){var topicId=parseInt(w3n.taskIdMap[topic]);if(this.summary[topicId]){this.summary[topicId].count+=1}else{this.summary[topicId]={categoryId:topicId};this.summary[topicId].count=1}},topicCount:function(topic){var topicId=parseInt(w3n.taskIdMap[topic]);if(this.summary[topicId]){return this.summary[topicId].count}else{return 0}},totalCount:function(topic){var total=0;_.forEach(this.summary,function(item){total+=item.count}.bind(this));if(topic&&this.topicCount(topic)){return total-this.topicCount(topic)}else{return total}}})})();(function(){var TPCollection=w3n.serviceModels.ManagerDashboard.Collection.extend({model:app.base.models.BaseModel,parse:function(response,options){var parsedCol=w3n.serviceModels.ManagerDashboard.Collection.prototype.parse.apply(this,arguments);return parsedCol.map(function(item){return w3n.adapters.tpb.YourTeam(item,options)})}});var alerts=w3n.serviceModels.DashboardAlerts.Collection;w3n.manageteamAlerts=alerts;var composite=w3n.cogs.talentplaybook.CompositeModel.extend({initialize:function(opts){w3n.cogs.talentplaybook.CompositeModel.prototype.initialize.apply(this,arguments);var hasAlerts=opts.hasAlerts||false;this.addCollection("main",new TPCollection({mgrId:this.cnum}),null,null,{merge:true});if(awf.flags.isActive("cogs.talentplaybook.dashboard.first-line-tp-services")&&hasAlerts){this.addCollection("alerts",new alerts({mgrId:this.cnum}),null,null,{merge:true,idFinder:function(cnum,alert){return alert&&alert.supplemental&&cnum===alert.supplemental.cnum},async:true,isOneToOne:true,canBeUpdated:true})}}});w3n.cogs.talentplaybook.models.YourTeam=composite})();(function(){w3n.serviceModels.MgrhubAwardsDashboard={};var model=w3n.serviceModels.MgrhubAwardsDashboard.Model=w3n.serviceModels.sso.Model.extend({supportedServiceKey:"wsf"});w3n.serviceModels.MgrhubAwardsDashboard.Collection=w3n.serviceModels.sso.Collection.extend({model:model,supportedServiceKey:"wsf",initialize:function(options){this.cnumID=options.id},url:function(){var testawards=app.utils.urlParam("testawards");var testMasks=app.utils.urlParam("testMasks");if(testawards){return"data/json/awards.json"}else if(testMasks){return"data/json/awards-masks.json"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpwdprof3/"+this.cnumID}},parse:function(data){var parsedData=JSON.parse(data.wsf_response.CRESDATA);w3n.cnumArray=[];var blockHTML='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';for(var j=0;j<parsedData.results.length;j++){w3n.cnumArray[j]=parsedData.results[j].CNUM;if(parsedData.results[j].FAWDHIST_1!==""){parsedData.results[j].TCATEGOTY=blockHTML}if(parsedData.results[j].FAWDHIST_2!==""){parsedData.results[j].DAWARD=blockHTML}if(parsedData.results[j].FAWDHIST_3!==""){parsedData.results[j].TAWARD=blockHTML}if(parsedData.results[j].FAWDHIST_4!==""){parsedData.results[j].AAWARD=blockHTML}if(parsedData.results[j].FAWDHIST_6!==""){parsedData.results[j].BAWARD=blockHTML}if(parsedData.results[j].FEQHIST_1!==""){parsedData.results[j].QGRANT=blockHTML}if(parsedData.results[j].FEQHIST_2!==""){parsedData.results[j].QVESTED=blockHTML}if(parsedData.results[j].FEQHIST_3!==""){parsedData.results[j].QUNVESTED=blockHTML}if(parsedData.results[j].FEQHIST_4!==""){parsedData.results[j].AGPRICE=blockHTML}if(parsedData.results[j].FEQHIST!==""){parsedData.results[j].AHLDPWRD=blockHTML}}return parsedData.results},comparator:function(item){return[item.get("TNAMFULL")]}})})();(function(){w3n.serviceModels.MgrhubBCGDashboard={};var model=w3n.serviceModels.MgrhubBCGDashboard.Model=w3n.serviceModels.sso.Model.extend({idAttribute:"CNUM",supportedServiceKey:"wsf"});w3n.serviceModels.MgrhubBCGDashboard.Collection=w3n.serviceModels.sso.Collection.extend({model:model,supportedServiceKey:"wsf",initialize:function(options){this.cnumID=options.id},url:function(){var testbcg=app.utils.urlParam("testbcg");var testMasks=app.utils.urlParam("testMasks");if(testbcg){return"data/json/bcg.json"}else if(testMasks){return"data/json/bcg-mask.json"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpflbcg/1"}},parse:function(data){var parsedData=JSON.parse(data.wsf_response.CRESDATA);var returnData=[];for(var i=0;i<parsedData.results.length;i++){var currCnum=parseInt(parsedData.results[i].CNUM);if(currCnum===this.cnumID){returnData.push(parsedData.results[i])}}if(returnData.length>0){var returnSingle=returnData[0];if(awf.flags.isActive("cogs.team-profiles.dashboard.bcg")){var thisBCG=returnSingle.BCG_COMPLETION_DATE;returnSingle.bcgIsExemptFlag=returnSingle.FIS_EXEMPT||"";returnSingle.bcgIsExempt=returnSingle.IS_EXEMPT||"";returnSingle.bcgCompletionDateFlag=returnSingle.FBCG_COMPLETION_DATE||"";returnSingle.bcgCompletionDate=returnSingle.BCG_COMPLETION_DATE||"";returnSingle.bcgCertificateDateFlag=returnSingle.FCERT_DATE||"";returnSingle.bcgCertificateDate=returnSingle.CERT_DATE||"";returnSingle.bcgCourseCompletionDateFlag=returnSingle.FCOMPL_DATE||"";returnSingle.bcgCourseCompletionDate=returnSingle.COMPL_DATE||"";returnSingle.bcgCNUM=returnSingle.CNUM||"";
if(returnSingle.bcgCompletionDate!==null){returnSingle.bcgCompletionDate=returnSingle.bcgCompletionDate.substring(0,4)+"-"+returnSingle.bcgCompletionDate.substring(4,6)+"-"+returnSingle.bcgCompletionDate.substring(6)}if(returnSingle.bcgCertificateDate!==null){returnSingle.bcgCertificateDate=returnSingle.bcgCertificateDate.substring(0,4)+"-"+returnSingle.bcgCertificateDate.substring(4,6)+"-"+returnSingle.bcgCertificateDate.substring(6)}if(returnSingle.bcgCourseCompletionDate!==null){returnSingle.bcgCourseCompletionDate=returnSingle.bcgCourseCompletionDate.substring(0,4)+"-"+returnSingle.bcgCourseCompletionDate.substring(4,6)+"-"+returnSingle.bcgCourseCompletionDate.substring(6)}returnSingle.exempt="";returnSingle.displayBlock1="none";returnSingle.displayCheckMark1="none";returnSingle.displayDone1="none";returnSingle.displayNoText1="none";returnSingle.displayBlock2="none";returnSingle.displayCheckMark2="none";returnSingle.displayDone2="none";returnSingle.displayNoText2="none";returnSingle.displayBlock3="none";returnSingle.displayCheckMark3="none";returnSingle.displayDone3="none";returnSingle.displayNoText3="none";if(returnSingle.bcgIsExemptFlag.toUpperCase()==="X"||returnSingle.bcgCompletionDateFlag.toUpperCase()==="X"){returnSingle.displayBlock1="block";returnSingle.displayBlock2="block";returnSingle.displayBlock3="block";returnSingle.exempt="";returnSingle.bcgCompletionDate="";returnSingle.bcgCertificateDate="";returnSingle.bcgCourseCompletionDate=""}else if(returnSingle.bcgIsExempt.toUpperCase()==="Y"){returnSingle.exempt="EXEMPT";returnSingle.displayCheckMark1="inline-block";returnSingle.displayCheckMark2="inline-block";returnSingle.displayCheckMark3="inline-block";returnSingle.bcgCompletionDate="";returnSingle.bcgCertificateDate="";returnSingle.bcgCourseCompletionDate=""}else{returnSingle.exempt="";returnSingle.displayDone1="inline";returnSingle.displayDone2="inline";returnSingle.displayDone3="inline";if(returnSingle.bcgCompletionDate===null||returnSingle.bcgCompletionDate===""){returnSingle.displayNoText1="inline-block"}if(returnSingle.bcgCertificateDate===null||returnSingle.bcgCertificateDate===""){returnSingle.displayNoText2="inline-block"}if(returnSingle.bcgCourseCompletionDate===null||returnSingle.bcgCourseCompletionDate===""){returnSingle.displayNoText3="inline-block"}}if(returnSingle.bcgCompletionDate!==null&&returnSingle.bcgCompletionDate!==""){returnSingle.displayCheckMark1="inline-block"}if(returnSingle.bcgCertificateDate!==null&&returnSingle.bcgCertificateDate!==""){returnSingle.displayCheckMark2="inline-block"}if(returnSingle.bcgCourseCompletionDate!==null&&returnSingle.bcgCourseCompletionDate!==""){returnSingle.displayCheckMark3="inline-block"}}return returnSingle}else{return returnData[0]}},comparator:function(item){return[item.get("TNAMFULL")]}})})();(function(){w3n.serviceModels.MgrhubEmergencyDashboard={};var model=w3n.serviceModels.MgrhubEmergencyDashboard.Model=w3n.serviceModels.sso.Model.extend({supportedServiceKey:"wsf"});w3n.serviceModels.MgrhubEmergencyDashboard.Collection=w3n.serviceModels.sso.Collection.extend({model:model,supportedServiceKey:"wsf",initialize:function(options){this.cnumID=options.id},url:function(){var testemergency=app.utils.urlParam("testemergency");var testMasks=app.utils.urlParam("testMasks");if(testemergency){return"data/json/test-emergency.json"}else if(testMasks){return"data/json/test-emergency-masks.json"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpwdprof2/"+this.cnumID}},parse:function(data){function correctString(str){var correctedString=str.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()});return correctedString.replace(",","")}var parsedData={};if(data.wsf_response.CRESDATA!=="NO DATA"){parsedData=JSON.parse(data.wsf_response.CRESDATA);var returnArray=[];var response=parsedData.results;w3n.cnumArray=[];for(var j=0;j<response.length;j++){returnArray[j]={};returnArray[j].country=response[j].CCOUNTRY;returnArray[j].rcnum=response[j].RCNUM;returnArray[j].emergencyContactName=correctString(response[j].TECNAMFUL);returnArray[j].relationship=correctString(response[j].TERCREL);returnArray[j].type=response[j].TLDRTYPE;returnArray[j].phone=response[j].TTELNR;returnArray[j].wsfKey=response[j].WSF_KEY_FL;if(response[j].FEMCONT_1!==""){returnArray[j].emergencyContactName='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response[j].FEMCONT_2!==""){returnArray[j].relationship='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response[j].FEMCONT_3!==""){returnArray[j].phone='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}}return returnArray}else{parsedData=null;return parsedData}},comparator:function(item){return[item.get("TNAMFULL")]}})})();(function(){w3n.cogs["team-profiles"].DashboardListModel=app.base.models.CompositeModel.extend({initSubmodels:function(attributes){this.addModel("avatar",new app.serviceModels.Avatar({id:attributes.CNUM}),null,false)}})})();(function(){w3n.serviceModels.MgrhubProfileDashboard={};var model=w3n.serviceModels.MgrhubProfileDashboard.Model=w3n.serviceModels.sso.Model.extend({supportedServiceKey:"wsf"});w3n.serviceModels.MgrhubProfileDashboard.Collection=w3n.serviceModels.sso.Collection.extend({model:model,supportedServiceKey:"wsf",initialize:function(options){w3n.serviceModels.sso.Collection.prototype.initialize.apply(this,arguments);options=options||{}},url:function(){var testdashboard=app.utils.urlParam("testdashboard");var shortdashboard=app.utils.urlParam("shortdashboard");var largedashboard=app.utils.urlParam("largedashboard");if(testdashboard){return"data/json/dashboard.json"}else if(shortdashboard){return"data/json/dashboard-short.json"}else if(largedashboard){return"data/json/dashboard-large.json"}else{var time=new Date;return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpflwd/1?_="+time.getTime()}},fetch:function(options){options=options||{};return w3n.serviceModels.sso.Collection.prototype.fetch.apply(this,arguments)},parse:function(data){var options={fields:["TNAMFULL"],chars:["\\\\0"]};data.wsf_response.CRESDATA=w3n.utils.filterBy(data.wsf_response.CRESDATA,options);var parsedData=JSON.parse(data.wsf_response.CRESDATA);w3n.cnumArray=[];for(var j=0;j<parsedData.results.length;j++){w3n.cnumArray[j]=parsedData.results[j].CNUM}return parsedData.results},comparator:function(item){return[item.get("TNAMFULL")]}})})();(function(){w3n.serviceModels.MTPPerformanceDashboard={};var model=w3n.serviceModels.MTPPerformanceDashboard.Model=w3n.serviceModels.sso.Model.extend({idAttribute:"CNUM",supportedServiceKey:"wsf"});w3n.serviceModels.MTPPerformanceDashboard.Collection=w3n.serviceModels.sso.Collection.extend({model:model,supportedServiceKey:"wsf",initialize:function(options){this.cnumID=options.id},url:function(){var testperformance=app.utils.urlParam("testperformance");var testMasks=app.utils.urlParam("testMasks");if(testperformance){return"data/json/dashboard-performance.json"}else if(testMasks){return"data/json/dashboard-performance-masks.json"}else{if(awf.flags.isActive("cogs.team-profiles.dashboard.checkpoint-columns")){return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpflckpt/1"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpflwd/1"}}},parse:function(data){var options={fields:["TNAMFULL"],chars:["\\\\0"]};data.wsf_response.CRESDATA=w3n.utils.filterBy(data.wsf_response.CRESDATA,options);var parsedData=JSON.parse(data.wsf_response.CRESDATA);var returnData=[];for(var i=0;i<parsedData.results.length;i++){var currCnum=parseInt(parsedData.results[i].CNUM);if(currCnum===this.cnumID){returnData.push(parsedData.results[i])}}if(returnData.length>0){var returnSingle=returnData[0];var blockHTML='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';var businessResults="";if(returnSingle.FDIM05!==""){businessResults=blockHTML}else{if(returnSingle.CDIM05==="EXC"){businessResults='<div class="a-performance-exc showtooltip checkpoint-item" data-definition="<span>Exceeds</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else if(returnSingle.CDIM05==="ACH"){businessResults='<div class="b-performance-ach showtooltip checkpoint-item" data-definition="<span>Achieves</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else if(returnSingle.CDIM05==="MOR"){businessResults='<div class="c-performance-mor showtooltip checkpoint-item" data-definition="<span>Expects More</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else{businessResults='<div class="d-performance-none showtooltip checkpoint-item" data-definition="<span>No Rating</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}}var clientSuccess="";if(returnSingle.FDIM04!==""){clientSuccess=blockHTML}else{if(returnSingle.CDIM04==="EXC"){clientSuccess='<div class="a-performance-exc showtooltip checkpoint-item" data-definition="<span>Exceeds</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else if(returnSingle.CDIM04==="ACH"){clientSuccess='<div class="b-performance-ach showtooltip checkpoint-item" data-definition="<span>Achieves</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else if(returnSingle.CDIM04==="MOR"){clientSuccess='<div class="c-performance-mor showtooltip checkpoint-item" data-definition="<span>Expects More</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else{clientSuccess='<div class="d-performance-none showtooltip checkpoint-item" data-definition="<span>No Rating</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}}var innovation="";if(returnSingle.FDIM03!==""){innovation=blockHTML}else{if(returnSingle.CDIM03==="EXC"){innovation='<div class="a-performance-exc showtooltip checkpoint-item" data-definition="<span>Exceeds</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else if(returnSingle.CDIM03==="ACH"){innovation='<div class="b-performance-ach showtooltip checkpoint-item" data-definition="<span>Achieves</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else if(returnSingle.CDIM03==="MOR"){innovation='<div class="c-performance-mor showtooltip checkpoint-item" data-definition="<span>Expects More</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else{innovation='<div class="d-performance-none showtooltip checkpoint-item" data-definition="<span>No Rating</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}}var responsibility="";if(returnSingle.FDIM02!==""){responsibility=blockHTML}else{if(returnSingle.CDIM02==="EXC"){responsibility='<div class="a-performance-exc showtooltip checkpoint-item" data-definition="<span>Exceeds</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else if(returnSingle.CDIM02==="ACH"){responsibility='<div class="b-performance-ach showtooltip checkpoint-item" data-definition="<span>Achieves</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else if(returnSingle.CDIM02==="MOR"){responsibility='<div class="c-performance-mor showtooltip checkpoint-item" data-definition="<span>Expects More</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else{responsibility='<div class="d-performance-none showtooltip checkpoint-item" data-definition="<span>No Rating</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}}var skills="";if(returnSingle.FDIM01!==""){skills=blockHTML}else{if(returnSingle.CDIM01==="EXC"){skills='<div class="a-performance-exc showtooltip checkpoint-item" data-definition="<span>Exceeds</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else if(returnSingle.CDIM01==="ACH"){skills='<div class="b-performance-ach showtooltip checkpoint-item" data-definition="<span>Achieves</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else if(returnSingle.CDIM01==="MOR"){skills='<div class="c-performance-mor showtooltip checkpoint-item" data-definition="<span>Expects More</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}else{skills='<div class="d-performance-none showtooltip checkpoint-item" data-definition="<span>No Rating</span></br><a href=&quot;https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W90186f2fd1ef_44f7_b772_29ad854480e0/page/Program%20Overview&quot; target=&quot;_blank&quot;>Click here</a> to learn more"></div>'}}var checkpointAssessmentDate="";if(returnSingle.FCKPTDCOMPLET!==""){checkpointAssessmentDate=blockHTML}else if(returnSingle.DCOMPLET===""){checkpointAssessmentDate="No Data"}else{checkpointAssessmentDate=returnSingle.DCOMPLET}var checkpointQuestionJobAvailability="";if(returnSingle.FQSTN01!==""){checkpointQuestionJobAvailability=blockHTML}else if(returnSingle.FFLQ01==="Y"||returnSingle.FFLQ01==="y"){checkpointQuestionJobAvailability='<i class="icon icon-awf-checkmark"></i>&nbsp &nbspYes, this employee can be made available for a new job opportunity in the next calender year.'}else if(returnSingle.FFLQ01==="N"||returnSingle.FFLQ01==="n"){ischeckpointQuestionJobAvailability=false;checkpointQuestionJobAvailability='<i class="icon icon-awf-op-times-bold"></i>&nbsp &nbspNo, this employee may not be made available for a new job opportunity in the next calender year.'}else{checkpointQuestionJobAvailability="No data"}var checkpointQuestionManagerCertification="";if(returnSingle.FQSTN02!==""){checkpointQuestionManagerCertification=blockHTML}else if(returnSingle.FFLQ02==="Y"||returnSingle.FFLQ02==="y"){checkpointQuestionManagerCertification='<i class="icon icon-awf-checkmark"></i>&nbsp &nbspYes, the Global Manager completed the enablement and received certification, prior to accessing this employee.'}else if(returnSingle.FFLQ02==="N"||returnSingle.FFLQ02==="n"){checkpointQuestionManagerCertification='<i class="icon icon-awf-op-times-bold"></i>&nbsp &nbspNo, the Global Manager did not complete the enablement and receive certification, prior to accessing this employee.'}else{checkpointQuestionManagerCertification="No data"}returnSingle.businessResults=businessResults;returnSingle.clientSuccess=clientSuccess;returnSingle.innovation=innovation;returnSingle.responsibility=responsibility;returnSingle.skills=skills;returnSingle.checkpointAssessmentDate=checkpointAssessmentDate;returnSingle.checkpointQuestionJobAvailability=checkpointQuestionJobAvailability;returnSingle.checkpointQuestionManagerCertification=checkpointQuestionManagerCertification;return returnSingle}else{return returnData[0]}},comparator:function(item){return[item.get("TNAMFULL")]}})})();(function(){var alerts=w3n.serviceModels.DashboardAlerts.Collection.extend({initialize:function(options){options=options||{};this.filterId=options.filterId;this.cnumID=options.filterId;w3n.serviceModels.DashboardAlerts.Collection.prototype.initialize.apply(this,arguments)},parse:function(data){var result=w3n.serviceModels.DashboardAlerts.Collection.prototype.parse.apply(this,arguments);if(this.filterId){return _.filter(result,function(alert){return this.filterId.toString()===alert.supplemental.cnum}.bind(this))}else{return result}}});w3n.cogs["team-profiles"].Model=w3n.cogs.talentplaybook.CompositeModel.extend({initialize:function(attributes){w3n.cogs.talentplaybook.CompositeModel.prototype.initialize.call(this,arguments);this.addModel("avatar",new app.serviceModels.Avatar({id:attributes.cnum}),null,false).addModel("single",new w3n.serviceModels.TeamProfileSingle.Model({id:attributes.cnum}),null,false).addModel("up",new w3n.serviceModels.up.PersonInfo({id:attributes.cnum}),null,false);this.addCollection("awards",new w3n.serviceModels.MgrhubAwardsDashboard.Collection({id:attributes.cnum}),null,false,{async:true});this.addCollection("alerts",new alerts({filterId:attributes.cnum}),null,false,{async:true});this.addCollection("emergency",new w3n.serviceModels.MgrhubEmergencyDashboard.Collection({id:attributes.cnum}),null,false,{async:true});this.addCollection("bcg",new w3n.serviceModels.MgrhubBCGDashboard.Collection({id:attributes.cnum}),null,false,{async:true});this.addCollection("performance",new w3n.serviceModels.MTPPerformanceDashboard.Collection({id:attributes.cnum}),null,false,{async:true})}})})();(function(){w3n.serviceModels.TeamProfileSingle={};var model=w3n.serviceModels.TeamProfileSingle.Model=w3n.serviceModels.sso.Model.extend({idAttribute:"RCNUM",supportedServiceKey:"wsf",initialize:function(options){this.cnumID=options.id},url:function(){var testpersonal=app.utils.urlParam("testpersonal");var testMasks=app.utils.urlParam("testMasks");if(testpersonal){return"data/json/personalinfo.json"}else if(testMasks){return"data/json/personalinfo-mask.json"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpwdprof1/"+this.cnumID}},parse:function(data){if(!data)return;var options={fields:["TNAMFULL"],chars:["\\\\0"]};if(data&&data.wsf_response){data.wsf_response.CRESDATA=w3n.utils.filterBy(data.wsf_response.CRESDATA,options);var parsedData=JSON.parse(data.wsf_response.CRESDATA);var response=parsedData.results[0];var blockHTML='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';var fullNameParse=response.TNAMFULL;var lastName=fullNameParse.substring(0,fullNameParse.indexOf(","));var firstName=fullNameParse.substring(fullNameParse.indexOf(",")+2,fullNameParse.length);var globalteam_var,incountryteam_var;if(response.TLDRTYPE==="Global"||response.TLDRTYPE==="Both"){globalteam_var=true}else{globalteam_var=false}if(response.TLDRTYPE==="In-Country"||response.TLDRTYPE==="InCountry"||response.TLDRTYPE==="Both"){incountryteam_var=true}else{incountryteam_var=false}var sortby=function(field,reverse){var key=function(x){return x[field]};reverse=!reverse?1:-1;return function(a,b){return a=key(a),b=key(b),reverse*((a>b)-(b>a))}};var responseDate1="";var responseDate2="";var responseDate3="";var responseYear1=0;var responseYear2=0;var responseYear3=0;responseDate1=response.PBC_APPROVAL_DATE;responseDate2=response.DPBCADAT_2;responseDate3=response.DPBCADAT_3;if(response.PBC_APPROVAL_DATE){responseYear1=parseInt(response.PBC_APPROVAL_DATE.substring(0,4))}if(response.DPBCADAT_2){responseYear2=parseInt(response.DPBCADAT_2.substring(0,4))}if(response.DPBCADAT_3){responseYear3=parseInt(response.DPBCADAT_3.substring(0,4))}var currentTime=new Date;var currYear=currentTime.getFullYear();var responsePbcText1="";if(response.FPBC!==""){responsePbcText1='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}else{responsePbcText1=response.PBC}var responsePbcText2="";if(response.FPBCP!==""){responsePbcText2='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}else{responsePbcText2=response.PREVIOUS_PBC}var responsePbcText3="";if(response.FPBCNP!==""){responsePbcText3='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}else{responsePbcText3=response.NEXT_PREVIOUS_PBC}var pbcs=[{approvalDate:responseDate1,approvalYear:responseYear1,pbcText:responsePbcText1},{approvalDate:responseDate2,approvalYear:responseYear2,pbcText:responsePbcText2},{approvalDate:responseDate3,approvalYear:responseYear3,pbcText:responsePbcText3}];var pbcsSorted=pbcs.sort(sortby("approvalDate",true));var pbcByRecent=[{approvalDate:"",pbcText:""},{approvalDate:"",pbcText:""},{approvalDate:"",pbcText:""}];var prevYear=0;for(var i=0;i<pbcsSorted.length;i++){var currApprovalYear=pbcsSorted[i].approvalYear;if(currApprovalYear===prevYear){}else if(currApprovalYear===2013){pbcByRecent[2]=pbcsSorted[i]}else if(currApprovalYear===2014){pbcByRecent[1]=pbcsSorted[i]}else if(currApprovalYear===2015){pbcByRecent[0]=pbcsSorted[i]}prevYear=currApprovalYear}if(pbcByRecent[0].pbcText===""){pbcByRecent[0].pbcText="No Data"}if(pbcByRecent[1].pbcText===""){pbcByRecent[1].pbcText="No Data"}if(pbcByRecent[2].pbcText===""){pbcByRecent[2].pbcText="No Data"}if(response.FEMPL2!==""){response.TNAMFULL=blockHTML}if(response.FPOSITION!==""){response.TPOSITION=blockHTML}if(response.FSTATUS!==""){response.CACTIVE=blockHTML}if(response.FEMPTYPE!==""){response.TEMPLTYP=blockHTML}if(response.FBAND!==""){response.SALBIAW=blockHTML}if(response.FTINBND!==""){response.TIMEINBND=blockHTML}if(response.FDEPT!==""){response.RDEPT=blockHTML}var pmrPercentAux;if(response.FPMR!==""){response.PMR=blockHTML;pmrPercentAux=response.PMR}else{pmrPercentAux=response.PMR+"%"}var appAnnualSalaryCurrencyAux;if(response.FSALANU!==""){response.ASALANU=blockHTML;appAnnualSalaryCurrencyAux=response.ASALANU}else{appAnnualSalaryCurrencyAux=response.ASALANU+" "+response.CSALCURR}var lastSalaryChangeAmountCurrencyAux;if(response.FSALCHGA!==""){response.ASALCHGA=blockHTML;lastSalaryChangeAmountCurrencyAux=response.ASALCHGA}else{lastSalaryChangeAmountCurrencyAux=response.ASALCHGA+" "+response.CSALCURR}var lastSalaryChangeAmountCurrencyAux_2;if(response.FSALCHGA_2!==""){response.SALCHGA_2=blockHTML;lastSalaryChangeAmountCurrencyAux_2=response.SALCHGA_2}else{lastSalaryChangeAmountCurrencyAux_2=response.SALCHGA_2+" "+response.CSALCURR}var lastSalaryChangeAmountCurrencyAux_3;if(response.FSALCHGA_3!==""){response.SALCHGA_3=blockHTML;lastSalaryChangeAmountCurrencyAux_3=response.SALCHGA_3}else{lastSalaryChangeAmountCurrencyAux_3=response.SALCHGA_3+" "+response.CSALCURR}if(response.FSALDTE!==""){response.DSALCHG=blockHTML}if(response.FDSALCHG_2!==""){response.DSALIEFF_2=blockHTML}if(response.FDSALCHG_3!==""){response.DSALIEFF_3=blockHTML}if(response.FBONUSS!==""){response.ABONUS=blockHTML}if(response.FAWD3YR!==""){response.TAWD3YR=blockHTML}if(response.FEQPOTES!==""){response.CEQTYPOT=blockHTML}if(response.FFBTLRES!==""){response.FBTLRES=blockHTML}if(response.FSERVDUR!==""){response.SERVICEDUR=blockHTML}if(response.FEXCSTAT!==""){response.EXECUTIVE_STATUS=blockHTML}if(response.FHOMEADDR_1!==""){response.TADDRLN1=blockHTML}if(response.FHOMEADDR_2!==""){response.TADDRLN2=blockHTML}if(response.FHOMEADDR_3!==""){response.TADDRLN3=blockHTML}if(response.FHOMEADDR_4!==""){response.TADDRLN4=blockHTML}if(response.FHOMEADDR_5!==""){response.TADDRLN5=blockHTML}if(response.FHOMEADDR_6!==""){response.TADDRLN6=blockHTML}if(response.FRMAIL!==""){response.RMAIL=blockHTML}var btlTalent2016B10Value=response.EXECUTIVE_STATUS;var btlTalent2014B9Value="";var talentValue=response.FBTLRES;if(talentValue===null)talentValue="";if(talentValue!==""){var talentUpper=talentValue.toUpperCase();if(talentUpper==="N"){btlTalent2014B9Value="No"}else if(talentUpper=="Y"){btlTalent2014B9Value="Yes"}else{btlTalent2014B9Value=talentValue}}response.extLeadPot=response.FBTLRES==="Y"?true:false;if(response.FBTLRES!==""){response.extLeadPotMask=blockHTML}if(response.FEXCSTAT!==""){response.execStatus=blockHTML;response.btlSenExecPotMask=blockHTML;response.btlSenExecPot=false;response.btlExecPot=blockHTML}else{response.execStatus=response.EXECUTIVE_STATUS;response.btlSenExecPot=response.execStatus.endsWith("with senior executive potential")?true:false;response.btlExecPot=response.execStatus.endsWith("with senior executive potential")?response.execStatus.substring(0,response.execStatus.indexOf("with senior executive potential")):null}response.id=response.CNUM;response.uid=response.CNUM;response.fullname=response.TNAMFULL;response.position=response.TPOSITION;response.status=response.CACTIVE;response.employeeType=response.TEMPLTYP;response.band=response.SALBIAW;response.timeInBand=response.TIMEINBND;response.country=response.CCOUNTRY;response.dept=response.RDEPT;response.globalteam=globalteam_var;response.incountryteam=incountryteam_var;response.pbcYear1=pbcByRecent[0].pbcText;response.pbcYear2=pbcByRecent[1].pbcText;response.pbcYear3=pbcByRecent[2].pbcText;response.initials=firstName.trim()[0].toUpperCase()+lastName.trim()[0].toUpperCase();response.appAnnualSalary=response.ASALANU;response.appAnnualSalaryCurrency=appAnnualSalaryCurrencyAux;response.lastSalaryChangeAmount=response.ASALCHGA;response.lastSalaryChangeAmountCurrency=lastSalaryChangeAmountCurrencyAux;response.lastSalaryChangeDate=response.DSALCHG;response.lastSalaryChangeAmount_2=response.SALCHGA_2;response.lastSalaryChangeAmountCurrency_2=lastSalaryChangeAmountCurrencyAux_2;response.lastSalaryChangeDate_2=response.DSALIEFF_2;response.lastSalaryChangeAmount_3=response.SALCHGA_3;response.lastSalaryChangeAmountCurrency_3=lastSalaryChangeAmountCurrencyAux_3;response.lastSalaryChangeDate_3=response.DSALIEFF_3;if(response.FTIMEFRM!==""){response.timeframe=blockHTML}else{response.timeframe=response.TTIMEFRM}response.pmr=response.PMR;response.pmrPercent=pmrPercentAux;response.bonusPay=response.ABONUS;response.awards3yr=response.TAWD3YR;response.holdingPower=response.CEQTYPOT;response.btlTalent2014B9=btlTalent2014B9Value;response.btlTalent2016B10=btlTalent2016B10Value;response.serviceLength=response.SERVICEDUR;response.currency=response.CSALCURR;if(response.FHIREEMP!==""){response.dateOfHire=blockHTML}else{response.dateOfHire=response.DHIREEMP}if(response.FDSERRFIW!==""){response.serviceReference=blockHTML}else if(response.DSERRFIW){response.serviceReference=response.DSERRFIW.substring(0,4)+"-"+response.DSERRFIW.substring(4,6)+"-"+response.DSERRFIW.substring(6)}else{response.serviceReference=""}if(response.FDBIRTHMD!==""){response.dateOfBirth=blockHTML}else if(response.DBIRTH_MMDD){response.dateOfBirth="XXXX-"+response.DBIRTH_MMDD.replace("/","-")}else{response.dateOfBirth=""}return response}}})})();(function(){w3n.cogs.awards.Model=app.base.models.CompositeModel.extend({initialize:function(attrs,opts){app.base.models.CompositeModel.prototype.initialize.call(this,attrs,_.extend({},opts,{initialModel:new w3n.serviceModels.bp.PrivateProfile({id:awf.user.data.odw_info.User.Cnum,fields:["manager"]})}));this.addModel("awards",new w3n.serviceModels.wsf.Awards)},initSubmodels:function(attrs){var muid=attrs.manager.split(",")[0].substring("uid=".length);this.getSubStructure("awards").set({id:muid})},keyedSubModels:true})})();(function(){w3n.cogs.compensation.Model=app.base.models.CompositeModel.extend({initialize:function(attrs,opts){app.base.models.CompositeModel.prototype.initialize.call(this,attrs,_.extend({},opts,{initialModel:new w3n.serviceModels.bp.PrivateProfile({id:awf.user.data.odw_info.User.Cnum,fields:["manager"]})}));this.addModel("wsfProfile",new w3n.serviceModels.wsf.Profile).addModel("awards",new w3n.serviceModels.wsf.Awards)},initSubmodels:function(attrs){var muid=attrs.manager.split(",")[0].substring("uid=".length);this.getSubStructure("wsfProfile").set({id:muid});this.getSubStructure("awards").set({id:muid})},keyedSubModels:true})})();(function(){var calendarUtils=w3n.utils.calendarComponent;var employeeUrl="/hr/wsf/services/extdata/mgrhbtsk/ttcalemp/";var mgrUrl="/hr/wsf/services/extdata/mgrhbtsk/ttcal/";var service=w3n.serviceModels.sso.Collection.extend({name:"Task Calendar",supportedServiceKey:w3n.connections.proxy.indexOf("test")!==-1?"wsf_uat":"wsf",disableBasicCache:true,experience:"ibmer",categorySort:[],visibleItems:[],runOnce:false,currentOnly:true,initialize:function(models,opts){opts=opts||{};opts.supportedServiceKey=this.supportedServiceKey;w3n.serviceModels.sso.Collection.prototype.initialize.apply(this,arguments);if(opts.experience==="mgr")this.experience="mgr";else this.experience="ibmer";this.id=opts.id;this.calendarStartDate=opts.calendarStartDate;this.calendarEndDate=opts.calendarEndDate;this.unit=opts.unit;this.currentOnly=opts.currentOnly;
},sync:Backbone.Hoard.localStorageControl.getModelSync(),url:function(){var segment=this.experience!=="mgr"?employeeUrl:mgrUrl;return[w3n.connections.proxy,segment,this.id].join("")},parse:function(result){var parsed=JSON.parse(result.wsf_response.CRESDATA);var derived=parsed.results.filter(function(item){return item.STATUS!=="expired"}).map(function(item){var today=new Date;var start=moment(item.MGR_START).startOf("day").toDate();var end=moment(item.MGR_END).endOf("day").toDate();var status=start>today?"future-task":end<today?"past-task":"in-progress-task";return _.extend({},item,{MGR_START:start,MGR_END:end,STATUS:status,FINAL:item.FINAL==="Y"?"finalized-task":"tentative-task",CATEGORY:(_.find(w3n.utils.categories,{id:item.CATEGORY_ID}).key||"").toLowerCase(),CATEGORY_NAME:_.find(w3n.utils.categories,{id:item.CATEGORY_ID}).description||"",ROW:1,ROW_SET:false,FORMATTED_START:moment(item.MGR_START).format("YYYY-MM-DD"),FORMATTED_END:moment(item.MGR_END).format("YYYY-MM-DD"),STATUS_DESCRIPTION:_.find(w3n.cogs.taskCalendarResponsive.taskStatus,{key:status}).description||"Unconfirmed",program:item.TASK_NAME,name:item.SUBTASK_NAME,dueDate:item.MGR_END,startDate:item.MGR_START,status:item.STATUS,final:item.FINAL,taskStatus:item.STATUS_DESCRIPTION,icon:_.find(w3n.utils.categories,{id:item.CATEGORY_ID}).icon||""})});var model=_.sortBy(derived,["CATEGORY","MGR_END","MGR_START"]);return model}});w3n.serviceModels.taskCalendarResponsive=service})();(function(){w3n.serviceModels.BCGDashboard={};var model=w3n.serviceModels.BCGDashboard.Model=w3n.serviceModels.sso.Model.extend({idAttribute:"RCNUM",supportedServiceKey:"wsf"});w3n.serviceModels.BCGDashboard.Collection=w3n.serviceModels.sso.Collection.extend({model:model,supportedServiceKey:"wsf",url:function(){var testdashboard=app.utils.urlParam("testdashboard");if(testdashboard){return"data/json/bcg.json"}else{return w3n.connections.proxy+"/hr/wsf/services/extdata/flmmh/uwpflbcg/1"}},parse:function(data){var parsedData=JSON.parse(data.wsf_response.CRESDATA);return parsedData.results},comparator:function(item){return[item.get("NAME")]}})})();(function(){var SubTeam=app.base.models.BaseModel.extend({});var models={SubTeam:SubTeam};w3n.cogs.team.models=models})();(function(){})();(function(){awf.app.registerCog("about-tray",{flag:"cogs.about",setup:function(){console.info("setup :: about-tray cog");this.html=w3n.templates.cogs["about-tray"]["about-tray.html"]},teardown:function(){console.info("teardown :: about-tray cog");this.html=null},views:{medium:{flag:"cogs.about.medium",label:"About yourIBM",i18n_label:"app.cogs.about-tray.label",width:300,min_height:320,class_name:"about-tray",toggle_align:"bottom",position:"fixed",show_text:'<em class="icon-awf-info-circle"></em> <span class="awf-access" data-i18n="awf.common.open">Open</span>',hide_text:'<em class="icon-awf-op-times"></em> <span class="awf-access" data-i18n="awf.common.close">Close</span>',render:function($container,methods){$container.append(this.html);$container.localize()}}}})})();(function(){var cogName="awards";var cog=w3n.cogs[cogName];var largeCard,awardsModel;awf.app.registerCog("awards",{test:true,flag:"cogs.awards",setup:function(){awardsModel=new cog.Model;largeCard=new w3n.cogs.awards.large({awardsModel:awardsModel})},views:{mini:{flag:"cogs.awards.mini",label:"Awards",icon:"icon-youribm-award-ribbons",render:function($container,parent_friends){}},medium:{flag:"cogs.awards.medium",label:"Awards",render:function($container,parent_friends){$container.html(Mustache.render(w3n.templates.cogs.awards["awards-medium.html"]));$container.find(".flip-1").on("click",function(){w3n.utils.metrics.tagCogEvent("click","button","Medium card body","Awards card","See more about your awards?","none");parent_friends.flipCard()})}},large:{flag:"cogs.awards.large",label:"Awards",size:{width:724,height:700},render:function($container,parent_friends){if(largeCard.$el!==$container)largeCard.setElement($container);awardsModel.fetch();largeCard.render();$container.find(".section.intro a").on("click",function(){linkRef=$(this).attr("href");w3n.utils.metrics.tagCogEvent("click","link","Large card body","Awards card","Learn more about recognition at IBM",linkRef)});$container.find(".section .button").on("click",function(){linkRef=$(this).attr("href");w3n.utils.metrics.tagCogEvent("click","link","Large card body","Awards card","Go to application",linkRef)})},destroy:function(){largeCard.privacyInitted=false}}}});function tagMiniCardEvent(){console.warn("MIGRATION TODO: awards card - convert tagCogEvent call to 1.0")}})();(function(){var bp={image:"//w3-services1.w3-969.ibm.com/myw3/unified-profile-photo/v1/image/",profile:"http://w3.ibm.com/bluepages/profile.html?uid="},image_size=115;w3n.cogs.bluepages.adapters.bp_prod=function(data){var results=[];_.forEach(data,function(item){var temp={uid:item.uid,name:item.nameDisplay||item.nameFull||"",email:item.preferredIdentity||"",notes:item.notesEmail||"",role:item.role||"",org:item.org_title||"",country:item.co||"",tel_mobile:item.telephone_mobile||"",tel_office:item.telephone_office||"",tel_tieline:item.telephone_tieline||"",address:item.address_business_location||"",image:bp.image+item.uid+awf.util.urlParams({s:image_size}),assistant:_.get(item,"assistant_name_first")&&_.get(item,"assistant_name_last")?item.assistant_name_first+" "+item.assistant_name_last:"",assistant_uid:_.get(item,"assistant_uid")?item.assistant_uid:"",assistant_url:_.get(item,"assistant_uid")?bp.profile+item.assistant_uid:""};results.push(temp)});return results}})();(function(){var cog_name="bluepages";awf.app.registerCog(cog_name,{test:true,flag:"squads.bravo || squads.alpha || cogs.bluepages",setup:function(){var service=app.content.cards[cog_name];if(service){this.model=new w3n.serviceModels.bluepages[service.current_service]({adapter:w3n.cogs.bluepages.adapters[service.current_service]})}this.content=service;this.metrics=app.utils.createMetricTag({group:awf.app.id})},views:{mini:{flag:"cogs."+cog_name+".mini",label:"BluePages",i18n_label:"app.cogs.bluepages.label",icon:"icon-awf-w3-logo-bluepages",render:function($container,mini_methods){}},medium:{flag:"cogs."+cog_name+".medium",label:"BluePages",i18n_label:"app.cogs.bluepages.label",row_span:1,render:function($container,medium_methods){this.medium_view=new w3n.cogs.bluepages.views.search({el:$container,data:this.model,view_methods:medium_methods,metrics:this.metrics,limit:4,view_button_label:this.content.medium.button.label,view_button_i18n_label:"app.cogs.bluepages.cta.view-more"});this.medium_view.render();this.on("destroy-view",function(){this.medium_view.trigger("clear-view")}.bind(this))},destroy:function(){if(this.medium_view){this.medium_view.remove();delete this.medium_view}}},large:{flag:"cogs."+cog_name+".large",label:"BluePages",i18n_label:"app.cogs.bluepages.label",render:function($container,large_methods){this.metrics.cardEvent("flip-up",cog_name+":large");this.large_view=new w3n.cogs.bluepages.views.search({el:$container,data:this.model,view_methods:large_methods,metrics:this.metrics,limit:10,result_views:["grid","list"],active_view:"grid",view_button_label:this.content.large.button.label,view_button_i18n_label:"app.cogs.bluepages.cta.view-more-in-bluepages"});this.large_view.render()},destroy:function(){if(this.large_view){this.large_view.remove();delete this.large_view;this.trigger("destroy-view")}}}}})})();(function(){var cog_name="box";var config={dev:{client_id:"9sou6lpvluuhyeu7o14zu0zfmwiqtr40",client_secret:"W1EfP4vf2YozndideHCTE3GRfUdPVKS7",redirect_uri:"https://devpccggww3n01.w3-969.ibm.com/your-ibm/build/index.html"},staging:{client_id:"4hill0w8zl48z1v75tvw6o5juvdul156",client_secret:"72pHlj7dOzPmqwOPRopDr25mBxpIupqq",redirect_uri:"https://w3-pre.ibm.com"},production:{client_id:"zkba11udfbajr3d159j3oncqvlws3c0o",client_secret:"PBHci7SbMew4TUuB11Nrbk5gH2wCISBU",redirect_uri:"https://w3.ibm.com"}};var auth=config.dev,href=window.location.hostname;if(href=="w3-pre.ibm.com"){auth=config.staging}else if(href=="w3.ibm.com"){auth=config.production}var code;var array=window.location.search.split("&");var token=$.cookie("access_token");code=app.utils.urlParams.code;var getToken=function(params){var form=new FormData;form.append("grant_type","authorization_code");form.append("code",params.code);form.append("client_id",auth.client_id);form.append("client_secret",auth.client_secret);form.append("redirect_uri",auth.redirect_uri);var settings={url:"https://api.box.com/oauth2/token",method:"POST",headers:{"cache-control":"no-cache"},processData:false,contentType:false,mimeType:"multipart/form-data",data:form};return $.ajax(settings)};awf.app.registerCog(cog_name,{test:true,flag:"squads.echo || cogs.box.pilot",setup:function(){this.metrics=app.utils.createMetricTag({group:awf.app.id});this.content=app.content.cards[cog_name];if(this.content){this.collection=new app.base.collections.CompositeCollection(null,{model:w3n.serviceModels[this.content.current_service+"Requester"],adapter:w3n.cogs.box.adapters.json})}},teardown:function(){},views:{mini:{flag:"cogs."+cog_name+".mini",label:"Files (Box)",i18n_label:"app.cogs.box.label",icon:"icon-awf-folders",render:function($container,mini_methods){}},medium:{flag:"cogs."+cog_name+".medium",label:"Files (Box)",i18n_label:"app.cogs.box.label",render:function($container,medium_methods){var boxMediumView=new w3n.components.boxMediumView({$container:$container,collection:this.collection,medium_methods:medium_methods});if(token){this.collection.fetch({token:token}).done(function(){boxMediumView.hideSignIn();boxMediumView.render()})}else if(code){var params={code:code};boxMediumView.hideSignIn();getToken(params).done(function(response){var json=JSON.parse(response);$.cookie("access_token",json.access_token,{expires:json.expires_in/24/3600});token=$.cookie("access_token");this.collection.proxy.buildUrl("0");this.collection.fetch({token:json.access_token,uncache:true}).done(function(){})}.bind(this)).fail(function(){boxMediumView.showHideLoading("hide");boxMediumView.showSignIn()})}else{boxMediumView.showSignIn()}}},large:{flag:"cogs."+cog_name+".large",label:"Files (Box)",i18n_label:"app.cogs.box.label",render:function($container,large_methods){this.metrics.cardEvent("Flip up",cog_name+"Box:large");var self=this,boxLargeView=new w3n.components.boxLargeView({$container:$container,collection:this.collection});boxLargeView.showAllContent();if(self.collection.models.length!==0){boxLargeView.hideSignIn()}}}}})})();(function(){var template=w3n.templates.cogs["comment-form"]["comment-form.html"];awf.app.registerCog("feedback-tray",{flag:"cogs.feedback",setup:function(){this.html=template},teardown:function(){this.html=null},views:{medium:{flag:"cogs.feedback.medium",label:"yourIBM feedback",width:270,min_height:275,class_name:"feedback-tray",toggle_align:"bottom",position:"fixed",show_text:'<span class="awf-access">Open</span>',hide_text:'<em class="icon-awf-op-times"></em> <span class="awf-access">Close</span>',render:function($container,methods){$container.html(this.html)}}}})})();(function(){w3n.cogs.community.adapters.collectionsAdapter=function(entryList){var collection=[];if(!entryList||!entryList[0]){return collection}_.forEach(entryList[0],function(entry){var obj={communityUuid:"",title:"",link:"",userid:"",name:"",commType:"",update_ori:"",updated:"",summary:"",accessType:"",popularity:""},children=entry.children?entry.children:entry.childNodes;_.forEach(children,function(child){switch(child.nodeName){case"atom:id":obj.communityUuid=getXmlText(child);break;case"atom:title":obj.title=getXmlText(child);break;case"atom:link":obj.link=child.attributes[0].value;break;case"atom:contributor":var subChildren=child.children?child.children:child.childNodes;obj.userid=getXmlText(subChildren[0]);obj.name=getXmlText(subChildren[1]);obj.commType=w3n.connections.user_id==obj.userid?"comm-type-owner":"";break;case"atom:updated":obj.update_ori=getXmlText(child);obj.updated=getXmlText(child);break;case"atom:summary":obj.summary=_.trim(getXmlText(child));break;case"ibmsc:field":var id=child.attributes[0].value;switch(id){case"AccessControlLevel":var accessControlLevel=getXmlText(child);obj.accessType=accessControlLevel==="private"?"<span class='w3-icons icon-CheckedOut'>Restricted</span>":accessControlLevel==="public"?"":"<span class='w3-icons icon-moderatedCommunity16'>Moderated</span>";break;case"FIELD_COMMUNITY_MEMBER_COUNT":obj.popularity=getXmlText(child);break;default:return false}break;default:return false}});collection.push(obj)});return collection};function getXmlText(node){return node.textContent}function getXmlAttr(node,get,check){if(check){if(node.hasAttribute(check)){return node.getAttribute(get)}}else{return node.getAttribute(get)}}function getXmlChildren(node,i){return node.childNodes[i].textContent}})();(function(){var cog_name="community";awf.app.registerCog(cog_name,{test:true,flag:"cogs."+cog_name,setup:function(){var self=this;this.content=app.content.cards[cog_name];if(this.content){w3n.cogs.community.CompositeModel=app.base.models.CompositeModel.extend({apis:["owned","my_communities","followed","invites","accept","reject","sub_entry"],keyedSubModels:true,initialize:function(attributes,options){if(!options)options={};app.base.models.CompositeModel.prototype.initialize.call(this,{},options)},initSubmodels:function(){_.forEach(this.apis,function(api){this.addCollection(api,new w3n.serviceModels.community[self.content.current_service+"Requester"](null,{api:api}),w3n.cogs.community.adapters[self.content.current_service+"Adapter"])}.bind(this))},fetchPinned:function(){var def=$.Deferred();var pinned_communities=awf.construct.getOrCreate("pinned-communities");pinned_communities.fetch().done(function(){this.set("pinned",pinned_communities.value);def.resolve()}.bind(this)).fail(function(){def.reject()});setTimeout(function(){if(def.state()=="pending"){def.reject()}}.bind(this),5e3);return def},fetchByApi:function(api,popup){api=api||"my_communities";var def=$.Deferred();this.getSubStructure(api).fetch().done(function(res){if(popup){this.trigger("api-changed",[api])}def.resolve()}.bind(this)).fail(function(){def.reject({api:api})}.bind(this));return def},fetchOnce:function(){return this.checkLoginMode()},modelLogin:function(){app.localCache.clear("w3n.data.status.all");w3n.connections.authentication.addCallback(this.multiLoad.bind(this),this);w3n.connections.authentication.requestAuth()},checkLoginMode:function(){var def=new $.Deferred;switch(w3n.login_mode){case"automatic":this.multiLoad().then(def.resolve,def.reject);break;case"manual-identity-manager":this.trigger("show-login","show-manual-login");def.reject();break;case"manual-basic-auth":this.trigger("show-login");def.reject();break;default:console.error("What is this new login mode from COMMUNITY?? "+w3n.login_mode);break}return def},multiLoad:function(){var def=$.Deferred();var def1=this.fetchByApi("invites",false);var def2=this.fetchByApi("my_communities",false);$.when(def1,def2).done(function(){this.total_data_ready=true;this.trigger("sync");def.resolve()}.bind(this)).fail(function(){if(w3n.connections.authentication.enable_backup){this.trigger("show-login")}else{this.trigger("error",this)}def.reject()}.bind(this));return def},updatePinnedData:function(data){var pinned_communities=awf.construct.getOrCreate("pinned-communities");return pinned_communities.setValue(data).save()}})}this.metrics=app.utils.createMetricTag({group:awf.app.id});this.model=new w3n.cogs.community.CompositeModel},modelChangeApi:function(api){if(!this.model.toJSON()[api]){var compositeModel=new app.base.models.CompositeModel(null,{initSubmodels:function(){this.addCollection(api,new w3n.serviceModels.community.collectionsRequester(null,{api:api}),w3n.cogs.community.adapters.collectionsAdapter)}});compositeModel.fetch().done(function(){var apiData=compositeModel.toJSON()[api];if(apiData){this.model.set(api,apiData);this.model.trigger("api-changed",[api])}}).fail(function(err){console.log("api fail",err);view.noData(api)})}},teardown:function(){},views:{mini:{flag:"cogs."+cog_name+".mini",label:"Communities",i18n_label:"app.cogs.community.label",icon:"icon-youribm-communities",render:function($container,mini_methods){}},medium:{flag:"cogs."+cog_name+".medium",label:"Communities",i18n_label:"app.cogs.community.label",render:function($container,medium_methods){var view=new w3n.cogs.community.views.medium({el:$container,collection:this.model,medium_methods:medium_methods,metrics:this.metrics});this.model.fetchPinned().done(function(){this.model.data_ready=true;this.model.trigger("sync");medium_methods.handleLargeViewAvailable(function(is_flippable){if(is_flippable){$container.find(".cta-btn").fadeIn("fast")}else{$container.find(".cta-btn").fadeOut("fast")}})}.bind(this)).fail(function(){medium_methods.postMessage("error",app.messages.community.error,false).andDismissIn(5);view.hideLoading()}.bind(this))}},large:{flag:"cogs."+cog_name+".large",label:"Communities",i18n_label:"app.cogs.community.label",render:function($container,large_methods){var view=new w3n.cogs.community.views.large({el:$container,collection:this.model,large_methods:large_methods,metrics:this.metrics});this.metrics.cardEvent("flip-up",cog_name+":large");view.on("change-api",function(api){this.model.fetchByApi(api,true)}.bind(this));view.showLoading();if(!this.model.get("pinned")){this.model.fetchPinned().fail(function(){large_methods.postMessage("error",app.messages.community.error,false).andDismissIn(5);view.hideLoading()}.bind(this))}this.model.fetchOnce().done(function(){view.render()}).fail(function(){large_methods.postMessage("error",app.messages.community.error,false).andDismissIn(5);view.hideLoading()}.bind(this))}}}})})();(function(){w3n.cogs.community.CompositeModel=app.base.models.CompositeModel.extend({fetchOnce:function(){checkLoginMode(this)},modelLogin:function(){app.localCache.clear("w3n.data.status.all");w3n.connections.authentication.addCallback(multiLoad,this);w3n.connections.authentication.requestAuth()}});function checkLoginMode(self){switch(w3n.login_mode){case"automatic":multiLoad(self);break;case"manual-identity-manager":self.trigger("show-login","show-manual-login");break;case"manual-basic-auth":self.trigger("show-login");break;default:console.error("What is this new login mode from COMMUNITY?? "+w3n.login_mode)}}function multiLoad(self){self.fetch({error:multiFail.bind(self)}).fail(multiFail.bind(self))}function multiFail(){if(w3n.connections.authentication.enable_backup){this.trigger("show-login")}else{this.trigger("error",this)}}})();(function(){var cogName="compensation";var cog=w3n.cogs[cogName];var templates={medium:w3n.templates.cogs[cogName]["medium.html"],large:w3n.templates.cogs[cogName]["large.html"],currentTab:w3n.templates.cogs[cogName]["current-tab.html"],historyTab:w3n.templates.cogs[cogName]["history-tab.html"],equityTab:w3n.templates.cogs[cogName]["equity-tab.html"]};var Tab=cog.views.Tab;var tabViews={Current:Tab.extend({template:templates.currentTab}),History:Tab.extend({template:templates.historyTab}),Equity:Tab.extend({template:templates.equityTab})};awf.app.registerCog("compensation",{test:true,config:"cog.compensation",setup:function(){this.model=new cog.Model;var models={income:this.model.getSubStructure("wsfProfile"),equity:this.model.getSubStructure("awards")};var tabs=[{id:"current",model:models.income},{id:"history",model:models.income},{id:"equity",model:models.equity}];this.cards={large:new cog.views.Large({blackoutStart:moment(awf.flags._feature_data.cogs.compensation.blackout.date.after),blackoutEnd:moment(awf.flags._feature_data.cogs.compensation.blackout.date.before),template:templates.large,tabs:tabs.map(function(tabObj){return{tabKey:tabObj.id,tabTitle:_.capitalize(tabObj.id),view:new(tabViews[_.capitalize(tabObj.id)])({model:tabObj.model})}}),postRender:function($container){privacyInit(this.$el)}})}},views:{mini:{config:"cog.compensation.mini",label:_.capitalize(cogName),icon:"icon-youribm-compensation-circle"},medium:{config:"cog.compensation.medium",label:_.capitalize(cogName),render:function($container,parentFriends){$container.html(Mustache.render(templates.medium));$container.find(".flip-1").off("click");$container.find(".flip-1").on("click",function(){console.warn("MIGRATION TODO: compensation card - convert tagCogEvent call to 1.0");parentFriends.flipCard()});$container.parent().find(".icon-holder").off("click");$container.parent().find(".icon-holder").on("click",function(){console.warn("MIGRATION TODO: compensation card - convert tagCogEvent call to 1.0")});$container.parent().find(".header h2").off("click");$container.parent().find(".header h2").on("click",function(){console.warn("MIGRATION TODO: compensation card - convert tagCogEvent call to 1.0")})}},large:{config:"cog.compensation.large",label:_.capitalize(cogName),size:{width:724,height:500},render:function($container,friends){if(this.cards.large.$el!==$container)this.cards.large.setElement($container);this.cards.large.render();this.model.fetch();console.warn("MIGRATION TODO: compensation card - convert tagCogEvent call to 1.0");console.warn("MIGRATION TODO: compensation card - convert tagCogEvent call to 1.0")}}}});function privacyInit($container){$container.parent().find(".compensation-privacy-button").show();$container.parent().find(".button-wrap").show();$container.parent().find(".privacy-msg").hide();$container.parent().find(".compensation").addClass("blurred");privacyButton($container)}function privacyButton($container){$container.parent().find(".compensation-privacy-button").on("click",function(){console.warn("MIGRATION TODO: compensation card - convert tagCogEvent call to 1.0");$(this).hide();$container.parent().find(".button-wrap").hide();$container.parent().find(".privacy-msg").show();$container.parent().find(".compensation").removeClass("blurred")})}function tagMiniCardEvent(){console.warn("MIGRATION TODO: compensation card - convert tagCogEvent call to 1.0")}})();(function(){var cog_name="learning";awf.app.registerCog(cog_name,{test:true,flag:"cogs."+cog_name,setup:function(){this.metrics=app.utils.createMetricTag({group:awf.app.id});w3n.cogs.learning=w3n.cogs.learning||{};w3n.cogs.learning.models=w3n.cogs.learning.models||{};w3n.cogs.learning.collections=w3n.cogs.learning.collections||{};this.content=app.content.cards[cog_name];if(this.content){w3n.cogs.learning.models.summary=new w3n.serviceModels.learning.summaryRequester;w3n.cogs.learning.models.addLearning=new w3n.serviceModels.learning.addLearningRequester;w3n.cogs.learning.collections.local=new app.base.collections.CompositeCollection(null,{model:w3n.serviceModels.learning[this.content.current_service+"Requester"],adapter:w3n.cogs.learning.adapters[this.content.current_service+"Adapter"]});w3n.cogs.learning.collections.activities=new app.base.collections.CompositeCollection(null,{initialCollection:w3n.serviceModels.learning.activitiesRequester,model:w3n.serviceModels.learning.activityRequester});w3n.cogs.learning.collections.BIDT=new app.base.models.CompositeModel(null,{initSubmodels:function(){this.addCollection("business_initiative",new w3n.serviceModels.learning.BIDTRequester(null,{api:"business_initiative"}),w3n.cogs.learning.adapters.BIAdapter).addCollection("learning_delivery_type",new w3n.serviceModels.learning.BIDTRequester(null,{api:"learning_delivery_type"}),w3n.cogs.learning.adapters.DTAdapter)}})}this.model=w3n.cogs.learning.collections.local;this.summary=w3n.cogs.learning.models.summary;this.activities=w3n.cogs.learning.collections.activities;this.add_learning=w3n.cogs.learning.models.addLearning;this.BIDT=w3n.cogs.learning.collections.BIDT;this.tab_nav=null},views:{mini:{flag:"cogs."+cog_name+".mini",label:"Learning",i18n_label:"app.cogs.learning.label",icon:"icon-youribm-graduation-cap",render:function($container,mini_methods){}},medium:{flag:"cogs."+cog_name+".medium",label:"Learning",i18n_label:"app.cogs.learning.label",render:function($container,medium_methods){var view=new w3n.cogs.learning.views.medium({config:this.content,cog:this,el:$container,collection:this.model,summary:this.summary,activities:this.activities,parent_friends:medium_methods});this.model.fetch()}},large:{flag:"cogs."+cog_name+".large",label:"Learning",i18n_label:"app.cogs.learning.label",render:function($container,large_methods){var self=this;this.metrics.cardEvent("Flip up",cog_name+":large");this.large_view=new w3n.cogs.learning.views.large({cog:this,el:$container,collection:this.model,summary:this.summary,activities:this.activities,BIDT:this.BIDT,add_learning:this.add_learning,parent_friends:large_methods});this.activities.listenTo(this.summary,"auth-fetched",function(){fetchActivities(self,self.large_view)});self.large_view.on("fetch-activities",function(){fetchActivities(self,self.large_view)});this.model.fetch()},destroy:function(){if(this.large_view){this.large_view.remove();this.large_view=null}}}}});function fetchActivities(cog,view){cog.activities.fetch().done(function(resp){cog.activities.initialCollection.set(w3n.cogs.learning.adapters.activitiesAdapter(cog.activities.models[0].subModelsMap.activity.mergeData(resp.items)));cog.activities.fetched_activities=true;cog.activities.trigger("fetch-activities")}).fail(function(){cog.activities.trigger("activites-service-down")})}})();(function(){window.cog_lifecycle_events=[];var logEvent=function(data){var now=new Date,date=_.template("{{y}}-{{m}}-{{d}}")({y:now.getFullYear(),m:_.padLeft(now.getMonth()+1,2,"0"),d:_.padLeft(now.getDate(),2,"0")}),time=_.template("{{h}}:{{m}}:{{s}}:{{i}}")({h:_.padLeft(now.getHours(),2,"0"),m:_.padLeft(now.getMinutes(),2,"0"),s:_.padLeft(now.getSeconds(),2,"0"),i:_.padLeft(now.getMilliseconds(),4,"0")});_.defaults(data,{date:date,time:time});cog_lifecycle_events.push(data)};awf.app.registerCog("lifecycle_trigger",{flag:"cogs.lifecycle-trigger",setup:function(){console.info("setup :: lifecycle cog");logEvent({fn:"setup"})},teardown:function(){console.info("teardown :: lifecycle cog");logEvent({fn:"teardown"})},views:{medium:{label:"Cog Lifecycle",width:275,min_height:275,toggle_align:"bottom",position:"fixed",show_text:'<em class="icon-youribm-clock-inbox"></em> <span class="awf-access" data-i18n="awf.common.open">Open</span>',hide_text:'<em class="icon-awf-op-times"></em> <span class="awf-access" data-i18n="awf.common.close">Close</span>',render:function($container){logEvent({fn:"render",view:"medium"});$container.append("<p>Medium Content</p>")},destroy:function(){logEvent({fn:"destroy",view:"medium"})}},mini:{label:"Cog Lifecycle",icon:"icon-youribm-clock-inbox",render:function($container){logEvent({fn:"render",view:"mini"})},destroy:function(){logEvent({fn:"destroy",view:"mini"})}},large:{label:"Cog Lifecycle",render:function($container){logEvent({fn:"render",view:"large"});$container.append("<p>Large Content</p>")},destroy:function(){logEvent({fn:"destroy",view:"large"})}},page:{render:function($container){logEvent({fn:"render",view:"page"});$container.append("<p>Page Content</p>")},destroy:function(){logEvent({fn:"destroy",view:"page"})}},masthead_tray:{label:"Cog Lifecycle",icon:"icon-youribm-clock-inbox",render:function($container){logEvent({fn:"render",view:"masthead_tray"});$container.append("<p>Masthead Tray Content</p>")},destroy:function(){logEvent({fn:"destroy",view:"masthead_tray"})}}}})})();awf.app.registerCog("lifecycle_viewer",{flag:"cogs.lifecycle-viewer",setup:function(){this.render=function($container){var self=this;if("cog_lifecycle_events"in window){if(cog_lifecycle_events.length>0&&_.last(cog_lifecycle_events).date!="-"){cog_lifecycle_events.push({date:"-",time:"-",fn:"-",view:"-"})}self.last_known_count=0;return setInterval(function(){if(cog_lifecycle_events.length!=self.last_known_count){self.last_known_count=cog_lifecycle_events.length;var $table=awf.util.jsonToTable(cog_lifecycle_events,["date","time","fn","view"]),$div=$("<div></div>");$table.addClass("json");$div.css({"max-height":"280px",overflow:"auto"});$div.append($table);$container.html($div)}},250)}else{$container.html('<div style="padding: 20px; color: #900; text-align: center;">`cog_lifecycle_events` was not found.</div>');return null}};this.stylesheet=new awf.ui.Stylesheet({content:["table.json { width: 100%; }","table.json tbody { }","table.json thead { }","table.json th, table.json td { font: 10px Monaco; padding: 2px 5px; }","table.json th { border-bottom: solid 2px #999; }","table.json td {  }"].join("\n")})},teardown:function(){if(this.stylesheet)this.stylesheet.destroy();this.stylesheet=null},views:{mini:{icon:"icon-youribm-clock-inbox",label:"Lifecycle Viewer"},medium:{label:"Lifecycle Viewer",width:640,min_height:280,colspan:3,show_text:'<em class="icon-youribm-clock-inbox"></em> <span class="awf-access" data-i18n="awf.common.open">Open</span>',hide_text:'<em class="icon-awf-op-times"></em> <span class="awf-access" data-i18n="awf.common.close">Close</span>',render:function($container,methods){this.medium_interval=this.render($container)},destroy:function(){clearInterval(this.medium_interval)}},masthead_tray:{label:"Lifecycle Viewer",icon:"icon-youribm-clock-inbox",overlay:false,render:function($container,methods){this.masthead_interval=this.render($container)},destroy:function(){clearInterval(this.masthead_interval)}}}});(function(){if(false)return false;awf.registerExternalInitHandler("metrics","localmetrics",function(metrics_hold,localmetrics_config){if(localmetrics_config===false){metrics_hold.resolve("config value was false");return false}function LocalMetrics(params){var self=this;params=params||{};self.data=[]}_.extend(LocalMetrics.prototype,{push:function(data){this.data.push(data);awf.util.setStoredObject("localmetrics",this.data)},createMetricTagger:function(template){var self=this;template=template||{};return function(obj){var stats_object=obj||{},now=new Date,date=_.template("{{y}}-{{m}}-{{d}}")({y:now.getFullYear(),m:_.padLeft(now.getMonth()+1,2,"0"),d:_.padLeft(now.getDate(),2,"0")}),time=_.template("{{h}}:{{m}}:{{s}}:{{i}}")({h:_.padLeft(now.getHours(),2,"0"),m:_.padLeft(now.getMinutes(),2,"0"),s:_.padLeft(now.getSeconds(),2,"0"),i:_.padLeft(now.getMilliseconds(),4,"0")});self.push(stats_object);console.groupCollapsed("A localmetrics event was tagged.");console.log(stats_object);console.groupEnd();return stats_object}},tagMetric:function(obj){return this.createMetricTagger.call(this)(obj)}});var localmetrics=new LocalMetrics;var origTagMetric=awf.tagMetric;awf.tagMetric=function(obj){try{localmetrics.tagMetric(obj)}catch(er){console.warn('localmetrics "hack" failed.');console.error(er)}return origTagMetric.apply(this,arguments)};if(!localmetrics_config.blocking){metrics_hold.resolve("non-blocking")}metrics_hold.resolve("loaded")});console.info("When `awf.init()` or `awf.app.start()` is called, `localmetrics` will be loaded.")})();(function(){if(false)return false;awf.app.registerCog("localmetrics",{flag:"cogs.localmetrics",setup:function(){this.render=function($container){var self=this;if("localmetrics"in awf.metrics){self.last_known_count=0;return setInterval(function(){if(awf.metrics.localmetrics.data.length!=self.last_known_count){self.last_known_count=awf.metrics.localmetrics.data.length;var $table=awf.util.jsonToTable(awf.metrics.localmetrics.data,["date","time","ev","action","section","module","name","target","group"]),$div=$("<div></div>");$table.addClass("json");$div.css({"max-height":"280px",overflow:"auto"});$div.append($table);$container.html($div)}},250)}else{$container.html('<div style="padding: 20px; color: #900; text-align: center;">`localmetrics` was not found.</div>');return null}};this.stylesheet=new awf.ui.Stylesheet({content:["table.json { width: 100%; }","table.json tbody { }","table.json thead { }","table.json th, table.json td { font: 10px Monaco; padding: 2px 5px; }","table.json th { border-bottom: solid 2px #999; }","table.json td {  }"].join("\n")})},teardown:function(){if(this.stylesheet)this.stylesheet.destroy();
this.stylesheet=null},views:{mini:{icon:"icon-youribm-chart-bar",label:"Local Metrics"},medium:{label:"Local Metrics",width:640,min_height:280,colspan:3,show_text:'<em class="icon-youribm-chart-bar"></em> <span class="awf-access" data-i18n="awf.common.open">Open</span>',hide_text:'<em class="icon-awf-op-times"></em> <span class="awf-access" data-i18n="awf.common.close">Close</span>',render:function($container,methods){this.medium_interval=this.render($container)},destroy:function(){clearInterval(this.medium_interval)}},masthead_tray:{label:"Local Metrics",icon:"icon-youribm-chart-bar",overlay:false,render:function($container,methods){this.masthead_interval=this.render($container)},destroy:function(){clearInterval(this.masthead_interval)}}}})})();(function(){awf.registerSnippet("mgrhub-header",w3n.templates.cogs["mgrhub-header"]["mgrhub-header.html"])})();(function(){var cog_name="minipulse";awf.app.registerCog(cog_name,{test:true,flag:"cogs."+cog_name,setup:function(){this.metrics=app.utils.createMetricTag({group:awf.app.id});this.content=app.content.cards[cog_name];var service=app.content.cards.minipulse;if(service){var compositeCollection=app.base.collections.CompositeCollection.extend({urlkeys:[],fetchOnce:function(){var self=this;var $deferred=$.Deferred();if(!self.fetched){self.fetched=true;self.fetch().done(function(res){_.forEach(this.models,function(model){var pollModel=model.getSubStructure("poll");pollModel.on("votePoll:success",function(poll){self.trigger("votePoll:success",poll)});self.urlkeys.push(pollModel.url())});self.evictInvalidCache();$deferred.resolve()}.bind(this)).fail(function(){$deferred.reject()})}return $deferred},evictInvalidCache:function(){var cacheKeys=_.keys(localStorage);_.map(cacheKeys,function(key){var apiBase=this.urlkeys[0].substring(0,this.urlkeys[0].indexOf("pollid"));if(key.indexOf(apiBase)>-1){if(this.urlkeys.indexOf(key)<0){localStorage.removeItem(key)}}}.bind(this))}});w3n.cogs.minipulse.collections=new compositeCollection(null,{initialCollection:w3n.serviceModels.minipulse.pollList,model:w3n.serviceModels.minipulse.poll})}this.collection=w3n.cogs.minipulse.collections;this.collection.on("votePoll:success",function(poll){var items=_.get(awf,"badge_db.dimensions.cog.groups."+cog_name+".items");if(items){items[0].removeFromCollection()}}.bind(this))},teardown:function(){var items=_.get(awf,"badge_db.dimensions.cog.groups."+cog_name+".items");if(items){_.forEachRight(items,function(item){item.removeFromCollection()})}},views:{mini:{flag:"cogs."+cog_name+".mini",label:"Minipulse",i18n_label:"app.cogs.minipulse.label",icon:"icon-awf-w3-logo-minipulse",init:function(methods){var badgeModel=new w3n.serviceModels.minipulse.badge;badgeModel.fetch().done(function(response){for(var i=0;i<response.icon;i++){methods.postBadge(response.icon)}})},render:function($container,mini_methods){}},medium:{flag:"cogs."+cog_name+".medium",label:"Minipulse",i18n_label:"app.cogs.minipulse.label",render:function($container,medium_methods){w3n.cogs.minipulse.views.base.medium_methods=medium_methods;var view=new w3n.cogs.minipulse.views.medium({metrics:this.metrics,medium_methods:medium_methods,collection:this.collection,options:{$container:$container}});var self=this;self.collection.fetchOnce().done(function(response){self.status="complete";self.collection.trigger("requestend")}).fail(function(){self.status="notAuthenticated";self.errorType="minipulseAuthFailed";self.collection.trigger("requestend")})}},large:{flag:"cogs."+cog_name+".large",label:"Minipulse",i18n_label:"app.cogs.minipulse.label",render:function($container,large_methods){w3n.cogs.minipulse.views.base.large_methods=large_methods;this.metrics.cardEvent("Flip up",cog_name+":large");var view=new w3n.cogs.minipulse.views.large({collection:this.collection,large_methods:large_methods,options:{$container:$container}});var self=this;self.collection.fetchOnce().done(function(response){self.status="complete";self.collection.trigger("requestend")}).fail(function(){self.status="notAuthenticated";self.errorType="minipulseAuthFailed";self.collection.trigger("requestend")})}}}})})();(function(){var cog=w3n.cogs.profileInfo;var templates={loading:app.templates.components["loading-mark"]["loading-mark.html"],MEDIUM:w3n.templates.cogs["profile-info"]["profile-info-medium.html"],LARGE:w3n.templates.cogs["profile-info"]["profile-info-large.html"]};awf.app.registerCog("profile-info",{test:true,setup:function(){},flag:"cogs.profile-info",views:{mini:{flag:"cogs.profile-info.mini",label:"Personal Info",icon:"icon-awf-avatar-circle-bold",render:function($container,components){w3n.utils.metrics.tagCogEvent("drag","Mini card place","sidebar","Private profile card","drag handle","none")}},medium:{flag:"cogs.profile-info.medium",label:"Personal Information",render:function($container,helpers){$container.attr("id","profile-info-medium");var model=new w3n.serviceModels.bp.PrivateProfile({id:awf.user.data.odw_info.User.Cnum,fields:["jobresponsibilities","telephonenumber","mail","workloc"]});var card=new cog.views.Medium({model:model,name:"medium-profile-info",el:$container,helpers:helpers});$container.html(templates.loading);model.fetch().then(function(){var avatarModel=new app.serviceModels.Avatar({id:awf.user.data.odw_info.User.Cnum,initials:w3n.utils.getInitials(awf.user.data.odw_info.User.CommonName)});var businessAddressModel=new w3n.serviceModels.bp.WorkLocation({id:model.attributes.workloc});card.render({uid:awf.user.data.odw_info.User.Cnum,name:awf.user.data.odw_info.User.CommonName,employeetype:awf.user.data.odw_info.Profile.EmployeeType.text});var avatar=new app.components.Avatar({model:avatarModel,name:"medium-profile-avatar",el:card.$el.find(".med-avatar"),id:awf.user.data.odw_info.User.Cnum});var businessAddress=new cog.views.BusinessAddress({name:"medium-profile-business-address",el:card.$el.find(".section.business-address")});var contact=new cog.views.Contact({name:"medium-profile-contact",el:card.$el.find(".section.contact-info")});avatarModel.fetch().then(function(){avatar.render({uid:avatarModel.id},true)});businessAddressModel.fetch().then(function(){var attrs=businessAddressModel.attributes;businessAddress.render({businessAddress:parseBusinessAddress(attrs)})});contact.render({contact:model.attributes},true)})}},large:{flag:"cogs.profile-info.large",label:"Personal Information",size:{width:724,height:600},render:function($container,friends){$container.attr("id","profile-info-large");var model=new w3n.serviceModels.bp.PrivateProfile({id:awf.user.data.odw_info.User.Cnum,fields:["jobresponsibilities","telephonenumber","mail","manager","workloc"]});var card=new cog.views.Large({model:model,name:"large-profile-info",el:$container});$container.html(templates.loading);model.fetch().then(function(){var avatarModel=new app.serviceModels.Avatar({id:awf.user.data.odw_info.User.Cnum,initials:w3n.utils.getInitials(awf.user.info.name)});var homeAddressModel=new w3n.serviceModels.wsf.Profile;var businessAddressModel=new w3n.serviceModels.bp.WorkLocation({id:model.attributes.workloc});var emergencyCollection=new w3n.serviceModels.wsf.Emergency;card.render({uid:awf.user.data.odw_info.User.Cnum,name:awf.user.data.odw_info.User.CommonName,employeetype:awf.user.data.odw_info.Profile.EmployeeType.text});var avatar=new app.components.Avatar({model:avatarModel,name:"large-profile-avatar",id:awf.user.data.odw_info.User.Cnum});card.$el.find(".section.header .details").prepend(avatar.$el);var homeAddress=new cog.views.HomeAddress({model:homeAddressModel,name:"large-profile-home-address",el:card.$el.find(".home-address-section")});var businessAddress=new cog.views.BusinessAddress({model:businessAddressModel,name:"large-profile-large-business-address",el:card.$el.find(".business-address-section")});var emergency=new cog.views.Emergency({model:emergencyCollection,name:"large-profile-emergency",el:card.$el.find(".section.emergency-contacts")});avatarModel.fetch().then(function(){avatar.render(null,true)});homeAddressModel.setId(model.attributes.manager).fetch().then(function(){homeAddress.render()});businessAddressModel.fetch().then(function(){var attrs=businessAddressModel.attributes;businessAddress.render({businessAddress:parseBusinessAddress(attrs),isLargeCard:true})});emergencyCollection.setId(model.attributes.manager).fetch().then(function(){var extData={};if(emergencyCollection.length>0&&emergencyCollection.models[0].attributes.FEMCONT_1==="X"){extData.hideEmergencyContacts=true}emergency.render(extData)})})}}}});function parseBusinessAddress(attrs){if(attrs){return{address1:attrs.address1?attrs.address1.trim():null,address2:null,city:attrs.l?attrs.l.trim():null,state:attrs.st?attrs.st.trim():null,country:attrs.c?attrs.c.trim():null,zip:attrs.postalcode?attrs.postalcode.trim():null}}else{return false}}})();(function(){var cog_name="status-updates";awf.app.registerCog(cog_name,{test:true,flag:"cogs."+cog_name,setup:function(){this.content=app.content.cards[_.snakeCase(cog_name)];this.metrics=app.utils.createMetricTag({group:awf.app.id});if(this.content){generateCollections(this.content);this.collection=new w3n.cogs.status_updates.collection;w3n.cogs.status_updates.collections.push(this.collection)}},views:{mini:{flag:"cogs."+cog_name+".mini",label:"Status Updates",i18n_label:"app.cogs.status-updates.label",icon:"icon-awf-chat",render:function($container,mini_methods){}},medium:{flag:"cogs."+cog_name+".medium",label:"Status Updates",i18n_label:"app.cogs.status-updates.label",rowspan:2,render:function($container,medium_methods){var component=new w3n.cogs.status_updates.views.medium({el:$container,pf:medium_methods,collection:this.collection,metrics:this.metrics,notLocalize:true});if(awf.user.is_authenticated){this.collection.checkAuthMode({requester:"list"})}}},large:{flag:"cogs."+cog_name+".large",label:"Status Updates",i18n_label:"app.cogs.status-updates.label",render:function($container,large_methods){this.metrics.cardEvent("Flip up",cog_name+":large");this.large_view=new w3n.cogs.status_updates.views.large({el:$container,pf:large_methods,collection:this.collection,metrics:this.metrics,notLocalize:true});if(awf.user.is_authenticated){this.collection.checkAuthMode({requester:"list"})}},destroy:function(){if(this.large_view){this.large_view.remove();this.large_view=null}}}}});function generateCollections(service){if(service){var service_name="status_updates";w3n.cogs[service_name].collection=app.base.models.CompositeModel.extend({keyedSubModels:true,initSubmodels:function(attrs){if(service.current_service instanceof Array){_.forEach(service.current_service,function(name){var instance=new w3n.serviceModels[service_name][name];if(instance instanceof app.base.collections.BaseCollection){this.addCollection(name,instance)}else{this.addModel(name,instance)}}.bind(this))}else{self.addModel(service.current_service,new w3n.serviceModels[service_name][service.current_service],app.cogs[service_name].adapters[service.current_service])}},checkAuthMode:function(options){var requester=this.getSubStructure(options.requester);var defer=$.Deferred();switch(w3n.login_mode){case"automatic":if(requester.length||requester.no_data){requester.trigger("fetch-done");defer.resolve()}else{if(requester.fail_completely){requester.trigger("error");defer.reject()}else if(w3n.connections.authentication.enable_backup){this.trigger("base-auth");defer.reject()}else{this.trigger("fetch");requester.fetch(options).fail(function(err){requester.trigger("error",err);defer.reject(err)})}}break;case"manual-identity-manager":if(requester.length||requester.no_data){requester.trigger("fetch-done")}else{this.manual_login_mode=true;this.trigger("manual-login-mode")}defer.resolve();break;case"manual-basic-auth":if(requester.length||requester.no_data){requester.trigger("fetch-done")}else{this.manual_base_auth=true;this.trigger("manual-base-auth")}defer.resolve();break;default:console.error("w3n.login_mode checking from status model",w3n.login_mode)}return defer}})}}})();(function(){var cog=w3n.cogs.talentplaybook,cog_name="talentplaybook",tasksAlertSummary;var tooltips={};var templates={mini:_.template("<p>{{title}}</p><p>{{iconFont}}</p>"),medium:w3n.templates.cogs.talentplaybook["talentplaybook-medium.html"],large:w3n.templates.cogs.talentplaybook["talentplaybook-large.html"],loading:app.templates.components["loading-mark"]["loading-mark.html"]};var talentPlaybookLarge,currentDashboard;awf.app.registerCog(cog_name,{test:true,flag:"cogs."+cog_name,setup:function(){this.metrics=app.utils.createMetricTag({group:awf.app.id});if(awf.flags.isActive("cogs.talentplaybook.dashboard.performance.pa")){$.each(w3n.tpConfig.dashboards,function(index,value){var dashAux=w3n.tpConfig.dashboards[index].dashName;if(dashAux==="performance"){w3n.tpConfig.dashboards[index].paActive=true;console.log("**** Checking PA column "+w3n.tpConfig.dashboards[index].paActive)}})}},teardown:function(){if(talentPlaybookLarge instanceof w3n.cogs.talentplaybook.views.Large){talentPlaybookLarge.compositeModel.stopListening();talentPlaybookLarge.compositeModel.destroy();talentPlaybookLarge.remove()}},views:{mini:{flag:"cogs."+cog_name+".mini",label:"Manage Team Topics",icon:"icon-awf-team",render:function($container,parent_friends){w3n.utils.metrics.tagCogEvent("drag","Mini card place","sidebar","Manage Team Topics","drag handle","none")}},medium:{flag:"cogs."+cog_name+".medium",label:"Manage Team Topics",rowspan:2,render:function($container,parent_friends){var self=this;var dashboardArray=w3n.getDashboardArray();var html=Mustache.render(templates.medium,{dashboards:dashboardArray});$container.html(html);$(".talentplaybook-medium .btn-open-dashboard").on("click",function(ev){w3n.currentDashboard=currentDashboard=$(ev.currentTarget).data("dashboard");parent_friends.flipCard()});if(awf.flags.isActive("cogs.talentplaybook.dashboard.new-alert-badge-medium")){w3n.tasksSummary=new w3n.serviceModels.TasksSummary.Collection;w3n.tasksSummary.fetch({cache:false}).done(function(){tasksAlertSummary=w3n.cogs.talentplaybook.tasksSummary=new w3n.serviceModels.TasksAlertSummary({collection:w3n.tasksSummary.toJSON()});w3n.cogs.talentplaybook.tasksSummary.doCount().then(function(){var dashname;w3n.cogs.talentplaybook.MediumCardAlertBadge={};_.forEach(w3n.tasksSummary.toJSON(),function(item){if(item.CATEGORY_ID==="1"){dashname="security";w3n.cogs.talentplaybook.MediumCardAlertBadge[dashname]=new awf.ui.Badge({number:parseInt(tasksAlertSummary.topicCount("security")),parent:$(".talentplaybook-medium").find("[data-dashboard="+dashname+"]").find(".alert-badge-count")});w3n.cogs.talentplaybook.MediumCardAlertBadge[dashname].render();w3n.cogs.talentplaybook.tasksSummary.hasData=true}else if(item.CATEGORY_ID==="0"||item.CATEGORY_ID==="7"){}else{dashname=w3n.taskMap[item.CATEGORY_ID];w3n.cogs.talentplaybook.MediumCardAlertBadge[dashname]=new awf.ui.Badge({number:parseInt(tasksAlertSummary.topicCount(w3n.taskMap[item.CATEGORY_ID])),parent:$(".talentplaybook-medium").find("[data-dashboard="+dashname+"]").find(".alert-badge-count")});w3n.cogs.talentplaybook.MediumCardAlertBadge[dashname].render();w3n.cogs.talentplaybook.tasksSummary.hasData=true}})}.bind(this))}.bind(this)).fail(function(){w3n.cogs.talentplaybook.tasksSummary={};w3n.cogs.talentplaybook.tasksSummary.hasData=false}.bind(this))}}},large:{flag:"cogs."+cog_name+".medium",label:"Manage Team Topics",size:{width:860,height:700},render:function($container,large_methods){var args=large_methods.getArgs();var currentSection;if(args){try{if(_.contains(args,"%7B")){args=args.replace(/%7B/g,"{")}if(_.contains(args,"%7D")){args=args.replace(/%7D/g,"}")}if(_.contains(args,"%22")){args=args.replace(/%22/g,'"')}if(_.contains(args,"%20")){args=args.replace(/%20/g,"")}var parsed_args=JSON.parse(args);if(_.has(parsed_args,"topic")){var arg_topic=parsed_args.topic;if(_.isString(_.findKey(w3n.tpConfig.dashboards,{dashName:arg_topic}))){w3n.currentDashboard=currentDashboard=arg_topic}}if(_.has(parsed_args,"section")){currentSection=parsed_args.section}}catch(e){console.error("Talentplaybook large view: The format of parameters is not correct which coming from Deep Link.")}}if(!currentDashboard){currentDashboard="yourteam"}$container.data("component","talent-playbook-large");var LargeView=awf.flags.isActive("cogs.talentplaybook.dashboard.new")?cog.views.Large2:cog.views.Large;console.log({Large:LargeView===cog.views.Large,Large2:LargeView===cog.views.Large2});talentPlaybookLarge=new LargeView({el:$container,currentUser:{name:awf.user.info.name},currentDashboard:currentDashboard,currentSection:currentSection,tasksAlertsSummary:tasksAlertSummary});if(talentPlaybookLarge.$el!==$container)talentPlaybookLarge.setElement($container);this.metrics.cardEvent("Flip up",cog_name+":"+currentDashboard+":large");if(awf.flags.isActive("cogs.talentplaybook.dashboard.new")){talentPlaybookLarge.render()}else{talentPlaybookLarge.compositeModel.fetch().fail(function(error){console.log("Mgr_Dashboard Failed to Load");console.timeEnd("Mgr_Dashboard");console.error(error);talentPlaybookLarge.renderError(talentPlaybookLarge.compositeModel,error)}).done(function(){console.log("talentPlaybookLarge.compositeModel: ",talentPlaybookLarge.compositeModel);talentPlaybookLarge.render()})}},destroy:function(){if(awf.flags.isActive("cogs.talentplaybook.reset-alert-cache")&&talentPlaybookLarge.cacheNeedsUpdate){talentPlaybookLarge.compositeModel.removeCache()}_.forEach(w3n.cogs.talentplaybook.MediumCardAlertBadge,function(item){item.destroy()});if(awf.flags.isActive("cogs.talentplaybook.dashboard.new-alert-badge-medium")){var tasksSummary=new w3n.serviceModels.TasksSummary.Collection;tasksSummary.fetch({cache:false}).done(function(){w3n.cogs.talentplaybook.tasksSummary=new w3n.serviceModels.TasksAlertSummary({collection:tasksSummary.toJSON()});w3n.cogs.talentplaybook.tasksSummary.doCount().then(function(){var dashname;w3n.cogs.talentplaybook.MediumCardAlertBadge={};_.forEach(tasksSummary.toJSON(),function(item){if(item.CATEGORY_ID==="1"){dashname="security";w3n.cogs.talentplaybook.MediumCardAlertBadge[dashname]=new awf.ui.Badge({number:parseInt(w3n.cogs.talentplaybook.tasksSummary.topicCount("security")),parent:$(".talentplaybook-medium").find("[data-dashboard="+dashname+"]").find(".alert-badge-count")});w3n.cogs.talentplaybook.MediumCardAlertBadge[dashname].render();w3n.cogs.talentplaybook.tasksSummary.hasData=true}else if(item.CATEGORY_ID==="0"||item.CATEGORY_ID==="7"){}else{dashname=w3n.taskMap[item.CATEGORY_ID];w3n.cogs.talentplaybook.MediumCardAlertBadge[dashname]=new awf.ui.Badge({number:parseInt(w3n.cogs.talentplaybook.tasksSummary.topicCount(w3n.taskMap[item.CATEGORY_ID])),parent:$(".talentplaybook-medium").find("[data-dashboard="+dashname+"]").find(".alert-badge-count")});w3n.cogs.talentplaybook.MediumCardAlertBadge[dashname].render();w3n.cogs.talentplaybook.tasksSummary.hasData=true}})}.bind(this))}.bind(this)).fail(function(){w3n.cogs.talentplaybook.tasksSummary={};w3n.cogs.talentplaybook.tasksSummary.hasData=false}.bind(this))}}}}});var additionalColumns=function(dashboard,thisCollection,idField){$.each(thisCollection.models,function(index,value){var columnData=value.attributes;var $currentRow=$("."+columnData[idField]+"-"+dashboard);$.each($currentRow.find(".dataField"),function(){var thisIdField=$(this).attr("id");var thisValue=value.attributes[thisIdField];$(this).prepend(thisValue)})})};var additionalColumnsBCG=function(dashboard,thisCollection,idField){$.each(thisCollection.models,function(index,value){setTimeout(function(){var columnData=value.attributes;var $currentRow=$("."+columnData[idField]+"-"+dashboard);$("#"+columnData[idField]+"-block1").css("display","none");$("#"+columnData[idField]+"-block2").css("display","none");$("#"+columnData[idField]+"-block3").css("display","none");$.each($currentRow.find(".dataField"),function(){var thisIdField=$(this).attr("id");var thisValue=value.attributes[thisIdField];var bcgIsExemptFlag=value.attributes.FIS_EXEMPT;var bcgIsExempt=value.attributes.IS_EXEMPT;var bcgCompletionDateFlag=value.attributes.FBCG_COMPLETION_DATE;var bcgCompletionDate=value.attributes.BCG_COMPLETION_DATE;var bcgCertificateDateFlag=value.attributes.FCERT_DATE;var bcgCertificateDate=value.attributes.CERT_DATE;var bcgCourseCompletionDateFlag=value.attributes.FCOMPL_DATE;var bcgCourseCompletionDate=value.attributes.COMPL_DATE;var bcgCNUM=value.attributes.CNUM;if(thisIdField==="BCG_COMPLETION_DATE"){if(bcgIsExemptFlag.toUpperCase()==="X"||bcgCompletionDateFlag.toUpperCase()==="X"){$("#"+bcgCNUM+"-block1").css("display","block");thisValue=""}else if(bcgIsExempt.toUpperCase()==="Y"){thisValue="EXEMPT";$("#"+bcgCNUM+"-checkmark1").css("display","block")}else if(bcgCompletionDate!==null&&bcgCompletionDate!==""){$("#"+bcgCNUM+"-checkmark1").css("display","block")}else{thisValue=""}}if(thisIdField==="CERT_DATE"){if(bcgIsExemptFlag.toUpperCase()==="X"||bcgCertificateDateFlag.toUpperCase()==="X"){$("#"+bcgCNUM+"-block2").css("display","block");thisValue=""}else if(bcgIsExempt.toUpperCase()==="Y"){thisValue="EXEMPT";$("#"+bcgCNUM+"-checkmark2").css("display","block")}else if(bcgCertificateDate!==null&&bcgCertificateDate!==""){$("#"+bcgCNUM+"-checkmark2").css("display","block")}else{thisValue=""}}if(thisIdField==="COMPL_DATE"){if(bcgIsExemptFlag.toUpperCase()==="X"||bcgCourseCompletionDateFlag.toUpperCase()==="X"){$("#"+bcgCNUM+"-block3").css("display","block");thisValue=""}else if(bcgIsExempt.toUpperCase()==="Y"){thisValue="EXEMPT";$("#"+bcgCNUM+"-checkmark3").css("display","block")}else if(bcgCourseCompletionDate!==null&&bcgCourseCompletionDate!==""){$("#"+bcgCNUM+"-checkmark3").css("display","block")}else{thisValue=""}}$(this).prepend(thisValue)})},500)})}})();(function(){var firstLineTPServices="cogs.talentplaybook.dashboard.first-line-tp-services";w3n.cogs.talentplaybook.views.Large2=app.base.views.BaseView.extend({className:"talentplaybook-large-container",template:w3n.templates.cogs.talentplaybook["talentplaybook-large-new.html"],modelDef:null,uplineManagerModels:[],periodModels:[],currentDashboard:null,headerView:{},tabBarView:null,dashboardtableHeader:null,dashboardView:{},UIAlertBadge:{},hasTpSummary:false,tpAlertsSummary:{},taskAlertsSummary:{},alerts:{},events:{"mouseover a.definition":"showDefinitionTooltip","mouseout a.definition":"hideDefinitionTooltip","mouseover div.showtooltip":"showDefinitionTooltip","mouseout div.showtooltip":"hideDefinitionTooltip","click .tab-dropdown":"switchTabs","click .gridelement":"switchTabs","click .month-year-list-item button":"switchPeriod","click .intro-toggle-btn":"toggleSection"},initialize:function(options){options=options||{};this.id=options.id||awf.user.info.cnum;this.currentUser=options.currentUser||{};this.currentPeriod={value:moment(new Date).startOf("month").format("YYYYMM"),text:moment(new Date).startOf("month").format("MMMM YYYY")};this.currentDashboard=options.currentDashboard;this.dashboardProperties=w3n.tpConfig.dashboards[this.currentDashboard];this.modelDef=this.dashboardProperties.model;app.base.views.BaseView.prototype.initialize.call(this,options);w3n.cogs.talentplaybook.LargeCardAlertBadge={};this.tasksAlertsSummary=options.tasksAlertsSummary;this.tpAlertsSummary=options.tpAlertsSummary||new w3n.serviceModels.AlertSummary({collection:[]});this.is_tpb_alerts_loaded=false;if(options.currentSection){this.once("render-dashboard render-dashboard-fail",function(){var tab=this.$el.find("[data-navid="+options.currentSection+"]");if(tab.length>0){tab.click()}}.bind(this))}},render:function(){var html=Mustache.render(this.template,this.dashboardProperties);this.$el.html(html);this.switchTabs(null,{currentDashboard:this.currentDashboard})},fetchSubTeam:function(e,options){if(e&&$(e.target).hasClass("is-manager")&&this.currentDashboard==="expenses"){return}var id;options=options||{};if(this.$el.find(".manager-list-item button").length){this.$el.find(".manager-list-item button").removeClass("active");$(e.target).parents(".manager-list-item:first button").addClass("active")}if(this.currentDashboard==="expenses"){id=e?$(e.target).data("uid").toString():options.period;if(/^(\d{4})(\d{2})$/.test(id)){this.currentPeriod={value:id,text:moment(id,"YYYYMM").format("MMMM YYYY")}}else{this.currentPeriod={value:moment(new Date).startOf("month").format("YYYYMM"),text:moment(new Date).startOf("month").format("MMMM YYYY")};id=this.currentPeriod.value}}else{id=this.id=options.id?options.id:awf.user.info.cnum;this.currentUser.name=id===awf.user.info.cnum?awf.user.info.name:this.compositeModel.get("fullname")}this.listenToCompositeModel(this.dashboardView.model);this.is_tpb_alerts_loaded=false;this.dashboardView.model.fetch(_.extend({id:id,uncache:true},options)).then(function(){this.compositeModel=this.dashboardView.model;this.dashboardView.render();this.renderHeader();this.trigger("render-dashboard")}.bind(this),function(error){this.compositeModel=this.dashboardView.model;this.dashboardView.renderError({status:"error",msg:error});this.renderHeader();this.trigger("render-dashboard-fail");console.error(error)}.bind(this))},switchTabs:function(e,options){if(this.cacheNeedsUpdate()){this.compositeModel.removeCache();this.dashboardView.cacheNeedsUpdate=false}if(options&&options.currentDashboard){this.currentDashboard=options.currentDashboard}var prevTab=this.currentDashboard;if(e){this.currentDashboard=awf.flags.isActive("cogs.talentplaybook.dashboard.focus-bar")?$(e.target).closest(".gridelement").attr("data-gridelementtarget"):$(e.target).attr("id")}this.dashboardProperties=w3n.tpConfig.dashboards[this.currentDashboard];this.modelDef=this.dashboardProperties.model;this.renderOverview();this.renderTasks(this.currentDashboard);this.renderTeamAtAGlance();this.renderDashboard();this.renderRelatedLinks(this.id);this.renderHelp();this.renderHeader();this.setupTabBar();this.fetchSubTeam(null,{id:this.id});setTimeout(function(){this.checkFeatureFlags()}.bind(this),5e3);var switching=prevTab+" to "+this.currentDashboard;w3n.utils.metrics.tagCogEvent("Switch Topic",switching,"Focus bar","Manager Hub","Manager Hub","none")},getCompositeModel:function(id){var model;if(this.currentDashboard==="expenses"){model=_.find(this.periodModels,function(item){return item.period===id});model=model?model:new this.modelDef({period:id,modelName:this.currentDashboard+id,hasAlerts:true,currentPeriod:{value:id,text:moment(id,"YYYYMM").format("MMMM YYYY")}});this.periodModels.push(model)}else{model=_.find(this.uplineManagerModels,function(item){return item.get("modelName")===this.currentDashboard+id}.bind(this));model=model?model:new this.modelDef({cnum:id,modelName:this.currentDashboard+id,hasAlerts:true});this.uplineManagerModels.push(model)}return model},listenToCompositeModel:function(compositeModel){if(compositeModel){_.forEach(compositeModel.subCollectionsMap,function(col,key){this.listenToOnce(col,"sync:started",function(){if(!this.is_tpb_alerts_loaded){this.setNotification("warn","Dashboard Alerts are loading in the background.","9999")}}.bind(this));this.listenToOnce(col,"sync:merged",function(){if(key==="optionalSummary"||key==="optionalList"){this.dashboardView.render()}else if(key==="alerts"){if(awf.flags.isActive("cogs.talentplaybook.dashboard.new-alert-badge-large")){this.tpAlertsSummary=new w3n.serviceModels.AlertSummary({collection:col.toJSON()});this.tpAlertsSummary.hasTpSummary=true;this.renderHeader()}else{this.renderHeader()}if(!this.is_tpb_alerts_loaded){this.setNotification("success","Dashboard alerts loaded successfully","9999").andDismissIn(3)}this.is_tpb_alerts_loaded=true;this.dashboardView.renderDashItems()}}.bind(this));this.listenToOnce(col,"error:merged",function(){this.setNotification("error","Oops, the Dashboard Alerts are currently not available. Please refresh and try later.","9999").andDismissIn(3)}.bind(this))}.bind(this))}},renderTasks:function(){if(awf.flags.isActive("cogs.talentplaybook.tasks")){if(this.taskView){if(this.taskView.undelegateEvents)this.taskView.undelegateEvents();this.taskView=null}this.taskView=new w3n.cogs.dashboard.views.Tasks({parent:this,el:this.$(".tasks-content")});this.taskView.render(this.currentDashboard)}},renderTeamAtAGlance:function(){if(awf.flags.isActive("cogs.talentplaybook.dashboard.performance.teamAtAGlance")&&_.contains(this.dashboardProperties.modules,"Team at a glance")){var teamView=new w3n.cogs.dashboard.views.TeamAtAGlance({el:this.$(".ataglance-content"),cnum:this.id});teamView.render();this.$el.find("#teamataglance").show()}else{this.$el.find("#teamataglance").hide()}},renderRelatedLinks:function(){var relatedLinksView=new w3n.cogs.dashboard.views.RelatedLinks({currentDashboard:this.currentDashboard});this.$(".relatedLinks-content").unbind();relatedLinksView.setElement(this.$(".relatedLinks-content")).render(this.id)},renderHelp:function(){var helpView=new w3n.cogs.dashboard.views.Help({container:this.$("#help-content"),currentDashboard:this.currentDashboard});this.$(".intro-block").unbind();helpView.setElement(this.$("#help-content")).render()},renderDashboard:function(){if(this.dashboardView){if(this.dashboardView.undelegateEvents)this.dashboardView.undelegateEvents();this.dashboardView=null}this.dashboardProperties=w3n.tpConfig.dashboards[this.currentDashboard];if(this.currentDashboard==="expenses"){this.id=this.currentPeriod.value}else{this.id=awf.user.info.cnum}this.compositeModel=this.getCompositeModel(this.id);var attrs={dashboardProperties:this.dashboardProperties,model:this.compositeModel,currentPeriod:this.currentPeriod,parent:this,el:this.$el.find(".dashboard.table-container")};if(this.currentDashboard!=="expenses"){_.extend(attrs,{components:{managerDrilldown:{holderClass:".manager-drilldown-holder",compositeModel:this.compositeModel,nameID:this.id,currentUser:this.currentUser}}})}var MainView=this.dashboardProperties.mainView||w3n.cogs.dashboard.views.MainBase;var alertsCol=this.compositeModel.subCollectionsMap&&this.compositeModel.subCollectionsMap.alerts?this.compositeModel.subCollectionsMap.alerts.toJSON():[];this.tpAlertsSummary=new w3n.serviceModels.AlertSummary({collection:alertsCol});this.dashboardView=new MainView(attrs);this.dashboardView.listenTo(this,"composite-model-error",this.dashboardView.errorHandler);if(this.currentDashboard!=="expenses"){this.listenTo(this.dashboardView,"switch-manager",this.switchManager.bind(this));this.listenTo(this.dashboardView,"manager-drilldown-synced",function(view){this.uplineManagerModels=[this.getCompositeModel(awf.user.info.cnum)];_.forEach(view.collection.toJSON(),function(model){var compositeModel=new this.modelDef({cnum:model.uid,modelName:this.currentDashboard+model.uid,hasAlerts:true});compositeModel.set("fullname",model.name.first+" "+model.name.last);this.uplineManagerModels.push(compositeModel)}.bind(this))}.bind(this))}if(_.contains(this.dashboardProperties.modules,"Dashboard")){this.$el.find("#dashboard").show()}else{this.$el.find("#dashboard").hide()}},switchManager:function(options){var id=_.isString(options)?options:options.id;var fetch_options=options.options||{};var e=options.event||null;if(this.currentDashboard==="expenses"){id=e?$(e.target).data("uid").toString():options.period;if(/^(\d{4})(\d{2})$/.test(id)){this.currentPeriod={value:id,text:moment(id,"YYYYMM").format("MMMM YYYY")}}else{this.currentPeriod={value:moment(new Date).startOf("month").format("YYYYMM"),text:moment(new Date).startOf("month").format("MMMM YYYY")};id=this.currentPeriod.value}}else{this.id=id;this.currentUser.name=id===awf.user.info.cnum?awf.user.info.name:e&&!_.isEmpty($(e.target).html())?$(e.target).html():this.compositeModel.attributes.fullname}this.dashboardView.model=this.getCompositeModel(id);if(!this.dashboardView.model.get("fullname")){this.dashboardView.model.set("fullname",this.currentUser.name)}this.listenToCompositeModel(this.dashboardView.model);this.is_tpb_alerts_loaded=false;this.dashboardView.model.fetch(_.extend({id:id,uncache:true,timeout:1e4},fetch_options)).then(function(){
this.compositeModel=this.dashboardView.model;this.dashboardView.renderDashItems();this.renderHeader()}.bind(this),function(error){this.compositeModel=this.dashboardView.model;this.dashboardView.renderError({status:"error",msg:error});this.renderHeader()}.bind(this))},renderOverview:function(){var overviewView=new w3n.cogs.dashboard.views.Overview;this.$("#overview").unbind();overviewView.setElement(this.$("#overview .overview-content")).render(this.dashboardProperties)},renderHeader:function(options){this.headerView=new w3n.cogs.dashboard.views.Header({parent:this});this.$("#header").unbind();options=options||{};this.headerView.setElement(this.$("#header")).render(_.extend({},options,{parent:this,dashboardProperties:this.dashboardProperties}))},cacheNeedsUpdate:function(){},toggleSection:function(ev){ev.preventDefault();var section_id=$(ev.target).closest(".tab-section").attr("id");$(ev.target).closest(".intro-block").toggleClass("open");if($(ev.target).attr("aria-expanded")==="false"){$(ev.target).attr("aria-expanded",true)}else{$(ev.target).attr("aria-expanded",false)}$(ev.target).toggleClass("icon-awf-op-plus").toggleClass("icon-awf-op-minus");var action=$(ev.target).closest(".intro-block").hasClass("open")?"open":"close";w3n.utils.metrics.tagCogEvent("click",action,section_id,this.currentDashboard,"Manager Hub","none")},showDefinitionTooltip:function(e){if(awf.flags.isActive("cogs.talentplaybook.example-definition")){this.hover=true;$(".qtip").remove();var target=e.currentTarget;var $task=$(e.currentTarget);var data={displayText:$(e.target).data("definition"),field:"field"};var tooltip=new w3n.components.tooltip({model:new app.base.models.BaseModel(data),target:target,template:w3n.templates.components.tooltip["definition.html"],style:{classes:"definitionTooltip",width:"auto",height:"auto"},position:{my:"top left",at:"bottom right",target:$task}})}},hideDefinitionTooltip:function(e){setTimeout(function(){if(this.hover===false)$(".qtip").remove()}.bind(this),500)},setupTableHeader:function(option){if(awf.flags.isActive("cogs.talentplaybook.dashboard.dashboard-sticky-header")){if(option==="render"){var $targetTable=this.$el.find(".talent-table");var tableHeader=new w3n.components.TableScrollHeader({$stickytableHeaderContainer:this.$(".dashboard-header .stickyTable"),$targetTable:$targetTable,scrollContainer:this.$(".scroll-card")});tableHeader.setElement(this.$(".dashboard-header .stickyTable"));tableHeader.render();this.dashboardtableHeader=tableHeader}else{this.dashboardtableHeader.destroy()}}},setupTabBar:function(){var tabArray=[];_.forEach(this.dashboardProperties.modules,function(item,index){tabArray[index]={name:item,id:_.camelCase(item),$element:this.$el.find("[data-navigation="+_.camelCase(item)+"]")}}.bind(this));var tabBar=new w3n.components.NavigationTabs({tabs:tabArray,scrollContainer:this.$(".scroll-card"),padding:5,$container:this.$(".navigation-Tab")});tabBar.setElement(this.$(".navigation-Tab"));tabBar.render();this.tabBarView=tabBar},mainErrorHandler:function(model,response,options){var errorType;if(model instanceof app.base.collections.BaseCollection||model instanceof app.base.models.BaseModel){errorType=model.getErrorType(model,response,options)}var hasErrorFunction=options.errorOptions&&typeof options.errorOptions.buttonFunction==="function";if(errorType==="ssoError"&&hasErrorFunction){options.errorOptions.buttonFunction=function(){this.fetchSubTeam(null,{id:this.id,period:this.period,skipSSO:true})}}this.renderError(model,response,options)},checkFeatureFlags:function(){if(!awf.flags.isActive("cogs.talentplaybook.tasks")){$(".tasks-section").css("display","none");setTimeout(function(){$('.navtabs[data-navid="Tasks"]').toggle()},100)}if(awf.flags.isActive("cogs.talentplaybook.dashboard.dashboard-sticky-header")){this.setupTableHeader("render")}if(!awf.flags.isActive("cogs.talentplaybook.example-definition")){$("a.definition").css("display","none")}},checkExpenseAlerts:function(data){var hasAlerts=data.alerts>0?true:false;return hasAlerts},setCardAlerts:function(topicCount,boxCount){if(topicCount>0){$("."+this.dashboardProperties.dashName+"-header-badge").removeClass("off").html(topicCount)}if(boxCount>0){$(".totalAlertsCount span").html(boxCount)}},setNotification:function(msgType,msg,zIndex){var $container=this.$el.parents(".js-card").find(".js-card-message");$container.css("z-index",zIndex);return new awf.util.postMessage($container,msgType,msg,false)},switchPeriod:function(e){this.$el.find(".dashboard.table-container").append(app.templates.components["loading-mark"]["loading-mark.html"]);this.switchManager({event:e})}})})();var dashboard_overview_text={dashboards:{"cog:talentplaybook:dashboard:yourteam":{"overview-text":"Manage your team better, with these tasks and dashboard summary of key employee data about your organization. All dashboards default to your Global / Functional team - but you can switch it to see In-Country / HR reports, or All employees from both groups."},"cog:talentplaybook:dashboard:assets":{"overview-text":"Manage your team's assets & devices, with these links to policies, procedures, and tools."},"cog:talentplaybook:dashboard:awards":{"overview-text":"Manage your team better by awarding and recognizing their contribution."},"cog:talentplaybook:dashboard:benefits":{"overview-text":"Manage your team's benefits, health & safety, with these links to policies, procedures, and tools."},"cog:talentplaybook:dashboard:compensation":{"overview-text":"Manage your team's compensation, with this dashboard summary of key employee data."},"cog:talentplaybook:dashboard:dates":{"overview-text":"Manage your team's dates, with this dashboard summary of key employee dates like Birthday and Service Anniversary."},"cog:talentplaybook:dashboard:diversity":{"overview-text":"Manage your team's diversity & community, with these links to policies, procedures, and tools."},"cog:talentplaybook:dashboard:emergency":{"overview-text":"Manage your team during an emergency, with this dashboard summary of key employee contact information to be able to reach your team members and ensure they are safe."},"cog:talentplaybook:dashboard:expenses":{"overview-text":"Manage your team's expenses, with this dashboard summary of expense reimbursements (WWER), Commodity Billing (CB), and Low Dollar Value (LDV) expenses."},"cog:talentplaybook:dashboard:expertise":{"overview-text":"Manage your team's expertise & learning, with this dashboard summary of key employee data to help ensure that your team members are advancing their career at IBM."},"cog:talentplaybook:dashboard:global":{"overview-text":"Manage your team's global mobility (international assignments and immigration), with these links to policies, procedures, and tools."},"cog:talentplaybook:dashboard:jobs":{"overview-text":"Manage your team's jobs and positions - including On-boarding and Off-boarding (Separations), with these links to policies, procedures, and tools."},"cog:talentplaybook:dashboard:leadership":{"overview-text":"Manage your team's leadership potential, with this dashboard summary of key employee data."},"cog:talentplaybook:dashboard:performance":{"overview-text":"Manage your team's performance, with this dashboard summary of key employee Checkpoint assessment data."},"cog:talentplaybook:dashboard:security":{"overview-text":"Manage your team's security, with these tasks and links to policies, procedures, and tools.","additional-copy":"<span class='bold'>Note:</span> OneTEAM security tasks are not currently available on Manager Hub. Please go to <a href='https://w3-03.ibm.com/finance/access/home.wss' target='_BLANK'>OneTEAM</a> regularly to check your tasks.<br><br>"},"cog:talentplaybook:dashboard:time":{"overview-text":"Manage your team's time here and time away, with these links to policies, procedures, and tools."},"cog:talentplaybook:dashboard:travel":{"overview-text":"Manage your team's travel, with these links to policies, procedures, and tools."},"cog:talentplaybook:dashboard:bcg":{"overview-text":"Manage your team's Business Conduct Guideline status, with this dashboard summary of employee BCG completion."}}};(function(){w3n.overviewTextHighlight="Click <span style='font-size: 10px' class='icon-awf-op-plus'></span> to expand an employee's section and see more details. ";w3n.tpConfig={dashboards:{yourteam:{dashName:"yourteam",isyourteam:true,modules:["Overview","Tasks","Dashboard","Related Links","Help"],hasDashboardTable:true,dashTitle:"Your Team",categories:["5","6"],categoryIcon:"icon-awf-team",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:yourteam"]["overview-text"],overviewTextHighlight:w3n.overviewTextHighlight,dashTemplate:w3n.templates.cogs.talentplaybook["table-yourteam.html"],dashTemplate2:"dash-yourteam.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:true,itemTemplate:"dash-item-yourteam.html",relatedPrefix:"your_team_",model:w3n.cogs.talentplaybook.models.YourTeam,mainView:w3n.cogs.dashboard.views.Main,itemView:w3n.cogs.dashboard.views.Item},assets:{dashName:"assets",isassets:true,modules:["Overview","Tasks","Related Links","Help"],hasDashboardTable:false,dashTitle:"Assets & Devices",categories:["-1"],categoryIcon:"icon-awf-devices-thin",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:assets"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-assets.html"],dashTemplate2:"dash-assets.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-assets.html",relatedPrefix:"assets_devices_",model:w3n.cogs.talentplaybook.models.YourTeam},awards:{dashName:"awards",isawards:true,modules:["Overview","Tasks","Related Links","Help"],hasDashboardTable:false,dashTitle:"Awards & Recognition",categories:["-1"],categoryIcon:"icon-youribm-award-ribbons",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:awards"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-awards.html"],dashTemplate2:"dash-awards.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-awards.html",relatedPrefix:"awards_recognition_",model:w3n.cogs.talentplaybook.models.YourTeam},bcg:{dashName:"bcg",isbcg:true,modules:["Overview","Tasks","Dashboard","Related Links","Help"],hasDashboardTable:true,dashTitle:"BCG + Values",categories:["-1"],categoryIcon:"icon-awf-w3-certificate-thin",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:bcg"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-bcg.html"],dashTemplate2:"dash-bcg.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-bcg.html",relatedPrefix:"values139_bcg_",model:w3n.cogs.talentplaybook.models.BCG},benefits:{dashName:"benefits",isbenefits:true,modules:["Overview","Tasks","Related Links","Help"],hasDashboardTable:false,dashTitle:"Benefits, Health & Safety",categories:["-1"],categoryIcon:"icon-youribm-box-closed-glow",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:benefits"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-benefits.html"],dashTemplate2:"dash-benefits.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-benefits.html",relatedPrefix:"benefits_health_safety_",model:w3n.cogs.talentplaybook.models.YourTeam},compensation:{dashName:"compensation",iscompensation:true,modules:["Overview","Tasks","Dashboard","Related Links","Help"],hasDashboardTable:true,dashTitle:"Compensation",categories:["-1"],categoryIcon:"icon-youribm-compensation-circle",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:compensation"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-compensation.html"],dashTemplate2:"dash-compensation.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-compensation.html",relatedPrefix:"compensation_",model:w3n.cogs.talentplaybook.models.Compensation},dates:{dashName:"dates",isdates:true,modules:["Overview","Tasks","Dashboard","Related Links","Help"],hasDashboardTable:true,dashTitle:"Dates",categories:["-1"],categoryIcon:"icon-youribm-calendar-check",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:dates"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-dates.html"],dashTemplate2:"dash-dates.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-dates.html",relatedPrefix:"dates_",model:w3n.cogs.talentplaybook.models.Dates},diversity:{dashName:"diversity",isdiversity:true,modules:["Overview","Tasks","Related Links","Help"],hasDashboardTable:false,dashTitle:"Diversity & Community",categories:["-1"],categoryIcon:"icon-youribm-diversity",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:diversity"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-diversity.html"],dashTemplate2:"dash-diversity.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-diversity.html",relatedPrefix:"diversity_community_",model:w3n.cogs.talentplaybook.models.YourTeam},emergency:{dashName:"emergency",isemergency:true,modules:["Overview","Tasks","Dashboard","Related Links","Help"],hasDashboardTable:true,dashTitle:"Emergency",categories:["-1"],categoryIcon:"icon-youribm-emergency",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:emergency"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-emergency.html"],dashTemplate2:"dash-emergency.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-emergency.html",relatedPrefix:"emergency_",model:w3n.cogs.talentplaybook.models.Emergency},expenses:{dashName:"expenses",isexpenses:true,modules:["Overview","Tasks","Dashboard","Related Links","Help"],hasDashboardTable:true,dashTitle:"Expenses",categories:["-1"],categoryIcon:"icon-youribm-expenses",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:expenses"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-expenses.html"],dashTemplate2:"dash-expenses.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-expenses.html",relatedPrefix:"expenses_",model:w3n.cogs.talentplaybook.models.Expenses,mainView:w3n.cogs.dashboard.views.MainExpenses,itemView:w3n.cogs.dashboard.views.ExpenseItem},expertise:{dashName:"expertise",isexpertise:true,modules:["Overview","Tasks","Dashboard","Related Links","Help"],hasDashboardTable:true,dashTitle:"Expertise & Learning",categories:["4","7","8","9"],columns:["think40","piiLevel","mppLevel","lk"],categoryIcon:"icon-youribm-graduation-cap",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:expertise"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-expertise.html"],dashTemplate2:"dash-expertise.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:true,itemTemplate:"dash-item-expertise.html",relatedPrefix:"expertise_learning_",model:w3n.cogs.talentplaybook.models.Expertise},global:{dashName:"global",isglobal:true,modules:["Overview","Tasks","Related Links","Help"],hasDashboardTable:false,dashTitle:"Global Mobility",categories:["-1"],categoryIcon:"icon-awf-international-thin",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:global"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-global.html"],dashTemplate2:"dash-global.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-global.html",relatedPrefix:"global_mobility_",model:w3n.cogs.talentplaybook.models.YourTeam},jobs:{dashName:"jobs",isjobs:true,modules:["Overview","Tasks","Related Links","Help"],hasDashboardTable:false,dashTitle:"Jobs & On/Off Boarding",categories:["-1"],categoryIcon:"icon-youribm-avatar-briefcase",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:jobs"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-jobs.html"],dashTemplate2:"dash-jobs.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-jobs.html",relatedPrefix:"jobsonoffboarding_",model:w3n.cogs.talentplaybook.models.YourTeam},leadership:{dashName:"leadership",isleadership:true,modules:["Overview","Tasks","Dashboard","Related Links","Help"],hasDashboardTable:true,dashTitle:"Leadership",categories:["-1"],categoryIcon:"icon-youribm-avatar-star",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:leadership"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-leadership.html"],dashTemplate2:"dash-leadership.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-leadership.html",relatedPrefix:"leadership_",model:w3n.cogs.talentplaybook.models.Leadership},performance:{dashName:"performance",isperformance:true,modules:["Overview","Tasks","Team at a glance","Dashboard","Related Links","Help"],hasDashboardTable:true,enableCheckpoint:true,dashTitle:"Performance",categories:["2","3"],categoryIcon:"icon-youribm-chart-bar",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:performance"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-performance.html"],dashTemplate2:"dash-performance.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:true,paActive:false,itemTemplate:"dash-item-performance.html",relatedPrefix:"performance_",model:w3n.cogs.talentplaybook.models.PerformanceModel},security:{dashName:"security",issecurity:true,modules:["Overview","Tasks","Related Links","Help"],hasDashboardTable:false,dashTitle:"Security & Passwords",categories:["-1"],categoryIcon:"icon-awf-lock-key-thin",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:security"]["overview-text"],additionalCopy:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:security"]["additional-copy"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-security.html"],dashTemplate2:"dash-security.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-security.html",relatedPrefix:"security_passwords_",model:w3n.cogs.talentplaybook.models.YourTeam},time:{dashName:"time",istime:true,modules:["Overview","Tasks","Related Links","Help"],hasDashboardTable:false,dashTitle:"Time Here & Away",categories:["-1"],categoryIcon:"icon-youribm-clock-inbox",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:time"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-time.html"],dashTemplate2:"dash-time.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-time.html",relatedPrefix:"time_inout_",model:w3n.cogs.talentplaybook.models.YourTeam},travel:{dashName:"travel",istravel:true,modules:["Overview","Tasks","Related Links","Help"],hasDashboardTable:false,dashTitle:"Travel",categories:["-1"],categoryIcon:"icon-youribm-airplane",overviewText:dashboard_overview_text.dashboards["cog:talentplaybook:dashboard:travel"]["overview-text"],overviewTextHighlight:"",dashTemplate:w3n.templates.cogs.talentplaybook["table-travel.html"],dashTemplate2:"dash-travel.html",helpURL:"https://w3-connections.ibm.com/communities/service/html/communityview?communityUuid=fc7182e8-7f09-4dcc-8609-88dad64cc0ff",hasAlerts:false,itemTemplate:"dash-item-travel.html",relatedPrefix:"travel_",model:w3n.cogs.talentplaybook.models.YourTeam}}};w3n.actionTypes={link:"L",rest:"R",dashboard:"D",notification:"N",iframe:"I"};w3n.taskTypes={notification:"N",alert:"A",task:"T"};w3n.taskMap={0:"email_only",1:"security",2:"awards",3:"bcg",4:"leadership",5:"compensation",6:"performance",8:"expenses",9:"yourteam",10:"expertise",11:"learning",12:"benefits",13:"assets",14:"dates",15:"diversity",16:"emergency",17:"global",18:"jobs",19:"time",20:"travel"};w3n.taskIdMap={email_only:0,security:1,awards:2,bcg:3,leadership:4,compensation:5,performance:6,expenses:8,yourteam:9,expertise:10,learning:11,benefits:12,assets:13,dates:14,diversity:15,emergency:16,global:17,jobs:18,time:19,travel:20};w3n.operations={put:"U",get:"G",post:"O",delete:"D"}})();(function(){var templates={miniIcon:"icon-awf-calendar",mini:_.template("<p>{{label}}</p><p>{{iconFont}}</p>")};awf.app.registerCog("task-calendar-responsive",{test:true,flag:"cogs.task-calendar-responsive || squads.hubs",setup:function(){this.adapters={};this.experienceShortName=awf.app.experience.id==="manager-hub"?"mgr":"ibmer";this.views={}},views:{mini:{flag:"cogs.task-calendar-responsive.mini",label:"Task Timeline",icon:"icon-youribm-calendar-task",render:function($container,helpers){w3n.utils.metrics.tagCogEvent("drag","Mini card place","sidebar","Task Calendar","drag handle","none")}},medium:{flag:"cogs.task-calendar-responsive.medium",label:"Task Timeline",rowspan:2,render:function($container,helpers){$container.attr("id","ttcal-medium");var startDate=moment().subtract(1,"days").startOf("day").toDate();var endDate=moment().add(5,"days").startOf("day").toDate();var model=this.model?this.model:this.model=new w3n.serviceModels.taskCalendarResponsive(null,{id:awf.user.info.cnum,experience:this.experienceShortName});var adapter=this.adapters.medium?this.adapters.medium:this.adapters.medium=new w3n.cogs.taskCalendarResponsive.adapters.TaskCategories(null,{unit:"percent",currentOnly:true,calendarStartDate:startDate,calendarEndDate:endDate,model:model});var calendar=this.views.medCalendar=new w3n.components.calendar.CurrentWeek({el:$container,startDate:startDate,endDate:endDate,model:new app.base.models.BaseModel({name:"Medium Calendar Model"}),dataModel:adapter});calendar.render();var view=this.views.medium=new w3n.cogs.taskCalendarResponsive.views.medium.TaskCategories({el:$container,model:adapter,calendar:calendar});if(view.$el!==$container)view.setElement($container);view.on("medium-task-click",function(e){this.views.currentTask=$(e.currentTarget).children().first().data("subtask").toString();helpers.flipCard()}.bind(this));calendar.listenTo(model,"fetch",function(){calendar.setLoader()});calendar.listenTo(model,"error",calendar.renderError);model.fetch()},destroy:function(){this.views.medium.off("medium-task-click")}},large:{flag:"cogs.task-calendar-responsive.large",label:"Task Timeline",size:{width:738,height:682},render:function($container,helpers){this.trigger("large-render");$container.attr("id","ttcal-large-responsive");var nextFriday=w3n.utils.date.nextDay((new Date).setHours(0,0,0,0),5);var startDate=moment(nextFriday).subtract(w3n.utils.calendarComponent.DAYSBEFORETODAY,"days").startOf("day").toDate();var endDate=moment(startDate).add(w3n.utils.calendarComponent.DAYSTOSCROLL,"days").startOf("day").toDate();var model=this.model?this.model:this.model=new w3n.serviceModels.taskCalendarResponsive(null,{id:awf.user.info.cnum,experience:this.experienceShortName});var adapter=this.adapters.large?this.adapters.large:this.adapters.large=new w3n.cogs.taskCalendarResponsive.adapters.TaskCategories(null,{unit:"pixel",currentOnly:false,calendarStartDate:startDate,calendarEndDate:endDate,model:model,cog:this});var calendar=this.views.largeCalendar?this.views.largeCalendar.setElement($container):this.views.largeCalendar=new w3n.components.calendar.Weekly({el:$container,startDate:startDate,endDate:endDate,model:new app.base.models.BaseModel({name:"Large Calendar Model"}),dataModel:adapter});calendar.today();var view=this.views.large=new w3n.cogs.taskCalendarResponsive.views.large.TaskCategoriesLarge({el:$container,model:adapter,calendar:calendar,allowDetails:true,helpers:helpers,currentTarget:this.views.currentTask});calendar.listenTo(model,"fetch",function(){calendar.setLoader()});calendar.listenTo(model,"error",calendar.renderError);model.fetch();console.warn("MIGRATION TODO: move this code to the view?")},destroy:function(){this.views.large.remove();this.views.currentTask=null}}}})})();(function(){var cog_name="team-members",label="(N)Manager Team Members",templates={medium:w3n.templates.cogs[cog_name]["medium.html"],large:w3n.templates.cogs[cog_name]["large.html"]};awf.app.registerCog(cog_name,{test:true,flag:"squads.hubs || cogs.team-members",setup:function(){this.metrics=app.utils.createMetricTag({group:awf.app.id})},views:{mini:{flag:"cogs."+cog_name+".mini",label:label,icon:"icon-awf-avatar-circle",render:function($container,mini_methods){}},medium:{flag:"cogs."+cog_name+".medium",label:label,rowspan:2,render:function($container,medium_methods){$container.append(templates.medium)},destroy:function(){if(this.medium_view){this.medium_view.remove();delete this.medium_view}}},large:{flag:"cogs."+cog_name+".large",label:label,render:function($container,large_methods){this.metrics.cardEvent("flip-up",cog_name+":large");$container.append(templates.large)},destroy:function(){if(this.large_view){this.large_view.remove();delete this.large_view}}}}})})();(function(){w3n.adapters.MgrhubProfile={};w3n.adapters.MgrhubProfile.ibm=function(response,options){var fullNameParse=response.TNAMFULL;var lastName=fullNameParse.substring(0,fullNameParse.indexOf(","));var firstName=fullNameParse.substring(fullNameParse.indexOf(",")+2,fullNameParse.length);var globalteam_var,incountryteam_var;if(response.TLDRTYPE==="Global"||response.TLDRTYPE==="Both"){globalteam_var=true}else{globalteam_var=false}if(response.TLDRTYPE==="In-Country"||response.TLDRTYPE==="InCountry"||response.TLDRTYPE==="Both"){incountryteam_var=true}else{incountryteam_var=false}var sortby=function(field,reverse){var key=function(x){return x[field]};reverse=!reverse?1:-1;return function(a,b){return a=key(a),b=key(b),reverse*((a>b)-(b>a))}};var responseYear1=0;var responseYear2=0;var responseYear3=0;if(response.PBC_APPROVAL_DATE){responseYear1=parseInt(response.PBC_APPROVAL_DATE.substring(0,4))}if(response.DPBCADAT_2){responseYear2=parseInt(response.DPBCADAT_2.substring(0,4))}if(response.DPBCADAT_3){responseYear3=parseInt(response.DPBCADAT_3.substring(0,4))}var currentTime=new Date;var currYear=currentTime.getFullYear();var pbcs=[{approvalDate:response.PBC_APPROVAL_DATE,approvalYear:responseYear1,pbcText:response.PBC},{approvalDate:response.DPBCADAT_2,approvalYear:responseYear2,pbcText:response.PREVIOUS_PBC},{approvalDate:response.DPBCADAT_3,approvalYear:responseYear3,pbcText:response.NEXT_PREVIOUS_PBC}];var pbcsSorted=pbcs.sort(sortby("approvalDate",true));var pbcByRecent=[{approvalDate:"",pbcText:""},{approvalDate:"",pbcText:""},{approvalDate:"",pbcText:""}];var prevYear=0;for(var i=0;i<pbcsSorted.length;i++){var currApprovalYear=pbcsSorted[i].approvalYear;if(currApprovalYear===prevYear){}else if(currApprovalYear===currYear-3){pbcByRecent[2]=pbcsSorted[i]}else if(currApprovalYear===currYear-2){pbcByRecent[1]=pbcsSorted[i]}else if(currApprovalYear===currYear-1){pbcByRecent[0]=pbcsSorted[i]}prevYear=currApprovalYear}if(response.FEMPL2!==""){response.TNAMFULL='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FPOSITION!==""){response.TPOSITION='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FSTATUS!==""){response.CACTIVE='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FEMPTYPE!==""){response.TEMPLTYP='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FBAND!==""){response.SALBIAW='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FTINBND!==""){response.TIMEINBND='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FDEPT!==""){response.RDEPT='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}var pmrPercentAux;if(response.FPMR!==""){response.PMR='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';pmrPercentAux=response.PMR}else{pmrPercentAux=response.PMR+"%"}var appAnnualSalaryCurrencyAux;if(response.FSALANU!==""){response.ASALANU='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';
appAnnualSalaryCurrencyAux=response.ASALANU}else{appAnnualSalaryCurrencyAux=response.ASALANU+" "+response.CSALCURR}var lastSalaryChangeAmountCurrencyAux;if(response.FSALCHGA!==""){response.ASALCHGA='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>';lastSalaryChangeAmountCurrencyAux=response.ASALCHGA}else{lastSalaryChangeAmountCurrencyAux=response.ASALCHGA+" "+response.CSALCURR}if(response.FSALDTE!==""){response.DSALCHG='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FBONUSS!==""){response.ABONUS='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FAWD3YR!==""){response.TAWD3YR='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FEQPOTES!==""){response.CEQTYPOT='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FFBTLRES!==""){response.FBTLRES='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FSERVDUR!==""){response.SERVICEDUR='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}if(response.FEXCSTAT!==""){response.EXECUTIVE_STATUS='<a href="https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W8c7ae18eaee6_4784_bfad_18f85401d811/page/Manager Hub - Blocked Data" target="_blank" title="Data is not available or restricted. Click to learn more." class="blocked ibm-external-link"><i class="icon icon-awf-slash-circle"></i></a>'}var btlTalent2016B10Value=response.EXECUTIVE_STATUS;var btlTalent2014B9Value="";var talentValue=response.FBTLRES;if(talentValue===null)talentValue="";if(talentValue!==""){var talentUpper=talentValue.toUpperCase();if(talentUpper==="N"){btlTalent2014B9Value="No"}else if(talentUpper=="Y"){btlTalent2014B9Value="Yes"}else{btlTalent2014B9Value=talentValue}}var sRefDate=response.DSERRFIW.substring(0,4)+"-"+response.DSERRFIW.substring(4,6)+"-"+response.DSERRFIW.substring(6);return{id:response.CNUM,uid:response.CNUM,fullname:w3n.getParsedName(response.TNAMFULL),position:response.TPOSITION,status:response.CACTIVE,employeeType:response.TEMPLTYP,band:response.SALBIAW,timeInBand:response.TIMEINBND,country:response.CCOUNTRY,dept:response.RDEPT,globalteam:globalteam_var,incountryteam:incountryteam_var,pbcYear1:pbcByRecent[0].pbcText,pbcYear2:pbcByRecent[1].pbcText,pbcYear3:pbcByRecent[2].pbcText,initials:firstName.trim()[0].toUpperCase()+lastName.trim()[0].toUpperCase(),appAnnualSalary:response.ASALANU,appAnnualSalaryCurrency:appAnnualSalaryCurrencyAux,lastSalaryChangeAmount:response.ASALCHGA,lastSalaryChangeAmountCurrency:lastSalaryChangeAmountCurrencyAux,lastSalaryChangeDate:response.DSALCHG,pmr:response.PMR,pmrPercent:pmrPercentAux,bonusPay:response.ABONUS,awards:response.TAWD3YR,holdingPower:response.CEQTYPOT,btlTalent2014B9:btlTalent2014B9Value,btlTalent2016B10:btlTalent2016B10Value,serviceLength:response.SERVICEDUR,currency:response.CSALCURR,dateOfHire:response.DHIREEMP,serviceReference:sRefDate,dateOfBirth:response.DBIRTH_MMDD.replace("/","-")}}})();(function(){var cog=w3n.cogs["team-profiles"],cog_name="team-profiles";var tooltips={};var templates={mini:_.template("<p>{{title}}</p><p>{{iconFont}}</p>"),medium:w3n.templates.cogs["team-profiles"]["team-profiles-medium.html"],large:w3n.templates.cogs["team-profiles"]["team-profiles-large.html"],loading:app.templates.components["loading-mark"]["loading-mark.html"]};var mgrhubPersonCollection,mgrhubPersonLarge,mgrhubPersonMedium;awf.app.registerCog("team-profiles",{test:true,flag:"cogs."+cog_name,setup:function(){this.metrics=app.utils.createMetricTag({group:awf.app.id});var service=app.content.cards["team-profiles"];if(service){mgrhubPersonCollection=new app.base.collections.CompositeCollection(null,{model:w3n.cogs["team-profiles"].DashboardListModel,initialCollection:w3n.serviceModels.MgrhubProfileDashboard.Collection,adapter:w3n.adapters.MgrhubProfile.ibm});mgrhubPersonLarge=new cog.views.Large({collection:mgrhubPersonCollection});mgrhubPersonMedium=new cog.views.Medium({collection:mgrhubPersonCollection})}},teardown:function(){if(mgrhubPersonCollection instanceof app.base.collections.CompositeCollection){if(typeof mgrhubPersonCollection.stopListening==="function")mgrhubPersonCollection.stopListening();if(typeof mgrhubPersonCollection.destroy==="function")mgrhubPersonCollection.destroy()}if(mgrhubPersonMedium instanceof cog.views.Medium)mgrhubPersonMedium.remove();if(mgrhubPersonLarge instanceof cog.views.Large)mgrhubPersonLarge.remove()},views:{mini:{flag:"cogs."+cog_name+".medium",label:"Manage Team Members",icon:"icon-awf-avatar-circle-bold",render:function($container,parentFriends){w3n.utils.metrics.tagCogEvent("drag","Mini card place","sidebar","Manage Team Profiles","drag handle","none")}},medium:{flag:"cogs."+cog_name+".medium",label:"Manage Team Members",rowspan:2,render:function($container,parent_friends){$container.html(templates.loading);if(mgrhubPersonMedium.$el!==$container)mgrhubPersonMedium.setElement($container);mgrhubPersonCollection.fetch();mgrhubPersonMedium.off();mgrhubPersonMedium.on("team-profiles-flip",function(uid){cog.currentProfileTab=uid+"-tab";parent_friends.flipCard()})}},large:{flag:"cogs."+cog_name+".large",label:"Manage Team Members",size:{width:860,height:700},render:function($container,parentFriends){$container.data("component","team-profiles-large");$container.html(templates.loading);if(mgrhubPersonLarge.$el!==$container)mgrhubPersonLarge.setElement($container);this.metrics.cardEvent("Flip up",cog_name+":large");setTimeout(function(){console.time("LARGE_mgrhubPersonCollection_Dashboard");mgrhubPersonCollection.fetch({uncache:true}).fail(function(){console.timeEnd("LARGE_mgrhubPersonCollection_Dashboard")}).done(function(){console.timeEnd("LARGE_mgrhubPersonCollection_Dashboard")})},200)},destroy:function(){if(awf.flags.isActive("cogs.team-profiles.reset-alert-cache")){mgrhubPersonCollection.fetch({cache:false,hoardCache:false}).fail(function(){}).then(function(){})}}}}})})();var dashboard_overview_text={dashboards:{"cog:talentplaybook:dashboard:yourteam":{"overview-text":"Manage your team better, with this dashboard summary of key employee data about your organization. Â All dashboards default to you Global / Functional (GET) team - but you can switch it to see In-Country / HR reports, or All employees from both groups."},"cog:talentplaybook:dashboard:bcg":{"overview-text":"Manage your team's Business Conduct Guideline status, with this dashboard summary of key employee BCG completion."},"cog:talentplaybook:dashboard:compensation":{"overview-text":"Manage your team's compensation, with this dashboard summary of key employee data."},"cog:talentplaybook:dashboard:dates":{"overview-text":"Manage your team's dates, with this dashboard summary of key employee dates."},"cog:talentplaybook:dashboard:emergency":{"overview-text":"Manage your team during an emergency, with this dashboard summary of key employee contact information to be able to reach your team members and ensure they are safe."},"cog:talentplaybook:dashboard:expertise":{"overview-text":"Manage your team's expertise & learning, with this dashboard summary of key employee data to help ensure that your team members are advancing their career at IBM."},"cog:talentplaybook:dashboard:leadership":{"overview-text":"Manage your team's leadership potential, with this dashboard summary of key employee data."},"cog:talentplaybook:dashboard:performance":{"overview-text":"Manage your team's performance, with this dashboard summary of key employee data about their assessments. Â PBC information will be replaced with Checkpoint and ACE App information over time."},"cog:talentplaybook:dashboard:security":{"overview-text":"PLACEHOLDER."},"cog:talentplaybook:dashboard:benefits":{"overview-text":"[PLACEHOLDER]Benefits, health & security overview text here."},"cog:talentplaybook:dashboard:jobs":{"overview-text":"[PLACEHOLDER]Jobs & On/Off Boarding overview-text"},"cog:talentplaybook:dashboard:travel":{"overview-text":"[PLACEHOLDER]Travel overview text here."},"cog:talentplaybook:dashboard:assets":{"overview-text":"[PLACEHOLDER]Assets & Devices overview text here."},"cog:talentplaybook:dashboard:awards":{"overview-text":"[PLACEHOLDER]Awards & Recognition overview text here."},"cog:talentplaybook:dashboard:expenses":{"overview-text":"[PLACEHOLDER]Expenses overview text here.."},"cog:talentplaybook:dashboard:time":{"overview-text":"[PLACEHOLDER]Time Here & Away overview text here."},"cog:talentplaybook:dashboard:global":{"overview-text":"[PLACEHOLDER]Global Mobility overview text here."},"cog:talentplaybook:dashboard:diversity":{"overview-text":"[PLACEHOLDER]Diversity & Community overview text here."}}};(function(){w3n.overviewTextHighlight="<span class='bold'>Click <span style='font-size: 10px' class='icon-awf-op-plus'></span> to expand an employee's section and see more details. </span>";w3n.mgrhubPersonConfig={dashboards:{personal:{dashName:"personalinfo",ispersonalinfo:true,dashTitle:"Personal Info",categories:["-1"],categoryIcon:"icon-awf-avatar-circle-bold",overviewText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam eleifend id velit in convallis. Quisque mollis felis a mi ultrices, sed congue ante fermentum. Donec malesuada nec felis et porttitor. Aenean eu ante nulla. ",overviewTextHighlight:w3n.overviewTextHighlight,dashTemplate:w3n.templates.cogs["team-profiles"]["table-personalinfo.html"],helpURL:"#",hasAlerts:false}}}})();(function(){var loading=app.templates.components["loading-mark"]["loading-mark.html"];awf.app.registerCog("team",{test:true,flag:"cogs.team",setup:function(){this.model=new w3n.serviceModels.up.TeamInfo({id:awf.user.data.odw_info.User.Cnum});this.cards={large:createView.call(this,"large"),medium:createView.call(this,"medium")};this.currentTab=new Backbone.Model({tab:"functional"});this.toggles={peers:true,leadership:true,reports:false};syncTabs.call(this);function createView(viewType){return new w3n.cogs.team.views.Team({model:this.model,cog:this,viewType:viewType})}},views:{mini:{flag:"cogs.team.mini",label:"Team",icon:"icon-awf-team",render:function($container,helpers){w3n.utils.metrics.tagCogEvent("drag","Mini card place","sidebar","Team card","drag handle","none")}},medium:{flag:"cogs.team.medium",label:"Team",render:function($container,helpers){$container.attr("id","team-medium");this.cards.medium.setElement($container);this.model.fetch().then(function(){sharedFetch.call(this,this.cards.medium,helpers)}.bind(this))}},large:{flag:"cogs.team.large",label:"Team",size:{width:724,height:700},render:function($container,helpers){$container.attr("id","team-large");this.cards.large.setElement($container);this.model.fetch().then(function(){sharedFetch.call(this,this.cards.large)}.bind(this))}}}});function sharedFetch(view,helpers){var self=this;var isManager=awf.app.experience.id==="manager-hub"||awf.app.experience.id==="manager-hub-protean";var isLargeCard=view.viewType==="large";var functionalModel=new w3n.cogs.team.models.SubTeam(this.model.get("doc").content.functional);var incountryModel=new w3n.cogs.team.models.SubTeam(this.model.get("doc").content.incountry);if(isLargeCard){getTeamStatus.call(this)}var subView=new w3n.cogs.team.views.SubTeam({isManager:isManager,isLargeCard:isLargeCard,model:new Backbone.Model({}),models:{functional:functionalModel,incountry:incountryModel},tabView:view.tabComponent,helpers:helpers,cog:view.cog});view.tabComponent.tabs[0].view=subView;view.tabComponent.tabs[1].view=subView;renderDefaultTab.call(self)}function renderDefaultTab(){var self=this;var views=[self.cards.large,self.cards.medium];views.forEach(function(view){view.tabComponent.selectTab(self.currentTab.get("tab"))})}function syncTabs(){var self=this;var views=[self.cards.large,self.cards.medium];views.forEach(function(view){view.listenTo(view.tabComponent,"tabChange",function(key){self.currentTab.set({tab:key})});view.listenTo(self.currentTab,"change",function(){view.tabComponent.selectTab(self.currentTab.get("tab"))})})}function getTeamStatus(teamInfoModel){var data=this.model.get("doc").content;var people=_.union(data.functional.reports,data.functional.leadership,data.functional.peers,data.incountry.reports,data.incountry.leadership,data.incountry.peers);people=_.uniq(people,false,"preferredIdentity");var emails=_.map(people,"preferredIdentity").join("|");var teamStatus=_.isEmpty(w3n.serviceModels.sametime.Status.cached)?new w3n.serviceModels.sametime.Status({emails:emails}):w3n.serviceModels.sametime.Status.cached;teamStatus.fetch()}})();(function(){var cogName="corporate-strategy";var thinkAcademyCollection=app.base.collections.CompositeCollection(null,{model:w3n.serviceModels.ThinkAcademy});var activeSlide=new app.base.models.BaseModel({index:0});var templates={slideTemplate:w3n.templates.cogs["think-academy"]["item.html"],large:w3n.templates.cogs["think-academy"]["large.html"],viewMore:w3n.templates.components["view-more-flip"]["view-more-flip-backbone.html"]};var taParentFriends;var taCarousel=w3n.base.components.carousel.extend({events:{"click .cta-button button":"flipUp"},flipUp:function(){taParentFriends.flipCard();metrics.cardEvent("click","button","Medium card body","TA card","Explore topic","none")}});var taCard=new taCarousel({collection:thinkAcademyCollection,slideTemplate:templates.slideTemplate,carouselContainerClass:"think-academy-container",carouselId:"ta-carousel"});taCard.on("rendered",function(){$(".description.TA-desc").dotdotdot({watch:true,wrap:"letter"})});taCard.on("carousel:activeIndexChange",function(index){activeSlide.set("index",index)});var metrics;awf.app.registerCog(cogName,{test:true,config:"cog."+cogName,setup:function(){metrics=app.utils.createMetricTag({group:awf.app.id})},views:{mini:{config:"cog."+cogName+".mini",label:"Think Academy",i18n_label:"app.cogs.corporate-strategy.label",icon:"icon-awf-box-closed",render:function($container,parent_friends){if(activeSlide.get("index")!==0){activeSlide.set({index:0});taCard.goToSlideByIndex(0)}}},medium:{label:"Think Academy",i18n_label:"app.cogs.corporate-strategy.label",config:"cog."+cogName+".medium",init:function(){taCard.on("rendered",function(){taCard.$(".carousel-angle button").on("click",carouselEvent);taCard.$el.localize()})},destroy:function(){taCard.$(".carousel-angle button").off("click",carouselEvent)},render:function($container,parentFriends){$container.css("overflow","hidden");if(taCard.$el!==$container)taCard.setElement($container);if(!taParentFriends)taParentFriends=parentFriends;var fetch=thinkAcademyCollection.fetch({dataType:"jsonp",jsonpCallback:"jsonCallback"})}},large:{label:"Think Academy",i18n_label:"app.cogs.corporate-strategy.label",config:"cog."+cogName+".large",render:function($container,parent_friends){metrics.cardEvent("Flip up",cogName+":large");var fetch=thinkAcademyCollection.fetch({dataType:"jsonp",jsonpCallback:"jsonCallback"}).then(renderLarge);if(fetch.state()==="pending")$container.html(templates.loading);activeSlide.off("change",renderLarge);activeSlide.on("change",renderLarge);function renderLarge(){$container.html(Mustache.render(templates.large,thinkAcademyCollection.at(activeSlide.get("index")).toJSON()));$container.localize()}},destroy:function(){metrics.cardEvent("Flip down",cogName+":large")}}}});function carouselEvent(ev){var target=$(ev.currentTarget);if(target.hasClass("disabled"))return;var parameters={ev:"click",action:"button",name:target.attr("aria-label"),section:"carousel",target:"none",module:"think-academy:medium"};metrics.tagEvent(parameters)}})();(function(){var cog=w3n.cogs.timeInOut;var templates={MINI:_.template("<p>{{title}}</p><p>{{iconFont}}</p>"),MEDIUM:w3n.templates.cogs["time-in-out"]["time-in-out-medium.html"],LARGE:w3n.templates.cogs["time-in-out"]["time-in-out-large.html"]};var miniHtml=templates.MINI({title:"Time Here & Away",iconFont:"icon-youribm-award-ribbons"});var timeInOutCollection,timeInOutLarge;awf.app.registerCog("time-in-out",{test:true,init:function(){timeInOutCollection=new w3n.serviceModels.TimeInOut.Collection(null,{id:awf.user.info.cnum});timeInOutLarge=new w3n.cogs.timeInOut.views.timeInOutLarge({collection:timeInOutCollection})},config:"cog:time-in-out",views:{mini:{config:"cog:time-in-out:mini",title:"Time Here & Away",render:function($container,components){$container.html(miniHtml)}},medium:{config:"cog:time-in-out:medium",title:"Time Here & Away",render:function($container,friends){$container.html(Mustache.render(templates.MEDIUM))}},large:{config:"cog:time-in-out:large",title:"Time Here & Away",size:{width:860,height:710},render:function($container,friends){if(timeInOutLarge.$el!==$container)timeInOutLarge.setElement($container);timeInOutCollection.fetch()}}}})})();(function(){w3n.cogs.user_sign_in_prompt={views:{},modal:{}};w3n.cogs.user_sign_in_prompt.views.sign_in_popup=app.base.views.BaseView.extend({template:_.template(w3n.templates.cogs["user-sign-in-prompt"]["sign-in-popup.html"]),events:{"click .js-sigin-popup-dismiss, .js-sigin-popup-cancel":"close","click .js-sigin-popup-submit":"submit"},initialize:function(options){this.options=options;options.modal.on("request-close",function(){if(options.modal.active_state){options.modal.setActiveState(false);options.modal.destroy()}})},render:function(){this.$el.html(this.template());return this},close:function(event){var class_handler=event.currentTarget.className;if(this.options.modal.active_state){this.options.modal.setActiveState(false);this.options.modal.destroy()}if(_.contains(class_handler,"dismiss")){localStorage.setItem("w3n.sign_in_popup.dismissed",true)}},submit:function(){awf.user.login()}});function setSignInModal(){var modal=w3n.cogs.user_sign_in_prompt.modal=new awf.ui.Modal({parent:$("body")}),card=new awf.ui.Card({parent:modal._$modal_container}),view=w3n.cogs.user_sign_in_prompt.views.popup=new w3n.cogs.user_sign_in_prompt.views.sign_in_popup({el:card._$card,modal:modal});view.render();modal.setWidth(320).setHeight(420).setActiveState(true)}awf.user.authentication.done(function(is_authenticated){if(!is_authenticated){if(localStorage.getItem("w3n.sign_in_popup.dismissed")!=="true"&&localStorage.getItem("w3n.user.email")===null){setSignInModal()}}})})();awf.app.registerCog("user-sign-in-prompt",{views:{page:{render:function($container){var sign_in_prompt=_.template(w3n.templates.cogs["user-sign-in-prompt"]["sign-in-prompt.html"])({experience_id:awf.app.experience.id.replace("-identified","")});$container.html(sign_in_prompt)}}}});(function(){awf.app.registerCog("watson-takeover",{flag:"cogs.watson-takeover",setup:function(){console.info("setup :: watson takeover cog")},teardown:function(){console.info("teardown :: watson takeover cog");this.html=null},views:{masthead_tray:{flag:"cogs.watson-takeover.masthead_tray",label:"Watson",icon:"icon-awf-w3-logo-watson",render:function($container,methods){var html="";if(awf.flags.isActive("cogs.watson-takeover.day-1")){html='<div class="watson-takeover day-1"><a target="_blank" href="https://ibm.biz/ibmwow2016"><img alt="watson day 1 event" src="http://w3-workplace.ibm.com/news/images/2016/10/wow-overlay-1-400.jpg"/></a><h2 class="title-2">Get the most from our biggest event of the year wherever you are. <a target="_blank" href="https://ibm.biz/ibmwow2016">ibm.biz/ibmwow2016</a></h2></div>'}else if(awf.flags.isActive("cogs.watson-takeover.day-2")){html='<div class="watson-takeover day-2"><a target="_blank" href="https://ibm.biz/ibmwow2016"><img alt="watson day 2 event" src="http://w3-workplace.ibm.com/news/images/2016/10/wow-overlay-3-400.jpg"/></a><h2 class="title-2">Go behind the scenes at World of Watson. <a target="_blank" href="https://ibm.biz/ibmwow2016">ibm.biz/ibmwow2016</a></h2></div>'}else{var mobile_txt="";if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){mobile_txt='Watch on mobile <a target="_blank" href="http://www.ustream.tv/channel/hjDPbngpDge" style="text-decoration:underline;">www.ustream.tv/channel/hjDPbngpDge</a>'}html='<div class="watson-takeover day-3"><iframe seamless frameborder=0 allowfullscreen webkitallowfullscreen mozallowfullscreen src="https://w3-mediahub.ibm.com/viewerportal/vmds/embed.vp?programId=esc_program%3A110555&contentAssocId=association%3A235736"></iframe><br/><iframe scrolling="no" seamless="seamless" id="captions" src="//stage.streamtext.net/player?event=ibmwow&ff=Verdana,sans-serif&fs=16&fgc=e1e1e1&bgc=000000&header=false&chat=false&scroll=false&controls=false&footer=false&content-style=overflow:hidden" style="height:100px"></iframe><h2 class="title-2">Watch Ginni\'s World of Watson keynote live</h2><p>Don\'t close this window, but if you do, click the Watson icon above to come back. '+mobile_txt+"</p></div>"}$container.html(html)}}}})})();(function(){var cog_name="whatsnew",metrics=null;awf.app.registerCog(cog_name,{test:true,flag:"cogs."+cog_name,setup:function(){var service=app.content.cards.whatsnew;if(service){w3n.cogs.whatsnew.Model=new app.base.models.CompositeModel(cog_name,{initSubmodels:function(){this.addModel(null,new w3n.serviceModels.whatsnew[service.current_service],w3n.cogs.whatsnew.adapters[service.current_service])}})}this.content=app.content.cards[cog_name];this.model=w3n.cogs.whatsnew.Model;metrics=app.utils.createMetricTag({group:awf.app.id})},views:{mini:{flag:"cogs."+cog_name+".mini",icon:"icon-youribm-notecard",label:"What's New",i18n_label:"app.cogs.whatsnew.label",render:function($container,mini_methods){}},medium:{flag:"cogs."+cog_name+".medium",label:"What's New",i18n_label:"app.cogs.whatsnew.label",render:function($container,medium_methods){var view=new w3n.cogs.whatsnew.views.medium({el:$container,model:this.model,medium_methods:medium_methods});this.model.fetch()}},large:{flag:"cogs."+cog_name+".large",label:"What's New",i18n_label:"app.cogs.whatsnew.label",render:function($container,large_methods){metrics.cardEvent("Flip up",cog_name+":large");var view=new w3n.cogs.whatsnew.views.large({el:$container,model:this.model});this.model.fetch()}}}})})();(function(){})();awf.ui.BucketItem.layouts.command=w3n.templates.search["command-layout.html"];awf.ui.BucketItem.layouts.command_card=w3n.templates.search["command-card-layout.html"];(function(){awf.registerLocalSearchChannel("acronyms",{bucket:"acro_abbr",flag:"search.acronym",filters:["title"],src:"data/json/acronyms.json",limit:3,map:function(result){return{data:{title:_.isUndefined(result.acronym)?"":result.acronym,description:_.isUndefined(result.expansion)?"":'<a href="http://w3-03.ibm.com/search/do/search?#query='+result.expansion+'" target="_blank" title="'+result.expansion+'">'+result.expansion+'<i class="icon-awf-chevron-right"></i></a>'}}}})})();(function(){var api="http://w3.ibm.com/bluepages/",search_api=_.template("http://w3.ibm.com/bluepages/?s={{query}}");function openUrl(){window.open(api,"_blank")}function openSearchService(text){window.open(search_api({query:text}),"_blank")}function handle(text){if(_.isEmpty(text)){openUrl()}else{openSearchService(text)}}awf.user.authentication.done(function(){awf.registerCommandChannel("bluepages",{trigger:"bp",aliases:["bluepages"],description:"Search in Bluepage by name, city, job title, etc...",example:"bluepages",results:function(term){if(awf.flags.isActive("search.command-channels.bluepages.instant_results")){var query="//w3-services1.w3-969.ibm.com/myw3/unified-profile/v1/search/user",profile="http://w3.ibm.com/bluepages/profile.html",image="//w3-services1.w3-969.ibm.com/myw3/unified-profile-photo/v1/image/",cnum=awf.user.is_authenticated?awf.user.info.cnum:"",image_size=24;$.ajax({url:query+awf.util.urlParams({searchConfig:"optimized_search",query:term,userId:cnum,rows:5,timeout:2e4,threshold:0}),jsonp:"callback",dataType:"json"}).done(function(response){_.map(response.results,function(item){if(item.nameDisplay||item.nameFull){var email=item.preferredIdentity?'<a href="mailto:'+item.preferredIdentity+'" title="'+item.preferredIdentity+'">'+item.preferredIdentity+"</a>":"",office=item.telephone_office?" | +"+'<a title="Click to call" href="tel:'+item.telephone_office+'">'+item.telephone_office+"</a>":"",mobile=item.telephone_mobile?" | +"+'<a title="Click to call" href="tel:'+item.telephone_mobile+'">'+item.telephone_mobile+"</a> (mobile)":"",role=item.role?item.role+"<br>":"",desc=role+email+office+mobile;awf.search.results.addItem({bucket:"command",channel:"bluepages",data:{title:item.nameDisplay?item.nameDisplay:item.nameFull,email:item.preferredIdentity,description:desc,url:profile+awf.util.urlParams({uid:item.uid}),image:'<div class="image-circle -background-alt" style="width: '+image_size+"px; height: "+image_size+"px; background-image: url("+image+item.uid+awf.util.urlParams({s:image_size,def:"avatar"})+');"></div>',layout:"default"},type:"default"})}})})}return[{data:{example:"bluepages",description:"Example"}}]},handler:handle})})})();(function(){var experiences={},enabled_experiences;function absoluteMatch(cogs,term){var result=_.filter(cogs,_.matches({title:_.capitalize(term)}));if(_.isEmpty(result)){result=_.filter(cogs,_.matches({title:term.toLowerCase()}))}if(_.isEmpty(result)){result=_.filter(cogs,_.matches({title:term.toUpperCase()}))}return result}function aheadMatch(cogs,term){var result=_.filter(cogs,function(item){return item.title.toLowerCase().indexOf(term.toLowerCase())===0});return result}function partMatch(cogs,term){var result=_.filter(cogs,function(item){return _.contains(item.title.toLowerCase(),term.toLowerCase())});return result}function collectData(cogs,term){var filtered=absoluteMatch(cogs,term);filtered=filtered.concat(aheadMatch(cogs,term));filtered=filtered.concat(partMatch(cogs,term));return _.uniq(filtered)}function getCogTitle(cog){var title=null;title=_.get(awf.app.registered_cogs,cog+".views.mini.label");if(!title){title=_.get(awf.app.registered_cogs,cog+".views.medium.label")}if(!title){title=_.get(awf.app.registered_cogs,cog+".views.large.label")}var translated_title=i18next.t("app.cogs."+cog+".label");title=translated_title?translated_title:title;return title}function openCard(card){w3n.goToFlippedCard(card.cog,card.experience)}function hasCard(text){var matched=[],cogs=[];matched=_.map(experiences,function(val,key){var cogs=[];if(_.get(experiences[key],"layout.default_order.grid")){_.forEach(experiences[key].layout.default_order.grid,function(item){cogs.push({id:item.id||item,type:item.type||item,title:getCogTitle(item.type||item)})})}if(_.get(experiences[key],"layout.default_order.mini_grid")){_.forEach(experiences[key].layout.default_order.mini_grid,function(item){cogs.push({id:item.id||item,type:item.type||item,title:getCogTitle(item.type||item)})})}var filtered=collectData(cogs,text);if(filtered.length){return{experience:key,cogs:filtered,label:experiences[key].label}}else{return false}});matched=_.filter(matched,function(key){return key!==false});if(!_.isEmpty(matched)){return matched}else{return false}}function parseMatched(matched){var results=[];matched=_.filter(matched,function(exp){return awf.flags.isActive("experiences."+exp.experience)});var temp=_.map(matched,function(val,key){return _.map(val.cogs,function(cog){return{data:{card_description:"on ",type:cog.type,exp:val.experience,layout:"command_card",on_click:function(){openCard({experience:val.experience,cog:cog.id})}}}})});_.forEach(temp,function(arr){results=results.concat(arr)});return results}function handle(text){if(!_.isEmpty(text)){var results=setCards(text);if(results.length>1){awf.search.results.removeAllItems();_.forEach(results,function(result){awf.search.results.addItem({bucket:"command",channel:"card",data:_.defaults(result.data,{layout:"command_card"}),type:"default"})});awf.search.triggerHandler("change:command",["card"])}else if(results[0].data.title!=="No cards found."){results[0].data.on_click()}}}function setCards(text){var limit=5;var results=[];var matched=hasCard(text);if(matched){var filtered=results.concat(parseMatched(matched));results=_.slice(filtered,0,limit)}else{results.push({data:{title:"No cards found.",layout:"command_card",no_card:true}})}return results}awf.app.one("change:experience",function(){enabled_experiences=["home","ibmer-hub","manager-hub"];_.extend(experiences,_.pick(awf.app.registered_experiences,enabled_experiences));_.forEach(experiences,function(experience){experience.cogs=_.pull(experience.cogs,"corporate-strategy","box","lifecycle_trigger","lifecycle_viewer","localmetrics");experience.layout.default_order.grid=_.pull(experience.layout.default_order.grid,"corporate-strategy","box","lifecycle_trigger","lifecycle_viewer","localmetrics");experience.layout.default_order.mini_grid=_.pull(experience.layout.default_order.mini_grid,"corporate-strategy","box","lifecycle_trigger","lifecycle_viewer","localmetrics")});awf.registerCommandChannel("card",{trigger:"card",aliases:["carte"],description:"Search card on w3 homepage",example:"card",layout:"command_card",results:setCards,handler:handle});_.extend(awf.command_channels.card,{absoluteMatch:absoluteMatch,aheadMatch:aheadMatch,partMatch:partMatch,collectData:collectData,getCogTitle:getCogTitle,hasCard:hasCard,parseMatched:parseMatched,setCards:setCards})})})();(function(){var api="https://w3-connections.ibm.com/homepage/web/gettingStarted/",search_api=_.template("https://w3-connections.ibm.com/search/web/search?scope=&query={{query}}");function openUrl(){window.open(api,"_blank")}function openSearchService(text){window.open(search_api({query:text}),"_blank")}function handle(text){if(_.isEmpty(text)){openUrl()}else{openSearchService(text)}}awf.user.authentication.done(function(){if(awf.flags.isActive("squads.bravo")){awf.registerCommandChannel("connections",{trigger:"con",aliases:["connections"],description:"Search on Connections",example:"con",results:function(){return[{data:{title:"/con Set up a Mac",description:"Example",example:"con"}}]},handler:handle})}})})();(function(){var api="https://w3.ibm.com/help/",search_api=_.template("https://w3.ibm.com/help/#/search?q={{query}}");function openUrl(){window.open(api,"_blank")}function openSearchService(text){window.open(search_api({query:text}),"_blank")}function handle(text){if(_.isEmpty(text)){openUrl()}else{openSearchService(text)}}awf.user.authentication.done(function(){if(awf.flags.isActive("squads.bravo")){awf.registerCommandChannel("help",{trigger:"help",aliases:["h"],description:"Search on HELP@IBM",
example:"help",results:function(){return[{data:{title:"/help Set up a Mac",description:"Example",example:"help"}}]},handler:handle})}})})();(function(){awf.registerLocalSearchChannel("development",{bucket:"development",flag:"search.development || squads.bravo",src:"data/json/development.json",limit:3,map:function(result){return{data:{title:_.isUndefined(result.title)?"":result.title,url:_.isUndefined(result.url)?"":result.url,description:_.isUndefined(result.description)?"":result.description,tags:_.isUndefined(result.tags)?"":result.tags}}}})})();(function(){awf.registerLocalSearchChannel("for-japan",{bucket:"for-japan",flag:"search.for-japan || squads.bravo",src:"data/json/for-japan.json",limit:3,map:function(result){return{data:{title:_.isUndefined(result.title)?"":result.title,url:_.isUndefined(result.url)?"":result.url,description:_.isUndefined(result.description)?"":result.description}}}})})();(function(){awf.registerLocalSearchChannel("hr-links",{bucket:"hr-links",flag:"search.hr-links",limit:3,map:function(result){return{data:{title:result.title||"",url:_.isUndefined(result.url)?"":result.url,description:_.isUndefined(result.description)?"":result.description,tags:_.isUndefined(result.tags)?"":result.tags}}}})})();(function(){awf.registerLocalSearchChannel("manager-links",{bucket:"manager-links",flag:"search.manager-links || squads.bravo",limit:3,map:function(result){return{data:{title:result.title||"",url:_.isUndefined(result.url)?"":result.url,description:_.isUndefined(result.description)?"":result.description,tags:_.isUndefined(result.tags)?"":result.tags}}}})})();(function(){awf.registerLocalSearchChannel("megamenu",{bucket:"topsearch",flag:"search.megamenu",limit:3,map:function(result){return{data:{title:_.isUndefined(result.text)?"":result.text,url:_.isUndefined(result.url)?"":result.url,description:_.isUndefined(result.description)?"":result.description,tags:_.isUndefined(result.tags)?"":result.tags}}}})})();(function(){var url="data/json/popular-links.json";var new_model=null;var limit=3;function parseData(item){return{data:{title:_.isUndefined(item.title)?"":item.title,url:_.isUndefined(item.url)?"":item.url,description:_.isUndefined(item.description)?"":item.description,image:_.isUndefined(item.classname)?"":'<em class="'+item.classname+'" style="font-size: 25px; line-height: 32px;"></em>',tags:_.isUndefined(item.tags)?"":item.tags}}}function fetchFail(er,dfr){dfr.reject({error:er,msg:"lookup failed"})}function collectData(collection,term){var filtered=_.filter(collection,function(item){return _.contains(item.title.toLowerCase(),term.toLowerCase())});var limited=_.slice(filtered,0,limit);return _.map(limited,parseData)}function fetchJson(dfr){$.ajax({url:url,dataType:"json"}).done(function(response){var resolution=_.map(response,parseData);dfr.resolve(resolution)}).fail(function(er){fetchFail(er,dfr)})}awf.registerSearchChannel("places",{bucket:"places",flag:"search.places",onQuery:function(term){var dfr=$.Deferred();if(_.has(awf.app.registered_cogs,"places")){var is_exist=false;_.forEach(awf.app.registered_experiences,function(val,key){if(_.contains(awf.app.registered_experiences[key].cogs,"places")&&awf.app.experience.id===key){is_exist=true}});if(is_exist){var model=awf.app.experience.cogs.places.data.model;awf.app.experience.cogs.places.data.fetchModelData({}).done(function(results){var resolution=collectData(model.get("all"),term);dfr.resolve(resolution)})}else{if(new_model){var resolution=collectData(new_model.get("all"),term);dfr.resolve(resolution)}else{new_model=new app.serviceModels.places.compositeModel;if(awf.user.is_authenticated){new_model.fetchAll().done(function(){var resolution=collectData(new_model.get("all"),term);dfr.resolve(resolution)}).fail(function(er){fetchFail(er,dfr)})}else{new_model.fetchJson(true).done(function(){var resolution=collectData(new_model.get("all"),term);dfr.resolve(resolution)}).fail(function(er){fetchFail(er,dfr)})}}}}else{fetchJson(dfr)}return dfr.promise()}})})();(function(){awf.registerLocalSearchChannel("secrets",{bucket:"topsearch",flag:"search.secrets",src:"data/json/secret.json",limit:3,map:function(result){return{data:{title:_.isUndefined(result.title)?"":result.title,url:_.isUndefined(result.url)?"":result.url,description:_.isUndefined(result.description)?"":result.description,tags:_.isUndefined(result.tags)?"":result.tags}}}})})();(function(){awf.registerLocalSearchChannel("suggested-matches-local",{bucket:"topsearch",flag:"search.suggested-matches-local",limit:3,map:function(result){return{data:{title:_.isUndefined(result.title)?"":result.title,url:_.isUndefined(result.url)?"":result.url,description:_.isUndefined(result.description)?"":result.description,tags:_.isUndefined(result.tags)?"":result.tags}}}})})();(function(){awf.registerLocalSearchChannel("suggested-matches-ww",{bucket:"topsearch",flag:"search.suggested-matches-ww",src:"data/json/suggested-match/suggested-match-ww.json",limit:3,map:function(result){return{data:{title:_.isUndefined(result.title)?"":result.title,url:_.isUndefined(result.url)?"":result.url,description:_.isUndefined(result.description)?"":result.description,tags:_.isUndefined(result.tags)?"":result.tags}}}})})();(function(){awf.registerLocalSearchChannel("swg",{bucket:"swg",flag:"search.swg || squads.bravo",src:"data/json/swg-search-results.json",limit:3,map:function(result){return{data:{title:_.isUndefined(result.title)?"":result.title,url:_.isUndefined(result.url)?"":result.url,description:_.isUndefined(result.description)?"":result.description,tags:_.isUndefined(result.tags)?"":result.tags}}}})})();(function(){var search_systems=[{id:"w3",label:"w3",default_api:"",search_api:"",checked:true},{id:"bp",label:"BluePages",default_api:"http://w3.ibm.com/bluepages/",search_api:"http://w3.ibm.com/bluepages/?s={{term}}"},{id:"help",label:"Help@IBM",default_api:"https://w3.ibm.com/help/",search_api:"https://w3.ibm.com/help/#/search?q={{term}}"},{id:"conn",label:"Connections",default_api:"https://w3-connections.ibm.com/homepage/web/gettingStarted/",search_api:"https://w3-connections.ibm.com/search/web/search?scope=&query={{term}}"},{id:"conn_cloud",label:"Connections Cloud",default_api:"https://apps.na.collabserv.com/search/web/search?scope=allconnections",search_api:"https://apps.na.collabserv.com/search/web/search?query={{term}}&scope=allconnections"},{id:"issi",label:"ISSI",default_api:"http://w3-01.ibm.com/download/standardsoftware/PC/lang_en/issiCatalogPC.html",search_api:"http://w3-01.ibm.com/download/standardsoftware/PC/lang_en/issiCatalogPC.html?srchdata={{term}}"}];awf.app.one("change:experience",function(){if(awf.flags.isActive("squads.bravo && search.direct-search-options")){var search_systems_view=new w3n.search.views.systems_list({search_systems:search_systems}).render();$(".js-results-wrap").after(search_systems_view.el)}})})();(function(){w3n.search=w3n.search||{};w3n.search.views=w3n.search.views||{};w3n.search.views.systems_list=app.base.views.BaseView.extend({template:w3n.templates.search["search-systems-layout.html"],initialize:function(options){var self=this;self.options=options||{};self.search_systems=self.options.search_systems||[];self.search_instance=awf.page.children.masthead.children.search;self.is_first=true;self.has_default_system_api=true;awf.search.on("change:context",function(ev,context){self.toggleSearchSystems(context)});self.search_instance.$el.on("keyup",function(e){if(!self.search_instance.term){self.setSearchEndpoint(null,{empty_term:true})}else if(e.keyCode!==13&&self.has_default_system_api){self.setSearchEndpoint()}})},render:function(options){app.base.views.BaseView.prototype.render.call(this,{systems:this.search_systems});return this},events:{"click .js-search-systems-button":"search","change input[name='searchSystems']":"setSearchEndpoint"},getSelectedOption:function(){var selected=this.$el.find('input[name="searchSystems"]:checked').val(),searchOption=_.find(this.search_systems,{id:selected});return searchOption},search:function(e){this.search_instance.trigger("click:submit",[this.search_instance.term])},setSearchEndpoint:function(e,params){params=params||{};if(this.is_first){this.setDefaultEndpoint();this.is_first=false}var selectedOption=this.getSelectedOption();if(params.empty_term){this.search_instance.setEndpoint(selectedOption.default_api);this.has_default_system_api=true}else{this.search_instance.setEndpoint(selectedOption.search_api);this.has_default_system_api=false}},setDefaultEndpoint:function(){this.default_endpoint=this.search_instance.endpoint;var w3_option=_.find(this.search_systems,{id:"w3"});w3_option.search_api=this.search_instance.endpoint;w3_option.default_api=this.search_instance.endpoint},toggleSearchSystems:function(context){$(".js-search-systems",this.$el)[context=="command"?"hide":"show"]()}})})();(function(){awf.ui.Spinner.template=app.templates.components["loading-mark"]["loading-mark.html"];var fail_html='<div style="font-size: 24px; text-align: center; position: absolute; top: 50%; left: 50%; transform:translate(-50%,-50%);"><p style="font-size: 64px;">â ï¸ â¯ ð¤</p><p>Well this is embarrassing... It broke!<br />Please try again soon.</p></div>';function transferPreferences(){console.time("transfering preferences");var experience_key_map={"experience : home":"experience_home","experience : ibmer-hub":"experience_ibmer_hub","experience : manager-hub":"experience_manager_hub"},transfered_ls_key="transfered_construct_values",transfered_ls=localStorage.getItem(transfered_ls_key);if(!transfered_ls){var experience_preferences_transfer_hold=$.Deferred();experience_preferences_transfer_hold.always(function(){console.timeEnd("transfering preferences")});awf.app.experience_blockers.experience_preferences_transfer_hold=experience_preferences_transfer_hold;awf.construct.setEndpoint(awf.app.composition.app.customization.service.endpoint);awf.construct.fetchAll(-1).done(function(){var transfered_pref=awf.construct.getOrCreate("transfered");if(transfered_pref.value){experience_preferences_transfer_hold.resolve();localStorage.setItem(transfered_ls_key,new Date);console.log("Construct service data has already been transfered.")}else{var tasks=[],change_claims=[];var theme_value_map={default:"default","high-contrast":"contrast","low-light":"lowlight"},old_theme_pref=awf.construct.getOrCreate("color-theme"),new_theme_pref=awf.construct.getOrCreate("app-theme"),new_theme_value=theme_value_map[old_theme_pref.value];if(new_theme_value){new_theme_pref.setValue(new_theme_value);tasks.push(new_theme_pref.save());localStorage.setItem("app-theme",new_theme_value);awf.page.themes.applyTheme(new_theme_value);console.log(_.template('{{old_key}}\'s theme "{{old_value}}" has been transfered to {{new_key}}\'s theme "{{new_value}}"')({old_key:"color-theme",old_value:old_theme_pref.value,new_key:"app-theme",new_value:new_theme_pref.value}))}else{console.log("No old preferences found for theme selection.")}_.forEach(experience_key_map,function(old_key,new_key){console.group(_.template("{{old_key}} -> {{new_key}}")({old_key:old_key,new_key:new_key}));var old_pref=awf.construct.getOrCreate(old_key),new_pref=awf.construct.getOrCreate(new_key);if(old_pref.value===null){console.log("No old preferences found.")}else{console.log("old_pref: ",old_pref.value);var new_value={grid:_.clone(old_pref.value.main),mini_grid:_.clone(old_pref.value.mini)};_.pull(new_value.grid,"talent");_.pull(new_value.mini_grid,"talent");new_pref.setValue(new_value);console.log("new_pref: ",new_pref.value);var save_task=new_pref.save();tasks.push(save_task);change_claims.push(new_key.substring("experience : ".length));save_task.done(function(){awf.util.setStoredObject(new_key,new_value)})}console.groupEnd()});$.when.apply($,tasks).done(function(){console.log("Construct service data transfer complete. Declaring done...");experience_preferences_transfer_hold.resolve();transfered_pref.setValue((new Date).toString()).save().done(function(response){localStorage.setItem(transfered_ls_key,new Date);console.log("Construct service data transfer has been declared done.")}).fail(function(){console.warn("Construct service data transfer could not be declared done.")})}).fail(function(er){console.log("Construct service data transfer failed.");console.error(er)})}}).fail(function(){experience_preferences_transfer_hold.resolve()})}else{console.log("localStorage has claimed that construct values have been transfered")}}awf.user.authentication.done(function(is_authenticated){if(is_authenticated){awf.construct.service.lazyFetch().fail(function(){awf.app.postMessage("warn","Your preferences could not be loaded at this time.")});if(awf.user.services.oauth){var val=(new Date).getTime();console.log(" >> TESTING >> authenticated");awf.tagMetric({ev:"page load",name:awf.user.info.email,target:awf.user.info.cnum,action:"authenticated",group:"W3ID",module:val})}}});var compose_dfr=$.ajax({url:"config.json",dataType:"json",cache:false}).done(function(response){var processed_config=awf.feature_packs.process(response);awf.app.compose(processed_config)}),content_dfr=$.ajax({url:"content.json",dataType:"json",cache:false}).done(function(response){app.content=response;app.config=app.config||{proxy:"/proxy"}});$.when(compose_dfr,content_dfr).done(function(compose_response,content_response){registerEvents(content_response[0]);var start_dfr=awf.app.start();transferPreferences();start_dfr.done(function(){var pilot_flag_path="w3id_pilot || w3id_rr",pilot_flag_introduction_key="w3id_pilot",has_pilot_been_introduced_before=!!localStorage.getItem(pilot_flag_introduction_key),w3id_pilot_ls_key="w3id_pilot_participant";console.log("pilot_flag_path :",pilot_flag_path);console.log("awf.flags.isActive(pilot_flag_path) :",awf.flags.isActive(pilot_flag_path));function handlePilotProgram(){if(awf.flags.isActive(pilot_flag_path)){console.warn("PILOT: Setting LS Key");var val=(new Date).getTime();localStorage.setItem(w3id_pilot_ls_key,val);if(!has_pilot_been_introduced_before){localStorage.setItem(pilot_flag_introduction_key,val);awf.tagMetric({ev:"page load",name:awf.user.info.email,target:awf.user.info.cnum,action:"added to W3ID",group:"W3ID",module:val})}}else{console.warn("PILOT: Removing LS Key");localStorage.removeItem(w3id_pilot_ls_key)}}var pilot_inclusion_dfr=$.Deferred(),authenticated_dfr=$.Deferred();awf.flags.settled(pilot_flag_path).always(pilot_inclusion_dfr.resolve);awf.user.authentication.done(function(is_authenticated){if(is_authenticated){authenticated_dfr.resolve()}else{authenticated_dfr.reject()}});$.when(pilot_inclusion_dfr,authenticated_dfr).done(handlePilotProgram).fail(function(){console.info("Making no change to W3ID pilot program inclusion.")});awf.i18n.on("apply:language",function(lc){var lng_ns=w3n.utils.getCurrentI18nLngNs();if(lng_ns){moment.locale(lng_ns)}else{console.log("awf.i18n does not has language loaded.")}});awf.search.results.on("change",function(ev){console.log("Running localize on results");awf.page.children.masthead.children.search_results.$el.localize()});awf.user.authentication.done(function(is_authenticated){if(is_authenticated&&w3n.connections.authentication){w3n.connections.authentication.auth_is_set=true;w3n.connections.authentication.check(w3n.connections.is_authenticated)}});awf.flags.runAndWatch("search.watson-search-pilot",function(is_active){if(is_active){awf.page.children.masthead.children.search.setEndpoint("https://onesearch.w3-969.ibm.com/onesearch#/search?query={{term}}&referrer={{referrer}}")}});awf.user.authentication.done(function(is_authenticated){if(is_authenticated){var user={uid:awf.user.info.cnum,email:awf.user.info.email,is_manager:false,is_employee:false};awf.user.services.odw_info.fetch(-1).done(function(response){user.is_manager=awf.__.FeatureToggler.handlers.manager.check(true);user.is_employee=awf.__.FeatureToggler.handlers.employment_group.check("employee");_.forEach(user,function(value,key){console.log("w3n.user."+key+":",value);localStorage.setItem("w3n.user."+key,value)})}).fail(function(er){console.log(er)})}});console.log("awf.flags.isActive(experiences.manager-hub.megamenu) "+awf.flags.isActive("experiences.manager-hub.megamenu"));var mm_was_run_mh=false;awf.flags.runAndWatch("experiences.manager-hub.megamenu",function(is_active){if(is_active&&!mm_was_run_mh){mm_was_run_mh=true;console.log("megaMenu manager hub setup will be load, is_active "+is_active);awf.app.setupExperienceTopZone=awf.app.setupExperienceTopZone||{};awf.app.setupExperienceTopZone(w3n.getMegaMenuExperiencesMh());console.log("megaMenu manager hub setup was loaded..")}});console.log("awf.flags.isActive(experiences.ibmer-hub.megamenu) "+awf.flags.isActive("experiences.ibmer-hub.megamenu"));var mm_was_run_ih=false;awf.flags.runAndWatch("experiences.ibmer-hub.megamenu",function(is_active){if(is_active&&!mm_was_run_ih){mm_was_run_ih=true;console.log("megaMenu ibmer hub setup will be load, is_active "+is_active);awf.app.setupExperienceTopZone=awf.app.setupExperienceTopZone||{};awf.app.setupExperienceTopZone(w3n.getMegaMenuExperiencesIh());console.log("megaMenu ibmer hub setup was loaded..")}});var safe_to_call_rearrange_dfr=$.Deferred();safe_to_call_rearrange_dfr.done(function(){awf.util.logPromise(setCogDefaultGridPosition("bluepages",1));if(awf.user.is_authenticated){setManagerHubAlertBadge()}});if(awf.app.experience&&awf.app.experience.id=="home"){safe_to_call_rearrange_dfr.resolve()}else{awf.app.one("change:experience",function(ev,index,id){if(id=="home"){safe_to_call_rearrange_dfr.resolve()}})}setupLocalSearchData();setProfiledBanner();awf.page.children.footer.addItem({label:"yourIBM Accessibility",i18n:{label:"w3.footer.labels.accessbility"},href:"https://w3-connections.ibm.com/wikis/home?lang="+lang.toLowerCase()+"#!/wiki/Wf49a0f070e65_41de_bb0a_ff81f7eb3319/page/yourIBM%20Accessibility%20Features"});awf.page.children.footer.addItem({label:"yourIBM Community",i18n:{label:"w3.footer.labels.community"},href:"https://w3-connections.ibm.com/communities/service/html/communitystart?communityUuid=6dd64b47-6463-4cf4-8f10-c18d63bf00b3&lang="+lang.toLowerCase()})}).fail(function(er){$("body").css({background:"#fee"}).html(fail_html);console.log("%cð«","font-size: 64px;");console.warn("awf.app.start() encountered an error");console.error(er)})}).fail(function(er){$("body").css({background:"#fee"}).html(fail_html);console.log("%cð«","font-size: 64px;");console.warn("Either `content` or `config` failed to load.");console.error(er)});function setupLocalSearchData(){if("hr-links"in awf.search.channels){awf.user.services.odw_info.lazyFetch().done(function(){var country_id=_.get(awf,"user.data.odw_info.Profile.Locations.0.Country.@id");if(country_id){var url="data/json/hr-search-result/"+country_id+".json";$.getJSON(url).done(function(response){awf.search.channels["hr-links"].setData(_.compact(response))}).fail(function(){console.warn("Fetch hr links source data failed.")})}else{console.warn("Cannot set up hr-links channel -- country_id was not found.")}})}if("manager-links"in awf.search.channels){awf.user.services.odw_info.lazyFetch().done(function(){var country_id=_.get(awf,"user.data.odw_info.Profile.Locations.0.Country.@id");if(country_id){var url="data/json/mgr-custom-search-results/mgr_custom_search_results_"+country_id+".json";$.getJSON(url).done(function(response){var results=[];_.forEach(response,function(value){_.forEach(value,function(obj){results.push(obj)})});awf.search.channels["manager-links"].setData(_.compact(results))}).fail(function(){console.warn("Fetch manager links source data failed.")})}else{console.warn("Cannot set up manager-links channel -- country_id was not found.")}})}if("suggested-matches-local"in awf.search.channels){awf.user.services.odw_info.lazyFetch().done(function(){var country_code=_.get(awf,"user.data.odw_info.User.Id");if(country_code){country_code=/c=\w+/.exec(country_code).toString().replace("c=","");var url="data/json/suggested-match/suggested-match-"+country_code+".json";$.getJSON(url).done(function(response){awf.search.channels["suggested-matches-local"].setData(_.compact(response))}).fail(function(){console.warn("Fetch Suggested matches source data failed.")})}else{console.warn("Cannot set up Suggested matches channel -- country_id was not found.")}})}if("megamenu"in awf.search.channels){awf.app.cogs.sitelinks._maybeSetupCog();awf.app.cogs.sitelinks.data.fetchData(-1).done(function(response){var results=[];_.forEach(response,function(value){_.forEach(value.panel,function(value){_.forEach(value.links,function(value){results.push(value)})})});awf.search.channels.megamenu.setData(_.compact(results))}).fail(function(){console.warn("Fetch Megamenu source data failed.")})}}function setManagerHubAlertBadge(){if(awf.flags.isActive("experiences.manager-hub.left-nav-badge")){var ExperienceAlertsModel=new w3n.serviceModels.wsf.ExperienceAlerts;var mgrHubAlertBadge;ExperienceAlertsModel.fetch({cache:false}).then(function(){mgrHubAlertBadge=new awf.ui.Badge({number:parseInt(ExperienceAlertsModel.attributes.UNREAD_COUNT),parent:$('[title="Manager Hub"] span.vertical-nav__item__icon.js-icon:visible')})}.bind(this));awf.app.on("change:experience",function(ev,index,id){if(awf.app.experience.id!=="manager-hub"){var ExperienceAlertsModel=new w3n.serviceModels.wsf.ExperienceAlerts;ExperienceAlertsModel.fetch({cache:false}).then(function(){mgrHubAlertBadge.render();mgrHubAlertBadge.setNumber(parseInt(ExperienceAlertsModel.attributes.UNREAD_COUNT))})}})}}function setProfiledBanner(){var ecm=new app.serviceModels.banners.ecm;var json=new app.serviceModels.banners.json;if(awf.flags.isActive("banner.profiled_banner")){ecm.fetch().done(function(){awf.page.children.notifications.json=ecm.toJSON();awf.page.children.notifications.render()}.bind(this)).fail(function(){console.warn("Fetch Profiled banner data failed.")}.bind(this))}else if(awf.flags.isActive("banner.static_banner")){json.fetch().done(function(){awf.page.children.notifications.json=json.toJSON();awf.page.children.notifications.render()}.bind(this)).fail(function(){console.warn("Fetch JSON banner data failed.")}.bind(this))}}function setMastheadCog(id){if(!id){awf.page.children.masthead.children.trays.setCurrent(null);return true}else{var ids=_.keys(awf.page.children.masthead.children.trays.trays);if(_.contains(ids,id)){awf.page.children.masthead.children.trays.setCurrent(id);return true}else{console.warn("Cannot open masthead cog `"+id+"`.");return false}}}function registerEvents(content_response){awf.app.registerEvent("watson-takeover-day-1",{start:content_response.events.takeover["watson-day-1"].start,end:content_response.events.takeover["watson-day-1"].end,flag:"cogs.watson-takeover.day-1",callback:function(){setMastheadCog("watson-takeover")}});awf.app.registerEvent("watson-takeover-day-2",{start:content_response.events.takeover["watson-day-2"].start,end:content_response.events.takeover["watson-day-2"].end,flag:"cogs.watson-takeover.day-2",callback:function(){setMastheadCog("watson-takeover")}});awf.app.registerEvent("watson-takeover-day-3",{start:content_response.events.takeover["watson-day-3"].start,end:content_response.events.takeover["watson-day-3"].end,flag:"cogs.watson-takeover.day-3",callback:function(){setMastheadCog("watson-takeover")}})}function setCogDefaultGridPosition(cog_id,index){var dfr=$.Deferred(),pref=awf.construct.getOrCreate("experience : home");pref.fetch(-1).done(function(){var val=pref.value,saved_order=_.get(val,"grid"),saved_mini_order=_.get(val,"mini_grid");if(saved_mini_order){if(_.contains(saved_mini_order,cog_id)){dfr.resolve(false,"User has already customized the position of the cog. (in the mini grid)")}}if(dfr.state()=="pending"){if(saved_order){var displayed_order=_.map(awf.page.grid.items,"cog_id"),delta=_.difference(displayed_order,saved_order);if(_.contains(delta,cog_id)){var cog_index=_.indexOf(displayed_order,cog_id),order=_.map(_.keys(displayed_order),function(key){return parseInt(key,10)});order.splice(cog_index,1);order.splice(index,0,cog_index);awf.page.grid.setOrder(order,true);val.grid=_.map(awf.page.grid.items,"cog_id");pref.setValue(val).save().done(function(){setTimeout(function(){awf.util.setStoredObject(awf.app.experience.key,val)},3e3);dfr.resolve(true,"save complete")}).fail(function(er){dfr.reject("save failed",er)})}else{if(_.contains(displayed_order,cog_id)){dfr.resolve(false,"User has already customized the position of the cog.")}else{dfr.reject("Cog was not found among displayed cogs.")}}}else{dfr.resolve(false,"No user preference for this grid")}}});return dfr.promise()}var LOG=function(){};w3n.goToExperience=function(id){var dfr=$.Deferred(),dfr_modal=$.Deferred();LOG("going to experience");if(_.get(awf,"modal.active_state")){LOG("active modal, about to trigger close");awf.modal.one("close-complete",function(ev,val){LOG("active modal close complete");dfr_modal.resolve()});awf.modal.trigger("request-close")}else{LOG("no active modal");dfr_modal.resolve()}dfr_modal.done(function(){LOG("done waiting for modal");if(awf.app.experience.id==id){LOG("we are already on the experience we want");dfr.resolve()}else{var flag=awf.app.registered_experiences[id].flag;if(flag){LOG("experience is feature flagged");if(awf.flags.isActive(flag)){LOG("flag is active");setExperience(id)}else{LOG("flag is inactive");dfr.reject()}}else{LOG("experience is NOT feature flagged");setExperience(id)}}function setExperience(id){LOG("changing the experience now");awf.app.one("change:experience",function(ev,index,id){LOG("experience changed!");dfr.resolve()});awf.app.setCurrentExperience(id)}});return dfr.promise()};w3n.goToFlippedCard=function(id,experience){var dfr=$.Deferred(),exp_dfr=w3n.goToExperience(experience||awf.app.experience.id);exp_dfr.done(function(){LOG("going to flipped card");if("grid"in awf.page||"mini_grid"in awf.page){var cards={};if("grid"in awf.page){_.forEach(awf.page.grid.items,function(item){cards[item.cog_id]={card:item.children.medium_card,has_large:!!item.children.large_card}})}if("mini_grid"in awf.page){_.forEach(awf.page.mini_grid.items,function(item){cards[item.cog_id]={card:item.children.card,has_large:!!item.children.large_card}})}LOG("available cards :",cards);if(id in cards){var card=cards[id];if(card.has_large){LOG("about to flip the card!");card.card.trigger("request-open");dfr.resolve()}else{console.warn("goTo >> no Large Card!")}}else{console.warn("goTo >> no Card with id `"+id+"` exists!")}}else{console.warn("goTo >> no Grid!")}});return dfr.promise()}})();
//# sourceMappingURL=w3n.min.js.map